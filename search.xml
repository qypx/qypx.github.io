<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>WOEç¼–ç ä¸IVå€¼</title>
    <url>/2021/07/17/WOE%E7%BC%96%E7%A0%81%E4%B8%8EIV%E5%80%BC/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å‚è€ƒ <a href="https://zhuanlan.zhihu.com/p/74165987" target="_blank" rel="noopener">WOEä¸IVå€¼æµ…è°ˆ - çŸ¥ä¹ (zhihu.com)</a></p>
</blockquote>
<h4 id="0-Introduction"><a href="#0-Introduction" class="headerlink" title="0. Introduction"></a>0. Introduction</h4><p>WOE (weight of evidence): è¯æ®æƒé‡<br>IV (information value): ä¿¡æ¯å€¼</p>
<p>è®¡ç®—WOEä¸IVå€¼çš„æ„ä¹‰ï¼š<br>ï¼ˆ1ï¼‰ç”¨woeç¼–ç å¯ä»¥å¤„ç†ç¼ºå¤±å€¼é—®é¢˜ã€‚<br>ï¼ˆ2ï¼‰IVå€¼å¯ä»¥è¡¡é‡å„å˜é‡å¯¹ y çš„é¢„æµ‹èƒ½åŠ›ï¼Œç”¨äºç­›é€‰å˜é‡ã€‚<br>ï¼ˆ3ï¼‰å¯¹ç¦»æ•£å‹å˜é‡ï¼Œwoeå¯ä»¥è§‚å¯Ÿå„ä¸ªlevelé—´çš„è·³è½¬å¯¹oddsçš„æå‡æ˜¯å¦å‘ˆçº¿æ€§ï¼Œè€ŒIVå¯ä»¥è¡¡é‡å˜é‡æ•´ä½“ï¼ˆè€Œä¸æ˜¯æ¯ä¸ªlevelï¼‰çš„é¢„æµ‹èƒ½åŠ›ã€‚<br>ï¼ˆ4ï¼‰å¯¹è¿ç»­å‹å˜é‡ï¼Œwoeå’ŒIVå€¼ä¸ºåˆ†ç®±çš„åˆç†æ€§æä¾›äº†ä¸€å®šçš„ä¾æ®ã€‚</p>
<a id="more"></a>
<h4 id="1-WOE"><a href="#1-WOE" class="headerlink" title="1. WOE"></a>1. WOE</h4><h5 id="1-1-WOEçš„è®¡ç®—æ–¹å¼"><a href="#1-1-WOEçš„è®¡ç®—æ–¹å¼" class="headerlink" title="1. 1 WOEçš„è®¡ç®—æ–¹å¼"></a>1. 1 WOEçš„è®¡ç®—æ–¹å¼</h5><script type="math/tex; mode=display">
WOE_i = ln(\frac{\#B_i/\#B_T}{\#G_i/\#G_T})</script><p>å…¶ä¸­ $i$ è¡¨ç¤ºç¬¬ $i$ ä¸ªåˆ†ç®±ï¼Œå³<strong>ä¸€ä¸ªå˜é‡çš„æ¯ä¸ªåˆ†ç®±éƒ½æœ‰ä¸€ä¸ª WOE å€¼</strong>ï¼Œ</p>
<p> $#B_i$ æ˜¯ç¬¬ $i$ ç®±ä¸­åå®¢æˆ·çš„äººæ•°<br>$#G_i$ æ˜¯ç¬¬iç®±ä¸­å¥½å®¢æˆ·äººæ•°<br>$#B_T$ æ˜¯æ€»å…±åå®¢æˆ·äººæ•°<br>$#G_T$ æ˜¯æ€»å…±å¥½å®¢æˆ·äººæ•°</p>
<p>å®è´¨ä¸ŠWOEè¡¨ç¤ºçš„æ˜¯ <em>å½“å‰åˆ†ç®±ä¸­å¥½åå®¢æˆ·çš„æ¯”ä¾‹</em> ä¸ <em>æ€»ä½“å¥½åå®¢æˆ·æ¯”ä¾‹</em>  çš„å·®å¼‚</p>
<p>å¦‚æœWOEçš„<strong>ç»å¯¹å€¼</strong>è¶Šå¤§ï¼Œè¿™ç§å·®å¼‚å°±è¶Šæ˜æ˜¾ï¼Œ<strong>ç»å¯¹å€¼</strong>è¶Šå°å°±è¡¨æ˜å·®å¼‚è¶Šä¸æ˜æ˜¾ã€‚å¦‚æœWOEä¸º0ï¼Œåˆ™è¯´æ˜è¯¥åˆ†ç®±ä¸­å¥½åå®¢æˆ·æ¯”ä¾‹ç­‰äºéšæœºå¥½åå®¢æˆ·æ¯”å€¼ï¼Œæ­¤æ—¶è¿™ä¸ªåˆ†ç®±å°±æ— é¢„æµ‹èƒ½åŠ›ã€‚</p>
<p><img src="/2021/07/17/WOEç¼–ç ä¸IVå€¼/image-20210717175233815.png" alt="image-20210717175233815"></p>
<h5 id="1-2-WOEç¼–ç çš„å¥½å¤„"><a href="#1-2-WOEç¼–ç çš„å¥½å¤„" class="headerlink" title="1.2 WOEç¼–ç çš„å¥½å¤„"></a>1.2 WOEç¼–ç çš„å¥½å¤„</h5><p><img src="/2021/07/17/WOEç¼–ç ä¸IVå€¼/image-20210717175451426.png" alt="image-20210717175451426" style="zoom:80%;"></p>
<h5 id="1-3-å¯¹äºè¿ç»­å‹å˜é‡ï¼Œå¦‚ä½•è¿›è¡Œ-WOE-ç¼–ç "><a href="#1-3-å¯¹äºè¿ç»­å‹å˜é‡ï¼Œå¦‚ä½•è¿›è¡Œ-WOE-ç¼–ç " class="headerlink" title="1.3 å¯¹äºè¿ç»­å‹å˜é‡ï¼Œå¦‚ä½•è¿›è¡Œ WOE ç¼–ç "></a>1.3 å¯¹äºè¿ç»­å‹å˜é‡ï¼Œå¦‚ä½•è¿›è¡Œ WOE ç¼–ç </h5><p>åœ¨è®¡ç®—WOEç¼–ç å‰éœ€è¦å¯¹è¿ç»­å˜é‡è¿›è¡Œåˆ†ç®±ï¼ˆbinningï¼‰å¤„ç†</p>
<h6 id="1-3-1-åˆ†ç®±æ•°é‡"><a href="#1-3-1-åˆ†ç®±æ•°é‡" class="headerlink" title="1.3.1 åˆ†ç®±æ•°é‡"></a>1.3.1 åˆ†ç®±æ•°é‡</h6><p>ä¸€èˆ¬æ¥è¯´10~20ä¸ªåˆ†ç®±è¶³å¤Ÿäº†ï¼Œå› ä¸ºæ¯ä¸ªåˆ†ç®±åº”ä¿è¯ä¸å°‘äº5%çš„æ ·æœ¬æ•°ã€‚åˆ†ç®±æ•°é‡å†³å®šäº†å¹³æ»‘ç¨‹åº¦ï¼Œåˆ†ç®±æ•°è¶Šå°‘å¹³æ»‘åº¦è¶Šé«˜ã€‚æ‰€ä»¥ä¸€èˆ¬é‡‡ç”¨å…ˆç²¾ç»†åˆ†ç®±ï¼ˆfine classingï¼‰ï¼Œåˆå§‹å°†ç®±æ•°åˆ†æˆ20~50ä¸ªç®±ï¼Œç„¶åè¿›è¡Œç²—åˆ†ç®±ï¼ˆcoarse classingï¼‰ï¼Œåˆ©ç”¨IVå€¼ã€åŸºå°¼ç³»æ•°ã€å¡æ–¹ç»Ÿè®¡é‡ç­‰å€¼å°†ç®±æ•°åˆå¹¶ï¼Œé€šå¸¸æœ€å¤š10ç®±ã€‚ç›®çš„æ˜¯é€šè¿‡åˆ›å»ºæ›´å°‘çš„ç®±å­æ¥å®ç°ç®€åŒ–ï¼Œæ¯ä¸ªç®±å­å…·æœ‰æ˜æ˜¾ä¸åŒçš„é£é™©å› å­åŒæ—¶æœ€å°åŒ–ä¿¡æ¯æŸå¤±ã€‚</p>
<p>å¦‚æœç¼ºå¤±å€¼æœ‰é¢„æµ‹èƒ½åŠ›ï¼Œåˆ™å°†ç¼ºå¤±å€¼å•ç‹¬åˆ†ä½œä¸€ç®±æˆ–è€…æ˜¯åˆå¹¶åˆ°æ‹¥æœ‰ç›¸ä¼¼é£é™©å› å­çš„åˆ†ç®±ä¸­å».</p>
<p>ä¸ºä»€ä¹ˆä¸åˆ†1000ç®±ï¼Ÿæ›´å°‘çš„ç®±æ•°èƒ½å¤Ÿæ•æ‰åˆ°æ•°æ®ä¸­çš„é‡è¦æ¨¡å¼ï¼ŒåŒæ—¶å¿½ç•¥å™ªå£°ã€‚å½“æŸä¸€åˆ†ç®±ä¸­æ ·æœ¬æ•°å°‘äº5%ï¼Œåˆ™è¯¥ç®±å¯èƒ½ä¸æ˜¯æ•°æ®åˆ†å¸ƒçš„ä¸€ä¸ªçœŸå®åæ˜ ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´æ¨¡å‹ä¸ç¨³å®šã€‚</p>
<h6 id="1-3-2-å¤„ç†åˆ†ç®±ä¸­æ²¡æœ‰å“åº”æ ·æœ¬æˆ–è€…å…¨éƒ¨æ˜¯å“åº”æ ·æœ¬"><a href="#1-3-2-å¤„ç†åˆ†ç®±ä¸­æ²¡æœ‰å“åº”æ ·æœ¬æˆ–è€…å…¨éƒ¨æ˜¯å“åº”æ ·æœ¬" class="headerlink" title="1.3.2 å¤„ç†åˆ†ç®±ä¸­æ²¡æœ‰å“åº”æ ·æœ¬æˆ–è€…å…¨éƒ¨æ˜¯å“åº”æ ·æœ¬"></a>1.3.2 å¤„ç†åˆ†ç®±ä¸­æ²¡æœ‰å“åº”æ ·æœ¬æˆ–è€…å…¨éƒ¨æ˜¯å“åº”æ ·æœ¬</h6><p>å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼ä¿®æ­£</p>
<script type="math/tex; mode=display">
WOE_i = ln(\frac{(\#B_i+0.5)/\#B_T}{(\#G_i+0.5)/\#G_T})</script><h6 id="1-3-3-å¦‚ä½•ç”¨WOEæ£€æŸ¥åˆ†ç®±çš„æ­£ç¡®æ€§"><a href="#1-3-3-å¦‚ä½•ç”¨WOEæ£€æŸ¥åˆ†ç®±çš„æ­£ç¡®æ€§" class="headerlink" title="1.3.3 å¦‚ä½•ç”¨WOEæ£€æŸ¥åˆ†ç®±çš„æ­£ç¡®æ€§"></a>1.3.3 å¦‚ä½•ç”¨WOEæ£€æŸ¥åˆ†ç®±çš„æ­£ç¡®æ€§</h6><p>ï¼ˆ1ï¼‰WOEåº”è¯¥å‘ˆå•è°ƒè¶‹åŠ¿</p>
<p>ï¼ˆ2ï¼‰åœ¨é¢„æµ‹å˜é‡åšäº†WOEç¼–ç åè·‘ä¸€ä¸ªå•å˜é‡çš„é€»è¾‘å›å½’ï¼Œå¦‚æœæ–œç‡ï¼ˆå˜é‡ç³»æ•°ï¼‰ä¸ä¸º1æˆ–è€…æˆªè·é¡¹ä¸ç­‰äº</p>
<script type="math/tex; mode=display">
\ln(\frac{\#Bad_T}{\#Good_T})</script><p>åˆ™è¯¥åˆ†ç®±æ•ˆæœä¸ä½³ã€‚</p>
<p>å¯¹äºç¦»æ•£å˜é‡ï¼Œä¾‹å¦‚èŒä¸šå˜é‡åŒ…å«å­¦ç”Ÿã€è€å¸ˆã€å·¥äººç­‰åä¹‰å±æ€§æ—¶ï¼Œå…ˆå°†å˜é‡çš„ä¸åŒlevelä½œWOEç¼–ç åï¼ŒæŠŠWOEå€¼ç›¸è¿‘çš„levelåˆå¹¶åœ¨ä¸€èµ·ï¼Œè¿™æ ·å¯ä»¥å‡å°‘levelæ•°é‡ã€‚å› ä¸ºæœ‰ç›¸è¿‘çš„WOEå€¼çš„levelæœ‰å‡ ä¹ç›¸åŒçš„å“åº”ç‡/éå“åº”ç‡ï¼Œæ¢å¥è¯è¯´ï¼ŒæŸå‡ ä¸ªlevelæœ‰ç›¸è¿‘çš„woeå€¼å°±å°†ä»–ä»¬åˆå¹¶æˆä¸€ä¸ªç®±å­</p>
<h5 id="1-4-WOEç¼–ç çš„ä¼˜ç‚¹ä¸ç¼ºç‚¹"><a href="#1-4-WOEç¼–ç çš„ä¼˜ç‚¹ä¸ç¼ºç‚¹" class="headerlink" title="1.4 WOEç¼–ç çš„ä¼˜ç‚¹ä¸ç¼ºç‚¹"></a>1.4 WOEç¼–ç çš„ä¼˜ç‚¹ä¸ç¼ºç‚¹</h5><p>ä¼˜ç‚¹ï¼š</p>
<blockquote>
<p>1.å¯ä»¥æœ‰æ•ˆå¤„ç†ç¼ºå¤±å€¼(æŠŠç¼ºå¤±å€¼å•ç‹¬ä½œä¸ºä¸€ä¸ªåˆ†ç®±)<br>2.å¯ä»¥æœ‰æ•ˆå¤„ç†å¼‚å¸¸å€¼ï¼ˆOutlierï¼‰<br>3.WOEè½¬æ¢åŸºäºåˆ†å¸ƒçš„å¯¹æ•°å€¼ã€‚ è¿™ä¸é€»è¾‘å›å½’è¾“å‡ºå‡½æ•°ä¸€è‡´<br>4.ä¸éœ€è¦è¿›è¡Œå“‘å˜é‡ç¼–ç <br>5.ç”¨äº†åˆé€‚çš„åˆ†ç®±æ‰‹æ®µåï¼Œèƒ½å¤Ÿå»ºç«‹è‡ªå˜é‡ä¸å› å˜é‡çš„å•è°ƒå…³ç³»</p>
</blockquote>
<p>ç¼ºç‚¹ï¼š</p>
<blockquote>
<p>åªè€ƒè™‘äº†æ¯ä¸ªåˆ†ç®±çš„ç›¸å¯¹é£é™©ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°æ¯ä¸ªåˆ†ç®±æ ·æœ¬æ•°é‡å å…¨æ ·æœ¬çš„æ¯”ä¾‹ã€‚å¯ä»¥ç”¨IVå€¼æ¥è¯„ä¼°æ¯ä¸ªåˆ†ç®±çš„ç›¸å¯¹è´¡çŒ®</p>
</blockquote>
<h5 id="1-5-WOE-ä¸ºä»€ä¹ˆè¢«ç§°ä¸ºæ•°æ®æƒé‡"><a href="#1-5-WOE-ä¸ºä»€ä¹ˆè¢«ç§°ä¸ºæ•°æ®æƒé‡" class="headerlink" title="1.5 WOE ä¸ºä»€ä¹ˆè¢«ç§°ä¸ºæ•°æ®æƒé‡"></a>1.5 WOE ä¸ºä»€ä¹ˆè¢«ç§°ä¸ºæ•°æ®æƒé‡</h5><p><img src="/2021/07/17/WOEç¼–ç ä¸IVå€¼/image-20210717175623456.png" alt="image-20210717175623456"></p>
<h5 id="1-6-åœ¨pythonä¸­è®¡ç®—WOE"><a href="#1-6-åœ¨pythonä¸­è®¡ç®—WOE" class="headerlink" title="1.6 åœ¨pythonä¸­è®¡ç®—WOE"></a>1.6 åœ¨pythonä¸­è®¡ç®—WOE</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df_woe = pd.crosstab(X[col_name], y, normalize=<span class="string">'columns'</span>).assign(woe=<span class="keyword">lambda</span> dfx: np.log(dfx[<span class="number">1</span>].replace(<span class="number">0</span>, <span class="number">0.0001</span>) / dfx[<span class="number">0</span>].replace(<span class="number">0</span>, <span class="number">0.0001</span>)))</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ <code>X[col_name]</code> å’Œ <code>y</code> éƒ½ä¸º Series</p>
<p>å½“æŸä¸ªåˆ†ç®±ä¸­ï¼Œæ²¡æœ‰ä¸º0çš„ï¼Œæˆ–æ²¡æœ‰ä¸º1çš„æ—¶ï¼Œä¼šä½¿å¾— <code>ln(.)</code> çš„åˆ†å­æˆ–åˆ†æ¯ä¸º0ï¼Œå¯é€‰æ‹©å°†å…¶æ›¿æ¢ä¸º0.0001</p>
<h4 id="2-IVå€¼"><a href="#2-IVå€¼" class="headerlink" title="2. IVå€¼"></a>2. IVå€¼</h4><h5 id="2-1-IVå€¼çš„è®¡ç®—æ–¹å¼"><a href="#2-1-IVå€¼çš„è®¡ç®—æ–¹å¼" class="headerlink" title="2.1 IVå€¼çš„è®¡ç®—æ–¹å¼"></a>2.1 IVå€¼çš„è®¡ç®—æ–¹å¼</h5><p>ä¿¡æ¯å€¼æ˜¯é¢„æµ‹æ¨¡å‹ä¸­é€‰æ‹©é‡è¦å˜é‡çš„æ–¹å¼ä¹‹ä¸€ï¼Œå®ƒèƒ½æ ¹æ®é¢„æµ‹å˜é‡çš„é‡è¦æ€§å¯¹é¢„æµ‹å˜é‡è¿›è¡Œæ’åºï¼ŒIVå€¼è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
IV = \sum_i^n(å“åº”æ¯”ä¾‹-æœªå“åº”æ¯”ä¾‹)*WOE_i \\
=\sum_i^n(\frac{\#Bad_i}{\#Bad_T}-\frac{\#Good_i}{\#Good_T})*WOE_i</script><p>IVå€¼æ˜¯å¯¹ä¸€ä¸ªå˜é‡è€Œè¨€ï¼Œå³<strong>æ¯ä¸ªå˜é‡æœ‰ä¸€ä¸ªIVå€¼</strong>ï¼ˆå…¶å€¼ç­‰äºæ¯ä¸ªåˆ†ç®±çš„IVå€¼ç›¸åŠ ï¼‰ã€‚</p>
<p>å‡è®¾å˜é‡ $X$ æœ‰ $n$ ä¸ªåˆ†ç®±ï¼Œæ¯ä¸ªåˆ†ç®±çš„ WOE ç¼–ç å–å€¼ä¸º $WOE_i$ ,è¯¥åˆ†ç®±çš„IVå€¼å°±æ˜¯ç”¨è¯¥åˆ†ç®±å“åº”æ¯”ä¾‹ä¸æœªå“åº”æ¯”ä¾‹ä¹‹å·®å†ä¹˜ä¸Š $WOE_i$ã€‚æ³¨æ„è¿™é‡Œçš„å“åº”æ¯”ä¾‹å’Œæœªå“åº”æ¯”ä¾‹éƒ½æ˜¯ç”¨å½“å‰åˆ†ç®±ä¸­å“åº”æ•°é‡/æ•´ä½“æ ·æœ¬å“åº”æ•°é‡å’Œå½“å‰åˆ†ç®±æœªå“åº”æ•°é‡/æ•´ä½“æ ·æœ¬æœªå“åº”æ•°é‡è®¡ç®—å¾—åˆ°ã€‚</p>
<p>IVå€¼æ˜¯çœ‹å•ä¸ªå˜é‡å¥½åå®¢æˆ·åˆ†å¸ƒçš„å·®å¼‚ï¼Œè¿™ç§å·®å¼‚è¶Šå¤§è¡¨æ˜è¿™ä¸ªå˜é‡å¯¹äºå¥½åå®¢æˆ·çš„åŒºåˆ†åº¦è¶Šé«˜.</p>
<h5 id="2-2-åˆ©ç”¨IVå€¼è¿›è¡Œå˜é‡ç­›é€‰"><a href="#2-2-åˆ©ç”¨IVå€¼è¿›è¡Œå˜é‡ç­›é€‰" class="headerlink" title="2.2 åˆ©ç”¨IVå€¼è¿›è¡Œå˜é‡ç­›é€‰"></a>2.2 åˆ©ç”¨IVå€¼è¿›è¡Œå˜é‡ç­›é€‰</h5><p><img src="/2021/07/17/WOEç¼–ç ä¸IVå€¼/image-20210717175912098.png" alt="image-20210717175912098"></p>
<p>å¦‚æœIVå€¼å¤§äº0.5ï¼Œåˆ™è€ƒè™‘è¦å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œåˆ†ç¾¤å¤„ç†ã€‚å³æ ¹æ®è¿™ä¸ªå˜é‡æ‹†åˆ†æˆå‡ ä¸ªæ ·æœ¬å­é›†ï¼Œåˆ†åˆ«åœ¨å„ä¸ªæ ·æœ¬å­é›†ä¸Šå»ºæ¨¡ã€‚</p>
<h5 id="2-3-åœ¨pythonä¸­è®¡ç®—IV"><a href="#2-3-åœ¨pythonä¸­è®¡ç®—IV" class="headerlink" title="2.3 åœ¨pythonä¸­è®¡ç®—IV"></a>2.3 åœ¨pythonä¸­è®¡ç®—IV</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calIV</span><span class="params">(df, var, y)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    è®¡ç®—IVå€¼</span></span><br><span class="line"><span class="string">    param dfï¼šæ•°æ®é›†X</span></span><br><span class="line"><span class="string">    param varï¼šå·²åˆ†ç»„çš„åˆ—å</span></span><br><span class="line"><span class="string">    param yï¼šå“åº”å˜é‡yï¼ˆ0,1ï¼‰</span></span><br><span class="line"><span class="string">    returnï¼šIVå€¼</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    df_woe_iv = pd.crosstab(df[var], y, normalize=<span class="string">'columns'</span>).assign(woe=<span class="keyword">lambda</span> dfx: np.log(dfx[<span class="number">1</span>].replace(<span class="number">0</span>, <span class="number">0.0001</span>) / dfx[<span class="number">0</span>].replace(<span class="number">0</span>, <span class="number">0.0001</span>))).assign(iv=<span class="keyword">lambda</span> dfx: np.sum(dfx[<span class="string">'woe'</span>] * (dfx[<span class="number">1</span>] - dfx[<span class="number">0</span>])))</span><br><span class="line"></span><br><span class="line">    a = df_woe_iv[<span class="string">'iv'</span>].reset_index()</span><br><span class="line">    <span class="keyword">return</span> a.loc[<span class="number">0</span>, <span class="string">'iv'</span>]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>Pandasä¸­çš„å¸¸ç”¨å‡½æ•°</title>
    <url>/2021/07/17/Pandas%E4%B8%AD%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="mapã€applyã€applymap"><a href="#mapã€applyã€applymap" class="headerlink" title="mapã€applyã€applymap"></a>mapã€applyã€applymap</h4><blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/100064394" target="_blank" rel="noopener">Pandasæ•™ç¨‹ | æ•°æ®å¤„ç†ä¸‰æ¿æ–§â€”â€”mapã€applyã€applymapè¯¦è§£ - çŸ¥ä¹ (zhihu.com)</a></p>
</blockquote>
<p>åœ¨æ—¥å¸¸çš„æ•°æ®å¤„ç†ä¸­ï¼Œç»å¸¸ä¼šå¯¹ä¸€ä¸ª<code>DataFrame</code>è¿›è¡Œé€è¡Œã€é€åˆ—å’Œé€å…ƒç´ çš„æ“ä½œï¼Œå¯¹åº”è¿™äº›æ“ä½œï¼ŒPandasä¸­çš„<code>map</code>ã€<code>apply</code>å’Œ<code>applymap</code>å¯ä»¥è§£å†³ç»å¤§éƒ¨åˆ†è¿™æ ·çš„æ•°æ®å¤„ç†éœ€æ±‚ã€‚</p>
<p>ç”Ÿæˆ100è¡Œç¤ºä¾‹æ•°æ®ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">boolean=[<span class="literal">True</span>,<span class="literal">False</span>]</span><br><span class="line">gender=[<span class="string">"ç”·"</span>,<span class="string">"å¥³"</span>]</span><br><span class="line">color=[<span class="string">"white"</span>,<span class="string">"black"</span>,<span class="string">"yellow"</span>]</span><br><span class="line">data=pd.DataFrame(&#123;</span><br><span class="line">    <span class="string">"height"</span>:np.random.randint(<span class="number">150</span>,<span class="number">190</span>,<span class="number">100</span>),</span><br><span class="line">    <span class="string">"weight"</span>:np.random.randint(<span class="number">40</span>,<span class="number">90</span>,<span class="number">100</span>),</span><br><span class="line">    <span class="string">"smoker"</span>:[boolean[x] <span class="keyword">for</span> x <span class="keyword">in</span> np.random.randint(<span class="number">0</span>,<span class="number">2</span>,<span class="number">100</span>)],</span><br><span class="line">    <span class="string">"gender"</span>:[gender[x] <span class="keyword">for</span> x <span class="keyword">in</span> np.random.randint(<span class="number">0</span>,<span class="number">2</span>,<span class="number">100</span>)],</span><br><span class="line">    <span class="string">"age"</span>:np.random.randint(<span class="number">15</span>,<span class="number">90</span>,<span class="number">100</span>),</span><br><span class="line">    <span class="string">"color"</span>:[color[x] <span class="keyword">for</span> x <span class="keyword">in</span> np.random.randint(<span class="number">0</span>,len(color),<span class="number">100</span>) ]</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717144622753.png" alt="image-20210717144622753"></p>
<h5 id="Seriesæ•°æ®å¤„ç†"><a href="#Seriesæ•°æ®å¤„ç†" class="headerlink" title="Seriesæ•°æ®å¤„ç†"></a>Seriesæ•°æ®å¤„ç†</h5><h6 id="1-mapç”¨æ³•"><a href="#1-mapç”¨æ³•" class="headerlink" title="1. mapç”¨æ³•"></a>1. mapç”¨æ³•</h6><p>è‹¥æƒ³æŠŠæ•°æ®é›†ä¸­<code>gender</code>åˆ—çš„ç”·æ›¿æ¢ä¸º1ï¼Œå¥³æ›¿æ¢ä¸º0ï¼Œå¯ä½¿ç”¨ <code>Series.map()</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ³•ä¸€ï¼šä½¿ç”¨å­—å…¸è¿›è¡Œæ˜ å°„</span></span><br><span class="line">data[<span class="string">"gender"</span>] = data[<span class="string">"gender"</span>].map(&#123;<span class="string">"ç”·"</span>:<span class="number">1</span>, <span class="string">"å¥³"</span>:<span class="number">0</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³•äºŒï¼šä½¿ç”¨å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gender_map</span><span class="params">(x)</span>:</span></span><br><span class="line">    gender = <span class="number">1</span> <span class="keyword">if</span> x == <span class="string">"ç”·"</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> gender</span><br><span class="line"><span class="comment"># æ³¨æ„è¿™é‡Œä¼ å…¥çš„æ˜¯å‡½æ•°åï¼Œä¸å¸¦æ‹¬å·</span></span><br><span class="line">data[<span class="string">"gender"</span>] = data[<span class="string">"gender"</span>].map(gender_map)</span><br></pre></td></tr></table></figure>
<p>ä¸è®ºæ˜¯åˆ©ç”¨å­—å…¸è¿˜æ˜¯å‡½æ•°è¿›è¡Œæ˜ å°„ï¼Œ<code>map</code>æ–¹æ³•éƒ½æ˜¯æŠŠå¯¹åº”çš„æ•°æ®<strong>é€ä¸ªå½“ä½œå‚æ•°</strong>ä¼ å…¥åˆ°å­—å…¸æˆ–å‡½æ•°ä¸­ï¼Œå¾—åˆ°æ˜ å°„åçš„å€¼ã€‚</p>
<blockquote>
<p> æ³¨ï¼šè‹¥è¯¥åˆ—ä¸­å­˜åœ¨mapå­—å…¸ä¸­ä¸å­˜åœ¨çš„å€¼ï¼Œä¾‹å¦‚ï¼Œgender ä¸­è¿˜å­˜åœ¨â€œæœªçŸ¥â€ï¼Œåˆ™â€œæœªçŸ¥â€ä¼šè¢«æ˜ å°„ä¸ºNanï¼Œæ­¤æ—¶å¯é€‰æ‹©ä½¿ç”¨å‡½æ•°è¿›è¡Œæ˜ å°„ï¼Œå®šä¹‰ä¸€ä¸ªelseï¼ŒåŒæ—¶ä½¿ç”¨å‡½æ•°ä¼šæ›´åŠ çµæ´»ï¼Œä¾‹å¦‚å½“æ»¡è¶³å¤šä¸ªæ¡ä»¶æ—¶ï¼Œéƒ½æ˜ å°„åˆ°æŸä¸ªå€¼</p>
</blockquote>
<a id="more"></a>
<h6 id="2-apply"><a href="#2-apply" class="headerlink" title="2. apply"></a>2. apply</h6><p><code>apply</code> æ–¹æ³•çš„ä½œç”¨åŸç†å’Œ <code>map</code> æ–¹æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äº <code>apply</code> èƒ½å¤Ÿä¼ å…¥åŠŸèƒ½æ›´ä¸ºå¤æ‚çš„å‡½æ•°</p>
<p>å‡è®¾åœ¨æ•°æ®ç»Ÿè®¡çš„è¿‡ç¨‹ä¸­ï¼Œå¹´é¾„<code>age</code>åˆ—æœ‰è¾ƒå¤§è¯¯å·®ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œè°ƒæ•´ï¼ˆåŠ ä¸Šæˆ–å‡å»ä¸€ä¸ªå€¼ï¼‰ï¼Œç”±äºè¿™ä¸ªåŠ ä¸Šæˆ–å‡å»çš„å€¼æœªçŸ¥ï¼Œæ•…åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œéœ€è¦åŠ å¤šä¸€ä¸ªå‚æ•° <code>bias</code>ï¼Œæ­¤æ—¶ç”¨ <code>map</code> æ–¹æ³•æ˜¯æ“ä½œä¸äº†çš„ï¼ˆ<strong>ä¼ å…¥ <code>map</code> çš„å‡½æ•°åªèƒ½æ¥æ”¶ä¸€ä¸ªå‚æ•°</strong>ï¼‰ï¼Œ<code>apply</code> æ–¹æ³•åˆ™å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply_age</span><span class="params">(x,bias)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x+bias</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥å…ƒç»„çš„æ–¹å¼ä¼ å…¥é¢å¤–çš„å‚æ•°</span></span><br><span class="line">data[<span class="string">"age"</span>] = data[<span class="string">"age"</span>].apply(apply_age,args=(<span class="number">-3</span>,))</span><br></pre></td></tr></table></figure>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717164238564.png" alt="image-20210717164238564"></p>
<p>å¯ä»¥çœ‹åˆ°ageåˆ—éƒ½å‡äº†3ï¼Œå½“ç„¶ï¼Œè¿™é‡Œåªæ˜¯ç®€å•ä¸¾äº†ä¸ªä¾‹å­ï¼Œå½“éœ€è¦è¿›è¡Œå¤æ‚å¤„ç†æ—¶ï¼Œæ›´èƒ½ä½“ç°<code>apply</code>çš„ä½œç”¨ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œå¯¹äºSeriesè€Œè¨€ï¼Œ<code>map</code>å¯ä»¥è§£å†³ç»å¤§å¤šæ•°çš„æ•°æ®å¤„ç†éœ€æ±‚ï¼Œä½†å¦‚æœéœ€è¦ä½¿ç”¨è¾ƒä¸ºå¤æ‚çš„å‡½æ•°ï¼Œåˆ™éœ€è¦ç”¨åˆ°<code>apply</code>æ–¹æ³•ã€‚</p>
<h5 id="DataFrameæ•°æ®å¤„ç†"><a href="#DataFrameæ•°æ®å¤„ç†" class="headerlink" title="DataFrameæ•°æ®å¤„ç†"></a>DataFrameæ•°æ®å¤„ç†</h5><h6 id="1-apply"><a href="#1-apply" class="headerlink" title="1. apply"></a>1. apply</h6><p>å¯¹<code>DataFrame</code>è€Œè¨€ï¼Œ<code>apply</code>æ˜¯éå¸¸é‡è¦çš„æ•°æ®å¤„ç†æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ¥æ”¶å„ç§å„æ ·çš„å‡½æ•°ï¼ˆPythonå†…ç½®çš„æˆ–è‡ªå®šä¹‰çš„ï¼‰ï¼Œå¤„ç†æ–¹å¼å¾ˆçµæ´»ã€‚</p>
<p>åœ¨è¿›è¡Œå…·ä½“ä»‹ç»ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸‹<code>DataFrame</code>ä¸­<code>axis</code>çš„æ¦‚å¿µï¼ˆè¯¦è§æˆ‘çš„åšå®¢<a href="https://qypx.github.io/2019/09/02/dataframe-operation/">æ•°æ®æ¡†æ“ä½œ</a>ï¼‰</p>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717171243694.png" alt="image-20210717171243694"></p>
<p>ç®€è¨€ä¹‹ï¼Œè‹¥æƒ³æ²¿ç€axis=0çš„æ–¹å‘æ–°å¢æ•°æ®ï¼Œåˆ™é€‰æ‹©axis=0ï¼›è‹¥æƒ³æ²¿ç€axis=1çš„æ–¹å‘æ–°å¢æ•°æ®ï¼Œåˆ™é€‰æ‹©axis=1ã€‚</p>
<p>å‡è®¾ç°åœ¨éœ€è¦å¯¹<code>data</code>ä¸­çš„<strong>æ•°å€¼åˆ—</strong>åˆ†åˆ«è¿›è¡Œ<strong>å–å¯¹æ•°</strong>å’Œ<strong>æ±‚å’Œ</strong>çš„æ“ä½œï¼Œè¿™æ—¶å¯ä»¥ç”¨ <code>apply</code> è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå› ä¸ºæ˜¯å¯¹åˆ—è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®š<code>axis=0</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ²¿ç€0è½´æ±‚å’Œ</span></span><br><span class="line">data[[<span class="string">"height"</span>,<span class="string">"weight"</span>,<span class="string">"age"</span>]].apply(np.sum, axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ²¿ç€0è½´å–å¯¹æ•°</span></span><br><span class="line">data[[<span class="string">"height"</span>,<span class="string">"weight"</span>,<span class="string">"age"</span>]].apply(np.log, axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717171536577.png" alt="image-20210717171536577"></p>
<p><strong>å½“æ²¿ç€<code>è½´0ï¼ˆaxis=0ï¼‰</code>è¿›è¡Œæ“ä½œæ—¶ï¼Œä¼šå°†å„åˆ—(<code>columns</code>)é»˜è®¤ä»¥<code>Series</code>çš„å½¢å¼ä½œä¸ºå‚æ•°</strong>ï¼Œä¼ å…¥åˆ°ä½ æŒ‡å®šçš„æ“ä½œå‡½æ•°ä¸­ï¼Œæ“ä½œååˆå¹¶å¹¶è¿”å›ç›¸åº”çš„ç»“æœã€‚</p>
<p>é‚£å¦‚æœåœ¨å®é™…ä½¿ç”¨ä¸­éœ€è¦æŒ‰è¡Œè¿›è¡Œæ“ä½œï¼ˆ<code>axis=1</code>ï¼‰, ä¾‹å¦‚ï¼š</p>
<p>åœ¨æ•°æ®é›†ä¸­ï¼Œæœ‰èº«é«˜å’Œä½“é‡çš„æ•°æ®ï¼Œæ‰€ä»¥æ ¹æ®è¿™ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—æ¯ä¸ªäººçš„BMIæŒ‡æ•°ï¼ˆä½“æ£€æ—¶å¸¸ç”¨çš„æŒ‡æ ‡ï¼Œè¡¡é‡äººä½“è‚¥èƒ–ç¨‹åº¦å’Œæ˜¯å¦å¥åº·çš„é‡è¦æ ‡å‡†ï¼‰ï¼Œè®¡ç®—å…¬å¼æ˜¯ï¼š<code>ä½“é‡æŒ‡æ•°BMI=ä½“é‡/èº«é«˜çš„å¹³æ–¹ï¼ˆå›½é™…å•ä½kg/ã¡ï¼‰</code>ï¼Œå› ä¸ºéœ€è¦å¯¹æ¯ä¸ªæ ·æœ¬è¿›è¡Œæ“ä½œï¼Œè¿™é‡Œä½¿ç”¨<code>axis=1</code>çš„<code>apply</code>è¿›è¡Œæ“ä½œï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">BMI</span><span class="params">(series)</span>:</span></span><br><span class="line">    weight = series[<span class="string">"weight"</span>]</span><br><span class="line">    height = series[<span class="string">"height"</span>]/<span class="number">100</span></span><br><span class="line">    BMI = weight/height**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> BMI</span><br><span class="line"></span><br><span class="line">data[<span class="string">"BMI"</span>] = data.apply(BMI,axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p><strong>å½“<code>apply</code>è®¾ç½®äº†<code>axis=1</code>å¯¹è¡Œè¿›è¡Œæ“ä½œæ—¶ï¼Œä¼šé»˜è®¤å°†æ¯ä¸€è¡Œæ•°æ®ä»¥<code>Series</code>çš„å½¢å¼ï¼ˆSeriesçš„ç´¢å¼•ä¸ºåˆ—åï¼‰ä¼ å…¥æŒ‡å®šå‡½æ•°</strong>ï¼Œè¿”å›ç›¸åº”çš„ç»“æœã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹å¯¹<code>DataFrame</code>çš„<code>apply</code>æ“ä½œï¼š</p>
<blockquote>
<ol>
<li>å½“<code>axis=0</code>æ—¶ï¼Œå¯¹<code>æ¯åˆ—columns</code>æ‰§è¡ŒæŒ‡å®šå‡½æ•°ï¼›å½“<code>axis=1</code>æ—¶ï¼Œå¯¹<code>æ¯è¡Œrow</code>æ‰§è¡ŒæŒ‡å®šå‡½æ•°ã€‚</li>
<li>æ— è®º<code>axis=0</code>è¿˜æ˜¯<code>axis=1</code>ï¼Œå…¶ä¼ å…¥æŒ‡å®šå‡½æ•°çš„é»˜è®¤å½¢å¼å‡ä¸º<code>Series</code>ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®<code>raw=True</code>ä¼ å…¥<code>numpyæ•°ç»„</code>ã€‚</li>
<li>å¯¹æ¯ä¸ªSeriesæ‰§è¡Œç»“æœåï¼Œä¼šå°†ç»“æœæ•´åˆåœ¨ä¸€èµ·è¿”å›ï¼ˆè‹¥æƒ³æœ‰è¿”å›å€¼ï¼Œå®šä¹‰å‡½æ•°æ—¶éœ€è¦<code>return</code>ç›¸åº”çš„å€¼ï¼‰</li>
<li>å½“ç„¶ï¼Œ<code>DataFrame</code>çš„<code>apply</code>å’Œ<code>Series</code>çš„<code>apply</code>ä¸€æ ·ï¼Œä¹Ÿèƒ½æ¥æ”¶æ›´å¤æ‚çš„å‡½æ•°ï¼Œå¦‚ä¼ å…¥å‚æ•°ç­‰ï¼Œå®ç°åŸç†æ˜¯ä¸€æ ·çš„ï¼Œå…·ä½“ç”¨æ³•è¯¦è§å®˜æ–¹æ–‡æ¡£ã€‚</li>
</ol>
</blockquote>
<h6 id="2-applymap"><a href="#2-applymap" class="headerlink" title="2. applymap"></a>2. applymap</h6><p><code>applymap</code>çš„ç”¨æ³•æ¯”è¾ƒç®€å•ï¼Œä¼šå¯¹ DataFrame ä¸­çš„<strong>æ¯ä¸ªå•å…ƒæ ¼</strong>æ‰§è¡ŒæŒ‡å®šå‡½æ•°çš„æ“ä½œ</p>
<p>æ–°ç”Ÿæˆä¸€ä¸ª DataFrame:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = pd.DataFrame(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"A"</span>:np.random.randn(<span class="number">5</span>),</span><br><span class="line">        <span class="string">"B"</span>:np.random.randn(<span class="number">5</span>),</span><br><span class="line">        <span class="string">"C"</span>:np.random.randn(<span class="number">5</span>),</span><br><span class="line">        <span class="string">"D"</span>:np.random.randn(<span class="number">5</span>),</span><br><span class="line">        <span class="string">"E"</span>:np.random.randn(<span class="number">5</span>),</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717172153411.png" alt="image-20210717172153411"></p>
<p>ç°åœ¨æƒ³å°†<code>DataFrame</code>ä¸­æ‰€æœ‰çš„å€¼ä¿ç•™ä¸¤ä½å°æ•°æ˜¾ç¤ºï¼Œä½¿ç”¨<code>applymap</code>å¯ä»¥å¾ˆå¿«è¾¾åˆ°ä½ æƒ³è¦çš„ç›®çš„ï¼Œä»£ç å’Œå›¾è§£å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df.applymap(<span class="keyword">lambda</span> x:<span class="string">"%.2f"</span> % x)</span><br></pre></td></tr></table></figure>
<p><code>applymap</code> å°† DataFrame ä¸­çš„æ¯ä¸ªæ•°æ®ä½œä¸º x ä¼ å…¥åŒ¿åå‡½æ•°</p>
<hr>
<h4 id="groupby"><a href="#groupby" class="headerlink" title="groupby"></a>groupby</h4><blockquote>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html" target="_blank" rel="noopener">pandas.DataFrame.groupby â€” pandas 1.3.0 documentation (pydata.org)</a><br><a href="https://zhuanlan.zhihu.com/p/101284491?utm_source=wechat_session" target="_blank" rel="noopener">Pandasæ•™ç¨‹ | è¶…å¥½ç”¨çš„Groupbyç”¨æ³•è¯¦è§£ - çŸ¥ä¹ (zhihu.com)</a></p>
</blockquote>
<p>å°†æ•°æ®æ ¹æ®æŸä¸ªï¼ˆå¤šä¸ªï¼‰å­—æ®µåˆ’åˆ†ä¸ºä¸åŒçš„ç¾¤ä½“ï¼ˆgroupï¼‰è¿›è¡Œåˆ†æ</p>
<p>ä¾‹ï¼š</p>
<p>æ¨¡æ‹Ÿç”Ÿæˆ10ä¸ªæ ·æœ¬æ•°æ®ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">company=[<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>]</span><br><span class="line"></span><br><span class="line">data=pd.DataFrame(&#123;</span><br><span class="line">    <span class="string">"company"</span>:[company[x] <span class="keyword">for</span> x <span class="keyword">in</span> np.random.randint(<span class="number">0</span>,len(company),<span class="number">10</span>)],</span><br><span class="line">    <span class="string">"salary"</span>:np.random.randint(<span class="number">5</span>,<span class="number">50</span>,<span class="number">10</span>),</span><br><span class="line">    <span class="string">"age"</span>:np.random.randint(<span class="number">15</span>,<span class="number">50</span>,<span class="number">10</span>)</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717140057334.png" alt="image-20210717140057334"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">group = data.groupby(&quot;company&quot;)</span><br></pre></td></tr></table></figure>
<p><code>groupby</code>çš„è¿‡ç¨‹å°±æ˜¯å°†åŸæœ‰çš„<code>DataFrame</code>æŒ‰ç…§<code>groupby</code>çš„å­—æ®µï¼ˆè¿™é‡Œæ˜¯<code>company</code>ï¼‰ï¼Œåˆ’åˆ†ä¸ºè‹¥å¹²ä¸ª<code>å­DataFrame</code>ï¼Œåœ¨<code>groupby</code>ä¹‹åçš„ä¸€ç³»åˆ—æ“ä½œï¼ˆå¦‚<code>agg</code>ã€<code>apply</code>ç­‰ï¼‰ï¼Œå‡æ˜¯åŸºäº<code>å­DataFrame</code>çš„æ“ä½œã€‚</p>
<h5 id="aggèšåˆæ“ä½œ"><a href="#aggèšåˆæ“ä½œ" class="headerlink" title="aggèšåˆæ“ä½œ"></a>aggèšåˆæ“ä½œ</h5><p>Pandasä¸­å¸¸è§çš„èšåˆæ“ä½œï¼š</p>
<blockquote>
<p>min, max, sum, mean, median, std, var, count</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; data.groupby(&quot;company&quot;).agg(&apos;mean&apos;)</span><br><span class="line">         salary    age</span><br><span class="line">company</span><br><span class="line">A         21.50  27.50</span><br><span class="line">B         13.00  29.00</span><br><span class="line">C         29.25  27.25</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ ¹æ®å…¬å¸è¿›è¡Œåˆ†ç»„ï¼Œå¯¹å…¶ä½™æ¯ä¸€åˆ—æ±‚å¹³å‡</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; data.groupby(&quot;company&quot;)[&quot;salary&quot;].agg(&apos;mean&apos;)</span><br><span class="line">         salary    age</span><br><span class="line">company</span><br><span class="line">A         21.50  27.50</span><br><span class="line">B         13.00  29.00</span><br><span class="line">C         29.25  27.25</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ ¹æ®å…¬å¸è¿›è¡Œåˆ†ç»„ï¼Œå¯¹ salary åˆ—æ±‚å¹³å‡</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; data.groupby(&apos;company&apos;).agg(&#123;&apos;salary&apos;:&apos;median&apos;,&apos;age&apos;:&apos;mean&apos;&#125;)</span><br><span class="line">         salary    age</span><br><span class="line">company</span><br><span class="line">A          21.5  27.50</span><br><span class="line">B          10.0  29.00</span><br><span class="line">C          30.0  27.25</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ ¹æ®å…¬å¸è¿›è¡Œåˆ†ç»„ï¼Œå¯¹ salary åˆ—æ±‚ä¸­ä½æ•°ï¼Œå¯¹ age åˆ—æ±‚å¹³å‡</p>
<h5 id="transformæ“ä½œ"><a href="#transformæ“ä½œ" class="headerlink" title="transformæ“ä½œ"></a>transformæ“ä½œ</h5><p>è‹¥åœ¨æ±‚å¾—ä¸åŒå…¬å¸å‘˜å·¥çš„å¹³å‡è–ªæ°´åï¼Œæƒ³åœ¨åŸæ•°æ®é›†ä¸­æ–°å¢ä¸€åˆ—<code>avg_salary</code>ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>ä¸ç”¨<code>transform</code>çš„è¯ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; avg_salary_dict = data.groupby(&apos;company&apos;)[&apos;salary&apos;].mean().to_dict()</span><br><span class="line">&gt; data[&apos;avg_salary&apos;] = data[&apos;company&apos;].map(avg_salary_dict)</span><br><span class="line">&gt; data</span><br><span class="line">  company  salary  age  avg_salary</span><br><span class="line">0       C      43   35       29.25</span><br><span class="line">1       C      17   25       29.25</span><br><span class="line">2       C       8   30       29.25</span><br><span class="line">3       A      20   22       21.50</span><br><span class="line">4       B      10   17       13.00</span><br><span class="line">5       B      21   40       13.00</span><br><span class="line">6       A      23   33       21.50</span><br><span class="line">7       C      49   19       29.25</span><br><span class="line">8       B       8   30       13.00</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨<code>transform</code>çš„è¯ï¼Œä»…éœ€è¦ä¸€è¡Œä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; data[&apos;avg_salary&apos;] = data.groupby(&apos;company&apos;)[&apos;salary&apos;].transform(&apos;mean&apos;)</span><br><span class="line">&gt; data</span><br><span class="line">  company  salary  age  avg_salary</span><br><span class="line">0       C      43   35       29.25</span><br><span class="line">1       C      17   25       29.25</span><br><span class="line">2       C       8   30       29.25</span><br><span class="line">3       A      20   22       21.50</span><br><span class="line">4       B      10   17       13.00</span><br><span class="line">5       B      21   40       13.00</span><br><span class="line">6       A      23   33       21.50</span><br><span class="line">7       C      49   19       29.25</span><br><span class="line">8       B       8   30       13.00</span><br></pre></td></tr></table></figure>
<h5 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h5><p><code>apply</code> ç›¸æ¯” <code>agg</code> å’Œ <code>transform</code> è€Œè¨€æ›´åŠ çµæ´»ï¼Œèƒ½å¤Ÿä¼ å…¥ä»»æ„è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œå®ç°å¤æ‚çš„æ•°æ®æ“ä½œ</p>
<p>å‡è®¾ç°åœ¨éœ€è¦è·å–å„ä¸ªå…¬å¸å¹´é¾„æœ€å¤§çš„å‘˜å·¥çš„æ•°æ®ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹ä»£ç å®ç°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; def get_oldest_staff(x):</span><br><span class="line">...     df = x.sort_values(by = &apos;age&apos;,ascending=True)</span><br><span class="line">...     return df.iloc[-1,:]</span><br><span class="line">&gt; oldest_staff = data.groupby(&apos;company&apos;,as_index=False).apply(get_oldest_staff)</span><br><span class="line">&gt; oldest_staff</span><br><span class="line">  company  salary  age  </span><br><span class="line">0       A      23   33       </span><br><span class="line">1       B      21   40       </span><br><span class="line">2       C      43   35</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ€åï¼Œå…³äº<code>apply</code>çš„ä½¿ç”¨ï¼Œè¿™é‡Œæœ‰ä¸ªå°å»ºè®®ï¼Œè™½ç„¶è¯´<code>apply</code>æ‹¥æœ‰æ›´å¤§çš„çµæ´»æ€§ï¼Œä½†<code>apply</code>çš„è¿è¡Œæ•ˆç‡ä¼šæ¯”<code>agg</code>å’Œ<code>transform</code>æ›´æ…¢ã€‚æ‰€ä»¥ï¼Œ<code>groupby</code>ä¹‹åèƒ½ç”¨<code>agg</code>å’Œ<code>transform</code>è§£å†³çš„é—®é¢˜è¿˜æ˜¯ä¼˜å…ˆä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå®åœ¨è§£å†³ä¸äº†äº†æ‰è€ƒè™‘ä½¿ç”¨<code>apply</code>è¿›è¡Œæ“ä½œã€‚</p>
</blockquote>
<hr>
<h4 id="crosstab"><a href="#crosstab" class="headerlink" title="crosstab"></a>crosstab</h4><blockquote>
<p><a href="https://blog.csdn.net/houyanhua1/article/details/87865868?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~default-15.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~default-15.control" target="_blank" rel="noopener">Python pandasï¼Œåˆ†ç»„ groupby()ï¼Œåˆ†ç»„åçš„èšåˆå‡½æ•°ï¼Œäº¤å‰è¡¨ crosstab()_houyanhua1çš„ä¸“æ -CSDNåšå®¢</a></p>
</blockquote>
<p>crosstab äº¤å‰è¡¨ï¼Œç”¨äºç»Ÿè®¡åˆ†ç»„é¢‘ç‡çš„ç‰¹æ®Šé€è§†è¡¨</p>
<blockquote>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.crosstab.html" target="_blank" rel="noopener">pandas.crosstab â€” pandas 1.3.0 documentation (pydata.org)</a></p>
</blockquote>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ¨¡æ‹Ÿç”¨æˆ·è´­ä¹°å•†å“çš„è¡¨(æ•°æ®)</span></span><br><span class="line">my_list = [&#123;<span class="string">"user_id"</span>: <span class="number">11</span>, <span class="string">"goods"</span>: <span class="string">"è‹¹æœ"</span>&#125;, &#123;<span class="string">"user_id"</span>: <span class="number">11</span>, <span class="string">"goods"</span>: <span class="string">"è‹¹æœ"</span>&#125;, &#123;<span class="string">"user_id"</span>: <span class="number">11</span>, <span class="string">"goods"</span>: <span class="string">"é¦™è•‰"</span>&#125;,</span><br><span class="line">           &#123;<span class="string">"user_id"</span>: <span class="number">22</span>, <span class="string">"goods"</span>: <span class="string">"è‹¹æœ"</span>&#125;, &#123;<span class="string">"user_id"</span>: <span class="number">22</span>, <span class="string">"goods"</span>: <span class="string">"é¦™è•‰"</span>&#125;, &#123;<span class="string">"user_id"</span>: <span class="number">22</span>, <span class="string">"goods"</span>: <span class="string">"é¦™è•‰"</span>&#125;,</span><br><span class="line">           &#123;<span class="string">"user_id"</span>: <span class="number">33</span>, <span class="string">"goods"</span>: <span class="string">"æ¢¨"</span>&#125;, &#123;<span class="string">"user_id"</span>: <span class="number">33</span>, <span class="string">"goods"</span>: <span class="string">"é¦™è•‰"</span>&#125;, &#123;<span class="string">"user_id"</span>: <span class="number">33</span>, <span class="string">"goods"</span>: <span class="string">"è‹¹æœ"</span>&#125;]</span><br><span class="line">df = pd.DataFrame(my_list)</span><br><span class="line">print(df)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">  goods     user_id</span></span><br><span class="line"><span class="string">0    è‹¹æœ       11</span></span><br><span class="line"><span class="string">1    è‹¹æœ       11</span></span><br><span class="line"><span class="string">2    é¦™è•‰       11</span></span><br><span class="line"><span class="string">3    è‹¹æœ       22</span></span><br><span class="line"><span class="string">4    é¦™è•‰       22</span></span><br><span class="line"><span class="string">5    é¦™è•‰       22</span></span><br><span class="line"><span class="string">6     æ¢¨        33</span></span><br><span class="line"><span class="string">7    é¦™è•‰       33</span></span><br><span class="line"><span class="string">8    è‹¹æœ       33</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># äº¤å‰è¡¨ (ç‰¹æ®Šçš„åˆ†ç»„å·¥å…·)</span></span><br><span class="line">crass_tb = pd.crosstab(df[<span class="string">"user_id"</span>], df[<span class="string">"goods"</span>])  <span class="comment"># äº¤å‰è¡¨ï¼Œç»Ÿè®¡æ¯ä¸ªç”¨æˆ·è´­ä¹°å„ç§å•†å“çš„æ•°é‡</span></span><br><span class="line">print(crass_tb)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">goods    æ¢¨  è‹¹æœ  é¦™è•‰</span></span><br><span class="line"><span class="string">user_id           </span></span><br><span class="line"><span class="string">11       0    2    1</span></span><br><span class="line"><span class="string">22       0    1    2</span></span><br><span class="line"><span class="string">33       1    1    1</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># â†‘ç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«æ”¾åœ¨index</span></span><br></pre></td></tr></table></figure>
<p>è¯­æ³•ï¼š</p>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717172959291.png" alt="image-20210717172959291" style="zoom:150%;"></p>
<hr>
<h4 id="assign"><a href="#assign" class="headerlink" title="assign"></a>assign</h4><blockquote>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.assign.html" target="_blank" rel="noopener">pandas.DataFrame.assign â€” pandas 1.3.0 documentation (pydata.org)</a></p>
</blockquote>
<p>ä½œç”¨ï¼šAssign new columns to a DataFrame.</p>
<p>ä¾‹ï¼š</p>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717173208264.png" alt="image-20210717173208264" style="zoom:150%;"></p>
<p>â†‘ä¹Ÿå¯ä»¥å†™ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df.assign(temp_f=<span class="keyword">lambda</span> x:x[<span class="string">'temp_c'</span>]*<span class="number">9</span>/<span class="number">5</span>+<span class="number">32</span>).assign(temp_k=<span class="keyword">lambda</span> x: (x[<span class="string">'temp_f'</span>]+<span class="number">459.67</span>)*<span class="number">5</span>/<span class="number">9</span>)</span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼šåˆ©ç”¨crosstabä¸assignè¿›è¡Œwoeå’Œivçš„è®¡ç®—ï¼š</p>
<p>æ„é€ æ•°æ®é›†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">"col1"</span>:[<span class="string">"ç”·"</span>,<span class="string">"å¥³"</span>,<span class="string">"å¥³"</span>,<span class="string">"ç”·"</span>,<span class="string">"å¥³"</span>], <span class="string">"y"</span>:[<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>]&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717173342027.png" alt="image-20210717173342027"></p>
<p>åˆ©ç”¨ <code>crosstab</code> å¾—åˆ°é¢‘ç‡è¡¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pd.crosstab(df[<span class="string">"col1"</span>], df[<span class="string">"y"</span>], normalize=<span class="string">'columns'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717173509526.png" alt="image-20210717173509526"></p>
<p>åœ¨é¢‘ç‡è¡¨çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šwoeåˆ—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pd.crosstab(df[<span class="string">"col1"</span>], df[<span class="string">"y"</span>], normalize=<span class="string">'columns'</span>).assign(woe=<span class="keyword">lambda</span> dfx: np.log(dfx[<span class="number">1</span>].replace(<span class="number">0</span>, <span class="number">0.0001</span>) / dfx[<span class="number">0</span>].replace(<span class="number">0</span>, <span class="number">0.0001</span>)))</span><br></pre></td></tr></table></figure>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717173652106.png" alt="image-20210717173652106"></p>
<p>åˆ©ç”¨woeçš„ç»“æœï¼Œè¿›ä¸€æ­¥å¾—åˆ°ivï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pd.crosstab(df[<span class="string">"col1"</span>], df[<span class="string">"y"</span>], normalize=<span class="string">'columns'</span>).assign(woe=<span class="keyword">lambda</span> dfx: np.log(dfx[<span class="number">1</span>].replace(<span class="number">0</span>, <span class="number">0.0001</span>) / dfx[<span class="number">0</span>].replace(<span class="number">0</span>, <span class="number">0.0001</span>))).assign(iv=<span class="keyword">lambda</span> dfx: np.sum(dfx[<span class="string">'woe'</span>] * (dfx[<span class="number">1</span>] - dfx[<span class="number">0</span>])))</span><br></pre></td></tr></table></figure>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717173734785.png" alt="image-20210717173734785"></p>
<p>â†‘å› ä¸ºivå€¼æ˜¯æ˜¯å¯¹äºä¸€ä¸ªå˜é‡è€Œè¨€ï¼ˆå…³äºivå’Œwoeçš„ä»‹ç»è¯¦è§æˆ‘çš„åšå®¢ <a href="https://qypx.github.io/2021/07/17/WOE%E7%BC%96%E7%A0%81%E4%B8%8EIV%E5%80%BC/">WOEç¼–ç ä¸IVå€¼</a>ï¼‰ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä¸¤ä¸ªivå€¼æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå¦‚ä½•ä»ä¸Šè¿°ç»“æœä¸­æå–å‡ºivå€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df_woe_iv = pd.crosstab(df[<span class="string">"col1"</span>], df[<span class="string">"y"</span>], normalize=<span class="string">'columns'</span>).assign(woe=<span class="keyword">lambda</span> dfx: np.log(dfx[<span class="number">1</span>].replace(<span class="number">0</span>, <span class="number">0.0001</span>) / dfx[<span class="number">0</span>].replace(<span class="number">0</span>, <span class="number">0.0001</span>))).assign(iv=<span class="keyword">lambda</span> dfx: np.sum(dfx[<span class="string">'woe'</span>] * (dfx[<span class="number">1</span>] - dfx[<span class="number">0</span>])))</span><br><span class="line"></span><br><span class="line">a = df_woe_iv[<span class="string">'iv'</span>].reset_index()</span><br><span class="line">print(a.loc[<span class="number">0</span>, <span class="string">'iv'</span>])</span><br></pre></td></tr></table></figure>
<p><img src="/2021/07/17/Pandasä¸­çš„å¸¸ç”¨å‡½æ•°/image-20210717174228449.png" alt="image-20210717174228449"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Probability, oddsä¸logodds</title>
    <url>/2021/07/17/Probability-odds%E4%B8%8Elogodds/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p><a href="https://dataunbox.com/odds-and-log-odds/" target="_blank" rel="noopener">Odds And Log Odds In Logistic Regression - Dataunbox</a><br><a href="https://towardsdatascience.com/https-towardsdatascience-com-what-and-why-of-log-odds-64ba988bf704" target="_blank" rel="noopener">WHAT and WHY of Log Odds. WHAT are Log Odds and WHY are theyâ€¦ | by Piyush Agarwal | Towards Data Science</a></p>
</blockquote>
<h4 id="1-probability-odds-ä¸-log-odds"><a href="#1-probability-odds-ä¸-log-odds" class="headerlink" title="1. probability, odds ä¸ log odds"></a>1. probability, odds ä¸ log odds</h4><p>ï¼ˆ1ï¼‰probability æ˜¯æŸä»¶äº‹ä¸æ‰€æœ‰å¯èƒ½å‘ç”Ÿçš„äº‹çš„æ¯”ç‡ã€‚ï¼ˆpï¼‰</p>
<p>ï¼ˆ2ï¼‰odds æ˜¯æŸä»¶äº‹å‘ç”Ÿå’ŒæŸä»¶äº‹æ²¡æœ‰å‘ç”Ÿçš„æ¯”ç‡ã€‚</p>
<script type="math/tex; mode=display">
odds = \frac{p}{1-p}</script><p>ï¼ˆ3ï¼‰log odds å³å¯¹oddså–å¯¹æ•°ï¼Œ log(odds)</p>
<p>ä¾‹å¦‚æˆ‘ä¸äººå·¥æ™ºèƒ½(AI)ç³»ç»Ÿä¸‹äº†10å±€æ£‹ï¼Œå¹¶æœ‰4æ¬¡èƒ½å¤Ÿæ‰“è´¥å®ƒï¼š</p>
<p><em>Probability of winning: 4/10 = 0.40</em><br><em>Odds of winning: 4/6 = 0.6666</em><br><em>log(Odds of winning) = log(0.6666) = -0.176</em></p>
<h4 id="2-logistic-regression"><a href="#2-logistic-regression" class="headerlink" title="2. logistic regression"></a>2. logistic regression</h4><p>p ä¸ logodds çš„ç›¸äº’è½¬æ¢å…³ç³»</p>
<script type="math/tex; mode=display">
p = \frac{1}{1+e^{-(\beta_0+\beta_1x)}}\quad\quad(1)</script><p>åˆ™æœ‰ï¼Œ</p>
<script type="math/tex; mode=display">
1-p = \frac{e^{-(\beta_0+\beta_1x)}}{1+e^{-(\beta_0+\beta_1x)}}</script><script type="math/tex; mode=display">
odds=\frac{p}{1-p}=e^{\beta_0+\beta_1x}</script><script type="math/tex; mode=display">
log odds = ln(\frac{p}{1-p})=\beta_0+\beta_1x \quad \quad (2)</script><p>å¸¦å…¥(1)ä¸­ï¼Œå¯å¾—</p>
<script type="math/tex; mode=display">
p=\frac{1}{1+e^{-logodds}}=\frac{e^{logodds}}{1+e^{logodds}} \quad \quad (3)</script>]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>æ¦‚ç‡</tag>
      </tags>
  </entry>
  <entry>
    <title>find the most frequent element in a list</title>
    <url>/2021/07/17/find-the-most-frequent-element-in-a-list/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å‚è€ƒ <a href="https://www.tutorialspoint.com/find-most-frequent-element-in-a-list-in-python#:~:text=Find most frequent element in a list in,from statistics module. ... 8 Example 9 Output" target="_blank" rel="noopener">Find most frequent element in a list in Python (tutorialspoint.com)</a></p>
</blockquote>
<h4 id="1-æ³•ä¸€ï¼šwith-max-and-count"><a href="#1-æ³•ä¸€ï¼šwith-max-and-count" class="headerlink" title="1. æ³•ä¸€ï¼šwith max and count"></a>1. æ³•ä¸€ï¼šwith max and count</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Given list</span><br><span class="line">listA = [45, 20, 11, 50, 17, 45, 50,13, 45]</span><br><span class="line"></span><br><span class="line">res = max(set(listA), key = listA.count)</span><br><span class="line">print(&quot;Element with highest frequency:\n&quot;,res)</span><br><span class="line"># è¾“å‡º 45</span><br></pre></td></tr></table></figure>
<h4 id="2-æ³•äºŒï¼šwith-Counter"><a href="#2-æ³•äºŒï¼šwith-Counter" class="headerlink" title="2. æ³•äºŒï¼šwith Counter"></a>2. æ³•äºŒï¼šwith Counter</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from collections import Counter</span><br><span class="line"></span><br><span class="line"># Given list</span><br><span class="line">listA = [45, 20, 11, 50, 17, 45, 50,13, 45]</span><br><span class="line"></span><br><span class="line">occurence_count = Counter(listA)</span><br><span class="line">res=occurence_count.most_common(1)[0][0]</span><br><span class="line">print(&quot;Element with highest frequency:\n&quot;,res)</span><br><span class="line"># è¾“å‡º 45</span><br></pre></td></tr></table></figure>
<h4 id="3-æ³•ä¸‰ï¼šwith-mode"><a href="#3-æ³•ä¸‰ï¼šwith-mode" class="headerlink" title="3. æ³•ä¸‰ï¼šwith mode"></a>3. æ³•ä¸‰ï¼šwith mode</h4><p>è¿”å›ä¼—æ•°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from statistics import mode</span><br><span class="line"># Given list</span><br><span class="line">listA = [45, 20, 11, 50, 17, 45, 50,13, 45]</span><br><span class="line"></span><br><span class="line">res=mode(listA)</span><br><span class="line">print(&quot;Element with highest frequency:\n&quot;,res)</span><br><span class="line"># è¾“å‡º 45</span><br></pre></td></tr></table></figure>
<h4 id="è¡¥å……ï¼šå…³äº-Counter"><a href="#è¡¥å……ï¼šå…³äº-Counter" class="headerlink" title="è¡¥å……ï¼šå…³äº Counter"></a>è¡¥å……ï¼šå…³äº Counter</h4><p>å°†ä¸€ä¸ª list ä¼ å…¥ Counterï¼Œå°†è¿”å›ä¸€ä¸ªåŒ…å«æ¯ä¸ªå…ƒç´ å‡ºç°æ¬¡æ•°çš„å­—å…¸</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from collections import Counter</span><br><span class="line"></span><br><span class="line"># Given list</span><br><span class="line">listA = [45, 20, 11, 50, 17, 45, 50,13, 45]</span><br><span class="line"></span><br><span class="line">occurence_count = Counter(listA)</span><br><span class="line">occurence_count.keys()</span><br><span class="line"># dict_keys([45, 20, 11, 50, 17, 13])</span><br><span class="line">occurence_count.values()</span><br><span class="line">dict_values([3, 1, 1, 2, 1, 1])</span><br></pre></td></tr></table></figure>
<p><code>most_common([n])</code>æ–¹æ³•ï¼š</p>
<p>è¿”å›å‰nä¸ªå‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ åŠå…¶æ•°é‡ã€‚ å¦‚æœçœç•¥næˆ–Noneï¼Œå°†è¿”å›è®¡æ•°å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ å…·æœ‰ç›¸åŒè®¡æ•°çš„å…ƒç´ å¯ä»¥ä»»æ„æ’åº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">occurence_count.most_common(1)</span><br><span class="line"># [(45, 3)]</span><br><span class="line"></span><br><span class="line">occurence_count.most_common(2)</span><br><span class="line">#[(45, 3), (50, 2)]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2021/07/17/hello-world/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><a id="more"></a>
<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>tæ£€éªŒä¸å¡æ–¹æ£€éªŒ</title>
    <url>/2021/06/27/t%E6%A3%80%E9%AA%8C%E4%B8%8E%E5%8D%A1%E6%96%B9%E6%A3%80%E9%AA%8C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å‚è€ƒ<br> <a href="https://www.statology.org/chi-square-test-vs-t-test/" target="_blank" rel="noopener">Chi-Square Test vs. t-Test: Whatâ€™s the Difference? - Statology</a><br><a href="https://byjus.com/maths/chi-square-test/" target="_blank" rel="noopener">Chi-Square Test | How to Calculate Chi-square using Formula with Example (byjus.com)</a> â¬…å¯æŸ¥çœ‹å¡æ–¹è¡¨</p>
</blockquote>
<h3 id="1-å¡æ–¹æ£€éªŒ"><a href="#1-å¡æ–¹æ£€éªŒ" class="headerlink" title="1. å¡æ–¹æ£€éªŒ"></a>1. å¡æ–¹æ£€éªŒ</h3><p>å®é™…ä¸Šå¡æ–¹æ£€éªŒæœ‰å‡ ç§ä¸åŒçš„ç‰ˆæœ¬ï¼Œä½†æœ€å¸¸è§çš„æ˜¯å¡æ–¹ç‹¬ç«‹æ€§æ£€éªŒï¼ˆ<a href="https://www.statology.org/chi-square-test-of-independence/" target="_blank" rel="noopener">Chi-Square Test of Independence</a>ï¼‰ã€‚</p>
<h4 id="1-1-å®šä¹‰"><a href="#1-1-å®šä¹‰" class="headerlink" title="1.1 å®šä¹‰"></a>1.1 å®šä¹‰</h4><p>å½“æˆ‘ä»¬æƒ³è¦æ£€éªŒä¸¤ä¸ªåˆ†ç±»å˜é‡ä¹‹é—´æ˜¯å¦å­˜åœ¨ç»Ÿè®¡ä¸Šæ˜¾ç€çš„å…³è”æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨å¡æ–¹ç‹¬ç«‹æ€§æ£€éªŒã€‚</p>
<blockquote>
<p>åŸå‡è®¾($H_0$):  ä¸¤ä¸ªå˜é‡ä¹‹é—´æ²¡æœ‰æ˜¾è‘—çš„å…³è”ã€‚<br>å¤‡æ‹©å‡è®¾($H_a$): ä¸¤ä¸ªå˜é‡ä¹‹é—´æœ‰æ˜¾è‘—çš„å…³è”ã€‚</p>
</blockquote>
<p>å³ï¼šæ‹’ç»åŸå‡è®¾ï¼Œè¡¨ç¤ºä¸¤ä¸ªå˜é‡ä¹‹é—´æœ‰æ˜¾è‘—çš„å…³è”</p>
<h4 id="1-2-æ¡ˆä¾‹"><a href="#1-2-æ¡ˆä¾‹" class="headerlink" title="1.2 æ¡ˆä¾‹"></a>1.2 æ¡ˆä¾‹</h4><p>ä»¥ä¸‹æ˜¯å¯èƒ½ç”¨åˆ°å¡æ–¹ç‹¬ç«‹æ€§æ£€éªŒçš„ä¸€äº›ä¾‹å­ã€‚</p>
<p>ï¼ˆ1ï¼‰æ¡ˆä¾‹1ï¼š<br>æˆ‘ä»¬æƒ³çŸ¥é“æ€§åˆ«(ç”·æ€§ã€å¥³æ€§)å’Œæ”¿å…šåå¥½(å…±å’Œå…šã€æ°‘ä¸»å…šã€ç‹¬ç«‹å…šæ´¾)ä¹‹é—´æ˜¯å¦æœ‰ç»Ÿè®¡å­¦ä¸Šçš„æ˜¾è‘—å…³è”ã€‚ä¸ºäº†éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥éšæœºè°ƒæŸ¥100ä¸ªäººï¼Œè®°å½•ä»–ä»¬çš„æ€§åˆ«å’Œæ”¿å…šåå¥½ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç‹¬ç«‹æ€§è¿›è¡Œå¡æ–¹æ£€éªŒï¼Œä»¥ç¡®å®šæ€§åˆ«å’Œæ”¿å…šåå¥½ä¹‹é—´æ˜¯å¦æœ‰ç»Ÿè®¡å­¦ä¸Šçš„æ˜¾è‘—å…³è”ã€‚</p>
<p>ï¼ˆ2ï¼‰æ¡ˆä¾‹2ï¼š<br>æˆ‘ä»¬æƒ³çŸ¥é“å¹´çº§(å¤§ä¸€ã€å¤§äºŒã€å¤§ä¸‰ã€å¤§å››)å’Œæœ€å–œæ¬¢çš„ç”µå½±ç±»å‹(æƒŠæ‚šç‰‡ã€æˆå‰§ã€è¥¿éƒ¨ç‰‡)ä¹‹é—´æ˜¯å¦æœ‰ç»Ÿè®¡å­¦ä¸Šçš„æ˜¾è‘—å…³è”ã€‚ä¸ºäº†éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥éšæœºè°ƒæŸ¥æŸæ‰€å­¦æ ¡æ¯ä¸ªå¹´çº§çš„100åå­¦ç”Ÿï¼Œå¹¶è®°å½•ä¸‹ä»–ä»¬æœ€å–œæ¬¢çš„ç”µå½±ç±»å‹ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç‹¬ç«‹æ€§è¿›è¡Œå¡æ–¹æ£€éªŒï¼Œä»¥ç¡®å®šå¹´çº§å’Œå–œçˆ±çš„ç”µå½±ç±»å‹ä¹‹é—´æ˜¯å¦æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ä¸Šçš„å…³è”ã€‚</p>
<p>ï¼ˆ3ï¼‰æ¡ˆä¾‹3ï¼š<br>æˆ‘ä»¬æƒ³çŸ¥é“ä¸€ä¸ªäººæœ€å–œæ¬¢çš„è¿åŠ¨(ç¯®çƒã€æ£’çƒã€è¶³çƒ)å’Œä»–ä»¬æˆé•¿çš„åœ°æ–¹(åŸå¸‚ã€å†œæ‘)ä¹‹é—´æ˜¯å¦æœ‰ç»Ÿè®¡å­¦ä¸Šçš„æ˜¾è‘—å…³è”ã€‚ä¸ºäº†éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥éšæœºè°ƒæŸ¥100ä¸ªäººï¼Œé—®ä»–ä»¬åœ¨ä»€ä¹ˆæ ·çš„åœ°æ–¹é•¿å¤§ï¼Œä»–ä»¬æœ€å–œæ¬¢çš„è¿åŠ¨æ˜¯ä»€ä¹ˆã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç‹¬ç«‹æ€§è¿›è¡Œå¡æ–¹æ£€éªŒï¼Œä»¥ç¡®å®šä¸€ä¸ªäººæœ€å–œæ¬¢çš„è¿åŠ¨å’Œä»–ä»¬æˆé•¿çš„åœ°æ–¹ä¹‹é—´æ˜¯å¦æœ‰ç»Ÿè®¡å­¦ä¸Šçš„æ˜¾è‘—å…³è”</p>
<h4 id="1-3-å‡è®¾"><a href="#1-3-å‡è®¾" class="headerlink" title="1.3 å‡è®¾"></a>1.3 å‡è®¾</h4><p>åœ¨å¯¹ç‹¬ç«‹æ€§è¿›è¡Œå¡æ–¹æ£€éªŒä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®ä¿æ»¡è¶³ä»¥ä¸‹å‡è®¾ï¼Œä»¥ç¡®ä¿æ£€éªŒæœ‰æ•ˆ</p>
<ul>
<li>éšæœºï¼šåº”è¯¥ä½¿ç”¨éšæœºæ ·æœ¬æˆ–éšæœºå®éªŒæ¥æ”¶é›†ä¸¤ä¸ªæ ·æœ¬çš„æ•°æ®ã€‚</li>
<li>åˆ†ç±»å‹ï¼šæˆ‘ä»¬æ­£åœ¨ç ”ç©¶çš„å˜é‡åº”è¯¥æ˜¯åˆ†ç±»å‹çš„ã€‚</li>
<li>æ ·æœ¬é‡ ï¼šå˜é‡çš„æ¯ä¸ªå–å€¼çš„é¢„æœŸè§‚å¯Ÿæ•°åº”è‡³å°‘ä¸º5ã€‚</li>
</ul>
<a id="more"></a>
<h3 id="2-tæ£€éªŒ"><a href="#2-tæ£€éªŒ" class="headerlink" title="2. tæ£€éªŒ"></a>2. tæ£€éªŒ</h3><p>tæ£€éªŒä¹Ÿæœ‰ä¸€äº›ä¸åŒçš„ç‰ˆæœ¬ï¼Œä½†æœ€å¸¸è§çš„æ˜¯å‡å€¼å·®å¼‚çš„tæ£€éªŒ (<a href="https://www.statology.org/two-sample-t-test/" target="_blank" rel="noopener">t-test for a difference in means</a>)ã€‚</p>
<h4 id="2-1-å®šä¹‰"><a href="#2-1-å®šä¹‰" class="headerlink" title="2.1 å®šä¹‰"></a>2.1 å®šä¹‰</h4><p>å½“æˆ‘ä»¬æƒ³æ£€éªŒä¸¤ä¸ªæ€»ä½“å‡å€¼ä¹‹é—´æ˜¯å¦æœ‰ç»Ÿè®¡å­¦ä¸Šçš„æ˜¾è‘—å·®å¼‚æ—¶ï¼Œæˆ‘ä»¬ç”¨tæ£€éªŒæ¥æ£€éªŒå‡å€¼çš„å·®å¼‚ã€‚</p>
<blockquote>
<p>åŸå‡è®¾($H_0$)ï¼šä¸¤ä¸ªæ€»ä½“å‡å€¼ç›¸ç­‰ã€‚<br>å¤‡æ‹©å‡è®¾($H_a$): ä¸¤ä¸ªæ€»ä½“å‡å€¼ä¸ç›¸ç­‰ã€‚</p>
</blockquote>
<p>å³ï¼šæ‹’ç»åŸå‡è®¾ï¼Œè¡¨ç¤ºä¸¤ä¸ªæ€»ä½“çš„å‡å€¼ä¸ç›¸ç­‰</p>
<h4 id="2-2-æ¡ˆä¾‹"><a href="#2-2-æ¡ˆä¾‹" class="headerlink" title="2.2 æ¡ˆä¾‹"></a>2.2 æ¡ˆä¾‹</h4><p>ï¼ˆ1ï¼‰æ¡ˆä¾‹1ï¼š<br>æˆ‘ä»¬æƒ³çŸ¥é“é¥®é£ŸAæˆ–é¥®é£ŸBï¼Œå“ªä¸€ä¸ªä¼šå¯¼è‡´æ›´å¤§çš„ä½“é‡å‡è½»ã€‚æˆ‘ä»¬éšæœºåˆ†é…100äººä½¿ç”¨Aé¥®é£Ÿ2ä¸ªæœˆï¼Œå¦å¤–100äººä½¿ç”¨Bé¥®é£Ÿ2ä¸ªæœˆã€‚æˆ‘ä»¬å¯ä»¥å¯¹å¹³å‡å€¼çš„å·®å¼‚è¿›è¡Œtæ£€éªŒï¼Œä»¥ç¡®å®šä¸¤ç»„ä¹‹é—´çš„å¹³å‡ä½“é‡å‡è½»æ˜¯å¦æœ‰ç»Ÿè®¡å­¦ä¸Šçš„å·®å¼‚ã€‚</p>
<p>ï¼ˆ2ï¼‰æ¡ˆä¾‹2ï¼š<br>æˆ‘ä»¬æƒ³çŸ¥é“æ˜¯å¦ä¸¤ä¸ªä¸åŒçš„å­¦ä¹ è®¡åˆ’ä¼šå¯¼è‡´å­¦ç”Ÿä¸åŒçš„è€ƒè¯•æˆç»©ã€‚æˆ‘ä»¬éšæœºåˆ†é…50åå­¦ç”Ÿä½¿ç”¨ä¸€ä¸ªå­¦ä¹ è®¡åˆ’ï¼Œ50åå­¦ç”Ÿä½¿ç”¨å¦ä¸€ä¸ªå­¦ä¹ è®¡åˆ’ï¼Œä¸ºæœŸä¸€ä¸ªæœˆã€‚æˆ‘ä»¬å¯ä»¥å¯¹å¹³å‡å€¼çš„å·®å¼‚è¿›è¡Œtæ£€éªŒï¼Œä»¥ç¡®å®šä¸¤ä¸ªå­¦ä¹ è®¡åˆ’çš„å¹³å‡è€ƒè¯•æˆç»©æ˜¯å¦æœ‰ç»Ÿè®¡å­¦ä¸Šçš„æ˜¾è‘—å·®å¼‚ã€‚</p>
<p>ï¼ˆ3ï¼‰æ¡ˆä¾‹3ï¼š<br>æˆ‘ä»¬æƒ³çŸ¥é“æ¥è‡ªä¸¤ä¸ªä¸åŒå­¦æ ¡çš„å­¦ç”Ÿæ˜¯å¦æœ‰ç›¸åŒçš„å¹³å‡èº«é«˜ã€‚æˆ‘ä»¬æµ‹é‡äº†100åéšæœºæ¥è‡ªä¸€ä¸ªå­¦æ ¡çš„å­¦ç”Ÿå’Œ100åéšæœºæ¥è‡ªå¦ä¸€ä¸ªå­¦æ ¡çš„å­¦ç”Ÿçš„èº«é«˜ã€‚æˆ‘ä»¬å¯ä»¥å¯¹å¹³å‡å€¼çš„å·®å¼‚è¿›è¡Œtæ£€éªŒï¼Œä»¥ç¡®å®šä¸¤æ‰€å­¦æ ¡å­¦ç”Ÿçš„å¹³å‡èº«é«˜æ˜¯å¦æœ‰ç»Ÿè®¡å­¦ä¸Šçš„æ˜¾è‘—å·®å¼‚ã€‚</p>
<h4 id="2-3-å‡è®¾"><a href="#2-3-å‡è®¾" class="headerlink" title="2.3 å‡è®¾"></a>2.3 å‡è®¾</h4><p>åœ¨å¯¹ä¸¤ä¸ªæ€»ä½“å‡å€¼ä¹‹é—´çš„å·®å¼‚è¿›è¡Œå‡è®¾æ£€éªŒä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®ä¿æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬çš„å‡è®¾æ£€éªŒæœ‰æ•ˆï¼š</p>
<ul>
<li>éšæœºï¼šåº”è¯¥ä½¿ç”¨éšæœºæ ·æœ¬æˆ–éšæœºå®éªŒæ¥æ”¶é›†ä¸¤ä¸ªæ ·æœ¬çš„æ•°æ®ã€‚</li>
<li>æ­£æ€æ€§ï¼šæŠ½æ ·åˆ†å¸ƒä¸ºæ­£æ€æˆ–è¿‘ä¼¼æ­£æ€ã€‚</li>
<li>ç‹¬ç«‹æ€§ï¼šä¸¤ä¸ªæ ·æœ¬æ˜¯ç‹¬ç«‹çš„ã€‚</li>
</ul>
<h3 id="3-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å“ªä¸ªæ£€éªŒ"><a href="#3-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å“ªä¸ªæ£€éªŒ" class="headerlink" title="3. ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å“ªä¸ªæ£€éªŒ"></a>3. ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å“ªä¸ªæ£€éªŒ</h3><p>æ€»ç»“ï¼š</p>
<p>å¡æ–¹ç‹¬ç«‹æ€§æ£€éªŒï¼šå¯ä»¥æ£€éªŒä¸¤ä¸ªåˆ†ç±»å‹å˜é‡ä¹‹é—´æ˜¯å¦æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ä¸Šçš„å…³è”ã€‚å½“ä½ æ‹’ç»å¡æ–¹ç‹¬ç«‹æ£€éªŒçš„é›¶å‡è®¾æ—¶ï¼Œè¿™æ„å‘³ç€åœ¨ä¸¤ä¸ªå˜é‡ä¹‹é—´æœ‰æ˜¾è‘—çš„å…³è”ã€‚</p>
<p>å‡å€¼å·®å¼‚çš„tæ£€éªŒï¼šå…è®¸ä½ æ£€éªŒä¸¤ä¸ªæ€»ä½“å‡å€¼ä¹‹é—´æ˜¯å¦æœ‰ç»Ÿè®¡å­¦ä¸Šçš„æ˜¾è‘—å·®å¼‚ã€‚æ‹’ç»å‡å€¼å·®å¼‚çš„tæ£€éªŒçš„é›¶å‡è®¾æ„å‘³ç€ä¸¤ä¸ªæ€»ä½“å‡å€¼ä¸ç›¸ç­‰ã€‚</p>
<p>æƒ³è¦çŸ¥é“æ˜¯ä½¿ç”¨å¡æ–¹æ£€éªŒè¿˜æ˜¯tæ£€éªŒï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯çœ‹çœ‹å˜é‡çš„ç±»å‹ã€‚å¦‚æœä½ æœ‰ä¸¤ä¸ªå˜é‡éƒ½æ˜¯åˆ†ç±»å‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¾‹å¦‚ç”·æ€§ã€å¥³æ€§ï¼Œæˆ–å…±å’Œå…šã€æ°‘ä¸»å…šã€ç‹¬ç«‹å…šæ´¾ï¼Œé‚£ä¹ˆä½ åº”è¯¥ä½¿ç”¨å¡æ–¹æ£€éªŒã€‚ä½†æ˜¯å¦‚æœä¸€ä¸ªå˜é‡æ˜¯åˆ†ç±»å‹çš„(ä¾‹å¦‚å­¦ä¹ è®¡åˆ’ç±»å‹ - è®¡åˆ’1æˆ–è®¡åˆ’2)ï¼Œè€Œå¦ä¸€ä¸ªå˜é‡æ˜¯è¿ç»­å‹çš„(ä¾‹å¦‚è€ƒè¯•åˆ†æ•°ä»0åˆ°100)ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥ä½¿ç”¨tæ£€éªŒ</p>
<h3 id="4-ä½¿ç”¨-Python-è¿›è¡Œtæ£€éªŒ"><a href="#4-ä½¿ç”¨-Python-è¿›è¡Œtæ£€éªŒ" class="headerlink" title="4. ä½¿ç”¨ Python è¿›è¡Œtæ£€éªŒ"></a>4. ä½¿ç”¨ Python è¿›è¡Œtæ£€éªŒ</h3><blockquote>
<p>å‚è€ƒ <a href="https://www.cnblogs.com/IvyWong/p/10134012.html" target="_blank" rel="noopener">ä½¿ç”¨ Python è¿›è¡Œ Tæ£€éªŒ - è´¥åŒ—æ¡‘ - åšå®¢å›­ (cnblogs.com)</a></p>
</blockquote>
<p>åˆ©ç”¨ç¬¬ä¸‰æ–¹åº“ scipy</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ttest_1samp: å•æ ·æœ¬tæ£€éªŒ</span><br><span class="line">ttest_ind: ä¸¤ç‹¬ç«‹æ ·æœ¬tæ£€éªŒ</span><br><span class="line">ttest_rel: é…å¯¹æ ·æœ¬tæ£€éªŒ</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šä»¥ä¸Šä¸‰ç§æ£€éªŒå‡é»˜è®¤è¿›è¡ŒåŒä¾§æ£€éªŒ</p>
<p>$H_0:\mu = \mu_0$<br>$H_1: \mu \neq \mu_0$</p>
<h4 id="4-1-å•æ ·æœ¬tæ£€éªŒ"><a href="#4-1-å•æ ·æœ¬tæ£€éªŒ" class="headerlink" title="4.1 å•æ ·æœ¬tæ£€éªŒ"></a>4.1 å•æ ·æœ¬tæ£€éªŒ</h4><blockquote>
<p>å®˜æ–¹æ–‡æ¡£ <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_1samp.html" target="_blank" rel="noopener">scipy.stats.ttest_1samp â€” SciPy v1.7.0 Manual</a></p>
</blockquote>
<p>ä½¿ç”¨<code>ttest_1samp()</code>å‡½æ•°å¯ä»¥è¿›è¡Œå•æ ·æœ¬tæ£€éªŒï¼Œæ¯”å¦‚æ£€éªŒä¸€åˆ—æ•°æ®çš„å‡å€¼ä¸1çš„å·®å¼‚æ˜¯å¦æ˜¾è‘—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">stats.ttest_1samp(data,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>ç»“æœä¼šè¿”å›tå€¼å’Œpå€¼ï¼Œè‹¥ p&lt;0.05ï¼Œè®¤ä¸ºæœ‰æ˜¾è‘—å·®å¼‚</p>
<p>è¯­æ³•ï¼š</p>
<p><img src="/2021/06/27/tæ£€éªŒä¸å¡æ–¹æ£€éªŒ/image-20210717192910406.png" alt="image-20210717192910406"></p>
<h4 id="4-2-ä¸¤ç‹¬ç«‹æ ·æœ¬tæ£€éªŒ"><a href="#4-2-ä¸¤ç‹¬ç«‹æ ·æœ¬tæ£€éªŒ" class="headerlink" title="4.2 ä¸¤ç‹¬ç«‹æ ·æœ¬tæ£€éªŒ"></a>4.2 ä¸¤ç‹¬ç«‹æ ·æœ¬tæ£€éªŒ</h4><blockquote>
<p>å®˜æ–¹æ–‡æ¡£ <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_ind.html" target="_blank" rel="noopener">scipy.stats.ttest_ind â€” SciPy v1.7.0 Manual</a></p>
</blockquote>
<p>ä½¿ç”¨<code>ttest_ind()</code>å‡½æ•°å¯ä»¥è¿›è¡Œä¸¤ç‹¬ç«‹æ ·æœ¬tæ£€éªŒã€‚</p>
<p>å½“ä¸¤æ€»ä½“æ–¹å·®ç›¸ç­‰æ—¶ï¼Œå³å…·æœ‰<strong>æ–¹å·®é½æ€§</strong>ï¼Œå¯ä»¥ç›´æ¥æ£€éªŒã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">stats.ttest_ind(data1,data2)</span><br></pre></td></tr></table></figure>
<p>åŒæ ·åœ°ï¼Œè¿”å›ç»“æœä¼šè¿”å›tå€¼å’Œpå€¼ã€‚</p>
<p>å½“ä¸ç¡®å®šä¸¤æ€»ä½“æ–¹å·®æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œåº”å…ˆåˆ©ç”¨<strong>leveneæ£€éªŒ</strong>ï¼Œæ£€éªŒä¸¤æ€»ä½“æ˜¯å¦å…·æœ‰æ–¹å·®é½æ€§:</p>
<blockquote>
<p>å®˜æ–¹æ–‡æ¡£<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.levene.html" target="_blank" rel="noopener">scipy.stats.levene â€” SciPy v1.7.0 Manual</a></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">stats.levene(data1,data2)</span><br></pre></td></tr></table></figure>
<p><img src="/2021/06/27/tæ£€éªŒä¸å¡æ–¹æ£€éªŒ/image-20210717193215478.png" alt="image-20210717193215478"></p>
<p>åŸå‡è®¾ï¼šä¸¤æ€»ä½“å…·æœ‰æ–¹å·®é½æ€§ã€‚<br>å¦‚æœè¿”å›ç»“æœçš„på€¼è¿œå¤§äº0.05ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¤ä¸ºä¸¤æ€»ä½“å…·æœ‰æ–¹å·®é½æ€§ã€‚</p>
<p>å¦‚æœä¸¤æ€»ä½“ä¸å…·æœ‰æ–¹å·®é½æ€§ï¼Œéœ€è¦åŠ ä¸Šå‚æ•°<code>equal_val</code>å¹¶è®¾å®šä¸ºFalseã€‚å¦‚ä¸‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">stats.ttest_ind(data1,data2,equal_var=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h4 id="4-3-é…å¯¹æ ·æœ¬tæ£€éªŒ"><a href="#4-3-é…å¯¹æ ·æœ¬tæ£€éªŒ" class="headerlink" title="4.3 é…å¯¹æ ·æœ¬tæ£€éªŒ"></a>4.3 é…å¯¹æ ·æœ¬tæ£€éªŒ</h4><blockquote>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_rel.html" target="_blank" rel="noopener">scipy.stats.ttest_rel â€” SciPy v1.7.0 Manual</a></p>
</blockquote>
<p>ä½¿ç”¨<code>ttest_rel()</code>å‡½æ•°å¯ä»¥è¿›è¡Œé…å¯¹æ ·æœ¬tæ£€éªŒã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">stats.ttest_rel(data1,data2)</span><br></pre></td></tr></table></figure>
<p>åŒæ ·åœ°ï¼Œè¿”å›ç»“æœä¼šè¿”å›tå€¼å’Œpå€¼ã€‚</p>
]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>å‡è®¾æ£€éªŒ</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå¸¸ç”¨å‘½ä»¤</title>
    <url>/2021/02/21/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="0-åœ¨çº¿ä½¿ç”¨-Linux"><a href="#0-åœ¨çº¿ä½¿ç”¨-Linux" class="headerlink" title="0. åœ¨çº¿ä½¿ç”¨ Linux"></a>0. åœ¨çº¿ä½¿ç”¨ Linux</h3><blockquote>
<p>å‚è€ƒ <a href="https://www.sohu.com/a/343421845_298038" target="_blank" rel="noopener">https://www.sohu.com/a/343421845_298038</a></p>
</blockquote>
<p>JS/UIX - Terminal</p>
<p>åœ°å€ï¼š<a href="https://www.masswerk.at/jsuix/index.html" target="_blank" rel="noopener">https://www.masswerk.at/jsuix/index.html</a></p>
<p>è¿›å…¥åï¼Œç‚¹å‡»open terminalå³å¯ã€‚å®ƒæä¾›ç®€å•çš„ç»ˆç«¯ç¯å¢ƒï¼Œæ²¡æœ‰è‡ªå¸¦gccç­‰ç¼–è¯‘å¥—ä»¶ï¼Œä¸è¿‡ç»ƒä¹ åŸºæœ¬å‘½ä»¤å’Œshellè„šæœ¬è¿˜æ˜¯å¯ä»¥çš„ã€‚</p>
<h3 id="1-å¸¸ç”¨å‘½ä»¤"><a href="#1-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="1. å¸¸ç”¨å‘½ä»¤"></a>1. å¸¸ç”¨å‘½ä»¤</h3><h4 id="1-1-ls-å‘½ä»¤-æ˜¾ç¤ºæŒ‡å®šå·¥ä½œç›®å½•ä¸‹çš„å†…å®¹"><a href="#1-1-ls-å‘½ä»¤-æ˜¾ç¤ºæŒ‡å®šå·¥ä½œç›®å½•ä¸‹çš„å†…å®¹" class="headerlink" title="1.1 ls å‘½ä»¤ - æ˜¾ç¤ºæŒ‡å®šå·¥ä½œç›®å½•ä¸‹çš„å†…å®¹"></a>1.1 ls å‘½ä»¤ - æ˜¾ç¤ºæŒ‡å®šå·¥ä½œç›®å½•ä¸‹çš„å†…å®¹</h4><blockquote>
<p>è¯¦è§ <a href="https://www.runoob.com/linux/linux-comm-ls.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-comm-ls.html</a></p>
</blockquote>
<p>æ˜¾ç¤ºæŒ‡å®šå·¥ä½œç›®å½•ä¸‹çš„å†…å®¹ï¼ˆåˆ—å‡ºç›®å‰å·¥ä½œç›®å½•æ‰€å«ä¹‹æ–‡ä»¶åŠå­ç›®å½•)</p>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ls [-alrtAFR] [name...]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-a</code> æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶åŠç›®å½• (<strong>.</strong> å¼€å¤´çš„éšè—æ–‡ä»¶ä¹Ÿä¼šåˆ—å‡º)</li>
<li><code>-l</code> é™¤æ–‡ä»¶åç§°å¤–ï¼Œäº¦å°†æ–‡ä»¶å‹æ€ã€æƒé™ã€æ‹¥æœ‰è€…ã€æ–‡ä»¶å¤§å°ç­‰èµ„è®¯è¯¦ç»†åˆ—å‡º</li>
</ul>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613903492422.png" alt="1613903492422"></p>
<h4 id="1-2-æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼šcat"><a href="#1-2-æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼šcat" class="headerlink" title="1.2 æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼šcat"></a>1.2 æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼šcat</h4><p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613903531146.png" alt="1613903531146"></p>
<a id="more"></a>
<h4 id="1-3-åˆ›å»ºæ–‡ä»¶ï¼š-touch"><a href="#1-3-åˆ›å»ºæ–‡ä»¶ï¼š-touch" class="headerlink" title="1.3 åˆ›å»ºæ–‡ä»¶ï¼š touch"></a>1.3 åˆ›å»ºæ–‡ä»¶ï¼š touch</h4><p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613903625026.png" alt="1613903625026"></p>
<p>æ­¤æ—¶ï¼Œè‹¥æƒ³å¾€text2ä¸­å†™å…¥å†…å®¹ï¼Œå¯ç”¨ <code>echo &quot;hello word&quot;&gt;&gt;text2</code></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613903728662.png" alt="1613903728662"></p>
<p><code>&gt;&gt;</code>ä»£è¡¨åœ¨æœ«å°¾è¿½åŠ ï¼Œè‹¥ä½¿ç”¨<code>&gt;</code>åˆ™ä¼šæŠŠä¹‹å‰çš„å†…å®¹è¦†ç›–</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613903859605.png" alt="1613903859605"></p>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ç›´æ¥<code>vim text2</code>å¯¹æ–‡ä»¶è¿›è¡Œç¼–è¾‘</p>
<p>æ³¨ï¼šæ— è®ºæ˜¯ <code>echo &quot;hello&quot;&gt;file</code> è¿˜æ˜¯ <code>echo &quot;hello&quot;&gt;&gt;file</code> ï¼Œå¦‚æœfileä¸å­˜åœ¨éƒ½ä¼šå…ˆåˆ›å»ºfileæ–‡ä»¶</p>
<p>ç±»ä¼¼çš„ç”¨æ³•æœ‰ï¼š<code>cat ./result.lst&gt;&gt;aa.txt</code>ï¼ˆå°†result.lstæ–‡ä»¶ä¸­çš„å†…å®¹è¿½åŠ åˆ°aa.txtçš„æœ«å°¾ï¼‰</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613904004258.png" alt="1613904004258"></p>
<h4 id="1-4-mv-ä¸ºæ–‡ä»¶æˆ–ç›®å½•æ”¹åã€æˆ–å°†æ–‡ä»¶æˆ–ç›®å½•ç§»å…¥å…¶å®ƒä½ç½®"><a href="#1-4-mv-ä¸ºæ–‡ä»¶æˆ–ç›®å½•æ”¹åã€æˆ–å°†æ–‡ä»¶æˆ–ç›®å½•ç§»å…¥å…¶å®ƒä½ç½®" class="headerlink" title="1.4 mv - ä¸ºæ–‡ä»¶æˆ–ç›®å½•æ”¹åã€æˆ–å°†æ–‡ä»¶æˆ–ç›®å½•ç§»å…¥å…¶å®ƒä½ç½®"></a>1.4 mv - ä¸ºæ–‡ä»¶æˆ–ç›®å½•æ”¹åã€æˆ–å°†æ–‡ä»¶æˆ–ç›®å½•ç§»å…¥å…¶å®ƒä½ç½®</h4><blockquote>
<p>è¯¦è§ <a href="https://www.runoob.com/linux/linux-comm-mv.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-comm-mv.html</a></p>
</blockquote>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613904102186.png" alt="1613904102186"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613904249971.png" alt="1613904249971"></p>
<p>ğŸ‘†æ³¨ï¼šè‹¥testç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™è¯¥å‘½ä»¤å°†text4é‡å‘½åä¸ºtest</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613904395981.png" alt="1613904395981"></p>
<h4 id="1-5-rm-åˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•"><a href="#1-5-rm-åˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•" class="headerlink" title="1.5 rm - åˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•"></a>1.5 rm - åˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•</h4><blockquote>
<p>è¯¦è§ <a href="https://www.runoob.com/linux/linux-comm-rm.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-comm-rm.html</a></p>
</blockquote>
<p>åˆ é™¤æ–‡ä»¶ï¼š<code>rm æ–‡ä»¶å</code></p>
<p>åˆ é™¤æ–‡ä»¶å¤¹ï¼š<code>rm -r æ–‡ä»¶å¤¹å</code>ã€‚-r å°†ç›®å½•åŠä»¥ä¸‹ä¹‹æ¡£æ¡ˆäº¦é€ä¸€åˆ é™¤</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613904534240.png" alt="1613904534240"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613904600604.png" alt="1613904600604"></p>
<p>-f ç›´æ¥åˆ é™¤ï¼Œæ— éœ€é€ä¸€ç¡®è®¤ï¼Œè§å¦‚ä¸‹ç¤ºä¾‹ï¼š</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613904845877.png" alt="1613904845877"></p>
<h3 id="2-å‹ç¼©æ‰“åŒ…å‘½ä»¤-tarã€zipã€unzip"><a href="#2-å‹ç¼©æ‰“åŒ…å‘½ä»¤-tarã€zipã€unzip" class="headerlink" title="2. å‹ç¼©æ‰“åŒ…å‘½ä»¤ - tarã€zipã€unzip"></a>2. å‹ç¼©æ‰“åŒ…å‘½ä»¤ - tarã€zipã€unzip</h3><blockquote>
<p>æ¥è‡ª <a href="https://blog.csdn.net/weixin_44901564/article/details/99682926" target="_blank" rel="noopener">https://blog.csdn.net/weixin_44901564/article/details/99682926</a></p>
</blockquote>
<p>æ‰“åŒ…ä¸å‹ç¼©çš„åŒºåˆ«ï¼š</p>
<p>æ‰“åŒ…æ˜¯æŒ‡å°†å¤šä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•æ”¾åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªæ€»çš„åŒ…ï¼Œè¿™æ ·ä¾¿äºä¿å­˜å’Œä¼ è¾“ï¼Œä½†æ˜¯å¤§å°æ˜¯æ²¡æœ‰å˜åŒ–çš„ï¼Œå‹ç¼©æ˜¯æŒ‡å°†ä¸€ä¸ªæˆ–è€…å¤šä¸ªå¤§æ–‡ä»¶æˆ–è€…ç›®å½•é€šè¿‡å‹ç¼©ç®—æ³•ä½¿æ–‡ä»¶çš„ä½“ç§¯å˜å°ä»¥è¾¾åˆ°å‹ç¼©çš„ç›®çš„ï¼Œå¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</p>
<p>tarå‘½ä»¤å¯ä»¥è¿›è¡Œæ‰“åŒ…æˆ–å‹ç¼©ã€è§£å‹ï¼Œzipä¸unzipä¸»è¦è¿›è¡Œå‹ç¼©ä¸è§£å‹ã€‚ï¼ˆzipå‘½ä»¤ä¸»è¦ç”¨äºwindows ç³»ç»Ÿä¸‹ï¼Œä¾‹å¦‚åœ¨linuxæœåŠ¡å™¨ä¸Šå¯ç”¨zipè¿›è¡Œå‹ç¼©ï¼Œä¸‹è½½åˆ°æœ¬åœ°windowsç³»ç»Ÿï¼Œè¿›è¡Œè§£å‹æ›´åŠ æ–¹ä¾¿ï¼‰</p>
<h4 id="2-1-tarå‘½ä»¤"><a href="#2-1-tarå‘½ä»¤" class="headerlink" title="2.1 tarå‘½ä»¤"></a>2.1 tarå‘½ä»¤</h4><h5 id="tarå‘½ä»¤å¸¸ç”¨å‚æ•°"><a href="#tarå‘½ä»¤å¸¸ç”¨å‚æ•°" class="headerlink" title="tarå‘½ä»¤å¸¸ç”¨å‚æ•°"></a>tarå‘½ä»¤å¸¸ç”¨å‚æ•°</h5><div class="table-container">
<table>
<thead>
<tr>
<th>-z</th>
<th>æ˜¯å¦åŒæ—¶å…·æœ‰gzå±æ€§</th>
</tr>
</thead>
<tbody>
<tr>
<td>-j</td>
<td>æ˜¯å¦åŒæ—¶å…·æœ‰bz2å±æ€§</td>
</tr>
<tr>
<td>-J</td>
<td>æ˜¯å¦åŒæ—¶å…·æœ‰xzå±æ€§</td>
</tr>
<tr>
<td>-x</td>
<td>è§£å‹ç¼©ã€æå–æ‰“åŒ…çš„å†…å®¹</td>
</tr>
<tr>
<td>-t</td>
<td>æŸ¥çœ‹å‹ç¼©åŒ…å†…å®¹</td>
</tr>
<tr>
<td>-c</td>
<td>å»ºç«‹ä¸€ä¸ªå‹ç¼©ï¼Œæ‰“åŒ…æ–‡æ¡£</td>
</tr>
<tr>
<td>-C</td>
<td>åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•ï¼Œè¡¨ç¤ºæŒ‡å®šè§£å‹ç¼©åŒ…çš„å†…å®¹å’Œæ‰“åŒ…çš„å†…å®¹å­˜æ”¾çš„ç›®å½•</td>
</tr>
<tr>
<td>-v</td>
<td>æ˜¾ç¤ºå‹ç¼©æˆ–è€…æ‰“åŒ…çš„å†…å®¹</td>
</tr>
<tr>
<td>-f</td>
<td>ä½¿ç”¨æ–‡ä»¶åï¼Œåœ¨fåé¢è¦æ¥å‹ç¼©åçš„æ–‡ä»¶çš„åå­—ï¼Œåªè¦ç”¨åˆ°tarå‘½ä»¤ï¼Œ-fé€‰é¡¹æ˜¯å¿…é¡»è¦ç”¨çš„ï¼Œ-få‚æ•°åœ¨ä½¿ç”¨çš„æ—¶å€™ä¸€å®šæ’åœ¨å…¶ä»–å‚æ•°çš„åé¢ï¼Œåœ¨æœ€å³è¾¹</td>
</tr>
<tr>
<td>-p</td>
<td>ä¿ç•™å¤‡ä»½æ•°æ®çš„åŸæœ¬æƒé™ä¸å±æ€§ï¼Œå¸¸ç”¨äºå¤‡ä»½ï¼ˆ-cï¼‰é‡è¦çš„é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>-Pï¼ˆå¤§å†™Pï¼‰</td>
<td>ä¿ç•™ç»å¯¹è·¯å¾„</td>
</tr>
</tbody>
</table>
</div>
<h5 id="ä¸€ã€æ‰“åŒ…"><a href="#ä¸€ã€æ‰“åŒ…" class="headerlink" title="ä¸€ã€æ‰“åŒ…"></a>ä¸€ã€æ‰“åŒ…</h5><p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613918040999.png" alt="1613918040999"></p>
<h5 id="äºŒã€å‹ç¼©"><a href="#äºŒã€å‹ç¼©" class="headerlink" title="äºŒã€å‹ç¼©"></a>äºŒã€å‹ç¼©</h5><p>linuxä¸»è¦æœ‰ä¸‰ç§å‹ç¼©æ–¹å¼ï¼š<br>1.gzipï¼šæ˜¯å…¬è®¤çš„å‹ç¼©é€Ÿåº¦æœ€å¿«ï¼Œå‹ç¼©å¤§æ–‡ä»¶çš„æ—¶å€™ä¸å…¶ä»–çš„å‹ç¼©æ–¹å¼ç›¸æ¯”æ›´åŠ æ˜æ˜¾ï¼Œå†å²æœ€ä¹…ï¼Œåº”ç”¨æœ€å¹¿æ³›çš„å‹ç¼©æ–¹å¼<br>2.bzipï¼šå‹ç¼©å½¢æˆçš„æ–‡ä»¶å°ï¼Œä½†æ˜¯å¯ç”¨æ€§ä¸å¦‚gzip<br>3.xzï¼šæ˜¯æœ€æ–°çš„å‹ç¼©æ–¹å¼ï¼Œå¯ä»¥è‡ªåŠ¨æä¾›æœ€ä½³çš„å‹ç¼©ç‡</p>
<p>å»ºè®®å‹ç¼©çš„æ—¶å€™æ ‡æ˜åç¼€ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
<th>å‘½åæ–¹å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>-z</td>
<td>ç”¨äºgzipå‹ç¼©æ–¹å¼</td>
<td>æ–‡ä»¶å.tar.gz</td>
</tr>
<tr>
<td>-j</td>
<td>ç”¨äºbzip2å‹ç¼©æ–¹å¼</td>
<td>æ–‡ä»¶å.tar.bz2</td>
</tr>
<tr>
<td>-J</td>
<td>ç”¨äºxzå‹ç¼©æ–¹å¼</td>
<td>æ–‡ä»¶å.tar.xz</td>
</tr>
</tbody>
</table>
</div>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613918385198.png" alt="1613918385198"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613918409030.png" alt="1613918409030"></p>
<h5 id="ä¸‰ã€è§£å‹"><a href="#ä¸‰ã€è§£å‹" class="headerlink" title="ä¸‰ã€è§£å‹"></a>ä¸‰ã€è§£å‹</h5><p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613918570956.png" alt="1613918570956"></p>
<p>tarå‘½ä»¤åœ¨è§£å‹æ—¶ä¸éœ€è¦æŒ‡æ˜å‹ç¼©çš„æ–¹å¼ï¼Œå®ƒä¼šè‡ªå·±é€‰æ‹©è·Ÿå‹ç¼©æ–¹å¼å¯¹åº”çš„æ–¹å¼å»è§£å‹</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613918627839.png" alt="1613918627839"></p>
<p>ğŸ‘†åŸæ–‡ä¸­æœªç»™å‡ºå‘½ä»¤ï¼ŒçŒœæµ‹ä¸º <code>tar -xf Golden.apk.tar.gz</code></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613918698529.png" alt="1613918698529"></p>
<h5 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h5><p>a.åœ¨æ‰“åŒ…å’Œå‹ç¼©çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶ä¼šçœ‹åˆ°è¿™æ ·çš„è¯­å¥ï¼š<strong>tar: ä»æˆå‘˜åä¸­åˆ é™¤å¼€å¤´çš„â€œ/â€</strong>ï¼Œè¿™ä¸ªå¹¶ä¸æ˜¯æŠ¥é”™ï¼Œæ˜¯å› ä¸ºæ²¡æœ‰åŠ ä¸Š-Pé€‰é¡¹ï¼Œæ²¡æœ‰ä¿ç•™åŸæ¥çš„ç»å¯¹è·¯å¾„å»æ‰“åŒ…æˆ–è€…å‹ç¼©ï¼Œæå–æ‰“åŒ…çš„å†…å®¹è·Ÿè§£å‹ä¸€æ ·ï¼Œä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613919006930.png" alt="1613919006930"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613919034567.png" alt="1613919034567"></p>
<p>è§£å‹çš„æ—¶å€™åŒç†ï¼Œå¦‚æœåœ¨å‹ç¼©æ–‡ä»¶çš„æ—¶å€™ä½¿ç”¨äº†-Pé€‰é¡¹ï¼Œé‚£ä¹ˆåœ¨è§£å‹æ—¶ä¹Ÿè¦åŠ ä¸Š-Pé€‰é¡¹ï¼Œä¸ç„¶ä¹Ÿä¼šå‡ºç°<strong>tar: ä»æˆå‘˜åä¸­åˆ é™¤å¼€å¤´çš„â€œ/â€</strong></p>
<p>b.åœ¨ä½¿ç”¨tarå‹ç¼©æˆ–è€…æ‰“åŒ…çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡å¢åŠ  <code>--exclude</code> æ¥è¾¾åˆ°æ’é™¤æŒ‡å®šçš„æ–‡ä»¶çš„ç›®çš„</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613919127279.png" alt="1613919127279"></p>
<p>å‹ç¼©æ–‡ä»¶ ä¸ æƒ³è¦æ’é™¤æŒ‡å®šçš„ç›®å½•å‹ç¼©æˆ–è€…æ‰“åŒ… åŒç†</p>
<p>c. ä½¿ç”¨ <code>-r</code> é€‰é¡¹å¢åŠ .tarå½’æ¡£æ–‡ä»¶çš„å†…å®¹</p>
<p>é€šè¿‡ <code>tar --help</code> å‘½ä»¤æŸ¥çœ‹å¸®åŠ©</p>
<p><code>-r</code> é€‰é¡¹çš„ä½œç”¨ï¼šæŠŠè¦å­˜æ¡£çš„æ–‡ä»¶è¿½åŠ åˆ°æ¡£æ¡ˆæ–‡ä»¶çš„æœªå°¾ã€‚ä¾‹å¦‚ç”¨æˆ·å·²ç»ä½œå¥½å¤‡ä»½æ–‡ä»¶ï¼Œåˆå‘ç°è¿˜æœ‰ä¸€ä¸ªç›®å½•æˆ–æ˜¯ä¸€äº›æ–‡ä»¶å¿˜è®°å¤‡ä»½äº†ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨è¯¥é€‰é¡¹ï¼Œå°†å¿˜è®°çš„ç›®å½•æˆ–æ–‡ä»¶è¿½åŠ åˆ°å¤‡ä»½æ–‡ä»¶ä¸­</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920583973.png" alt="1613920583973"></p>
<p>ä½¿ç”¨å®ä¾‹ï¼š</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920618990.png" alt="1613920618990"></p>
<p>ï¼ˆå…ˆå°†1è¿›è¡Œå½’æ¡£ï¼Œå†è¿½åŠ 2ï¼‰</p>
<p>1.å½’æ¡£æ“ä½œ</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920677791.png" alt="1613920677791"></p>
<p>ç”Ÿæˆ.taræ–‡ä»¶ï¼Œç›®å½•å½’æ¡£å®Œæ¯•</p>
<p>2.å°†calculating_time.shè¿½åŠ è¿›å…¥.taræ–‡ä»¶ä¸­</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920716990.png" alt="1613920716990"></p>
<p>æŸ¥çœ‹.taræ–‡ä»¶çš„å½’æ¡£ä¿¡æ¯ï¼š</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920751128.png" alt="1613920751128"></p>
<p>å¯ä»¥çœ‹åˆ°calculating_time.shæ–‡ä»¶å·²ç»è¢«è¿½åŠ åˆ°æ¡£æ¡ˆçš„æœ«å°¾äº†</p>
<p>æå–Check_Configuration_20201118_PM.tar åˆ°/mntç›®å½•ä¸‹ï¼š</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920796143.png" alt="1613920796143"></p>
<p>ä½¿ç”¨-ré€‰é¡¹è¿½åŠ æ–‡ä»¶è‡³.taræ–‡ä»¶æˆåŠŸ</p>
<h4 id="2-2-zipå‘½ä»¤å’Œunzipå‘½ä»¤"><a href="#2-2-zipå‘½ä»¤å’Œunzipå‘½ä»¤" class="headerlink" title="2.2 zipå‘½ä»¤å’Œunzipå‘½ä»¤"></a>2.2 zipå‘½ä»¤å’Œunzipå‘½ä»¤</h4><p>åœ¨ä½¿ç”¨ zip è·Ÿ unzip å‘½ä»¤ä¹‹å‰å…ˆæŸ¥çœ‹ç³»ç»Ÿæœ‰æ²¡æœ‰å®‰è£…è¿™ä¸¤ä¸ªå‘½ä»¤çš„åŒ…ï¼Œæ²¡æœ‰çš„è¯è¦è‡ªå·±å®‰è£…<br>æŸ¥çœ‹æœ‰æ²¡æœ‰å®‰è£…zipè·Ÿunzipå‘½ä»¤çš„å‘½ä»¤ï¼š</p>
<p><code>rpm -q zip unzip</code></p>
<p>å¦‚æœå®‰è£…äº†ï¼Œåˆ™ä¼šæ˜¾ç¤ºå‡ºå‘½ä»¤çš„ç‰ˆæœ¬å·</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613919407899.png" alt="1613919407899"></p>
<h5 id="ä¸€ã€zipå‘½ä»¤"><a href="#ä¸€ã€zipå‘½ä»¤" class="headerlink" title="ä¸€ã€zipå‘½ä»¤"></a>ä¸€ã€zipå‘½ä»¤</h5><p>åŸºæœ¬ç”¨æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">zip [å‚æ•°] [å‹ç¼©åŒ…å] [å‹ç¼©çš„ç›®å½•æˆ–è€…æ–‡ä»¶çš„è·¯å¾„]</span><br></pre></td></tr></table></figure>
<h6 id="zipå‘½ä»¤å¸¸ç”¨å‚æ•°"><a href="#zipå‘½ä»¤å¸¸ç”¨å‚æ•°" class="headerlink" title="zipå‘½ä»¤å¸¸ç”¨å‚æ•°"></a>zipå‘½ä»¤å¸¸ç”¨å‚æ•°</h6><div class="table-container">
<table>
<thead>
<tr>
<th>-m</th>
<th>å°†æ–‡ä»¶å‹ç¼©åï¼Œåˆ é™¤åŸæ–‡ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>-o</td>
<td>å°†å‹ç¼©æ–‡ä»¶å†…çš„æ‰€æœ‰æ–‡ä»¶çš„æœ€æ–°å˜åŠ¨æ—¶é—´è®¾ä¸ºå‹ç¼©çš„æ—¶é—´</td>
</tr>
<tr>
<td>-q</td>
<td>å®‰é™æ¨¡å¼ï¼Œåœ¨å‹ç¼©çš„æ—¶å€™ä¸æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œçš„è¿‡ç¨‹</td>
</tr>
<tr>
<td>-r</td>
<td>é€’å½’å‹ç¼©ï¼Œå°†è‡ªå®šç›®å½•ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶ä»¥åŠæ–‡ä»¶ä¸€èµ·å¤„ç†</td>
</tr>
<tr>
<td>-x</td>
<td>â€æ–‡ä»¶åˆ—è¡¨â€œï¼Œå‹ç¼©æ—¶æ’é™¤æ–‡ä»¶åˆ—è¡¨ä¸­çš„æ–‡ä»¶</td>
</tr>
</tbody>
</table>
</div>
<h6 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h6><p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613919749742.png" alt="1613919749742"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613919795113.png" alt="1613919795113"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613919829367.png" alt="1613919829367"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613919855669.png" alt="1613919855669"></p>
<h5 id="äºŒã€unzipå‘½ä»¤"><a href="#äºŒã€unzipå‘½ä»¤" class="headerlink" title="äºŒã€unzipå‘½ä»¤"></a>äºŒã€unzipå‘½ä»¤</h5><p>ç›´æ¥ä½¿ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">unzip xxx.zip</span><br></pre></td></tr></table></figure>
<p>ä¾¿å¯è§£å‹åˆ°å½“å‰ç›®å½•ä¸‹ã€‚</p>
<p>åŸºæœ¬ç”¨æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">unzip [å‚æ•°] [å‹ç¼©æ–‡ä»¶]  ï¼ˆ-d [ç›®å½•]ï¼‰  //å¦‚æœä¸ä½¿ç”¨æ‹¬å·å†…çš„å†…å®¹ï¼Œåˆ™è§£å‹æ–‡ä»¶åˆ°å½“å‰å·¥ä½œç›®å½•</span><br></pre></td></tr></table></figure>
<h6 id="unzipå‘½ä»¤å¸¸ç”¨å‚æ•°"><a href="#unzipå‘½ä»¤å¸¸ç”¨å‚æ•°" class="headerlink" title="unzipå‘½ä»¤å¸¸ç”¨å‚æ•°"></a>unzipå‘½ä»¤å¸¸ç”¨å‚æ•°</h6><div class="table-container">
<table>
<thead>
<tr>
<th>-c</th>
<th>å°†è§£å‹ç¼©çš„ç»“æœæ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼ˆæ˜¾ç¤ºæ¯ä¸€ä¸ªç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼‰ï¼ŒåŒæ—¶å¯¹å­—ç¬¦åšé€‚å½“çš„è½¬æ¢ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è§£å‹å‹ç¼©åŒ…</th>
</tr>
</thead>
<tbody>
<tr>
<td>-l</td>
<td>æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶å†…æ‰€åŒ…å«çš„æ–‡ä»¶</td>
</tr>
<tr>
<td>-t</td>
<td>æ£€æŸ¥å‹ç¼©æ–‡ä»¶æ˜¯å¦æ­£ç¡®</td>
</tr>
<tr>
<td>-v</td>
<td>æ‰§è¡Œæ—¶æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯</td>
</tr>
<tr>
<td>-q</td>
<td>å®‰é™æ¨¡å¼ï¼Œæ‰§è¡Œæ—¶ä¸æ˜¾ç¤ºä»»ä½•ä¿¡æ¯</td>
</tr>
<tr>
<td>-d</td>
<td>æŒ‡å®šæ–‡ä»¶è§£å‹åå­˜å‚¨çš„ç›®å½•</td>
</tr>
<tr>
<td>-x</td>
<td>æŒ‡å®šä¸è¦å¤„ç†å‹ç¼©æ–‡ä»¶ä¸­çš„é‚£äº›æ–‡ä»¶</td>
</tr>
</tbody>
</table>
</div>
<h6 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h6><p>a.å°†harry.zipå‹ç¼©åŒ…è§£å‹ç¼©çš„ç»“æœæ˜¾ç¤ºå‡ºæ¥ï¼š</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920145339.png" alt="1613920145339"></p>
<p>å…·ä½“ä¼šæ˜¾ç¤ºåˆ°æ¯ä¸€ä¸ªæ–‡ä»¶è·Ÿæ¯ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹</p>
<p>b.æ˜¾ç¤ºjihe.zipå‹ç¼©åŒ…é‡Œé¢æ‰€åŒ…å«çš„æ–‡ä»¶</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920185552.png" alt="1613920185552"></p>
<p>c.æ£€æŸ¥dajihe.zipå‹ç¼©æ–‡ä»¶æ˜¯å¦æ­£ç¡®</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920223598.png" alt="1613920223598"></p>
<p>å…¨éƒ¨OKè¡¨ç¤ºå…¨éƒ¨æ–‡ä»¶éƒ½æ˜¯æ­£ç¡®çš„</p>
<p>d.ä¸è§£å‹å‹ç¼©æ–‡ä»¶dajihe.zipï¼ŒæŸ¥çœ‹å‹ç¼©åŒ…é‡Œé¢çš„å†…å®¹ï¼ˆæŸ¥çœ‹æ˜¾ç¤ºçš„æ–‡ä»¶åˆ—è¡¨è¿˜åŒ…å«å‹ç¼©æ¯”ç‡ï¼‰</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920257695.png" alt="1613920257695"></p>
<p>ä½¿ç”¨<code>-v</code>æ˜¾ç¤ºçš„ä¿¡æ¯æ¯”ä½¿ç”¨<code>-l</code>æ˜¾ç¤ºçš„ä¿¡æ¯æ›´åŠ è¯¦ç»†</p>
<p>e.å°†dajihe.zipå‹ç¼©åŒ…è§£å‹åˆ°/opt/ç›®å½•ä¸‹ï¼š</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613920322610.png" alt="1613920322610"></p>
<h3 id="2-Linuxå±ä¸»æƒé™ï¼Œchgrpï¼Œchownï¼Œchmod"><a href="#2-Linuxå±ä¸»æƒé™ï¼Œchgrpï¼Œchownï¼Œchmod" class="headerlink" title="2.Linuxå±ä¸»æƒé™ï¼Œchgrpï¼Œchownï¼Œchmod"></a>2.Linuxå±ä¸»æƒé™ï¼Œchgrpï¼Œchownï¼Œchmod</h3><blockquote>
<p>æ¥è‡ª <a href="https://www.cnblogs.com/CYHISTW/p/11031429.html" target="_blank" rel="noopener">https://www.cnblogs.com/CYHISTW/p/11031429.html</a></p>
</blockquote>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905079507.png" alt="1613905079507"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905119945.png" alt="1613905119945"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905151971.png" alt="1613905151971"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905209772.png" alt="1613905209772"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905243202.png" alt="1613905243202"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905317808.png" alt="1613905317808"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905345753.png" alt="1613905345753"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905383386.png" alt="1613905383386"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905411968.png" alt="1613905411968"></p>
<p>å¯ä½¿ç”¨ <code>chmod +x æ–‡ä»¶å</code> ä½¿æ–‡ä»¶å˜ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/Users\zhu_r\Desktop\test\blog\source\_posts\Linuxå¸¸ç”¨å‘½ä»¤\1613905632283.png" alt="1613905632283"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905651103.png" alt="1613905651103"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905697607.png" alt="1613905697607"></p>
<p>è¾“å…¥<code>i</code>è¿›è¡Œç¼–è¾‘æ¨¡å¼ï¼Œå®Œæˆåï¼ŒæŒ‰<code>esc</code>å†è¾“å…¥<code>:wq</code> ä¿å­˜å¹¶é€€å‡º</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905784062.png" alt="1613905784062"></p>
<p>ğŸ‘†å¯ä»¥çœ‹åˆ°æ­¤æ—¶run.shå¤„äºä¸å¯æ‰§è¡ŒçŠ¶æ€</p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905838720.png" alt="1613905838720"></p>
<p><img src="/2021/02/21/Linuxå¸¸ç”¨å‘½ä»¤/1613905867580.png" alt="1613905867580"></p>
<p>æˆåŠŸæ‰§è¡Œ</p>
<h3 id="3-shell-å‘½ä»¤è¡Œå‚æ•°"><a href="#3-shell-å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="3. shell å‘½ä»¤è¡Œå‚æ•°"></a>3. shell å‘½ä»¤è¡Œå‚æ•°</h3><blockquote>
<p>å‚è€ƒ <a href="http://c.biancheng.net/cpp/view/2739.html" target="_blank" rel="noopener">http://c.biancheng.net/cpp/view/2739.html</a></p>
</blockquote>
<p>è¿è¡Œè„šæœ¬æ—¶ä¼ é€’ç»™è„šæœ¬çš„å‚æ•°ç§°ä¸ºå‘½ä»¤è¡Œå‚æ•°ã€‚</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>å˜é‡</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>$0</td>
<td>å½“å‰è„šæœ¬çš„æ–‡ä»¶å</td>
</tr>
<tr>
<td>$n</td>
<td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ã€‚n æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºç¬¬å‡ ä¸ªå‚æ•°ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯$1ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯$2ï¼Œä»¥æ­¤ç±»æ¨</td>
</tr>
<tr>
<td>$#</td>
<td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ä¸ªæ•°</td>
</tr>
<tr>
<td>$*</td>
<td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚</td>
</tr>
<tr>
<td>$@</td>
<td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚è¢«åŒå¼•å·(â€œ â€œ)åŒ…å«æ—¶ï¼Œä¸ $* ç¨æœ‰ä¸åŒ</td>
</tr>
</tbody>
</table>
</div>
<p>ä¾‹ï¼šè„šæœ¬å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">echo &quot;File Name: $0&quot;</span><br><span class="line">echo &quot;First Parameter : $1&quot;</span><br><span class="line">echo &quot;First Parameter : $2&quot;</span><br><span class="line">echo &quot;Quoted Values: $@&quot;</span><br><span class="line">echo &quot;Quoted Values: $*&quot;</span><br><span class="line">echo &quot;Total Number of Parameters : $#&quot;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$./test.sh Zara Ali</span><br><span class="line">File Name : ./test.sh</span><br><span class="line">First Parameter : Zara</span><br><span class="line">Second Parameter : Ali</span><br><span class="line">Quoted Values: Zara Ali</span><br><span class="line">Quoted Values: Zara Ali</span><br><span class="line">Total Number of Parameters : 2</span><br></pre></td></tr></table></figure>
<h3 id="4-shell-æ—¥æœŸåŠ å‡è¿ç®—"><a href="#4-shell-æ—¥æœŸåŠ å‡è¿ç®—" class="headerlink" title="4. shell æ—¥æœŸåŠ å‡è¿ç®—"></a>4. shell æ—¥æœŸåŠ å‡è¿ç®—</h3><blockquote>
<p>å‚è€ƒ<br><a href="http://blog.sina.com.cn/s/blog_ad6555610101b5ud.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_ad6555610101b5ud.html</a><br><a href="https://www.cnblogs.com/zhzhang/p/6846300.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhzhang/p/6846300.html</a><br><a href="https://www.cnblogs.com/simple-li/p/14040777.html" target="_blank" rel="noopener">https://www.cnblogs.com/simple-li/p/14040777.html</a><br><a href="http://www.dutycode.com/post-60.html" target="_blank" rel="noopener">http://www.dutycode.com/post-60.html</a></p>
</blockquote>
<p>å‡å¦‚ä»Šå¤©æ˜¯ 2012-04-22</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ date -d &quot;+1 day&quot; +%Y-%m-%d</span><br><span class="line">2012-04-23</span><br><span class="line"></span><br><span class="line">$ date -d &quot;-1 day&quot; +%Y-%m-%d</span><br><span class="line">2012-04-21</span><br><span class="line"></span><br><span class="line">$ date -d &quot;2012-04-10 -1 day&quot; +%Y-%m-%d</span><br><span class="line">2012-04-09</span><br><span class="line"></span><br><span class="line">$ date -d &quot;+1 week&quot; +%Y-%m-%d</span><br><span class="line">2012-04-29</span><br><span class="line"></span><br><span class="line">åŒç†è¿˜å¯ month, year</span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼šè„šæœ¬ç¤ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">if [ $# == 0 ] ; then</span><br><span class="line">    ydate=`date -d -1days &quot;+%Y%m%d&quot;`</span><br><span class="line">    ydateother=`date -d -1days &quot;+%Y-%m-%d&quot;`</span><br><span class="line">    tdate=`date -d -0days &quot;+%Y%m%d&quot;`</span><br><span class="line">    tdateother=`date -d -0days &quot;+%Y-%m-%d&quot;`</span><br><span class="line">elif [ $# == 1 ] ; then </span><br><span class="line">    ydate=$1</span><br><span class="line">    ydateother=`date -d $&#123;ydate&#125; +&quot;%Y-%m-%d&quot;`</span><br><span class="line">    tdate=`date -d &quot;$&#123;ydate&#125; 1days&quot; +&quot;%Y%m%d&quot;`</span><br><span class="line">    tdateother=`date -d $&#123;tdate&#125; +&quot;%Y-%m-%d&quot;`</span><br><span class="line">elif [ $# == 2 ] ; then </span><br><span class="line">    ydate=$1</span><br><span class="line">    ydateother=`date -d $&#123;ydate&#125; +&quot;%Y-%m-%d&quot;`</span><br><span class="line">    tdate=$2</span><br><span class="line">    tdateother=`date -d $&#123;tdate&#125; +&quot;%Y-%m-%d&quot;`</span><br><span class="line">else</span><br><span class="line">    echo &quot;please do not input if calcute yedterday.&quot;</span><br><span class="line">    echo &quot;please input like if calcute 20170510 one day: 20170510&quot;</span><br><span class="line">    echo &quot;please input like if calcute 20170510 and 20170512 two days : 20170510 20170511&quot;</span><br><span class="line">    exit -1</span><br><span class="line">fi </span><br><span class="line">echo $&#123;ydate&#125;&apos;--&apos;$&#123;ydateother&#125;&apos;--&apos;$&#123;tdate&#125;&apos;---&apos;$&#123;tdateother&#125;</span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼š æŒ‰æœˆæ‰§è¡Œ201904åˆ°202010çš„pyè„šæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">i=201904 # å®šä¹‰å¼€å§‹æœˆä»½</span><br><span class="line">while [ $i -le 202010 ] # å½“iå°äºç­‰äº202010æ—¶æ‰§è¡Œå¾ªç¯è¯­å¥</span><br><span class="line">  do</span><br><span class="line">    dateNo1=$(date +&quot;%Y-%m-%d %H:%M:%S&quot;) # è·å–å½“å‰æ—¶é—´(å¹´æœˆæ—¥æ—¶åˆ†ç§’)</span><br><span class="line">    echo &quot;å¼€å§‹æ‰§è¡Œ($dateNo1): $i&quot; # æ‰“å°å½“å‰æ—¶é—´(å¹´æœˆæ—¥æ—¶åˆ†ç§’)</span><br><span class="line">    python tmp_sn_union_mem_20201125.py $i # æ‰§è¡Œpythonè„šæœ¬ï¼Œä¼ å…¥æœˆä»½å‚æ•°ã€‚  æ­¤å¤„ä¹Ÿå¯åšå…¶ä»–æ“ä½œ</span><br><span class="line">    dateNo2=$(date +&quot;%Y-%m-%d %H:%M:%S&quot;) # è·å–å½“å‰æ—¶é—´(å¹´æœˆæ—¥æ—¶åˆ†ç§’) </span><br><span class="line">    echo &quot;ç»“æŸæ‰§è¡Œ($dateNo2): $i&quot; # æ‰“å°å½“å‰æ—¶é—´(å¹´æœˆæ—¥æ—¶åˆ†ç§’)</span><br><span class="line">    i=$[$i + 1] # å½“å‰iå€¼åŠ 1</span><br><span class="line">    if [ $i -eq 201913 ] # åˆ¤æ–­iå€¼æ˜¯å¦ç­‰äº201913ï¼Œæ¡ä»¶å¿…é¡»å†™åœ¨ [] é‡Œ</span><br><span class="line">     then</span><br><span class="line">      i=202001 # å¦‚æœiå€¼ç­‰äº201913ï¼Œåˆ™è®©iå€¼ä¸º202001</span><br><span class="line">    fi # ifç»“æŸæ ‡è®°</span><br><span class="line">  done # whileç»“æŸæ ‡è®°</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fi                    å®¹æ˜“å¿˜è®°åˆ¤æ–­ç»“æŸæ ‡è®°</span><br><span class="line">done                  å®¹æ˜“å¿˜è®°å¾ªç¯æ‰§è¡Œç»“æŸæ ‡è®°</span><br><span class="line">i=$[$i + 1]           å˜é‡åŠ å‡è¿ç®—è¦å†™åœ¨ $[] é‡Œé¢ã€‚</span><br><span class="line">if [ $i -eq 201913 ]  æ¡ä»¶å¿…é¡»å†™åœ¨ [] é‡Œ</span><br></pre></td></tr></table></figure>
<p>é™„ï¼šæ•°å€¼æ¯”è¾ƒï¼š</p>
<p><code>-eq</code>   ç›¸ç­‰ï¼ˆequalï¼‰<br><code>-ne</code>   ä¸ç­‰ï¼ˆnot equalï¼‰<br><code>-gt</code>    å¤§äºï¼ˆgreater thanï¼‰<br><code>-lt</code>     å°äºï¼ˆless thanï¼‰<br><code>-ge</code>  å¤§äºç­‰äº ï¼ˆgreater than or equalï¼‰<br><code>-le</code>   å°äºç­‰äº ï¼ˆless than or equalï¼‰</p>
<p>æ³¨ï¼šcrontabä»»åŠ¡è°ƒåº¦ä¸­ï¼Œ%æ˜¯ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œè¦åœ¨å‰åŠ â€\â€è¿›è¡Œè½¬ä¹‰</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0 10 * * * cd /home/zzh &amp;&amp; sh test.sh $(date -d &quot;1 day ago&quot; +&quot;\%Y\%m\%d&quot;) &gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>SQLä¸­çš„å„ç§è¿æ¥join</title>
    <url>/2021/02/14/SQL%E4%B8%AD%E7%9A%84%E5%90%84%E7%A7%8D%E8%BF%9E%E6%8E%A5join/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å‚è€ƒï¼š<br><a href="https://www.cnblogs.com/reaptomorrow-flydream/p/8145610.html" target="_blank" rel="noopener">https://www.cnblogs.com/reaptomorrow-flydream/p/8145610.html</a><br><a href="https://www.w3school.com.cn/sql/sql_join_left.asp" target="_blank" rel="noopener">https://www.w3school.com.cn/sql/sql_join_left.asp</a><br><a href="https://www.w3school.com.cn/sql/sql_join.asp" target="_blank" rel="noopener">https://www.w3school.com.cn/sql/sql_join.asp</a><br><a href="https://www.cnblogs.com/yelp/p/3761443.html" target="_blank" rel="noopener">https://www.cnblogs.com/yelp/p/3761443.html</a><br><a href="https://blog.csdn.net/qq_41973536/article/details/81081024" target="_blank" rel="noopener">https://blog.csdn.net/qq_41973536/article/details/81081024</a></p>
</blockquote>
<p>æœ€å¸¸è§çš„ JOIN ç±»å‹ï¼š<strong>SQL INNER JOINï¼ˆç­‰ä»·äº JOINï¼‰ã€SQL LEFT JOINï¼ˆç­‰ä»·äºLEFT OUTER JOINï¼‰ã€SQL  RIGHT JOINï¼ˆç­‰ä»·äºRIGHT OUTER JOINï¼‰ã€SQL FULL JOINï¼ˆç­‰ä»·äºFULL OUTER JOINï¼‰ï¼Œ</strong>å…¶ä¸­å‰ä¸€ç§æ˜¯å†…è¿æ¥ï¼Œåä¸‰ç§æ˜¯å¤–è¿æ¥ã€‚</p>
<ul>
<li>JOIN: å†…è¿æ¥ï¼Œåˆå«ç­‰å€¼è¿æ¥ï¼Œåªè¿”å›ä¸¤ä¸ªè¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è¡Œã€‚ï¼ˆå¦‚æœè¡¨ä¸­æœ‰è‡³å°‘ä¸€ä¸ªåŒ¹é…ï¼Œåˆ™è¿”å›è¡Œï¼‰</li>
<li>LEFT JOIN: å·¦è¿æ¥ï¼Œè¿”å›å·¦è¡¨ä¸­æ‰€æœ‰çš„è®°å½•ä»¥åŠå³è¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è®°å½•ã€‚ï¼ˆå³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å·¦è¡¨è¿”å›æ‰€æœ‰çš„è¡Œï¼‰</li>
<li>RIGHT JOIN: å³è¿æ¥ï¼Œè¿”å›å³è¡¨ä¸­æ‰€æœ‰çš„è®°å½•ä»¥åŠå·¦è¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è®°å½•ã€‚ï¼ˆå³ä½¿å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å³è¡¨è¿”å›æ‰€æœ‰çš„è¡Œï¼‰</li>
<li>FULL JOIN: å¤–è¿æ¥ï¼Œè¿”å›ä¸¤ä¸ªè¡¨ä¸­çš„è¡Œï¼šleft join + right joinã€‚ï¼ˆåªè¦å…¶ä¸­ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨åŒ¹é…ï¼Œå°±è¿”å›è¡Œï¼‰</li>
<li>cross join: ç»“æœæ˜¯ç¬›å¡å°”ç§¯ï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªè¡¨çš„è¡Œæ•°ä¹˜ä»¥ç¬¬äºŒä¸ªè¡¨çš„è¡Œæ•°ã€‚</li>
</ul>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸¤å¼ è¡¨ï¼ŒTable Aæ˜¯å·¦è¾¹çš„è¡¨ï¼ŒTable Bæ˜¯å³è¾¹çš„è¡¨ã€‚</p>
<p>Table A:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Google</td>
</tr>
<tr>
<td>2</td>
<td>æ·˜å®</td>
</tr>
<tr>
<td>3</td>
<td>å¾®åš</td>
</tr>
<tr>
<td>4</td>
<td>Facebook</td>
</tr>
</tbody>
</table>
</div>
<p>Table B:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>id</th>
<th>address</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>ç¾å›½</td>
</tr>
<tr>
<td>5</td>
<td>ä¸­å›½</td>
</tr>
<tr>
<td>3</td>
<td>ä¸­å›½</td>
</tr>
<tr>
<td>6</td>
<td>ç¾å›½</td>
</tr>
</tbody>
</table>
</div>
<h3 id="1-INNER-JOIN"><a href="#1-INNER-JOIN" class="headerlink" title="1. INNER JOIN"></a>1. INNER JOIN</h3><p>å†…è¿æ¥åªè¿æ¥åŒ¹é…çš„è¡Œã€‚</p>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> column_name(s)</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">table</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">table</span> <span class="number">2</span></span><br><span class="line"><span class="keyword">ON</span></span><br><span class="line"><span class="keyword">table</span> <span class="number">1.</span>column_name=<span class="keyword">table</span> <span class="number">2.</span>column_name</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/14/SQLä¸­çš„å„ç§è¿æ¥join/1624780519991.png" alt="1624780519991"></p>
<p>INNER JOINäº§ç”Ÿçš„ç»“æœé›†ï¼Œæ˜¯1å’Œ2çš„äº¤é›†ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> tableA.id, <span class="keyword">name</span>, address </span><br><span class="line"><span class="keyword">from</span> tableA <span class="keyword">join</span> tableB</span><br><span class="line"><span class="keyword">on</span> tableA.id = tableB.id</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸ŠSQLè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>address</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Google</td>
<td>ç¾å›½</td>
</tr>
<tr>
<td>3</td>
<td>å¾®åš</td>
<td>ä¸­å›½</td>
</tr>
</tbody>
</table>
</div>
<p>ç­‰ä»·äº</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> tableA.id, <span class="keyword">name</span>, address</span><br><span class="line"><span class="keyword">from</span> tableA, tableB</span><br><span class="line"><span class="keyword">where</span> tableA.id = tableB.id</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="2-LEFT-JOIN"><a href="#2-LEFT-JOIN" class="headerlink" title="2. LEFT JOIN"></a>2. LEFT JOIN</h3><p>LEFT JOINè¿”å›å·¦è¡¨çš„å…¨éƒ¨è¡Œå’Œå³è¡¨æ»¡è¶³ONæ¡ä»¶çš„è¡Œï¼Œå¦‚æœå·¦è¡¨çš„è¡Œåœ¨å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œé‚£ä¹ˆè¿™ä¸€è¡Œå³è¡¨ä¸­å¯¹åº”æ•°æ®ç”¨NULLä»£æ›¿ã€‚</p>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> column_name(s)</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">table</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">table</span> <span class="number">2</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">table</span> <span class="number">1.</span>column_name=<span class="keyword">table</span> <span class="number">2.</span>column_name</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/14/SQLä¸­çš„å„ç§è¿æ¥join/1624780567674.png" alt="1624780567674"></p>
<p>LEFT JOINäº§ç”Ÿè¡¨1çš„å®Œå…¨é›†ï¼Œè€Œ2è¡¨ä¸­åŒ¹é…çš„åˆ™æœ‰å€¼ï¼Œæ²¡æœ‰åŒ¹é…çš„åˆ™ä»¥nullå€¼å–ä»£ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> tableA.id, <span class="keyword">name</span>, address </span><br><span class="line"><span class="keyword">from</span> tableA <span class="keyword">left</span> <span class="keyword">join</span> tableB</span><br><span class="line"><span class="keyword">on</span> tableA.id = tableB.id</span><br></pre></td></tr></table></figure>
<p> æ‰§è¡Œä»¥ä¸ŠSQLè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>address</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Google</td>
<td>ç¾å›½</td>
</tr>
<tr>
<td>2</td>
<td>æ·˜å®</td>
<td>null</td>
</tr>
<tr>
<td>3</td>
<td>å¾®åš</td>
<td>ä¸­å›½</td>
</tr>
<tr>
<td>4</td>
<td>Facebook</td>
<td>null</td>
</tr>
</tbody>
</table>
</div>
<p>æ³¨ï¼šè‹¥å·¦è¡¨ä¸­ä¸€æ¡è®°å½•åŒ¹é…å³è¡¨ä¸­å¤šè¡Œï¼Œåˆ™éƒ½ä¼šè¿”å›</p>
<p>ä¾‹ï¼š</p>
<p>â€œPersonsâ€ è¡¨ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Id_P</th>
<th style="text-align:left">LastName</th>
<th style="text-align:left">FirstName</th>
<th style="text-align:left">Address</th>
<th style="text-align:left">City</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">Adams</td>
<td style="text-align:left">John</td>
<td style="text-align:left">Oxford Street</td>
<td style="text-align:left">London</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">Bush</td>
<td style="text-align:left">George</td>
<td style="text-align:left">Fifth Avenue</td>
<td style="text-align:left">New York</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">Carter</td>
<td style="text-align:left">Thomas</td>
<td style="text-align:left">Changan St</td>
<td style="text-align:left">Beijing</td>
</tr>
</tbody>
</table>
</div>
<p>â€œOrdersâ€ è¡¨ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Id_O</th>
<th style="text-align:left">OrderNo</th>
<th style="text-align:left">Id_P</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">77895</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">44678</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">22456</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left">24562</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left">34764</td>
<td style="text-align:left">65</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Persons.LastName, Persons.FirstName, Orders.OrderNo</span><br><span class="line"><span class="keyword">FROM</span> Persons</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> Orders</span><br><span class="line"><span class="keyword">ON</span> Persons.Id_P = Orders.Id_P</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> Persons.LastName</span><br></pre></td></tr></table></figure>
<p>ç»“æœé›†ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">LastName</th>
<th style="text-align:left">FirstName</th>
<th style="text-align:left">OrderNo</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Adams</td>
<td style="text-align:left">John</td>
<td style="text-align:left">22456</td>
</tr>
<tr>
<td style="text-align:left">Adams</td>
<td style="text-align:left">John</td>
<td style="text-align:left">24562</td>
</tr>
<tr>
<td style="text-align:left">Bush</td>
<td style="text-align:left">George</td>
<td style="text-align:left">null</td>
</tr>
<tr>
<td style="text-align:left">Carter</td>
<td style="text-align:left">Thomas</td>
<td style="text-align:left">44678</td>
</tr>
<tr>
<td style="text-align:left">Carter</td>
<td style="text-align:left">Thomas</td>
<td style="text-align:left">77895</td>
</tr>
</tbody>
</table>
</div>
<p>LEFT JOIN å…³é”®å­—ä¼šä»å·¦è¡¨ (Persons) é‚£é‡Œè¿”å›æ‰€æœ‰çš„è¡Œï¼Œå³ä½¿åœ¨å³è¡¨ (Orders) ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œã€‚</p>
<h3 id="3-RIGHT-JOIN"><a href="#3-RIGHT-JOIN" class="headerlink" title="3. RIGHT JOIN"></a>3. RIGHT JOIN</h3><p>RIGHT JOINè¿”å›å³è¡¨çš„å…¨éƒ¨è¡Œå’Œå·¦è¡¨æ»¡è¶³ONæ¡ä»¶çš„è¡Œï¼Œå¦‚æœå³è¡¨çš„è¡Œåœ¨å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œé‚£ä¹ˆè¿™ä¸€è¡Œå·¦è¡¨ä¸­å¯¹åº”æ•°æ®ç”¨NULLä»£æ›¿ã€‚</p>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> column_name(s)</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">table</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> <span class="keyword">table</span> <span class="number">2</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">table</span> <span class="number">1.</span>column_name=<span class="keyword">table</span> <span class="number">2.</span>column_name</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/14/SQLä¸­çš„å„ç§è¿æ¥join/1624780592546.png" alt="1624780592546"></p>
<p>RIGHT JOINäº§ç”Ÿè¡¨2çš„å®Œå…¨é›†ï¼Œè€Œ1è¡¨ä¸­åŒ¹é…çš„åˆ™æœ‰å€¼ï¼Œæ²¡æœ‰åŒ¹é…çš„åˆ™ä»¥nullå€¼å–ä»£ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> tableA.id, <span class="keyword">name</span>, address </span><br><span class="line"><span class="keyword">from</span> tableA <span class="keyword">right</span> <span class="keyword">join</span> tableB</span><br><span class="line"><span class="keyword">on</span> tableA.id = tableB.id</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸ŠSQLè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>address</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Google</td>
<td>ç¾å›½</td>
</tr>
<tr>
<td>5</td>
<td>null</td>
<td>ä¸­å›½</td>
</tr>
<tr>
<td>3</td>
<td>å¾®åš</td>
<td>ä¸­å›½</td>
</tr>
<tr>
<td>6</td>
<td>null</td>
<td>ç¾å›½</td>
</tr>
</tbody>
</table>
</div>
<h3 id="4-FULL-OUTER-JOIN"><a href="#4-FULL-OUTER-JOIN" class="headerlink" title="4. FULL OUTER JOIN"></a>4. FULL OUTER JOIN</h3><p>FULL JOIN ä¼šä»å·¦è¡¨å’Œå³è¡¨ä¸­è¿”å›æ‰€æœ‰çš„è¡Œã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªè¡¨çš„æ•°æ®è¡Œåœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œï¼Œé‚£ä¹ˆå¯¹é¢çš„æ•°æ®ç”¨NULLä»£æ›¿ã€‚</p>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> column_name(s)</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">table</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> <span class="keyword">table</span> <span class="number">2</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">table</span> <span class="number">1.</span>column_name=<span class="keyword">table</span> <span class="number">2.</span>column_name</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/14/SQLä¸­çš„å„ç§è¿æ¥join/1624780609082.png" alt="1624780609082"></p>
<p>FULL OUTER JOINäº§ç”Ÿ1å’Œ2çš„å¹¶é›†ã€‚å¯¹äºæ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œä¼šä»¥nullåšä¸ºå€¼ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> tableA.id, <span class="keyword">name</span>, address </span><br><span class="line"><span class="keyword">from</span> tableA <span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> tableB</span><br><span class="line"><span class="keyword">on</span> tableA.id = tableB.id</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸ŠSQLè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>address</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Google</td>
<td>ç¾å›½</td>
</tr>
<tr>
<td>2</td>
<td>æ·˜å®</td>
<td>null</td>
</tr>
<tr>
<td>3</td>
<td>å¾®åš</td>
<td>ä¸­å›½</td>
</tr>
<tr>
<td>4</td>
<td>Facebook</td>
<td>null</td>
</tr>
<tr>
<td>5</td>
<td>null</td>
<td>ä¸­å›½</td>
</tr>
<tr>
<td>6</td>
<td>null</td>
<td>ç¾å›½</td>
</tr>
</tbody>
</table>
</div>
<h3 id="5-joinä¸­onä¸whereçš„åŒºåˆ«"><a href="#5-joinä¸­onä¸whereçš„åŒºåˆ«" class="headerlink" title="5. joinä¸­onä¸whereçš„åŒºåˆ«"></a>5. joinä¸­onä¸whereçš„åŒºåˆ«</h3><p>æ•°æ®åº“åœ¨é€šè¿‡è¿æ¥ä¸¤å¼ æˆ–å¤šå¼ è¡¨æ¥è¿”å›è®°å½•æ—¶ï¼Œéƒ½ä¼šç”Ÿæˆä¸€å¼ ä¸­é—´çš„ä¸´æ—¶è¡¨ï¼Œç„¶åå†å°†è¿™å¼ ä¸´æ—¶è¡¨è¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p>åœ¨ä½¿ç”¨left joinæ—¶ï¼Œonå’Œwhereæ¡ä»¶çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<p>1ã€ onæ¡ä»¶æ˜¯åœ¨ç”Ÿæˆä¸´æ—¶è¡¨æ—¶ä½¿ç”¨çš„æ¡ä»¶ï¼Œå®ƒä¸ç®¡onä¸­çš„æ¡ä»¶æ˜¯å¦ä¸ºçœŸï¼Œéƒ½ä¼šè¿”å›å·¦è¾¹è¡¨ä¸­çš„è®°å½•ã€‚</p>
<p>2ã€whereæ¡ä»¶æ˜¯åœ¨ä¸´æ—¶è¡¨ç”Ÿæˆå¥½åï¼Œå†å¯¹ä¸´æ—¶è¡¨è¿›è¡Œè¿‡æ»¤çš„æ¡ä»¶ã€‚è¿™æ—¶å·²ç»æ²¡æœ‰left joinçš„å«ä¹‰ï¼ˆå¿…é¡»è¿”å›å·¦è¾¹è¡¨çš„è®°å½•ï¼‰äº†ï¼Œæ¡ä»¶ä¸ä¸ºçœŸçš„å°±å…¨éƒ¨è¿‡æ»¤æ‰ã€‚</p>
<p>å‡è®¾æœ‰ä¸¤å¼ è¡¨ï¼š</p>
<p>è¡¨1ï¼štable1</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>id</th>
<th>size</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>10</td>
</tr>
<tr>
<td>2</td>
<td>20</td>
</tr>
<tr>
<td>3</td>
<td>30</td>
</tr>
</tbody>
</table>
</div>
<p>è¡¨2ï¼štable2</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>size</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>AAA</td>
</tr>
<tr>
<td>20</td>
<td>BBB</td>
</tr>
<tr>
<td>20</td>
<td>CCC</td>
</tr>
</tbody>
</table>
</div>
<p>ä¸¤æ¡SQL:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * form table1 left join table2 on (table1.size = table2.size) where table2.name=â€™AAAâ€™</span><br><span class="line"></span><br><span class="line">2ã€select * form table1 left join table2 on (table1.size = table2.size and table2.name=â€™AAAâ€™)</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ¡SQLçš„è¿‡ç¨‹ï¼š</p>
<p>1ã€ä¸­é—´è¡¨onæ¡ä»¶:<br>table1.size = table2.size</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>table1.id</th>
<th>table1.size</th>
<th>table2.size</th>
<th>table2.name</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>10</td>
<td>10</td>
<td>AAA</td>
</tr>
<tr>
<td>2</td>
<td>20</td>
<td>20</td>
<td>BBB</td>
</tr>
<tr>
<td>2</td>
<td>20</td>
<td>20</td>
<td>CCC</td>
</tr>
<tr>
<td>3</td>
<td>30</td>
<td>(null)</td>
<td>(null)</td>
</tr>
</tbody>
</table>
</div>
<p>2ã€å†å¯¹ä¸­é—´è¡¨è¿‡æ»¤<br>where æ¡ä»¶ï¼š<br>table2.name=â€™AAAâ€™</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>table1.id</th>
<th>table1.size</th>
<th>table2.size</th>
<th>table2.name</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>10</td>
<td>10</td>
<td>AAA</td>
</tr>
</tbody>
</table>
</div>
<p>ç¬¬äºŒæ¡SQLçš„è¿‡ç¨‹ï¼š</p>
<p>1ã€ä¸­é—´è¡¨onæ¡ä»¶:<br>table1.size = table2.size and table2.name=â€™AAAâ€™<br>(æ¡ä»¶ä¸ä¸ºçœŸä¹Ÿä¼šè¿”å›å·¦è¡¨ä¸­çš„è®°å½•)</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>table1.id</th>
<th>table1.size</th>
<th>table2.size</th>
<th>table2.name</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>10</td>
<td>10</td>
<td>AAA</td>
</tr>
<tr>
<td>2</td>
<td>20</td>
<td>(null)</td>
<td>(null)</td>
</tr>
<tr>
<td>3</td>
<td>30</td>
<td>(null)</td>
<td>(null)</td>
</tr>
</tbody>
</table>
</div>
<p><strong>onæ¡ä»¶æ˜¯åœ¨left joinä¹‹å‰å…ˆè¿›è¡Œæ¡ä»¶ç­›é€‰ï¼Œè€Œåæ‰å¯¹ä¸¤ä¸ªè¡¨æ ¼joinæ“ä½œ</strong>ã€‚onæ¯”whereèµ·ä½œç”¨æ›´æ—©ï¼Œå…ˆæ ¹æ®onæ¡ä»¶è¿›è¡Œå¤šè¡¨çš„è¿æ¥æ“ä½œï¼Œç”Ÿæˆä¸€ä¸ªä¸´æ—¶è¡¨å†é€šè¿‡whereæ¥ç­›é€‰ã€‚</p>
<p>ä»¥ä¸Šç»“æœçš„å…³é”®åŸå› åœ¨äºleft join,right join,full joinçš„ç‰¹æ®Šæ€§ï¼Œä¸ç®¡onä¸Šçš„æ¡ä»¶æ˜¯å¦ä¸ºçœŸéƒ½ä¼šè¿”å› left æˆ– right è¡¨ä¸­çš„è®°å½•ï¼Œfullåˆ™å…·æœ‰leftå’Œrightçš„ç‰¹æ€§çš„å¹¶é›†ã€‚ è€Œinner joinæ²¡è¿™ä¸ªç‰¹æ®Šæ€§ï¼Œåˆ™æ¡ä»¶æ”¾åœ¨onä¸­å’Œwhereä¸­ï¼Œè¿”å›çš„ç»“æœé›†æ˜¯ç›¸åŒçš„ã€‚</p>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>sql</tag>
        <tag>æ•°æ®æ¡†</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonç›´æ¥èµ‹å€¼ã€æµ…æ‹·è´å’Œæ·±æ‹·è´ä»¥åŠåˆ‡ç‰‡</title>
    <url>/2020/11/15/Python%E7%9B%B4%E6%8E%A5%E8%B5%8B%E5%80%BC%E3%80%81%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%BB%A5%E5%8F%8A%E5%88%87%E7%89%87/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å‚è€ƒ <a href="https://www.runoob.com/w3cnote/python-understanding-dict-copy-shallow-or-deep.html" target="_blank" rel="noopener">https://www.runoob.com/w3cnote/python-understanding-dict-copy-shallow-or-deep.html</a></p>
</blockquote>
<h3 id="1-ç›´æ¥èµ‹å€¼"><a href="#1-ç›´æ¥èµ‹å€¼" class="headerlink" title="1. ç›´æ¥èµ‹å€¼"></a>1. ç›´æ¥èµ‹å€¼</h3><p>ç›´æ¥èµ‹å€¼ï¼š <code>b = a</code> , a å’Œ b éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è‹¥æ”¹å˜aæˆ–bï¼Œå¦ä¸€ä¸ªå˜é‡çš„å€¼ä¼šè·Ÿç€æ”¹å˜ã€‚</p>
<p><strong>ç›´æ¥èµ‹å€¼ï¼šå…¶å®å°±æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼ˆåˆ«åï¼‰ã€‚</strong></p>
<p><img src="/2020/11/15/Pythonç›´æ¥èµ‹å€¼ã€æµ…æ‹·è´å’Œæ·±æ‹·è´ä»¥åŠåˆ‡ç‰‡/1605435974588.png" alt="1605435974588"></p>
<a id="more"></a>
<p>ä¾‹ï¼š</p>
<h4 id="1-1-åˆ—è¡¨èµ‹å€¼å®ä¾‹"><a href="#1-1-åˆ—è¡¨èµ‹å€¼å®ä¾‹" class="headerlink" title="1.1 åˆ—è¡¨èµ‹å€¼å®ä¾‹"></a>1.1 åˆ—è¡¨èµ‹å€¼å®ä¾‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.append(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.append(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b</span><br><span class="line">([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ”¹å˜a -&gt; bä¼šè·Ÿç€å˜ï¼›æ”¹å˜b -&gt; aä¼šè·Ÿç€å˜</p>
<h4 id="1-2-å­—å…¸èµ‹å€¼å®ä¾‹"><a href="#1-2-å­—å…¸èµ‹å€¼å®ä¾‹" class="headerlink" title="1.2 å­—å…¸èµ‹å€¼å®ä¾‹"></a>1.2 å­—å…¸èµ‹å€¼å®ä¾‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="number">1</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>].append(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">1</span>].append(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b</span><br><span class="line">(&#123;<span class="number">1</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]&#125;, &#123;<span class="number">1</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]&#125;)</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ”¹å˜a -&gt; bä¼šè·Ÿç€å˜ï¼›æ”¹å˜b -&gt; aä¼šè·Ÿç€å˜</p>
<h3 id="2-æµ…æ‹·è´"><a href="#2-æµ…æ‹·è´" class="headerlink" title="2. æµ…æ‹·è´"></a>2. æµ…æ‹·è´</h3><p>æµ…æ‹·è´ï¼š <code>b = a.copy()</code> ï¼Œa å’Œ b æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ï¼Œä½†ä»–ä»¬çš„å­å¯¹è±¡è¿˜æ˜¯æŒ‡å‘åŒä¸€å¯¹è±¡ï¼ˆæ˜¯å¼•ç”¨ï¼‰ã€‚æµ…æ‹·è´æ‹·è´çˆ¶å¯¹è±¡ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªä¸ä¼šå˜ï¼Œä½†å¦‚æœaä¸­è¿˜æœ‰å­å¯¹è±¡ï¼Œåˆ™æ”¹å˜å­å¯¹è±¡ä¸­çš„å†…å®¹ï¼Œå¦ä¸€ä¸ªçš„å­å¯¹è±¡ä¸­çš„å†…å®¹ä¼šè·Ÿç€å˜ (è§ä¸‹é¢ç¤ºä¾‹)ã€‚</p>
<p><strong>æµ…æ‹·è´ï¼ˆcopyï¼‰ï¼šæ‹·è´çˆ¶å¯¹è±¡ï¼Œä¸ä¼šæ‹·è´å¯¹è±¡å†…éƒ¨çš„å­å¯¹è±¡ã€‚</strong>ï¼ˆå³æ‹·è´äº†çˆ¶å¯¹è±¡ï¼Œç°åœ¨æ”¹å˜çˆ¶å¯¹è±¡çš„è¯ï¼Œä¸ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå˜é‡çš„å€¼ï¼Œä½†ç”±äºå­å¯¹è±¡æ²¡æœ‰è¢«æ‹·è´ï¼Œæ”¹å˜ä¸€ä¸ªå˜é‡çš„å­å¯¹è±¡çš„å€¼ä¼šå½±å“å¦ä¸€ä¸ªå˜é‡çš„å€¼ï¼‰</p>
<p><img src="/2020/11/15/Pythonç›´æ¥èµ‹å€¼ã€æµ…æ‹·è´å’Œæ·±æ‹·è´ä»¥åŠåˆ‡ç‰‡/1605436105042.png" alt="1605436105042"></p>
<p>ä¾‹ï¼š</p>
<h4 id="2-1-åˆ—è¡¨æµ…æ‹·è´å®ä¾‹"><a href="#2-1-åˆ—è¡¨æµ…æ‹·è´å®ä¾‹" class="headerlink" title="2.1 åˆ—è¡¨æµ…æ‹·è´å®ä¾‹"></a>2.1 åˆ—è¡¨æµ…æ‹·è´å®ä¾‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a.copy()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.append(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.append(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b</span><br><span class="line">([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ”¹å˜a -&gt; bä¸ä¼šè·Ÿç€å˜ï¼›æ”¹å˜b -&gt; aä¸ä¼šè·Ÿç€å˜</p>
<h4 id="2-2-å­—å…¸æµ…æ‹·è´å®ä¾‹"><a href="#2-2-å­—å…¸æµ…æ‹·è´å®ä¾‹" class="headerlink" title="2.2 å­—å…¸æµ…æ‹·è´å®ä¾‹"></a>2.2 å­—å…¸æµ…æ‹·è´å®ä¾‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="number">1</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a.copy()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>].append(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">1</span>].append(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b</span><br><span class="line">(&#123;<span class="number">1</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]&#125;, &#123;<span class="number">1</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]&#125;)</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ”¹å˜å­å¯¹è±¡å†…å®¹æ—¶ï¼šæ”¹å˜a -&gt; bä¼šè·Ÿç€å˜ï¼›æ”¹å˜b -&gt; aä¼šè·Ÿç€å˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">2</span>] = [<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">3</span>] = [<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b</span><br><span class="line">(&#123;<span class="number">1</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">2</span>: [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]&#125;, &#123;<span class="number">1</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">3</span>: [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]&#125;)</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ”¹å˜çˆ¶å¯¹è±¡å†…å®¹æ—¶ï¼šæ”¹å˜a -&gt; bä¸ä¼šè·Ÿç€å˜ï¼›æ”¹å˜b -&gt; aä¸ä¼šè·Ÿç€å˜</p>
<h3 id="3-æ·±æ‹·è´"><a href="#3-æ·±æ‹·è´" class="headerlink" title="3. æ·±æ‹·è´"></a>3. æ·±æ‹·è´</h3><p>æ·±åº¦æ‹·è´ï¼š<code>b = copy.deepcopy(a)</code>ï¼Œa å’Œ b å®Œå…¨æ‹·è´äº†çˆ¶å¯¹è±¡åŠå…¶å­å¯¹è±¡ï¼Œä¸¤è€…æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚æ— è®ºæ”¹å˜aä¸­çš„ä»»ä½•å†…å®¹ï¼Œbä¸­éƒ½æ²¡æœ‰å½±å“ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<p><strong>æ·±æ‹·è´ï¼ˆdeepcopyï¼‰ï¼šcopyæ¨¡å—çš„deepcopyæ–¹æ³•ï¼Œå®Œå…¨æ‹·è´äº†çˆ¶å¯¹è±¡åŠå…¶å­å¯¹è±¡ã€‚</strong></p>
<p><img src="/2020/11/15/Pythonç›´æ¥èµ‹å€¼ã€æµ…æ‹·è´å’Œæ·±æ‹·è´ä»¥åŠåˆ‡ç‰‡/1605437439875.png" alt="1605437439875"></p>
<p>ä¾‹ï¼š</p>
<h4 id="2-1-åˆ—è¡¨æ·±æ‹·è´å®ä¾‹"><a href="#2-1-åˆ—è¡¨æ·±æ‹·è´å®ä¾‹" class="headerlink" title="2.1 åˆ—è¡¨æ·±æ‹·è´å®ä¾‹"></a>2.1 åˆ—è¡¨æ·±æ‹·è´å®ä¾‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> copy </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = copy.deepcopy(a)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.append(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.append(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b</span><br><span class="line">([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ”¹å˜a -&gt; bä¸ä¼šè·Ÿç€å˜ï¼›æ”¹å˜b -&gt; aä¸ä¼šè·Ÿç€å˜</p>
<h4 id="2-2-å­—å…¸æ·±æ‹·è´å®ä¾‹"><a href="#2-2-å­—å…¸æ·±æ‹·è´å®ä¾‹" class="headerlink" title="2.2 å­—å…¸æ·±æ‹·è´å®ä¾‹"></a>2.2 å­—å…¸æ·±æ‹·è´å®ä¾‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> copy </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="number">1</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = copy.deepcopy(a)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>].append(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">1</span>].append(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b</span><br><span class="line">(&#123;<span class="number">1</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]&#125;, &#123;<span class="number">1</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]&#125;)</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ”¹å˜å­å¯¹è±¡å†…å®¹æ—¶ï¼šæ”¹å˜a -&gt; bä¸ä¼šè·Ÿç€å˜ï¼›æ”¹å˜b -&gt; aä¸ä¼šè·Ÿç€å˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">2</span>] = [<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">3</span>] = [<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b</span><br><span class="line">(&#123;<span class="number">1</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">2</span>: [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]&#125;, &#123;<span class="number">1</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>], <span class="number">3</span>: [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]&#125;)</span><br></pre></td></tr></table></figure>
<p>ğŸ‘† æ”¹å˜çˆ¶å¯¹è±¡å†…å®¹æ—¶ï¼šæ”¹å˜a -&gt; bä¸ä¼šè·Ÿç€å˜ï¼›æ”¹å˜b -&gt; aä¸ä¼šè·Ÿç€å˜</p>
<h3 id="4-æ›´å¤šå®ä¾‹"><a href="#4-æ›´å¤šå®ä¾‹" class="headerlink" title="4. æ›´å¤šå®ä¾‹"></a>4. æ›´å¤šå®ä¾‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,[<span class="string">'a'</span>,<span class="string">'b'</span>]] <span class="comment"># åŸå§‹å¯¹è±¡</span></span><br><span class="line">b = a <span class="comment"># èµ‹å€¼ï¼Œä¼ å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">c = a.copy() <span class="comment"># å¯¹è±¡æ‹·è´ï¼Œæµ…æ‹·è´</span></span><br><span class="line">d = copy.deepcopy(a) <span class="comment"># å¯¹è±¡æ‹·è´ï¼Œæ·±æ‹·è´</span></span><br><span class="line"></span><br><span class="line">a.append(<span class="number">5</span>) <span class="comment"># ä¿®æ”¹å¯¹è±¡a</span></span><br><span class="line">a[<span class="number">4</span>].append(<span class="string">'c'</span>) <span class="comment">#ä¿®æ”¹å¯¹è±¡aä¸­çš„['a','b']æ•°ç»„å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'a = '</span>, a)</span><br><span class="line">print(<span class="string">'b = '</span>, b)</span><br><span class="line">print(<span class="string">'c = '</span>, c)</span><br><span class="line">print(<span class="string">'d = '</span>, d)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a =  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], <span class="number">5</span>]</span><br><span class="line">b =  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], <span class="number">5</span>]</span><br><span class="line">c =  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]]</span><br><span class="line">d =  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, [<span class="string">'a'</span>, <span class="string">'b'</span>]]</span><br></pre></td></tr></table></figure>
<h3 id="5-åˆ‡ç‰‡æ“ä½œ"><a href="#5-åˆ‡ç‰‡æ“ä½œ" class="headerlink" title="5. åˆ‡ç‰‡æ“ä½œ"></a>5. åˆ‡ç‰‡æ“ä½œ</h3><p>Pythonåˆ‡ç‰‡æ“ä½œå¯ä½œç”¨äº listï¼ˆåŒ…æ‹¬ tuple, stringï¼‰</p>
<p><strong>åˆ‡ç‰‡æ“ä½œç›¸å½“äºæµ…æ‹·è´</strong></p>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,[<span class="number">3</span>]]</span><br><span class="line">b = a[:]</span><br><span class="line">a.append(<span class="number">5</span>)</span><br><span class="line">a[<span class="number">2</span>].append(<span class="number">4</span>)</span><br><span class="line">print(<span class="string">'a = '</span>, a)</span><br><span class="line">print(<span class="string">'b = '</span>, b)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a =  [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>]</span><br><span class="line">b =  [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>condaå¸¸ç”¨å‘½ä»¤</title>
    <url>/2020/11/15/conda%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å‚è€ƒ <a href="https://blog.csdn.net/Destiny_zz/article/details/88634513" target="_blank" rel="noopener">https://blog.csdn.net/Destiny_zz/article/details/88634513</a></p>
</blockquote>
<p><code>conda -V</code> æ£€æŸ¥æ˜¯å¦å®‰è£…ä»¥åŠå½“å‰condaçš„ç‰ˆæœ¬<br><code>conda list</code> æŸ¥çœ‹å®‰è£…äº†å“ªäº›åŒ…<br><code>conda update conda</code> æ£€æŸ¥æ›´æ–°å½“å‰conda</p>
<h3 id="è™šæ‹Ÿç¯å¢ƒ"><a href="#è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒ"></a>è™šæ‹Ÿç¯å¢ƒ</h3><h4 id="1-åˆ›å»ºpythonè™šæ‹Ÿç¯å¢ƒ"><a href="#1-åˆ›å»ºpythonè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="1. åˆ›å»ºpythonè™šæ‹Ÿç¯å¢ƒ"></a>1. åˆ›å»ºpythonè™šæ‹Ÿç¯å¢ƒ</h4><p><code>conda create -n your_env_name python=X.X (2.7ã€3.6ç­‰)</code> åˆ›å»ºpythonç‰ˆæœ¬ä¸ºX.Xã€åå­—ä¸ºyour_env_nameçš„è™šæ‹Ÿç¯å¢ƒã€‚your_env_nameæ–‡ä»¶å¯åœ¨Anacondaå®‰è£…ç›®å½•envsæ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°ã€‚</p>
<h4 id="2-æ¿€æ´»æˆ–åˆ‡æ¢ä¸åŒçš„è™šæ‹Ÿç¯å¢ƒ"><a href="#2-æ¿€æ´»æˆ–åˆ‡æ¢ä¸åŒçš„è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="2. æ¿€æ´»æˆ–åˆ‡æ¢ä¸åŒçš„è™šæ‹Ÿç¯å¢ƒ"></a>2. æ¿€æ´»æˆ–åˆ‡æ¢ä¸åŒçš„è™šæ‹Ÿç¯å¢ƒ</h4><p><code>python --version</code> æ£€æŸ¥å½“å‰ python ç‰ˆæœ¬</p>
<p>åˆ‡æ¢è™šæ‹Ÿç¯å¢ƒï¼š<br>Linux: <code>source activate your_env_name(è™šæ‹Ÿç¯å¢ƒåç§°)</code><br>Windows: <code>activate your_env_name(è™šæ‹Ÿç¯å¢ƒåç§°)</code></p>
<a id="more"></a>
<h4 id="3-æŸ¥çœ‹å½“å‰å­˜åœ¨å“ªäº›è™šæ‹Ÿç¯å¢ƒ"><a href="#3-æŸ¥çœ‹å½“å‰å­˜åœ¨å“ªäº›è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="3. æŸ¥çœ‹å½“å‰å­˜åœ¨å“ªäº›è™šæ‹Ÿç¯å¢ƒ"></a>3. æŸ¥çœ‹å½“å‰å­˜åœ¨å“ªäº›è™šæ‹Ÿç¯å¢ƒ</h4><p><code>conda env list</code> æˆ– <code>conda info -e</code> æŸ¥çœ‹å½“å‰å­˜åœ¨å“ªäº›è™šæ‹Ÿç¯å¢ƒ</p>
<h4 id="4-å¯¹è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…é¢å¤–çš„åŒ…"><a href="#4-å¯¹è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…é¢å¤–çš„åŒ…" class="headerlink" title="4. å¯¹è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…é¢å¤–çš„åŒ…"></a>4. å¯¹è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…é¢å¤–çš„åŒ…</h4><p><code>conda install -n your_env_name [package]</code> å³å¯å®‰è£…packageåˆ°your_env_nameä¸­</p>
<h4 id="5-å…³é—­æˆ–é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"><a href="#5-å…³é—­æˆ–é€€å‡ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="5. å…³é—­æˆ–é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"></a>5. å…³é—­æˆ–é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</h4><p>Linux: <code>conda deactivate</code><br>Windows: <code>deactivate</code></p>
<h4 id="6-åˆ é™¤è™šæ‹Ÿç¯å¢ƒ"><a href="#6-åˆ é™¤è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="6. åˆ é™¤è™šæ‹Ÿç¯å¢ƒ"></a>6. åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</h4><p><code>conda remove -n your_env_name(è™šæ‹Ÿç¯å¢ƒåç§°) --all</code>ï¼Œå³å¯åˆ é™¤</p>
<h4 id="7-åˆ é™¤ç¯å¢ƒä¸­çš„æŸä¸ªåŒ…"><a href="#7-åˆ é™¤ç¯å¢ƒä¸­çš„æŸä¸ªåŒ…" class="headerlink" title="7. åˆ é™¤ç¯å¢ƒä¸­çš„æŸä¸ªåŒ…"></a>7. åˆ é™¤ç¯å¢ƒä¸­çš„æŸä¸ªåŒ…</h4><p><code>conda remove --name your_env_name package_name</code></p>
]]></content>
      <categories>
        <category>Jupyter Notebook</category>
      </categories>
      <tags>
        <tag>Jupyter Notebook</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonä¸­çš„reverse, reversed, sort, sorted</title>
    <url>/2020/10/30/Python%E4%B8%AD%E7%9A%84reverse-reversed-sort-sorted/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å‚è€ƒ:<br><a href="https://note.nkmk.me/en/python-reverse-reversed/" target="_blank" rel="noopener">https://note.nkmk.me/en/python-reverse-reversed/</a><br><a href="https://note.nkmk.me/en/python-list-sort-sorted/" target="_blank" rel="noopener">https://note.nkmk.me/en/python-list-sort-sorted/</a></p>
</blockquote>
<h3 id="1-Reverse"><a href="#1-Reverse" class="headerlink" title="1. Reverse"></a>1. Reverse</h3><p><span style="color:red">å¯¹äºlist, å¯ä»¥ä½¿ç”¨reverse(), reversed(), å’Œåˆ‡ç‰‡</span><br><span style="color:red">å¯¹äºå­—ç¬¦ä¸²å’Œå…ƒç»„ï¼ˆéƒ½ä¸å¯å˜ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨reversed()å’Œåˆ‡ç‰‡</span></p>
<h4 id="1-1-list"><a href="#1-1-list" class="headerlink" title="1.1 list"></a>1.1 list</h4><ul>
<li>List type method <code>reverse()</code> reverses the original list.</li>
</ul>
<p>reverse()æ˜¯åˆ—è¡¨çš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œæ”¹å˜åŸåˆ—è¡¨ï¼Œreverse()è¿”å›None</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">org_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">org_list.reverse()</span><br><span class="line">print(org_list)</span><br><span class="line"><span class="comment"># [5, 4, 3, 2, 1]</span></span><br><span class="line"></span><br><span class="line">print(org_list.reverse())</span><br><span class="line"><span class="comment"># None</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Built-in function <code>reversed()</code> returns a reverse iterator</li>
</ul>
<p>reversed()æ˜¯pythonçš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œä¸ä¼šæ”¹å˜åŸåˆ—è¡¨ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¯ç”¨list()è·å–ä½œç”¨åçš„å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">org_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">reverse_iterator = reversed(org_list)</span><br><span class="line">print(org_list)</span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line">print(reverse_iterator)</span><br><span class="line"><span class="comment">#&lt;list_reverseiterator object at 0x7fdd7151a940&gt;</span></span><br><span class="line"></span><br><span class="line">print(type(reverse_iterator))</span><br><span class="line"><span class="comment"># &lt;class 'list_reverseiterator'&gt;</span></span><br><span class="line"></span><br><span class="line">new_list = list(reversed(org_list))</span><br><span class="line">print(org_list)</span><br><span class="line">print(new_list)</span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="comment"># [5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ‡ç‰‡ï¼š$[start:end:step]$</li>
</ul>
<p>å¿½ç•¥startå’Œendæ—¶ï¼Œé€‰å–æ•´ä¸ªlistï¼Œstep=-1ï¼Œä»åå¾€å‰ä¾æ¬¡éå†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">org_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">new_list = org_list[::<span class="number">-1</span>]</span><br><span class="line">print(org_list)</span><br><span class="line">print(new_list)</span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="comment"># [5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>
<a id="more"></a> 
<h4 id="1-2-string"><a href="#1-2-string" class="headerlink" title="1.2 string"></a>1.2 string</h4><p>ä¸èƒ½ä½¿ç”¨s.reverse()æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">'abcde'</span></span><br><span class="line">s.reverse()</span><br><span class="line"><span class="comment">#Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#  File "script.py", line 7, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#    org_str.reverse()</span></span><br><span class="line"><span class="comment">#AttributeError: 'str' object has no attribute 'reverse'</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#Exited with error status 1</span></span><br></pre></td></tr></table></figure>
<p>æ³•ä¸€ï¼šreversed()</p>
<p>å› ä¸ºè¿­ä»£å™¨ä¸èƒ½ç›´æ¥è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œè½¬æ¢æˆliståè¿˜éœ€ä½¿ç”¨join()æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">org_str = <span class="string">'abcde'</span></span><br><span class="line"></span><br><span class="line">new_str_list = list(reversed(org_str))</span><br><span class="line">print(new_str_list)</span><br><span class="line"><span class="comment"># ['e', 'd', 'c', 'b', 'a']</span></span><br><span class="line"></span><br><span class="line">new_str = <span class="string">''</span>.join(list(reversed(org_str)))</span><br><span class="line">print(new_str)</span><br><span class="line"><span class="comment"># edcba</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¹Ÿå¯ç›´æ¥''.join(reversed(..))?</span></span><br><span class="line">new_str = <span class="string">''</span>.join(reversed(org_str))</span><br><span class="line">print(new_str)</span><br><span class="line"><span class="comment"># edcba</span></span><br></pre></td></tr></table></figure>
<p>æ³•äºŒï¼šåˆ‡ç‰‡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">new_str = org_str[::<span class="number">-1</span>]</span><br><span class="line">print(new_str)</span><br><span class="line"><span class="comment"># edcba</span></span><br></pre></td></tr></table></figure>
<h4 id="1-3-tuple"><a href="#1-3-tuple" class="headerlink" title="1.3 tuple"></a>1.3 tuple</h4><p>æ³•ä¸€ï¼šreversed()</p>
<p>ä½¿ç”¨tuple()å°†è¿­ä»£å™¨è½¬æ¢æˆtuple</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">org_tuple = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">new_tuple = tuple(reversed(org_tuple))</span><br><span class="line">print(new_tuple)</span><br><span class="line"><span class="comment"># (5, 4, 3, 2, 1)</span></span><br></pre></td></tr></table></figure>
<p>æ³•äºŒï¼šåˆ‡ç‰‡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">new_tuple = org_tuple[::<span class="number">-1</span>]</span><br><span class="line">print(new_tuple)</span><br><span class="line"><span class="comment"># (5, 4, 3, 2, 1)</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="2-Sort"><a href="#2-Sort" class="headerlink" title="2. Sort"></a>2. Sort</h3><p><span style="color:red">å¯¹äºlistï¼Œå¯ä½¿ç”¨sort()æˆ–sorted()</span><br><span style="color:red">å¯¹äºå­—ç¬¦ä¸²å’Œå…ƒç»„ï¼Œå¯ä½¿ç”¨sorted()</span></p>
<h4 id="2-1-list"><a href="#2-1-list" class="headerlink" title="2.1 list"></a>2.1 list</h4><ul>
<li>List type method <code>sort()</code> sorts the original list</li>
</ul>
<p>sort()æ˜¯åˆ—è¡¨çš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œæ”¹å˜åŸåˆ—è¡¨ï¼Œsort()è¿”å›Noneï¼Œé»˜è®¤æŒ‰å‡åºæ’åˆ—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">org_list = [<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">org_list.sort()</span><br><span class="line"><span class="comment"># sort in-place</span></span><br><span class="line">print(org_list)</span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line">print(org_list.sort())</span><br><span class="line"><span class="comment"># None</span></span><br></pre></td></tr></table></figure>
<p>é™åºæ’åˆ—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">org_list.sort(reverse=<span class="literal">True</span>)</span><br><span class="line">print(org_list)</span><br><span class="line"><span class="comment"># [5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Built-in function <code>sorted()</code> returns a sorted list</li>
</ul>
<p>sorted()æ˜¯pythonçš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œä¸ä¼šæ”¹å˜åŸåˆ—è¡¨ï¼Œè¿”å›ä¸€ä¸ªsorted listï¼Œé»˜è®¤æŒ‰å‡åºæ’åˆ—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">org_list = [<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">new_list = sorted(org_list)</span><br><span class="line">print(org_list)</span><br><span class="line">print(new_list)</span><br><span class="line"><span class="comment"># [3, 1, 4, 5, 2]</span></span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<p>é™åºæ’åˆ—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">new_list_reverse = sorted(org_list, reverse=<span class="literal">True</span>)</span><br><span class="line">print(org_list)</span><br><span class="line">print(new_list_reverse)</span><br><span class="line"><span class="comment"># [3, 1, 4, 5, 2]</span></span><br><span class="line"><span class="comment"># [5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>
<h4 id="2-2-string"><a href="#2-2-string" class="headerlink" title="2.2 string"></a>2.2 string</h4><p>ä½¿ç”¨sorted()</p>
<p>å› ä¸ºsorted()è¿”å›ä¸€ä¸ªlistï¼Œè¿˜éœ€ä½¿ç”¨join()è½¬æ¢æˆstring</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">org_str = <span class="string">'cebad'</span></span><br><span class="line"></span><br><span class="line">new_str_list = sorted(org_str)</span><br><span class="line">print(org_str)</span><br><span class="line">print(new_str_list)</span><br><span class="line"><span class="comment"># cebad</span></span><br><span class="line"><span class="comment"># ['a', 'b', 'c', 'd', 'e']</span></span><br><span class="line"></span><br><span class="line">new_str = <span class="string">''</span>.join(new_str_list)</span><br><span class="line">print(new_str)</span><br><span class="line"><span class="comment"># abcde</span></span><br><span class="line"></span><br><span class="line">new_str_reverse = <span class="string">''</span>.join(sorted(org_str, reverse=<span class="literal">True</span>))</span><br><span class="line">print(new_str_reverse)</span><br><span class="line"><span class="comment"># edcba</span></span><br></pre></td></tr></table></figure>
<p>The order of the characters is determined by their Unicode code point.</p>
<h4 id="2-2-tuple"><a href="#2-2-tuple" class="headerlink" title="2.2 tuple"></a>2.2 tuple</h4><p>ä½¿ç”¨sorted()</p>
<p>éœ€è¦ä½¿ç”¨tuple()å°†ç»“æœè½¬æ¢æˆtuple</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">org_tuple = (<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">new_tuple_list = sorted(org_tuple)</span><br><span class="line">print(org_tuple)</span><br><span class="line">print(new_tuple_list)</span><br><span class="line"><span class="comment"># (3, 1, 4, 5, 2)</span></span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line">new_tuple = tuple(new_tuple_list)</span><br><span class="line">print(new_tuple)</span><br><span class="line"><span class="comment"># (1, 2, 3, 4, 5)</span></span><br><span class="line"></span><br><span class="line">new_tuple_reverse = tuple(sorted(new_tuple_list, reverse=<span class="literal">True</span>))</span><br><span class="line">print(new_tuple_reverse)</span><br><span class="line"><span class="comment"># (5, 4, 3, 2, 1)</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®ä»“åº“ç®€ä»‹</title>
    <url>/2020/10/27/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E7%AE%80%E4%BB%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å‚è€ƒã€ŠHadoopæ„å»ºæ•°æ®ä»“åº“å®è·µã€‹</p>
</blockquote>
<h3 id="å¿«é€Ÿå¯¼èˆª"><a href="#å¿«é€Ÿå¯¼èˆª" class="headerlink" title="å¿«é€Ÿå¯¼èˆª"></a>å¿«é€Ÿå¯¼èˆª</h3><p><a href="#jump_zhutiyu">ä¸»é¢˜åŸŸ</a><br><a href="#jump_RDS">RDS</a><br><a href="#jump_TDS">TDS</a><br><a href="#jump_ODS">ODS</a></p>
<h3 id="1-ä»€ä¹ˆæ˜¯æ•°æ®ä»“åº“"><a href="#1-ä»€ä¹ˆæ˜¯æ•°æ®ä»“åº“" class="headerlink" title="1. ä»€ä¹ˆæ˜¯æ•°æ®ä»“åº“"></a>1. ä»€ä¹ˆæ˜¯æ•°æ®ä»“åº“</h3><h4 id="1-1-æ•°æ®ä»“åº“çš„å®šä¹‰"><a href="#1-1-æ•°æ®ä»“åº“çš„å®šä¹‰" class="headerlink" title="1.1 æ•°æ®ä»“åº“çš„å®šä¹‰"></a>1.1 æ•°æ®ä»“åº“çš„å®šä¹‰</h4><p>æ•°æ®ä»“åº“ä¹‹çˆ¶Bill Inmonå°†æ•°æ®ä»“åº“æè¿° ä¸ºä¸€ä¸ª<strong><span style="color:red">é¢å‘ä¸»é¢˜çš„ã€é›†æˆçš„ã€éšæ—¶é—´å˜åŒ–çš„ã€éæ˜“å¤±çš„</span></strong>æ•°æ®é›†åˆï¼Œç”¨äºæ”¯æŒç®¡ç†è€…çš„å†³ç­–è¿‡ç¨‹ã€‚</p>
<ul>
<li>é¢å‘ä¸»é¢˜</li>
</ul>
<p>æ•°æ®ä»“åº“è¢«è®¾è®¡æˆè¾…åŠ©äººä»¬åˆ†ææ•°æ®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå…¬å¸è¦åˆ†æé”€å”®æ•°æ®ï¼Œå°±å¯ä»¥å»ºç«‹ä¸€ä¸ªä¸“æ³¨äºé”€å”®çš„æ•°æ®ä»“åº“ï¼Œä½¿ç”¨è¿™ä¸ªæ•°æ®ä»“åº“ï¼Œå°±å¯ä»¥å›ç­”ç±»ä¼¼äºâ€å»å¹´è°æ˜¯æˆ‘ä»¬è¿™æ¬¾äº§å“çš„æœ€ä½³ç”¨æˆ·â€œè¿™æ ·çš„é—®é¢˜ã€‚<strong><span id="jump_zhutiyu">ä¸»é¢˜åŸŸ</span></strong>æ˜¯å¯¹æŸä¸ªä¸»é¢˜è¿›è¡Œåˆ†æåç¡®å®šçš„ä¸»é¢˜çš„è¾¹ç•Œï¼Œå¦‚å®¢æˆ·ã€é”€å”®ã€äº§å“éƒ½æ˜¯ä¸»é¢˜åŸŸçš„ä¾‹å­ã€‚</p>
<ul>
<li>é›†æˆ</li>
</ul>
<p>è¿˜ç”¨é”€å”®çš„ä¾‹å­ï¼Œå‡è®¾å…¬å¸æœ‰å¤šæ¡äº§å“çº¿å’Œå¤šç§äº§å“é”€å”®æ¸ é“ï¼Œè€Œæ¯ä¸ªäº§å“çº¿éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„é”€å”®æ•°æ®åº“ã€‚æ­¤æ—¶è¦æƒ³ä»å…¬å¸å±‚é¢æ•´ä½“åˆ†æé”€å”®æ•°æ®ï¼Œå¿…é¡»å°†å¤šä¸ªåˆ†æ•£çš„æ•°æ®æºç»Ÿä¸€æˆä¸€è‡´çš„ã€æ— æ­§ä¹‰çš„æ•°æ®æ ¼å¼åï¼Œå†æ”¾ç½®åˆ°æ•°æ®ä»“åº“ä¸­ã€‚å› æ­¤æ•°æ®ä»“åº“å¿…é¡»èƒ½è§£å†³è¯¸å¦‚äº§å“å‘½åå†²çªã€è®¡é‡å•ä½ä¸ä¸€è‡´ç­‰é—®é¢˜ã€‚å½“å®Œæˆäº†è¿™äº›æ•°æ®æ•´åˆå·¥ä½œåï¼Œè¯¥æ•°æ®ä»“åº“å¯ç§°ä¸ºæ˜¯é›†æˆçš„ã€‚</p>
<ul>
<li>éšæ—¶é—´å˜åŒ–</li>
</ul>
<p>ä¸ºäº†å‘ç°ä¸šåŠ¡å˜åŒ–çš„è¶‹åŠ¿ã€å­˜åœ¨çš„é—®é¢˜ï¼Œæˆ–è€…æ–°çš„æœºä¼šï¼Œéœ€è¦åˆ†æå¤§é‡çš„å†å²æ•°æ®ã€‚è¿™ä¸è”æœºäº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰ç³»ç»Ÿå½¢æˆé²œæ˜çš„å¯¹æ¯”ã€‚è”æœºäº‹åŠ¡å¤„ç†ååº”çš„æ˜¯å½“å‰æ—¶é—´ç‚¹çš„æ•°æ®æƒ…å†µï¼Œè¦æ±‚é«˜æ€§èƒ½ã€é«˜å¹¶å‘å’ŒæçŸ­çš„å“åº”æ—¶é—´ã€‚è€Œæ•°æ®ä»“åº“å…³æ³¨çš„æ˜¯æ•°æ®éšæ—¶é—´å˜åŒ–çš„æƒ…å†µï¼Œå¹¶ä¸”èƒ½åæ˜ å†è¿‡å»æŸä¸ªæ—¶é—´ç‚¹çš„æ•°æ®æ˜¯æ€æ ·çš„ã€‚</p>
<ul>
<li>éæ˜“å¤±</li>
</ul>
<p>ä¸€æ—¦è¿›å…¥åˆ°æ•°æ®ä»“åº“ä¸­ï¼Œæ•°æ®å°±ä¸åº”è¯¥å†æœ‰æ”¹å˜ã€‚åœ¨æ•°æ®ä»“åº“ç¯å¢ƒä¸­ï¼Œä¸€èˆ¬ä¸è¿›è¡Œæ•°æ®æ›´æ–°ã€‚æ•°æ®ä»“åº“ä¸­çš„æ•°æ®åŸºæœ¬æ˜¯é™æ€çš„ã€‚æ•°æ®ä»“åº“çš„ç›®çš„å°±æ˜¯æ ¹æ®æ›¾ç»å‘ç”Ÿçš„äº‹ä»¶è¿›è¡Œåˆ†æï¼Œå¦‚æœæ•°æ®æ˜¯å¯ä¿®æ”¹çš„ï¼Œå°†ä½¿å†å²åˆ†æå˜å¾—æ²¡æœ‰æ„ä¹‰ã€‚</p>
<p>é™¤äº†ä»¥ä¸Šå››ä¸ªç‰¹æ€§ä»¥å¤–ï¼Œæ•°æ®ä»“åº“è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µæ˜¯<strong>ç²’åº¦</strong>ã€‚æ•°æ®ä»“åº“ä¸­çš„ç²’åº¦æ˜¯æŒ‡æ•°æ®çš„ç»†èŠ‚æˆ–æ±‡æ€»ç¨‹åº¦ï¼Œç»†èŠ‚ç¨‹åº¦è¶Šé«˜ï¼Œç²’åº¦çº§åˆ«è¶Šä½ã€‚ä¾‹å¦‚ï¼Œå•ä¸ªäº‹åŠ¡æ˜¯ä½ç²’åº¦çº§åˆ«ï¼Œè€Œå…¨éƒ¨ä¸€ä¸ªæœˆäº‹åŠ¡çš„æ±‡æ€»å°±æ˜¯é«˜ç²’åº¦çº§åˆ«ã€‚ç²’åº¦çº§åˆ«è¶Šä½ï¼Œæ•°æ®é‡è¶Šå¤§ï¼ŒæŸ¥è¯¢çš„ç»†èŠ‚ç¨‹åº¦è¶Šé«˜ï¼ŒæŸ¥è¯¢èŒƒå›´è¶Šå¹¿æ³›ã€‚</p>
<h4 id="1-2-æ•°æ®ä»“åº“é‡Œçš„æ•°æ®ä»å“ªé‡Œæ¥"><a href="#1-2-æ•°æ®ä»“åº“é‡Œçš„æ•°æ®ä»å“ªé‡Œæ¥" class="headerlink" title="1.2 æ•°æ®ä»“åº“é‡Œçš„æ•°æ®ä»å“ªé‡Œæ¥"></a>1.2 æ•°æ®ä»“åº“é‡Œçš„æ•°æ®ä»å“ªé‡Œæ¥</h4><p><strong>é€šå¸¸æ•°æ®ä»“åº“çš„æ•°æ®æ¥è‡ªå„ä¸ªä¸šåŠ¡åº”ç”¨ç³»ç»Ÿã€‚</strong></p>
<ul>
<li>Oracleã€MySQLã€SQL Serverç­‰å…³ç³»æ•°æ®åº“é‡Œçš„ç»“æ„åŒ–æ•°æ®ï¼›</li>
<li>æ–‡æœ¬ã€CSVç­‰å¹³é¢æ–‡ä»¶æˆ–Wordã€Excelæ–‡æ¡£ä¸­çš„éç»“æ„åŒ–æ•°æ®ï¼›</li>
<li>HTMLã€XMLç­‰è‡ªæè¿°çš„åŠç»“æ„åŒ–æ•°æ®ã€‚</li>
</ul>
<p>è¿™äº›ä¸šåŠ¡æ•°æ®ç»è¿‡ä¸€ç³»åˆ—çš„æ•°æ®æŠ½å–ã€è½¬æ¢ã€æ¸…æ´—ï¼Œæœ€ç»ˆä»¥ä¸€ç§ç»Ÿä¸€çš„æ ¼å¼è£…è½½è¿›æ•°æ®ä»“åº“ã€‚æ•°æ®ä»“åº“é‡Œçš„æ•°æ®ä½œä¸ºåˆ†æç”¨çš„æ•°æ®æºï¼Œæä¾›ç»™åé¢çš„å³å¸­(ad hoc)æŸ¥è¯¢ã€åˆ†æç³»ç»Ÿã€æ•°æ®é›†å¸‚ã€æŠ¥è¡¨ç³»ç»Ÿã€æ•°æ®æŒ–æ˜ç³»ç»Ÿç­‰ã€‚</p>
<h4 id="1-3-å»ºç«‹æ•°æ®ä»“åº“çš„åŸå› ï¼Œæ•°æ®ä»“åº“çš„å¥½å¤„"><a href="#1-3-å»ºç«‹æ•°æ®ä»“åº“çš„åŸå› ï¼Œæ•°æ®ä»“åº“çš„å¥½å¤„" class="headerlink" title="1.3 å»ºç«‹æ•°æ®ä»“åº“çš„åŸå› ï¼Œæ•°æ®ä»“åº“çš„å¥½å¤„"></a>1.3 å»ºç«‹æ•°æ®ä»“åº“çš„åŸå› ï¼Œæ•°æ®ä»“åº“çš„å¥½å¤„</h4><p>ä¸ºä»€ä¹ˆä¸ç›´æ¥æ“ä½œä¸šåŠ¡ç³»ç»Ÿä¸­çš„æ•°æ®ç”¨äºåˆ†æï¼Œè€Œè¦ä½¿ç”¨æ•°æ®ä»“åº“å‘¢ï¼Ÿå¾ˆå¤šå› ç´ å¯¼è‡´ç›´æ¥è®¿é—®ä¸šåŠ¡ç³»ç»Ÿæ— æ³•è¿›è¡Œå…¨å±€æ•°æ®åˆ†æçš„å·¥ä½œï¼š</p>
<ul>
<li>æŸäº›ä¸šåŠ¡æ•°æ®ç”±äºå®‰å…¨æˆ–å…¶ä»–å› ç´ ä¸èƒ½ç›´æ¥è®¿é—®ã€‚</li>
<li>ä¸šåŠ¡ç³»ç»Ÿçš„ç‰ˆæœ¬å˜æ›´å¾ˆé¢‘ç¹ï¼Œæ¯æ¬¡å˜æ›´éƒ½éœ€è¦é‡å†™åˆ†æç³»ç»Ÿå¹¶é‡æ–°æµ‹è¯•ã€‚</li>
<li>å¾ˆéš¾å»ºç«‹å’Œç»´æŠ¤æ±‡æ€»æ•°æ®æ¥æºäºå¤šä¸ªä¸šåŠ¡ç³»ç»Ÿç‰ˆæœ¬çš„æŠ¥è¡¨ã€‚</li>
<li>ä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®æ ¼å¼ï¼Œå¦‚æ—¥æœŸã€æ•°å­—çš„æ ¼å¼ä¸ç»Ÿä¸€ã€‚</li>
<li>ä¸šåŠ¡ç³»ç»Ÿçš„è¡¨ç»“æ„ä¸ºäº‹åŠ¡å¤„ç†æ€§èƒ½è€Œä¼˜åŒ–ï¼Œæœ‰æ—¶å¹¶ä¸é€‚åˆæŸ¥è¯¢ä¸åˆ†æã€‚</li>
<li>â€¦</li>
</ul>
<p>ä½¿ç”¨æ•°æ®ä»“åº“çš„å¥½å¤„ï¼š</p>
<ul>
<li>å°†å¤šä¸ªæ•°æ®æºé›†æˆåˆ°å•ä¸€æ•°æ®å­˜å‚¨ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å•ä¸€æ•°æ®æŸ¥è¯¢å¼•æ“å±•ç¤ºæ•°æ®ã€‚</li>
<li>ç¼“è§£åœ¨äº‹åŠ¡å¤„ç†æ•°æ®åº“ä¸Šå› æ‰§è¡Œå¤§æŸ¥è¯¢è€Œäº§ç”Ÿçš„èµ„æºç«äº‰é—®é¢˜ã€‚</li>
<li>ç»´æŠ¤å†å²æ•°æ®</li>
<li>é€šè¿‡æä¾›ä¸€è‡´çš„ç¼–ç å’Œæè¿°ï¼Œå‡å°‘æˆ–ä¿®æ­£åæ•°æ®é—®é¢˜ï¼Œæé«˜æ•°æ®è´¨é‡ã€‚</li>
<li>é‡æ„æ•°æ®ï¼Œä½¿æ•°æ®å¯¹ä¸šåŠ¡ç”¨æˆ·æ›´æœ‰æ„ä¹‰ã€‚</li>
<li>å‘å¤æ‚åˆ†ææŸ¥è¯¢äº¤ä»˜ä¼˜ç§€çš„æŸ¥è¯¢æ€§èƒ½ï¼ŒåŒæ—¶ä¸å½±å“æ“ä½œå‹ç³»ç»Ÿã€‚</li>
<li>â€¦</li>
</ul>
<h3 id="2-æ“ä½œå‹ç³»ç»Ÿä¸åˆ†æå‹ç³»ç»Ÿ"><a href="#2-æ“ä½œå‹ç³»ç»Ÿä¸åˆ†æå‹ç³»ç»Ÿ" class="headerlink" title="2. æ“ä½œå‹ç³»ç»Ÿä¸åˆ†æå‹ç³»ç»Ÿ"></a>2. æ“ä½œå‹ç³»ç»Ÿä¸åˆ†æå‹ç³»ç»Ÿ</h3><h4 id="2-1-æ“ä½œå‹ç³»ç»Ÿ"><a href="#2-1-æ“ä½œå‹ç³»ç»Ÿ" class="headerlink" title="2.1 æ“ä½œå‹ç³»ç»Ÿ"></a>2.1 æ“ä½œå‹ç³»ç»Ÿ</h4><p>æ“ä½œå‹ç³»ç»Ÿæ˜¯ä¸€ç±»ä¸“é—¨ç”¨äºç®¡ç†é¢å‘äº‹åŠ¡çš„åº”ç”¨çš„ä¿¡æ¯ç³»ç»Ÿã€‚äº‹åŠ¡åœ¨è¿™é‡ŒæŒ‡è®¡ç®—æœºæˆ–æ•°æ®åº“çš„æœ¯è¯­ã€‚</p>
<h5 id="2-1-1-æ“ä½œå‹ç³»ç»Ÿçš„æ•°æ®åº“æ“ä½œ"><a href="#2-1-1-æ“ä½œå‹ç³»ç»Ÿçš„æ•°æ®åº“æ“ä½œ" class="headerlink" title="2.1.1 æ“ä½œå‹ç³»ç»Ÿçš„æ•°æ®åº“æ“ä½œ"></a>2.1.1 æ“ä½œå‹ç³»ç»Ÿçš„æ•°æ®åº“æ“ä½œ</h5><p>å¸¸ç”¨æ“ä½œï¼š<strong>å¢ã€æ”¹ã€æŸ¥</strong>ã€‚é€šå¸¸æ˜¯æ’å…¥ä¸æ›´æ–°å¯†é›†å‹çš„ï¼ŒåŒæ—¶ä¼šå¯¹æ•°æ®åº“è¿›è¡Œå¤§é‡å¹¶å‘æŸ¥è¯¢ï¼Œè€Œåˆ é™¤æ“ä½œç›¸å¯¹è¾ƒå°‘ã€‚</p>
<h5 id="2-1-2-æ“ä½œå‹ç³»ç»Ÿçš„æ•°æ®åº“è®¾è®¡"><a href="#2-1-2-æ“ä½œå‹ç³»ç»Ÿçš„æ•°æ®åº“è®¾è®¡" class="headerlink" title="2.1.2 æ“ä½œå‹ç³»ç»Ÿçš„æ•°æ®åº“è®¾è®¡"></a>2.1.2 æ“ä½œå‹ç³»ç»Ÿçš„æ•°æ®åº“è®¾è®¡</h5><p>æ“ä½œå‹ç³»ç»Ÿçš„ç‰¹å¾æ˜¯å¤§é‡çŸ­çš„äº‹åŠ¡ï¼Œå¹¶å¼ºè°ƒå¿«é€Ÿå¤„ç†æŸ¥è¯¢ã€‚æ¯ç§’äº‹åŠ¡æ•°æ˜¯æ“ä½œå‹ç³»ç»Ÿçš„ä¸€ä¸ªæœ‰æ•ˆåº¦é‡æŒ‡æ ‡ã€‚</p>
<p>åœ¨æ•°æ®åº“<strong>é€»è¾‘è®¾è®¡</strong>ä¸Šï¼Œæ“ä½œå‹ç³»ç»Ÿçš„åº”ç”¨æ•°æ®åº“å¤§éƒ½ä½¿ç”¨è§„èŒƒåŒ–è®¾è®¡æ–¹æ³•ï¼Œé€šå¸¸è¦æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ã€‚è¿™æ˜¯å› ä¸ºè§„èŒƒåŒ–è®¾è®¡èƒ½æœ€å¤§é™åº¦åœ°æ•°æ®å†—ä½™ï¼Œæä¾›æ›´å¿«æ›´é«˜æ•ˆçš„æ–¹å¼æ‰§è¡Œæ•°æ®åº“å†™æ“ä½œã€‚</p>
<p>åœ¨æ•°æ®åº“<strong>ç‰©ç†è®¾è®¡</strong>ä¸Šï¼Œä»¥Oracleæ•°æ®åº“ä¸ºä¾‹ï¼Œç®€è¦è¯´æ˜åœ¨è®¾è®¡æ“ä½œå‹ç³»ç»Ÿæ•°æ®åº“æ—¶åº”è€ƒè™‘çš„é—®é¢˜ï¼š</p>
<ul>
<li>åˆç†ä½¿ç”¨èšç°‡ã€‚èšç°‡æ˜¯ä¸€ç§æ•°æ®åº“æ¨¡å¼ï¼Œå…¶ä¸­åŒ…å«æœ‰å…±ç”¨ä¸€åˆ—æˆ–å¤šåˆ—çš„å¤šä¸ªè¡¨ã€‚æ•°æ®åº“ä¸­çš„èšç°‡è¡¨ç”¨äºæé«˜è¿æ¥æ“ä½œçš„æ€§èƒ½ã€‚</li>
<li>é€‚å½“è°ƒæ•´æ•°æ®å—å¤§å°ã€‚æ•°æ®å—å¤§å°åº”è¯¥æ˜¯æ“ä½œç³»ç»Ÿå—å¤§å°çš„å€æ•°ï¼Œå¹¶ä¸”è®¾ç½®ä¸Šé™ä»¥é¿å…ä¸å¿…è¦çš„I/Oã€‚</li>
<li>åŠ¨æ€åˆ†é…è¡¨ç©ºé—´ã€‚</li>
<li>åˆç†åˆ’åˆ†æ•°æ®åº“åˆ†åŒºã€‚åˆ†åŒºæœ€å¤§çš„ä½œç”¨æ˜¯èƒ½åœ¨å¯ç”¨æ€§å’Œå®‰å…¨æ€§ç»´æŠ¤æœŸé—´ä¿æŒäº‹åŠ¡å¤„ç†çš„æ€§èƒ½ã€‚</li>
<li>SQLä¼˜åŒ–ã€‚æœ‰æ•ˆåˆ©ç”¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ä¼˜åŒ–å™¨ï¼Œä½¿ç”¨æœ€ä½³çš„æ•°æ®è®¿é—®è·¯å¾„ã€‚</li>
<li>é¿å…è¿‡åº¦ä½¿ç”¨ç´¢å¼•ã€‚å¤§é‡çš„æ•°æ®ä¿®æ”¹ä¼šç»™ç´¢å¼•ç»´æŠ¤å¸¦æ¥å‹åŠ›ï¼Œä»è€Œå¯¹æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚</li>
</ul>
<p>ä»¥ä¸Šæ‰€è®²çš„æ“ä½œå‹ç³»ç»Ÿéƒ½æ˜¯ä»¥æ•°æ®æ®ç³»ç»Ÿä¸ºæ ¸å¿ƒï¼Œè€Œæ•°æ®åº“ç³»ç»Ÿä¸ºäº†ä¿æŒACIDç‰¹æ€§ï¼Œæœ¬è´¨ä¸Šæ˜¯å•ä¸€é›†ä¸­å¼ç³»ç»Ÿã€‚åœ¨å½“ä»Šè¿™ä¸ªä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œé›†ä¸­å¼æ•°æ®åº“å¾€å¾€å·²æ— æ³•æ”¯æ’‘ä¸šåŠ¡çš„éœ€è¦ã€‚åˆ†å¸ƒå¼äº‹åŠ¡ã€å»ä¸­å¿ƒåŒ–ã€CAPä¸æœ€ç»ˆä¸€è‡´æ€§ç­‰ä¸€äº›åˆ—æ–°çš„ç†è®ºå’ŒæŠ€æœ¯ä¸ºè§£å†³ç³»ç»Ÿæ‰©å±•é—®é¢˜åº”è¿è€Œç”Ÿã€‚è¿™é‡Œä¸åšå±•å¼€ã€‚</p>
<h4 id="2-2-åˆ†æå‹ç³»ç»Ÿ"><a href="#2-2-åˆ†æå‹ç³»ç»Ÿ" class="headerlink" title="2.2 åˆ†æå‹ç³»ç»Ÿ"></a>2.2 åˆ†æå‹ç³»ç»Ÿ</h4><p>åˆ†æå‹ç³»ç»Ÿæ˜¯ä¸€ç§å¿«é€Ÿå›ç­”å¤šç»´åˆ†ææŸ¥è¯¢çš„å®ç°æ–¹å¼ã€‚</p>
<h5 id="2-2-1-åˆ†æå‹ç³»ç»Ÿçš„æ•°æ®åº“æ“ä½œ"><a href="#2-2-1-åˆ†æå‹ç³»ç»Ÿçš„æ•°æ®åº“æ“ä½œ" class="headerlink" title="2.2.1 åˆ†æå‹ç³»ç»Ÿçš„æ•°æ®åº“æ“ä½œ"></a>2.2.1 åˆ†æå‹ç³»ç»Ÿçš„æ•°æ®åº“æ“ä½œ</h5><p>åœ¨æ•°æ®åº“å±‚é¢ï¼Œåˆ†æå‹ç³»ç»Ÿæ“ä½œè¢«å®šä¹‰ä¸ºå°‘é‡çš„äº‹åŠ¡ï¼Œå¤æ‚çš„æŸ¥è¯¢ï¼Œå¤„ç†å½’æ¡£å’Œå†å²æ•°æ®ã€‚è¿™äº›æ•°æ®å¾ˆå°‘è¢«ä¿®æ”¹ï¼Œä»æ•°æ®åº“æŠ½å–æ•°æ®æ˜¯æœ€å¤šçš„æ“ä½œã€‚åˆ†æå‹æ•°æ®åº“åŸºæœ¬ä¸Šéƒ½æ˜¯<strong>è¯»æ“ä½œ</strong>ã€‚</p>
<h5 id="2-2-2-åˆ†æå‹ç³»ç»Ÿçš„æ•°æ®åº“è®¾è®¡"><a href="#2-2-2-åˆ†æå‹ç³»ç»Ÿçš„æ•°æ®åº“è®¾è®¡" class="headerlink" title="2.2.2 åˆ†æå‹ç³»ç»Ÿçš„æ•°æ®åº“è®¾è®¡"></a>2.2.2 åˆ†æå‹ç³»ç»Ÿçš„æ•°æ®åº“è®¾è®¡</h5><p>åˆ†æå‹ç³»ç»Ÿçš„ç‰¹å¾æ˜¯ç›¸å¯¹å°‘é‡çš„äº‹åŠ¡ï¼Œä½†æŸ¥è¯¢é€šå¸¸éå¸¸å¤æ‚ä¸”ä¼šåŒ…å«èšåˆè®¡ç®—ã€‚ååé‡æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ€§èƒ½åº¦é‡æŒ‡æ ‡ã€‚</p>
<p>åœ¨æ•°æ®åº“<strong>é€»è¾‘è®¾è®¡</strong>ä¸Šï¼Œåˆ†æå‹æ•°æ®åº“ä½¿ç”¨å¤šç»´æ•°æ®æ¨¡å‹ï¼Œé€šå¸¸æ˜¯è®¾è®¡æˆ<span style="color:blue">æ˜Ÿå‹æ¨¡å¼</span>æˆ–<span style="color:blue">é›ªèŠ±æ¨¡å¼</span>ã€‚</p>
<p>åœ¨æ•°æ®åº“ç‰©ç†è®¾è®¡ä¸Šï¼Œä¾ç„¶ä»¥Oracleæ•°æ®åº“ä¸ºä¾‹ï¼Œç®€è¦è¯´æ˜åœ¨è®¾è®¡åˆ†æå‹ç³»ç»Ÿæ•°æ®åº“æ—¶åº”è¯¥è€ƒè™‘çš„ä¸€äº›é—®é¢˜ã€‚</p>
<ul>
<li>è¡¨åˆ†åŒºã€‚å¯ä»¥ç‹¬ç«‹å®šä¹‰è¡¨åˆ†åŒºçš„ç‰©ç†å­˜å‚¨å±æ€§ï¼Œå°†ä¸åŒåˆ†åŒºçš„æ•°æ®å­˜æ”¾åˆ°å¤šä¸ªç‰©ç†æ–‡ä»¶ä¸Šï¼Œè¿™æ ·åšä¸€æ–¹é¢å¯ä»¥åˆ†æ•£I/Oï¼›å¦ä¸€æ–¹é¢ï¼Œå½“æ•°æ®é‡éå¸¸å¤§æ—¶ï¼Œæ–¹ä¾¿æ•°æ®ç»´æŠ¤ï¼›å†æœ‰å°±æ˜¯åˆ©ç”¨åˆ†åŒºæ¶ˆé™¤æŸ¥è¯¢æ•°æ®æ—¶ï¼Œä¸ç”¨æ‰«ææ•´å¼ è¡¨ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</li>
<li>ä½å›¾ç´¢å¼•ã€‚å½“æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«ä½åŸºæ•°ï¼ˆä¸åŒå€¼å¾ˆå°‘ï¼Œä¾‹å¦‚æ€§åˆ«ï¼‰çš„åˆ—ï¼Œå°¤å…¶æ˜¯åŒ…å«æœ‰è¿™äº›åˆ—ä¸Šçš„orã€andæˆ–notè¿™æ ·çš„é€»è¾‘è¿ç®—æ—¶ï¼Œæˆ–è€…ä»æœ‰å¤§é‡è¡Œçš„è¡¨ä¸­è¿”å›å¤§é‡çš„è¡Œæ—¶ï¼Œåº”è€ƒè™‘ä½å›¾ç´¢å¼•ã€‚</li>
<li>ç‰©åŒ–è§†å›¾ã€‚ç‰©åŒ–è§†å›¾ç‰©ç†å­˜å‚¨æŸ¥è¯¢æ‰€å®šä¹‰çš„æ•°æ®ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å¢é‡åˆ·æ–°æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥åˆ©ç”¨æŸ¥è¯¢é‡å†™ç‰¹æ€§æå¤§åœ°æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚</li>
<li>å¹¶è¡ŒåŒ–æ“ä½œã€‚å¯ä»¥åœ¨æŸ¥è¯¢å¤§é‡æ•°æ®æ—¶æ‰§è¡Œå¹¶è¡ŒåŒ–æ“ä½œï¼Œè¿™æ ·ä¼šå¯¼è‡´å¤šä¸ªæœåŠ¡å™¨è¿›ç¨‹ä¸ºåŒä¸€ä¸ªæŸ¥è¯¢è¯­å¥å·¥ä½œï¼Œä½¿ç”¨è¯¥æŸ¥è¯¢å¯ä»¥å¿«é€Ÿå®Œæˆï¼Œä½†ä¼šè€—è´¹æ›´å¤šçš„èµ„æºã€‚</li>
</ul>
<blockquote>
<p>åˆ†æå‹ç³»ç»Ÿæ›´åŠ æ³¨é‡æ•°æ®åˆ†æå’ŒæŠ¥è¡¨ï¼Œè€Œæ“ä½œå‹ç³»ç»Ÿçš„ç›®æ ‡æ—¶ä¸€ä¸ªä¼´æœ‰å¤§é‡æ•°æ®æ”¹å˜çš„äº‹åŠ¡ä¼˜åŒ–ç³»ç»Ÿã€‚</p>
</blockquote>
<h3 id="3-æ•°æ®ä»“åº“æ¶æ„"><a href="#3-æ•°æ®ä»“åº“æ¶æ„" class="headerlink" title="3. æ•°æ®ä»“åº“æ¶æ„"></a>3. æ•°æ®ä»“åº“æ¶æ„</h3><h4 id="3-1-åŸºæœ¬æ¶æ„"><a href="#3-1-åŸºæœ¬æ¶æ„" class="headerlink" title="3.1 åŸºæœ¬æ¶æ„"></a>3.1 åŸºæœ¬æ¶æ„</h4><p><img src="/2020/10/27/æ•°æ®ä»“åº“ç®€ä»‹/1603782098335.png" alt="1603782098335"></p>
<p>æ•´ä¸ªæ•°æ®ä»“åº“ç¯å¢ƒåŒ…æ‹¬æ“ä½œå‹ç³»ç»Ÿå’Œæ•°æ®ä»“åº“ç³»ç»Ÿä¸¤å¤§éƒ¨åˆ†ã€‚æ“ä½œå‹ç³»ç»Ÿçš„æ•°æ®ç”±å„ç§å½¢å¼çš„ä¸šåŠ¡æ•°æ®ç»„æˆï¼ˆæ•°æ®å¯èƒ½æ˜¯ç»“æ„åŒ–ã€åŠç»“æ„åŒ–ã€éç»“æ„åŒ–çš„ï¼‰ã€‚<span style="color:red">è¿™äº›æ•°æ®ç»è¿‡æŠ½å–ã€è½¬æ¢å’Œè£…è½½ï¼ˆETLï¼‰è¿‡ç¨‹è¿›å…¥æ•°æ®ä»“åº“ç³»ç»Ÿã€‚</span></p>
<p>è¿™é‡ŒæŠŠETLè¿‡ç¨‹åˆ†æˆäº†æŠ½å–å’Œè½¬æ¢è£…è½½ä¸¤ä¸ªéƒ¨åˆ†ã€‚<strong>æŠ½å–</strong>è¿‡ç¨‹è´Ÿè´£ä»æ“ä½œå‹ç³»ç»Ÿè·å–æ•°æ®ï¼Œè¯¥è¿‡ç¨‹ä¸€èˆ¬ä¸åšæ•°æ®èšåˆå’Œæ±‡æ€»ï¼Œä½†æ˜¯ä¼šæŒ‰ç…§ä¸»é¢˜è¿›è¡Œé›†æˆï¼Œç‰©ç†ä¸Šæ˜¯å°†æ“ä½œå‹ç³»ç»Ÿçš„æ•°æ®å…¨é‡æˆ–å¢é‡å¤åˆ¶åˆ°æ•°æ®ä»“åº“ç³»ç»Ÿçš„RDSä¸­ã€‚</p>
<blockquote>
<p>æŠ½å–è¿‡ç¨‹æŒ‡çš„æ˜¯æŠŠæ•°æ®ä»æ“ä½œå‹æ•°æ®æºæŠ½å–åˆ°RDSçš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šæœ‰ä¸€äº›æ•°æ®é›†æˆçš„æ“ä½œï¼Œä½†ä¸ä¼šåšæ•°æ®è½¬æ¢ã€æ¸…æ´—ã€æ ¼å¼åŒ–ç­‰å·¥ä½œã€‚<br>Hadoopç”Ÿæ€åœˆä¸­çš„ä¸»è¦æ•°æ®æºæŠ½å–å·¥å…·æ˜¯ <strong>Sqoop</strong> å’Œ <strong>Flume</strong>ã€‚Sqoopè¢«è®¾è®¡æˆæ”¯æŒåœ¨å…³ç³»æ•°æ®åº“å’Œ Hadoop ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œè€Œ Flume è¢«è®¾è®¡æˆåŸºäºæµçš„æ•°æ®æ•è·ï¼Œä¸»è¦æ˜¯ä»æ—¥å¿—æ–‡ä»¶ä¸­è·å–æ•°æ®ã€‚ä½¿ç”¨è¿™ä¸¤ä¸ªå·¥å…·å¯ä»¥å®Œæˆæ•°æ®ä»“åº“çš„æŠ½å–ã€‚<br>å¦‚æœæ•°æ®æºæ˜¯æ™®é€šçš„æ–‡æœ¬å’ŒCSVæ–‡ä»¶ï¼ŒæŠ½å–è¿‡ç¨‹å°†æ›´åŠ ç®€å•ï¼Œåªéœ€ç”¨æ“ä½œç³»ç»Ÿçš„<code>scp</code>æˆ–<code>ftp</code>å‘½ä»¤å°†æ–‡ä»¶æ‹‰å–åˆ°Hadoopé›†ç¾¤çš„ä»»ä¸€èŠ‚ç‚¹ï¼Œç„¶åä½¿ç”¨HDFSçš„<code>put</code>å‘½ä»¤å°†å·²åœ¨æœ¬åœ°çš„æ–‡ä»¶ä¸Šä¼ åˆ°HDFSï¼Œæˆ–è€…ä½¿ç”¨Hiveçš„<code>load data</code>å°†æ–‡ä»¶è£…è½½è¿›è¡¨é‡Œå°±å¯ä»¥äº†ã€‚</p>
</blockquote>
<p><strong>è½¬æ¢è£…è½½</strong>è¿‡ç¨‹å°†æ•°æ®è¿›è¡Œæ¸…æ´—ã€è¿‡æ»¤ã€æ±‡æ€»ã€ç»Ÿä¸€æ ¼å¼åŒ–ç­‰ä¸€ç³»åˆ—è½¬æ¢æ“ä½œåï¼Œä½¿æ•°æ®è½¬æ¢ä¸ºé€‚åˆæŸ¥è¯¢çš„æ ¼å¼ï¼Œç„¶åè£…è½½è¿›æ•°æ®ä»“åº“ç³»ç»Ÿçš„TDSä¸­ã€‚</p>
<blockquote>
<p>è½¬æ¢ä¸è£…è½½è¿‡ç¨‹æ˜¯å°†æ•°æ®ä»RDSè¿ç§»åˆ°TDSçš„è¿‡ç¨‹ï¼ŒæœŸé—´ä¼šå¯¹æ•°æ®è¿›è¡Œä¸€ç³»åˆ—çš„è½¬æ¢å’Œå¤„ç†ã€‚ç»è¿‡äº†æ•°æ®æŠ½å–æ­¥éª¤ï¼Œæ­¤æ—¶æ•°æ®å·²ç»åœ¨Hiveè¡¨ä¸­äº†ï¼Œå› æ­¤<strong>Hive</strong>å¯ä»¥ç”¨äºè½¬æ¢å’Œè£…è½½ã€‚<br>Hiveå®é™…ä¸Šæ˜¯åœ¨MapReduceä¹‹ä¸Šå°è£…äº†ä¸€å±‚SQLè§£é‡Šå™¨ï¼Œè¿™æ ·å¯ä»¥ç”¨ç±»SQLè¯­è¨€ä¹¦å†™å¤æ‚çš„MapReduceä½œä¸šã€‚Hiveä¸ä½†æä¾›äº†ä¸°å¯Œçš„æ•°æ®æŸ¥è¯¢åŠŸèƒ½å’Œåˆ†æå‡½æ•°ï¼Œè¿˜å¯ä»¥åœ¨æŸäº›é™åˆ¶ä¸‹è¿›è¡Œæ•°æ®çš„æ›´æ–°ï¼Œå› æ­¤æ”¯æŒSCD1(æ¸å˜ç»´çš„ä¸€ç§å¤„ç†ç±»å‹)ã€‚</p>
</blockquote>
<p>ï¼ˆå…³äºETLçš„æ›´è¯¦ç»†å†…å®¹è§ <a href="#jump4">4. æŠ½å–-è½¬æ¢-è£…è½½ï¼ˆETLï¼‰</a>ï¼‰</p>
<p><strong><span id="jump_RDS">RDS</span></strong> (RAW DATA STORES) æ˜¯åŸå§‹æ•°æ®å­˜å‚¨çš„æ„æ€ã€‚å°†åŸå§‹æ•°æ®ä¿å­˜åˆ°æ•°æ®ä»“åº“æ˜¯ä¸ªä¸é”™çš„æƒ³æ³•ã€‚ETLè¿‡ç¨‹çš„bugæˆ–ç³»ç»Ÿä¸­çš„å…¶ä»–é”™è¯¯æ˜¯ä¸å¯é¿å…çš„ï¼Œä¿ç•™åŸå§‹æ•°æ®ä½¿å¾—è¿½è¸ªå¹¶ä¿®æ”¹è¿™äº›é”™è¯¯æˆä¸ºå¯èƒ½ã€‚æœ‰æ—¶æ•°æ®ä»“åº“çš„ç”¨æˆ·ä¼šæœ‰æŸ¥è¯¢ç»†èŠ‚æ•°æ®çš„éœ€æ±‚ï¼Œè¿™äº›ç»†èŠ‚æ•°æ®çš„ç²’åº¦ä¸æ“ä½œå‹ç³»ç»Ÿçš„ç›¸åŒã€‚æœ‰äº†RDSï¼Œè¿™ç§éœ€æ±‚å¾ˆå®¹æ˜“å®ç°ï¼Œç”¨æˆ·å¯ä»¥æŸ¥è¯¢RDSé‡Œçš„æ•°æ®è€Œä¸å¿…å½±å“ä¸šåŠ¡ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚è¿™é‡Œçš„RDSå®é™…ä¸Šæ˜¯èµ·åˆ°äº†æ“ä½œå‹æ•°æ®å­˜å‚¨ï¼ˆ<a href="#jump_ODS">ODS</a>ï¼‰çš„ä½œç”¨ã€‚</p>
<blockquote>
<p>RDS æ˜¯åŸå§‹æ•°æ®å­˜å‚¨ï¼Œå…¶æ•°æ®æ˜¯ä»æ“ä½œå‹ç³»ç»ŸæŠ½å–è€Œæ¥ã€‚å®ƒæœ‰ä¸¤ä¸ªä½œç”¨ï¼Œä¸€æ˜¯å……å½“æ“ä½œå‹ç³»ç»Ÿå’Œæ•°æ®ä»“åº“ä¹‹é—´çš„è¿‡æ¸¡åŒºï¼ŒäºŒæ˜¯ä½œä¸ºç»†èŠ‚æ•°æ®æŸ¥è¯¢çš„æ•°æ®æºã€‚</p>
</blockquote>
<p><strong><span id="jump_TDS">TDS</span></strong> (TRANSFORMED DATA STORES) æ„ä¸ºè½¬æ¢åçš„æ•°æ®å­˜å‚¨ã€‚è¿™æ˜¯çœŸæ­£çš„æ•°æ®ä»“åº“ä¸­çš„æ•°æ®ã€‚å¤§é‡çš„ç”¨æˆ·ä¼šåœ¨ç»è¿‡è½¬æ¢çš„æ•°æ®é›†ä¸Šå¤„ç†ä»–ä»¬çš„æ—¥å¸¸æŸ¥è¯¢ã€‚è¿™äº›æ•°æ®å°†è¢«ä»¥ä¿è¯æœ€é‡è¦çš„å’Œæœ€é¢‘ç¹çš„æŸ¥è¯¢èƒ½å¤Ÿå¿«é€Ÿæ‰§è¡Œçš„æ–¹å¼æ„å»ºã€‚</p>
<blockquote>
<p>TDS æ˜¯è½¬æ¢åçš„æ•°æ®å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯æ•°æ®ä»“åº“ï¼Œç”¨äºåç»­çš„å¤šç»´åˆ†ææˆ–å³å¸­æŸ¥è¯¢ã€‚</p>
</blockquote>
<p><strong>è‡ªåŠ¨åŒ–è°ƒåº¦</strong>ç»„ä»¶çš„ä½œç”¨æ˜¯è‡ªåŠ¨å®šæœŸé‡å¤æ‰§è¡ŒETLè¿‡ç¨‹ã€‚</p>
<blockquote>
<p>ETLè¿‡ç¨‹è‡ªåŠ¨åŒ–æ˜¯æ•°æ®ä»“åº“æˆåŠŸçš„é‡è¦è¡¡é‡æ ‡å‡†ï¼Œä¹Ÿæ˜¯ç³»ç»Ÿæ˜“ç”¨æ€§çš„å…³é”®ã€‚<br>Hadoopç”Ÿæ€åœˆä¸­çš„ä¸»è¦ç®¡ç†å·¥å…·æ˜¯ <strong>Falcon</strong>ã€‚FalconæŠŠè‡ªå·±çœ‹ä½œæ˜¯æ•°æ®æ²»ç†å·¥å…·ï¼Œèƒ½è®©ç”¨æˆ·å»ºç«‹å®šä¹‰å¥½çš„ETLæµæ°´çº¿ã€‚è¿˜æœ‰ä¸€ä¸ªå«åš <strong>Oozie</strong> çš„å·¥å…·ï¼Œå®ƒæ˜¯ä¸€ä¸ªHadoopçš„å·¥ä½œæµç¨‹è°ƒåº¦ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨å®ƒå°†ETLè¿‡ç¨‹å°è£…è¿›å·¥ä½œæµè‡ªåŠ¨æ‰§è¡Œã€‚</p>
</blockquote>
<p><strong>æ•°æ®ç›®å½•</strong>æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºå…ƒæ•°æ®å­˜å‚¨ï¼Œå®ƒå­˜å‚¨çš„æ˜¯æ•°æ®ä»“åº“çš„å…ƒæ•°æ®ï¼Œå¯ä»¥æä¾›ä¸€ä»½æ•°æ®ä»“åº“ä¸­æ•°æ®çš„æ¸…å•ï¼Œä¸»è¦æ˜¯æè¿°æ•°æ®å±æ€§çš„ä¿¡æ¯ï¼Œç”¨æ¥æ”¯æŒå¦‚æŒ‡ç¤ºå­˜å‚¨ä½ç½®ã€å†å²æ•°æ®ã€èµ„æºæŸ¥æ‰¾ã€æ–‡ä»¶è®°å½•ç­‰åŠŸèƒ½ã€‚ç”¨æˆ·é€šè¿‡å®ƒåº”è¯¥å¯ä»¥å¿«é€Ÿè§£å†³è¿™äº›é—®é¢˜ï¼šä»€ä¹ˆç±»å‹çš„æ•°æ®è¢«å­˜å‚¨åœ¨å“ªé‡Œï¼Œæ•°æ®é›†çš„æ„å»ºæœ‰ä½•åŒºåˆ«ï¼Œæ•°æ®æœ€åçš„è®¿é—®æˆ–æ›´æ–°æ—¶é—´ç­‰ã€‚</p>
<blockquote>
<p>Hadoop ç”Ÿæ€åœˆä¸­ä¸»è¦çš„æ•°æ®ç›®å½•å·¥å…·æ˜¯ <strong>HCatalog</strong>ã€‚HCatalog æ˜¯ Hadoop ä¸Šçš„ä¸€ä¸ªè¡¨å’Œå­˜å‚¨ç®¡ç†å±‚ã€‚ä½¿ç”¨ä¸åŒçš„æ•°æ®å¤„ç†å·¥å…·ï¼ˆå¦‚ Pigã€MapReduceï¼‰çš„ç”¨æˆ·ï¼Œé€šè¿‡ HCatalog å¯ä»¥æ›´åŠ å®¹æ˜“åœ°è¯»å†™é›†ç¾¤ä¸­çš„æ•°æ®ã€‚HCatalog å¼•å…¥â€è¡¨â€œçš„æŠ½è±¡ï¼ŒæŠŠæ–‡ä»¶çœ‹ä½œæ•°æ®é›†ã€‚å®ƒå±•ç°ç»™ç”¨æˆ·çš„æ˜¯ä¸€ä¸ª HDFS ä¸Šæ•°æ®çš„å…³ç³»è§†å›¾ï¼Œè¿™æ ·ç”¨æˆ·ä¸å¿…å…³å¿ƒæ•°æ®å­˜æ”¾åœ¨å“ªé‡Œæˆ–è€…æ•°æ®æ ¼å¼æ˜¯ä»€ä¹ˆç­‰é—®é¢˜ï¼Œå°±å¯ä»¥è½»æ¾çŸ¥é“ç³»ç»Ÿä¸­æœ‰å“ªäº›è¡¨ï¼Œè¡¨ä¸­éƒ½åŒ…å«ä»€ä¹ˆã€‚<br>HCatalog é»˜è®¤æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼çš„è¯»å†™ï¼Œå¦‚ RCFileã€SequenceFileã€ORC filesã€text filesã€CSVã€JSONç­‰ã€‚</p>
</blockquote>
<p><strong>æŸ¥è¯¢å¼•æ“</strong>ç»„ä»¶è´Ÿè´£å®é™…æ‰§è¡Œç”¨æˆ·æŸ¥è¯¢ã€‚</p>
<blockquote>
<p>ç”±äºæœ€ç»ˆç”¨æˆ·ç»å¸¸éœ€è¦è¿›è¡Œäº¤äº’å¼çš„å³å¸­æŸ¥è¯¢ï¼Œå¹¶éšæ—¶åŠ¨æ€æ”¹å˜å’Œç»„åˆä»–ä»¬çš„æŸ¥è¯¢æ¡ä»¶ï¼Œå› æ­¤è¦æ±‚æŸ¥è¯¢å¼•æ“å…·æœ‰å¾ˆé«˜çš„æŸ¥è¯¢æ€§èƒ½å’Œè¾ƒçŸ­çš„å“åº”æ—¶é—´ã€‚<br>Hadoopç”Ÿæ€åœˆä¸­çš„ä¸»è¦SQLæŸ¥è¯¢å¼•æ“æœ‰åŸºäº MapReduce çš„ <strong>Hive</strong>ã€åŸºäº RDD çš„ <strong>SparkSQL</strong> å’Œ Cloudera å…¬å¸çš„ <strong>Impala</strong>ã€‚<br>Hiveå¯ä»¥åœ¨å››ç§ä¸»æµè®¡ç®—æ¡†æ¶çš„ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ Tezã€MapReduce å’Œ Sparkï¼ˆè¿˜æœ‰ä¸€ç§æ˜¯Stormï¼‰ä¸Šæ‰§è¡Œç±»SQLæŸ¥è¯¢ã€‚<br>SparkSQLæ˜¯Hadoopä¸­å¦ä¸€ä¸ªè‘—åçš„SQLå¼•æ“ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªScalaç¨‹åºè¯­è¨€çš„å­é›†ã€‚æ­£å¦‚SparkSQLè¿™ä¸ªåå­—æ‰€æš—ç¤ºçš„ï¼Œå®ƒä»¥ Spark ä½œä¸ºåº•å±‚çš„è®¡ç®—æ¡†æ¶ã€‚<br>Impala æ˜¯ Cloudera å…¬å¸çš„æŸ¥è¯¢ç³»ç»Ÿï¼Œå®ƒæä¾› SQL è¯­è¨€ï¼Œæœ€å¤§çš„ç‰¹ç‚¹æ˜¯é€Ÿåº¦å¿«ï¼Œä¸»è¦ç”¨äº OLAPã€‚</p>
</blockquote>
<p><strong>ç”¨æˆ·ç•Œé¢</strong>æŒ‡çš„æ˜¯æœ€ç»ˆç”¨æˆ·æ‰€ä½¿ç”¨çš„æ¥å£ç¨‹åºã€‚å¯èƒ½æ˜¯ä¸€ä¸ªGUIè½¯ä»¶ï¼Œå¦‚BIå¥—ä»¶ä¸­çš„å®¢æˆ·ç«¯è½¯ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªæµè§ˆå™¨ã€‚</p>
<blockquote>
<p>æ•°æ®åˆ†æçš„ç»“æœæœ€ç»ˆè¦ä»¥ä¸šåŠ¡è¯­è¨€å’Œå½¢è±¡åŒ–çš„æ–¹å¼å±•ç°ç»™ç”¨æˆ·ã€‚æ•°æ®ä»“åº“çš„æœ€ç»ˆç”¨æˆ·ç•Œé¢é€šå¸¸æ˜¯ä¸€ä¸ªBIä»ªè¡¨ç›˜æˆ–ç±»ä¼¼çš„ä¸€ä¸ªæ•°æ®å¯è§†åŒ–å·¥å…·æä¾›çš„æµè§ˆå™¨é¡µé¢ã€‚<br>Hadoop ç”Ÿæ€åœˆä¸­æ¯”è¾ƒçŸ¥åçš„æ•°æ®å¯è§†åŒ–å·¥å…·æ˜¯ <strong>Hue</strong> å’Œ <strong>Zeppelin</strong>ã€‚<br>Hue æ˜¯ä¸€ä¸ªå¼€æºçš„ Hadoop UI ç³»ç»Ÿï¼Œæœ€æ—©æ˜¯ç”± Cloudera Desktop æ¼”åŒ–è€Œæ¥ï¼Œå®ƒæ˜¯åŸºäº Python Web æ¡†æ¶ Django å®ç°çš„ã€‚é€šè¿‡ä½¿ç”¨ Hue æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ç«¯çš„ Web æ§åˆ¶å°ä¸Šä¸ Hadoop é›†ç¾¤è¿›è¡Œäº¤äº’æ¥åˆ†æå¤„ç†æ•°æ®ï¼Œè¿˜å¯ä»¥ç”¨å›¾å½¢åŒ–çš„æ–¹å¼å®šä¹‰å·¥ä½œæµã€‚Hue é»˜è®¤æ”¯æŒçš„æ•°æ®æºæœ‰ Hive å’Œ Impalaã€‚<br>Zeppelin æä¾›äº† Web ç‰ˆçš„ notebookï¼Œç”¨äºåšæ•°æ®åˆ†æå’Œå¯è§†åŒ–ã€‚Zeppelin é»˜è®¤åªæ”¯æŒ SparkSQLã€‚</p>
</blockquote>
<p><span style="color:blue">å¯ä»¥çœ‹åˆ°ï¼Œæ™®é€šæ•°æ®ä»“åº“çš„8ä¸ªç»„æˆéƒ¨åˆ†éƒ½æœ‰ç›¸å¯¹åº”çš„ Hadoop ç»„ä»¶ä½œä¸ºæ”¯æ’‘ã€‚Hadoop ç”Ÿæ€åœˆä¸­ä¼—å¤šæ›´å…·æä¾›çš„åŠŸèƒ½ï¼Œå®Œå…¨å¯ä»¥æ»¡è¶³åˆ›å»ºä¼ ç»Ÿæ•°æ®ä»“åº“çš„éœ€è¦ã€‚ä½¿ç”¨ Hadoop å»ºç«‹æ•°æ®ä»“åº“ä¸ä»…æ˜¯å¿…è¦ï¼Œè€Œä¸”æ˜¯å……åˆ†çš„ã€‚</span></p>
<h4 id="3-2-æ“ä½œæ•°æ®å­˜å‚¨ï¼ˆODSï¼‰"><a href="#3-2-æ“ä½œæ•°æ®å­˜å‚¨ï¼ˆODSï¼‰" class="headerlink" title="3.2 æ“ä½œæ•°æ®å­˜å‚¨ï¼ˆODSï¼‰"></a><span id="jump_ODS">3.2 æ“ä½œæ•°æ®å­˜å‚¨ï¼ˆODSï¼‰</span></h4><p>æ“ä½œæ•°æ®å­˜å‚¨åˆç§°ä¸ºODS (Operational Data Sore)ï¼Œå®šä¹‰ï¼šä¸€ä¸ª<strong><span style="color:red">é¢å‘ä¸»é¢˜çš„ã€é›†æˆçš„ã€å¯å˜çš„ã€å½“å‰çš„</span></strong>ç»†èŠ‚æ•°æ®é›†åˆï¼Œç”¨äºæ”¯æŒä¼ä¸šå¯¹äºå³æ—¶æ€§çš„ã€æ“ä½œæ€§çš„ã€é›†æˆçš„å…¨ä½“ä¿¡æ¯çš„éœ€æ±‚ã€‚ODSåœ¨æŸäº›æ–¹é¢å…·æœ‰ç±»ä¼¼äºæ•°æ®ä»“åº“çš„ç‰¹ç‚¹ï¼Œåœ¨å¦ä¸€äº›æ–¹é¢åˆæ˜¾è‘—ä¸åŒã€‚</p>
<ul>
<li>åƒæ•°æ®ä»“åº“ä¸€æ ·ï¼Œæ˜¯é¢å‘ä¸»é¢˜çš„</li>
<li>åƒæ•°æ®ä»“åº“ä¸€æ ·ï¼Œå…¶æ•°æ®æ˜¯å®Œå…¨é›†æˆçš„</li>
<li>æ•°æ®æ˜¯å½“å‰çš„ï¼Œè¿™ä¸æ•°æ®ä»“åº“å­˜å‚¨å†å²æ•°æ®çš„æ€§è´¨æ˜æ˜¾ä¸åŒã€‚ODSå…·æœ‰æœ€å°‘çš„å†å²æ•°æ®ï¼ˆä¸€èˆ¬æ˜¯30å¤©åˆ°60å¤©ï¼‰ï¼Œè€Œå°½å¯èƒ½æ¥è¿‘å®æ—¶åœ°å±•ç¤ºæ•°æ®çš„çŠ¶æ€ã€‚</li>
<li>æ•°æ®æ˜¯å¯æ›´æ–°çš„ï¼ŒODSå°±å¦‚åŒä¸€ä¸ªäº‹åŠ¡å¤„ç†ç³»ç»Ÿï¼Œå½“æ–°çš„æ•°æ®æµè¿›ODSæ—¶ï¼Œå—å…¶å½±å“çš„å­—æ®µè¢«æ–°ä¿¡æ¯è¦†ç›–ã€‚</li>
<li>æ•°æ®å‡ ä¹å®Œå…¨æ˜¯ç»†èŠ‚æ•°æ®ï¼Œä»…å…·æœ‰å°‘é‡çš„åŠ¨æ€èšé›†æˆ–æ±‡æ€»æ•°æ®ã€‚é€šå¸¸å°†ODSè®¾è®¡æˆåŒ…å«äº‹åŠ¡çº§çš„æ•°æ®ï¼Œå³åŒ…å«è¯¥ä¸»é¢˜åŸŸä¸­æœ€ä½ç²’åº¦çº§åˆ«çš„æ•°æ®ã€‚</li>
<li>åœ¨æ•°æ®ä»“åº“ä¸­ï¼Œå‡ ä¹æ²¡æœ‰é’ˆå¯¹å…¶æœ¬èº«çš„æŠ¥è¡¨ï¼ŒæŠ¥è¡¨å‡æ”¾åˆ°æ•°æ®çº§å¸‚ä¸­å®Œæˆï¼›åœ¨ODSä¸­ï¼Œä¸šåŠ¡ç”¨æˆ·é¢‘ç¹åœ°ç›´æ¥è®¿é—®ODSã€‚</li>
</ul>
<p>åœ¨ä¸€ä¸ªæ•°æ®ä»“åº“ç¯å¢ƒä¸­ï¼ŒODSå…·æœ‰å¦‚ä¸‹å‡ ä¸ªä½œç”¨ï¼š</p>
<ul>
<li>å……å½“ä¸šåŠ¡ç³»ç»Ÿä¸æ•°æ®ä»“åº“ä¹‹é—´çš„è¿‡æ¸¡åŒºã€‚ODSä¸­å­˜æ”¾çš„æ•°æ®ä»æ•°æ®ç»“æ„ã€æ•°æ®ç²’åº¦ã€æ•°æ®ä¹‹é—´çš„é€»è¾‘å…³ç³»ä¸Šéƒ½ä¸ä¸šåŠ¡ç³»ç»ŸåŸºæœ¬ä¿æŒä¸€è‡´ï¼Œå› æ­¤æŠ½å–è¿‡ç¨‹åªéœ€ç®€å•çš„æ•°æ®å¤åˆ¶è€ŒåŸºæœ¬ä¸å†éœ€è¦åšæ•°æ®è½¬æ¢ï¼Œå¤§å¤§é™ä½äº†å¤æ‚æ€§ï¼ŒåŒæ—¶æœ€å°åŒ–å¯¹ä¸šåŠ¡ç³»ç»Ÿçš„ä¾µå…¥ã€‚</li>
<li>è½¬ç§»éƒ¨åˆ†ä¸šåŠ¡ç³»ç»Ÿç»†èŠ‚æŸ¥è¯¢çš„åŠŸèƒ½ã€‚æŸäº›åŸæ¥ç”±ä¸šåŠ¡ç³»ç»Ÿäº§ç”Ÿçš„æŠ¥è¡¨ã€ç»†èŠ‚æ•°æ®çš„æŸ¥è¯¢èƒ½å¤Ÿåœ¨ODSä¸­è¿›è¡Œï¼Œä»è€Œé™ä½ä¸šåŠ¡ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚</li>
<li>å®Œæˆæ•°æ®ä»“åº“ä¸­ä¸èƒ½å®Œæˆçš„ä¸€äº›åŠŸèƒ½ã€‚ç”¨æˆ·æœ‰æ—¶ä¼šè¦æ±‚æ•°æ®ä»“åº“æŸ¥è¯¢æœ€ä½ç²’åº¦çº§åˆ«çš„ç»†èŠ‚æ•°æ®ï¼Œè€Œæ•°æ®ä»“åº“ä¸­å­˜å‚¨çš„ä¸€èˆ¬æ˜¯èšåˆæˆ–æ±‡æ€»è¿‡çš„æ•°æ®ï¼Œå¹¶ä¸å­˜å‚¨æ¯ç¬”äº¤æ˜“äº§ç”Ÿçš„ç»†èŠ‚æ•°æ®ï¼Œè¿™æ—¶å°±éœ€è¦è½¬ç§»åˆ°ODSæ¥å®Œæˆï¼Œè€Œä¸”ODSçš„æ•°æ®æ¨¡å‹æ˜¯æŒ‰ç…§é¢å‘ä¸»é¢˜çš„æ–¹å¼ç»„ç»‡çš„ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æ”¯æŒå¤šç»´åˆ†æã€‚</li>
</ul>
<h3 id="4-æŠ½å–-è½¬æ¢-è£…è½½ï¼ˆETLï¼‰"><a href="#4-æŠ½å–-è½¬æ¢-è£…è½½ï¼ˆETLï¼‰" class="headerlink" title="4. æŠ½å–-è½¬æ¢-è£…è½½ï¼ˆETLï¼‰"></a><span id="jump4">4. æŠ½å–-è½¬æ¢-è£…è½½ï¼ˆETLï¼‰</span></h3><p>ETLï¼ˆExtractã€Transformã€Loadï¼‰æ˜¯å»ºç«‹æ•°æ®ä»“åº“æœ€é‡è¦çš„å¤„ç†è¿‡ç¨‹ã€‚</p>
<ul>
<li>æŠ½å–ï¼šä»æ“ä½œå‹æ•°æ®æºè·å–æ•°æ®ã€‚</li>
<li>è½¬æ¢ï¼šè½¬æ¢æ•°æ®ï¼Œä½¿ä¹‹è½¬å˜ä¸ºé€‚ç”¨äºæŸ¥è¯¢å’Œåˆ†æçš„å½¢å¼å’Œç»“æ„ã€‚</li>
<li>è£…è½½ï¼šå°†è½¬æ¢åçš„æ•°æ®å¯¼å…¥é“æœ€ç»ˆçš„ç›®æ ‡æ•°æ®ä»“åº“ã€‚</li>
</ul>
<p>å»ºç«‹ä¸€ä¸ªæ•°æ®ä»“åº“å°±æ˜¯è¦æŠŠæ¥è‡ªäºå¤šä¸ªå¼‚æ„çš„æºç³»ç»Ÿçš„æ•°æ®é›†æˆåœ¨ä¸€èµ·ï¼Œæ”¾ç½®äºä¸€ä¸ªé›†ä¸­çš„ä½ç½®ç”¨äºæ•°æ®åˆ†æã€‚ETLç³»ç»Ÿçš„å·¥ä½œå°±æ˜¯æŠŠå¼‚æ„çš„æ•°æ®è½¬æ¢æˆåŒæ„çš„ã€‚</p>
<h4 id="4-1-æ•°æ®æŠ½å–"><a href="#4-1-æ•°æ®æŠ½å–" class="headerlink" title="4.1 æ•°æ®æŠ½å–"></a>4.1 æ•°æ®æŠ½å–</h4><p>è®¾è®¡å’Œå»ºç«‹æ•°æ®æŠ½å–è¿‡ç¨‹ï¼Œåœ¨ETLå¤„ç†ä¹ƒè‡³æ•´ä¸ªæ•°æ®ä»“åº“å¤„ç†è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬æ˜¯è¾ƒä¸ºè€—æ—¶çš„ä»»åŠ¡ã€‚éœ€è¦å†³å®šæŠ½å–å“ªäº›æ•°æ®ã€‚é€šå¸¸æ•°æ®éƒ½ä¸æ˜¯åªæŠ½å–ä¸€æ¬¡ï¼Œè€Œæ˜¯éœ€è¦ä»¥ä¸€å®šçš„æ—¶é—´é—´éš”åå¤æŠ½å–ã€‚å¯¹æŠ½å–æ–¹æ³•çš„é€‰æ‹©é«˜åº¦ä¾èµ–äºæºç³»ç»Ÿå’Œç›®æ ‡æ•°æ®ä»“åº“ç¯å¢ƒçš„ä¸šåŠ¡éœ€è¦ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸å¯èƒ½å› ä¸ºéœ€è¦æå‡æ•°æ®æŠ½å–çš„æ€§èƒ½ï¼Œè€Œåœ¨æºç³»ç»Ÿä¸­æ·»åŠ é¢å¤–çš„é€»è¾‘ï¼Œä¹Ÿä¸èƒ½å¢åŠ è¿™äº›æºç³»ç»Ÿçš„å·¥ä½œè´Ÿè½½ã€‚</p>
<h5 id="4-1-1-é€»è¾‘æŠ½å–"><a href="#4-1-1-é€»è¾‘æŠ½å–" class="headerlink" title="4.1.1 é€»è¾‘æŠ½å–"></a>4.1.1 é€»è¾‘æŠ½å–</h5><p>ä¸¤ç§é€»è¾‘æŠ½å–ç±»å‹ï¼š<span style="color:red">å…¨é‡æŠ½å–</span>å’Œ<span style="color:red">å¢é‡æŠ½å–</span>ã€‚</p>
<h6 id="ï¼ˆ1ï¼‰å…¨é‡æŠ½å–"><a href="#ï¼ˆ1ï¼‰å…¨é‡æŠ½å–" class="headerlink" title="ï¼ˆ1ï¼‰å…¨é‡æŠ½å–"></a>ï¼ˆ1ï¼‰å…¨é‡æŠ½å–</h6><p>æºç³»ç»Ÿçš„æ•°æ®å…¨éƒ¨è¢«æŠ½å–ã€‚å› ä¸ºè¿™ç§æŠ½å–ç±»å‹å½±å“æºç³»ç»Ÿä¸Šå½“å‰æ‰€æœ‰æœ‰æ•ˆçš„æ•°æ®ï¼Œæ‰€ä»¥ä¸éœ€è¦è·Ÿè¸ªè‡ªä¸Šæ¬¡æˆåŠŸæŠ½å–ä»¥æ¥çš„æ•°æ®å˜åŒ–ã€‚æºç³»ç»Ÿåªéœ€è¦åŸæ ·æä¾›ç°æœ‰çš„æ•°æ®è€Œä¸éœ€è¦ä¸ºé™„åŠ çš„é€»è¾‘ä¿¡æ¯ï¼ˆæ¯”å¦‚æ—¶é—´æˆ³ç­‰ï¼‰ã€‚ä¸€ä¸ªå…¨è¡¨å¯¼å‡ºçš„æ•°æ®æ–‡ä»¶æˆ–è€…ä¸€ä¸ªæŸ¥è¯¢æºè¡¨æ‰€æœ‰æ•°æ®çš„SQLè¯­å¥ï¼Œéƒ½æ˜¯å…¨é‡æŠ½å–çš„ä¾‹å­ã€‚</p>
<h6 id="ï¼ˆ2ï¼‰å¢é‡æŠ½å–"><a href="#ï¼ˆ2ï¼‰å¢é‡æŠ½å–" class="headerlink" title="ï¼ˆ2ï¼‰å¢é‡æŠ½å–"></a>ï¼ˆ2ï¼‰å¢é‡æŠ½å–</h6><p>åªæŠ½å–æŸä¸ªäº‹ä»¶å‘ç”Ÿçš„ç‰¹å®šæ—¶é—´ç‚¹ä¹‹åçš„æ•°æ®ã€‚é€šè¿‡è¯¥äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´é¡ºåºèƒ½å¤Ÿåæ˜ æ•°æ®çš„å†å²å˜åŒ–ï¼Œå®ƒå¯èƒ½æ˜¯æœ€åä¸€æ¬¡æˆåŠŸæŠ½å–ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªå¤æ‚çš„ä¸šåŠ¡äº‹ä»¶ï¼Œå¦‚æœ€åä¸€æ¬¡è´¢åŠ¡ç»“ç®—ç­‰ã€‚å¿…é¡»èƒ½å¤Ÿæ ‡è¯†å‡ºç‰¹å®šæ—¶é—´ç‚¹ä¹‹åæ‰€æœ‰çš„æ•°æ®å˜åŒ–ã€‚è¿™äº›å‘ç”Ÿå˜åŒ–çš„æ•°æ®å¯ä»¥ç”±æºç³»ç»Ÿè‡ªèº«æ¥æä¾›ï¼Œä¾‹å¦‚èƒ½å¤Ÿåæ˜ æ•°æ®æœ€åå‘ç”Ÿå˜åŒ–çš„æ—¶é—´æˆ³åˆ—ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªåŸå§‹äº‹åŠ¡å¤„ç†ä¹‹å¤–çš„ï¼Œåªç”¨äºè·Ÿè¸ªæ•°æ®å˜åŒ–çš„å˜æ›´æ—¥å¿—è¡¨ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨åè€…æ„å‘³ç€éœ€è¦åœ¨æºç³»ç»Ÿä¸Šå¢åŠ æŠ½å–é€»è¾‘ã€‚</p>
<p>åœ¨è®¸å¤šæ•°æ®ä»“åº“ä¸­ï¼ŒæŠ½å–è¿‡ç¨‹ä¸å«ä»»ä½•å˜åŒ–æ•°æ®æ•è·æŠ€æœ¯ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼ŒæŠŠæºç³»ç»Ÿä¸­çš„æ•´ä¸ªè¡¨æŠ½å–åˆ°æ•°æ®ä»“åè¿‡æ¸¡åŒºï¼Œç„¶åç”¨è¿™ä¸ªè¡¨çš„æ•°æ®å’Œä¸Šæ¬¡ä»æºç³»ç»ŸæŠ½å–å¾—åˆ°çš„è¡¨æ•°æ®ä½œæ¯”å¯¹ï¼Œä»è€Œæ‰¾å‡ºå‘ç”Ÿå˜åŒ–çš„æ•°æ®ã€‚è™½ç„¶è¿™ç§æ–¹æ³•ä¸ä¼šå¯¹æºç³»ç»Ÿé€ æˆå¾ˆå¤§çš„å½±å“ï¼Œä½†æ˜¾ç„¶éœ€è¦è€ƒè™‘ç»™æ•°æ®ä»“åº“å¤„ç†å¢åŠ çš„è´Ÿæ‹…ï¼Œå°¤å…¶æ˜¯å½“æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ã€‚</p>
<h5 id="4-1-2-ç‰©ç†æŠ½å–"><a href="#4-1-2-ç‰©ç†æŠ½å–" class="headerlink" title="4.1.2 ç‰©ç†æŠ½å–"></a>4.1.2 ç‰©ç†æŠ½å–</h5><p>ä¾èµ–äºé€‰æ‹©çš„é€»è¾‘æŠ½å–æ–¹æ³•å’Œèƒ½å¤Ÿå¯¹æºç³»ç»Ÿæ‰€åšçš„æ“ä½œå’Œæ‰€å—çš„é™åˆ¶ï¼Œå­˜åœ¨ä¸¤ç§ç‰©ç†æ•°æ®æŠ½å–æœºåˆ¶ï¼šç›´æ¥ä»æºç³»ç»Ÿè”æœºæŠ½å–æˆ–è€…é—´æ¥ä»ä¸€ä¸ªè„±æœºç»“æ„æŠ½å–æ•°æ®ã€‚è¿™ä¸ªè„±æœºç»“æ„æœ‰å¯èƒ½å·²ç»å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½éœ€è¦ç”±æŠ½å–ç¨‹åºç”Ÿæˆã€‚</p>
<h6 id="ï¼ˆ1ï¼‰è”æœºæŠ½å–"><a href="#ï¼ˆ1ï¼‰è”æœºæŠ½å–" class="headerlink" title="ï¼ˆ1ï¼‰è”æœºæŠ½å–"></a>ï¼ˆ1ï¼‰è”æœºæŠ½å–</h6><p>æ•°æ®ç›´æ¥ä»æºç³»ç»ŸæŠ½å–ã€‚æŠ½å–è¿›ç¨‹æˆ–è€…ç›´è¿æºç³»ç»Ÿæ•°æ®åº“ï¼Œè®¿é—®å®ƒä»¬çš„æ•°æ®è¡¨ï¼Œæˆ–è€…è¿æ¥åˆ°ä¸€ä¸ªå­˜å‚¨å¿«ç…§æ—¥å¿—æˆ–å˜æ›´è®°å½•è¡¨çš„ä¸­é—´å±‚ç³»ç»Ÿã€‚æ³¨æ„è¿™ä¸ªä¸­é—´å±‚ç³»ç»Ÿå¹¶ä¸éœ€è¦å¿…é¡»å’Œæºç³»ç»Ÿç‰©ç†åˆ†ç¦»ã€‚</p>
<h6 id="ï¼ˆ2ï¼‰è„±æœºæŠ½å–"><a href="#ï¼ˆ2ï¼‰è„±æœºæŠ½å–" class="headerlink" title="ï¼ˆ2ï¼‰è„±æœºæŠ½å–"></a>ï¼ˆ2ï¼‰è„±æœºæŠ½å–</h6><p>æ•°æ®ä¸ä»æºç³»ç»Ÿç›´æ¥æŠ½å–ï¼Œè€Œæ˜¯ä»ä¸€ä¸ªæºç³»ç»Ÿä»¥å¤–çš„è¿‡æ¸¡åŒºæŠ½å–ã€‚è¿‡æ¸¡åŒºå¯èƒ½å·±ç»å­˜åœ¨ï¼ˆä¾‹å¦‚æ•°æ®åº“å¤‡ä»½æ–‡ä»¶ã€å…³ç³»æ•°æ®åº“ç³»ç»Ÿçš„é‡åšæ—¥å¿—ã€å½’æ¡£æ—¥å¿—ç­‰ï¼‰ï¼Œæˆ–è€…æŠ½å–ç¨‹åºè‡ªå·±å»ºç«‹ã€‚</p>
<h5 id="4-1-3-å˜åŒ–æ•°æ®æ•è·"><a href="#4-1-3-å˜åŒ–æ•°æ®æ•è·" class="headerlink" title="4.1.3 å˜åŒ–æ•°æ®æ•è·"></a>4.1.3 å˜åŒ–æ•°æ®æ•è·</h5><p>æŠ½å–å¤„ç†éœ€è¦é‡ç‚¹è€ƒè™‘å¢é‡æŠ½å–ï¼Œä¹Ÿè¢«ç§°ä¸ºå˜åŒ–æ•°æ®æ•è·ï¼Œç®€ç§°CDCã€‚å‡è®¾ä¸€ä¸ªæ•°æ®ä»“åº“ç³»ç»Ÿï¼Œåœ¨æ¯å¤©å¤œé‡Œçš„ä¸šåŠ¡ä½å³°æ—¶é—´ä»æ“ä½œå‹æºç³»ç»ŸæŠ½å–æ•°æ®ï¼Œé‚£ä¹ˆå¢é‡æŠ½å–åªéœ€è¦è¿‡å»24å°æ—¶å†…å‘ç”Ÿå˜åŒ–çš„æ•°æ®ã€‚å˜åŒ–æ•°æ®æ•è·ä¹Ÿæ˜¯å»ºç«‹å‡†å®æ—¶æ•°æ®ä»“åº“çš„å…³é”®æŠ€æœ¯ã€‚</p>
<p>å¸¸ç”¨çš„å˜åŒ–æ•°æ®æ•è·æ–¹æ³•æœ‰<strong>æ—¶é—´æˆ³ã€å¿«ç…§ã€è§¦å‘å™¨å’Œæ—¥å¿—</strong>å››ç§ã€‚æ—¶é—´æˆ³æ–¹æ³•éœ€è¦æºç³»ç»Ÿæœ‰ç›¸åº”çš„æ•°æ®åˆ—è¡¨ç¤ºæœ€åçš„æ•°æ®å˜åŒ–ã€‚å¿«ç…§æ–¹æ³•å¯ä»¥ä½¿ç”¨æ•°æ®åº“ç³»ç»Ÿè‡ªå¸¦çš„æœºåˆ¶å®ç°ï¼Œå¦‚Oracleçš„ç‰©åŒ–è§†å›¾æŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®ç°ç›¸å…³é€»è¾‘ï¼Œä½†ä¼šæ¯”è¾ƒå¤æ‚ã€‚è§¦å‘å™¨æ˜¯å…³ç³»æ•°æ®åº“ç³»ç»Ÿå…·æœ‰çš„ç‰¹æ€§ï¼Œæºè¡¨ä¸Šå»ºç«‹çš„è§¦å‘å™¨ä¼šåœ¨å¯¹è¯¥è¡¨æ‰§è¡Œinsertã€updateã€deleteç­‰è¯­å¥æ—¶è¢«è§¦å‘ï¼Œè§¦å‘å™¨ä¸­çš„é€»è¾‘ç”¨äºæ•è·æ•°æ®çš„å˜åŒ–ã€‚æ—¥å¿—å¯ä»¥ä½¿ç”¨åº”ç”¨æ—¥å¿—æˆ–ç³»ç»Ÿæ—¥å¿—ï¼Œè¿™ç§æ–¹å¼å¯¹æºç³»ç»Ÿä¸å…·æœ‰ä¾µå…¥æ€§ï¼Œä½†éœ€è¦é¢å¤–çš„æ—¥å¿—è§£æå·¥ä½œã€‚</p>
<h4 id="4-2-æ•°æ®è½¬æ¢"><a href="#4-2-æ•°æ®è½¬æ¢" class="headerlink" title="4.2 æ•°æ®è½¬æ¢"></a>4.2 æ•°æ®è½¬æ¢</h4><p>è½¬æ¢æ“ä½œï¼šå¦‚ç»Ÿä¸€æ•°æ®ç±»å‹ã€å¤„ç†æ‹¼å†™é”™è¯¯ã€æ¶ˆé™¤æ•°æ®æ­§ä¹‰ã€è§£æä¸ºæ ‡å‡†æ ¼å¼ç­‰ã€‚æ•°æ®è½¬æ¢ä¸€ä¸ªæœ€é‡è¦çš„åŠŸèƒ½æ˜¯æ¸…æ´—æ•°æ®ï¼Œåªæœ‰â€åˆè§„â€œçš„æ•°æ®æ‰èƒ½è¿›å…¥ç›®æ ‡æ•°æ®ä»“åº“ã€‚</p>
<ul>
<li>åªè£…è½½ç‰¹å®šçš„æ•°æ®åˆ—ã€‚ä¾‹å¦‚ï¼ŒæŸåˆ—ä¸ºç©ºçš„æ•°æ®ä¸è£…è½½ã€‚</li>
<li>ç»Ÿä¸€æ•°æ®ç¼–ç ã€‚ä¾‹å¦‚ï¼Œæ€§åˆ«å­—æ®µï¼Œæœ‰äº›ç³»ç»Ÿä½¿ç”¨çš„æ˜¯1å’Œ0ï¼Œæœ‰äº›æ˜¯â€™Mï¼Œå’Œâ€™Fâ€™ï¼Œæœ‰äº›æ˜¯â€™ç”·â€™ï¼Œå’Œâ€™å¥³â€™ï¼Œç»Ÿä¸€æˆâ€™Mâ€™å’Œâ€™Fâ€™</li>
<li>è‡ªç”±å€¼ç¼–ç ã€‚ä¾‹å¦‚ï¼Œå°†â€™Maleâ€™æ”¹æˆâ€™Mâ€™</li>
<li>é¢„è®¡ç®—ã€‚ä¾‹å¦‚ï¼Œäº§å“å•ä»·*è´­ä¹°æ•°é‡=é‡‘é¢ã€‚</li>
<li>åŸºäºæŸäº›è§„åˆ™é‡æ–°æ’åºä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</li>
<li>åˆå¹¶å¤šä¸ªæ•°æ®æºçš„æ•°æ®å¹¶å»é‡ã€‚</li>
<li>é¢„èšåˆã€‚ä¾‹å¦‚ï¼Œæ±‡æ€»é”€å”®æ•°æ®ã€‚</li>
<li>è¡Œåˆ—è½¬ç½®</li>
<li>å°†ä¸€åˆ—è½¬ä¸ºå¤šåˆ—ã€‚ä¾‹å¦‚ï¼ŒæŸåˆ—å­˜å‚¨çš„æ•°æ®æ˜¯ä»¥é€—å·ä½œä¸ºåˆ†éš”ç¬¦çš„å­—ç¬¦ä¸²ï¼Œå°†å…¶åˆ†å‰²æˆå¤šåˆ—çš„å•ä¸ªå€¼</li>
<li>åˆå¹¶é‡å¤åˆ—</li>
<li>é¢„è¿æ¥ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢å¤šä¸ªå…³è”è¡¨çš„æ•°æ®ã€‚</li>
<li>æ•°æ®éªŒè¯ã€‚é’ˆå¯¹éªŒè¯çš„ç»“æœé‡‡å–ä¸åŒçš„å¤„ç†ï¼Œé€šè¿‡éªŒè¯çš„æ•°æ®äº¤ç»™è£…è½½æ­¥éª¤ï¼ŒéªŒè¯å¤±è´¥çš„æ•°æ®æˆ–ç›´æ¥ä¸¢å¼„ï¼Œæˆ–è®°å½•ä¸‹æ¥åšè¿›ä¸€æ­¥æ£€æŸ¥ã€‚</li>
</ul>
<h4 id="4-3-æ•°æ®è£…è½½"><a href="#4-3-æ•°æ®è£…è½½" class="headerlink" title="4.3 æ•°æ®è£…è½½"></a>4.3 æ•°æ®è£…è½½</h4><p>æŠŠè½¬æ¢åçš„æ•°æ®è£…è½½è¿›ç›®æ ‡æ•°æ®ä»“åº“ã€‚éœ€è¦è€ƒè™‘çš„ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>æ•°æ®è£…è½½çš„æ•ˆç‡é—®é¢˜</li>
<li>ä¸€æ—¦è£…è½½è¿‡ç¨‹ä¸­é€”å¤±è´¥äº†ï¼Œå¦‚ä½•å†æ¬¡é‡å¤æ‰§è¡Œè£…è½½è¿‡ç¨‹</li>
</ul>
<p>å³ä½¿ç»è¿‡äº†è½¬æ¢ã€è¿‡æ»¤å’Œæ¸…æ´—ï¼Œå»æ‰äº†éƒ¨åˆ†å™ªå£°æ•°æ®ï¼Œä½†éœ€è¦è£…è½½çš„æ•°æ®é‡è¿˜æ˜¯å¾ˆå¤§çš„ã€‚æ‰§è¡Œä¸€æ¬¡æ•°æ®è£…è½½å¯èƒ½éœ€è¦å‡ ä¸ªå°æ—¶çš„æ—¶é—´ï¼ŒåŒæ—¶éœ€è¦å ç”¨å¤§é‡çš„ç³»ç»Ÿèµ„æºï¼Œè¦æé«˜è£…è½½çš„æ•ˆç‡ï¼ŒåŠ å¿«è£…è½½é€Ÿåº¦ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ æ–¹é¢å…¥æ‰‹ã€‚</p>
<ul>
<li>é¦–å…ˆä¿è¯è¶³å¤Ÿçš„ç³»ç»Ÿèµ„æºã€‚æ•°æ®ä»“åå­˜å‚¨çš„éƒ½æ˜¯æµ·é‡æ•°æ®ï¼Œæ‰€ä»¥è¦é…ç½®é«˜æ€§èƒ½çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”è¦ç‹¬å èµ„æºï¼Œä¸è¦ä¸åˆ«çš„ç³»ç»Ÿå…±ç”¨ã€‚</li>
<li>åœ¨è¿›è¡Œæ•°æ®è£…è½½æ—¶ï¼Œè¦ç¦ç”¨æ•°æ®åº“çº¦æŸï¼ˆå”¯ä¸€æ€§ã€éç©ºæ€§ï¼Œæ£€æŸ¥çº¦æŸç­‰ï¼‰å’Œç´¢å¼•ï¼Œå½“è£…è½½è¿‡ç¨‹å®Œå…¨ç»“æŸåï¼Œå†å¯ç”¨è¿™äº›çº¦æŸï¼Œé‡å»ºç´¢å¼•ï¼Œè¿™ç§æ–¹æ³•ä¼šå¾ˆå¤§çš„æé«˜è£…è½½é€Ÿåº¦ã€‚åœ¨æ•°æ®ä»“åº“ç¯å¢ƒä¸­ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨æ•°æ®åº“æ¥ä¿è¯æ•°æ®çš„å‚è€ƒå®Œæ•´æ€§ï¼Œå³ä¸ä½¿ç”¨æ•°æ®åº“çš„å¤–é”®çº¦æŸï¼Œå®ƒåº”è¯¥ç”±ETLå·¥å…·æˆ–ç¨‹åºæ¥ç»´æŠ¤ã€‚</li>
</ul>
<p>æ•°æ®è£…è½½è¿‡ç¨‹å¯èƒ½ç”±äºå¤šç§åŸå› è€Œå¤±è´¥ï¼Œæ¯”å¦‚è£…è½½è¿‡ç¨‹ä¸­æŸäº›æºè¡¨å’Œç›®æ ‡è¡¨çš„ç»“æ„ä¸ä¸€è‡´è€Œå¯¼è‡´å¤±è´¥ï¼Œè€Œè¿™æ—¶å·±ç»æœ‰éƒ¨åˆ†è¡¨è£…è½½æˆåŠŸäº†ã€‚åœ¨æ•°æ®é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•èƒ½åœ¨é‡æ–°æ‰§è¡Œè£…è‡´è¿‡ç¨‹æ—¶åªè£…è½½å¤±è´¥çš„éƒ¨åˆ†æ˜¯ä¸€ä¸ªä¸å°çš„æŒ‘æˆ˜ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œå®ç°å¯é‡å¤è£…è½½çš„å…³é”®æ˜¯è¦<strong>è®°å½•ä¸‹å¤±è´¥ç‚¹ï¼Œå¹¶åœ¨è£…è½½ç¨‹åºä¸­å¤„ç†ç›¸å…³çš„é€»è¾‘</strong>ã€‚è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯<strong>è£…è½½æˆåŠŸï¼Œæ•°æ®åˆå‘ç”Ÿäº†æ”¹å˜</strong>ï¼ˆæ¯”å¦‚æœ‰äº›æ»åçš„æ•°æ®åœ¨ETLæ‰§è¡Œå®Œæ‰è¿›å…¥ç³»ç»Ÿï¼Œå°±ä¼šå¸¦æ¥æ•°æ®çš„æ›´æ–°æˆ–æ–°å¢ï¼‰ï¼Œè¿™æ—¶éœ€è¦é‡æ–°å†æ‰§è¡Œä¸€éè£…è½½è¿‡ç¨‹ï¼Œå·±ç»æ­£ç¡®è£…è½½çš„æ•°æ®å¯ä»¥è¢«è¦†ç›–ï¼Œä½†ç›¸åŒæ•°æ®ä¸èƒ½é‡å¤æ–°å¢ã€‚ç®€å•çš„å®ç°æ–¹å¼æ˜¯<strong>å…ˆåˆ é™¤å†æ’å…¥</strong>ï¼Œæˆ–è€…ç”¨replace intoã€merge intoç­‰ç±»ä¼¼åŠŸèƒ½çš„æ“ä½œã€‚</p>
<p>è£…è½½åˆ°æ•°æ®ä»“åº“é‡Œçš„æ•°æ®ï¼Œç»è¿‡æ±‡æ€»ã€èšåˆç­‰å¤„ç†åäº¤ä»˜ç»™å¤šç»´ç«‹æ–¹ä½“æˆ–æ•°æ®å¯è§†åŒ–ã€ä»ªè¡¨ç›˜ç­‰æŠ¥è¡¨å·¥å…¶ã€Blå·¥å…·åšè¿›ä¸€æ­¥çš„æ•°æ®åˆ†æã€‚</p>]]></content>
      <categories>
        <category>Hadoop</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
        <tag>æ•°æ®ä»“åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>ç†µã€æ¡ä»¶ç†µã€äº’ä¿¡æ¯ã€ç›¸å¯¹ç†µ</title>
    <url>/2020/10/19/%E7%86%B5%E3%80%81%E6%9D%A1%E4%BB%B6%E7%86%B5%E3%80%81%E4%BA%92%E4%BF%A1%E6%81%AF%E3%80%81%E7%9B%B8%E5%AF%B9%E7%86%B5/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>æ¥è‡ªã€Šæ•°å­¦ä¹‹ç¾ã€‹</p>
</blockquote>
<h4 id="1-ä¿¡æ¯ç†µ"><a href="#1-ä¿¡æ¯ç†µ" class="headerlink" title="1.ä¿¡æ¯ç†µ"></a>1.ä¿¡æ¯ç†µ</h4><p>é¦™å†œåœ¨ä»–è‘—åçš„è®ºæ–‡â€é€šä¿¡çš„æ•°å­¦åŸç†â€œï¼ˆA Mathematic Theory of Communicationï¼‰ä¸­æå‡ºäº†â€ä¿¡æ¯ç†µâ€œçš„æ¦‚å¿µï¼Œè§£å†³äº†ä¿¡æ¯çš„åº¦é‡é—®é¢˜ï¼Œå¹¶ä¸”é‡åŒ–å‡ºä¿¡æ¯çš„ä½œç”¨ã€‚</p>
<p>ä¸€æ¡ä¿¡æ¯çš„ä¿¡æ¯é‡ä¸å…¶ä¸ç¡®å®šæ€§æœ‰ç€ç›´æ¥çš„å…³ç³»ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬è¦ææ¸…æ¥šä¸€ä»¶éå¸¸éå¸¸ä¸ç¡®å®šçš„äº‹ï¼Œæˆ–æ˜¯æˆ‘ä»¬ä¸€æ— æ‰€çŸ¥çš„äº‹æƒ…ï¼Œå°±éœ€è¦äº†è§£å¤§é‡çš„ä¿¡æ¯ã€‚ç›¸åï¼Œå¦‚æœå·²å¯¹æŸä»¶äº‹äº†è§£è¾ƒå¤šï¼Œåˆ™ä¸éœ€è¦å¤ªå¤šçš„ä¿¡æ¯å°±èƒ½æŠŠå®ƒå¼„æ¸…æ¥šã€‚ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œ<span style="color:red">å¯ä»¥è®¤ä¸ºï¼Œä¿¡æ¯é‡å°±ç­‰äºä¸ç¡®å®šæ€§çš„å¤šå°‘ã€‚</span></p>
<blockquote>
<p>é‚£ä¹ˆå¦‚ä½•é‡åŒ–ä¿¡æ¯é‡çš„åº¦é‡å‘¢ï¼Ÿæ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚2014å¹´ä¸¾è¡Œäº†ä¸–ç•Œæ¯è¶³çƒèµ›ï¼Œå¤§å®¶éƒ½å¾ˆå…³å¿ƒè°ä¼šæ˜¯å† å†›ã€‚å‡å¦‚æˆ‘é”™è¿‡äº†çœ‹ä¸–ç•Œæ¯ï¼Œèµ›åæˆ‘é—®ä¸€ä¸ªçŸ¥é“æ¯”èµ›ç»“æœçš„è§‚ä¼—â€œå“ªæ”¯çƒé˜Ÿæ˜¯å† å†›â€ï¼Ÿä»–ä¸æ„¿æ„ç›´æ¥å‘Šè¯‰æˆ‘ï¼Œè€Œè®©æˆ‘çŒœï¼Œå¹¶ä¸”æˆ‘æ¯çŒœä¸€æ¬¡ï¼Œä»–è¦æ”¶ä¸€å…ƒé’±æ‰è‚¯å‘Šè¯‰æˆ‘æ˜¯å¦çŒœå¯¹äº†ï¼Œé‚£ä¹ˆæˆ‘è¦æå¤šå°‘é’±æ‰èƒ½çŸ¥é“è°æ˜¯å† å†›å‘¢ï¼Ÿæˆ‘å¯ä»¥æŠŠçƒé˜Ÿç¼–ä¸Šå·ï¼Œä»1åˆ°32ï¼Œç„¶åæé—®ï¼šâ€œå† å†›çƒé˜Ÿåœ¨1ä¸€16å·ä¸­å—ï¼Ÿâ€å‡å¦‚ä»–å‘Šè¯‰æˆ‘çŒœå¯¹äº†ï¼Œæˆ‘ä¼šæ¥ç€é—®ï¼šâ€œå† å†›åœ¨1ä¸€8å·ä¸­å—ï¼Ÿâ€å‡å¦‚ä»–å‘Šè¯‰æˆ‘çŒœé”™äº†ï¼Œæˆ‘è‡ªç„¶çŸ¥é“å† å†›é˜Ÿåœ¨9ä¸€16å·ä¸­ã€‚è¿™æ ·åªéœ€è¦äº”æ¬¡ï¼Œæˆ‘å°±èƒ½çŸ¥é“å“ªæ”¯çƒé˜Ÿæ˜¯å† å†›ã€‚æ‰€ä»¥ï¼Œè°æ˜¯ä¸–ç•Œæ¯å† å†›è¿™æ¡æ¶ˆæ¯çš„ä¿¡æ¯é‡åªå€¼5å—é’±ã€‚</p>
</blockquote>
<p>å½“ç„¶ï¼Œé¦™å†œä¸æ˜¯ç”¨é’±ï¼Œè€Œæ˜¯ç”¨â€œæ¯”ç‰¹â€ï¼ˆBitï¼‰è¿™ä¸ªæ¦‚å¿µæ¥åº¦é‡ä¿¡æ¯é‡ã€‚ä¸€ä¸ªæ¯”ç‰¹æ˜¯ä¸€ä½äºŒè¿›åˆ¶æ•°ï¼Œåœ¨è®¡ç®—æœºä¸­ï¼Œä¸€ä¸ªå­—èŠ‚å°±æ˜¯8æ¯”ç‰¹ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¿™æ¡æ¶ˆæ¯çš„ä¿¡æ¯é‡æ˜¯5æ¯”ç‰¹ã€‚ï¼ˆå¦‚æœæœ‰æœä¸€æ—¥æœ‰64æ”¯çƒé˜Ÿè¿›å…¥å†³èµ›é˜¶æ®µçš„æ¯”èµ›ï¼Œé‚£ä¹ˆâ€œè°æ˜¯ä¸–ç•Œæ¯å† å†›â€çš„ä¿¡æ¯é‡å°±æ˜¯6æ¯”ç‰¹ï¼Œå› ä¸ºè¦å¤šçŒœä¸€æ¬¡ã€‚ï¼‰è¯»è€…å¯èƒ½å·²ç»å‘ç°ï¼Œä¿¡æ¯é‡çš„æ¯”ç‰¹æ•°å’Œæ‰€æœ‰å¯èƒ½æƒ…å†µçš„å¯¹æ•°å‡½æ•°logæœ‰å…³ã€‚ï¼ˆ$log32=5,log 64=6$ï¼‰</p>
<p>æœ‰äº›è¯»è€…ä¼šå‘ç°å®é™…ä¸Šå¯èƒ½ä¸éœ€è¦çŒœäº”æ¬¡å°±èƒ½çŒœå‡ºè°æ˜¯å† å†›ï¼Œå› ä¸ºåƒè¥¿ç­ç‰™ã€å·´è¥¿ã€å¾·å›½ã€æ„å¤§åˆ©è¿™æ ·çš„çƒé˜Ÿå¤ºå¾—å† è½¦çš„å¯èƒ½æ€§æ¯”æ—¥æœ¬ã€å—éã€éŸ©å›½ç­‰çƒé˜Ÿå¤§å¾—å¤šã€‚å› æ­¤ï¼Œç¬¬ä¸€æ¬¡çŒœæµ‹æ—¶ä¸éœ€è¦æŠŠ32æ”¯çƒé˜Ÿç­‰åˆ†æˆä¸¤ä¸ªç»„ï¼Œè€Œå¯ä»¥æŠŠå°‘æ•°å‡ æ”¯æœ€å¯èƒ½çš„çƒé˜Ÿåˆ†æˆä¸€ç»„ï¼ŒæŠŠå…¶ä»–çƒé˜Ÿåˆ†æˆå¦ä¸€ç»„ã€‚ç„¶åçŒœå† å†›çƒé˜Ÿæ˜¯å¦åœ¨é‚£å‡ æ”¯çƒ­é—¨é˜Ÿä¸­ã€‚é‡å¤è¿™æ ·çš„è¿‡ç¨‹ï¼Œæ ¹æ®å¤ºå† æ¦‚ç‡å¯¹ä½™ä¸‹å€™é€‰çƒé˜Ÿåˆ†ç»„ï¼Œç›´è‡³æ‰¾åˆ°å† å†›é˜Ÿã€‚è¿™æ ·ï¼Œä¹Ÿè®¸ä¸‰æ¬¡æˆ–å››æ¬¡å°±çŒœå‡ºç»“æœã€‚å› æ­¤ï¼Œå½“æ¯æ”¯çƒé˜Ÿå¤ºå† çš„å¯èƒ½æ€§ï¼ˆæ¦‚ç‡ï¼‰ä¸ç­‰æ—¶ï¼Œâ€œè°æ˜¯ä¸–ç•Œæ¯å† å†›â€çš„ä¿¡æ¯é‡æ¯”5æ¯”ç‰¹å°‘ã€‚é¦™å†œæŒ‡å‡ºï¼Œå®ƒçš„å‡†ç¡®ä¿¡æ¯é‡åº”è¯¥æ˜¯</p>
<script type="math/tex; mode=display">
H=-(p_1logp_1+p_2logp_2+...+p_{32}logp_{32})</script><p>å…¶ä¸­ï¼Œ$p_1,p_2,â€¦,p_{32}$åˆ†åˆ«æ˜¯è¿™32æ”¯çƒé˜Ÿå¤ºå† çš„æ¦‚ç‡ã€‚é¦™å†œæŠŠå®ƒç§°ä¸ºâ€œä¿¡æ¯ç†µâ€ï¼ˆEntropyï¼‰ï¼Œä¸€èˆ¬ç”¨ç¬¦å· $H$ è¡¨ç¤ºï¼Œå•ä½æ˜¯æ¯”ç‰¹ã€‚å½“32æ”¯çƒé˜Ÿå¤ºå† æ¦‚ç‡ç›¸åŒæ—¶ï¼Œå¯¹åº”çš„ä¿¡æ¯ç†µç­‰äº5æ¯”ç‰¹ã€‚å¯ä»¥è¯æ˜ä¸Šé¢å…¬å¼çš„å€¼ä¸å¯èƒ½å¤§äº5ï¼Œå³</p>
<script type="math/tex; mode=display">
0 \leq H \leq logn</script><p>å¯¹äºä»»æ„ä¸€ä¸ªéšæœºå˜é‡ $X$ï¼ˆæ¯”å¦‚å¾—å† å†›çš„çƒé˜Ÿï¼‰ï¼Œå®ƒçš„ç†µå®šä¹‰å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
H(X)=-\sum _{x\in X}P(x)logP(x)</script><p><span style="color:Red">å˜é‡çš„ä¸ç¡®å®šæ€§è¶Šå¤§ï¼Œç†µä¹Ÿå°±è¶Šå¤§ï¼Œè¦æŠŠå®ƒææ¸…æ¥šï¼Œæ‰€éœ€ä¿¡æ¯é‡ä¹Ÿå°±è¶Šå¤§ã€‚</span></p>
<h4 id="2-ä¿¡æ¯çš„ä½œç”¨ï¼Œæ¡ä»¶ç†µ"><a href="#2-ä¿¡æ¯çš„ä½œç”¨ï¼Œæ¡ä»¶ç†µ" class="headerlink" title="2.ä¿¡æ¯çš„ä½œç”¨ï¼Œæ¡ä»¶ç†µ"></a>2.ä¿¡æ¯çš„ä½œç”¨ï¼Œæ¡ä»¶ç†µ</h4><p>æœ‰äº›æ—¶å€™ï¼Œåœ¨æˆ˜äº‰ä¸­1æ¯”ç‰¹çš„ä¿¡æ¯èƒ½æŠµè¿‡å¹²å†›ä¸‡é©¬ã€‚åœ¨ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜ä¸­ï¼å½“çº³ç²¹å¾·å›½å…µä¸´å‰è‹è”è«æ–¯ç§‘åŸä¸‹æ—¶ï¼Œæ–¯å¤§æ—åœ¨æ¬§æ¹–å·²ç»æ— å…µå¯æ´¾ï¼Œä»–ä»¬åœ¨è¥¿ä¼¯åˆ©äºšçš„ä¸­è‹è¾¹ç•Œå´æœ‰60ä¸‡å¤§å†›ä¸æ•¢ä½¿ç”¨ï¼Œå› ä¸ºè‹è”äººä¸çŸ¥é“å¾·å›½çš„è½´å¿ƒå›½ç›Ÿå‹æ—¥æœ¬å½“æ—¶çš„å†›äº‹ç­–ç•¥æ˜¯åŒ—ä¸Šè¿›æ”»å‰è‹è”ï¼Œè¿˜æ˜¯å—ä¸‹å’Œç¾å›½å¼€æˆ˜ã€‚å¦‚æœæ˜¯å—ä¸‹ï¼Œé‚£ä¹ˆè‹è”äººå°±å¯ä»¥æ”¾å¿ƒå¤§èƒ†åœ°ä»äºšæ´²æ’¤å›60ä¸‡å¤§å†›å¢æ´è«æ–¯ç§‘ä¼šæˆ˜ã€‚äº‹å®ä¸Šæ—¥æœ¬äººé€‰æ‹©äº†å—ä¸‹ï¼Œå…¶ç›´æ¥è¡ŒåŠ¨æ˜¯åæ¥çš„å·è¢­çç æ¸¯ï¼Œä½†æ˜¯è‹è”äººå¹¶ä¸çŸ¥éªã€‚æ–¯å¤§æ—ä¸èƒ½çŒœï¼Œå› ä¸ºçŒœé”™äº†åæœæ˜¯å¾ˆä¸¥é‡çš„ã€‚è¿™ä¸ªâ€œçŒœâ€œæ—¢æ˜¯æŒ‡æ‰”é’¢é•šå„¿ä¼¼çš„åœå¦ï¼Œä¹ŸåŒ…æ‹¬ä¸»è§‚çš„è‡†æ–­ã€‚æœ€åä¼ å¥‡é—´è°ä½å°”æ ¼å‘è«æ–¯ç§‘å‘å»äº†ä¿¡æ¯é‡ä»…1æ¯”ç‰¹å´ä»·å€¼æ— é™çš„æƒ…æŠ¥ï¼ˆä¿¡æ¯ï¼‰ï¼šâ€œæ—¥æœ¬å°†å—ä¸‹â€ï¼Œäºæ˜¯å‰è‹è”å°±æŠŠè¥¿ä¼¯åˆ©äºšæ‰€æœ‰çš„å†›é˜Ÿè°ƒå¾€äº†æ¬§æ´²æˆ˜åœºã€‚åé¢çš„æ•…äº‹å¤§å®¶éƒ½çŸ¥é“äº†ã€‚</p>
<p>å¦‚æœæŠŠè¿™ä¸ªæ•…äº‹èƒŒåçš„ä¿¡æ¯è®ºåŸç†æŠ½è±¡åŒ–ã€æ™®éåŒ–ï¼Œå¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/10/19/ç†µã€æ¡ä»¶ç†µã€äº’ä¿¡æ¯ã€ç›¸å¯¹ç†µ/1603102832279.png" alt="1603102832279"></p>
<p>ä¸€ä¸ªäº‹ç‰©ï¼ˆæ¯”å¦‚ä¸Šé¢è®²åˆ°çš„æ—¥æœ¬å†…é˜çš„æˆ˜ç•¥å†³å®šï¼‰å†…éƒ¨ä¼šå­˜æœ‰éšæœºæ€§ï¼Œä¹Ÿå°±æ˜¯ä¸ç¡®å®šæ€§ï¼Œå‡å®šä¸º $U$ï¼Œè€Œä»å¤–éƒ¨æ¶ˆé™¤è¿™ä¸ªä¸ç¡®å®šæ€§å”¯ä¸€çš„åŠæ³•æ˜¯å¼•å…¥ä¿¡æ¯ $I$ï¼Œè€Œéœ€è¦å¼•å…¥çš„ä¿¡æ¯é‡å–å†³äºè¿™ä¸ªä¸ç¡®å®šæ€§çš„å¤§å°ï¼Œå³ $I&gt;U$ æ‰è¡Œã€‚å½“ $I&lt;U$ æ—¶ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥æ¶ˆé™¤ä¸€éƒ¨åˆ†ä¸ç¡®å®šæ€§ï¼Œä¹Ÿå°±æ˜¯è¯´æ–°çš„ä¸ç¡®å®šæ€§ã€‚</p>
<script type="math/tex; mode=display">
U'=U-I</script><p>åä¹‹ï¼Œå¦‚æœæ²¡æœ‰ä¿¡æ¯ï¼Œä»»ä¼ºå…¬å¼è€…æ•°å­—çš„æ¸¸æˆéƒ½æ— æ³•æ’é™¤ä¸ç¡®å®šæ€§ã€‚è¿™ä¸ªæœ´ç´ çš„ç»“è®ºéå¸¸é‡è¦ï¼Œä½†æ˜¯åœ¨ç ”ç©¶å·¥ä½œä¸­ç»å¸¸è¢«ä¸€äº›åŠç“¶å­é†‹çš„ä¸“å®¶å¿½è§†ï¼Œå¸Œæœ›åšè¿™æ–¹é¢å·¥ä½œçš„è¯»è€…è°¨è®°ã€‚å‡ æ‰€æœ‰çš„è‡ªç„¶è¯­è¨€å¤„ç†ã€ä¿¡æ¯ä¸ä¿¡å·å¤„ç†çš„åº”ç”¨éƒ½æ˜¯ä¸€ä¸ªæ¶ˆé™¤ä¸ç¡®å®šæ€§çš„è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>ç½‘é¡µæœç´¢æœ¬è´¨ä¸Šå°±æ˜¯è¦ä»å¤§é‡ï¼ˆå‡ åäº¿ä¸ªï¼‰ç½‘é¡µä¸­ï¼æ‰¾åˆ°å’Œç”¨æˆ·è¾“å…¥çš„æœç´¢è¯æœ€ç›¸å…³çš„å‡ ä¸ªç½‘é¡µã€‚å‡ åäº¿ç§å¯èƒ½æ€§ï¼Œå½“ç„¶æ˜¯å¾ˆå¤§çš„ä¸ç¡®å®šæ€§ $U$ã€‚å¦‚æœåªå‰©ä¸‹å‡ ä¸ªç½‘é¡µï¼Œå°±å‡ å¹³æ²¡æœ‰äº†ä¸ç¡®å®šæ€§äº†ï¼ˆæ­¤æ—¶ $Uâ€™&lt;&lt;U$ï¼‰ï¼Œç”šè‡³æ˜¯å®Œå…¨ç¡®å®šäº†ï¼ˆå¯¹äºå¯¼èˆªç±»æœç´¢å°±æ˜¯å¦‚æ­¤ï¼Œç¬¬ä¸€æ¡ç»“æœé€šå¸¸å°±æ˜¯è¦æ‰¾çš„ç½‘é¡µï¼‰ã€‚å› æ­¤ï¼Œç½‘é¡µæœç´¢æœ¬è´¨ä¸Šä¹Ÿæ˜¯åˆ©ç”¨ä¿¡æ¯æ¶ˆé™¤ä¸ç¡®å®šæ€§çš„è¿‡ç¨‹ã€‚å¦‚æœæä¾›çš„ä¿¡æ¯ä¸å¤Ÿå¤šï¼Œæ¯”å¦‚æœç´¢è¯æ˜¯å¸¸ç”¨çš„å…³é”®è¯ï¼Œè¯¸å¦‚â€œä¸­å›½â€ã€â€œç»æµâ€ä¹‹ç±»çš„ï¼Œé‚£ä¹ˆä¼šæœ‰å¥½å¤šç›¸å…³çš„ç»“æœï¼Œç”¨æˆ·å¯èƒ½è¿˜æ˜¯æ— ä»é€‰æ‹©ï¼Œè¿™æ—¶æ­£ç¡®çš„åšæ³•æ˜¯æŒ–æ˜æ–°çš„éšå«ä¿¡æ¯ï¼Œæ¯”å¦‚ç½‘é¡µæœ¬èº«çš„è´¨é‡ä¿¡æ¯ã€‚å¦‚æœè¿™äº›ä¿¡æ¯è¿˜æ˜¯ä¸å¤Ÿæ¶ˆé™¤ä¸ç¡®å®šæ€§ï¼Œä¸å¦¨å†é—®é—®ç”¨æˆ·ã€‚è¿™å°±æ˜¯ç›¸å…³æœç´¢çš„ç†è®ºæ—¢åŸºç¡€ã€‚ä¸æ­£ç¡®çš„åšæ³•æ˜¯åœ¨è¿™ä¸ªå…³é”®è¯ä¸Šç©æ•°å­—å’Œå…¬å¼çš„æ¸¸æˆï¼Œç”±äºæ²¡æœ‰é¢å¤–çš„ä¿¡æ¯å¼•å…¥ï¼Œè¿™ç§åšæ³•æ²¡æœ‰æ•ˆæœï¼Œè¿™å°±æ˜¯å¾ˆå¤šåšæœç´¢è´¨é‡çš„äººéå¸¸è¾›è‹¦å´å¾ˆå°‘æœ‰æ”¶è·çš„åŸå› ã€‚æœ€ç³Ÿç³•çš„åšæ³•æ˜¯å¼•å…¥äººä¸ºçš„å‡è®¾ï¼Œè¿™å’Œâ€œè’™â€œæ²¡ä»€ä¹ˆå·®åˆ«ã€‚å…¶ç»“æœæ˜¯ä¼¼å¹³æ»¡è¶³äº†ä¸ªåˆ«ç”¨æˆ·çš„å£å‘³ï¼Œä½†æ˜¯å¯¹å¤§éƒ¨åˆ†ç”¨æˆ·æ¥è®²ï¼Œæœç´¢ç»“æœåè€Œå˜å¾—æ›´ç³Ÿã€‚åˆç†åˆ©ç”¨ä¿¡æ¯ï¼Œè€Œéç©å¼„ä»€ä¹ˆå…¬å¼å’Œæœºå™¨å­¦ä¹ ç®—æ³•ï¼Œæ˜¯åšå¥½æœç´¢çš„å…³é”®ã€‚</p>
</blockquote>
<p>çŸ¥é“çš„ä¿¡æ¯è¶Šå¤šï¼Œéšæœºäº‹ä»¶çš„ä¸ç¡®å®šæ€§å°±è¶Šå°ã€‚</p>
<p>è¿™äº›ä¿¡æ¯ï¼Œå¯ä»¥æ˜¯ç›´é’ˆå¯¹æˆ‘ä»¬è¦äº†è§£çš„éšæœºäº‹ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯å’Œæˆ‘ä»¬å…³å¿ƒçš„éšæœºäº‹ä»¶ç›¸å…³çš„å…¶ä»–ï¼ˆäº‹ä»¶ï¼‰çš„ä¿¡æ¯ä¸€ä¸€é€šè¿‡è·å–è¿™äº›ç›¸å…³ä¿¡æ¯ä¹Ÿèƒ½å¸®åŠ©æˆ‘ä»¬äº†è§£æ‰€å…³æ³¨çš„å¯¹è±¡ã€‚æ¯”å¦‚è‡ªç„¶è¯­è¨€çš„ç»Ÿè®¡æ¨¡å‹ï¼Œå…¶ä¸­çš„ä¸€å…ƒæ¨¡å‹å°±æ˜¯é€šè¿‡æŸä¸ªè¯æœ¬èº«çš„æ¦‚åˆ†å¸ƒæ¥æ¸…é™¤ä¸ç¡®å®šå› ç´ ï¼›è€ŒäºŒå…ƒåŠæ›´é«˜é˜¶çš„è¯­è¨€æ¨¡å‹åˆ™è¿˜ä½¿ç”¨äº†ä¸Šä¸‹æ–‡çš„ä¿¡æ¯ï¼Œé‚£å°±èƒ½å‡†ç¡®é¢„æµ‹ä¸€ä¸ªå¥å­ä¸­å½“å‰çš„è¯æ±‡äº†ã€‚åœ¨æ•°å­¦ä¸Šå¯ä»¥ä¸¥æ ¼åœ°è¯æ˜ä¸ºä»€ä¹ˆè¿™äº›â€ç›¸å…³çš„â€œä¿¡æ¯ä¹Ÿèƒ½å¤Ÿæ¶ˆé™¤ä¸ç¡®å®šæ€§ï¼Œä¸ºæ­¤ï¼Œéœ€è¦å¼•å…¥ä¸€ä¸ª<strong>æ¡ä»¶ç†µï¼ˆConditional Entropyï¼‰</strong>çš„æ¦‚å¿µã€‚</p>
<p>å‡å®š $X$ å’Œ $Y$ æ˜¯ä¸¤ä¸ªéšæœºå˜é‡ï¼Œ $X$ æ˜¯æˆ‘ä»¬éœ€è¦äº†è§£çš„ã€‚å‡å®šæˆ‘ä»¬ç°åœ¨çŸ¥é“äº† $X$ çš„éšæœºåˆ†å¸ƒ $P(X)$ï¼Œé‚£ä¹ˆä¹Ÿå°±çŸ¥é“äº† $X$ çš„ç†µ:</p>
<script type="math/tex; mode=display">
H(X)=-\sum_{x\in X}P(x)logP(x)</script><p>é‚£ä¹ˆå®ƒçš„ä¸ç¡®å®šæ€§å°±æ˜¯è¿™ä¹ˆå¤§ã€‚ç°åœ¨å‡å®šæˆ‘ä»¬è¿˜çŸ¥é“ $Y$ çš„ä¸€äº›æƒ…å†µï¼ŒåŒ…æ‹¬å®ƒå’Œ $X$ ä¸€èµ·å‡ºç°çš„æ¦‚ç‡ï¼Œåœ¨æ•°å­¦ä¸Šç§°ä¸ºè”åˆæ¦‚ç‡åˆ†å¸ƒï¼Œä»¥åŠåœ¨ $Y$ å–ä¸åŒå€¼çš„å‰æä¸‹ $X$ çš„æ¦‚ç‡åˆ†å¸ƒï¼Œåœ¨æ•°å­¦ä¸Šç§°ä¸ºæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒã€‚</p>
<p>å®šä¹‰åœ¨ $Y$ çš„æ¡ä»¶ä¸‹çš„æ¡ä»¶ç†µä¸ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
H(X|Y) &= -\sum_{x\in X,y\in Y}P(x,y)logP(x,y)\\
&=\sum_{i=1}^n p_iH(X|Y=y_i)
\end{align*}</script><p>è¿™é‡Œï¼Œ$p_i=P(Y=y_i),\quad i=1,2,â€¦,n.$</p>
<p>å¯ä»¥è¯æ˜ï¼Œ $H(X)\geq H(X|Y)$ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šäº† $Y$ çš„ä¿¡æ¯ä¹‹åï¼Œå…³äº $X$ çš„ä¸ç¡®å®šæ€§ä¸‹é™äº†ã€‚åœ¨ç»Ÿè®¡è¯­è¨€æ¨¡å‹ä¸­ï¼Œå¦‚æœæŠŠ $Y$ çœ‹æˆå‰ä¸€ä¸ªå­—ï¼Œé‚£ä¹ˆåœ¨æ•°å­¦ä¸Šå°±è¯æ˜äº†äºŒå…ƒæ¨¡å‹çš„ä¸ç¡®å®šæ€§å°äºä¸€å…ƒæ¨¡å‹ã€‚åŒç†ï¼Œå¯ä»¥å®šä¹‰æœ‰ä¸¤ä¸ªæ¡ä»¶çš„æ¡ä»¶ç†µ</p>
<script type="math/tex; mode=display">
H(X|Y,Z)=-\sum_{x\in X,y\in Y,z\in Z}p(x,y,z)logp(x,y,z)</script><p>è¿˜å¯ä»¥è¯æ˜ï¼Œ $H(X|Y)\geq H(X|Y,Z)$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‰å…ƒæ¨¡å‹åº”è¯¥æ¯”äºŒå…ƒå¥½ã€‚</p>
<blockquote>
<p>ä¸Šè¿°çš„ç­‰å·ä»€ä¹ˆæ—¶å€™æˆç«‹ï¼Ÿç­‰å·æˆç«‹è¯´æ˜å¢åŠ äº†ä¿¡æ¯ï¼Œä¸ç¡®å®šæ€§å´æ²¡æœ‰é™ä½ã€‚å¦‚æœæˆ‘ä»¬è·å–çš„ä¿¡æ¯ä¸è¦ç ”ç©¶çš„äº‹ç‰©æ¯«æ— å…³ç³»ï¼Œç­‰å·å°±æˆç«‹ã€‚</p>
</blockquote>
<p>ç”¨ä¸€å¥è¯æ¦‚æ‹¬è¿™ä¸€èŠ‚ï¼š<span style="color:Red">ä¿¡æ¯çš„ä½œç”¨åœ¨äºæ¶ˆé™¤ä¸ç¡®å®šæ€§</span>ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†çš„å¤§é‡é—®é¢˜å°±æ˜¯å¯»æ‰¾ç›¸å…³çš„ä¿¡æ¯ã€‚</p>
<h4 id="3-äº’ä¿¡æ¯"><a href="#3-äº’ä¿¡æ¯" class="headerlink" title="3.äº’ä¿¡æ¯"></a>3.äº’ä¿¡æ¯</h4><p>åœ¨ä¸Šä¸€èŠ‚ä¸­æåˆ°ï¼Œå½“è·å–çš„ä¿¡æ¯å’Œè¦ç ”ç©¶çš„äº‹ç‰©â€œæœ‰å…³ç³»â€æ—¶ï¼Œè¿™äº›ä¿¡æ¯æ‰èƒ½å¸®åŠ©æˆ‘ä»¬æ¶ˆé™¤ä¸ç¡®å®šæ€§ã€‚å¦‚ä½•é‡åŒ–åœ°åº¦é‡â€œç›¸å…³æ€§â€ï¼Œé¦™å†œåœ¨ä¿¡æ¯è®ºä¸­æå‡ºäº†ä¸€ä¸ª<strong>â€œäº’ä¿¡æ¯â€ï¼ˆMutual Informationï¼‰</strong>çš„æ¦‚å¿µä½œä¸ºä¸¤ä¸ªéšæœºäº‹ä»¶â€œç›¸å…³æ€§â€çš„é‡åŒ–åº¦é‡ã€‚</p>
<p>å‡å®šæœ‰ä¸¤ä¸ªéšæœºäº‹ä»¶ $X$ å’Œ $Y$ï¼Œå®ƒä»¬çš„äº’ä¿¡æ¯å®šä¹‰å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
I(X;Y)=\sum_{x\in X,y\in Y}P(x,y)log\frac{P(x,y)}{P(x)P(y)}</script><p>è¿™ä¸ªäº’ä¿¡æ¯å°±æ˜¯ä¸ŠèŠ‚ä»‹ç»çš„éšæœºäº‹ä»¶ $X$ çš„ä¸ç¡®å®šæ€§ï¼ˆç†µ $H(X)$ï¼‰ï¼Œä»¥åŠåœ¨çŸ¥é“éšæœºäº‹ä»¶ $Y$ çš„æ¡ä»¶ä¸‹çš„ä¸ç¡®å®šæ€§ï¼ˆæ¡ä»¶ç†µ $H(X|Y)$ï¼‰ä¹‹é—´çš„å·®å¼‚ï¼Œå³</p>
<script type="math/tex; mode=display">
I(X;Y)=H(X)-H(X|Y)</script><blockquote>
<p>å³å†³ç­–æ ‘ä¸­çš„ä¿¡æ¯å¢ç›Š</p>
</blockquote>
<p><span style="color:red">æ‰€è°“ä¸¤ä¸ªäº‹ä»¶ç›¸å…³çš„é‡åŒ–åº¦é‡ï¼Œå°±æ˜¯åœ¨äº†è§£äº†å…¶ä¸­ä¸€ä¸ª $Y$ çš„å‰æä¸‹ï¼Œå¯¹æ¶ˆé™¤å¦ä¸€ä¸ª $X$ çš„ä¸ç¡®å®šæ€§æ‰€æä¾›çš„ä¿¡æ¯é‡ã€‚</span></p>
<p>äº’ä¿¡æ¯æ˜¯ä¸€ä¸ªå–å€¼åœ¨ $0$ åˆ° $min(H(X),H(Y))$ ä¹‹é—´çš„å‡½æ•°ï¼Œå½“ $X$ å’Œ $Y$ å®Œå…¨ç›¸å…³æ—¶ï¼Œå®ƒçš„å–å€¼æ˜¯ $H(X)$ï¼ŒåŒæ—¶ $H(X)=H(Y)$ï¼›å½“äºŒè€…å®Œå…¨æ— å…³æ—¶ï¼Œå®ƒçš„å–å€¼æ˜¯0ã€‚</p>
<p>åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­ï¼Œä¸¤ä¸ªéšæœºäº‹ä»¶ï¼Œæˆ–è€…è¯­è¨€ç‰¹å¾çš„äº’ä¿¡æ¯æ˜¯å¾ˆå®¹æ˜“è®¡ç®—çš„ã€‚åªè¦æœ‰è¶³å¤Ÿçš„è¯­æ–™ï¼Œå°±ä¸éš¾ä¼°è®¡å‡ºäº’ä¿¡æ¯å…¬å¼ä¸­çš„ $P(X,Y),P(X)$ å’Œ $P(Y)$ ä¸‰ä¸ªæ¦‚ç‡ï¼Œè¿›è€Œç®—å‡ºäº’ä¿¡æ¯ã€‚å› æ­¤ï¼Œ<span style="color:red">äº’ä¿¡æ¯è¢«å¹¿æ³›ç”¨äºåº¦é‡ä¸€äº›è¯­è¨€ç°è±¡çš„ç›¸å…³æ€§ã€‚</span></p>
<p>æœºå™¨ç¿»è¯‘ä¸­ï¼Œæœ€éš¾çš„ä¸¤ä¸ªé—®é¢˜ä¹‹ä¸€æ˜¯<span style="color:blue">è¯ä¹‰çš„äºŒä¹‰æ€§</span>ï¼ˆåˆç§°æ­§ä¹‰æ€§ï¼ŒAmbiguationï¼‰é—®é¢˜ã€‚æ¯”å¦‚ Bush å¯ä»¥æ˜¯ç¾å›½æ€»ç»Ÿå¸ƒä»€çš„åå­—ï¼Œä¹Ÿå¯ä»¥æ˜¯çŒæœ¨ä¸›ã€‚é‚£ä¹ˆå¦‚ä½•æ­£ç¡®åœ°ç¿»è¯‘è¿™äº›è¯å‘¢ï¼Ÿ</p>
<p>æ³•ä¸€ï¼šç”¨è¯­æ³•ï¼Œåˆ†æè¯­å¥ï¼Œç­‰ç­‰ã€‚-&gt; è¿„ä»Šä¸ºæ­¢æ²¡æœ‰ä¸€ç§è¯­æ³•èƒ½å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒBushä¸è®ºç¿»è¯‘æˆäººåè¿˜æ˜¯çŒæœ¨ä¸›ï¼Œéƒ½æ˜¯åè¯ï¼Œåœ¨è¯­æ³•ä¸Šæ²¡æœ‰å¤ªå¤§é—®é¢˜ã€‚</p>
<p>æ³•äºŒï¼šåŠ è§„åˆ™â€œæ€»ç»Ÿåšå®¾è¯­æ—¶ï¼Œä¸»è¯­å¾—æ˜¯ä¸€ä¸ªäººâ€ã€‚-&gt; è¦æ˜¯è¿™æ ·ï¼Œè¯­æ³•è§„åˆ™å°±å¤šå¾—æ•°ä¸æ¸…ï¼Œè€Œä¸”è¿˜æœ‰è®¸å¤šä¾‹å¤–ã€‚</p>
<p>çœŸæ­£ç®€å•å´éå¸¸å®ç”¨çš„æ–¹æ³•æ˜¯å®ç”¨äº’ä¿¡æ¯ï¼š</p>
<p><span style="color:blue">é¦–å…ˆä»å¤§é‡æ–‡æœ¬ä¸­æ‰¾å‡ºå’Œæ€»ç»Ÿå¸ƒä»€ä¸€èµ·å‡ºç°çš„äº’ä¿¡æ¯é‡æœ€å¤§çš„ä¸€äº›è¯ï¼Œæ¯”å¦‚æ€»ç»Ÿã€ç¾å›½ã€å›½ä¼šã€åç››é¡¿ï¼Œç­‰ç­‰ã€‚å†ç”¨åŒæ ·çš„æ–¹æ³•æ‰¾å‡ºå’ŒçŒæœ¨ä¸›ä¸€èµ·å‡ºç°çš„äº’ä¿¡æ¯é‡æœ€å¤§çš„è¯ï¼Œæ¯”å¦‚åœŸå£¤ã€æ¤ç‰©ã€é‡ç”Ÿï¼Œç­‰ç­‰ã€‚æœ‰äº†è¿™ä¸¤ç»„è¯ï¼Œå†ç¿»è¯‘ Bush æ—¶ï¼Œçœ‹çœ‹ä¸Šä¸‹æ–‡ä¸­å“ªç±»ç›¸å…³çš„è¯å¤šå°±å¯ä»¥äº†ã€‚</span></p>
<p>è¿™ç§æ–¹æ³•æœ€åˆç”±å‰å°”ï¼ˆWilliam Galeï¼‰ï¼Œä¸˜å¥‡ï¼ˆKenneth Churchï¼‰å’Œé›…è®©æ–¯åŸºï¼ˆDavid Yarowskyï¼‰æå‡ºã€‚</p>
<h4 id="4-ç›¸å¯¹ç†µ"><a href="#4-ç›¸å¯¹ç†µ" class="headerlink" title="4.ç›¸å¯¹ç†µ"></a>4.ç›¸å¯¹ç†µ</h4><p><strong>â€œç›¸å¯¹ç†µâ€</strong>ï¼Œåœ¨æœ‰äº›æ–‡çŒ®ä¸­å®ƒè¢«ç§°ä¸º<strong>â€œäº¤å‰ç†µâ€</strong>ï¼Œåœ¨è‹±è¯­ä¸­æ˜¯ $Kullback-Leibler Divergence$ã€‚</p>
<p><span style="color:red">ç›¸å¯¹ç†µä¹Ÿç”¨æ¥è¡¡é‡ç›¸å…³æ€§ï¼Œä½†å’Œå˜é‡çš„äº’ä¿¡æ¯çš„ä¸åŒï¼Œå®ƒç”¨æ¥è¡¡é‡ä¸¤ä¸ªå–å€¼ä¸ºæ­£æ•°çš„å‡½æ•°çš„ç›¸ä¼¼æ€§</span>ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
KL(f(x)||g(x))=\sum_{x\in X} f(x)log\frac{f(x)}{g(x)}</script><p>ç»“è®ºï¼š</p>
<ol>
<li><p><span style="color:blue">å¯¹äºä¸¤ä¸ªå®Œå…¨ç›¸åŒçš„å‡½æ•°ï¼Œå®ƒä»¬çš„ç›¸å¯¹ç†µç­‰äºé›¶ã€‚</span></p>
</li>
<li><p><span style="color:blue">ç›¸å¯¹ç†µè¶Šå¤§ï¼Œä¸¤ä¸ªå‡½æ•°çš„å·®å¼‚è¶Šå¤§ï¼›åä¹‹ï¼Œç›¸å¯¹ç†µè¶Šå°ï¼Œä¸¤ä¸ªå‡½æ•°çš„å·®å¼‚è¶Šå°ã€‚</span></p>
</li>
<li><span style="color:blue">å¯¹äºæ¦‚ç‡åˆ†å¸ƒæˆ–æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œå¦‚æœå–å€¼å‡å¤§äºé›¶ï¼Œç›¸å¯¹ç†µå¯ä»¥åº¦é‡ä¸¤ä¸ªéšæœºåˆ†å¸ƒçš„å·®å¼‚æ€§ã€‚</span></li>
</ol>
<p>ç›¸å¯¹ç†µæ˜¯ä¸å¯¹ç§°çš„ï¼Œå³</p>
<script type="math/tex; mode=display">
KL(f(x)||g(x)) \neq KL(g(x)||f(x))</script><p>è¿™æ ·ä½¿ç”¨èµ·æ¥æœ‰æ—¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œä¸ºäº†è®©å®ƒå¯¹ç§°ï¼Œè©¹æ£®å’Œé¦™å†œæå‡ºä¸€ç§æ–°çš„ç›¸å¯¹ç†µçš„è®¡ç®—æ–¹æ³•ï¼Œå°†ä¸Šé¢çš„ä¸ç­‰å¼ä¸¤è¾¹å–å¹³å‡ï¼Œå³</p>
<script type="math/tex; mode=display">
JS(f(x)||g(x))=\frac{1}{2}[KL(f(x)||g(x))+KL(g(x)||f(x))]</script><p>ç›¸å¯¹ç†µæœ€æ—©æ˜¯ç”¨åœ¨ä¿¡å·å¤„ç†ä¸Šã€‚å¦‚æœä¸¤ä¸ªéšæœºä¿¡å·ï¼Œå®ƒä»¬çš„ç›¸å¯¹ç†µè¶Šå°ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªä¿¡å·è¶Šæ¥è¿‘ï¼Œå¦åˆ™ä¿¡å·çš„å·®å¼‚è¶Šå¤§ã€‚åæ¥ç ”ç©¶ä¿¡æ¯å¤„ç†çš„å­¦è€…ä»¬ä¹Ÿç”¨å®ƒæ¥<span style="color:red">è¡¡é‡ä¸¤æ®µä¿¡æ¯çš„ç›¸ä¼¼ç¨‹åº¦ï¼Œæ¯”å¦‚è¯´å¦‚æœä¸€ç¯‡æ–‡ç« æ˜¯ç…§æŠ„æˆ–è€…æ”¹å†™å¦ä¸€ç¯‡ï¼Œé‚£ä¹ˆè¿™ä¸¤ç¯‡æ–‡ç« ä¸­è¯é¢‘åˆ†å¸ƒçš„ç›¸å¯¹ç†µå°±éå¸¸å°ï¼Œæ¥è¿‘äºé›¶</span>ã€‚<span style="background:yellow">åœ¨Googleè‡ªåŠ¨é—®ç­”ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸Šé¢çš„è©¹æ£®-é¦™å†œåº¦é‡æ¥è¡¡é‡ä¸¤ä¸ªç­”æ¡ˆçš„ç›¸ä¼¼æ€§ã€‚</span></p>
<p>ç›¸å¯¹ç†µåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­è¿˜æœ‰å¾ˆå¤šåº”ç”¨ï¼Œæ¯”å¦‚ç”¨æ¥è¡¡é‡ä¸¤ä¸ªå¸¸ç”¨è¯ï¼ˆåœ¨è¯­æ³•å’Œè¯­ä¹‰ä¸Šï¼‰åœ¨ä¸åŒæ–‡æœ¬ä¸­çš„æ¦‚ç‡åˆ†å¸ƒï¼Œçœ‹å®ƒä»¬æ˜¯å¦åŒä¹‰ã€‚å¦å¤–ï¼Œåˆ©ç”¨ç›¸å¯¹ç†µï¼Œè¿˜å¯ä»¥å¾—åˆ°ä¿¡æ¯æ£€ç´¢ä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µï¼šè¯é¢‘ç‡ï¼é€†å‘æ–‡æ¡£é¢‘ç‡ï¼ˆTF-IDFï¼‰ã€‚</p>]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>Precision, Recall, ROCæ›²çº¿ç­‰</title>
    <url>/2020/08/07/Precision-Recall-ROC%E6%9B%B2%E7%BA%BF%E7%AD%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="1-Precision-Recall"><a href="#1-Precision-Recall" class="headerlink" title="1.Precision, Recall"></a>1.Precision, Recall</h4><p>å‡†ç¡®ç‡ <script type="math/tex">Accuracy = \frac{TP+TN}{TP+TN+FP+FN}</script></p>
<p>ç²¾ç¡®ç‡ <script type="math/tex">Precision = \frac{TP}{TP+FP}</script>ï¼Œé¢„æµ‹ä¸ºpositiveä¸­ï¼Œå®é™…ä¸ºpositiveçš„æ¯”ä¾‹ï¼Œåæ˜ åˆ†ç±»å™¨çš„å‡†ç¡®æ€§</p>
<p>å¬å›ç‡ <script type="math/tex">Recall = \frac{TP}{TP+FN}</script>ï¼Œå®é™…ä¸ºpositiveä¸­ï¼Œé¢„æµ‹ä¸ºpositiveçš„æ¯”ä¾‹ï¼Œåæ˜ åˆ†ç±»å™¨çš„å®Œå¤‡æ€§</p>
<p>Få€¼ä¸ºç²¾ç¡®ç‡å’Œå¬å›ç‡çš„è°ƒå’Œå¹³å‡ï¼š</p>
<script type="math/tex; mode=display">
F1\_Score=\frac{2*Precision*Recall}{Precision+Recall}</script><p><img src="/2020/08/07/Precision-Recall-ROCæ›²çº¿ç­‰/image-20210718110616770.png" alt="image-20210718110616770" style="zoom: 60%;"></p>
<p>ä»€ä¹ˆæƒ…å†µä¸‹æ›´æ³¨é‡å“ªä¸ªæŒ‡æ ‡ï¼Ÿ</p>
<ul>
<li><p>æ³¨é‡ <script type="math/tex">Precision = \frac{TP}{TP+FP}</script>ï¼Œå¸Œæœ› FP å° -&gt; åˆ¤æ–­ä¸ºæ­£å®é™…ä¸ºè´Ÿçš„æƒ…å†µå°‘ -&gt; åƒåœ¾é‚®ä»¶ (åƒåœ¾é‚®ä»¶ä¸º1)</p>
</li>
<li><p>æ³¨é‡ <script type="math/tex">Recall = \frac{TP}{TP+FN}</script>ï¼Œå¸Œæœ› FN å° -&gt; åˆ¤æ–­ä¸ºè´Ÿå®é™…ä¸ºæ­£çš„æƒ…å†µå°‘ -&gt; ä¿¡è´·é£æ§ (åå®¢æˆ·ä¸º1)</p>
</li>
</ul>
<h4 id="2-TPR-FPR"><a href="#2-TPR-FPR" class="headerlink" title="2.TPR,FPR"></a>2.TPR,FPR</h4><script type="math/tex; mode=display">
TPR (True\ Positive\ Rate) = \frac{TP}{TP+FN}</script><p><strong>TPR ç­‰ä»·äº Recall</strong>ï¼Œæ­£æ ·æœ¬ä¸­æ­£ç¡®åˆ†ç±»çš„æ¯”ä¾‹ï¼ˆæ‰€æœ‰çœŸå®çš„1ä¸­ï¼Œæœ‰å¤šå°‘è¢«æ¨¡å‹æˆåŠŸé€‰å‡ºï¼‰</p>
<script type="math/tex; mode=display">
FPR(False\ Positive\ Rate) = \frac{FP}{FP+TN}</script><p>FPRï¼Œè´Ÿæ ·æœ¬ä¸­é”™åˆ†çš„æ¯”ä¾‹ï¼ˆæ‰€æœ‰çœŸå®çš„0ä¸­ï¼Œæœ‰å¤šå°‘è¢«æ¨¡å‹è¯¯åˆ¤ä¸º1ï¼‰</p>
<p><img src="/2020/08/07/Precision-Recall-ROCæ›²çº¿ç­‰/image-20210718110748865.png" alt="image-20210718110748865" style="zoom: 50%;"></p>
<h4 id="3-Sensitivity-Specificity"><a href="#3-Sensitivity-Specificity" class="headerlink" title="3. Sensitivity, Specificity"></a>3. Sensitivity, Specificity</h4><p>çµæ•åº¦ <script type="math/tex">Sensitivity = \frac{TP}{TP+FN}</script>ï¼Œ<strong>ç­‰ä»·äº Recall</strong>ï¼Œæ­£æ ·æœ¬ä¸­æ­£ç¡®åˆ†ç±»çš„æ¯”ä¾‹ (Accuracy with respect to positive cases, also called <script type="math/tex">True\ Positive\ Rate</script>) (é¢„æµ‹ä¸ºpositiveå å®é™…çœŸæ­£ä¸ºpositiveçš„æ¯”ä¾‹)</p>
<p>ç‰¹å¼‚åº¦ <script type="math/tex">Specificity = \frac{TN}{TN+FP}</script>ï¼Œè´Ÿæ ·æœ¬ä¸­æ­£ç¡®åˆ†ç±»çš„æ¯”ä¾‹ (Accuracy with respect to negative cases) (å°†negativeé¢„æµ‹ä¸ºpositiveå å®é™…çœŸæ­£ä¸ºnegativeçš„æ¯”ä¾‹)</p>
<script type="math/tex; mode=display">FPR=1-Specificity</script><p><img src="/2020/08/07/Precision-Recall-ROCæ›²çº¿ç­‰/1596783235673.png" alt="1596783235673" style="zoom: 67%;"></p>
<hr>
<h4 id="4-ROC-æ›²çº¿"><a href="#4-ROC-æ›²çº¿" class="headerlink" title="4. ROC æ›²çº¿"></a>4. ROC æ›²çº¿</h4><p>ROCæ›²çº¿ï¼šROCæ›²çº¿æ˜¯ä¸€ä¸ªç”»åœ¨äºŒç»´å¹³é¢ä¸Šçš„æ›²çº¿ï¼Œæ¨ªåæ ‡æ˜¯FPRï¼ˆè´Ÿæ ·æœ¬ä¸­é”™åˆ†çš„æ¯”ä¾‹ï¼‰,çºµåæ ‡æ˜¯TPRï¼ˆTPRç­‰ä»·äºrecallï¼Œæ­£æ ·æœ¬ä¸­æ­£ç¡®åˆ†ç±»çš„æ¯”ä¾‹ï¼‰ã€‚å¯¹æŸä¸ªåˆ†ç±»å™¨è€Œè¨€ï¼Œæ ¹æ®å…¶åœ¨æµ‹è¯•æ ·æœ¬ä¸Šçš„è¡¨ç°å¯ä»¥å¾—åˆ°ä¸€ä¸ª(FPR,TPR)ç‚¹å¯¹ï¼Œè°ƒæ•´åˆ†ç±»æ—¶ä½¿ç”¨çš„é˜ˆå€¼ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ›²çº¿ï¼Œå°±æ˜¯ROCæ›²çº¿ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ›²çº¿åº”è¯¥å¤„äºå¯¹è§’çº¿çš„ä¸Šæ–¹ï¼ˆå¯¹è§’çº¿ä»£è¡¨çš„æ˜¯ä¸€ä¸ªéšæœºåˆ†ç±»å™¨ï¼‰ã€‚</p>
<p><img src="/2020/08/07/Precision-Recall-ROCæ›²çº¿ç­‰/1596778766409.png" alt="1596778766409"></p>
<hr>
<blockquote>
<p>å‚è€ƒ <a href="https://www.sohu.com/a/132667664_278472" target="_blank" rel="noopener">ã€å»ºæ¨¡åŸºç¡€è¯¾ã€‘ROCã€K-Sï¼Œæ•™ä½ å·§å¦™ä½¿ç”¨æ¨¡å‹è¯„ä»·æŒ‡æ ‡ (sohu.com)</a></p>
</blockquote>
<p>æœ€ç†æƒ³çš„æ¨¡å‹ï¼Œå½“ç„¶æ˜¯TPRå°½é‡é«˜è€ŒFPRå°½é‡ä½å•¦ï¼Œç„¶è€Œä»»ä½•æ¨¡å‹åœ¨æé«˜æ­£ç¡®é¢„æµ‹æ¦‚ç‡çš„åŒæ—¶ï¼Œä¹Ÿä¼šéš¾ä»¥é¿å…åœ°å¢åŠ è¯¯åˆ¤ç‡ã€‚å¬èµ·æ¥æœ‰ç‚¹æŠ½è±¡ï¼Œå¥½åœ¨æœ‰ROCæ›²çº¿éå¸¸å½¢è±¡åœ°è¡¨è¾¾äº†äºŒè€…ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p>å¯¹äºä¸€ä¸ªäºŒåˆ†ç±»æ¨¡å‹ï¼Œè¾“å‡ºçš„æœ€åˆç»“æœæ˜¯è¿ç»­çš„ï¼ˆæ¦‚ç‡ï¼‰ï¼›å‡è®¾å·²ç»ç¡®å®šä¸€ä¸ªé˜ˆå€¼ï¼Œé‚£ä¹ˆæœ€åˆç»“æœå¤§äºé˜ˆå€¼æ—¶ï¼Œåˆ™è¾“å‡ºæœ€ç»ˆç»“æœä¸º1ï¼Œå°äºé˜ˆå€¼åˆ™è¾“å‡ºä¸º0ã€‚å‡å¦‚é˜ˆå€¼å–å€¼ä¸º0.6ï¼Œé‚£ä¹ˆFPRå’ŒTPRå°±å¯ä»¥è®¡ç®—å‡ºæ­¤æ—¶çš„å–å€¼ï¼Œæ ‡è®°ä¸ºä¸€ä¸ªç‚¹ï¼Œè®°ä¸º(FPR1,TPR1)ï¼›å¦‚æœé˜ˆå€¼å–å€¼ä¸º0.5ï¼ŒåŒç†å¯ä»¥è®¡ç®—å‡ºå¦ä¸€ä¸ªç‚¹ï¼Œè®°ä¸º(FPR2,TPR2)ã€‚è®¾å®šä¸åŒçš„é˜ˆå€¼ï¼Œå°±å¯ä»¥è®¡ç®—ä¸åŒçš„ç‚¹(FPR,TPR)ï¼Œä»¥FPRä¸ºæ¨ªåæ ‡,TPRä¸ºçºµåæ ‡ï¼ŒæŠŠä¸åŒçš„ç‚¹è¿æˆæ›²çº¿ï¼Œå°±å¾—åˆ°äº†<strong>ROCæ›²çº¿</strong>ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œé˜ˆå€¼å¦‚ä½•ç¡®å®šï¼Ÿ</p>
<p>ä»¥Logisticæ¨¡å‹ä¸ºä¾‹ï¼Œæ¨¡å‹è¾“å‡ºçš„ç»“æœå…¶å®æ˜¯æ¦‚ç‡ï¼Œæˆ‘ä»¬é€šè¿‡è®¾å®šé˜ˆå€¼ï¼ŒæŠŠæ¦‚ç‡è½¬åŒ–ä¸ºæœ€ç»ˆçš„è¾“å‡ºç»“æœ0å’Œ1ã€‚é¦–å…ˆå‡ºç°åœ¨æˆ‘ä»¬è„‘ä¸­çš„ç›´è§‚æƒ³æ³•ï¼Œå°±æ˜¯æŠŠ(0,1)åŒºé—´è¿›è¡Œç­‰åˆ†ï¼Œæ¯”å¦‚ç­‰åˆ†ä¸ºåä¸ªåŒºé—´ï¼ˆå…¶å®åˆ†æˆå¤šå°‘ä»½éƒ½å¯ä»¥ï¼Œå¤§å®¶å¯ä»¥è‡ªç”±å‘æŒ¥ï¼‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ†åˆ«ä»¥0.1ï¼Œ0.2ï¼Œ0.3ï¼Œ0.4ï¼Œ0.5ï¼Œ0.6ï¼Œ0.7ï¼Œ0.8ï¼Œ0.9ä¸ºé˜ˆå€¼ï¼Œé¦–å…ˆè®¡ç®—å‡ºæ ¹æ®é˜ˆå€¼åˆ¤å®šå‡ºçš„0å’Œ1æœ‰å¤šå°‘ï¼Œä»¥åŠâ€œåˆ¤å®šä¸º1çœŸå®ä¸º1â€å’Œâ€œåˆ¤æ–­ä¸º1çœŸå®ä¸º0â€çš„æœ‰å¤šå°‘ï¼›ç„¶åè®¡ç®—å‡ºä¸åŒçš„(FPR,TPR)å€¼ï¼›æœ€åæŠŠç‚¹ä¹‹é—´è¿›è¡Œè¿çº¿ï¼Œç”»å‡ºçš„æ›²çº¿å³æ˜¯ROCæ›²çº¿ã€‚</p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥æŸå•†ä¸šé“¶è¡ŒæŸæ—¶é—´æ®µå†…æŸæ”¯è¡Œå®¢æˆ·çš„é€¾æœŸç›¸å…³æ•°æ®ä¸ºä¾‹è¯¦ç»†è¯´æ˜ï¼šPä»£è¡¨æ­¤æ”¯è¡Œçš„æŸå®¢æˆ·çš„é€¾æœŸç‡ï¼ˆæš‚ä¸”å®šä¹‰ä¸ºåœ¨æ­¤æ—¶é—´æ®µå†…æŸå®¢æˆ·çš„é€¾æœŸå¯èƒ½æ€§ï¼‰ï¼ŒYä»£è¡¨æ˜¯å¦ä¸ºé«˜é€¾æœŸå®¢æˆ·ï¼ŒXæ˜¯ä¸é€¾æœŸæœ‰å…³çš„ç›¸å…³æŒ‡æ ‡ï¼Œæ¯”å¦‚è¡Œä¸šã€ä¼ä¸šè§„æ¨¡ã€å®¢æˆ·çš„äº”çº§åˆ†ç±»ç­‰ç­‰ã€‚</p>
<p>ç„¶è€Œï¼Œå½“æŠŠè¿™ä¸ªç›´è§‚çš„æƒ³æ³•å¯¹æ¡ˆä¾‹æ•°æ®ä»˜è¯¸å®æ–½çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°è®¡ç®—å‡ºçš„æ¦‚ç‡å€¼éƒ½è½åœ¨[0.0092,0.578]åŒºé—´èŒƒå›´å†…ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœè¿˜ç”¨ä¸Šé¢çš„â€œç›´è§‚æƒ³æ³•â€ï¼ˆå³ä»ç„¶å‡å®šPå°äºé˜ˆå€¼æ—¶ï¼Œåˆ¤å®šä¸º0ï¼‰ï¼Œé‚£ä¹ˆè®¾å®šé˜ˆå€¼ä¸º0.1åˆ°0.5æ—¶ï¼Œèƒ½å¤Ÿè®¡ç®—å‡ºä¸åŒçš„(FPR,TPR)å€¼ï¼›è€Œå°†é˜ˆå€¼å–åˆ°0.6åˆ°0.9æ—¶ï¼Œæ¨¡å‹çš„åˆ¤å®šç»“æœä¸ºæ‰€æœ‰çš„æ ·æœ¬å°±éƒ½æ˜¯0äº†â€¦â€¦so sadï¼æ­¤æ—¶è®¡ç®—å‡ºçš„(FPR,TPR)å€¼éƒ½æ˜¯(0,0)ï¼ŒROCæ›²çº¿çš„ç‚¹ç”±11ä¸ªå˜æˆäº†6ä¸ªâ€¦â€¦.</p>
<p>é¢å¯¹è¿™ä¸ªç‰¹æ®Šæ¡ˆä¾‹ï¼Œæˆ‘ä»¬çš„ç›´è§‚æƒ³æ³•è‚¯å®šéœ€è¦æ”¹è¿›ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬çš„å®ç°æ–¹æ³•æ˜¯ï¼š</p>
<blockquote>
<ol>
<li>æŠŠ(0,1)åŒºé—´å‡çº§ä¸º(min(P),max(P))ï¼›</li>
<li>å–å€¼(min(P),max(P))/10ï¼Œè®¾å®šé˜ˆå€¼ä¸º(min(P),max(P))*k/10ï¼Œå…¶ä¸­k=1,2,3,â€¦,9ï¼›</li>
<li>æ ¹æ®ä¸åŒçš„é˜€å€¼ï¼Œè®¡ç®—å‡ºä¸åŒçš„(FPR,TPR)å€¼ã€‚</li>
</ol>
</blockquote>
<p>è¿™æ—¶å€™å†ç”»å‡ºROCæ›²çº¿ï¼Œå°±é¿å…äº†ä¸Šé¢çš„é—®é¢˜ã€‚ç„¶è€Œå°ä¼™ä¼´åˆå‘é—®äº†ï¼šè¿™æ ·åœ¨å†™ä»£ç å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡éƒ½è¦å’Œé˜ˆå€¼è¿›è¡Œåšæ¯”è¾ƒï¼Œè®¡ç®—é‡æ¯”è¾ƒå¤§ï¼Œä¸å¦‚å…ˆå¯¹æ ·æœ¬è®¡ç®—å‡ºçš„På€¼ä»å°åˆ°å¤§æ’åºï¼ˆå½“ç„¶ä»å¤§åˆ°å°ä¹Ÿå¯ä»¥ï¼‰ï¼Œå–å‰ç™¾åˆ†ä¹‹å‡ ï¼ˆæ¯”å¦‚10%ï¼‰å¤„çš„å€¼ä¸ºé˜ˆå€¼ï¼Œé‚£ä¹ˆæ’åºä¹‹åå‰ç™¾åˆ†ä¹‹å‡ ï¼ˆæ¯”å¦‚å‰10%ï¼‰çš„åˆ¤å®šä¸º0ï¼Œå…¶ä»–åˆ™åˆ¤å®šä¸º1ã€‚è¿™æ ·è®¡ç®—é‡å°±å°‘äº†å¾ˆå¤šå•¦ï¼</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬ç»§ç»­æ”¹è¿›é˜ˆå€¼çš„è®¾ç½®ï¼Œ<strong>é¦–å…ˆæŠŠLogisticæ¨¡å‹è¾“å‡ºçš„æ¦‚ç‡ä»å°åˆ°å¤§æ’åºï¼Œç„¶åå–10%çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯æ¦‚ç‡å€¼ï¼‰ä½œä¸ºé˜ˆå€¼ï¼ŒåŒç†æŠŠ10%*kï¼ˆk=1,2,3,â€¦,9ï¼‰å¤„çš„å€¼ä½œä¸ºé˜ˆå€¼ï¼Œè®¡ç®—å‡ºä¸åŒçš„(FPR,TPR)å€¼ï¼Œ</strong>å°±å¯ä»¥ç”»å‡ºROCæ›²çº¿å•¦ã€‚</p>
<p>å¯æ˜¯ï¼Œä»å°åˆ°å¤§æ’åºä¹‹åï¼Œæ¯æ¬¡å–å‰ç™¾åˆ†ä¹‹å‡ å¤„çš„å€¼ä¸ºé˜ˆå€¼å‘¢ï¼Ÿæ€»å…±åˆ†æˆ10ä»½è¿˜æ˜¯100è¿˜æ˜¯1000ä»½å‘¢ï¼Ÿæœ‰é€‰æ‹©å›°éš¾ç—‡çš„å°ä¼™ä¼´åˆçº ç»“äº†ï¼Œå‘Šè¯‰ä½ ä¸ªåŠæ³•ï¼Œåˆ«çº ç»“ï¼Œ<strong>æœ‰å¤šå°‘ä¸ªæ¨¡å‹è¾“å‡ºçš„æ¦‚ç‡å€¼å°±åˆ†æˆå¤šå°‘ä»½ï¼Œä¸å†è€ƒè™‘ç™¾åˆ†ä¹‹å‡ </strong>ï¼æ¯”å¦‚Logisticæ¨¡å‹è¾“å‡ºçš„æ¦‚ç‡æœ‰214ä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠ214ä¸ªç›®æ ‡å˜é‡ä»å°åˆ°å¤§è¿›è¡Œæ’åºï¼Œç„¶ååˆ†åˆ«ä»¥è¿™214ä¸ªçš„æ¦‚ç‡å€¼ä¸ºé˜ˆå€¼ï¼Œå¯ä»¥è®¡ç®—å‡º214ä¸ªä¸åŒçš„(FPR,TPR)å€¼ï¼Œä¹Ÿå¯ä»¥ç”»å‡ºROCæ›²çº¿ã€‚</p>
<p>ROCæ›²çº¿ç”»å¥½åï¼Œå°±è¦å‘æŒ¥ç”¨å¤„ï¼å¯¹äºä¸€ä¸ªæ¨¡å‹ä¸€ç»„å‚æ•°å¯ä»¥ç”»å‡ºä¸€æ¡ROCæ›²çº¿ï¼Œæ­¤æ—¶æœ€ä¼˜çš„é˜ˆå€¼æ˜¯ä»€ä¹ˆå‘¢ï¼ˆå³ä»¥ä»€ä¹ˆé˜ˆå€¼ä¸ºå‡†ï¼Œå»æœ€ç»ˆåˆ’åˆ†ä¸º0ï¼Œ1ï¼‰ï¼ŸTPRå’ŒFPRæ˜¯æ­£ç›¸å…³çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ­£ç¡®åˆ¤å®šå‡º1çš„æ•°é‡å¢åŠ æ—¶ï¼Œå¿…ç„¶è¦ä¼´éšç€ä»£ä»·ï¼šè¯¯åˆ¤ä¸º1çš„FPä¹Ÿå¢åŠ ã€‚</p>
<p>ä»ROCæ›²çº¿ä¸Šä¹Ÿå¯ä»¥åæ˜ å‡ºè¿™ç§å˜åŒ–ï¼Œä»Î”TPR&gt;Î”FPRåˆ°Î”TPR&lt;Î”FPRï¼ˆä¸€å¼€å§‹æ›²çº¿æ¯”è¾ƒé™¡ï¼ŒTPRå¢é•¿å¾—å¿«ï¼ŒFPRå¢é•¿å¾—æ…¢ï¼Œå³Î”TPR&gt;Î”FPRï¼›åˆ°åé¢ï¼Œæ›²çº¿æ¯”è¾ƒå¹³ç¼“ï¼ŒTPRå¢é•¿å¾—æ…¢ï¼ŒFPRå¢é•¿å¾—å¿«ï¼Œæœ‰Î”TPR&lt;Î”FPRï¼‰ï¼Œæœ€ç†æƒ³çš„é˜€å€¼æ˜¯Î”TPR=Î”FPRæ—¶ã€‚ä½†æ˜¯åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘èƒ½å¤Ÿç»™å‡ºROCæ›²çº¿çš„å‡½æ•°è¡¨è¾¾å¼ï¼Œè¿™æ—¶çš„è§£å†³æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<blockquote>
<p>ï¼ˆ1ï¼‰ç»™å‡ºROCæ›²çº¿çš„æ‹Ÿåˆå‡½æ•°è¡¨è¾¾å¼ï¼Œç„¶åè®¡ç®—å‡ºæœ€ä¼˜çš„é˜ˆå€¼ï¼Œè¿™ä¸ªç›®å‰é€šè¿‡è½¯ä»¶å®ç°éš¾åº¦ä¸å¤§ï¼›å¦‚ä½•ç»™å‡ºæœ€ä¼˜æ‹Ÿåˆå‡½æ•°ï¼Œè®¡ç®—æ•°å­¦ä¸Šæœ‰å¾ˆå¤šæ–¹æ³•ï¼›</p>
<p>ï¼ˆ2ï¼‰è®¡ç®—å‡ºÎ”TPRâ‰ˆÎ”FPRçš„ç‚¹å³ä¸ºæœ€ä¼˜çš„é˜€å€¼ï¼›</p>
<p>ï¼ˆ3ï¼‰ä»ä¸šåŠ¡ä¸Šç»™å‡ºæœ€ä¼˜çš„é˜€å€¼ã€‚</p>
</blockquote>
<p>å¯¹äºä¸€ä¸ªæ¨¡å‹å¤šä¸ªå‚æ•°çš„æƒ…å†µï¼Œå°±å¯ä»¥ç”»å‡ºå¤šæ¡ROCæ›²çº¿ï¼Œæ­¤æ—¶å“ªç»„å‚æ•°æ˜¯æœ€ä¼˜çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç»“åˆ<strong>AUCæŒ‡æ ‡</strong>ï¼Œå“ªç»„å‚æ•°çš„AUCå€¼è¶Šé«˜ï¼Œè¯´æ˜æ­¤ç»„å‚æ•°ä¸‹çš„æ¨¡å‹æ•ˆæœè¶Šå¥½ã€‚å¦å¤–ï¼Œåœ¨SASçš„è¯„åˆ†æ¨¡å‹è¾“å‡ºä¸­ï¼Œå¸¸ç”¨æ¥åˆ¤æ–­æ”¶å…¥åˆ†é…å…¬å¹³ç¨‹åº¦çš„giniç³»æ•°ä¹Ÿç”¨æ¥è¯„ä»·æ¨¡å‹ï¼Œæ­¤æ—¶gini=2*AUC-1.</p>
<hr>
<p>ROCæ›²çº¿çš„ç‰¹æ€§ï¼šå½“æµ‹è¯•é›†ä¸­çš„æ­£è´Ÿæ ·æœ¬çš„åˆ†å¸ƒï¼ˆæ¯”ä¾‹ï¼‰å˜åŒ–çš„æ—¶å€™ï¼ŒROCæ›²çº¿èƒ½ä¿æŒä¸å˜ã€‚ç±»ä¸å¹³è¡¡ç°è±¡å¯ä»¥ä½¿ç”¨ROCæ›²çº¿æ¥è¯„ä¼°æ¨¡å‹çš„æ€§èƒ½ã€‚</p>
<p><img src="/2020/08/07/Precision-Recall-ROCæ›²çº¿ç­‰/1602655652264.png" alt="1602655652264"></p>
<p><img src="/2020/08/07/Precision-Recall-ROCæ›²çº¿ç­‰/1602655688379.png" alt="1602655688379"></p>
<p>AUC (Area Under the ROC Curve) å€¼ï¼šROCæ›²çº¿ä¸‹çš„é¢ç§¯ï¼Œå–å€¼èŒƒå›´åœ¨ 0.5 åˆ° 1 ä¹‹é—´ã€‚ä½¿ç”¨AUCå€¼ä½œä¸ºè¯„ä»·æ ‡å‡†æ˜¯å› ä¸ºå¾ˆå¤šæ—¶å€™ROCæ›²çº¿å¹¶ä¸èƒ½æ¸…æ™°çš„è¯´æ˜å“ªä¸ªåˆ†ç±»å™¨çš„æ•ˆæœæ›´å¥½ï¼Œè€Œä½œä¸ºä¸€ä¸ªæ•°å€¼ï¼Œå¯¹åº”AUCæ›´å¤§çš„åˆ†ç±»å™¨æ•ˆæœæ›´å¥½ã€‚</p>
<h4 id="5-KS-æ›²çº¿"><a href="#5-KS-æ›²çº¿" class="headerlink" title="5. KS æ›²çº¿"></a>5. KS æ›²çº¿</h4><blockquote>
<p>å‚è€ƒ <a href="https://www.sohu.com/a/132667664_278472" target="_blank" rel="noopener">ã€å»ºæ¨¡åŸºç¡€è¯¾ã€‘ROCã€K-Sï¼Œæ•™ä½ å·§å¦™ä½¿ç”¨æ¨¡å‹è¯„ä»·æŒ‡æ ‡ (sohu.com)</a></p>
</blockquote>
<p>å¸¸ç”¨çš„æ¨¡å‹è¯„ä»·è¿˜æœ‰<strong>K-Sæ›²çº¿</strong>ï¼Œå®ƒå’ŒROCæ›²çº¿çš„ç”»æ³•å¼‚æ›²åŒå·¥ã€‚ä»¥Logisticæ¨¡å‹ä¸ºä¾‹ï¼Œé¦–å…ˆæŠŠLogisticæ¨¡å‹è¾“å‡ºçš„æ¦‚ç‡ä»å¤§åˆ°å°æ’åºï¼Œç„¶åå–10%çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯æ¦‚ç‡å€¼ï¼‰ä½œä¸ºé˜ˆå€¼ï¼ŒåŒç†æŠŠ10%*kï¼ˆk=1,2,3,â€¦,9ï¼‰å¤„çš„å€¼ä½œä¸ºé˜€å€¼ï¼Œè®¡ç®—å‡ºä¸åŒçš„FPRå’ŒTPRå€¼ï¼Œä»¥10%*kï¼ˆk=1,2,3,â€¦,9ï¼‰ä¸ºæ¨ªåæ ‡<strong>ï¼ˆä»¥é˜ˆå€¼ä¸ºæ¨ªåæ ‡ï¼‰ï¼Œåˆ†åˆ«ä»¥TPRå’ŒFPRçš„å€¼ä¸ºçºµåæ ‡ï¼Œå°±å¯ä»¥ç”»å‡ºä¸¤ä¸ªæ›²çº¿ï¼Œè¿™å°±æ˜¯K-Sæ›²çº¿ã€‚</strong></p>
<p>ä»K-Sæ›²çº¿å°±èƒ½è¡ç”Ÿå‡ºKSå€¼ï¼Œ<code>KS=max(TPR-FPR)</code>ï¼ˆæˆ–è€…<code>KS=max(|TPR-FPR|)</code>ï¼‰ï¼Œå³æ˜¯ä¸¤æ¡æ›²çº¿ä¹‹é—´çš„æœ€å¤§é—´éš”è·ç¦»ã€‚å½“(TPR-FPR)æœ€å¤§æ—¶ï¼Œä¹Ÿå°±æ˜¯Î”TPR-Î”FPR=0ï¼Œè¿™å’ŒROCæ›²çº¿ä¸Šæ‰¾æœ€ä¼˜é˜ˆå€¼çš„æ¡ä»¶Î”TPR=Î”FPRæ˜¯ä¸€æ ·çš„ã€‚ä»è¿™ç‚¹ä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒROCæ›²çº¿ã€K-Sæ›²çº¿ã€KSå€¼çš„æœ¬è´¨æ˜¯ç›¸åŒçš„ã€‚</p>
<p>ä»¥æŸæ¨¡å‹çš„è¯„ä»·ä¸ºä¾‹ï¼Œåœ¨K-Sæ›²çº¿çš„æ¨ªåæ ‡0.4æ—¶å–KS=0.53ï¼Œå¯ä»¥è®¤ä¸ºæœ€ä¼˜çš„é˜€å€¼æ˜¯ä»å°åˆ°å¤§æ’åºçš„40%å¤„çš„å€¼ï¼š</p>
<p><img src="/2020/08/07/Precision-Recall-ROCæ›²çº¿ç­‰/image-20210718110047789.png" alt="image-20210718110047789"></p>
<p>K-Sæ›²çº¿èƒ½ç›´è§‚åœ°æ‰¾å‡ºæ¨¡å‹ä¸­å·®å¼‚æœ€å¤§çš„ä¸€ä¸ªåˆ†æ®µï¼Œæ¯”å¦‚è¯„åˆ†æ¨¡å‹å°±æ¯”è¾ƒé€‚åˆç”¨KSå€¼è¿›è¡Œè¯„ä¼°ï¼›ä½†åŒæ—¶ï¼ŒKSå€¼åªèƒ½åæ˜ å‡ºå“ªä¸ªåˆ†æ®µæ˜¯åŒºåˆ†åº¦æœ€å¤§çš„ï¼Œä¸èƒ½åæ˜ å‡ºæ‰€æœ‰åˆ†æ®µçš„æ•ˆæœã€‚æ‰€ä»¥ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ¨¡å‹è¯„ä»·ä¸€èˆ¬éœ€è¦å°†ROCæ›²çº¿ã€K-Sæ›²çº¿ã€KSå€¼ã€AUCæŒ‡æ ‡ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p>
<h4 id="6-åœ¨-Python-ä¸­çš„å®ç°"><a href="#6-åœ¨-Python-ä¸­çš„å®ç°" class="headerlink" title="6. åœ¨ Python ä¸­çš„å®ç°"></a>6. åœ¨ Python ä¸­çš„å®ç°</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> precision_score, recall_score, f1_score</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> confusion_matrix</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> roc_auc_score</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> roc_curve</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">evaluation_metric</span><span class="params">(y_true, y_pred, y_pred_prob)</span>:</span></span><br><span class="line">    print(<span class="string">"precision: "</span>, precision_score(y_true, y_pred))</span><br><span class="line">    print(<span class="string">"recall: "</span>, recall_score(y_true, y_pred))</span><br><span class="line">    print(<span class="string">"f1_score: "</span>, f1_score(y_true,  y_pred))</span><br><span class="line">    print(<span class="string">"========="</span>)</span><br><span class="line"></span><br><span class="line">    print(<span class="string">"confusion matrix: "</span>)</span><br><span class="line">    cm = confusion_matrix(y_true, y_pred)</span><br><span class="line">    print(cm)</span><br><span class="line">    print(<span class="string">"========="</span>)</span><br><span class="line"></span><br><span class="line">    print(<span class="string">"auc: "</span>, roc_auc_score(y_true, y_pred_prob)) <span class="comment"># aucç”¨é¢„æµ‹æ¦‚ç‡è¿›è¡Œè®¡ç®—</span></span><br><span class="line">    </span><br><span class="line">    fpr, tpr, thresholds = roc_curve(y_true, y_pred_prob)</span><br><span class="line">    ks = max(tpr-fpr)</span><br><span class="line">    print(<span class="string">"ks: "</span>, ks)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æ¨èç³»ç»Ÿå†·å¯åŠ¨é—®é¢˜</title>
    <url>/2020/07/30/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E5%86%B7%E5%90%AF%E5%8A%A8%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>æ¥æºäº</p>
<p><a href="https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System" target="_blank" rel="noopener">https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System</a></p>
</blockquote>
<p>å†·å¯åŠ¨ï¼ˆ cold start ï¼‰åœ¨æ¨èç³»ç»Ÿä¸­è¡¨ç¤ºè¯¥ç³»ç»Ÿç§¯ç´¯æ•°æ®é‡è¿‡å°‘ï¼Œæ— æ³•ç»™æ–°ç”¨æˆ·ä½œä¸ªæ€§åŒ–æ¨èçš„é—®é¢˜ï¼Œè¿™æ˜¯äº§å“æ¨èçš„ä¸€å¤§éš¾é¢˜ã€‚æ¯ä¸ªæœ‰æ¨èåŠŸèƒ½çš„äº§å“éƒ½ä¼šé‡åˆ°å†·å¯åŠ¨çš„é—®é¢˜ã€‚ä¸€æ–¹é¢ï¼Œå½“æ–°å•†å“æ—¶ä¸Šæ¶ ä¼šé‡åˆ°å†·å¯åŠ¨çš„é—®é¢˜ï¼Œæ²¡æœ‰æ”¶é›†åˆ°ä»»ä½•ä¸€ä¸ªç”¨æˆ·å¯¹å…¶æµè§ˆã€ç‚¹å‡»æˆ–è€…è´­ä¹°çš„è¡Œä¸ºï¼Œä¹Ÿæ— ä»åˆ¤æ–­å¦‚ä½•å°†å•†å“è¿›è¡Œæ¨èï¼›å¦ä¸€æ–¹é¢ï¼Œæ–°ç”¨æˆ·åˆ°æ¥çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰ä»–åœ¨åº”ç”¨ä¸Šçš„è¡Œä¸ºæ•°æ®ï¼Œä¹Ÿæ— æ³•é¢„æµ‹å…¶å…´è¶£ï¼Œå¦‚æœç»™ç”¨æˆ·çš„æ¨èåƒç¯‡å¾‹ï¼Œæ²¡æœ‰äº®ç‚¹ï¼Œä¼šä½¿ç”¨æˆ·åœ¨ä¸€å¼€å§‹å°±å¯¹äº§å“å¤±å»å…´è¶£ï¼Œä»è€Œæ”¾å¼ƒä½¿ç”¨ã€‚æ‰€ä»¥åœ¨å†·å¯åŠ¨çš„æ—¶å€™è¦åŒæ—¶<strong>è€ƒè™‘ç”¨æˆ·çš„å†·å¯åŠ¨å’Œç‰©å“çš„å†·å¯åŠ¨ã€‚</strong></p>
<h3 id="8-1-ç”¨æˆ·å†·å¯åŠ¨"><a href="#8-1-ç”¨æˆ·å†·å¯åŠ¨" class="headerlink" title="8.1 ç”¨æˆ·å†·å¯åŠ¨"></a>8.1 ç”¨æˆ·å†·å¯åŠ¨</h3><p>ç”¨æˆ·å†·å¯åŠ¨ä¸»è¦è§£å†³å¦‚ä½•ç»™æ–°ç”¨æˆ·ä½œä¸ªæ€§åŒ–æ¨èçš„é—®é¢˜ã€‚å½“æ–°ç”¨æˆ·åˆ°æ¥æ—¶ï¼Œæˆ‘ æ²¡æœ‰ä»–çš„è¡Œä¸ºæ•°æ®ï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•æ ¹æ®ä»–çš„å†å²è¡Œä¸ºé¢„ å…¶å…´è¶£ï¼Œä»è€Œæ— æ³•å€Ÿæ­¤ç»™ä»–åšä¸ªæ€§åŒ–æ¨èã€‚è§£å†³æ–¹æ³•å‚è€ƒä»¥ä¸‹ï¼š</p>
<ol>
<li>åˆ©ç”¨ç”¨æˆ·çš„è´¦å·ä¿¡æ¯ã€‚</li>
<li>åˆ©ç”¨ç”¨æˆ·çš„æ‰‹æœº IMEI å·è¿›è¡Œå†·å¯åŠ¨ã€‚</li>
<li>åˆ¶é€ é€‰å·¥é¡µï¼Œè®©ç”¨æˆ·é€‰æ‹©è‡ªå·±æ„Ÿå…´è¶£çš„ç‚¹åï¼Œå³æ—¶ç”Ÿæˆç²—ç²’åº¦çš„æ¨èã€‚</li>
</ol>
<h3 id="8-2-ç‰©å“å†·å¯åŠ¨"><a href="#8-2-ç‰©å“å†·å¯åŠ¨" class="headerlink" title="8.2 ç‰©å“å†·å¯åŠ¨"></a>8.2 ç‰©å“å†·å¯åŠ¨</h3><p>ç‰©å“å†·å¯åŠ¨ä¸»è¦è§£å†³å¦‚ä½•å°†æ–°çš„ç‰©å“æ¨èç»™å¯èƒ½å¯¹å®ƒæ„Ÿå…´è¶£çš„ç”¨æˆ·è¿™ä¸€é—®é¢˜ã€‚è§£å†³æ–¹æ³•å‚è€ƒä»¥ä¸‹ï¼š</p>
<ol>
<li>åˆ©ç”¨ç‰©å“çš„å†…å®¹ã€åˆ†ç±»ä¿¡æ¯ã€‚</li>
<li>åˆ©ç”¨ä¸“å®¶æ ‡æ³¨çš„æ•°æ®ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Recommender System</category>
      </categories>
      <tags>
        <tag>Recommender System</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¨èç³»ç»Ÿæ€»ä½“æ¶æ„åŠç‰¹å¾æ•°æ®</title>
    <url>/2020/07/29/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84%E5%8F%8A%E7%89%B9%E5%BE%81%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>æ¥æºäº</p>
<p><a href="https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System" target="_blank" rel="noopener">https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System</a></p>
</blockquote>
<p><strong>ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿæ˜¯å»ºç«‹åœ¨æµ·é‡æ•°æ®æŒ–æ˜åŸºç¡€ä¸Šçš„ä¸€ç§é«˜çº§å•†åŠ¡æ™ºèƒ½å¹³å°ï¼Œä»¥å¸®åŠ©ç”µå­å•†åŠ¡ç½‘ç«™ä¸ºå…¶é¡¾å®¢è´­ç‰©æä¾›å®Œå…¨ä¸ªæ€§åŒ–çš„å†³ç­–æ”¯æŒå’Œä¿¡æ¯æœåŠ¡ã€‚</strong></p>
<p>å¸¸è§çš„æ¨èæ ä½ä¾‹å¦‚ï¼šæ·˜å®çš„çŒœä½ å–œæ¬¢ã€çœ‹äº†åˆçœ‹ã€æ¨èå•†å“ï¼Œç¾å›¢çš„é¦–é¡µæ¨èã€é™„è¿‘æ¨èç­‰ã€‚</p>
<p>æ¨èç³»ç»Ÿæ˜¯æ¯”è¾ƒåå‘äºå·¥ç¨‹ç±»çš„ç³»ç»Ÿï¼Œè¦åšå¾—æ›´åŠ çš„ç²¾ç¡®ï¼Œéœ€è¦çš„ä¸ä»…ä»…æ˜¯æ¨èç®—æ³•ï¼Œè¿˜æœ‰ç”¨æˆ·æ„å›¾è¯†åˆ«ã€æ–‡æœ¬åˆ†æã€è¡Œä¸ºåˆ†æç­‰ï¼Œæ˜¯ä¸€ä¸ªç»¼åˆæ€§å¾ˆå¼ºçš„ç³»ç»Ÿã€‚</p>
<h2 id="1-æ€»ä½“æ¶æ„"><a href="#1-æ€»ä½“æ¶æ„" class="headerlink" title="1. æ€»ä½“æ¶æ„"></a>1. æ€»ä½“æ¶æ„</h2><p>æœ¬èŠ‚ä»‹ç»çš„å‡ ç§æ¨èç³»ç»Ÿæ¶æ„ï¼Œå¹¶ä¸æ˜¯äº’ç›¸ç‹¬ç«‹çš„å…³ç³»ï¼Œå®é™…çš„æ¨èç³»ç»Ÿå¯èƒ½ä¼šç”¨åˆ°å…¶ä¸­ä¸€ç§æˆ–è€…å‡ ç§çš„æ¶æ„ã€‚åœ¨å®é™…è®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œè¯»è€…å¯ä»¥æŠŠæœ¬æ–‡ä»‹ç»çš„æ¶æ„ä½œä¸ºä¸€ä¸ªè®¾è®¡çš„èµ·ç‚¹ï¼Œæ›´å¤šåœ°ç»“åˆè‡ªèº«ä¸šåŠ¡ç‰¹ç‚¹è¿›è¡Œç‹¬ç«‹æ€ è€ƒï¼Œä»è€Œè®¾è®¡å‡ºé€‚åˆè‡ªèº«ä¸šåŠ¡çš„ç³»ç»Ÿã€‚</p>
<p>æ ¹æ®å“åº”ç”¨æˆ·è¡Œä¸ºçš„é€Ÿåº¦ä¸åŒï¼Œæ¨èç³»ç»Ÿå¯ä»¥å¤§è‡´åˆ†ä¸ºåŸºäº<strong>ç¦»çº¿è®­ç»ƒå’Œåœ¨çº¿è®­ç»ƒ</strong>çš„æ¨èç³»ç»Ÿã€‚</p>
<h3 id="1-1-ç¦»çº¿æ¨è"><a href="#1-1-ç¦»çº¿æ¨è" class="headerlink" title="1.1 ç¦»çº¿æ¨è"></a>1.1 ç¦»çº¿æ¨è</h3><p>åŸºäºç¦»çº¿è®­ç»ƒçš„æ¨èç³»ç»Ÿæ¶æ„æ˜¯æœ€å¸¸è§çš„ä¸€ç§æ¨èç³»ç»Ÿæ¶æ„ã€‚è¿™é‡Œçš„â€œç¦»çº¿â€è®­ç»ƒæŒ‡çš„æ˜¯ä½¿ç”¨å†å²ä¸€æ®µæ—¶é—´ï¼ˆ æ¯”å¦‚å‘¨æˆ–è€…å‡ å‘¨ ï¼‰çš„æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œæ¨¡å‹è¿­ä»£çš„å‘¨æœŸè¾ƒé•¿ï¼ˆä¸€èˆ¬ä»¥å°æ—¶ä¸ºå•ä½ ï¼‰ã€‚æ¨¡å‹æ‹Ÿåˆçš„æ˜¯ç”¨æˆ·çš„ä¸­é•¿æœŸå…´è¶£ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ ä¸€ä¸ªå…¸å‹çš„åŸºäºç¦»çº¿è®­ç»ƒçš„æ¨èç³»ç»Ÿæ¶æ„ç”±<strong>æ•°æ®ä¸ŠæŠ¥ã€ç¦»çº¿è®­ç»ƒã€åœ¨çº¿å­˜å‚¨ã€å®æ—¶è®¡ç®—å’Œ A/B æµ‹è¯•</strong>è¿™å‡ ä¸ªæ¨¡å—ç»„æˆã€‚å…¶ä¸­ï¼Œæ•°æ®ä¸ŠæŠ¥å’Œç¦»çº¿è®­ç»ƒç»„æˆäº†ç›‘ç£å­¦ä¹ ä¸­çš„å­¦ä¹ ç³»ç»Ÿï¼Œè€Œå®æ—¶è®¡ç®—å’Œ A/B æµ‹è¯•ç»„æˆäº†é¢„æµ‹ç³»ç»Ÿã€‚å¦å¤–ï¼Œé™¤äº†æ¨¡å‹ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªåœ¨çº¿å­˜å‚¨æ¨¡å—ï¼Œç”¨äºå­˜å‚¨æ¨¡å‹å’Œæ¨¡å‹éœ€è¦çš„ç‰¹å¾ä¿¡æ¯ä¾›å®æ—¶è®¡ç®—æ¨¡å—è°ƒç”¨ã€‚å›¾ä¸­çš„å„ä¸ªæ¨¡å—ç»„æˆäº†è®­ç»ƒå’Œé¢„æµ‹ä¸¤æ¡æ•°æ®æµï¼Œè®­ç»ƒçš„æ•°æ®æµæœé›†ä¸šåŠ¡çš„æ•°æ®æœ€åç”Ÿæˆæ¨¡å‹å­˜å‚¨äºåœ¨çº¿å­˜å‚¨æ¨¡å—ï¼›é¢„æµ‹çš„æ•°æ®æµæ¥å—ä¸šåŠ¡çš„é¢„æµ‹è¯·æ±‚ï¼Œé€šè¿‡ A/B æµ‹è¯•æ¨¡å—è®¿é—®å®æ—¶è®¡ç®—æ¨¡å—è·å–é¢„æµ‹ç»“æœã€‚</p>
<p><img src="https://camo.githubusercontent.com/256d4abf6809d771af7205fd18eadae4e12936c2/68747470733a2f2f67697465652e636f6d2f6b6b7765697368652f696d616765732f7261772f6d61737465722f4d4c2f323031392d392d385f31302d32322d302e706e67" alt="img"></p>
<a id="more"></a>
<ol>
<li><p><strong>æ•°æ®ä¸ŠæŠ¥</strong>ï¼šæ•°æ®ä¸ŠæŠ¥æ¨¡å—çš„ä½œç”¨æ˜¯æœé›†ä¸šåŠ¡æ•°æ®ç»„æˆè®­ç»ƒæ ·æœ¬ã€‚ä¸€èˆ¬åˆ†ä¸ºæ”¶é›†ã€éªŒè¯ã€æ¸…æ´—å’Œè½¬æ¢å‡ ä¸ªæ­¥éª¤ã€‚å°†æ”¶é›†çš„æ•°æ®è½¬åŒ–ä¸ºè®­ç»ƒæ‰€éœ€è¦çš„æ ·æœ¬æ ¼å¼ï¼Œä¿å­˜åˆ°ç¦»çº¿å­˜å‚¨æ¨¡å—ã€‚</p>
<p><a href="https://camo.githubusercontent.com/04a5b6b6717428ef7ffd4e9e139239bbf0072422/68747470733a2f2f67697465652e636f6d2f6b6b7765697368652f696d616765732f7261772f6d61737465722f4d4c2f323031392d392d385f31302d33332d34362e706e67" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/04a5b6b6717428ef7ffd4e9e139239bbf0072422/68747470733a2f2f67697465652e636f6d2f6b6b7765697368652f696d616765732f7261772f6d61737465722f4d4c2f323031392d392d385f31302d33332d34362e706e67" alt="img"></a></p>
</li>
<li><p><strong>ç¦»çº¿è®­ç»ƒ</strong>ï¼šç¦»çº¿è®­ç»ƒæ¨¡å—åˆç»†åˆ†ä¸º<strong>ç¦»çº¿å­˜å‚¨</strong>å’Œ<strong>ç¦»çº¿è®¡ç®—</strong>ã€‚å®é™…ä¸šåŠ¡ä¸­ä½¿ç”¨çš„æ¨èç³»ç»Ÿä¸€èˆ¬éƒ½éœ€è¦å¤„ç†æµ·é‡çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œæ‰€ä»¥ç¦»çº¿å­˜å‚¨æ¨¡å—éœ€è¦æœ‰ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿæˆ–è€…å­˜å‚¨å¹³å°æ¥å­˜å‚¨è¿™äº›æ•°æ®ã€‚ç¦»çº¿è®¡ç®—å¸¸è§çš„æ“ä½œæœ‰ï¼šæ ·æœ¬æŠ½æ ·ã€ç‰¹å¾å·¥ç¨‹ã€æ¨¡å‹è®­ç»ƒã€ç›¸ä¼¼åº¦è®¡ç®—ç­‰ã€‚</p>
</li>
<li><p><strong>åœ¨çº¿å­˜å‚¨</strong>ï¼šå› ä¸ºçº¿ä¸Šçš„æœåŠ¡å¯¹äºæ—¶å»¶éƒ½æœ‰ä¸¥æ ¼çš„è¦æ±‚ã€‚æ¯”å¦‚ï¼ŒæŸä¸ªç”¨æˆ·æ‰“å¼€æ‰‹æœº APP ï¼Œä»–è‚¯å®šå¸Œæœ›APP èƒ½å¤Ÿå¿«é€Ÿå“åº”ï¼Œå¦‚æœè€—æ—¶è¿‡é•¿ï¼Œå°±ä¼šå½±å“ç”¨æˆ·çš„ä½“éªŒã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™å°±è¦æ±‚æ¨èç³»ç»Ÿåœ¨å‡ åæ¯«ç§’ä»¥å†…å¤„ç†å®Œç”¨æˆ·è¯·æ±‚è¿”å›æ¨èç»“æœï¼Œæ‰€ä»¥ï¼Œé’ˆå¯¹çº¿ä¸Šçš„æœåŠ¡ï¼Œéœ€è¦æœ‰ä¸€ä¸ªä¸“é—¨çš„åœ¨çº¿å­˜å‚¨æ¨¡å—ï¼Œè´Ÿè´£å­˜å‚¨ç”¨äºçº¿ä¸Šçš„æ¨¡å‹å’Œç‰¹å¾æ•°æ® ã€‚</p>
</li>
<li><p><strong>å®æ—¶æ¨è</strong>ï¼šå®æ—¶æ¨èæ¨¡å—çš„åŠŸèƒ½æ˜¯å¯¹æ¥è‡ªä¸šåŠ¡çš„æ–°è¯·æ±‚è¿›è¡Œé¢„æµ‹ã€‚1.è·å–ç”¨æˆ·ç‰¹å¾ï¼›2.è°ƒç”¨æ¨èæ¨¡å‹ï¼›3.ç»“æœæ’åºã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå› ä¸ºä¸šåŠ¡çš„ç‰©å“åˆ—è¡¨å¤ªå¤§ï¼Œå¦‚æœå®æ—¶è®¡ç®—å¯¹æ¯ä¸ªç‰©å“ä½¿ç”¨å¤æ‚çš„æ¨¡å‹è¿›è¡Œæ‰“åˆ†ï¼Œå°±æœ‰å¯èƒ½è€—æ—¶è¿‡é•¿è€Œå½±å“ç”¨æˆ·æ»¡æ„åº¦ã€‚æ‰€ä»¥ï¼Œä¸€ç§å¸¸è§çš„åšæ³•æ˜¯å°†æ¨èåˆ—è¡¨ç”Ÿæˆåˆ†ä¸º<strong>å¬å›</strong>å’Œ<strong>æ’åº</strong>ä¸¤æ­¥ã€‚å¬å›çš„ä½œç”¨æ˜¯ä»å¤§é‡çš„å€™é€‰ç‰©å“ä¸­ï¼ˆä¾‹å¦‚ä¸Šç™¾ä¸‡ï¼‰ç­›é€‰å‡ºä¸€æ‰¹ç”¨æˆ·è¾ƒå¯èƒ½å–œæ¬¢çš„å€™é€‰é›† ï¼ˆä¸€èˆ¬æ˜¯å‡ ç™¾ï¼‰ã€‚æ’åºçš„ä½œç”¨æ˜¯å¯¹å¬å›å¾—åˆ°çš„ç›¸å¯¹è¾ƒå°çš„å€™é€‰é›†ä½¿ç”¨æ’åºæ¨¡å‹è¿›è¡Œæ‰“åˆ†ã€‚æ›´è¿›ä¸€æ­¥ï¼Œåœ¨æ’åºå¾—åˆ°æ¨èåˆ—è¡¨åï¼Œä¸ºäº†å¤šæ ·æ€§å’Œè¿è¥çš„ä¸€äº›è€ƒè™‘ï¼Œè¿˜ä¼šåŠ ä¸Šç¬¬ä¸‰æ­¥é‡æ’è¿‡æ»¤ï¼Œç”¨äºå¯¹ç²¾æ’åçš„æ¨èåˆ—è¡¨è¿›è¡Œå¤„ç†ã€‚</p>
</li>
<li><p><strong>A/Bæµ‹è¯•</strong>ï¼šå¯¹äºäº’è”ç½‘äº§å“æ¥è¯´ï¼Œ A/B æµ‹è¯•åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªå¿…å¤‡çš„æ¨¡å—ï¼Œå¯¹äºæ¨èç³»ç»Ÿæ¥è¯´ä¹Ÿä¸ä¾‹å¤–ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜è¯„ä¼°æ–°ç®—æ³•å¯¹å®¢æˆ·è¡Œä¸ºçš„å½±å“ã€‚é™¤äº† ç¦»çº¿çš„æŒ‡æ ‡å¤–ï¼Œä¸€ä¸ªæ–°çš„æ¨èç®—æ³•ä¸Šçº¿ä¹‹å‰ä¸€èˆ¬éƒ½ä¼šç»è¿‡ A/B æµ‹è¯•æ¥æµ‹è¯•æ–°ç®—æ³•çš„æœ‰æ•ˆæ€§ã€‚</p>
</li>
</ol>
<p>ä¸‹å›¾æ˜¯ä¸ä¹‹å¯¹åº”çš„å®é™…ç³»ç»Ÿä¸­å„ä¸ªç»„ä»¶çš„æµè½¬è¿‡ç¨‹ã€‚<strong>éœ€è¦æ³¨æ„çš„æ˜¯ç”Ÿæˆæ¨èåˆ—è¡¨å°±å·²ç»åšå®Œäº†å¬å›å’Œæ’åºçš„æ“ä½œï¼Œä¸šåŠ¡å±‚ç›´æ¥è°ƒç”¨APIå°±å¯ä»¥å¾—åˆ°è¿™ä¸ªæ¨èåˆ—è¡¨ã€‚</strong></p>
<p><img src="https://camo.githubusercontent.com/e00fb75f81bd5377bcfd1de0cdb3891a7790b134/68747470733a2f2f67697465652e636f6d2f6b6b7765697368652f696d616765732f7261772f6d61737465722f4d4c2f323031392d392d385f31302d32352d32372e706e67" alt="img"></p>
<h3 id="2-2-åœ¨çº¿è®­ç»ƒ"><a href="#2-2-åœ¨çº¿è®­ç»ƒ" class="headerlink" title="2.2 åœ¨çº¿è®­ç»ƒ"></a>2.2 åœ¨çº¿è®­ç»ƒ</h3><p>å¯¹äºä¸šåŠ¡æ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·å¯¹äºä¸Šä¸ªå¹¿å‘Šçš„åé¦ˆ ï¼ˆå–œæ¬¢æˆ–è€…ä¸å–œæ¬¢ï¼Œæœ‰æ²¡æœ‰ç‚¹å‡»ï¼‰ï¼Œå¯ä»¥å¾ˆå¿«åœ°ç”¨äºä¸‹ ä¸€ä¸ªå¹¿å‘Šçš„æ¨èä¸­ã€‚è¿™å°±è¦æ±‚æˆ‘ä»¬ç”¨å¦ä¸€ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯åœ¨çº¿è®­ç»ƒã€‚</p>
<p>åŸºäºåœ¨çº¿è®­ç»ƒçš„æ¨èç³»ç»Ÿæ¶æ„é€‚åˆäºå¹¿å‘Šå’Œç”µå•†ç­‰é«˜ç»´åº¦å¤§æ•°æ®é‡ä¸”å¯¹å®æ—¶æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯ï¼Œç›¸æ¯”è¾ƒåŸºäºç¦»çº¿è®­ç»ƒçš„æ¨èç³»ç»Ÿï¼ŒåŸºäºåœ¨çº¿è®­ç»ƒçš„æ¨èç³»ç»Ÿä¸åŒºåˆ†è®­ç»ƒå’Œæµ‹è¯•é˜¶æ®µï¼Œæ¯ä¸ªå›åˆéƒ½åœ¨å­¦ä¹ ï¼Œé€šè¿‡å®æ—¶çš„åé¦ˆæ¥è°ƒæ•´ç­–ç•¥ã€‚ ä¸€æ–¹é¢ï¼Œåœ¨çº¿è®­ç»ƒè¦æ±‚å…¶æ ·æœ¬ã€ç‰¹å¾å’Œæ¨¡å‹çš„å¤„ç†éƒ½æ˜¯å®æ—¶çš„ï¼Œä»¥ä¾¿æ¨èçš„å†…å®¹æ›´å¿«åœ°åæ˜ ç”¨æˆ·å®æ—¶çš„å–œå¥½ï¼›å¦ä¸€æ–¹é¢ï¼Œå› ä¸ºåœ¨çº¿è®­ç»ƒäº•ä¸éœ€è¦å°†æ‰€æœ‰çš„è®­ç»ƒæ•°æ®éƒ½å­˜å‚¨ä¸‹æ¥ï¼Œæ‰€ä»¥ä¸éœ€è¦å·¨å¤§çš„ç¦»çº¿å­˜å‚¨å¼€é”€ï¼Œä½¿å¾—ç³»ç»Ÿå…·æœ‰å¾ˆå¥½çš„ä¼¸ç¼©æ€§ï¼Œå¯ä»¥æ”¯æŒè¶…å¤§çš„æ•°æ®é‡å’Œæ¨¡å‹ã€‚</p>
<p><img src="https://camo.githubusercontent.com/6d0bf23d50bf62aaf218595a74437800ae143d01/68747470733a2f2f67697465652e636f6d2f6b6b7765697368652f696d616765732f7261772f6d61737465722f4d4c2f323031392d392d385f31312d31312d31312e706e67" alt="img"></p>
<ol>
<li><strong>æ ·æœ¬å¤„ç†</strong>ï¼šå’ŒåŸºäºç¦»çº¿è®­ç»ƒçš„æ¨èç³»ç»Ÿç›¸æ¯”ï¼Œåœ¨çº¿è®­ç»ƒåœ¨æ•°æ®ä¸ŠæŠ¥é˜¶æ®µçš„ä¸»è¦ä¸åŒä½“ç°åœ¨æ ·æœ¬å¤„ç†ä¸Šã€‚å¯¹äºç¦»çº¿è®­ç»ƒæ¥è¯´ï¼Œä¸ŠæŠ¥åçš„æ•°æ®å…ˆæ˜¯è¢«å­˜å‚¨åˆ°ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œç„¶åç­‰å¾…ç¦»çº¿è®¡ç®—ä»»åŠ¡æ¥å¯¹æ ·æœ¬è¿›è¡Œå¤„ç†ï¼›å¯¹äºåœ¨çº¿è®­ç»ƒæ¥è¯´ï¼Œå¯¹æ ·æœ¬çš„å»é‡ã€è¿‡æ»¤å’Œé‡‡æ ·ç­‰è®¡ç®—éƒ½éœ€è¦å®æ—¶è¿›è¡Œã€‚</li>
<li><strong>å®æ—¶ç‰¹æ€§</strong>ï¼šå®æ—¶ç‰¹å¾æ¨¡å—é€šè¿‡å®æ—¶å¤„ç†æ ·æœ¬æ•°æ®æ‹¼æ¥è®­ç»ƒéœ€è¦çš„ç‰¹å¾æ„é€ è®­ç»ƒæ ·æœ¬ï¼Œè¾“å…¥æµå¼è®­ç»ƒæ¨¡å—ç”¨äºæ›´æ–°æ¨¡å‹ã€‚è¯¥æ¨¡å—çš„ä¸»è¦çš„åŠŸèƒ½æ˜¯ç‰¹å¾æ‹¼æ¥å’Œç‰¹å¾å·¥ç¨‹ã€‚</li>
<li><strong>æµå¼è®­ç»ƒ</strong>ï¼šæµå¼è®­ç»ƒæ¨¡å—çš„ä¸»è¦ä½œç”¨æ˜¯ä½¿ç”¨å®æ—¶è®­ç»ƒæ ·æœ¬æ¥æ›´æ–°æ¨¡å‹ã€‚æ¨èç®—æ³•ä¸­å¢é‡æ›´æ–°éƒ¨åˆ†çš„è®¡ç®—ï¼Œé€šè¿‡æµå¼è®¡ç®—çš„æ–¹å¼æ¥è¿›è¡Œæ›´æ–°ã€‚åœ¨çº¿è®­ç»ƒçš„ä¼˜åŠ¿ä¹‹ä¸€ï¼Œæ˜¯å¯ä»¥æ”¯æŒæ¨¡å‹çš„ç¨€ç–å­˜å‚¨ã€‚è®­ç»ƒæ–¹é¢ï¼Œåœ¨çº¿æ¨¡å‹ä¸ä¸€å®šéƒ½æ˜¯ä»é›¶å¼€å§‹è®­ç»ƒï¼Œè€Œæ˜¯å¯ä»¥å°†ç¦»çº¿è®­ç»ƒå¾—åˆ°çš„æ¨¡å‹å‚æ•°ä½œä¸ºåŸºç¡€ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šè¿›è¡Œå¢é‡è®­ç»ƒã€‚</li>
<li><strong>æ¨¡å‹å­˜å‚¨å’ŒåŠ è½½</strong>ï¼šæ¨¡å‹ä¸€èˆ¬å­˜å‚¨åœ¨å‚æ•°æœåŠ¡å™¨ä¸­ã€‚æ¨¡å‹æ›´æ–°åï¼Œå°†æ¨¡å‹æ–‡ä»¶æ¨é€åˆ°çº¿ä¸Šå­˜å‚¨ï¼Œå¹¶ç”±çº¿ä¸ŠæœåŠ¡æ¨¡å—åŠ¨æ€åŠ è½½ã€‚</li>
</ol>
<h2 id="2-ç‰¹å¾æ•°æ®"><a href="#2-ç‰¹å¾æ•°æ®" class="headerlink" title="2. ç‰¹å¾æ•°æ®"></a>2. ç‰¹å¾æ•°æ®</h2><p>è¦è®­ç»ƒæ¨èæ¨¡å‹ï¼Œå°±éœ€è¦å…ˆæ”¶é›†ç”¨æˆ·çš„è¡Œä¸ºæ•°æ®ç”Ÿæˆç‰¹å¾å‘é‡ä»¥åæ‰èƒ½è¿›è¡Œè®­ç»ƒï¼Œè€Œä¸€ä¸ªç‰¹å¾å‘é‡ç”±ç‰¹å¾ä»¥åŠç‰¹å¾çš„æƒé‡ç»„æˆï¼Œåœ¨åˆ©ç”¨ç”¨æˆ·è¡Œä¸ºè®¡ç®—ç‰¹å¾å‘é‡æ—¶éœ€è¦è€ƒè™‘ä»¥ä¸‹å› ç´ ã€‚</p>
<ol>
<li><strong>ç”¨æˆ·è¡Œä¸ºçš„ç§ç±»</strong>ï¼šåœ¨ä¸€ä¸ªç½‘ç«™ä¸­ï¼Œç”¨æˆ·å¯ä»¥å¯¹ç‰©å“äº§ç”Ÿå¾ˆå¤šä¸åŒç§ç±»çš„è¡Œä¸ºã€‚ç”¨æˆ·å¯ä»¥æµè§ˆç‰©å“ã€å•å‡»ç‰©å“çš„é“¾æ¥ã€æ”¶è—ç‰©å“ã€ç»™ç‰©å“æ‰“åˆ†ã€è´­ä¹°ç‰©å“ã€è¯„è®ºç‰©å“ã€ç»™ç‰©å“æ‰“ä¸Šä¸åŒçš„æ ‡ç­¾ã€å’Œå¥½å‹åˆ†äº«ç‰©å“ã€æœç´¢ä¸åŒçš„å…³é”®è¯ç­‰ã€‚è¿™äº›è¡Œä¸ºéƒ½ä¼šå¯¹ç‰©å“ç‰¹å¾çš„æƒé‡äº§ç”Ÿå½±å“ï¼Œä½†ä¸åŒè¡Œä¸ºçš„å½±å“ä¸åŒï¼Œå¤§å¤šæ—¶å€™å¾ˆéš¾ç¡®å®šä»€ä¹ˆè¡Œä¸ºæ›´åŠ é‡è¦ï¼Œä¸€èˆ¬çš„æ ‡å‡†å°±æ˜¯ç”¨æˆ·ä»˜å‡ºä»£ä»·è¶Šå¤§çš„è¡Œä¸ºæƒé‡è¶Šé«˜ã€‚</li>
<li><strong>ç”¨æˆ·è¡Œä¸ºäº§ç”Ÿçš„æ—¶é—´</strong>ï¼šä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·è¿‘æœŸçš„è¡Œä¸ºæ¯”è¾ƒé‡è¦ï¼Œè€Œç”¨æˆ·å¾ˆä¹…ä¹‹å‰çš„è¡Œä¸ºç›¸å¯¹æ¯”è¾ƒæ¬¡è¦ã€‚å› æ­¤ï¼Œå¦‚æœç”¨æˆ·æœ€è¿‘è´­ä¹°è¿‡æŸä¸€ä¸ªç‰©å“ï¼Œé‚£ä¹ˆè¿™ä¸ªç‰©å“å¯¹åº”çš„ç‰¹å¾å°†ä¼šå…·æœ‰æ¯”è¾ƒé«˜çš„æƒé‡ã€‚</li>
<li><strong>ç”¨æˆ·è¡Œä¸ºçš„æ¬¡æ•°</strong>ï¼šæœ‰æ—¶ç”¨æˆ·å¯¹ä¸€ä¸ªç‰©å“ä¼šäº§ç”Ÿå¾ˆå¤šæ¬¡è¡Œä¸ºã€‚æ¯”å¦‚ç”¨æˆ·ä¼šå¬ä¸€é¦–æ­Œå¾ˆå¤šæ¬¡ï¼Œçœ‹ä¸€éƒ¨ç”µè§†å‰§çš„å¾ˆå¤šé›†ç­‰ã€‚å› æ­¤ç”¨æˆ·å¯¹åŒä¸€ä¸ªç‰©å“çš„åŒä¸€ç§è¡Œä¸ºå‘ç”Ÿçš„æ¬¡æ•°ä¹Ÿåæ˜ äº†ç”¨æˆ·å¯¹ç‰©å“çš„å…´è¶£ï¼Œè¡Œä¸ºæ¬¡æ•°å¤šçš„ç‰©å“å¯¹åº”çš„ç‰¹å¾æƒé‡è¶Šé«˜ã€‚</li>
<li><strong>ç‰©å“çš„çƒ­é—¨ç¨‹åº¦</strong>ï¼šå¦‚æœç”¨æˆ·å¯¹ä¸€ä¸ªå¾ˆçƒ­é—¨çš„ç‰©å“äº§ç”Ÿäº†è¡Œä¸ºï¼Œå¾€å¾€ä¸èƒ½ä»£è¡¨ç”¨æˆ·çš„ä¸ªæ€§ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½æ˜¯åœ¨è·Ÿé£ï¼Œå¯èƒ½å¯¹è¯¥ç‰©å“å¹¶æ²¡æœ‰å¤ªå¤§å…´è¶£ï¼Œç‰¹åˆ«æ˜¯åœ¨ç”¨æˆ·å¯¹ä¸€ä¸ªçƒ­é—¨ç‰©å“äº§ç”Ÿäº†å¶å°”å‡ æ¬¡ä¸é‡è¦çš„è¡Œä¸ºï¼ˆæ¯”å¦‚æµè§ˆè¡Œä¸ºï¼‰æ—¶ï¼Œå°±æ›´è¯´æ˜ç”¨æˆ·å¯¹è¿™ä¸ªç‰©å“å¯èƒ½æ²¡æœ‰ä»€ä¹ˆå…´è¶£ï¼Œå¯èƒ½åªæ˜¯å› ä¸ºè¿™ä¸ªç‰©å“çš„é“¾æ¥åˆ°å¤„éƒ½æ˜¯ï¼Œå¾ˆå®¹æ˜“ç‚¹åˆ°è€Œå·²ã€‚åä¹‹ï¼Œå¦‚æœç”¨æˆ·å¯¹ä¸€ä¸ªä¸çƒ­é—¨çš„ç‰©å“äº§ç”Ÿäº†è¡Œä¸ºï¼Œå°±è¯´æ˜äº†ç”¨æˆ·çš„ä¸ªæ€§éœ€æ±‚ã€‚å› æ­¤ï¼Œæ¨èå¼•æ“åœ¨ç”Ÿæˆç”¨æˆ·ç‰¹å¾æ—¶ä¼šåŠ é‡ä¸çƒ­é—¨ç‰©å“å¯¹åº”çš„ç‰¹å¾çš„æƒé‡ã€‚</li>
<li><strong>æ•°æ®å»ç‡¥</strong>ï¼šå¯¹æ ·æœ¬åšå»å™ªã€‚å¯¹äºæ•°æ®ä¸­æ··æ‚çš„åˆ·å•ç­‰ç±»ä½œå¼Šè¡Œä¸ºçš„æ•°æ®ï¼Œè¦å°†å…¶æ’é™¤å‡ºè®­ç»ƒæ•°æ®,å¦åˆ™å®ƒä¼šç›´æ¥å½±å“æ¨¡å‹çš„æ•ˆæœï¼›æ ·æœ¬ä¸­çš„ç¼ºå¤±å€¼ä¹Ÿè¦åšå¤„ç†ã€‚</li>
<li><strong>æ­£è´Ÿæ ·æœ¬å‡è¡¡</strong>ï¼šä¸€èˆ¬æˆ‘ä»¬æ”¶é›†ç”¨æˆ·çš„è¡Œä¸ºæ•°æ®éƒ½æ˜¯å±äºæ­£æ ·æœ¬ï¼Œé€ æˆäº†ä¸¥é‡çš„ä¸å¹³è¡¡ã€‚æ‰€ä»¥å¯¹äºä¸€ä¸ªç”¨æˆ·ï¼Œä»ä»–æ²¡æœ‰è¿‡è¡Œä¸ºçš„ç‰©å“ä¸­é‡‡æ ·å‡ºä¸€äº›ç‰©å“ä½œä¸ºè´Ÿæ ·æœ¬ï¼Œä½†é‡‡æ ·æ—¶ï¼Œä¿è¯æ¯ä¸ªç”¨æˆ·çš„æ­£è´Ÿæ ·æœ¬æ•°ç›®ç›¸å½“ã€‚</li>
<li><strong>ç‰¹å¾ç»„åˆ</strong>ï¼šæˆ‘ä»¬éœ€è¦è€ƒè™‘ç‰¹å¾ä¸ç‰¹å¾ä¹‹é—´çš„å…³ç³»ã€‚ä¾‹å¦‚åœ¨ç¾å›¢é…’åº—æœç´¢æ’åºä¸­ï¼Œé…’åº—çš„é”€é‡ã€ä»·æ ¼ã€ç”¨æˆ·çš„æ¶ˆè´¹æ°´å¹³ç­‰æ˜¯å¼ºç›¸å…³çš„å› ç´ ï¼Œç”¨æˆ·çš„å¹´é¾„ã€ä½ç½®å¯èƒ½æ˜¯å¼±ç›¸å…³çš„å› ç´ ï¼Œç”¨æˆ·çš„IDæ˜¯å®Œå…¨æ— å…³çš„å› ç´ ã€‚åœ¨ç¡®å®šäº†å“ªäº›å› ç´ å¯èƒ½ä¸é¢„æµ‹ç›®æ ‡ç›¸å…³åï¼Œæˆ‘ä»¬éœ€è¦å°†æ­¤ä¿¡æ¯è¡¨ç¤ºä¸ºæ•°å€¼ç±»å‹,å³ä¸ºç‰¹å¾æŠ½å–çš„è¿‡ç¨‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç”¨æˆ·åœ¨Appä¸Šçš„æµè§ˆã€äº¤æ˜“ç­‰è¡Œä¸ºè®°å½•ä¸­åŒ…å«äº†å¤§é‡çš„ä¿¡æ¯ï¼Œç‰¹å¾æŠ½å–åˆ™ä¸»è¦æ˜¯ä»è¿™äº›ä¿¡æ¯æŠ½å–å‡ºç›¸å…³å› ç´ ï¼Œç”¨æ•°å€¼å˜é‡è¿›è¡Œè¡¨ç¤ºã€‚å¸¸ç”¨çš„ç»Ÿè®¡ç‰¹å¾æœ‰è®¡æ•°ç‰¹å¾,å¦‚æµè§ˆæ¬¡æ•°ã€ä¸‹å•æ¬¡æ•°ç­‰;æ¯”ç‡ç‰¹å¾ï¼Œå¦‚ç‚¹å‡»ç‡ã€è½¬åŒ–ç‡ç­‰;ç»Ÿè®¡é‡ç‰¹å¾ï¼Œå¦‚ä»·æ ¼å‡å€¼ã€æ ‡å‡†å·®ã€åˆ†ä½æ•°ã€ååº¦ã€å³°åº¦ç­‰ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Recommender System</category>
      </categories>
      <tags>
        <tag>Recommender System</tag>
      </tags>
  </entry>
  <entry>
    <title>éšè¯­ä¹‰æ¨¡å‹</title>
    <url>/2020/07/29/%E9%9A%90%E8%AF%AD%E4%B9%89%E6%A8%A1%E5%9E%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>æ¥æºäº:</p>
<p> <a href="https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System" target="_blank" rel="noopener">https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System</a></p>
</blockquote>
<h3 id="1-åŸºæœ¬æ€æƒ³"><a href="#1-åŸºæœ¬æ€æƒ³" class="headerlink" title="1. åŸºæœ¬æ€æƒ³"></a>1. åŸºæœ¬æ€æƒ³</h3><p>æ¨èç³»ç»Ÿä¸­ä¸€ä¸ªé‡è¦çš„åˆ†æ”¯ï¼Œéšè¯­ä¹‰å»ºæ¨¡ã€‚éšè¯­ä¹‰æ¨¡å‹<strong>LFM</strong>ï¼šLatent Factor Modelï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯<span style="color:red">é€šè¿‡éšå«ç‰¹å¾è”ç³»ç”¨æˆ·å…´è¶£å’Œç‰©å“</span>ã€‚</p>
<p><strong>è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œå°†ç‰©å“æ˜ å°„åˆ°éšå«åˆ†ç±»ï¼Œç¡®å®šç”¨æˆ·å¯¹éšå«åˆ†ç±»çš„å…´è¶£ï¼Œç„¶åé€‰æ‹©ç”¨æˆ·æ„Ÿå…´è¶£çš„åˆ†ç±»ä¸­çš„ç‰©å“æ¨èç»™ç”¨æˆ·ã€‚å®ƒæ˜¯åŸºäºç”¨æˆ·è¡Œä¸ºç»Ÿè®¡çš„è‡ªåŠ¨èšç±»ã€‚</strong></p>
<p>éšè¯­ä¹‰æ¨¡å‹åœ¨Top-Næ¨èä¸­çš„åº”ç”¨ååˆ†å¹¿æ³›ã€‚å¸¸ç”¨çš„éšè¯­ä¹‰æ¨¡å‹ï¼ŒLSA(Latent Semantic Analysis)ï¼ŒLDA(Latent Dirichlet Allocation)ï¼Œä¸»é¢˜æ¨¡å‹(Topic Model)ï¼ŒçŸ©é˜µåˆ†è§£(Matrix Factorization)ç­‰ç­‰ã€‚</p>
<p>é¦–å…ˆé€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£ä¸€ä¸‹è¿™ä¸ªæ¨¡å‹ï¼Œæ¯”å¦‚è¯´æœ‰ä¸¤ä¸ªç”¨æˆ·Aå’ŒBï¼Œç›®å‰æœ‰ç”¨æˆ·çš„é˜…è¯»åˆ—è¡¨ï¼Œç”¨æˆ·Açš„å…´è¶£æ¶‰åŠä¾¦æ¢å°è¯´ï¼Œç§‘æ™®å›¾ä¹¦ä»¥åŠä¸€äº›è®¡ç®—æœºæŠ€æœ¯ä¹¦ï¼Œè€Œç”¨æˆ·Bçš„å…´è¶£æ¯”è¾ƒé›†ä¸­åœ¨æ•°å­¦å’Œæœºå™¨å­¦ä¹ æ–¹é¢ã€‚é‚£ä¹ˆå¦‚ä½•ç»™Aå’ŒBæ¨èå›¾ä¹¦å‘¢ï¼Ÿ</p>
<p>å¯¹äºUserCFï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°å’Œä»–ä»¬çœ‹äº†åŒæ ·ä¹¦çš„å…¶ä»–ç”¨æˆ·(å…´è¶£ç›¸ä¼¼çš„ç”¨æˆ·)ï¼Œç„¶ååœ¨ç»™ä»–ä»¬æ¨èé‚£äº›ç”¨æˆ·å–œæ¬¢çš„å…¶ä»–ä¹¦ã€‚ å¯¹äºItemCF, éœ€è¦ç»™ä»–ä»¬æ¨èå’Œä»–ä»¬å·²ç»çœ‹çš„ä¹¦ç›¸ä¼¼çš„ä¹¦ï¼Œæ¯”å¦‚ç”¨æˆ·B çœ‹äº†å¾ˆå¤šæ•°æ®æŒ–æ˜æ–¹é¢çš„ä¹¦ï¼Œé‚£ä¹ˆå¯ä»¥ç»™ä»–æ¨èæœºå™¨å­¦ä¹ æˆ–è€…æ¨¡å¼è¯†åˆ«æ–¹é¢çš„ä¹¦ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨éšè¯­ä¹‰æ¨¡å‹ï¼Œå¯ä»¥å¯¹ä¹¦å’Œç‰©å“çš„å…´è¶£è¿›è¡Œåˆ†ç±»ã€‚å¯¹äºæŸä¸ªç”¨æˆ·ï¼Œé¦–å…ˆå¾—åˆ°ä»–çš„å…´è¶£åˆ†ç±»ï¼Œç„¶åä»åˆ†ç±»ä¸­æŒ‘é€‰ä»–å¯èƒ½å–œæ¬¢çš„ç‰©å“ã€‚</p>
<a id="more"></a>
<h3 id="2-æ¨¡å‹ç†è§£"><a href="#2-æ¨¡å‹ç†è§£" class="headerlink" title="2 æ¨¡å‹ç†è§£"></a>2 æ¨¡å‹ç†è§£</h3><ol>
<li>å¦‚ä½•ç»™ç‰©å“è¿›è¡Œåˆ†ç±»ï¼Ÿ</li>
<li>å¦‚ä½•ç¡®å®šç”¨æˆ·å¯¹å“ªäº›ç±»çš„ç‰©å“æ„Ÿå…´è¶£ï¼Œä»¥åŠæ„Ÿå…´è¶£çš„ç¨‹åº¦ï¼Ÿ</li>
<li>å¯¹äºä¸€ä¸ªç»™å®šçš„ç±»ï¼Œé€‰æ‹©å“ªäº›å±äºè¿™ä¸ªç±»çš„ç‰©å“æ¨èç»™ç”¨æˆ·ï¼Œä»¥åŠå¦‚ä½•ç¡®å®šè¿™äº›ç‰©å“åœ¨ä¸€ä¸ªç±»ä¸­çš„æƒé‡ï¼Ÿ</li>
</ol>
<p>ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œç ”ç©¶äººå‘˜æå‡ºï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ä»æ•°æ®å‡ºå‘ï¼Œè‡ªåŠ¨åœ°æ‰¾åˆ°é‚£äº›ç±»ï¼Œç„¶åè¿›è¡Œä¸ªæ€§åŒ–æ¨èï¼Œéšè¯­ä¹‰åˆ†ææŠ€æœ¯å› ä¸ºé‡‡å–åŸºäºç”¨æˆ·è¡Œä¸ºç»Ÿè®¡çš„è‡ªåŠ¨èšç±»ï¼Œè¾ƒå¥½åœ°è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ã€‚éšè¯­ä¹‰åˆ†ææŠ€æœ¯ä»è¯ç”Ÿåˆ°ä»Šå¤©äº§ç”Ÿäº†å¾ˆå¤šè‘—åçš„æ¨¡å‹å’Œæ–¹æ³•ï¼Œå…¶ä¸­å’Œæ¨èæŠ€æœ¯ç›¸å…³çš„æœ‰pLSAï¼ŒLDAï¼Œéšå«ç±»åˆ«æ¨¡å‹ï¼ˆlatent class modelï¼‰, éšå«ä¸»é¢˜æ¨¡å‹ï¼ˆlatent topic modelï¼‰, çŸ©é˜µåˆ†è§£ï¼ˆmatrix factorizationï¼‰ã€‚</p>
<p>LFMé€šè¿‡å¦‚ä¸‹å…¬å¼è®¡ç®—ç”¨æˆ· u å¯¹ç‰©å“ i çš„å…´è¶£ï¼š</p>
<p><img src="https://camo.githubusercontent.com/7f94ca282d949c428b6c6021803daa14f88d61fb/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f6769662e6c617465783f707265666572656e636528752c69293d725f25374275692537443d705f7525354554715f693d25354373756d5f253742663d3125374425354546705f253742752c6b253744715f253742692c6b253744" alt="img"></p>
<p>è¿™ä¸ªå…¬å¼ä¸­ $p_{u,k}$ å’Œ $q_{i,k}$ æ˜¯æ¨¡å‹çš„å‚æ•°ï¼Œå…¶ä¸­ $p_{u,k}$  åº¦é‡äº†ç”¨æˆ· u çš„å…´è¶£å’Œç¬¬ k ä¸ªéšç±»çš„å…³ç³»ï¼Œè€Œ $q_{i,k}$  åº¦é‡äº†ç¬¬ k ä¸ªéšç±»å’Œç‰©å“ i ä¹‹é—´çš„å…³ç³»ã€‚é‚£ä¹ˆï¼Œä¸‹é¢çš„é—®é¢˜å°±æ˜¯å¦‚ä½•è®¡ç®—è¿™ä¸¤ä¸ªå‚æ•°ã€‚</p>
<p>å¯¹æœ€ä¼˜åŒ–ç†è®ºæˆ–è€…æœºå™¨å­¦ä¹ æœ‰æ‰€äº†è§£çš„è¯»è€…ï¼Œå¯èƒ½å¯¹å¦‚ä½•è®¡ç®—è¿™ä¸¤ä¸ªå‚æ•°éƒ½æ¯”è¾ƒæ¸…æ¥šã€‚è¿™ä¸¤ä¸ªå‚æ•°æ˜¯ä»æ•°æ®é›†ä¸­è®¡ç®—å‡ºæ¥çš„ã€‚è¦è®¡ç®—è¿™ä¸¤ä¸ªå‚æ•°ï¼Œéœ€è¦ä¸€ä¸ªè®­ç»ƒé›†ï¼Œå¯¹äºæ¯ä¸ªç”¨æˆ·uï¼Œè®­ç»ƒé›†é‡Œéƒ½åŒ…å«äº†ç”¨æˆ·uå–œæ¬¢çš„ç‰©å“å’Œä¸æ„Ÿå…´è¶£çš„ç‰©å“ï¼Œé€šè¿‡å­¦ä¹ è¿™ä¸ªæ•°æ®é›†ï¼Œå°±å¯ä»¥è·å¾—ä¸Šé¢çš„æ¨¡å‹å‚æ•°ã€‚</p>
]]></content>
      <categories>
        <category>Recommender System</category>
      </categories>
      <tags>
        <tag>Recommender System</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ ç›¸å…³èµ„æ–™</title>
    <url>/2020/07/28/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://createmomo.github.io/2018/01/23/Super-Machine-Learning-Revision-Notes/" target="_blank" rel="noopener">Super Machine Learning Revision Notes</a></p>
<p>æ€»ç»“äº†æœºå™¨å­¦ä¹ çš„ä¸€ç³»åˆ—åŸºæœ¬æ¦‚å¿µï¼Œç®—æ³•ç­‰ã€‚</p>
<p>åˆ†ä¸ºæ¿€æ´»å‡½æ•°ï¼Œæ¢¯åº¦ä¸‹é™ï¼Œå‚æ•°ï¼Œæ­£åˆ™åŒ–ï¼Œæ¨¡å‹ï¼Œå®ç”¨çªé—¨ç­‰å‡ å¤§æ¿å—ã€‚</p>
<hr>
<p><a href="https://yuanxiaosc.github.io/2019/08/16/æœºå™¨å­¦ä¹ ä¸­çš„å¸¸è¯†æ€§é—®é¢˜/" target="_blank" rel="noopener">æœºå™¨å­¦ä¹ ä¸­çš„å¸¸è¯†æ€§é—®é¢˜</a></p>
<p><img src="/2020/07/28/æœºå™¨å­¦ä¹ ç›¸å…³èµ„æ–™/1595861323230.png" alt="1595861323230"></p>
<a id="more"></a>
<hr>
<p>ds-cheatsheets</p>
<p><a href="https://github.com/FavioVazquez/ds-cheatsheets" target="_blank" rel="noopener">https://github.com/FavioVazquez/ds-cheatsheets</a></p>
<p>å„ç§cheatsheetï¼Œå…³äºpython, R, big data, machine learning, deep learning, SQL, data visulizationç­‰ç­‰ã€‚</p>
]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦å­¦ä¹ ç›¸å…³èµ„æ–™</title>
    <url>/2020/07/28/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å´æ©è¾¾æ·±åº¦å­¦ä¹ courseraè¯¾ç¨‹ç¬”è®°ï¼š</p>
<p><a href="https://www.slideshare.net/TessFerrandez/notes-from-coursera-deep-learning-courses-by-andrew-ng" target="_blank" rel="noopener">https://www.slideshare.net/TessFerrandez/notes-from-coursera-deep-learning-courses-by-andrew-ng</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/152362317" target="_blank" rel="noopener">22å¼ æ·±åº¦å­¦ä¹ ç²¾ç‚¼å›¾ç¬”è®°æ€»ç»“</a></p>
<p>å†…å®¹åŒ…å«æ·±åº¦å­¦ä¹ åŸºç¡€ã€å·ç§¯ç½‘ç»œå’Œå¾ªç¯ç½‘ç»œç­‰ã€‚</p>
<hr>
<p>ML-NLP</p>
<p><a href="https://github.com/NLP-LOVE/ML-NLP" target="_blank" rel="noopener">https://github.com/NLP-LOVE/ML-NLP</a></p>
<p>åŒ…å«æœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼ŒNLPç­‰å†…å®¹åŠä»£ç å®ç°ã€‚</p>
]]></content>
      <categories>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>CNN</tag>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>RNN</tag>
      </tags>
  </entry>
  <entry>
    <title>å†³ç­–æ ‘</title>
    <url>/2020/07/25/%E5%86%B3%E7%AD%96%E6%A0%91/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ï¼ˆå…³äºå†³ç­–æ ‘ä¸é›†æˆå­¦ä¹ ä¹Ÿå¯å‚è€ƒæˆ‘çš„OneNoteç¬”è®° -&gt; preparationï¼‰</p>
<h2 id="å¿«é€Ÿå¯¼èˆª"><a href="#å¿«é€Ÿå¯¼èˆª" class="headerlink" title="å¿«é€Ÿå¯¼èˆª"></a>å¿«é€Ÿå¯¼èˆª</h2><p><a href="#jump_entropy">ç†µ</a><br><a href="#jump_conditional_entropy">æ¡ä»¶ç†µ</a><br><a href="#jump_IG">ä¿¡æ¯å¢ç›Šçš„å®šä¹‰</a><br><a href="#jump_MI">äº’ä¿¡æ¯</a><br><a href="#jump_IGR">ä¿¡æ¯å¢ç›Šç‡</a><br><a href="#jump_Gini">åŸºå°¼æŒ‡æ•°</a></p>
<p><a href="#jump_C4.5advantage">C4.5å¯¹äºID3æ‰€åšçš„æ”¹è¿›</a><br><a href="#jump_CARTadvantage">CARTå¯¹äºCR.4æ‰€åšçš„æ”¹è¿›</a></p>
<p><a href="#jump_algo1.1">ç®—æ³•1.1 (ä¿¡æ¯å¢ç›Šçš„ç®—æ³•)</a><br><a href="#jump_algo1.2">ç®—æ³•1.2 (ID3ç®—æ³•)</a><br><a href="#jump_algo2.1">ç®—æ³•2.1 (C4.5çš„ç”Ÿæˆç®—æ³•)</a><br><a href="#jump_algo3.1">ç®—æ³•3.1 (CARTç”Ÿæˆç®—æ³•)</a><br><a href="#jump_algo3.2">ç®—æ³•3.2 (CARTå‰ªæç®—æ³•)</a><br><a href="#jump_algo3.3">ç®—æ³•3.3 (æœ€å°äºŒä¹˜å›å½’æ ‘ç”Ÿæˆç®—æ³•)</a><br><a href="#jump_GBDT">GBDTç®—æ³•æ­¥éª¤</a></p>
<p><a href="#jump3.1.2.1">XGBoostå¹¶è¡ŒåŒ–</a><br><a href="#jump3.1.4">XGBoostä¸GBDTçš„æ¯”è¾ƒ</a></p>
<h2 id="ç¯‡é›¶ï¼šå†³ç­–æ ‘çš„åˆ†ç±»"><a href="#ç¯‡é›¶ï¼šå†³ç­–æ ‘çš„åˆ†ç±»" class="headerlink" title="ç¯‡é›¶ï¼šå†³ç­–æ ‘çš„åˆ†ç±»"></a>ç¯‡é›¶ï¼šå†³ç­–æ ‘çš„åˆ†ç±»</h2><blockquote>
<p>æœ¬éƒ¨åˆ†å†…å®¹æ¥è‡ª <a href="https://mp.weixin.qq.com/s/qongHAx-X2SWrUxjk8tg0A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/qongHAx-X2SWrUxjk8tg0A</a></p>
</blockquote>
<p>å†³ç­–æ ‘åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåˆ†ç±»æ ‘å’Œå›å½’æ ‘ã€‚å‰è€…ç”¨äºé¢„æµ‹ç¦»æ•£çš„å…·ä½“ç±»åˆ«ï¼šæ˜¯å¦æ™´å¤©/å¥½å/ç½‘é¡µæ˜¯å¦æ˜¯åƒåœ¾ç½‘é¡µç­‰ç­‰ï¼Œåè€…é¢„æµ‹çš„æ˜¯è¿ç»­çš„å…·ä½“çš„å€¼ï¼šå¹´é¾„/èº«é«˜ç­‰ç­‰ã€‚å‰è€…çš„ç´¯åŠ æ˜¯æ²¡æœ‰æ„ä¹‰çš„æ¯”å¦‚â€˜ç”·+ç”·+å¥³=ï¼Ÿâ€™ï¼Œè€Œåè€…ç»“æœçš„åŠ å‡æ˜¯æœ‰æ„ä¹‰çš„ï¼Œâ€˜10+3-6=7â€™ã€‚</p>
<p><strong>1.åˆ†ç±»æ ‘</strong></p>
<p>å†³ç­–æ ‘çš„åˆ†ç±»ç®—æ³•æœ‰å¾ˆå¤šï¼Œä»¥å…·æœ‰æœ€å¤§ç†µçš„ç‰¹å¾è¿›è¡Œåˆ†ç±»ï¼Œä»¥ä¿¡æ¯å¢ç›Šç‰¹å¾è¿›è¡Œåˆ†ç±»ï¼ˆID3ï¼‰ï¼Œä»¥å¢ç›Šç‡ç‰¹å¾è¿›è¡Œåˆ†ç±»ï¼ˆC4.5ï¼‰ï¼Œä»¥åŸºå°¼ç³»æ•°ç‰¹å¾è¿›è¡Œåˆ†ç±»ï¼ˆCARTåˆ†ç±»ä¸å›å½’æ ‘ï¼‰ç­‰ç­‰ã€‚è¿™ä¸€ç±»å†³ç­–æ ‘çš„ç‰¹ç‚¹å°±æ˜¯æœ€åçš„ç»“æœéƒ½æ˜¯ç¦»æ•£çš„å…·ä½“çš„ç±»åˆ«ï¼Œæ¯”å¦‚è‹¹æœçš„å¥½/åï¼Œæ€§åˆ«ç”·/å¥³ã€‚</p>
<p><strong>2.å›å½’æ ‘</strong></p>
<p>å›å½’æ ‘ä¸åˆ†ç±»æ ‘çš„æµç¨‹å¤§è‡´ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯å›å½’æ ‘åœ¨æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæœ‰ä¸€ä¸ªé¢„æµ‹å€¼ï¼Œä»¥å¹´é¾„ä¸ºä¾‹ï¼Œè¯¥èŠ‚ç‚¹çš„é¢„æµ‹å€¼å°±æ˜¯æ‰€æœ‰å±äºè¯¥èŠ‚ç‚¹çš„æ ·æœ¬çš„å¹´é¾„çš„å‡å€¼ã€‚</p>
<p>é‚£å›å½’æ ‘æ˜¯æ ¹æ®ä»€ä¹ˆæ¥åˆ’åˆ†ç‰¹å¾çš„å‘¢ï¼Ÿ</p>
<p>åˆ†ç±»æ ‘çš„æœ€å¤§ç†µã€ä¿¡æ¯å¢ç›Šã€å¢ç›Šç‡åœ¨å›å½’æ ‘è¿™éƒ½ä¸é€‚ç”¨äº†ï¼Œå›å½’æ ‘ç”¨çš„æ˜¯<strong>å‡æ–¹è¯¯å·®</strong>ã€‚é<strong>å†æ¯ä¸ªç‰¹å¾ï¼Œç©·ä¸¾æ¯ä¸ªç‰¹å¾çš„åˆ’åˆ†é˜ˆå€¼</strong>ï¼Œè€Œè¿™é‡Œä¸å†ä½¿ç”¨æœ€å¤§ç†µï¼Œä½¿ç”¨çš„æ˜¯æœ€å°åŒ–å‡æ–¹å·®â€”â€”(æ¯ä¸ªäººçš„å¹´é¾„-é¢„æµ‹å¹´é¾„)^2/Nï¼ŒN ä»£è¡¨èŠ‚ç‚¹å†…æ ·æœ¬æ•°ã€‚è¿™å¾ˆå¥½ç†è§£ï¼Œå’Œé¢„æµ‹å¹´é¾„å·®è·è¶Šå¤§ï¼Œå‡æ–¹å·®ä¹Ÿå°±è¶Šå¤§ã€‚å› æ­¤è¦<strong>æ‰¾åˆ°å‡æ–¹å·®æœ€å°çš„é˜ˆå€¼ä½œä¸ºåˆ’åˆ†ç‚¹</strong>ã€‚</p>
<p>åˆ’åˆ†çš„ç»“æŸæ¡ä»¶ä¸€èˆ¬æœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€æ˜¯åˆ’åˆ†åˆ°æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½åªåŒ…å«ä¸€ä¸ªå¹´é¾„å€¼ï¼Œä½†æ˜¯è¿™å¤ªéš¾äº†ï¼›ç¬¬äºŒå°±æ˜¯åˆ’åˆ†åˆ°ä¸€å®šçš„æ·±åº¦å°±åœæ­¢ï¼Œå–èŠ‚ç‚¹å†…æ•°æ®çš„<strong>å‡å€¼</strong>ä½œä¸ºæœ€ç»ˆçš„é¢„æµ‹å€¼ã€‚</p>
<hr>
<h2 id="ç¯‡ä¸€ï¼šå†³ç­–æ ‘-ï¼ˆID3-C4-5-CARTï¼‰"><a href="#ç¯‡ä¸€ï¼šå†³ç­–æ ‘-ï¼ˆID3-C4-5-CARTï¼‰" class="headerlink" title="ç¯‡ä¸€ï¼šå†³ç­–æ ‘ ï¼ˆID3, C4.5, CARTï¼‰"></a>ç¯‡ä¸€ï¼šå†³ç­–æ ‘ ï¼ˆID3, C4.5, CARTï¼‰</h2><blockquote>
<p>æœ¬éƒ¨åˆ†å†…å®¹å‚è€ƒ<br>å…¬ä¼—å·Datawhale <a href="https://mp.weixin.qq.com/s/jj3BtmnWRAwCS56ZU3ZXZA" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/jj3BtmnWRAwCS56ZU3ZXZA</a><br>ä»¥åŠã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹å’Œè¥¿ç“œä¹¦</p>
</blockquote>
<h3 id="1-ID3"><a href="#1-ID3" class="headerlink" title="1. ID3"></a>1. ID3</h3><p>ID3 ç®—æ³•æ˜¯å»ºç«‹åœ¨å¥¥å¡å§†å‰ƒåˆ€ï¼ˆç”¨è¾ƒå°‘çš„ä¸œè¥¿ï¼ŒåŒæ ·å¯ä»¥åšå¥½äº‹æƒ…ï¼‰çš„åŸºç¡€ä¸Šï¼šè¶Šæ˜¯å°å‹çš„å†³ç­–æ ‘è¶Šä¼˜äºå¤§çš„å†³ç­–æ ‘ã€‚</p>
<blockquote>
<p>Occamâ€™s Razor: Given two models of similar generalization errors,  one should prefer the simpler model over the more complex model. For complex models, there is a greater chance that it was fitted accidentally by errors in data.<br>æ¥è‡ª <a href="https://www.ismll.uni-hildesheim.de/lehre//////ml-08w/skript/decision_trees2.pdf" target="_blank" rel="noopener">https://www.ismll.uni-hildesheim.de/lehre//////ml-08w/skript/decision_trees2.pdf</a></p>
</blockquote>
<h4 id="1-1-æ€æƒ³"><a href="#1-1-æ€æƒ³" class="headerlink" title="1.1 æ€æƒ³"></a>1.1 æ€æƒ³</h4><p>ä»ä¿¡æ¯è®ºçš„çŸ¥è¯†ä¸­æˆ‘ä»¬çŸ¥é“ï¼šæœŸæœ›ä¿¡æ¯è¶Šå°ï¼Œä¿¡æ¯ç†µè¶Šå¤§ï¼Œä»è€Œæ ·æœ¬çº¯åº¦è¶Šä½ã€‚ID3 ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ä»¥ä¿¡æ¯å¢ç›Šæ¥åº¦é‡ç‰¹å¾é€‰æ‹©ï¼Œ<strong>é€‰æ‹©<span style="color:red">ä¿¡æ¯å¢ç›Š</span>æœ€å¤§çš„ç‰¹å¾è¿›è¡Œåˆ†è£‚</strong>ã€‚ç®—æ³•é‡‡ç”¨è‡ªé¡¶å‘ä¸‹çš„è´ªå©ªæœç´¢éå†å¯èƒ½çš„å†³ç­–æ ‘ç©ºé—´ï¼ˆC4.5 ä¹Ÿæ˜¯è´ªå©ªæœç´¢ ).</p>
<p>å…¶å¤§è‡´æ­¥éª¤ä¸ºï¼š</p>
<ol>
<li>åˆå§‹åŒ–ç‰¹å¾é›†åˆå’Œæ•°æ®é›†åˆï¼›</li>
<li>è®¡ç®—æ•°æ®é›†åˆä¿¡æ¯ç†µå’Œæ‰€æœ‰ç‰¹å¾çš„æ¡ä»¶ç†µï¼Œé€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„ç‰¹å¾ä½œä¸ºå½“å‰å†³ç­–èŠ‚ç‚¹ï¼›</li>
<li>æ›´æ–°æ•°æ®é›†åˆå’Œç‰¹å¾é›†åˆï¼ˆåˆ é™¤ä¸Šä¸€æ­¥ä½¿ç”¨çš„ç‰¹å¾ï¼Œå¹¶æŒ‰ç…§ç‰¹å¾å€¼æ¥åˆ’åˆ†ä¸åŒåˆ†æ”¯çš„æ•°æ®é›†åˆï¼‰ï¼›</li>
<li>é‡å¤ 2ï¼Œ3 ä¸¤æ­¥ï¼Œè‹¥å­é›†å€¼åŒ…å«å•ä¸€ç‰¹å¾ï¼Œåˆ™ä¸ºåˆ†æ”¯å¶å­èŠ‚ç‚¹ã€‚</li>
</ol>
<p>æ›´è¯¦ç»†æ­¥éª¤è§ <a href="#jump1.2.2">1.2.2 ID3ç®—æ³•</a>.</p>
<h4 id="1-2-åˆ’åˆ†æ ‡å‡†"><a href="#1-2-åˆ’åˆ†æ ‡å‡†" class="headerlink" title="1.2 åˆ’åˆ†æ ‡å‡†"></a>1.2 åˆ’åˆ†æ ‡å‡†</h4><p>ID3 ä½¿ç”¨çš„åˆ†ç±»æ ‡å‡†æ˜¯ä¿¡æ¯å¢ç›Šï¼Œå®ƒè¡¨ç¤ºå¾—çŸ¥ç‰¹å¾ A çš„ä¿¡æ¯è€Œä½¿å¾—æ ·æœ¬é›†åˆä¸ç¡®å®šæ€§å‡å°‘çš„ç¨‹åº¦ã€‚</p>
<p><strong>ä¸€èˆ¬è€Œè¨€ï¼Œä¿¡æ¯å¢ç›Šè¶Šå¤§ï¼Œæ„å‘³ç€ä½¿ç”¨ç‰¹å¾ A æ¥åˆ’åˆ†æ‰€è·å¾—çš„â€œçº¯åº¦æå‡â€œè¶Šå¤§ã€‚</strong></p>
<p>æœ€ä¼˜åˆ’åˆ†å±æ€§ $a^*=argmax _{a âˆˆ A}\ Gain(D,a)$.</p>
<h5 id="1-2-1-ä¿¡æ¯å¢ç›Š"><a href="#1-2-1-ä¿¡æ¯å¢ç›Š" class="headerlink" title="1.2.1 ä¿¡æ¯å¢ç›Š"></a>1.2.1 ä¿¡æ¯å¢ç›Š</h5><blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹å’Œã€Šæ•°å­¦ä¹‹ç¾ã€‹</p>
</blockquote>
<p>åœ¨ä¿¡æ¯è®ºä¸æ¦‚ç‡ç»Ÿè®¡ä¸­ï¼Œ<strong><span id="jump_entropy">ç†µ</span></strong>ï¼ˆentropyï¼‰æ˜¯è¡¨ç¤ºéšæœºå˜é‡ä¸ç¡®å®šæ€§çš„åº¦é‡ï¼Œè®¾ $X$ æ˜¯ä¸€ä¸ªå–æœ‰é™ä¸ªå€¼çš„ç¦»æ•£éšæœºå˜é‡ï¼Œå…¶æ¦‚ç‡åˆ†å¸ƒä¸º</p>
<script type="math/tex; mode=display">
P(X=x_i)=p_i,i=1,2,...,n</script><p>åˆ™éšæœºå˜é‡ $X$ çš„ç†µå®šä¹‰ä¸º</p>
<script type="math/tex; mode=display">
H(X)=-\sum_{i=1}^n p_ilog p_i</script><p>è‹¥ $p_i=0$ï¼Œåˆ™å®šä¹‰ $0log0=0$ã€‚é€šå¸¸å¯¹æ•°ä»¥2ä¸ºåº•æˆ–ä»¥eä¸ºåº•ï¼Œè¿™æ—¶ç†µçš„å•ä½åˆ†åˆ«ç§°ä½œæ¯”ç‰¹(bit)æˆ–çº³ç‰¹(nat)ã€‚ç”±å®šä¹‰å¯çŸ¥ï¼Œç†µåªä¾èµ–äº $X$ çš„åˆ†å¸ƒï¼Œè€Œä¸ $X$ çš„å–å€¼æ— å…³ï¼Œæ‰€ä»¥ä¹Ÿå¯å°† $X$ çš„ç†µè®°ä½œ $H(p)$ï¼Œå³</p>
<script type="math/tex; mode=display">
H(p)=-\sum_{i=1}^n p_ilog p_i</script><p><span style="color:red">ç†µè¶Šå¤§ï¼Œéšæœºå˜é‡çš„ä¸ç¡®å®šæ€§å°±è¶Šå¤§ï¼Œè¦æŠŠå®ƒææ¸…æ¥šï¼Œæ‰€éœ€è¦çš„ä¿¡æ¯é‡ä¹Ÿå°±è¶Šå¤§ã€‚</span>ä»å®šä¹‰å¯éªŒè¯</p>
<script type="math/tex; mode=display">
0 \leq H(p) \leq logn</script><p>å½“éšæœºå˜é‡åªå–ä¸¤ä¸ªå€¼ï¼Œä¾‹å¦‚1ï¼Œ0æ—¶ï¼Œå³ $X$ çš„åˆ†å¸ƒä¸º</p>
<script type="math/tex; mode=display">
P(X=1)=p, \ P(X=0)=1-p, \quad 0\leq p\leq 1</script><p>ç†µä¸º</p>
<script type="math/tex; mode=display">
H(p)=-plog_2p-(1-p)log_2(1-p)</script><p>è¿™æ—¶ï¼Œç†µ $H(p)$ éšæ¦‚ç‡ $p$ å˜åŒ–çš„æ›²çº¿å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå•ä½ä¸ºæ¯”ç‰¹ï¼‰</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602345214652.png" alt="1602345214652"></p>
<p>å½“ $p=0$ æˆ– $p=1$ æ—¶ $H(p)=0$ï¼Œéšæœºå˜é‡å®Œå…¨æ²¡æœ‰ä¸ç¡®å®šæ€§ã€‚å½“ $p=0.5$ æ—¶ï¼Œ$H(p)=1$ï¼Œç†µå–å€¼æœ€å¤§ï¼Œéšæœºå˜é‡ä¸ç¡®å®šæ€§æœ€å¤§ã€‚</p>
<p>è®¾æœ‰éšæœºå˜é‡ $(X,Y)$ï¼Œå…¶è”åˆæ¦‚ç‡åˆ†å¸ƒä¸º</p>
<script type="math/tex; mode=display">
P(X=x_i,Y=y_i)=p_{ij}ï¼Œ\quad i=1,2,...,nï¼›j=1,2,...,m</script><p>æ¡ä»¶ç†µ $H(Y|X)$ è¡¨ç¤ºåœ¨å·²çŸ¥éšæœºå˜é‡ $X$ çš„æ¡ä»¶ä¸‹éšæœºå˜é‡ $Y$ çš„ä¸ç¡®å®šæ€§ã€‚éšæœºå˜é‡ $X$ ç»™å®šæ¡ä»¶ä¸‹éšæœºå˜é‡ $Y$ çš„<strong><span id="jump_conditional_entropy">æ¡ä»¶ç†µ</span></strong>ï¼ˆconditional entropyï¼‰$H(Y|X)$ï¼Œå®šä¹‰ä¸º $X$ ç»™å®šæ¡ä»¶ä¸‹ $Y$ çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒçš„ç†µå¯¹ $X$ çš„æ•°å­¦æœŸæœ›</p>
<script type="math/tex; mode=display">
\begin{align*}
H(Y|X) &= -\sum_{x\in X,y\in Y}p(x,y)logp(x,y)\\
&=\sum_{i=1}^n p_iH(Y|X=x_i)
\end{align*}</script><p>è¿™é‡Œï¼Œ$p_i=P(X=x_i),\quad i=1,2,â€¦,n.$</p>
<p>å¯ä»¥è¯æ˜ï¼Œ $H(Y)\geq H(Y|X)$ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šäº† $X$ çš„ä¿¡æ¯ä¹‹åï¼Œå…³äº $Y$ çš„ä¸ç¡®å®šæ€§ä¸‹é™äº†ã€‚åœ¨ç»Ÿè®¡è¯­è¨€æ¨¡å‹ä¸­ï¼Œå¦‚æœæŠŠ $X$ çœ‹æˆå‰ä¸€ä¸ªå­—ï¼Œé‚£ä¹ˆåœ¨æ•°å­¦ä¸Šå°±è¯æ˜äº†äºŒå…ƒæ¨¡å‹çš„ä¸ç¡®å®šæ€§å°äºä¸€å…ƒæ¨¡å‹ã€‚åŒç†ï¼Œå¯ä»¥å®šä¹‰æœ‰ä¸¤ä¸ªæ¡ä»¶çš„æ¡ä»¶ç†µ</p>
<script type="math/tex; mode=display">
H(X|Y,Z)=-\sum_{x\in X,y\in Y,z\in Z}p(x,y,z)logp(x,y,z)</script><p>è¿˜å¯ä»¥è¯æ˜ï¼Œ $H(X|Y)\geq H(X|Y,Z)$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‰å…ƒæ¨¡å‹åº”è¯¥æ¯”äºŒå…ƒå¥½ã€‚</p>
<blockquote>
<p>ä¸Šè¿°çš„ç­‰å·ä»€ä¹ˆæ—¶å€™æˆç«‹ï¼Ÿç­‰å·æˆç«‹è¯´æ˜å¢åŠ äº†ä¿¡æ¯ï¼Œä¸ç¡®å®šæ€§å´æ²¡æœ‰é™ä½ã€‚å¦‚æœæˆ‘ä»¬è·å–çš„ä¿¡æ¯ä¸è¦ç ”ç©¶çš„äº‹ç‰©æ¯«æ— å…³ç³»ï¼Œç­‰å·å°±æˆç«‹ã€‚</p>
</blockquote>
<p>å½“ç†µå’Œæ¡ä»¶ç†µä¸­çš„æ¦‚ç‡ç”±æ•°æ®ä¼°è®¡ï¼ˆç‰¹åˆ«æ—¶æå¤§ä¼¼ç„¶ä¼°è®¡ï¼‰å¾—åˆ°æ—¶ï¼Œæ‰€å¯¹åº”çš„ç†µä¸æ¡ä»¶ç†µåˆ†åˆ«ç§°ä¸º<strong>ç»éªŒç†µ</strong>ï¼ˆempirical entropyï¼‰å’Œ<strong>ç»éªŒæ¡ä»¶ç†µ</strong>ï¼ˆempirical conditional entropyï¼‰. æ­¤æ—¶ï¼Œå¦‚æœæœ‰æ¦‚ç‡0ï¼Œä»¤0log0=0 .</p>
<p><strong><span id="jump_IG">ä¿¡æ¯å¢ç›Š</span>ï¼ˆinformation gainï¼‰è¡¨ç¤ºå¾—çŸ¥ç‰¹å¾$X$çš„ä¿¡æ¯è€Œä½¿å¾—ç±»$Y$çš„ä¿¡æ¯çš„ä¸ç¡®å®šæ€§å‡å°‘çš„ç¨‹åº¦ã€‚</strong></p>
<blockquote>
<p><strong>å®šä¹‰ï¼ˆä¿¡æ¯å¢ç›Šï¼‰</strong>  ç‰¹å¾ $A$ å¯¹è®­ç»ƒæ•°æ®é›† $D$ çš„ä¿¡æ¯å¢ç›Š $g(D,A)$ ï¼Œå®šä¹‰ä¸ºé›†åˆ $D$ çš„ç»éªŒç†µ $H(D)$ ä¸ç‰¹å¾ $A$ ç»™å®šæ¡ä»¶ä¸‹ $D$ çš„ç»éªŒæ¡ä»¶ç†µ $H(D|A)$ ä¹‹å·®ï¼Œå³</p>
<script type="math/tex; mode=display">
g(D,A)=H(D)-H(D|A)</script></blockquote>
<p>ä¸€èˆ¬åœ°ï¼Œç†µ $H(Y)$ ä¸æ¡ä»¶ç†µ $H(Y|X)$ ä¹‹å·®ç§°ä¸º<strong><span id="jump_MI">äº’ä¿¡æ¯</span>ï¼ˆmutual informationï¼‰</strong>. å†³ç­–æ ‘å­¦ä¹ ä¸­çš„ä¿¡æ¯å¢ç›Šç­‰ä»·äºè®­ç»ƒæ•°æ®é›†ä¸­ç±»ä¸ç‰¹å¾çš„äº’ä¿¡æ¯ã€‚</p>
<p>å†³ç­–æ ‘å­¦ä¹ åº”ç”¨ä¿¡æ¯å¢ç›Šå‡†åˆ™é€‰æ‹©ç‰¹å¾ã€‚ç»™å®šè®­ç»ƒæ•°æ®é›† $D$ å’Œç‰¹å¾ $A$ï¼Œç»éªŒç†µ $H(D)$ è¡¨ç¤ºå¯¹æ•°æ®é›† $D$ è¿›è¡Œåˆ†ç±»çš„ä¸ç¡®å®šæ€§ã€‚è€Œç»éªŒæ¡ä»¶ç†µ $H(D|A)$ è¡¨ç¤ºåœ¨ç‰¹å¾ $A$ ç»™å®šçš„æ¡ä»¶ä¸‹å¯¹æ•°æ®é›† $D$ è¿›è¡Œåˆ†ç±»çš„ä¸ç¡®å®šæ€§ã€‚å®ƒä»¬çš„å·®ï¼Œå³ä¿¡æ¯å¢ç›Šï¼Œå°±è¡¨ç¤ºç”±äºç‰¹å¾ $A$ è€Œä½¿å¾—å¯¹æ•°æ®é›† $D$ çš„åˆ†ç±»çš„ä¸ç¡®å®šæ€§å‡å°‘çš„ç¨‹åº¦ã€‚æ˜¾ç„¶ï¼Œå¯¹äºæ•°æ®é›† $D$ è€Œè¨€ï¼Œä¿¡æ¯å¢ç›Šä¾èµ–äºç‰¹å¾ï¼Œä¸åŒçš„ç‰¹å¾å¾€å¾€å…·æœ‰ä¸åŒçš„ä¿¡æ¯å¢ç›Šã€‚ä¿¡æ¯å¢ç›Šå¤§çš„ç‰¹å¾å…·æœ‰æ›´å¼ºçš„åˆ†ç±»èƒ½åŠ›ã€‚</p>
<p>æ ¹æ®ä¿¡æ¯å¢ç›Šå‡†åˆ™çš„ç‰¹å¾é€‰æ‹©æ–¹æ³•æ˜¯ï¼šå¯¹è®­ç»ƒæ•°æ®é›†ï¼ˆæˆ–å­é›†ï¼‰$D$ï¼Œè®¡ç®—å…¶æ¯ä¸ªç‰¹å¾çš„ä¿¡æ¯å¢ç›Šï¼Œå¹¶æ¯”è¾ƒå®ƒä»¬çš„å¤§å°ï¼Œé€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„ç‰¹å¾ã€‚</p>
<p>è®¾è®­ç»ƒæ•°æ®é›†ä¸º $D$ï¼Œ$|D|$ è¡¨ç¤ºå…¶æ ·æœ¬å®¹é‡ï¼Œå³æ ·æœ¬ä¸ªæ•°ã€‚è®¾æœ‰ $K$ ä¸ªç±» $C_kï¼Œk=1,2,â€¦,K$ï¼Œ$|C_k|$ ä¸ºå±äºç±»$C_k$çš„æ ·æœ¬ä¸ªæ•°ï¼Œ$\sum_{k=1}^K |C_k|=|D|.$ è®¾ç‰¹å¾ $A$ æœ‰ $n$ ä¸ªä¸åŒçš„å–å€¼ $\{a_1,a_2,â€¦,a_n\}$ï¼Œæ ¹æ®ç‰¹å¾ $A$ çš„å–å€¼å°† $D$ åˆ’åˆ†ä¸º $n$ ä¸ª $D_1,D_2,â€¦,D_nï¼Œ|D_i|$ ä¸º $D_i$ çš„æ ·æœ¬ä¸ªæ•°ï¼Œ$\sum_{i=1}^n|D_i|=|D|.$ è®°å­é›† $D_i$ ä¸­å±äºç±» $C_k$ çš„æ ·æœ¬çš„é›†åˆ $D_{ik}$ï¼Œå³ $D_{ik}=D_iâˆ©C_k, |D_{ik}|$ ä¸º $D_{ik}$ çš„æ ·æœ¬ä¸ªæ•°ã€‚äºæ˜¯ä¿¡æ¯å¢ç›Šçš„ç®—æ³•å¦‚ä¸‹ï¼š</p>
<p><strong><span id="jump_algo1.1" style="color:blue">ç®—æ³• 1.1ï¼ˆä¿¡æ¯å¢ç›Šçš„ç®—æ³•ï¼‰</span></strong></p>
<p>è¾“å…¥ï¼šè®­ç»ƒæ•°æ®é›† $D$ å’Œç‰¹å¾ $A$<br>è¾“å‡ºï¼šç‰¹å¾ $A$ å¯¹è®­ç»ƒæ•°æ®é›† $D$ çš„ä¿¡æ¯å¢ç›Š $g(D,A)$</p>
<p> ï¼ˆ1ï¼‰è®¡ç®—æ•°æ®é›† $D$ çš„ç»éªŒç†µ $H(D)$</p>
<script type="math/tex; mode=display">
H(D)=-\sum_{k=1}^K \frac{|C_k|}{|D|}log_2\frac{|C_k|}{|D|}</script><p>ï¼ˆ2ï¼‰è®¡ç®—ç‰¹å¾ $A$ å¯¹æ•°æ®é›† $D$ çš„ç»éªŒæ¡ä»¶ç†µ $H(D|A)$</p>
<script type="math/tex; mode=display">
H(D|A) = \sum_{i=1}^n \frac{|D_i|}{|D|}H(D_i)=- \sum_{i=1}^n \frac{|D_i|}{|D|} \sum_{k=1}^K \frac{|D_{ik}|}{|D_i|}log_2 \frac{|D_{ik}|}{|D_i|}</script><p>ï¼ˆ3ï¼‰è®¡ç®—ä¿¡æ¯å¢ç›Š</p>
<script type="math/tex; mode=display">
g(D,A)=H(D)-H(D|A)</script><h5 id="1-2-2-ID3ç®—æ³•"><a href="#1-2-2-ID3ç®—æ³•" class="headerlink" title="1.2.2 ID3ç®—æ³•"></a><span id="jump1.2.2">1.2.2 ID3ç®—æ³•</span></h5><blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹</p>
</blockquote>
<p>ID3ç®—æ³•çš„æ ¸å¿ƒæ˜¯åœ¨å†³ç­–æ ‘å„ä¸ªç»“ç‚¹ä¸Šåº”ç”¨ä¿¡æ¯å¢ç›Šå‡†åˆ™é€‰æ‹©ç‰¹å¾ï¼Œé€’å½’åœ°æ„å»ºå†³ç­–æ ‘ã€‚å…·ä½“æ–¹æ³•æ˜¯ï¼šä»æ ¹ç»“ç‚¹å¼€å§‹ï¼Œå¯¹ç»“ç‚¹è®¡ç®—æ‰€æœ‰å¯èƒ½çš„ç‰¹å¾çš„ä¿¡æ¯å¢ç›Šï¼Œé€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„ç‰¹å¾ä½œä¸ºç»“ç‚¹çš„ç‰¹å¾ï¼Œç”±è¯¥ç‰¹å¾çš„ä¸åŒå–å€¼å»ºç«‹å­ç»“ç‚¹ï¼›å†å¯¹å­ç»“ç‚¹é€’å½’åœ°è°ƒç”¨ä»¥ä¸Šæ–¹æ³•ï¼Œæ„å»ºå†³ç­–æ ‘ï¼›ç›´åˆ°æ‰€æœ‰ç‰¹å¾çš„ä¿¡æ¯å¢ç›Šå‡å¾ˆå°æˆ–æ²¡æœ‰ç‰¹å¾å¯ä»¥é€‰æ‹©ä¸ºæ­¢ã€‚æœ€åå¾—åˆ°ä¸€ä¸ªå†³ç­–æ ‘ã€‚ID3ç›¸å½“äºç”¨æå¤§ä¼¼ç„¶æ³•è¿›è¡Œæ¦‚ç‡æ¨¡å‹çš„é€‰æ‹©ã€‚</p>
<p><strong><span id="jump_algo1.2" style="color:blue">ç®—æ³• 1.2 ï¼ˆID3ç®—æ³•ï¼‰</span></strong></p>
<p>è¾“å…¥ï¼šè®­ç»ƒæ•°æ®é›† $D$ï¼Œç‰¹å¾é›† $A$ï¼Œé˜ˆå€¼ $\varepsilon$<br>è¾“å‡ºï¼šå†³ç­–æ ‘ $T$.</p>
<p>ï¼ˆ1ï¼‰è‹¥ $D$ ä¸­æ‰€æœ‰å®ä¾‹å±äºåŒä¸€ç±» $C_k$ï¼Œåˆ™ $T$ ä¸ºå•ç»“ç‚¹æ ‘ï¼Œå¹¶å°†ç±» $C_k$ ä½œä¸ºè¯¥ç»“ç‚¹çš„ç±»æ ‡è®°ï¼Œè¿”å› $T$<br>ï¼ˆ2ï¼‰è‹¥ $A=\varnothing$ï¼Œåˆ™ $T$ ä¸ºå•ç»“ç‚¹æ ‘ï¼Œå¹¶å°† $D$  ä¸­å®ä¾‹æ•°æœ€å¤§çš„ç±» $C_k$ ä½œä¸ºè¯¥ç»“ç‚¹çš„ç±»æ ‡è®°ï¼Œè¿”å› $T$<br>ï¼ˆ3ï¼‰å¦åˆ™ï¼ŒæŒ‰ç®—æ³•1.1è®¡ç®— $A$ ä¸­å„ç‰¹å¾å¯¹ $D$ çš„ä¿¡æ¯å¢ç›Šï¼Œé€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„ç‰¹å¾ $A_g$<br>ï¼ˆ4ï¼‰è‹¥ $A_g$ çš„ä¿¡æ¯å¢ç›Šå°äºé˜ˆå€¼ $\varepsilon$ï¼Œåˆ™ç½®  $ T$ ä¸ºå•ç»“ç‚¹æ ‘ï¼Œå¹¶å°† $D$ ä¸­å®ä¾‹æ•°æœ€å¤§çš„ç±» $C_k$ ä½œä¸ºè¯¥ç»“ç‚¹çš„ç±»æ ‡è®°ï¼Œè¿”å› $T$<br>ï¼ˆ5ï¼‰å¦åˆ™ï¼Œå¯¹ $A_g$ çš„æ¯ä¸€å¯èƒ½å€¼ $a_i$ï¼Œä¾ $A_g=a_i$ å°† $D$ åˆ†å‰²ä¸ºè‹¥å¹²éç©ºå­é›† $D_i$ï¼Œå°† $D_i$ ä¸­å®ä¾‹æ•°æœ€å¤§çš„ç±»ä½œä¸ºæ ‡è®°ï¼Œæ„å»ºå­ç»“ç‚¹ï¼Œç”±ç»“ç‚¹åŠå…¶å­ç»“ç‚¹æ„æˆæ ‘ $T$ï¼Œè¿”å› $T$<br>ï¼ˆ6ï¼‰å¯¹ç¬¬ $i$ ä¸ªå­ç»“ç‚¹ï¼Œä»¥ $D_i$ ä¸ºè®­ç»ƒé›†ï¼Œä»¥ $A-\{A_g\}$ ä¸ºç‰¹å¾é›†é€’å½’åœ°è°ƒç”¨æ­¥(1) ~ æ­¥(5)ï¼Œå¾—åˆ°å­æ ‘ $T_i$ï¼Œè¿”å› $T_i$.</p>
<p>ä¾‹ï¼šå¯¹è¡¨5.1çš„è®­ç»ƒæ•°æ®é›†ï¼Œåˆ©ç”¨ID3ç®—æ³•å»ºç«‹å†³ç­–æ ‘</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602388750606.png" alt="1602388750606"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602388794784.png" alt="1602388794784"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602388824685.png" alt="1602388824685"></p>
<h4 id="1-3-ç¼ºç‚¹"><a href="#1-3-ç¼ºç‚¹" class="headerlink" title="1.3 ç¼ºç‚¹"></a>1.3 ç¼ºç‚¹</h4><ul>
<li>ID3 æ²¡æœ‰å‰ªæç­–ç•¥ï¼Œè¯¥ç®—æ³•ç”Ÿæˆçš„æ ‘å®¹æ˜“è¿‡æ‹Ÿåˆï¼›</li>
<li>ä¿¡æ¯å¢ç›Šå‡†åˆ™å¯¹å¯å–å€¼æ•°ç›®è¾ƒå¤šçš„ç‰¹å¾æœ‰æ‰€åå¥½ï¼Œç±»ä¼¼â€œç¼–å·â€çš„ç‰¹å¾å…¶ä¿¡æ¯å¢ç›Šæ¥è¿‘äº 1ï¼ˆä½†å®é™…ä¸Šè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç‰¹å¾é€‰æ‹©ï¼‰ï¼›</li>
<li><span style="color:red">åªèƒ½ç”¨äºå¤„ç†ç¦»æ•£åˆ†å¸ƒçš„ç‰¹å¾</span>ï¼›</li>
<li>æ²¡æœ‰è€ƒè™‘ç¼ºå¤±å€¼ã€‚</li>
</ul>
<h3 id="2-C4-5"><a href="#2-C4-5" class="headerlink" title="2. C4.5"></a>2. C4.5</h3><p>ä»¥ä¿¡æ¯å¢ç›Šä½œä¸ºåˆ’åˆ†è®­ç»ƒæ•°æ®é›†çš„ç‰¹å¾ï¼Œå­˜åœ¨åå‘äºé€‰æ‹©å–å€¼è¾ƒå¤šçš„ç‰¹å¾çš„é—®é¢˜ã€‚<br><strong>C4.5 ç®—æ³•æœ€å¤§çš„ç‰¹ç‚¹æ˜¯å…‹æœäº† ID3 å¯¹ç‰¹å¾æ•°ç›®çš„åé‡è¿™ä¸€ç¼ºç‚¹</strong>ï¼Œå¼•å…¥<strong><span style="color:red">ä¿¡æ¯å¢ç›Šç‡</span></strong>æ¥ä½œä¸ºåˆ†ç±»æ ‡å‡†ã€‚</p>
<h4 id="2-1-æ€æƒ³"><a href="#2-1-æ€æƒ³" class="headerlink" title="2.1 æ€æƒ³"></a>2.1 æ€æƒ³</h4><p><span id="jump_C4.5advantage">C4.5 ç›¸å¯¹äº ID3 çš„ç¼ºç‚¹å¯¹åº”æœ‰ä»¥ä¸‹æ”¹è¿›æ–¹å¼</span>ï¼š</p>
<ul>
<li><p>å¼•å…¥æ‚²è§‚å‰ªæç­–ç•¥è¿›è¡Œåå‰ªæï¼›</p>
</li>
<li><p>å¼•å…¥ä¿¡æ¯å¢ç›Šç‡ä½œä¸ºåˆ’åˆ†æ ‡å‡†ï¼›</p>
</li>
<li><p>å°†è¿ç»­ç‰¹å¾ç¦»æ•£åŒ–ï¼Œå‡è®¾ n ä¸ªæ ·æœ¬çš„è¿ç»­ç‰¹å¾ A æœ‰ m ä¸ªå–å€¼ï¼ŒC4.5 å°†å…¶æ’åºå¹¶å–ç›¸é‚»ä¸¤æ ·æœ¬å€¼çš„å¹³å‡æ•°å…± m-1 ä¸ªåˆ’åˆ†ç‚¹ï¼Œåˆ†åˆ«è®¡ç®—ä»¥è¯¥åˆ’åˆ†ç‚¹ä½œä¸ºäºŒå…ƒåˆ†ç±»ç‚¹æ—¶çš„ä¿¡æ¯å¢ç›Šï¼Œå¹¶é€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„ç‚¹ä½œä¸ºè¯¥è¿ç»­ç‰¹å¾çš„äºŒå…ƒç¦»æ•£åˆ†ç±»ç‚¹ï¼›ï¼ˆå…·ä½“å†…å®¹è§ <a href="#jump2.4">2.4 è¿ç»­å€¼å¤„ç†</a>ï¼‰</p>
</li>
<li><p>å¯¹äºç¼ºå¤±å€¼çš„å¤„ç†å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªå­é—®é¢˜ï¼š1. åœ¨ç‰¹å¾å€¼ç¼ºå¤±çš„æƒ…å†µä¸‹å¦‚ä½•è¿›è¡Œåˆ’åˆ†ç‰¹å¾çš„é€‰æ‹©ï¼Ÿï¼ˆå³å¦‚ä½•è®¡ç®—ç‰¹å¾çš„ä¿¡æ¯å¢ç›Šç‡ï¼‰2. é€‰å®šè¯¥åˆ’åˆ†ç‰¹å¾ï¼Œå¯¹äºç¼ºå¤±è¯¥ç‰¹å¾å€¼çš„æ ·æœ¬å¦‚ä½•å¤„ç†ï¼Ÿï¼ˆå³åˆ°åº•æŠŠè¿™ä¸ªæ ·æœ¬åˆ’åˆ†åˆ°å“ªä¸ªç»“ç‚¹é‡Œï¼‰(å…·ä½“å†…å®¹è§ <a href="#jump2.5">2.5 ç¼ºå¤±å€¼å¤„ç†</a>)</p>
<ul>
<li><p>é’ˆå¯¹é—®é¢˜ä¸€ï¼ŒC4.5 çš„åšæ³•æ˜¯ï¼šå¯¹äºå…·æœ‰ç¼ºå¤±å€¼ç‰¹å¾ï¼Œç”¨æ²¡æœ‰ç¼ºå¤±çš„æ ·æœ¬å­é›†æ‰€å æ¯”é‡æ¥æŠ˜ç®—ï¼›</p>
</li>
<li><p>é’ˆå¯¹é—®é¢˜äºŒï¼ŒC4.5 çš„åšæ³•æ˜¯ï¼šå°†æ ·æœ¬åŒæ—¶åˆ’åˆ†åˆ°æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œä¸è¿‡è¦è°ƒæ•´æ ·æœ¬çš„æƒé‡å€¼ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä»¥ä¸åŒæ¦‚ç‡åˆ’åˆ†åˆ°ä¸åŒèŠ‚ç‚¹ä¸­ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 id="2-2-åˆ’åˆ†æ ‡å‡†"><a href="#2-2-åˆ’åˆ†æ ‡å‡†" class="headerlink" title="2.2 åˆ’åˆ†æ ‡å‡†"></a>2.2 åˆ’åˆ†æ ‡å‡†</h4><h5 id="2-2-1-ä¿¡æ¯å¢ç›Šç‡"><a href="#2-2-1-ä¿¡æ¯å¢ç›Šç‡" class="headerlink" title="2.2.1 ä¿¡æ¯å¢ç›Šç‡"></a><span id="jump_IGR">2.2.1 ä¿¡æ¯å¢ç›Šç‡</span></h5><p><img src="/2020/07/25/å†³ç­–æ ‘/1595650023450.png" alt="1595650023450"></p>
<p>ğŸ‘†(intrinsic value)</p>
<p>$H_A(D)$è¡¨ç¤ºè®­ç»ƒæ•°æ®é›† $D$ å…³äºç‰¹å¾ $A$ çš„å€¼çš„ç†µï¼Œ$n$ æ˜¯ç‰¹å¾ $A$ å–å€¼çš„ä¸ªæ•°ã€‚ç‰¹å¾ $A$ çš„å¯èƒ½å–å€¼æ•°ç›®è¶Šå¤§ï¼ˆå³nè¶Šå¤§ï¼‰ï¼Œåˆ™ $H_A(D)$ çš„å€¼é€šå¸¸ä¼šè¶Šå¤§ã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä¿¡æ¯å¢ç›Šç‡å¯¹å¯å–å€¼è¾ƒå°‘çš„ç‰¹å¾æœ‰æ‰€åå¥½ï¼ˆåˆ†æ¯è¶Šå°ï¼Œæ•´ä½“è¶Šå¤§ï¼‰ï¼Œå› æ­¤ C4.5 å¹¶ä¸æ˜¯ç›´æ¥ç”¨å¢ç›Šç‡æœ€å¤§çš„ç‰¹å¾è¿›è¡Œåˆ’åˆ†ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ª<em>å¯å‘å¼æ–¹æ³•</em>ï¼šå…ˆä»å€™é€‰åˆ’åˆ†ç‰¹å¾ä¸­æ‰¾åˆ°ä¿¡æ¯å¢ç›Šé«˜äºå¹³å‡å€¼çš„ç‰¹å¾ï¼Œå†ä»ä¸­é€‰æ‹©å¢ç›Šç‡æœ€é«˜çš„ã€‚</p>
<h5 id="2-2-2-C4-5ç®—æ³•"><a href="#2-2-2-C4-5ç®—æ³•" class="headerlink" title="2.2.2 C4.5ç®—æ³•"></a>2.2.2 C4.5ç®—æ³•</h5><p><strong><span id="jump_algo2.1" style="color:blue">ç®—æ³• 2.1 ï¼ˆC4.5çš„ç”Ÿæˆç®—æ³•ï¼‰</span></strong></p>
<p>è¾“å…¥ï¼šè®­ç»ƒæ•°æ®é›† $D$ï¼Œç‰¹å¾é›† $A$ï¼Œé˜ˆå€¼ $\varepsilon$<br>è¾“å‡ºï¼šå†³ç­–æ ‘ $T$</p>
<p>ï¼ˆ1ï¼‰å¦‚æœ $D$ ä¸­æ‰€æœ‰å®ä¾‹å±äºåŒä¸€ç±» $C_k$ï¼Œåˆ™ç½® $T$ ä¸ºå•ç»“ç‚¹æ ‘ï¼Œå¹¶å°† $C_k$ä½œä¸ºè¯¥ç»“ç‚¹çš„ç±»ï¼Œè¿”å› $T$<br>ï¼ˆ2ï¼‰å¦‚æœ $A=\varnothing$ï¼Œåˆ™ç›´ $T$ ä¸ºå•ç»“ç‚¹æ ‘ï¼Œå¹¶å°† $D$ ä¸­å®ä¾‹æ•°æœ€å¤§çš„ç±» $C_k$ ä½œä¸ºè¯¥ç»“ç‚¹çš„ç±»ï¼Œè¿”å› $T$<br>ï¼ˆ3ï¼‰å¦åˆ™ï¼Œè®¡ç®— $A$ ä¸­å„ç‰¹å¾å¯¹ $D$ çš„ä¿¡æ¯å¢ç›Šç‡ï¼Œé€‰æ‹©ä¿¡æ¯å¢ç›Šç‡æœ€å¤§çš„ç‰¹å¾ $A_g$<br>ï¼ˆ4ï¼‰è‹¥ $A_g$ çš„ä¿¡æ¯å¢ç›Šç‡å°äºé˜ˆå€¼ $\varepsilon$ï¼Œåˆ™ç½®  $ T$ ä¸ºå•ç»“ç‚¹æ ‘ï¼Œå¹¶å°† $D$ ä¸­å®ä¾‹æ•°æœ€å¤§çš„ç±» $C_k$ ä½œä¸ºè¯¥ç»“ç‚¹çš„ç±»æ ‡è®°ï¼Œè¿”å› $T$<br>ï¼ˆ5ï¼‰å¦åˆ™ï¼Œå¯¹ $A_g$ çš„æ¯ä¸€å¯èƒ½å€¼ $a_i$ï¼Œä¾ $A_g=a_i$ å°† $D$ åˆ†å‰²ä¸ºè‹¥å¹²éç©ºå­é›† $D_i$ï¼Œå°† $D_i$ ä¸­å®ä¾‹æ•°æœ€å¤§çš„ç±»ä½œä¸ºæ ‡è®°ï¼Œæ„å»ºå­ç»“ç‚¹ï¼Œç”±ç»“ç‚¹åŠå…¶å­ç»“ç‚¹æ„æˆæ ‘ $T$ï¼Œè¿”å› $T$<br>ï¼ˆ6ï¼‰å¯¹ç¬¬ $i$ ä¸ªå­ç»“ç‚¹ï¼Œä»¥ $D_i$ ä¸ºè®­ç»ƒé›†ï¼Œä»¥ $A-\{A_g\}$ ä¸ºç‰¹å¾é›†é€’å½’åœ°è°ƒç”¨æ­¥(1) ~ æ­¥(5)ï¼Œå¾—åˆ°å­æ ‘ $T_i$ï¼Œè¿”å› $T_i$.</p>
<h4 id="2-3-å‰ªæç­–ç•¥"><a href="#2-3-å‰ªæç­–ç•¥" class="headerlink" title="2.3 å‰ªæç­–ç•¥"></a>2.3 å‰ªæç­–ç•¥</h4><p>ä¸ºä»€ä¹ˆè¦å‰ªæï¼šè¿‡æ‹Ÿåˆçš„æ ‘æ³›åŒ–èƒ½åŠ›è¡¨ç°éå¸¸å·®ã€‚</p>
<blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªè¥¿ç“œä¹¦</p>
</blockquote>
<p>å‰ªæï¼ˆpruningï¼‰æ˜¯å†³ç­–æ ‘å­¦ä¹ ç®—æ³•å¯¹ä»˜è¿‡æ‹Ÿåˆçš„ä¸»è¦æ‰‹æ®µã€‚åœ¨å†³ç­–æ ‘å­¦ä¹ ä¸­ï¼Œä¸ºä¾‹å°½å¯èƒ½æ­£ç¡®åˆ†ç±»è®­ç»ƒæ ·æœ¬ï¼Œç»“ç‚¹åˆ’åˆ†è¿‡ç¨‹å°†ä¸æ–­é‡å¤ï¼Œæœ‰æ—¶ä¼šé€ æˆå†³ç­–æ ‘åˆ†æ”¯è¿‡å¤šï¼Œè¿™æ—¶å°±å¯èƒ½å› è®­ç»ƒæ ·æœ¬å­¦å¾—â€œå¤ªå¥½â€äº†ï¼Œä»¥è‡´äºæŠŠè®­ç»ƒé›†è‡ªèº«çš„ä¸€äº›ç‰¹ç‚¹å½“ä½œæ‰€æœ‰æ•°æ®éƒ½å…·æœ‰çš„ä¸€èˆ¬æ€§è´¨è€Œå¯¼è‡´è¿‡æ‹Ÿåˆã€‚å› æ­¤ï¼Œå¯é€šè¿‡ä¸»åŠ¨å»æ‰ä¸€äº›åˆ†æ”¯æ¥é™ä½è¿‡æ‹Ÿåˆçš„é£é™©ã€‚</p>
<p>å‰ªæçš„åŸºæœ¬ç­–ç•¥æœ‰<strong>â€œé¢„å‰ªæâ€ï¼ˆpre-pruningï¼‰</strong>å’Œ<strong>â€œåå‰ªæâ€ï¼ˆpost-pruningï¼‰</strong>.  é¢„å‰ªææ˜¯æŒ‡åœ¨å†³ç­–æ ‘ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œå¯¹æ¯ä¸ªç»“ç‚¹åœ¨åˆ’åˆ†å‰å…ˆè¿›è¡Œä¼°è®¡ï¼Œè‹¥å½“å‰ç»“ç‚¹çš„åˆ’åˆ†ä¸èƒ½å¸¦æ¥å†³ç­–æ ‘æ³›åŒ–æ€§èƒ½æå‡ï¼Œåˆ™åœæ­¢åˆ’åˆ†å¹¶å°†å½“å‰ç»“ç‚¹æ ‡è®°ä¸ºå¶ç»“ç‚¹ã€‚åå‰ªæåˆ™æ˜¯å…ˆä»è®­ç»ƒé›†ç”Ÿæˆä¸€æ£µå®Œæ•´çš„å†³ç­–æ ‘ï¼Œç„¶åè‡ªåº•å‘ä¸Šåœ°å¯¹éå¶ç»“ç‚¹è¿›è¡Œè€ƒå¯Ÿï¼Œè‹¥å°†è¯¥ç»“ç‚¹å¯¹åº”çš„å­æ ‘æ›¿æ¢ä¸ºå¶ç»“ç‚¹èƒ½å¸¦æ¥å†³ç­–æ ‘æ³›åŒ–æ€§èƒ½æå‡ï¼Œåˆ™å°†è¯¥å­æ ‘æ›¿æ¢ä¸ºå¶ç»“ç‚¹ã€‚</p>
<p>å¦‚ä½•åˆ¤æ–­å†³ç­–æ ‘æ³›åŒ–æ€§èƒ½æ˜¯å¦æå‡å‘¢ï¼Ÿå¯é‡‡ç”¨ç•™å‡ºæ³•ï¼Œå³é¢„ç•™ä¸€éƒ¨åˆ†æ•°æ®ç”¨ä½œâ€œéªŒè¯é›†â€ä»¥è¿›è¡Œæ€§èƒ½è¯„ä¼°ã€‚</p>
<h5 id="2-3-1-é¢„å‰ªæ"><a href="#2-3-1-é¢„å‰ªæ" class="headerlink" title="2.3.1 é¢„å‰ªæ"></a>2.3.1 é¢„å‰ªæ</h5><p>åœ¨èŠ‚ç‚¹åˆ’åˆ†å‰æ¥ç¡®å®šæ˜¯å¦ç»§ç»­å¢é•¿ï¼ŒåŠæ—©åœæ­¢å¢é•¿çš„ä¸»è¦æ–¹æ³•æœ‰ï¼š</p>
<ul>
<li>èŠ‚ç‚¹å†…æ•°æ®æ ·æœ¬ä½äºæŸä¸€é˜ˆå€¼ï¼›</li>
<li>æ‰€æœ‰èŠ‚ç‚¹ç‰¹å¾éƒ½å·²åˆ†è£‚ï¼›</li>
<li>èŠ‚ç‚¹åˆ’åˆ†å‰å‡†ç¡®ç‡æ¯”åˆ’åˆ†åå‡†ç¡®ç‡é«˜ã€‚</li>
</ul>
<p>é¢„å‰ªæä¸ä»…å¯ä»¥é™ä½è¿‡æ‹Ÿåˆçš„é£é™©è€Œä¸”è¿˜å¯ä»¥å‡å°‘è®­ç»ƒæ—¶é—´ï¼Œä½†å¦ä¸€æ–¹é¢å®ƒæ˜¯åŸºäºâ€œè´ªå¿ƒâ€ç­–ç•¥ï¼Œä¼šå¸¦æ¥æ¬ æ‹Ÿåˆé£é™©ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1605848197047.png" alt="1605848197047"></p>
<p>(ğŸ‘† <a href="https://www.ismll.uni-hildesheim.de/lehre//////ml-08w/skript/decision_trees2.pdf" target="_blank" rel="noopener">https://www.ismll.uni-hildesheim.de/lehre//////ml-08w/skript/decision_trees2.pdf</a>)</p>
<hr>
<blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªè¥¿ç“œä¹¦</p>
</blockquote>
<p>ä¾‹å­ï¼š</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602343114032.png" alt="1602343114032"></p>
<p>å‡å®šé‡‡ç”¨ä¿¡æ¯å¢ç›Šå‡†åˆ™è¿›è¡Œåˆ’åˆ†å±æ€§é€‰æ‹©ï¼Œåˆ™ä»è¡¨4.2çš„è®­ç»ƒé›†å°†ä¼šç”Ÿæˆä¸€æ£µå¦‚å›¾4.5æ‰€ç¤ºçš„å†³ç­–æ ‘ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602343198091.png" alt="1602343198091"></p>
<p>åŸºäºä¿¡æ¯å¢ç›Šå‡†åˆ™ï¼Œæˆ‘ä»¬ä¼šé€‰å–å±æ€§â€œè„éƒ¨â€æ¥å¯¹è®­ç»ƒé›†è¿›è¡Œåˆ’åˆ†ï¼Œå¹¶äº§ç”Ÿ3ä¸ªåˆ†æ”¯ï¼Œå¦‚å›¾4.6æ‰€ç¤ºã€‚ç„¶è€Œï¼Œæ˜¯å¦åº”è¯¥è¿›è¡Œè¿™ä¸ªåˆ’åˆ†å‘¢ï¼Ÿé¢„å‰ªæè¦å¯¹åˆ’åˆ†å‰åçš„æ³›åŒ–æ€§èƒ½è¿›è¡Œè¯„ä¼°ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602342904256.png" alt="1602342904256"></p>
<p>åœ¨åˆ’åˆ†ä¹‹å‰ï¼Œæ‰€æœ‰æ ·ä¾‹é›†ä¸­åœ¨æ ¹ç»“ç‚¹ã€‚è‹¥ä¸è¿›è¡Œåˆ’åˆ†ï¼Œè¯¥ç»“ç‚¹å°†è¢«æ ‡è®°ä¸ºå¶ç»“ç‚¹ï¼Œå…¶ç±»åˆ«æ ‡è®°ä¸ºè®­ç»ƒæ ·ä¾‹æ•°æœ€å¤šçš„ç±»åˆ«ï¼Œå‡è®¾æˆ‘ä»¬å°†è¿™ä¸ªå¶ç»“ç‚¹æ ‡è®°ä¸ºâ€œå¥½ç“œâ€ï¼ˆå½“æ ·ä¾‹æœ€å¤šçš„ç±»ä¸å”¯ä¸€æ—¶ï¼Œå¯ä»»é€‰å…¶ä¸­ä¸€ç±»ï¼‰.  ç”¨è¡¨4.2çš„éªŒè¯é›†å¯¹è¿™ä¸ªå•ç»“ç‚¹å†³ç­–æ ‘è¿›è¡Œè¯„ä¼°ï¼Œç¼–å·ä¸º{4,5,8}çš„æ ·ä¾‹è¢«åˆ†ç±»æ­£ç¡®ï¼Œå¦å¤–4ä¸ªæ ·ä¾‹åˆ†ç±»é”™è¯¯ï¼Œäºæ˜¯éªŒè¯é›†çš„<strong>ç²¾åº¦</strong>ä¸º $\frac{3}{7}\times 100\%=42.9\%$.</p>
<p>åœ¨ç”¨å±æ€§â€œè„éƒ¨â€åˆ’åˆ†ä¹‹åï¼Œå›¾4.6ä¸­çš„ç»“ç‚¹â‘¡ã€â‘¢ã€â‘£åˆ†åˆ«åŒ…å«ç¼–å·ä¸º {1,2,3,14}, {6,7,15,17}, {10,16}çš„è®­ç»ƒæ ·ä¾‹ï¼Œå› æ­¤è¿™3ä¸ªç»“ç‚¹åˆ†åˆ«è¢«æ ‡è®°ä¸ºå¶ç»“ç‚¹â€œå¥½ç“œâ€ï¼Œâ€œå¥½ç“œâ€ï¼Œâ€œåç“œâ€ã€‚æ­¤æ—¶ï¼ŒéªŒè¯é›†ä¸­ç¼–å·ä¸º {4,5,8,11,12}çš„æ ·ä¾‹è¢«åˆ†ç±»æ­£ç¡®ï¼ŒéªŒè¯é›†ç²¾åº¦ä¸º $\frac{5}{7}\times 100\%=71.4\% &gt; 42.9\%$. äºæ˜¯ï¼Œç”¨â€œè„éƒ¨â€è¿›è¡Œåˆ’åˆ†å¾—ä»¥ç¡®å®šã€‚</p>
<p>ç„¶åï¼Œå†³ç­–æ ‘ç®—æ³•å¯¹ç»“ç‚¹â‘¡è¿›è¡Œåˆ’åˆ†ï¼ŒåŸºäºä¿¡æ¯å¢ç›Šå‡†åˆ™å°†æŒ‘é€‰å‡ºå±æ€§â€œè‰²æ³½â€ã€‚ç„¶è€Œï¼Œåœ¨ä½¿ç”¨â€œè‰²æ³½â€åˆ’åˆ†åï¼Œç¼–å·ä¸º {5} çš„éªŒè¯é›†æ ·æœ¬åˆ†ç±»ç»“æœä¼šç”±æ­£ç¡®è½¬ä¸ºé”™è¯¯ï¼Œï¼ˆå…¶ä½™æ ·æœ¬åˆ†ç±»ç»“æœä¸å˜ï¼‰ä½¿å¾—éªŒè¯é›†ç²¾åº¦ä¸‹é™ä¸º 57.1%. äºæ˜¯ï¼Œé¢„å‰ªæç­–ç•¥å°†ç¦æ­¢ç»“ç‚¹â‘¡è¢«åˆ’åˆ†ã€‚</p>
<p>å¯¹ç»“ç‚¹â‘¢ï¼Œæœ€ä¼˜åˆ’åˆ†å±æ€§ä¸ºâ€œæ ¹è’‚â€ï¼Œåˆ’åˆ†åéªŒè¯é›†ç²¾åº¦ä»ä¸º71.4%. è¿™ä¸ªåˆ’åˆ†ä¸èƒ½æå‡éªŒè¯é›†ç²¾åº¦ï¼Œäºæ˜¯ï¼Œé¢„å‰ªæç­–ç•¥ç¦æ­¢ç»“ç‚¹â‘¢è¢«åˆ’åˆ†ã€‚</p>
<p>å¯¹ç»“ç‚¹â‘£ï¼Œå…¶æ‰€å«è®­ç»ƒæ ·ä¾‹å·²å±äºåŒä¸€ç±»ï¼Œä¸å†è¿›è¡Œåˆ’åˆ†ã€‚</p>
<p>äºæ˜¯ï¼ŒåŸºäºé¢„å‰ªæç­–ç•¥ä»è¡¨4.2æ•°æ®æ‰€ç”Ÿæˆçš„å†³ç­–æ ‘å¦‚å›¾4.6æ‰€ç¤ºï¼Œå…¶éªŒè¯é›†ç²¾åº¦ä¸º71.4%.</p>
<p>å¯¹æ¯”å›¾4.6å’Œå›¾4.5å¯ä»¥çœ‹å‡ºï¼Œé¢„å‰ªæä½¿å¾—å†³ç­–æ ‘çš„å¾ˆå¤šåˆ†æ”¯éƒ½æ²¡æœ‰â€œå±•å¼€â€ï¼Œè¿™ä¸ä»…é™ä½äº†è¿‡æ‹Ÿåˆçš„é£é™©ï¼Œè¿˜æ˜¾è‘—å‡å°‘äº†å†³ç­–æ ‘çš„è®­ç»ƒæ—¶é—´å¼€é”€å’Œæµ‹è¯•æ—¶é—´å¼€é”€ã€‚ä½†å¦ä¸€æ–¹é¢ï¼Œæœ‰äº›åˆ†æ”¯çš„å½“å‰åˆ’åˆ†è™½ä¸èƒ½æå‡æ³›åŒ–æ€§èƒ½ï¼Œç”šè‡³å¯èƒ½å¯¼è‡´æ³›åŒ–æ€§èƒ½æš‚æ—¶ä¸‹é™ï¼Œä½†åœ¨å…¶åŸºç¡€ä¸Šè¿›è¡Œçš„åç»­åˆ’åˆ†å´æœ‰å¯èƒ½å¯¼è‡´æ€§èƒ½æ˜¾è‘—æé«˜ï¼›é¢„å‰ªæåŸºäºâ€œè´ªå¿ƒâ€æœ¬è´¨ç¦æ­¢è¿™äº›åˆ†æ”¯å±•å¼€ï¼Œç»™é¢„å‰ªæå†³ç­–æ ‘å¸¦æ¥äº†æ¬ æ‹Ÿåˆçš„é£é™©ã€‚</p>
<h5 id="2-3-2-åå‰ªæ"><a href="#2-3-2-åå‰ªæ" class="headerlink" title="2.3.2 åå‰ªæ"></a>2.3.2 åå‰ªæ</h5><p>åå‰ªææ˜¯äººä»¬æ™®éå…³æ³¨çš„å†³ç­–æ ‘å‰ªæç­–ç•¥ï¼Œä¸é¢„å‰ªææ°å¥½ç›¸åï¼Œåå‰ªæçš„æ‰§è¡Œæ­¥éª¤æ˜¯å…ˆæ„é€ å®Œæˆå®Œæ•´çš„å†³ç­–æ ‘ï¼Œå†é€šè¿‡æŸäº›æ¡ä»¶éå†æ ‘è¿›è¡Œå‰ªæï¼Œå…¶ä¸»è¦æ€è·¯æ˜¯é€šè¿‡åˆ é™¤èŠ‚ç‚¹çš„åˆ†æ”¯å¹¶ç”¨å¶èŠ‚ç‚¹æ›¿æ¢ï¼Œå‰ªå»å®Œå…¨æˆé•¿çš„æ ‘çš„å­æ ‘ï¼Œè¿™ä¸ªèŠ‚ç‚¹æ‰€æ ‡è¯†çš„ç±»åˆ«é€šè¿‡å¤§å¤šæ•°åŸåˆ™ï¼ˆmajority class criterionï¼‰ç¡®å®šï¼ˆæ—¢å°†ä¸€äº›å­æ ‘åˆ é™¤è€Œç”¨å¶å­èŠ‚ç‚¹ä»£æ›¿ï¼Œè¿™ä¸ªå¶èŠ‚ç‚¹æ‰€è¡¨ç¤ºçš„ç±»åˆ«ç”¨è¿™æ£µå­æ ‘ä¸­çš„å¤§å¤šæ•°è®­ç»ƒæ ·æœ¬æ‰€å±ç±»åˆ«æ¥è¿›è¡Œæ ‡è¯†ï¼‰ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1605848257068.png" alt="1605848257068"></p>
<p>(ğŸ‘† <a href="https://www.ismll.uni-hildesheim.de/lehre//////ml-08w/skript/decision_trees2.pdf" target="_blank" rel="noopener">https://www.ismll.uni-hildesheim.de/lehre//////ml-08w/skript/decision_trees2.pdf</a>)</p>
<p>ç›®å‰ä¸»è¦åº”ç”¨çš„åå‰ªææ–¹æ³•æœ‰å››ç§ï¼š</p>
<ul>
<li>æ‚²è§‚é”™è¯¯å‰ªæï¼ˆPessimistic Error Pruningï¼ŒPEPï¼‰</li>
<li>æœ€å°é”™è¯¯å‰ªæï¼ˆMinimum Error Pruningï¼ŒMEPï¼‰</li>
<li>ä»£ä»·å¤æ‚åº¦å‰ªæï¼ˆCost-Complexity Pruningï¼ŒCCPï¼‰</li>
<li>åŸºäºé”™è¯¯çš„å‰ªæï¼ˆError-Based Pruningï¼ŒEBPï¼‰ï¼Œä¹Ÿå«é”™è¯¯ç‡é™ä½å‰ªæï¼ˆReduced Error Pruning, REPï¼‰</li>
</ul>
<p>(ğŸ‘† æ¥è‡ª <a href="https://zhuanlan.zhihu.com/p/165647069" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/165647069</a>)</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1605860334434.png" alt="1605860334434"></p>
<blockquote>
<p>C4.5 é‡‡ç”¨çš„æ‚²è§‚é”™è¯¯å‰ªæï¼ŒCARTé‡‡ç”¨çš„ä»£ä»·å¤æ‚åº¦å‰ªæ</p>
</blockquote>
<h6 id="2-3-2-1-åŸºäºé”™è¯¯çš„å‰ªæ"><a href="#2-3-2-1-åŸºäºé”™è¯¯çš„å‰ªæ" class="headerlink" title="2.3.2.1 åŸºäºé”™è¯¯çš„å‰ªæ"></a>2.3.2.1 åŸºäºé”™è¯¯çš„å‰ªæ</h6><blockquote>
<p>å‚è€ƒ  <a href="https://www.cnblogs.com/zhangchaoyang/articles/2842490.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhangchaoyang/articles/2842490.html</a></p>
</blockquote>
<p>è¿™ä¸ªæ€è·¯å¾ˆç›´æ¥ï¼Œå®Œå…¨çš„å†³ç­–æ ‘ä¸æ˜¯è¿‡åº¦æ‹Ÿåˆä¹ˆï¼Œæˆ‘å†æä¸€ä¸ªæµ‹è¯•æ•°æ®é›†æ¥çº æ­£å®ƒã€‚å¯¹äºå®Œå…¨å†³ç­–æ ‘ä¸­çš„æ¯ä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„å­æ ‘ï¼Œæˆ‘ä»¬å°è¯•ç€æŠŠå®ƒæ›¿æ¢æˆä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œè¯¥å¶å­èŠ‚ç‚¹çš„ç±»åˆ«æˆ‘ä»¬ç”¨å­æ ‘æ‰€è¦†ç›–è®­ç»ƒæ ·æœ¬ä¸­å­˜åœ¨æœ€å¤šçš„é‚£ä¸ªç±»æ¥ä»£æ›¿ï¼Œè¿™æ ·å°±äº§ç”Ÿäº†ä¸€ä¸ªç®€åŒ–å†³ç­–æ ‘ï¼Œç„¶åæ¯”è¾ƒè¿™ä¸¤ä¸ªå†³ç­–æ ‘åœ¨æµ‹è¯•æ•°æ®é›†ä¸­çš„è¡¨ç°ï¼Œå¦‚æœç®€åŒ–å†³ç­–æ ‘åœ¨æµ‹è¯•æ•°æ®é›†ä¸­çš„é”™è¯¯æ¯”è¾ƒå°‘ï¼Œå¹¶ä¸”è¯¥å­æ ‘é‡Œé¢æ²¡æœ‰åŒ…å«å¦å¤–ä¸€ä¸ªå…·æœ‰ç±»ä¼¼ç‰¹æ€§çš„å­æ ‘ï¼ˆæ‰€è°“ç±»ä¼¼çš„ç‰¹æ€§ï¼ŒæŒ‡çš„å°±æ˜¯æŠŠå­æ ‘æ›¿æ¢æˆå¶å­èŠ‚ç‚¹åï¼Œå…¶æµ‹è¯•æ•°æ®é›†è¯¯åˆ¤ç‡é™ä½çš„ç‰¹æ€§ï¼‰ï¼Œé‚£ä¹ˆè¯¥å­æ ‘å°±å¯ä»¥æ›¿æ¢æˆå¶å­èŠ‚ç‚¹ã€‚è¯¥ç®—æ³•ä»¥bottom-upçš„æ–¹å¼éå†æ‰€æœ‰çš„å­æ ‘ï¼Œç›´è‡³æ²¡æœ‰ä»»ä½•å­æ ‘å¯ä»¥æ›¿æ¢ä½¿å¾—æµ‹è¯•æ•°æ®é›†çš„è¡¨ç°å¾—ä»¥æ”¹è¿›æ—¶ï¼Œç®—æ³•å°±å¯ä»¥ç»ˆæ­¢ã€‚</p>
<blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªè¥¿ç“œä¹¦</p>
</blockquote>
<p>åŸºäºè¡¨4.2çš„æ•°æ®å¾—åˆ°å¦‚å›¾4.5çš„å†³ç­–æ ‘ã€‚æ˜“çŸ¥ï¼Œè¯¥å†³ç­–æ ‘çš„éªŒè¯é›†ç²¾åº¦ä¸º 42.9%.<br>å¦‚ä¸‹å±•ç¤ºçš„åå‰ªæä¸ºåŸºäºé”™è¯¯çš„åå‰ªæ(EBP)ï¼Ÿ</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602344727944.png" alt="1602344727944"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602344969446.png" alt="1602344969446"></p>
<h6 id="2-3-2-2-æ‚²è§‚é”™è¯¯å‰ªæ"><a href="#2-3-2-2-æ‚²è§‚é”™è¯¯å‰ªæ" class="headerlink" title="2.3.2.2 æ‚²è§‚é”™è¯¯å‰ªæ"></a>2.3.2.2 æ‚²è§‚é”™è¯¯å‰ªæ</h6><blockquote>
<p>å‚è€ƒ<br><a href="https://www.cnblogs.com/zhangchaoyang/articles/2842490.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhangchaoyang/articles/2842490.html</a><br><a href="https://blog.csdn.net/weixin_41647586/article/details/89052754" target="_blank" rel="noopener">https://blog.csdn.net/weixin_41647586/article/details/89052754</a><br><a href="https://www.ismll.uni-hildesheim.de/lehre//////ml-08w/skript/decision_trees2.pdf" target="_blank" rel="noopener">https://www.ismll.uni-hildesheim.de/lehre//////ml-08w/skript/decision_trees2.pdf</a></p>
</blockquote>
<p>åŸºäºé”™è¯¯çš„å‰ªææ–¹æ³•å¾ˆç›´æ¥ï¼Œä½†æ˜¯éœ€è¦ä¸€ä¸ªé¢å¤–çš„æµ‹è¯•æ•°æ®é›†ï¼Œèƒ½ä¸èƒ½ä¸è¦è¿™ä¸ªé¢å¤–çš„æ•°æ®é›†å‘¢ï¼Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯å°±æå‡ºäº†æ‚²è§‚å‰ªæã€‚è¯¥æ–¹æ³•å’ŒåŸºäºé”™è¯¯çš„å‰ªææ€è·¯æ˜¯ä¸€è‡´çš„ï¼Œä¸åŒä¹‹å¤„åœ¨äºå¦‚ä½•ä¼°è®¡æ³›åŒ–è¯¯å·®ã€‚</p>
<p>æŠŠä¸€é¢—å­æ ‘ï¼ˆå…·æœ‰å¤šä¸ªå¶å­èŠ‚ç‚¹ï¼‰çš„åˆ†ç±»ç”¨ä¸€ä¸ªå¶å­èŠ‚ç‚¹æ¥æ›¿ä»£çš„è¯ï¼Œåœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯åˆ¤ç‡è‚¯å®šæ˜¯ä¸Šå‡çš„ï¼ˆè¿™æ˜¯æ˜¾ç„¶çš„ï¼ŒåŒæ ·çš„æ ·æœ¬å­é›†ï¼Œå¦‚æœç”¨å­æ ‘åˆ†ç±»å¯ä»¥åˆ†æˆå¤šä¸ªç±»ï¼Œè€Œç”¨å•é¢—å¶å­èŠ‚ç‚¹æ¥åˆ†çš„è¯åªèƒ½åˆ†æˆä¸€ä¸ªç±»ï¼Œå¤šä¸ªç±»è‚¯å®šè¦å‡†ç¡®ä¸€äº›ï¼‰ï¼Œä½†æ˜¯åœ¨æ–°æ•°æ®ä¸Šä¸ä¸€å®šã€‚äºæ˜¯æˆ‘ä»¬éœ€è¦å¯¹å­æ ‘çš„è¯¯åˆ¤æ•°åŠ ä¸Šä¸€ä¸ªç»éªŒæ€§çš„æƒ©ç½šå› å­ã€‚å¯¹äºä¸€é¢—å¶å­èŠ‚ç‚¹ï¼Œå‡è®¾å®ƒè¦†ç›–äº†Nä¸ªæ ·æœ¬ï¼Œå…¶ä¸­æœ‰Eä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆè¯¥å¶å­èŠ‚ç‚¹çš„é”™è¯¯ç‡ä¸ºï¼ˆE+0.5ï¼‰/Nã€‚è¿™ä¸ª0.5å°±æ˜¯æƒ©ç½šå› å­ã€‚é‚£ä¹ˆä¸€é¢—å­æ ‘ï¼Œå®ƒæœ‰Lä¸ªå¶å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯¥å­æ ‘çš„è¯¯åˆ¤ç‡ä¼°è®¡ä¸º $\frac{\sum_{i=1}^L E_i+0.5*L}{\sum_{i=1}^L N_i}$ã€‚å‰ªæåå†…éƒ¨èŠ‚ç‚¹å˜æˆäº†å¶å­èŠ‚ç‚¹ï¼Œå…¶è¯¯åˆ¤ä¸ªæ•° J ä¹Ÿéœ€è¦åŠ ä¸Šä¸€ä¸ªæƒ©ç½šå› å­ï¼Œå˜æˆ J+0.5ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1605847883769.png" alt="1605847883769"></p>
<blockquote>
<p>ä¸€å¥è¯æ¦‚æ‹¬ï¼ŒåŸºäºé”™è¯¯çš„å‰ªæåˆ©ç”¨é¢å¤–çš„æµ‹è¯•é›†å»ä¼°è®¡æ³›åŒ–è¯¯å·®ï¼Œæ‚²è§‚å‰ªæç›´æ¥åˆ©ç”¨è®­ç»ƒé›†ä¼°è®¡æ³›åŒ–è¯¯å·®</p>
</blockquote>
<p>å­æ ‘æ˜¯å¦å¯ä»¥è¢«å‰ªæå–å†³äºå‰ªæåçš„é”™è¯¯ J+0.5 æ˜¯å¦åœ¨ $\sum_{i=1}^L E_i+0.5*L$ çš„æ ‡å‡†å·®å†…ã€‚å¯¹äºæ ·æœ¬çš„è¯¯å·®ç‡ eï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ç»éªŒæŠŠå®ƒä¼°è®¡æˆå„ç§å„æ ·çš„åˆ†å¸ƒæ¨¡å‹ï¼Œæ¯”å¦‚æ˜¯äºŒé¡¹å¼åˆ†å¸ƒã€æ­£æ€åˆ†å¸ƒã€‚</p>
<p>é‚£ä¹ˆä¸€æ£µæ ‘é”™è¯¯åˆ†ç±»ä¸€ä¸ªæ ·æœ¬å€¼ä¸º1ï¼Œæ­£ç¡®åˆ†ç±»ä¸€ä¸ªæ ·æœ¬å€¼ä¸º0ï¼Œè¯¥æ ‘é”™è¯¯åˆ†ç±»çš„æ¦‚ç‡ï¼ˆè¯¯åˆ¤ç‡ï¼‰ä¸ºeï¼ˆeä¸ºåˆ†å¸ƒçš„å›ºæœ‰å±æ€§,å¯ä»¥é€šè¿‡ $\frac{\sum_{i=1}^L E_i+0.5*L}{\sum_{i=1}^L N_i}$ ç»Ÿè®¡å‡ºæ¥ï¼‰ï¼Œé‚£ä¹ˆæ ‘çš„è¯¯åˆ¤æ¬¡æ•°å°±æ˜¯ä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œæˆ‘ä»¬å¯ä»¥ä¼°è®¡å‡ºè¯¥æ ‘çš„è¯¯åˆ¤æ¬¡æ•°å‡å€¼å’Œæ ‡å‡†å·®ï¼š</p>
<script type="math/tex; mode=display">
E(subtree\_err\_count)=Nâˆ—e\\

std(subtree\_err\_count)=Nâˆ—eâˆ—(1âˆ’e)</script><p>æŠŠå­æ ‘æ›¿æ¢æˆå¶å­èŠ‚ç‚¹åï¼Œè¯¥å¶å­çš„è¯¯åˆ¤æ¬¡æ•°ä¹Ÿæ˜¯ä¸€ä¸ªä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œå…¶æ¦‚ç‡è¯¯åˆ¤ç‡eä¸º(E+0.5)/Nï¼Œå› æ­¤å¶å­èŠ‚ç‚¹çš„è¯¯åˆ¤æ¬¡æ•°å‡å€¼ä¸º </p>
<script type="math/tex; mode=display">
E(leaf\_err\_count)=Nâˆ—e</script><p>è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ä¸€ç§ä¿å®ˆçš„åˆ†è£‚æ–¹æ¡ˆï¼Œå³æœ‰è¶³å¤Ÿå¤§çš„ç½®ä¿¡åº¦ä¿è¯åˆ†è£‚åå‡†ç¡®ç‡æ¯”ä¸åˆ†è£‚æ—¶çš„å‡†ç¡®ç‡é«˜æ—¶æ‰åˆ†è£‚ï¼Œå¦åˆ™å°±ä¸åˆ†è£‚ï¼Œä¹Ÿå°±æ˜¯åº”è¯¥å‰ªæã€‚å¦‚æœè¦åˆ†è£‚ï¼ˆå³ä¸å‰ªæï¼‰ï¼Œè‡³å°‘è¦ä¿è¯åˆ†è£‚åçš„è¯¯åˆ¤æ•°E(subtree_err_count)è¦å°äºä¸åˆ†è£‚çš„è¯¯åˆ¤æ•°E(leaf_err_count)ï¼Œè€Œä¸”ä¸ºäº†ä¿è¯è¶³å¤Ÿé«˜çš„ç½®ä¿¡åº¦ï¼Œè¿™é‡Œç”šè‡³è¦æ˜¯</p>
<script type="math/tex; mode=display">
E(subtree\_err\_count)+std(subtree\_err\_count)<E(leaf\_err\_count)</script><p>è¿™é‡ŒåŠ äº†ä¸€ä¸ªæ ‡å‡†å·®å¯ä»¥æœ‰95%çš„ç½®ä¿¡åº¦ã€‚</p>
<p>åä¹‹å°±æ˜¯ä¸åˆ†è£‚ï¼Œå³å‰ªæçš„æ¡ä»¶ï¼š</p>
<script type="math/tex; mode=display">
E(subtree\_err\_count)+std(subtree\_err\_count)>E(leaf\_err\_count)</script><p><span style="color:red">ï¼ˆæ­¤å¤„å…¬å¼å­˜ç–‘ï¼Œçœ‹åˆ°è®¸å¤šä¸åŒçš„è¯´æ³•ï¼‰</span></p>
<p>ä¾‹ï¼š<br><img src="/2020/07/25/å†³ç­–æ ‘/1605857635104.png" alt="1605857635104"></p>
<p>T4è¿™æ£µå­æ ‘çš„è¯¯å·®ç‡ï¼šï¼ˆå³åˆ†è£‚åçš„è¯¯å·®ç‡ï¼‰</p>
<script type="math/tex; mode=display">
\frac{(2+3)+0.5âˆ—3}{16}=0.40625</script><p>å­æ ‘è¯¯å·®ç‡çš„æ ‡å‡†å·®ï¼š</p>
<script type="math/tex; mode=display">
\sqrt{16*0.40625*(1-0.40625)}=1.96</script><p>å­æ ‘æ›¿æ¢ä¸ºä¸€ä¸ªå¶èŠ‚ç‚¹åï¼Œå…¶è¯¯å·®ç‡ä¸ºï¼šï¼ˆå³åˆ†è£‚å‰çš„è¯¯å·®ç‡ï¼‰</p>
<script type="math/tex; mode=display">
\frac{7+0.5}{16}=0.46875</script><p>å› ä¸º $16âˆ—0.40625+1.96=8.46&gt;16âˆ—0.46875=7.5$ï¼Œæ‰€ä»¥åº”è¯¥æŠŠT4çš„æ‰€æœ‰å­èŠ‚ç‚¹å…¨éƒ¨å‰ªæ‰ï¼ŒT4å˜æˆä¸€ä¸ªå¶å­èŠ‚ç‚¹ã€‚</p>
<hr>
<p><strong>C4.5 é‡‡ç”¨æ‚²è§‚å‰ªææ–¹æ³•</strong>ï¼Œç”¨é€’å½’çš„æ–¹å¼ä»åº•å¾€ä¸Šé’ˆå¯¹æ¯ä¸€ä¸ªéå¶å­èŠ‚ç‚¹ï¼Œè¯„ä¼°ç”¨ä¸€ä¸ªæœ€ä½³å¶å­èŠ‚ç‚¹å»ä»£æ›¿è¿™è¯¾å­æ ‘æ˜¯å¦æœ‰ç›Šã€‚å¦‚æœå‰ªæåä¸å‰ªæå‰ç›¸æ¯”å…¶é”™è¯¯ç‡æ˜¯ä¿æŒæˆ–è€…ä¸‹é™ï¼Œåˆ™è¿™æ£µå­æ ‘å°±å¯ä»¥è¢«æ›¿æ¢æ‰ã€‚C4.5 é€šè¿‡è®­ç»ƒæ•°æ®é›†ä¸Šçš„é”™è¯¯åˆ†ç±»æ•°é‡æ¥ä¼°ç®—æœªçŸ¥æ ·æœ¬ä¸Šçš„é”™è¯¯ç‡ã€‚</p>
<p>åå‰ªæå†³ç­–æ ‘çš„æ¬ æ‹Ÿåˆé£é™©å¾ˆå°ï¼Œæ³›åŒ–æ€§èƒ½å¾€å¾€ä¼˜äºé¢„å‰ªæå†³ç­–æ ‘ã€‚ä½†åŒæ—¶å…¶è®­ç»ƒæ—¶é—´ä¼šå¤§çš„å¤šã€‚</p>
<h4 id="2-4-è¿ç»­å€¼å¤„ç†"><a href="#2-4-è¿ç»­å€¼å¤„ç†" class="headerlink" title=" 2.4 è¿ç»­å€¼å¤„ç†"></a><span id="jump2.4"> 2.4 è¿ç»­å€¼å¤„ç†</span></h4><blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªè¥¿ç“œä¹¦</p>
</blockquote>
<p>åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬ä»…è®¨è®ºäº†åŸºäºç¦»æ•£å±æ€§æ¥ç”Ÿæˆå†³ç­–æ ‘ã€‚ç°å®å­¦ä¹ ä»»åŠ¡ä¸­å¸¸ä¼šé‡åˆ°è¿ç»­å±æ€§ï¼Œæœ‰å¿…è¦è®¨è®ºå¦‚ä½•åœ¨å†³ç­–æ ‘å­¦ä¹ ä¸­ä½¿ç”¨è¿ç»­å±æ€§ã€‚</p>
<p>ç”±äºè¿ç»­å±æ€§çš„å¯å–å€¼æ•°ç›®ä¸å†æœ‰é™ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥æ ¹æ®è¿ç»­å±æ€§çš„å¯å–å€¼æ¥å¯¹ç»“ç‚¹è¿›è¡Œåˆ’åˆ†ã€‚æ­¤æ—¶ï¼Œ<strong>è¿ç»­å±æ€§ç¦»æ•£åŒ–</strong>æŠ€æœ¯å¯æ´¾ä¸Šç”¨åœºã€‚æœ€ç®€å•çš„ç­–ç•¥æ˜¯é‡‡ç”¨<strong>äºŒåˆ†æ³•</strong>ï¼ˆbi-partitionï¼‰å¯¹è¿ç»­å±æ€§è¿›è¡Œå¤„ç†ï¼Œè¿™æ­£æ˜¯C4.5å†³ç­–æ ‘ç®—æ³•ä¸­é‡‡ç”¨çš„æœºåˆ¶ã€‚</p>
<p>ç»™å®šæ ·æœ¬é›† $D$ å’Œè¿ç»­å±æ€§ $a$ï¼Œå‡å®š $a$ åœ¨ $D$ ä¸Šå‡ºç°äº† <span style="color:blue">$n$</span> ä¸ªä¸åŒçš„å–å€¼ï¼Œå°†è¿™äº›å€¼ä»å°åˆ°å¤§è¿›è¡Œæ’åºï¼Œè®°ä¸º $\{a^1,a^2,â€¦,a^n \}$.  åŸºäºåˆ’åˆ†ç‚¹ $t$ å¯å°† $D$ åˆ†ä¸ºå­é›† $D_t^-$ å’Œ $D_t^+$ï¼Œå…¶ä¸­ $D_t^-$ åŒ…å«é‚£äº›åœ¨å±æ€§ $a$ ä¸Šå–å€¼ä¸å¤§äº $t$ çš„æ ·æœ¬ï¼Œè€Œ $D_t^+$ åˆ™åŒ…å«é‚£äº›åœ¨å±æ€§ $a$ ä¸Šå–å€¼å¤§äº $t$ çš„æ ·æœ¬ã€‚æ˜¾ç„¶ï¼Œå¯¹ç›¸é‚»çš„å±æ€§å–å€¼ $a^i$ä¸ $a^{i+1}$ æ¥è¯´ï¼Œ$t$ åœ¨åŒºé—´ $[a^i,a^{i+1})$ ä¸­å–ä»»æ„å€¼æ‰€äº§ç”Ÿçš„åˆ’åˆ†ç»“æœç›¸åŒã€‚å› æ­¤ï¼Œå¯¹è¿ç»­å±æ€§ $a$ï¼Œæˆ‘ä»¬å¯è€ƒå¯ŸåŒ…å« <span style="color:blue">$n-1$</span> ä¸ªå…ƒç´ çš„å€™é€‰åˆ’åˆ†ç‚¹é›†åˆ</p>
<script type="math/tex; mode=display">
T_a=\{\frac{a^i+a^{i+1}}{2}|1\leq i \leq n-1 \}.</script><p>å³æŠŠåŒºé—´ $[a^i,a^{i+1})$ çš„ä¸­ä½ç‚¹ $\frac{a^i+a^{i+1}}{2}$ä½œä¸ºå€™é€‰åˆ’åˆ†ç‚¹ã€‚</p>
<blockquote>
<p>å¯å°†åˆ’åˆ†ç‚¹è®¾ä¸ºè¯¥å±æ€§åœ¨è®­ç»ƒé›†ä¸­å‡ºç°çš„ä¸å¤§äºä¸­ä½ç‚¹çš„æœ€å¤§å€¼ï¼Œä»è€Œä½¿å¾—æœ€ç»ˆå†³ç­–æ ‘ä½¿ç”¨çš„åˆ’åˆ†ç‚¹éƒ½åœ¨è®­ç»ƒé›†ä¸­å‡ºç°è¿‡</p>
</blockquote>
<p>ç„¶åå°±å¯ä»¥åƒç¦»æ•£å±æ€§å€¼ä¸€æ ·æ¥è€ƒå¯Ÿè¿™äº›åˆ’åˆ†ç‚¹ï¼Œé€‰å–æœ€ä¼˜çš„åˆ’åˆ†ç‚¹è¿›è¡Œæ ·æœ¬é›†åˆçš„åˆ’åˆ†ã€‚ä¾‹å¦‚ï¼š</p>
<script type="math/tex; mode=display">
Gain(D,a)=max_{tâˆˆT_a} Gain(D,a,t)=max_{tâˆˆT_a} Ent(D) - 
\sum_{\lambdaâˆˆ\{-,+\}} \frac{|D_t^\lambda|}{|D|}Ent(D_t^\lambda)</script><p>å…¶ä¸­ $Gain(D,a,t)$ æ˜¯æ ·æœ¬é›† $D$ åŸºäºåˆ’åˆ†ç‚¹ $t$ äºŒåˆ†åçš„ä¿¡æ¯å¢ç›Šã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å°±å¯é€‰æ‹©ä½¿ $Gain(D,a,t)$ æœ€å¤§åŒ–çš„åˆ’åˆ†ç‚¹ã€‚</p>
<p>ä¾‹ï¼š</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602392020465.png" alt="1602392020465"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602392050284.png" alt="1602392050284"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1605845780129.png" alt="1605845780129"></p>
<p>(ğŸ‘† æ¥è‡ª <a href="https://www.cnblogs.com/zhangchaoyang/articles/2842490.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhangchaoyang/articles/2842490.html</a>)</p>
<h4 id="2-5-ç¼ºå¤±å€¼å¤„ç†"><a href="#2-5-ç¼ºå¤±å€¼å¤„ç†" class="headerlink" title="2.5 ç¼ºå¤±å€¼å¤„ç†"></a><span id="jump2.5">2.5 ç¼ºå¤±å€¼å¤„ç†</span></h4><blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªè¥¿ç“œä¹¦</p>
</blockquote>
<p>ç°å®ä»»åŠ¡ä¸­å¸¸ä¼šé‡åˆ°ä¸å®Œæ•´æ ·æœ¬ï¼Œå³æ ·æœ¬çš„æŸäº›å±æ€§å€¼ç¼ºå¤±ã€‚è‹¥ç®€å•åœ°æ”¾å¼ƒä¸å®Œæ•´æ ·æœ¬ï¼Œä»…ä½¿ç”¨æ— ç¼ºå¤±å€¼çš„æ ·æœ¬æ¥è¿›è¡Œå­¦ä¹ ï¼Œæ˜¾ç„¶æ˜¯å¯¹æ•°æ®ä¿¡æ¯æå¤§çš„æµªè´¹ã€‚ä¾‹å¦‚ï¼Œè¡¨4.4ä¸­ï¼Œè‹¥æ”¾å¼ƒä¸å®Œæ•´æ ·æœ¬ï¼Œåˆ™ä»…æœ‰ç¼–å· {4,7,14,16} çš„4ä¸ªæ ·æœ¬èƒ½è¢«ä½¿ç”¨ã€‚æ˜¾ç„¶ï¼Œæœ‰å¿…è¦è€ƒè™‘åˆ©ç”¨ç¼ºå¤±å±æ€§å€¼çš„è®­ç»ƒæ ·ä¾‹æ¥è¿›è¡Œå­¦ä¹ ã€‚</p>
<p>æˆ‘ä»¬éœ€è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<p>ï¼ˆ1ï¼‰å¦‚ä½•åœ¨å±æ€§å€¼ç¼ºå¤±çš„æƒ…å†µä¸‹è¿›è¡Œåˆ’åˆ†å±æ€§é€‰æ‹©ï¼Ÿ<br>ï¼ˆ2ï¼‰ç»™å®šåˆ’åˆ†å±æ€§ï¼Œè‹¥æ ·æœ¬åœ¨è¯¥å±æ€§ä¸Šçš„å€¼ç¼ºå¤±ï¼Œå¦‚ä½•å¯¹æ ·æœ¬è¿›è¡Œåˆ’åˆ†ï¼Ÿ</p>
<p>ç»™å®šè®­ç»ƒé›† $D$ å’Œå±æ€§ $a$ï¼Œä»¤ $\tilde D$ è¡¨ç¤º $D$ ä¸­åœ¨å±æ€§ $a$ ä¸Šæ²¡æœ‰ç¼ºå¤±å€¼çš„æ ·æœ¬å­é›†ã€‚å¯¹é—®é¢˜ï¼ˆ1ï¼‰ï¼Œæ˜¾ç„¶æˆ‘ä»¬ä»…å¯æ ¹æ® $\tilde D$ æ¥åˆ¤æ–­å±æ€§ $a$ çš„ä¼˜åŠ£ï¼å‡å®šå±æ€§ $a$ æœ‰ $V$ ä¸ªå¯å–å€¼ $\{ a^1,a^2,â€¦,a^V\}$ï¼Œä»¤ $\tilde D^v$ è¡¨ç¤º $\tilde D$ ä¸­åœ¨å±æ€§ $a$ä¸Šå–å€¼ä¸º $a^v$ çš„æ ·æœ¬å­é›†ï¼Œ$\tilde D_k$ è¡¨ç¤º $\tilde D$ ä¸­å±äºç¬¬ $k$ ç±» ($k=1,2,â€¦,K$)ï¼Œåˆ™æ˜¾ç„¶æœ‰ $\tilde D = \cup _{k=1}^K \tilde D_k, \tilde D = \cup _{v=1}^V \tilde D^v$.  å‡å®šæˆ‘ä»¬ä¸ºæ¯ä¸ªæ ·æœ¬ $x$ èµ‹äºˆä¸€ä¸ªæƒé‡ $w_x$ï¼ˆåœ¨å†³æ ‘å­¦ä¹ å¼€å§‹é˜¶æ®µï¼Œæ ¹ç»“ç‚¹ä¸­å„æ ·æœ¬çš„æƒé‡åˆå§‹åŒ–ä¸º1ï¼‰ï¼Œå¹¶å®šä¹‰</p>
<script type="math/tex; mode=display">
\begin{align*}
\rho &= \frac{\sum_{x\in \tilde D} w_x}{\sum_{x \in D}w_x},\\
\tilde p_k &= \frac{\sum_{x\in \tilde D_k} w_x}{\sum_{x\in \tilde D} w_x} \quad (1\leq k \leq K),\\
\tilde r_v &=\frac{\sum_{x\in \tilde D^v} w_x}{\sum_{x\in \tilde D} w_x} \quad (1\leq v \leq V).
\end{align*}</script><p>ç›´è§‚åœ°çœ‹ï¼Œå¯¹å±æ€§ $a$ï¼Œ$\rho$ è¡¨ç¤ºæ— ç¼ºå¤±å€¼æ ·æœ¬æ‰€å çš„æ¯”ä¾‹ï¼Œ$\tilde p_k$è¡¨ç¤ºæ— ç¼ºå¤±å€¼æ ·æœ¬ä¸­ç¬¬ $k$ ç±»æ‰€å çš„æ¯”ä¾‹ï¼Œ$\tilde r_v$ åˆ™è¡¨ç¤ºæ— ç¼ºå¤±å€¼æ ·æœ¬ä¸­åœ¨å±æ€§ $a$ ä¸Šå–å€¼ $a^v$ çš„æ ·æœ¬æ‰€å çš„æ¯”ä¾‹ã€‚æ˜¾ç„¶ $\sum_{k=1}^K\tilde p_k=1, \sum_{v=1}^V\tilde r_v=1.$ </p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602422558525.png" alt="1602422558525"></p>
<p>C4.5ç®—æ³•ä½¿ç”¨äº†ä¸Šè¿°è§£å†³æ–¹æ¡ˆã€‚ä¸‹é¢ä»¥è¡¨4.4çš„æ•°æ®é›†ä¸ºä¾‹æ¥ç”Ÿæˆä¸€æ£µå†³ç­–æ ‘ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602422851775.png" alt="1602422851775"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602422915383.png" alt="1602422915383"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602422970229.png" alt="1602422970229"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602423017458.png" alt="1602423017458"></p>
<h4 id="2-6-ç¼ºç‚¹"><a href="#2-6-ç¼ºç‚¹" class="headerlink" title="2.6 ç¼ºç‚¹"></a>2.6 ç¼ºç‚¹</h4><ul>
<li>å‰ªæç­–ç•¥å¯ä»¥å†ä¼˜åŒ–ï¼›</li>
<li>C4.5 ç”¨çš„æ˜¯å¤šå‰æ ‘ï¼Œç”¨äºŒå‰æ ‘æ•ˆç‡æ›´é«˜ï¼›</li>
<li><span style="color:red">C4.5 åªèƒ½ç”¨äºåˆ†ç±»</span>ï¼›</li>
<li>C4.5 ä½¿ç”¨çš„ç†µæ¨¡å‹æ‹¥æœ‰å¤§é‡è€—æ—¶çš„å¯¹æ•°è¿ç®—ï¼Œè¿ç»­å€¼è¿˜æœ‰æ’åºè¿ç®—ï¼›</li>
<li>C4.5 åœ¨æ„é€ æ ‘çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ•°å€¼å±æ€§å€¼éœ€è¦æŒ‰ç…§å…¶å¤§å°è¿›è¡Œæ’åºï¼Œä»ä¸­é€‰æ‹©ä¸€ä¸ªåˆ†å‰²ç‚¹ï¼Œæ‰€ä»¥åªé€‚åˆäºèƒ½å¤Ÿé©»ç•™äºå†…å­˜çš„æ•°æ®é›†ï¼Œå½“è®­ç»ƒé›†å¤§å¾—æ— æ³•åœ¨å†…å­˜å®¹çº³æ—¶ï¼Œç¨‹åºæ— æ³•è¿è¡Œã€‚</li>
</ul>
<h3 id="3-CART"><a href="#3-CART" class="headerlink" title="3. CART"></a>3. CART</h3><p>ID3 å’Œ C4.5 è™½ç„¶åœ¨å¯¹è®­ç»ƒæ ·æœ¬é›†çš„å­¦ä¹ ä¸­å¯ä»¥å°½å¯èƒ½å¤šåœ°æŒ–æ˜ä¿¡æ¯ï¼Œä½†æ˜¯å…¶ç”Ÿæˆçš„å†³ç­–æ ‘åˆ†æ”¯ã€è§„æ¨¡éƒ½æ¯”è¾ƒå¤§ï¼ŒCART ç®—æ³•çš„äºŒåˆ†æ³•å¯ä»¥ç®€åŒ–å†³ç­–æ ‘çš„è§„æ¨¡ï¼Œæé«˜ç”Ÿæˆå†³ç­–æ ‘çš„æ•ˆç‡ã€‚</p>
<h4 id="3-1-æ€æƒ³"><a href="#3-1-æ€æƒ³" class="headerlink" title="3.1 æ€æƒ³"></a>3.1 æ€æƒ³</h4><p>CART æ˜¯åœ¨ç»™å®šè¾“å…¥éšæœºå˜é‡ $X$ æ¡ä»¶ä¸‹è¾“å‡ºéšæœºå˜é‡ $Y$ çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒçš„å­¦ä¹ æ–¹æ³•ã€‚CART å‡è®¾å†³ç­–æ ‘æ˜¯äºŒå‰æ ‘ï¼Œå†…éƒ¨ç»“ç‚¹ç‰¹å¾çš„å–å€¼ä¸º â€æ˜¯â€œ å’Œ â€å¦â€œï¼Œå·¦åˆ†æ”¯æ˜¯å–å€¼ä¸ºâ€æ˜¯â€œçš„åˆ†æ”¯ï¼Œå³åˆ†æ”¯æ˜¯å–å€¼ä¸ºâ€å¦â€œçš„åˆ†æ”¯ã€‚è¿™æ ·çš„å†³ç­–æ ‘ç­‰ä»·äºé€’å½’åœ°äºŒåˆ†æ¯ä¸ªç‰¹å¾ï¼Œå°†è¾“å…¥ç©ºé—´å³ç‰¹å¾ç©ºé—´åˆ’åˆ†ä¸ºæœ‰é™ä¸ªå•å…ƒï¼Œå¹¶åœ¨è¿™äº›å•å…ƒä¸Šç¡®å®šé¢„æµ‹çš„æ¦‚ç‡åˆ†å¸ƒï¼Œä¹Ÿå°±æ˜¯åœ¨è¾“å…¥ç»™å®šçš„æ¡ä»¶ä¸‹è¾“å‡ºçš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒã€‚ï¼ˆã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹ï¼‰</p>
<p>CART åŒ…å«çš„åŸºæœ¬è¿‡ç¨‹æœ‰åˆ†è£‚ï¼Œå‰ªæå’Œæ ‘é€‰æ‹©ã€‚</p>
<ul>
<li><strong>åˆ†è£‚</strong>ï¼šåˆ†è£‚è¿‡ç¨‹æ˜¯ä¸€ä¸ªäºŒå‰é€’å½’åˆ’åˆ†è¿‡ç¨‹ï¼Œå…¶è¾“å…¥å’Œé¢„æµ‹ç‰¹å¾æ—¢å¯ä»¥æ˜¯è¿ç»­å‹çš„ä¹Ÿå¯ä»¥æ˜¯ç¦»æ•£å‹çš„ï¼ŒCART æ²¡æœ‰åœæ­¢å‡†åˆ™ï¼Œä¼šä¸€ç›´ç”Ÿé•¿ä¸‹å»ï¼›</li>
<li><strong>å‰ªæ</strong>ï¼š<strong>é‡‡ç”¨<em>ä»£ä»·å¤æ‚åº¦å‰ªæ</em></strong>ï¼Œä»æœ€å¤§æ ‘å¼€å§‹ï¼Œæ¯æ¬¡é€‰æ‹©è®­ç»ƒæ•°æ®ç†µå¯¹æ•´ä½“æ€§èƒ½è´¡çŒ®æœ€å°çš„é‚£ä¸ªåˆ†è£‚èŠ‚ç‚¹ä½œä¸ºä¸‹ä¸€ä¸ªå‰ªæå¯¹è±¡ï¼Œç›´åˆ°åªå‰©ä¸‹æ ¹èŠ‚ç‚¹ã€‚CART ä¼šäº§ç”Ÿä¸€ç³»åˆ—åµŒå¥—çš„å‰ªææ ‘ï¼Œéœ€è¦ä»ä¸­é€‰å‡ºä¸€é¢—æœ€ä¼˜çš„å†³ç­–æ ‘ï¼›</li>
<li><strong>æ ‘é€‰æ‹©</strong>ï¼šç”¨å•ç‹¬çš„æµ‹è¯•é›†è¯„ä¼°æ¯æ£µå‰ªææ ‘çš„é¢„æµ‹æ€§èƒ½ï¼ˆä¹Ÿå¯ä»¥ç”¨äº¤å‰éªŒè¯ï¼‰ã€‚</li>
</ul>
<p><span id="jump_CARTadvantage">CART åœ¨ C4.5 çš„åŸºç¡€ä¸Šè¿›è¡Œäº†å¾ˆå¤šæå‡ã€‚</span></p>
<ul>
<li>C4.5 ä¸ºå¤šå‰æ ‘ï¼Œè¿ç®—é€Ÿåº¦æ…¢ï¼ŒCART ä¸ºäºŒå‰æ ‘ï¼Œè¿ç®—é€Ÿåº¦å¿«ï¼›</li>
<li>C4.5 åªèƒ½åˆ†ç±»ï¼Œ<span style="color:red">CART æ—¢å¯ä»¥åˆ†ç±»ä¹Ÿå¯ä»¥å›å½’</span>ï¼›</li>
<li>CART ä½¿ç”¨ <strong><span style="color:red">Gini ç³»æ•°</span></strong> ä½œä¸ºå˜é‡çš„ä¸çº¯åº¦é‡ï¼Œå‡å°‘äº†å¤§é‡çš„å¯¹æ•°è¿ç®—ï¼›</li>
<li>CART é‡‡ç”¨ä»£ç†æµ‹è¯•æ¥ä¼°è®¡ç¼ºå¤±å€¼ï¼Œè€Œ C4.5 ä»¥ä¸åŒæ¦‚ç‡åˆ’åˆ†åˆ°ä¸åŒèŠ‚ç‚¹ä¸­ï¼›</li>
<li>CART é‡‡ç”¨â€œåŸºäºä»£ä»·å¤æ‚åº¦å‰ªæâ€æ–¹æ³•è¿›è¡Œå‰ªæï¼Œè€Œ C4.5 é‡‡ç”¨æ‚²è§‚å‰ªææ–¹æ³•ã€‚</li>
</ul>
<h4 id="3-2-åˆ’åˆ†æ ‡å‡†"><a href="#3-2-åˆ’åˆ†æ ‡å‡†" class="headerlink" title="3.2 åˆ’åˆ†æ ‡å‡†"></a>3.2 åˆ’åˆ†æ ‡å‡†</h4><p>æœ€ä¼˜åˆ’åˆ†å±æ€§ $a^*=argmin_{aâˆˆA}Gini$_$index (D,a)$.</p>
<p>å¯¹å›å½’æ ‘ç”¨å¹³æ–¹è¯¯å·®æœ€å°åŒ–å‡†åˆ™ï¼Œå¯¹åˆ†ç±»æ ‘ç”¨åŸºå°¼æŒ‡æ•°ï¼ˆGini indexï¼‰æœ€å°åŒ–å‡†åˆ™ï¼Œè¿›è¡Œç‰¹å¾é€‰æ‹©ï¼Œç”ŸæˆäºŒå‰æ ‘ã€‚å…³äºå›å½’æ ‘ï¼Œè§åé¢ <a href="#jump3.6">3.6 å›å½’æ ‘</a>.</p>
<p>ç†µæ¨¡å‹æ‹¥æœ‰å¤§é‡è€—æ—¶çš„å¯¹æ•°è¿ç®—ï¼ŒåŸºå°¼æŒ‡æ•°åœ¨ç®€åŒ–æ¨¡å‹çš„åŒæ—¶è¿˜ä¿ç•™äº†ç†µæ¨¡å‹çš„ä¼˜ç‚¹ã€‚<strong><span id="jump_Gini">åŸºå°¼æŒ‡æ•°ä»£è¡¨äº†æ¨¡å‹çš„ä¸çº¯åº¦ï¼ŒåŸºå°¼ç³»æ•°è¶Šå°ï¼Œä¸çº¯åº¦è¶Šä½ï¼Œç‰¹å¾è¶Šå¥½ã€‚è¿™å’Œä¿¡æ¯å¢ç›Šï¼ˆç‡ï¼‰æ­£å¥½ç›¸åã€‚</span></strong></p>
<hr>
<h5 id="3-2-1-åŸºå°¼æŒ‡æ•°"><a href="#3-2-1-åŸºå°¼æŒ‡æ•°" class="headerlink" title="3.2.1 åŸºå°¼æŒ‡æ•°"></a>3.2.1 åŸºå°¼æŒ‡æ•°</h5><blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹</p>
</blockquote>
<p>åˆ†ç±»æ ‘ç”¨åŸºå°¼æŒ‡æ•°é€‰æ‹©æœ€ä¼˜ç‰¹å¾ï¼ŒåŒæ—¶å†³å®šè¯¥ç‰¹å¾çš„æœ€ä¼˜äºŒå€¼åˆ‡åˆ†ç‚¹ã€‚</p>
<blockquote>
<p><strong>å®šä¹‰ ï¼ˆåŸºå°¼æŒ‡æ•°ï¼‰</strong> åˆ†ç±»é—®é¢˜ä¸­ï¼Œå‡è®¾æœ‰ $K$ ä¸ªç±»ï¼Œæ ·æœ¬ç‚¹å±äºç¬¬ $k$ ç±»çš„æ¦‚ç‡ä¸º $p_k$ï¼Œåˆ™æ¦‚ç‡åˆ†å¸ƒçš„åŸºå°¼æŒ‡æ•°å®šä¹‰ä¸º</p>
<script type="math/tex; mode=display">
Gini(p)=\sum_{k=1}^K p_k(1-p_k)=1-\sum_{k=1}^K p_k^2</script><p>å¯¹äºäºŒåˆ†ç±»é—®é¢˜ï¼Œè‹¥æ ·æœ¬ç‚¹å±äºç¬¬1ä¸ªç±»çš„æ¦‚ç‡æ˜¯ $p$ï¼Œåˆ™æ¦‚ç‡åˆ†å¸ƒçš„åŸºå°¼æŒ‡æ•°ä¸º</p>
<script type="math/tex; mode=display">
Gini(p)=2p(1-p)</script></blockquote>
<p>å¯¹äºç»™å®šçš„æ ·æœ¬é›†åˆ $D$ï¼Œå…¶åŸºå°¼æŒ‡æ•°ä¸º</p>
<script type="math/tex; mode=display">
Gini(D)=1-\sum_{k=1}^K (\frac{|C_k|}{|D|})^2</script><p>è¿™é‡Œï¼Œ $C_k$ æ˜¯ $D$ ä¸­å±äºç¬¬ $k$ ç±»çš„æ ·æœ¬å­é›†ï¼Œ$K$ æ˜¯ç±»çš„ä¸ªæ•°ã€‚</p>
<p>ç›´è§‚æ¥è¯´ï¼Œ$Gini(D)$ åæ˜ äº†ä»æ•°æ®é›† $D$ ä¸­éšæœºæŠ½å–ä¸¤ä¸ªæ ·æœ¬ï¼Œå…¶ç±»åˆ«æ ‡è®°ä¸ä¸€è‡´çš„æ¦‚ç‡ã€‚å› æ­¤ $Gini(D)$ è¶Šå°ï¼Œåˆ™æ•°æ®é›† $D$ çš„çº¯åº¦è¶Šé«˜ã€‚</p>
<p>å¦‚æœæ ·æœ¬é›†åˆ $D$ æ ¹æ®ç‰¹å¾ $A$ æ˜¯å¦å–æŸä¸€å¯èƒ½å€¼ $a$ è¢«åˆ†å‰²æˆ $D_1$ å’Œ $D_2$ ä¸¤éƒ¨åˆ†ï¼Œå³</p>
<script type="math/tex; mode=display">
D_1=\{(x,y)âˆˆD|A(x)=a\},\quad D_2=D-D_1</script><p>åˆ™åœ¨ç‰¹å¾ $A$ çš„æ¡ä»¶ä¸‹ï¼Œé›†åˆ $D$ çš„åŸºå°¼æŒ‡æ•°å®šä¹‰ä¸º</p>
<script type="math/tex; mode=display">
Gini(D,A)=\frac{|D_1|}{|D|}Gini(D_1)+\frac{|D_2|}{|D|}Gini(D_2)</script><p>åŸºå°¼æŒ‡æ•° $Gini(D)$ è¡¨ç¤ºé›†åˆ $D$ çš„ä¸ç¡®å®šæ€§ï¼ˆä¸çº¯åº¦ï¼‰ï¼ŒåŸºå°¼æŒ‡æ•° $Gini(D,A)$ è¡¨ç¤ºç» $A=a$ åˆ†å‰²åé›†åˆ $D$ çš„ä¸ç¡®å®šæ€§ã€‚<span style="color:red">åŸºå°¼æŒ‡æ•°è¶Šå¤§ï¼Œæ ·æœ¬é›†åˆçš„ä¸ç¡®å®šæ€§ä¹Ÿå°±è¶Šå¤§ï¼Œè¿™ä¸€ç‚¹ä¸ç†µç›¸ä¼¼ã€‚</span></p>
<p> <img src="/2020/07/25/å†³ç­–æ ‘/1602387260925.png" alt="1602387260925"></p>
<h5 id="3-2-2-CARTç®—æ³•"><a href="#3-2-2-CARTç®—æ³•" class="headerlink" title="3.2.2 CARTç®—æ³•"></a>3.2.2 CARTç®—æ³•</h5><p><strong><span id="jump_algo3.1" style="color:blue"> ç®—æ³•3.1ï¼ˆCARTç”Ÿæˆç®—æ³•ï¼‰</span></strong></p>
<p>è¾“å…¥ï¼šè®­ç»ƒæ•°æ®é›† $D$ï¼Œåœæ­¢è®¡ç®—çš„æ¡ä»¶<br>è¾“å‡ºï¼šCARTå†³ç­–æ ‘</p>
<p>æ ¹æ®è®­ç»ƒæ•°æ®é›†ï¼Œä»æ ¹ç»“ç‚¹å¼€å§‹ï¼Œé€’å½’åœ°å¯¹æ¯ä¸ªç»“ç‚¹è¿›è¡Œä»¥ä¸‹æ“ä½œï¼Œæ„å»ºäºŒå‰å†³ç­–æ ‘<br>ï¼ˆ1ï¼‰è®¾ç»“ç‚¹çš„è®­ç»ƒæ•°æ®é›†ä¸º $D$ï¼Œè®¡ç®—ç°æœ‰ç‰¹å¾å¯¹è¯¥æ•°æ®é›†çš„åŸºå°¼æŒ‡æ•°ã€‚æ­¤æ—¶ï¼Œå¯¹æ¯ä¸€ä¸ªç‰¹å¾ $A$ï¼Œå¯¹å…¶å¯èƒ½å–å€¼çš„æ¯ä¸ªå€¼ $a$ï¼Œæ ¹æ®æ ·æœ¬ç‚¹å¯¹ $A=a$ çš„æµ‹è¯•ä¸ºâ€æ˜¯â€œæˆ–â€å¦â€œå°† $D$ åˆ†å‰²æˆ $D_1$ å’Œ $D_2$ ä¸¤éƒ¨åˆ†ï¼Œè®¡ç®— $A=a$ æ—¶çš„åŸºå°¼æŒ‡æ•°<br>ï¼ˆ2ï¼‰åœ¨æ‰€æœ‰å¯èƒ½çš„ç‰¹å¾ $A$ ä»¥åŠå®ƒä»¬æ‰€æœ‰å¯èƒ½çš„åˆ‡åˆ†ç‚¹ $a$ ä¸­ï¼Œé€‰æ‹©åŸºå°¼æŒ‡æ•°æœ€å°çš„ç‰¹å¾åŠå…¶å¯¹åº”çš„åˆ‡åˆ†ç‚¹ä½œä¸ºæœ€ä¼˜ç‰¹å¾ä¸æœ€ä¼˜åˆ‡åˆ†ç‚¹ã€‚ä¾æœ€ä¼˜ç‰¹å¾ä¸æœ€ä¼˜åˆ‡åˆ†ç‚¹ï¼Œä»ç°ç»“ç‚¹ç”Ÿæˆä¸¤ä¸ªå­ç»“ç‚¹ï¼Œå°†è®­ç»ƒæ•°æ®é›†ä¾ç‰¹å¾åˆ†é…åˆ°ä¸¤ä¸ªå­ç»“ç‚¹ä¸­å»<br>ï¼ˆ3ï¼‰å¯¹ä¸¤ä¸ªå­ç»“ç‚¹é€’å½’åœ°è°ƒç”¨(1), (2)ï¼Œç›´è‡³æ»¡è¶³åœæ­¢æ¡ä»¶<br>ï¼ˆ4ï¼‰ç”ŸæˆCARTå†³ç­–æ ‘<br>ç®—æ³•åœæ­¢è®¡ç®—çš„æ¡ä»¶æ˜¯ç»“ç‚¹ä¸­çš„æ ·æœ¬ä¸ªæ•°å°äºé¢„å®šé˜ˆå€¼ï¼Œæˆ–æ ·æœ¬çš„åŸºå°¼æŒ‡æ•°å°äºé¢„å®šé˜ˆå€¼ï¼ˆæ ·æœ¬åŸºæœ¬å±äºåŒä¸€ç±»ï¼‰ï¼Œæˆ–è€…æ²¡æœ‰æ›´å¤šç‰¹å¾ã€‚</p>
<p>ä¾‹ï¼šæ ¹æ®è¡¨5.1æ‰€ç»™è®­ç»ƒæ•°æ®é›†ï¼Œåº”ç”¨CARTç®—æ³•ç”Ÿæˆå†³ç­–æ ‘ã€‚ï¼ˆè¡¨5.1è§<a href="#jump1.2.2">1.2.2 ID3ç®—æ³•</a>ï¼‰</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602388389187.png" alt="1602388389187"></p>
<hr>
<p>åŸºå°¼æŒ‡æ•°åå‘äºç‰¹å¾å€¼è¾ƒå¤šçš„ç‰¹å¾ï¼Œç±»ä¼¼ä¿¡æ¯å¢ç›Šã€‚åŸºå°¼æŒ‡æ•°å¯ä»¥ç”¨æ¥åº¦é‡ä»»ä½•ä¸å‡åŒ€åˆ†å¸ƒï¼Œæ˜¯ä»‹äº0~1ä¹‹é—´çš„æ•°ï¼Œ0æ˜¯å®Œå…¨ç›¸ç­‰ï¼Œ1æ˜¯å®Œå…¨ä¸ç›¸ç­‰ã€‚</p>
<h4 id="3-3-ç¼ºå¤±å€¼å¤„ç†"><a href="#3-3-ç¼ºå¤±å€¼å¤„ç†" class="headerlink" title="3.3 ç¼ºå¤±å€¼å¤„ç†"></a>3.3 ç¼ºå¤±å€¼å¤„ç†</h4><p>ä¸Šæ–‡è¯´åˆ°ï¼Œæ¨¡å‹å¯¹äºç¼ºå¤±å€¼çš„å¤„ç†ä¼šåˆ†ä¸ºä¸¤ä¸ªå­é—®é¢˜ï¼š</p>
<p>1.åœ¨ç‰¹å¾å€¼ç¼ºå¤±çš„æƒ…å†µä¸‹è¿›è¡Œåˆ’åˆ†ç‰¹å¾çš„é€‰æ‹©ï¼Ÿ<br>2.é€‰å®šè¯¥åˆ’åˆ†ç‰¹å¾ï¼Œå¯¹äºç¼ºå¤±è¯¥ç‰¹å¾å€¼çš„æ ·æœ¬å¦‚ä½•å¤„ç†ï¼Ÿ</p>
<p>å¯¹äºé—®é¢˜ 1ï¼ŒCART ä¸€å¼€å§‹ä¸¥æ ¼è¦æ±‚åˆ†è£‚ç‰¹å¾è¯„ä¼°æ—¶åªèƒ½ä½¿ç”¨åœ¨è¯¥ç‰¹å¾ä¸Šæ²¡æœ‰ç¼ºå¤±å€¼çš„é‚£éƒ¨åˆ†æ•°æ®ï¼Œåœ¨åç»­ç‰ˆæœ¬ä¸­ï¼ŒCART ç®—æ³•ä½¿ç”¨äº†ä¸€ç§æƒ©ç½šæœºåˆ¶æ¥æŠ‘åˆ¶æå‡å€¼ï¼Œä»è€Œåæ˜ å‡ºç¼ºå¤±å€¼çš„å½±å“ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç‰¹å¾åœ¨èŠ‚ç‚¹çš„ 20% çš„è®°å½•æ˜¯ç¼ºå¤±çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªç‰¹å¾å°±ä¼šå‡å°‘ 20% æˆ–è€…å…¶ä»–æ•°å€¼ï¼‰ã€‚</p>
<p>å¯¹äºé—®é¢˜ 2ï¼ŒCART ç®—æ³•çš„æœºåˆ¶æ˜¯ä¸ºæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ‰¾åˆ°ä»£ç†åˆ†è£‚å™¨ï¼Œæ— è®ºåœ¨è®­ç»ƒæ•°æ®ä¸Šå¾—åˆ°çš„æ ‘æ˜¯å¦æœ‰ç¼ºå¤±å€¼éƒ½ä¼šè¿™æ ·åšã€‚åœ¨ä»£ç†åˆ†è£‚å™¨ä¸­ï¼Œç‰¹å¾çš„åˆ†å€¼å¿…é¡»è¶…è¿‡é»˜è®¤è§„åˆ™çš„æ€§èƒ½æ‰æœ‰èµ„æ ¼ä½œä¸ºä»£ç†ï¼ˆå³ä»£ç†å°±æ˜¯ä»£æ›¿ç¼ºå¤±å€¼ç‰¹å¾ä½œä¸ºåˆ’åˆ†ç‰¹å¾çš„ç‰¹å¾ï¼‰ï¼Œå½“ CART æ ‘ä¸­é‡åˆ°ç¼ºå¤±å€¼æ—¶ï¼Œè¿™ä¸ªå®ä¾‹åˆ’åˆ†åˆ°å·¦è¾¹è¿˜æ˜¯å³è¾¹æ˜¯å†³å®šäºå…¶æ’åæœ€é«˜çš„ä»£ç†ï¼Œå¦‚æœè¿™ä¸ªä»£ç†çš„å€¼ä¹Ÿç¼ºå¤±äº†ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨æ’åç¬¬äºŒçš„ä»£ç†ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¦‚æœæ‰€æœ‰ä»£ç†å€¼éƒ½ç¼ºå¤±ï¼Œé‚£ä¹ˆé»˜è®¤è§„åˆ™å°±æ˜¯æŠŠæ ·æœ¬åˆ’åˆ†åˆ°è¾ƒå¤§çš„é‚£ä¸ªå­èŠ‚ç‚¹ã€‚ä»£ç†åˆ†è£‚å™¨å¯ä»¥ç¡®ä¿æ— ç¼ºå¤±è®­ç»ƒæ•°æ®ä¸Šå¾—åˆ°çš„æ ‘å¯ä»¥ç”¨æ¥å¤„ç†åŒ…å«ç¡®å®å€¼çš„æ–°æ•°æ®ã€‚</p>
<h4 id="3-4-å‰ªæç­–ç•¥"><a href="#3-4-å‰ªæç­–ç•¥" class="headerlink" title="3.4 å‰ªæç­–ç•¥"></a>3.4 å‰ªæç­–ç•¥</h4><p>é‡‡ç”¨ä¸€ç§â€œåŸºäºä»£ä»·å¤æ‚åº¦çš„å‰ªæâ€æ–¹æ³•è¿›è¡Œåå‰ªæï¼Œè¿™ç§æ–¹æ³•ä¼šç”Ÿæˆä¸€ç³»åˆ—æ ‘ï¼Œæ¯ä¸ªæ ‘éƒ½æ˜¯é€šè¿‡å°†å‰é¢çš„æ ‘çš„æŸä¸ªæˆ–æŸäº›å­æ ‘æ›¿æ¢æˆä¸€ä¸ªå¶èŠ‚ç‚¹è€Œå¾—åˆ°çš„ï¼Œè¿™ä¸€ç³»åˆ—æ ‘ä¸­çš„æœ€åä¸€æ£µæ ‘ä»…å«ä¸€ä¸ªç”¨æ¥é¢„æµ‹ç±»åˆ«çš„å¶èŠ‚ç‚¹ã€‚ç„¶åç”¨ä¸€ç§æˆæœ¬å¤æ‚åº¦çš„åº¦é‡å‡†åˆ™æ¥åˆ¤æ–­å“ªæ£µå­æ ‘åº”è¯¥è¢«ä¸€ä¸ªé¢„æµ‹ç±»åˆ«å€¼çš„å¶èŠ‚ç‚¹æ‰€ä»£æ›¿ã€‚è¿™ç§æ–¹æ³•éœ€è¦ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„æµ‹è¯•æ•°æ®é›†æ¥è¯„ä¼°æ‰€æœ‰çš„æ ‘ï¼Œæ ¹æ®å®ƒä»¬åœ¨æµ‹è¯•æ•°æ®é›†ç†µçš„åˆ†ç±»æ€§èƒ½é€‰å‡ºæœ€ä½³çš„æ ‘ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹å…·ä½“çœ‹ä¸€ä¸‹ä»£ä»·å¤æ‚åº¦å‰ªæç®—æ³•ï¼š</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595650752017.png" alt="1595650752017"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595650778439.png" alt="1595650778439"></p>
<hr>
<blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹</p>
</blockquote>
<p>CART å‰ªæç®—æ³•ä»â€å®Œå…¨ç”Ÿé•¿â€œçš„å†³ç­–æ ‘çš„åº•ç«¯å‰ªå»ä¸€äº›å­æ ‘ï¼Œä½¿å†³ç­–æ ‘å˜å°ï¼ˆæ¨¡å‹å˜ç®€å•ï¼‰ã€‚CART å‰ªæç®—æ³•ç”±ä¸¤æ­¥ç»„æˆï¼š<span style="color:blue">é¦–å…ˆä»ç”Ÿæˆç®—æ³•äº§ç”Ÿçš„å†³ç­–æ ‘ $T_0$ åº•ç«¯å¼€å§‹ä¸æ–­å‰ªæï¼Œç›´åˆ° $T_0$ çš„æ ¹ç»“ç‚¹ï¼Œå½¢æˆä¸€ä¸ªå­æ ‘åºåˆ— $\{ T_0,T_1, â€¦,T_n\}$ï¼›ç„¶åé€šè¿‡äº¤å‰éªŒè¯æ³•åœ¨ç‹¬ç«‹çš„éªŒè¯æ•°æ®é›†ä¸Šå¯¹å­—æ•°åºåˆ—è¿›è¡Œæµ‹è¯•ï¼Œä»ä¸­é€‰æ‹©æœ€ä¼˜å­æ ‘ã€‚</span></p>
<p>1.å‰ªæï¼Œå½¢æˆä¸€ä¸ªå­æ ‘åºåˆ—</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602424688613.png" alt="1602424688613"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602424717026.png" alt="1602424717026"></p>
<p>2.åœ¨å‰ªæå¾—åˆ°çš„å­—æ•°åºåˆ— $ T_0,T_1, â€¦,T_n$ ä¸­é€šè¿‡äº¤å‰éªŒè¯é€‰å–æœ€ä¼˜å­æ ‘ $T_\alpha$</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602424810650.png" alt="1602424810650"></p>
<p><strong><span id="jump_algo3.2" style="color:blue">ç®—æ³•3.2 ï¼ˆCARTå‰ªæç®—æ³•ï¼‰</span></strong></p>
<p>è¾“å…¥ï¼šCART ç®—æ³•ç”Ÿæˆçš„å†³ç­–æ ‘ $T_0$<br>è¾“å‡ºï¼šæœ€ä¼˜å†³ç­–æ ‘ $T_\alpha$</p>
<p>ï¼ˆ1ï¼‰è®¾ $k=0ï¼ŒT=T_0$<br>ï¼ˆ2ï¼‰è®¾ $\alpha=+\infty$<br>ï¼ˆ3ï¼‰è‡ªä¸‹è€Œä¸Šåœ°å¯¹å„å†…éƒ¨ç»“ç‚¹ $t$ è®¡ç®— $C(T_t)ï¼Œ|T_t|$ä»¥åŠ</p>
<script type="math/tex; mode=display">
g(t)=\frac{C(t)-C(T_t)}{|T_t|-1}\\
\alpha=min(\alpha,g(t))</script><p>è¿™é‡Œï¼Œ$T_t$ è¡¨ç¤ºä»¥ $t$ ä¸ºæ ¹ç»“ç‚¹çš„å­æ ‘ï¼Œ$C(T_t)$ æ˜¯å¯¹è®­ç»ƒæ•°æ®çš„é¢„æµ‹è¯¯å·®ï¼Œ$|T_t|$ æ˜¯ $T_t$ çš„å¶ç»“ç‚¹ä¸ªæ•°ã€‚<br>ï¼ˆ4ï¼‰å¯¹ $g(t)=\alpha$ çš„å†…éƒ¨ç»“ç‚¹ $t$ è¿›è¡Œå‰ªæï¼Œå¹¶å¯¹å¶ç»“ç‚¹ $t$ ä»¥å¤šæ•°è¡¨å†³æ³•å†³å®šå…¶ç±»ï¼Œå¾—åˆ°æ ‘ $T$<br>ï¼ˆ5ï¼‰è®¾ $k=k+1ï¼Œ\alpha_k=\alphaï¼ŒT_k=T$.<br>ï¼ˆ6ï¼‰å¦‚æœ $T_k$ ä¸æ˜¯ç”±æ ¹ç»“ç‚¹åŠä¸¤ä¸ªå¶ç»“ç‚¹æ„æˆçš„æ ‘ï¼Œåˆ™å›åˆ°ä¸å†(3)ï¼›å¦åˆ™ä»¤ $T_k=T_n$<br>ï¼ˆ7ï¼‰é‡‡ç”¨äº¤å‰éªŒè¯æ³•åœ¨å­æ ‘åºåˆ— $ T_0,T_1, â€¦,T_n$ ä¸­é€‰å–æœ€ä¼˜å­æ ‘ $T_\alpha$.</p>
<h4 id="3-5-ç±»åˆ«ä¸å¹³è¡¡"><a href="#3-5-ç±»åˆ«ä¸å¹³è¡¡" class="headerlink" title="3.5 ç±»åˆ«ä¸å¹³è¡¡"></a>3.5 ç±»åˆ«ä¸å¹³è¡¡</h4><p>CART çš„ä¸€å¤§ä¼˜åŠ¿åœ¨äºï¼šæ— è®ºè®­ç»ƒæ•°æ®é›†æœ‰å¤šå¤±è¡¡ï¼Œå®ƒéƒ½å¯ä»¥å°†å…¶è‡ªåŠ¨æ¶ˆé™¤ä¸éœ€è¦å»ºæ¨¡äººå‘˜é‡‡å–å…¶ä»–æ“ä½œã€‚</p>
<p>CART ä½¿ç”¨äº†ä¸€ç§å…ˆéªŒæœºåˆ¶ï¼Œå…¶ä½œç”¨ç›¸å½“äºå¯¹ç±»åˆ«è¿›è¡ŒåŠ æƒã€‚è¿™ç§å…ˆéªŒæœºåˆ¶åµŒå…¥äº CART ç®—æ³•åˆ¤æ–­åˆ†è£‚ä¼˜åŠ£çš„è¿ç®—é‡Œï¼Œåœ¨ CART é»˜è®¤çš„åˆ†ç±»æ¨¡å¼ä¸­ï¼Œæ€»æ˜¯è¦è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹å…³äºæ ¹èŠ‚ç‚¹çš„ç±»åˆ«é¢‘ç‡çš„æ¯”å€¼ï¼Œè¿™å°±ç›¸å½“äºå¯¹æ•°æ®è‡ªåŠ¨é‡åŠ æƒï¼Œå¯¹ç±»åˆ«è¿›è¡Œå‡è¡¡ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595650963697.png" alt="1595650963697"></p>
<p>é€šè¿‡è¿™ç§è®¡ç®—æ–¹å¼å°±æ— éœ€ç®¡ç†æ•°æ®çœŸå®çš„ç±»åˆ«åˆ†å¸ƒã€‚å‡è®¾æœ‰ K ä¸ªç›®æ ‡ç±»åˆ«ï¼Œå°±å¯ä»¥ç¡®ä¿æ ¹èŠ‚ç‚¹ä¸­æ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡éƒ½æ˜¯ 1/Kã€‚è¿™ç§é»˜è®¤çš„æ¨¡å¼è¢«ç§°ä¸ºâ€œå…ˆéªŒç›¸ç­‰â€ã€‚</p>
<p>å…ˆéªŒè®¾ç½®å’ŒåŠ æƒä¸åŒä¹‹å¤„åœ¨äºå…ˆéªŒä¸å½±å“æ¯ä¸ªèŠ‚ç‚¹ä¸­çš„å„ç±»åˆ«æ ·æœ¬çš„æ•°é‡æˆ–è€…ä»½é¢ã€‚å…ˆéªŒå½±å“çš„æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„ç±»åˆ«èµ‹å€¼å’Œæ ‘ç”Ÿé•¿è¿‡ç¨‹ä¸­åˆ†è£‚çš„é€‰æ‹©ã€‚</p>
<h4 id="3-6-å›å½’æ ‘"><a href="#3-6-å›å½’æ ‘" class="headerlink" title="3.6 å›å½’æ ‘"></a><span id="jump3.6">3.6 å›å½’æ ‘</span></h4><p>CART(Classification and Regression Treeï¼Œåˆ†ç±»å›å½’æ ‘)ï¼Œä»åå­—å°±å¯ä»¥çœ‹å‡ºå…¶ä¸ä»…å¯ä»¥ç”¨äºåˆ†ç±»ï¼Œä¹Ÿå¯ä»¥åº”ç”¨äºå›å½’ã€‚å…¶å›å½’æ ‘çš„å»ºç«‹ç®—æ³•ä¸Šä¸åˆ†ç±»æ ‘éƒ¨åˆ†ç›¸ä¼¼ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸‹ä¸åŒä¹‹å¤„ã€‚</p>
<h5 id="3-6-1-è¿ç»­å€¼å¤„ç†"><a href="#3-6-1-è¿ç»­å€¼å¤„ç†" class="headerlink" title="3.6.1 è¿ç»­å€¼å¤„ç†"></a>3.6.1 è¿ç»­å€¼å¤„ç†</h5><p>å¯¹äºè¿ç»­å€¼çš„å¤„ç†ï¼ŒCART åˆ†ç±»æ ‘é‡‡ç”¨åŸºå°¼ç³»æ•°çš„å¤§å°æ¥åº¦é‡ç‰¹å¾çš„å„ä¸ªåˆ’åˆ†ç‚¹ã€‚åœ¨å›å½’æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å¸¸è§çš„å’Œæ–¹å·®åº¦é‡æ–¹å¼ï¼Œå¯¹äºä»»æ„åˆ’åˆ†ç‰¹å¾ $A$ï¼Œå¯¹åº”çš„ä»»æ„åˆ’åˆ†ç‚¹ $s$ ä¸¤è¾¹åˆ’åˆ†æˆçš„æ•°æ®é›†$D_1$å’Œ $D_2$ï¼Œæ±‚å‡ºä½¿$D_1$å’Œ$D_2$ å„è‡ªé›†åˆçš„å‡æ–¹å·®æœ€å°ï¼ŒåŒæ—¶$D_1$å’Œ$D_2$ çš„å‡æ–¹å·®ä¹‹å’Œæœ€å°æ‰€å¯¹åº”çš„ç‰¹å¾å’Œç‰¹å¾å€¼åˆ’åˆ†ç‚¹ã€‚è¡¨è¾¾å¼ä¸ºï¼š</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595651148743.png" alt="1595651148743"></p>
<p>å…¶ä¸­ï¼Œ$c_1$è¡¨ç¤º $D_1$ çš„è¾“å‡ºå€¼ï¼Œ$c_2$è¡¨ç¤º $D_2$ çš„è¾“å‡ºå€¼ã€‚$D_1$ä¸Šçš„æœ€ä¼˜å€¼è¾“å‡ºå€¼ $\hat c_1$ æ˜¯ $D_1$ æ•°æ®é›†çš„æ ·æœ¬è¾“å‡ºå‡å€¼ï¼Œå³ $\hat c_1 = ave(y_i|x_i\in D_1)$ï¼ŒåŒç†ï¼Œ$\hat c_2 = ave(y_i|x_i\in D_2)$.</p>
<h5 id="3-6-2-é¢„æµ‹æ–¹å¼"><a href="#3-6-2-é¢„æµ‹æ–¹å¼" class="headerlink" title="3.6.2 é¢„æµ‹æ–¹å¼"></a>3.6.2 é¢„æµ‹æ–¹å¼</h5><p>å¯¹äºå†³ç­–æ ‘å»ºç«‹ååšé¢„æµ‹çš„æ–¹å¼ï¼Œä¸Šé¢è®²åˆ°äº† CART åˆ†ç±»æ ‘é‡‡ç”¨å¶å­èŠ‚ç‚¹é‡Œæ¦‚ç‡æœ€å¤§çš„ç±»åˆ«ä½œä¸ºå½“å‰èŠ‚ç‚¹çš„é¢„æµ‹ç±»åˆ«ã€‚è€Œå›å½’æ ‘è¾“å‡ºä¸æ˜¯ç±»åˆ«ï¼Œå®ƒé‡‡ç”¨çš„æ˜¯ç”¨æœ€ç»ˆå¶å­çš„å‡å€¼æˆ–è€…ä¸­ä½æ•°æ¥é¢„æµ‹è¾“å‡ºç»“æœã€‚</p>
<h5 id="3-6-3-å›å½’æ ‘çš„ç”Ÿæˆ"><a href="#3-6-3-å›å½’æ ‘çš„ç”Ÿæˆ" class="headerlink" title="3.6.3 å›å½’æ ‘çš„ç”Ÿæˆ"></a>3.6.3 å›å½’æ ‘çš„ç”Ÿæˆ</h5><blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹</p>
</blockquote>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602423716567.png" alt="1602423716567"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602423679709.png" alt="1602423679709"></p>
<p><strong><span id="jump_algo3.3" style="color:blue">ç®—æ³•3.3 ï¼ˆæœ€å°äºŒä¹˜å›å½’æ ‘ç”Ÿæˆç®—æ³•ï¼‰</span></strong></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1602423808005.png" alt="1602423808005"></p>
<h3 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h3><p>æœ€åé€šè¿‡æ€»ç»“çš„æ–¹å¼å¯¹æ¯”ä¸‹ ID3ã€C4.5 å’Œ CART ä¸‰è€…ä¹‹é—´çš„å·®å¼‚ã€‚</p>
<ul>
<li><strong>åˆ’åˆ†æ ‡å‡†çš„å·®å¼‚</strong>ï¼šID3 ä½¿ç”¨ä¿¡æ¯å¢ç›Šï¼Œåå‘ç‰¹å¾å€¼å¤šçš„ç‰¹å¾ï¼ŒC4.5 ä½¿ç”¨ä¿¡æ¯å¢ç›Šç‡å…‹æœä¿¡æ¯å¢ç›Šçš„ç¼ºç‚¹ï¼Œåå‘äºå¯å–å€¼è¾ƒå°‘çš„ç‰¹å¾ï¼ŒCART ä½¿ç”¨åŸºå°¼æŒ‡æ•°å…‹æœ C4.5 éœ€è¦æ±‚ log çš„å·¨å¤§è®¡ç®—é‡ï¼Œåå‘äºç‰¹å¾å€¼è¾ƒå¤šçš„ç‰¹å¾ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯çš„å·®å¼‚</strong>ï¼šID3 å’Œ C4.5 éƒ½åªèƒ½ç”¨äºåˆ†ç±»é—®é¢˜ï¼ŒCART å¯ä»¥ç”¨äºåˆ†ç±»å’Œå›å½’é—®é¢˜ï¼›ID3 å’Œ C4.5 æ˜¯å¤šå‰æ ‘ï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼ŒCART æ˜¯äºŒå‰æ ‘ï¼Œè®¡ç®—é€Ÿåº¦å¾ˆå¿«ï¼›</li>
<li><strong>æ ·æœ¬æ•°æ®çš„å·®å¼‚</strong>ï¼šID3 åªèƒ½å¤„ç†ç¦»æ•£æ•°æ®ä¸”å¯¹ç¼ºå¤±å€¼æ•æ„Ÿï¼ŒC4.5 å’Œ CART å¯ä»¥å¤„ç†è¿ç»­å‹æ•°æ®ä¸”æœ‰å¤šç§æ–¹å¼å¤„ç†ç¼ºå¤±å€¼ï¼›ä»æ ·æœ¬é‡è€ƒè™‘çš„è¯ï¼Œå°æ ·æœ¬å»ºè®® C4.5ï¼Œå¤§æ ·æœ¬å»ºè®® CARTã€‚C4.5 å¤„ç†è¿‡ç¨‹ä¸­éœ€å¯¹æ•°æ®é›†è¿›è¡Œå¤šæ¬¡æ‰«ææ’åºï¼Œå¤„ç†æˆæœ¬è€—æ—¶è¾ƒé«˜ï¼Œè€Œ CART æœ¬èº«æ˜¯ä¸€ç§å¤§æ ·æœ¬çš„ç»Ÿè®¡æ–¹æ³•ï¼Œå°æ ·æœ¬å¤„ç†ä¸‹æ³›åŒ–è¯¯å·®è¾ƒå¤§ ï¼›</li>
<li><strong>æ ·æœ¬ç‰¹å¾çš„å·®å¼‚</strong>ï¼šID3 å’Œ C4.5 å±‚çº§ä¹‹é—´åªä½¿ç”¨ä¸€æ¬¡ç‰¹å¾ï¼ŒCART å¯å¤šæ¬¡é‡å¤ä½¿ç”¨ç‰¹å¾ï¼›</li>
<li><strong>å‰ªæç­–ç•¥çš„å·®å¼‚</strong>ï¼šID3 æ²¡æœ‰å‰ªæç­–ç•¥ï¼ŒC4.5 æ˜¯é€šè¿‡æ‚²è§‚å‰ªæç­–ç•¥æ¥ä¿®æ­£æ ‘çš„å‡†ç¡®æ€§ï¼ˆåå‰ªæï¼‰ï¼Œè€Œ CART æ˜¯é€šè¿‡ä»£ä»·å¤æ‚åº¦å‰ªæï¼ˆåå‰ªæï¼‰ã€‚</li>
</ul>
<hr>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595649034648.png" alt="1595649034648"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595649090585.png" alt="1595649090585"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595649112772.png" alt="1595649112772"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595649135709.png" alt="1595649135709"></p>
<p>ä¿¡æ¯å¢ç›Šï¼Œä¿¡æ¯å¢ç›Šç‡ -&gt; é€‰æœ€å¤§</p>
<p>åŸºå°¼ç³»æ•° -&gt; é€‰æœ€å°</p>
<hr>
<h2 id="ç¯‡äºŒï¼šRandom-Forest-Adaboost-GBDTç®—æ³•"><a href="#ç¯‡äºŒï¼šRandom-Forest-Adaboost-GBDTç®—æ³•" class="headerlink" title="ç¯‡äºŒï¼šRandom Forest, Adaboost, GBDTç®—æ³•"></a>ç¯‡äºŒï¼šRandom Forest, Adaboost, GBDTç®—æ³•</h2><blockquote>
<p>æœ¬éƒ¨åˆ†å†…å®¹ä¸»è¦å‚è€ƒå…¬ä¼—å·Datawhale<br><a href="https://mp.weixin.qq.com/s/Nl_-PdF0nHBq8yGp6AdI-Q" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/Nl_-PdF0nHBq8yGp6AdI-Q</a></p>
</blockquote>
<p>ä¸»è¦ä»‹ç»åŸºäºé›†æˆå­¦ä¹ çš„å†³ç­–æ ‘ï¼Œå…¶ä¸»è¦é€šè¿‡ä¸åŒå­¦ä¹ æ¡†æ¶ç”Ÿäº§åŸºå­¦ä¹ å™¨ï¼ˆbase learnersï¼‰ï¼Œå¹¶ç»¼åˆæ‰€æœ‰åŸºå­¦ä¹ å™¨çš„é¢„æµ‹ç»“æœæ¥æ”¹å–„å•ä¸ªåŸºå­¦ä¹ å™¨çš„è¯†åˆ«ç‡å’Œæ³›åŒ–æ€§ã€‚</p>
<h3 id="1-é›†æˆå­¦ä¹ "><a href="#1-é›†æˆå­¦ä¹ " class="headerlink" title="1.é›†æˆå­¦ä¹ "></a>1.é›†æˆå­¦ä¹ </h3><p>å¸¸è§çš„é›†æˆå­¦ä¹ æ¡†æ¶æœ‰ä¸‰ç§ï¼šBaggingï¼ŒBoosting å’Œ Stackingã€‚</p>
<blockquote>
<ul>
<li><p>In <strong>averaging methods</strong>, the driving principle is to build several estimators independently and then to average their predictions. On average, the combined estimator is usually better than any of the single base estimator because its variance is reduced.</p>
<p><strong>Examples:</strong> <a href="https://scikit-learn.org/stable/modules/ensemble.html#bagging" target="_blank" rel="noopener">Bagging methods</a>, <a href="https://scikit-learn.org/stable/modules/ensemble.html#forest" target="_blank" rel="noopener">Forests of randomized trees</a>, â€¦</p>
</li>
<li><p>By contrast, in <strong>boosting methods</strong>, base estimators are built sequentially and one tries to reduce the bias of the combined estimator. The motivation is to combine several weak models to produce a powerful ensemble.</p>
<p><strong>Examples:</strong> <a href="https://scikit-learn.org/stable/modules/ensemble.html#adaboost" target="_blank" rel="noopener">AdaBoost</a>, <a href="https://scikit-learn.org/stable/modules/ensemble.html#gradient-boosting" target="_blank" rel="noopener">Gradient Tree Boosting</a>, â€¦</p>
<p>(æ¥è‡ª <a href="https://scikit-learn.org/stable/modules/ensemble.html" target="_blank" rel="noopener">https://scikit-learn.org/stable/modules/ensemble.html</a>)</p>
</li>
</ul>
</blockquote>
<h4 id="1-1-Bagging"><a href="#1-1-Bagging" class="headerlink" title="1.1 Bagging"></a>1.1 Bagging</h4><p>Bagging å…¨ç§°å« Bootstrap aggregatingï¼Œæ¯ä¸ªåŸºå­¦ä¹ å™¨éƒ½ä¼šå¯¹è®­ç»ƒé›†è¿›è¡Œ<strong>æœ‰æ”¾å›æŠ½æ ·</strong>å¾—åˆ°å­è®­ç»ƒé›†ï¼Œæ¯”è¾ƒè‘—åçš„é‡‡æ ·æ³•ä¸º 0.632 è‡ªåŠ©æ³•ã€‚æ¯ä¸ªåŸºå­¦ä¹ å™¨åŸºäºä¸åŒå­è®­ç»ƒé›†è¿›è¡Œè®­ç»ƒï¼Œå¹¶ç»¼åˆæ‰€æœ‰åŸºå­¦ä¹ å™¨çš„é¢„æµ‹å€¼å¾—åˆ°æœ€ç»ˆçš„é¢„æµ‹ç»“æœã€‚Bagging å¸¸ç”¨çš„ç»¼åˆæ–¹æ³•æ˜¯æŠ•ç¥¨æ³•ï¼Œç¥¨æ•°æœ€å¤šçš„ç±»åˆ«ä¸ºé¢„æµ‹ç±»åˆ«ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595652338160.png" alt="1595652338160"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601797615594.png" alt="1601797615594"></p>
<p>æ¯ä¸ªåŸºç¡€åˆ†ç±»å™¨ï¼ˆå¯ä»¥æ˜¯æ ‘å½¢ç»“æ„ã€ç¥ç»ç½‘ç»œç­‰ç­‰ä»»ä½•åˆ†ç±»æ¨¡å‹ï¼‰çš„ç‰¹ç‚¹æ˜¯<strong>ä½åå·®ã€é«˜æ–¹å·®</strong>ï¼Œæ¡†æ¶é€šè¿‡(åŠ æƒ)æŠ•ç¥¨æ–¹å¼é™ä½æ–¹å·®ï¼Œä½¿å¾—æ•´ä½“è¶‹äº<strong>ä½åå·®ã€ä½æ–¹å·®</strong>ã€‚</p>
<h4 id="1-2-Boosting"><a href="#1-2-Boosting" class="headerlink" title="1.2 Boosting"></a>1.2 Boosting</h4><p>Boosting è®­ç»ƒè¿‡ç¨‹ä¸ºé˜¶æ¢¯çŠ¶ï¼Œ<strong>åŸºæ¨¡å‹çš„è®­ç»ƒæ˜¯æœ‰é¡ºåºçš„ï¼Œæ¯ä¸ªåŸºæ¨¡å‹éƒ½ä¼šåœ¨å‰ä¸€ä¸ªåŸºæ¨¡å‹å­¦ä¹ çš„åŸºç¡€ä¸Šè¿›è¡Œå­¦ä¹ </strong>ï¼Œæœ€ç»ˆç»¼åˆæ‰€æœ‰åŸºæ¨¡å‹çš„é¢„æµ‹å€¼äº§ç”Ÿæœ€ç»ˆçš„é¢„æµ‹ç»“æœï¼Œç”¨çš„æ¯”è¾ƒå¤šçš„ç»¼åˆæ–¹å¼ä¸ºåŠ æƒæ³•ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595652444294.png" alt="1595652444294"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601797938878.png" alt="1601797938878"></p>
<p>Boosting é€šè¿‡è¿­ä»£æ–¹å¼è®­ç»ƒè‹¥å¹²åŸºç¡€åˆ†ç±»å™¨ï¼Œæ¯ä¸ªåˆ†ç±»å™¨ä¾æ®ä¸Šä¸€è½®åˆ†ç±»å™¨äº§ç”Ÿçš„æ®‹å·®åšæƒé‡è°ƒæ•´ï¼Œæ¯è½®çš„åˆ†ç±»å™¨éœ€è¦å¤Ÿâ€œç®€å•â€ï¼ˆå¼±åˆ†ç±»å™¨ï¼‰ï¼Œå…·æœ‰<strong>é«˜åå·®ã€ä½æ–¹å·®</strong>çš„ç‰¹ç‚¹ï¼Œæ¡†æ¶å†è¾…ä»¥(åŠ æƒ)æŠ•ç¥¨æ–¹å¼é™ä½åå·®ï¼Œä½¿å¾—æ•´ä½“è¶‹äº<strong>ä½åå·®ã€ä½æ–¹å·®</strong>ã€‚</p>
<h4 id="1-3-Stacking"><a href="#1-3-Stacking" class="headerlink" title="1.3 Stacking"></a>1.3 Stacking</h4><p>Stacking æ˜¯å…ˆç”¨å…¨éƒ¨æ•°æ®è®­ç»ƒå¥½åŸºæ¨¡å‹ï¼Œç„¶åæ¯ä¸ªåŸºæ¨¡å‹éƒ½å¯¹æ¯ä¸ªè®­ç»ƒæ ·æœ¬è¿›è¡Œé¢„æµ‹ï¼Œå…¶é¢„æµ‹å€¼å°†ä½œä¸ºè®­ç»ƒæ ·æœ¬çš„ç‰¹å¾å€¼ï¼Œæœ€ç»ˆä¼šå¾—åˆ°æ–°çš„è®­ç»ƒæ ·æœ¬ï¼Œç„¶ååŸºäºæ–°çš„è®­ç»ƒæ ·æœ¬è¿›è¡Œè®­ç»ƒå¾—åˆ°æ¨¡å‹ï¼Œç„¶åå¾—åˆ°æœ€ç»ˆé¢„æµ‹ç»“æœã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆé›†æˆå­¦ä¹ ä¼šå¥½äºå•ä¸ªå­¦ä¹ å™¨å‘¢ï¼ŸåŸå› å¯èƒ½æœ‰ä¸‰ï¼š</p>
<ol>
<li>è®­ç»ƒæ ·æœ¬å¯èƒ½æ— æ³•é€‰æ‹©å‡ºæœ€å¥½çš„å•ä¸ªå­¦ä¹ å™¨ï¼Œç”±äºæ²¡æ³•é€‰æ‹©å‡ºæœ€å¥½çš„å­¦ä¹ å™¨ï¼Œæ‰€ä»¥å¹²è„†ç»“åˆèµ·æ¥ä¸€èµ·ç”¨ï¼›</li>
<li>å‡è®¾èƒ½æ‰¾åˆ°æœ€å¥½çš„å­¦ä¹ å™¨ï¼Œä½†ç”±äºç®—æ³•è¿ç®—çš„é™åˆ¶æ— æ³•æ‰¾åˆ°æœ€ä¼˜è§£ï¼Œåªèƒ½æ‰¾åˆ°æ¬¡ä¼˜è§£ï¼Œé‡‡ç”¨é›†æˆå­¦ä¹ å¯ä»¥å¼¥è¡¥ç®—æ³•çš„ä¸è¶³ï¼›</li>
<li>å¯èƒ½ç®—æ³•æ— æ³•å¾—åˆ°æœ€ä¼˜è§£ï¼Œè€Œé›†æˆå­¦ä¹ èƒ½å¤Ÿå¾—åˆ°è¿‘ä¼¼è§£ã€‚æ¯”å¦‚è¯´æœ€ä¼˜è§£æ˜¯ä¸€æ¡å¯¹è§’çº¿ï¼Œè€Œå•ä¸ªå†³ç­–æ ‘å¾—åˆ°çš„ç»“æœåªèƒ½æ˜¯å¹³è¡Œäºåæ ‡è½´çš„ï¼Œä½†æ˜¯é›†æˆå­¦ä¹ å¯ä»¥å»æ‹Ÿåˆè¿™æ¡å¯¹è§’çº¿ã€‚</li>
</ol>
</blockquote>
<h3 id="2-åå·®ä¸æ–¹å·®"><a href="#2-åå·®ä¸æ–¹å·®" class="headerlink" title="2.åå·®ä¸æ–¹å·®"></a>2.åå·®ä¸æ–¹å·®</h3><p>å¦‚ä½•ä»åå·®å’Œæ–¹å·®çš„è§’åº¦æ¥ç†è§£é›†æˆå­¦ä¹ ã€‚</p>
<h4 id="2-1-é›†æˆå­¦ä¹ çš„åå·®ä¸æ–¹å·®"><a href="#2-1-é›†æˆå­¦ä¹ çš„åå·®ä¸æ–¹å·®" class="headerlink" title="2.1 é›†æˆå­¦ä¹ çš„åå·®ä¸æ–¹å·®"></a>2.1 é›†æˆå­¦ä¹ çš„åå·®ä¸æ–¹å·®</h4><p><strong>åå·®ï¼ˆBiasï¼‰æè¿°çš„æ˜¯é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹å·®ï¼›æ–¹å·®ï¼ˆVarianceï¼‰æè¿°çš„æ˜¯é¢„æµ‹å€¼ä½œä¸ºéšæœºå˜é‡çš„ç¦»æ•£ç¨‹åº¦ï¼ˆä¸åŒæ ·æœ¬ä¸‹æ¨¡å‹æ•ˆæœçš„ç¦»æ•£ç¨‹åº¦ï¼‰ã€‚</strong></p>
<p>æ”¾ä¸€å¼ å¾ˆç»å…¸çš„å›¾ï¼š</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595652870653.png" alt="1595652870653"></p>
<blockquote>
<p>We can create a graphical visualization of bias and variance using a bulls-eye diagram. Imagine that the center of the target is a model that perfectly predicts the correct values. As we move away from the bulls-eye, our predictions get worse and worse. Imagine we can repeat our entire model building process to get a number of separate hits on the target. Each hit represents an individual realization of our model, given the chance variability in the training data we gather. Sometimes we will get a good distribution of training data so we predict very well and we are close to the bulls-eye, while sometimes our training data might be full of outliers or non-standard values resulting in poorer predictions. These different realizations result in a scatter of hits on the target. </p>
<p>(æ¥è‡ª <a href="http://scott.fortmann-roe.com/docs/BiasVariance.html" target="_blank" rel="noopener">http://scott.fortmann-roe.com/docs/BiasVariance.html</a>)</p>
</blockquote>
<p>æ¨¡å‹çš„åå·®ä¸æ–¹å·®</p>
<ul>
<li><strong>åå·®</strong>ï¼šæè¿°æ ·æœ¬æ‹Ÿåˆå‡ºçš„æ¨¡å‹çš„é¢„æµ‹ç»“æœçš„æœŸæœ›ä¸æ ·æœ¬çœŸå®ç»“æœçš„å·®è·ï¼Œè¦æƒ³åå·®è¡¨ç°çš„å¥½ï¼Œå°±éœ€è¦å¤æ‚åŒ–æ¨¡å‹ï¼Œå¢åŠ æ¨¡å‹çš„å‚æ•°ï¼Œä½†è¿™æ ·å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œè¿‡æ‹Ÿåˆå¯¹åº”ä¸Šå›¾çš„ High Varianceï¼Œç‚¹ä¼šå¾ˆåˆ†æ•£ã€‚ä½åå·®å¯¹åº”çš„ç‚¹éƒ½æ‰“åœ¨é¶å¿ƒé™„è¿‘ï¼Œæå¾—å¾ˆå‡†ï¼Œä½†ä¸ä¸€å®šå¾ˆç¨³ï¼›</li>
<li><strong>æ–¹å·®</strong>ï¼šæè¿°æ ·æœ¬ä¸Šè®­ç»ƒå‡ºæ¥çš„æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„è¡¨ç°ï¼Œè¦æƒ³æ–¹å·®è¡¨ç°çš„å¥½ï¼Œéœ€è¦ç®€åŒ–æ¨¡å‹ï¼Œå‡å°‘æ¨¡å‹çš„å¤æ‚åº¦ï¼Œä½†è¿™æ ·å®¹æ˜“æ¬ æ‹Ÿåˆï¼Œæ¬ æ‹Ÿåˆå¯¹åº”ä¸Šå›¾ High Biasï¼Œç‚¹åç¦»ä¸­å¿ƒã€‚ä½æ–¹å·®å¯¹åº”å°±æ˜¯ç‚¹éƒ½æ‰“çš„å¾ˆé›†ä¸­ï¼Œä½†ä¸ä¸€å®šæ˜¯é¶å¿ƒé™„è¿‘ï¼Œæ‰‹å¾ˆç¨³ï¼Œä½†ä¸ä¸€å®šç„çš„å‡†ã€‚</li>
</ul>
<p>æˆ‘ä»¬å¸¸è¯´é›†æˆå­¦ä¹ ä¸­çš„åŸºæ¨¡å‹æ˜¯å¼±æ¨¡å‹ï¼Œé€šå¸¸æ¥è¯´å¼±æ¨¡å‹æ˜¯åå·®é«˜ï¼ˆåœ¨è®­ç»ƒé›†ä¸Šå‡†ç¡®åº¦ä½ï¼‰æ–¹å·®å°ï¼ˆé˜²æ­¢è¿‡æ‹Ÿåˆèƒ½åŠ›å¼ºï¼‰çš„æ¨¡å‹ã€‚ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰é›†æˆå­¦ä¹ æ¡†æ¶ä¸­çš„åŸºæ¨¡å‹éƒ½æ˜¯å¼±æ¨¡å‹ã€‚<strong><span style="color:red">Bagging å’Œ Stacking ä¸­çš„åŸºæ¨¡å‹ä¸ºå¼ºæ¨¡å‹ï¼ˆåå·®ä½æ–¹å·®é«˜ï¼‰ï¼ŒBoosting ä¸­çš„åŸºæ¨¡å‹ä¸ºå¼±æ¨¡å‹</span></strong>ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595653661803.png" alt="1595653661803"></p>
<h4 id="2-2-Bagging-çš„åå·®ä¸æ–¹å·®"><a href="#2-2-Bagging-çš„åå·®ä¸æ–¹å·®" class="headerlink" title="2.2 Bagging çš„åå·®ä¸æ–¹å·®"></a>2.2 Bagging çš„åå·®ä¸æ–¹å·®</h4><p><img src="/2020/07/25/å†³ç­–æ ‘/1595653718100.png" alt="1595653718100"></p>
<p>ï¼ˆğŸ‘† åº”ä¸ºæ–¹å·®å…¬å¼ç¬¬äºŒé¡¹çš„æ”¹å˜å¯¹æ•´ä½“æ–¹å·®çš„ä½œç”¨å¾ˆå°ï¼Ÿï¼‰</p>
<p>åœ¨æ­¤æˆ‘ä»¬çŸ¥é“äº†ä¸ºä»€ä¹ˆ Bagging ä¸­çš„åŸºæ¨¡å‹ä¸€å®šè¦ä¸ºå¼ºæ¨¡å‹ï¼Œå¦‚æœ Bagging ä½¿ç”¨å¼±æ¨¡å‹åˆ™ä¼šå¯¼è‡´æ•´ä½“æ¨¡å‹çš„åå·®æé«˜ï¼Œè€Œå‡†ç¡®åº¦é™ä½ã€‚</p>
<p>Random Forest æ˜¯ç»å…¸çš„åŸºäº Bagging æ¡†æ¶çš„æ¨¡å‹ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šé€šè¿‡å¼•å…¥ç‰¹å¾é‡‡æ ·å’Œæ ·æœ¬é‡‡æ ·æ¥é™ä½åŸºæ¨¡å‹é—´çš„ç›¸å…³æ€§ï¼Œä»è€Œåœ¨æ–¹å·®å…¬å¼ä¸­ï¼Œç¬¬ä¸€é¡¹æ˜¾è‘—å‡å°‘ï¼Œç¬¬äºŒé¡¹ç¨å¾®å¢åŠ ï¼Œæ•´ä½“æ–¹å·®ä»æ˜¯å‡å°‘ã€‚</p>
<h4 id="2-3-Boosting-çš„åå·®ä¸æ–¹å·®"><a href="#2-3-Boosting-çš„åå·®ä¸æ–¹å·®" class="headerlink" title="2.3 Boosting çš„åå·®ä¸æ–¹å·®"></a>2.3 Boosting çš„åå·®ä¸æ–¹å·®</h4><p>å¯¹äº Boosting æ¥è¯´ï¼ŒåŸºæ¨¡å‹çš„è®­ç»ƒé›†æŠ½æ ·æ˜¯å¼ºç›¸å…³çš„ï¼Œé‚£ä¹ˆæ¨¡å‹çš„ç›¸å…³ç³»æ•°è¿‘ä¼¼ç­‰äº1ï¼Œæ•…æˆ‘ä»¬ä¹Ÿå¯ä»¥é’ˆå¯¹ Boosting åŒ–ç®€å…¬å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
E(F)=r\sum_i^mE(f_i)\\
Var(F)=m^2r^2\sigma^2\rho+mr^2\sigma^2(1-\rho)=m^2r^2\sigma^2</script><p>é€šè¿‡è§‚å¯Ÿæ•´ä½“æ–¹å·®çš„è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å®¹æ˜“å‘ç°ï¼š</p>
<ul>
<li>è‹¥åŸºæ¨¡å‹ä¸æ˜¯å¼±æ¨¡å‹ï¼Œå…¶æ–¹å·®ç›¸å¯¹è¾ƒå¤§ï¼Œè¿™å°†å¯¼è‡´æ•´ä½“æ¨¡å‹çš„æ–¹å·®å¾ˆå¤§ï¼Œå³æ— æ³•è¾¾åˆ°é˜²æ­¢è¿‡æ‹Ÿåˆçš„æ•ˆæœã€‚å› æ­¤ï¼ŒBoostingæ¡†æ¶ä¸­çš„åŸºæ¨¡å‹å¿…é¡»ä¸ºå¼±æ¨¡å‹</li>
<li>å› ä¸ºåŸºæ¨¡å‹ä¸ºå¼±æ¨¡å‹ï¼Œå¯¼è‡´äº†æ¯ä¸ªåŸºæ¨¡å‹çš„å‡†ç¡®åº¦éƒ½ä¸æ˜¯å¾ˆé«˜ã€‚éšç€åŸºæ¨¡å‹æ•°çš„å¢å¤šï¼Œæ•´ä½“æ¨¡å‹çš„æœŸæœ›å€¼å¢åŠ ï¼Œæ›´æ¥è¿‘çœŸå®å€¼ï¼Œå› æ­¤æ•´ä½“æ¨¡å‹çš„å‡†ç¡®åº¦æé«˜ã€‚ä½†æ˜¯å‡†ç¡®åº¦ä¸€å®šä¼šæ— é™é€¼è¿‘1å—ï¼Ÿä»ç„¶å¹¶ä¸ä¸€å®šï¼Œå› ä¸ºè®­ç»ƒè¿‡ç¨‹ä¸­å‡†ç¡®åº¦çš„æé«˜çš„ä¸»è¦åŠŸè‡£æ˜¯æ•´ä½“æ¨¡å‹åœ¨è®­ç»ƒé›†è¡Œçš„å‡†ç¡®åº¦æé«˜ï¼Œè€Œéšç€è®­ç»ƒçš„è¿›è¡Œï¼Œæ•´ä½“æ¨¡å‹çš„æ–¹å·®å˜å¤§ï¼Œå¯¼è‡´é˜²æ­¢è¿‡æ‹Ÿåˆçš„èƒ½åŠ›å˜å¼±ï¼Œæœ€ç»ˆå¯¼è‡´äº†å‡†ç¡®åº¦åè€Œæœ‰æ‰€ä¸‹é™ã€‚</li>
</ul>
<p>åŸºäº Boosting æ¡†æ¶çš„ Gradient Boosting Decision Tree æ¨¡å‹ä¸­åŸºæ¨¡å‹ä¹Ÿä¸ºæ ‘æ¨¡å‹ï¼ŒåŒ Random Forestï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹ç‰¹å¾è¿›è¡ŒéšæœºæŠ½æ ·æ¥ä½¿åŸºæ¨¡å‹é—´çš„ç›¸å…³æ€§é™ä½ï¼Œä»è€Œè¾¾åˆ°å‡å°‘æ–¹å·®çš„æ•ˆæœã€‚</p>
<h4 id="2-4-å°ç»“"><a href="#2-4-å°ç»“" class="headerlink" title="2.4 å°ç»“"></a>2.4 å°ç»“</h4><ul>
<li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¨¡å‹çš„åå·®å’Œæ–¹å·®æ¥è¿‘ä¼¼æè¿°æ¨¡å‹çš„å‡†ç¡®åº¦ï¼›</li>
<li>å¯¹äº Bagging æ¥è¯´ï¼Œæ•´ä½“æ¨¡å‹çš„åå·®ä¸åŸºæ¨¡å‹è¿‘ä¼¼ï¼Œè€Œéšç€æ¨¡å‹çš„å¢åŠ å¯ä»¥é™ä½æ•´ä½“æ¨¡å‹çš„æ–¹å·®ï¼Œæ•…å…¶åŸºæ¨¡å‹éœ€è¦ä¸ºå¼ºæ¨¡å‹ï¼›</li>
<li>å¯¹äº Boosting æ¥è¯´ï¼Œæ•´ä½“æ¨¡å‹çš„æ–¹å·®è¿‘ä¼¼ç­‰äºåŸºæ¨¡å‹çš„æ–¹å·®ï¼Œè€Œæ•´ä½“æ¨¡å‹çš„åå·®ç”±åŸºæ¨¡å‹ç´¯åŠ è€Œæˆï¼Œæ•…åŸºæ¨¡å‹éœ€è¦ä¸ºå¼±æ¨¡å‹ã€‚</li>
</ul>
<h3 id="3-Random-Forest"><a href="#3-Random-Forest" class="headerlink" title="3.Random Forest"></a>3.Random Forest</h3><p>RF ç®—æ³•ç”±å¾ˆå¤šå†³ç­–æ ‘ç»„æˆï¼Œæ¯ä¸€æ£µå†³ç­–æ ‘ä¹‹é—´æ²¡æœ‰å…³è”ã€‚å»ºç«‹å®Œæ£®æ—åï¼Œå½“æœ‰æ–°æ ·æœ¬è¿›å…¥æ—¶ï¼Œæ¯æ£µå†³ç­–æ ‘éƒ½ä¼šåˆ†åˆ«è¿›è¡Œåˆ¤æ–­ï¼Œç„¶ååŸºäºæŠ•ç¥¨æ³•ç»™å‡ºåˆ†ç±»ç»“æœã€‚<span style="color:red">ç»„æˆéšæœºæ£®æ—çš„æ ‘å¯ä»¥æ˜¯åˆ†ç±»æ ‘ï¼Œä¹Ÿå¯ä»¥æ˜¯å›å½’æ ‘ã€‚</span>ï¼ˆè€ŒGBDTåªç”±å›å½’æ ‘ç»„æˆï¼‰</p>
<h4 id="3-1-æ€æƒ³-1"><a href="#3-1-æ€æƒ³-1" class="headerlink" title="3.1 æ€æƒ³"></a>3.1 æ€æƒ³</h4><p>Random Forestï¼ˆéšæœºæ£®æ—ï¼‰æ˜¯ Bagging çš„æ‰©å±•å˜ä½“ï¼Œå®ƒåœ¨ä»¥å†³ç­–æ ‘ä¸ºåŸºå­¦ä¹ å™¨æ„å»º Bagging é›†æˆçš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥åœ¨å†³ç­–æ ‘çš„è®­ç»ƒè¿‡ç¨‹ä¸­å¼•å…¥äº†éšæœºç‰¹å¾é€‰æ‹©ï¼Œå› æ­¤å¯ä»¥æ¦‚æ‹¬ RF åŒ…æ‹¬å››ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li>éšæœºé€‰æ‹©æ ·æœ¬ï¼ˆæœ‰æ”¾å›æŠ½æ ·ï¼‰ï¼›</li>
<li>éšæœºé€‰æ‹©ç‰¹å¾ï¼›</li>
<li>æ„å»ºå†³ç­–æ ‘ï¼›</li>
<li>éšæœºæ£®æ—æŠ•ç¥¨ï¼ˆå¹³å‡ï¼‰ã€‚</li>
</ol>
<p>éšæœºé€‰æ‹©æ ·æœ¬å’Œ Bagging ç›¸åŒï¼Œé‡‡ç”¨çš„æ˜¯ Bootstrap è‡ªåŠ©é‡‡æ ·æ³•ï¼›éšæœºé€‰æ‹©ç‰¹å¾æ˜¯æŒ‡åœ¨æ¯ä¸ªèŠ‚ç‚¹åœ¨åˆ†è£‚è¿‡ç¨‹ä¸­éƒ½æ˜¯éšæœºé€‰æ‹©ç‰¹å¾çš„ï¼ˆåŒºåˆ«äºæ¯æ£µæ ‘éšæœºé€‰æ‹©ä¸€æ‰¹ç‰¹å¾ï¼‰ã€‚</p>
<blockquote>
<p>for each split on a tree, you take a random subset of the features but still use the same splitting criteria. </p>
<p><strong>Does random forest select a subset of features for every tree or every node?</strong></p>
<p>Thatâ€™s a good question, since the earlier random decision forests by Tin Kam Ho used the â€œrandom subspace method,â€ where each tree got a random subset of features.</p>
<blockquote>
<p>â€œOur method relies on an autonomous, pseudo-random procedure to select a small number of dimensions from a given feature space â€¦â€</p>
</blockquote>
<ul>
<li>Ho, Tin Kam. â€œThe random subspace method for constructing decision forests.â€ IEEE transactions on pattern analysis and machine intelligence 20.8 (1998): 832-844.</li>
</ul>
<p>However, a few years later, Leo Breiman described the procedure of selecting different subsets of features for each node (while a tree was given the full set of features) â€” Leo Breimanâ€™s formulation has become the â€œtrademarkâ€ random forest algorithm that we typically refer to these days when we speak of â€œrandom forestâ€</p>
<blockquote>
<p>â€œâ€¦ random forest with random features is formed by selecting at random, at each node, a small group of input variables to split on.â€</p>
</blockquote>
<ul>
<li>Breiman, Leo. â€œRandom Forestsâ€ Machine learning 45.1 (2001): 5-32.</li>
</ul>
<p>To answer your question: Each tree gets the full set of features, but at each node, only a random subset of features is considered.</p>
<p>(æ¥è‡ª <a href="https://sebastianraschka.com/faq/docs/random-forest-feature-subsets.html" target="_blank" rel="noopener">https://sebastianraschka.com/faq/docs/random-forest-feature-subsets.html</a>)</p>
</blockquote>
<p>è¿™ç§éšæœºæ€§å¯¼è‡´éšæœºæ£®æ—çš„åå·®ä¼šæœ‰ç¨å¾®çš„å¢åŠ ï¼ˆç›¸æ¯”äºå•æ£µä¸éšæœºæ ‘ï¼‰ï¼Œä½†æ˜¯ç”±äºéšæœºæ£®æ—çš„â€œå¹³å‡â€ç‰¹æ€§ï¼Œä¼šä½¿å¾—å®ƒçš„æ–¹å·®å‡å°ï¼Œè€Œä¸”æ–¹å·®çš„å‡å°è¡¥å¿äº†åå·®çš„å¢å¤§ï¼Œå› æ­¤æ€»ä½“è€Œè¨€æ˜¯æ›´å¥½çš„æ¨¡å‹ã€‚</p>
<p>éšæœºé‡‡æ ·ç”±äºå¼•å…¥äº†ä¸¤ç§é‡‡æ ·æ–¹æ³•ä¿è¯äº†éšæœºæ€§ï¼Œæ‰€ä»¥æ¯æ£µæ ‘éƒ½æ˜¯æœ€å¤§å¯èƒ½çš„è¿›è¡Œç”Ÿé•¿å°±ç®—ä¸å‰ªæä¹Ÿä¸ä¼šå‡ºç°è¿‡æ‹Ÿåˆã€‚</p>
<h4 id="3-2-ä¼˜ç¼ºç‚¹"><a href="#3-2-ä¼˜ç¼ºç‚¹" class="headerlink" title="3.2 ä¼˜ç¼ºç‚¹"></a>3.2 ä¼˜ç¼ºç‚¹</h4><p>ä¼˜ç‚¹</p>
<ol>
<li>åœ¨æ•°æ®é›†ä¸Šè¡¨ç°è‰¯å¥½ï¼Œç›¸å¯¹äºå…¶ä»–ç®—æ³•æœ‰è¾ƒå¤§çš„ä¼˜åŠ¿</li>
<li>æ˜“äºå¹¶è¡ŒåŒ–ï¼Œåœ¨å¤§æ•°æ®é›†ä¸Šæœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼›</li>
<li>èƒ½å¤Ÿå¤„ç†é«˜ç»´åº¦æ•°æ®ï¼Œä¸ç”¨åšç‰¹å¾é€‰æ‹©ã€‚</li>
</ol>
<h3 id="4-AdaBoost"><a href="#4-AdaBoost" class="headerlink" title="4.AdaBoost"></a>4.AdaBoost</h3><p>AdaBoostï¼ˆAdaptive Boostingï¼Œè‡ªé€‚åº”å¢å¼ºï¼‰ï¼Œå…¶è‡ªé€‚åº”åœ¨äºï¼šå‰ä¸€ä¸ªåŸºæœ¬åˆ†ç±»å™¨åˆ†é”™çš„æ ·æœ¬ä¼šå¾—åˆ°åŠ å¼ºï¼ŒåŠ æƒåçš„å…¨ä½“æ ·æœ¬å†æ¬¡è¢«ç”¨æ¥è®­ç»ƒä¸‹ä¸€ä¸ªåŸºæœ¬åˆ†ç±»å™¨ã€‚åŒæ—¶ï¼Œåœ¨æ¯ä¸€è½®ä¸­åŠ å…¥ä¸€ä¸ªæ–°çš„å¼±åˆ†ç±»å™¨ï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªé¢„å®šçš„è¶³å¤Ÿå°çš„é”™è¯¯ç‡æˆ–è¾¾åˆ°é¢„å…ˆæŒ‡å®šçš„æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚</p>
<h4 id="4-1-æ€æƒ³"><a href="#4-1-æ€æƒ³" class="headerlink" title="4.1 æ€æƒ³"></a>4.1 æ€æƒ³</h4><p>Adaboost è¿­ä»£ç®—æ³•æœ‰ä¸‰æ­¥ï¼š</p>
<ol>
<li>åˆå§‹åŒ–è®­ç»ƒæ ·æœ¬çš„æƒå€¼åˆ†å¸ƒï¼Œæ¯ä¸ªæ ·æœ¬å…·æœ‰ç›¸åŒæƒé‡ï¼›</li>
<li>è®­ç»ƒå¼±åˆ†ç±»å™¨ï¼Œå¦‚æœæ ·æœ¬åˆ†ç±»æ­£ç¡®ï¼Œåˆ™åœ¨æ„é€ ä¸‹ä¸€ä¸ªè®­ç»ƒé›†ä¸­ï¼Œå®ƒçš„æƒå€¼å°±ä¼šè¢«é™ä½ï¼›åä¹‹æé«˜ã€‚ç”¨æ›´æ–°è¿‡çš„æ ·æœ¬é›†å»è®­ç»ƒä¸‹ä¸€ä¸ªåˆ†ç±»å™¨ï¼›</li>
<li>å°†æ‰€æœ‰å¼±åˆ†ç±»ç»„åˆæˆå¼ºåˆ†ç±»å™¨ï¼Œå„ä¸ªå¼±åˆ†ç±»å™¨çš„è®­ç»ƒè¿‡ç¨‹ç»“æŸåï¼ŒåŠ å¤§åˆ†ç±»è¯¯å·®ç‡å°çš„å¼±åˆ†ç±»å™¨çš„æƒé‡ï¼Œé™ä½åˆ†ç±»è¯¯å·®ç‡å¤§çš„å¼±åˆ†ç±»å™¨çš„æƒé‡ã€‚</li>
</ol>
<h4 id="4-2-ç»†èŠ‚"><a href="#4-2-ç»†èŠ‚" class="headerlink" title="4.2 ç»†èŠ‚"></a>4.2 ç»†èŠ‚</h4><h5 id="4-2-1-ç®—æ³•è¿‡ç¨‹"><a href="#4-2-1-ç®—æ³•è¿‡ç¨‹" class="headerlink" title="4.2.1 ç®—æ³•è¿‡ç¨‹"></a>4.2.1 ç®—æ³•è¿‡ç¨‹</h5><p>æ¥è‡ª <a href="https://blog.csdn.net/weixin_38629654/article/details/80516045" target="_blank" rel="noopener">https://blog.csdn.net/weixin_38629654/article/details/80516045</a></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601196695960.png" alt="1601196695960"></p>
<p>æœ€åæ€»ç»“ä¸€ä¸‹Adaboostç®—æ³•ï¼Œç†è§£å®ƒçš„å…³é”®å°±åœ¨äºäº†è§£æƒå€¼åˆ†å¸ƒ$D_t$æ˜¯å¦‚ä½•å½±å“è¯¯å·®ç‡$e_t$ã€æƒå€¼$\alpha_t$ä»¥åŠæ›´æ–°æƒå€¼åˆ†å¸ƒ$D_{t+1}$ã€‚å…·ä½“çš„ä¾‹å­ï¼Œå¯è§ <a href="https://blog.csdn.net/guyuealian/article/details/70995333" target="_blank" rel="noopener">https://blog.csdn.net/guyuealian/article/details/70995333</a></p>
<p>AdaBoost é€šè¿‡è®­ç»ƒå¤šä¸ªå¼±åˆ†ç±»å™¨æ¥ç»„åˆå¾—åˆ°ä¸€ä¸ªå¼ºåˆ†ç±»å™¨ï¼Œæ¯æ¬¡è¿­ä»£ä¼šç”Ÿæˆä¸€æ£µ<strong>é«˜åå·®ã€ä½æ–¹å·®</strong>çš„å¼±åˆ†ç±»å™¨ï¼Œæ¯ä¸€è½®çš„è®­ç»ƒä¼šæ›´å…³æ³¨ä¸Šä¸€è½®è¢«åˆ†ç±»å™¨åˆ†é”™çš„æ ·æœ¬ï¼Œä¸ºå…¶åŠ å¤§æƒé‡ã€‚</p>
<p>è®­ç»ƒè¿‡ç¨‹ï¼š</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601799086192.png" alt="1601799086192"></p>
<h5 id="4-2-2-æŸå¤±å‡½æ•°"><a href="#4-2-2-æŸå¤±å‡½æ•°" class="headerlink" title="4.2.2 æŸå¤±å‡½æ•°"></a>4.2.2 æŸå¤±å‡½æ•°</h5><p><img src="/2020/07/25/å†³ç­–æ ‘/1595663386859.png" alt="1595663386859"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595663456133.png" alt="1595663456133"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595663508910.png" alt="1595663508910"></p>
<h5 id="4-2-3-æ­£åˆ™åŒ–"><a href="#4-2-3-æ­£åˆ™åŒ–" class="headerlink" title="4.2.3 æ­£åˆ™åŒ–"></a>4.2.3 æ­£åˆ™åŒ–</h5><p><img src="/2020/07/25/å†³ç­–æ ‘/1595663617670.png" alt="1595663617670"></p>
<h4 id="4-3-ä¼˜ç¼ºç‚¹"><a href="#4-3-ä¼˜ç¼ºç‚¹" class="headerlink" title="4.3 ä¼˜ç¼ºç‚¹"></a>4.3 ä¼˜ç¼ºç‚¹</h4><p><strong>ä¼˜ç‚¹</strong></p>
<ol>
<li>åˆ†ç±»ç²¾åº¦é«˜ï¼›</li>
<li>å¯ä»¥ç”¨å„ç§å›å½’åˆ†ç±»æ¨¡å‹æ¥æ„å»ºå¼±å­¦ä¹ å™¨ï¼Œéå¸¸çµæ´»ï¼›</li>
<li>ä¸å®¹æ˜“å‘ç”Ÿè¿‡æ‹Ÿåˆã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹</strong></p>
<ol>
<li>å¯¹å¼‚å¸¸ç‚¹æ•æ„Ÿï¼Œå¼‚å¸¸ç‚¹ä¼šè·å¾—è¾ƒé«˜æƒé‡ã€‚</li>
</ol>
<p>å¦ï¼š</p>
<p><strong>ä¼˜ç‚¹</strong> </p>
<p>ï¼ˆ1ï¼‰Adaboostæä¾›ä¸€ç§æ¡†æ¶ï¼Œåœ¨æ¡†æ¶å†…å¯ä»¥ä½¿ç”¨å„ç§æ–¹æ³•æ„å»ºå­åˆ†ç±»å™¨ã€‚å¯ä»¥ä½¿ç”¨ç®€å•çš„å¼±åˆ†ç±»å™¨ï¼Œä¸ç”¨å¯¹ç‰¹å¾è¿›è¡Œç­›é€‰ï¼Œä¹Ÿä¸å­˜åœ¨è¿‡æ‹Ÿåˆçš„ç°è±¡ã€‚ </p>
<p>ï¼ˆ2ï¼‰Adaboostç®—æ³•ä¸éœ€è¦å¼±åˆ†ç±»å™¨çš„å…ˆéªŒçŸ¥è¯†ï¼Œæœ€åå¾—åˆ°çš„å¼ºåˆ†ç±»å™¨çš„åˆ†ç±»ç²¾åº¦ä¾èµ–äºæ‰€æœ‰å¼±åˆ†ç±»å™¨ã€‚æ— è®ºæ˜¯åº”ç”¨äºäººé€ æ•°æ®è¿˜æ˜¯çœŸå®æ•°æ®ï¼ŒAdaboostéƒ½èƒ½æ˜¾è‘—çš„æé«˜å­¦ä¹ ç²¾åº¦ã€‚ </p>
<p>ï¼ˆ3ï¼‰Adaboostç®—æ³•ä¸éœ€è¦é¢„å…ˆçŸ¥é“å¼±åˆ†ç±»å™¨çš„é”™è¯¯ç‡ä¸Šé™ï¼Œä¸”æœ€åå¾—åˆ°çš„å¼ºåˆ†ç±»å™¨çš„åˆ†ç±»ç²¾åº¦ä¾èµ–äºæ‰€æœ‰å¼±åˆ†ç±»å™¨çš„åˆ†ç±»ç²¾åº¦ï¼Œå¯ä»¥æ·±æŒ–åˆ†ç±»å™¨çš„èƒ½åŠ›ã€‚Adaboostå¯ä»¥æ ¹æ®å¼±åˆ†ç±»å™¨çš„åé¦ˆï¼Œè‡ªé€‚åº”åœ°è°ƒæ•´å‡å®šçš„é”™è¯¯ç‡ï¼Œæ‰§è¡Œçš„æ•ˆç‡é«˜ã€‚ </p>
<p>ï¼ˆ4ï¼‰Adaboostå¯ä»¥åœ¨ä¸æ”¹å˜è®­ç»ƒæ•°æ®ï¼Œåªæ”¹å˜æ•°æ®æƒå€¼åˆ†å¸ƒï¼Œä½¿å¾—æ•°æ®åœ¨ä¸åŒå­¦ä¹ å™¨ä¸­äº§ç”Ÿä¸åŒä½œç”¨ï¼Œç±»ä¼¼äºé‡é‡‡æ ·ã€‚ </p>
<p><strong>ç¼ºç‚¹</strong> </p>
<p>â€‹     åœ¨Adaboostè®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒAdaboostä¼šä½¿å¾—éš¾äºåˆ†ç±»æ ·æœ¬çš„æƒå€¼å‘ˆæŒ‡æ•°å¢é•¿ï¼Œè®­ç»ƒå°†ä¼šè¿‡äºåå‘è¿™ç±»å›°éš¾çš„æ ·æœ¬ï¼Œå¯¼è‡´Adaboostç®—æ³•æ˜“å—å™ªå£°å¹²æ‰°ã€‚æ­¤å¤–ï¼ŒAdaboostä¾èµ–äºå¼±åˆ†ç±»å™¨ï¼Œè€Œå¼±åˆ†ç±»å™¨çš„è®­ç»ƒæ—¶é—´å¾€å¾€å¾ˆé•¿ã€‚</p>
<h3 id="5-GBDT"><a href="#5-GBDT" class="headerlink" title="5.GBDT"></a>5.GBDT</h3><blockquote>
<p>å‚è€ƒï¼š<br><a href="https://mp.weixin.qq.com/s/Nl_-PdF0nHBq8yGp6AdI-Q" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/Nl_-PdF0nHBq8yGp6AdI-Q</a><br><a href="https://blog.csdn.net/sb19931201/article/details/52506157" target="_blank" rel="noopener">https://blog.csdn.net/sb19931201/article/details/52506157</a><br><a href="https://www.zybuluo.com/vivounicorn/note/446479" target="_blank" rel="noopener">https://www.zybuluo.com/vivounicorn/note/446479</a><br><a href="https://www.cnblogs.com/bnuvincent/p/9693190.html" target="_blank" rel="noopener">https://www.cnblogs.com/bnuvincent/p/9693190.html</a></p>
</blockquote>
<p>GBDTï¼ˆGradient Boosting Decision Treeï¼‰æ˜¯ä¸€ç§è¿­ä»£çš„å†³ç­–æ ‘ç®—æ³•ï¼Œè¯¥ç®—æ³•ç”±å¤šæ£µå†³ç­–æ ‘ç»„æˆï¼Œä»åå­—ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥å®ƒæ˜¯å±äº Boosting ç­–ç•¥ã€‚GBDT æ˜¯è¢«å…¬è®¤çš„æ³›åŒ–èƒ½åŠ›è¾ƒå¼ºçš„ç®—æ³•ã€‚</p>
<p>GBDT æ˜¯é€šè¿‡é‡‡ç”¨åŠ æ³•æ¨¡å‹ï¼ˆå³åŸºå‡½æ•°çš„çº¿æ€§ç»„åˆï¼‰ï¼Œä»¥åŠä¸æ–­å‡å°è®­ç»ƒè¿‡ç¨‹äº§ç”Ÿçš„æ®‹å·®æ¥è¾¾åˆ°å°†æ•°æ®åˆ†ç±»æˆ–è€…å›å½’çš„ç®—æ³•ã€‚</p>
<p>ä¸åŒäºAdabooståŠ å¤§è¯¯åˆ†æ ·æœ¬æƒé‡çš„ç­–ç•¥ï¼ŒGBDTæ¯æ¬¡è¿­ä»£åŠ çš„æ˜¯ä¸Šä¸€è½®æ¢¯åº¦æ›´æ–°å€¼ã€‚å…¶è®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹:</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601800623694.png" alt="1601800623694"></p>
<h4 id="5-1-æ€æƒ³"><a href="#5-1-æ€æƒ³" class="headerlink" title="5.1 æ€æƒ³"></a>5.1 æ€æƒ³</h4><p>GBDT é€šè¿‡å¤šè½®è¿­ä»£ï¼Œæ¯è½®è¿­ä»£äº§ç”Ÿä¸€ä¸ªå¼±åˆ†ç±»å™¨ï¼Œæ¯ä¸ªåˆ†ç±»å™¨åœ¨ä¸Šä¸€è½®åˆ†ç±»å™¨çš„<strong>æ®‹å·®</strong>åŸºç¡€ä¸Šè¿›è¡Œè®­ç»ƒã€‚å¯¹å¼±åˆ†ç±»å™¨çš„è¦æ±‚ä¸€èˆ¬æ˜¯è¶³å¤Ÿç®€å•ï¼Œå¹¶ä¸”æ˜¯ä½æ–¹å·®å’Œé«˜åå·®çš„ã€‚å› æ­¤è®­ç»ƒçš„è¿‡ç¨‹æ˜¯é€šè¿‡é™ä½åå·®æ¥ä¸æ–­æé«˜æœ€ç»ˆåˆ†ç±»å™¨çš„ç²¾åº¦ã€‚</p>
<p>å¼±åˆ†ç±»å™¨ä¸€èˆ¬ä¼šé€‰æ‹©ä¸ºCART TREEï¼ˆä¹Ÿå°±æ˜¯åˆ†ç±»å›å½’æ ‘ï¼‰ã€‚ç”±äºä¸Šè¿°é«˜åå·®å’Œç®€å•çš„è¦æ±‚ï¼Œæ¯ä¸ªåˆ†ç±»å›å½’æ ‘çš„æ·±åº¦ä¸ä¼šå¾ˆæ·±ã€‚æœ€ç»ˆçš„æ€»åˆ†ç±»å™¨æ˜¯å°†æ¯è½®è®­ç»ƒå¾—åˆ°çš„å¼±åˆ†ç±»å™¨åŠ æƒæ±‚å’Œå¾—åˆ°çš„ï¼ˆä¹Ÿå°±æ˜¯åŠ æ³•æ¨¡å‹ï¼‰ã€‚</p>
<p>æ¨¡å‹æœ€ç»ˆå¯ä»¥æè¿°ä¸ºï¼š</p>
<script type="math/tex; mode=display">
F_M(x)=\sum_{m=1}^MT(x;\theta_m)</script><p> æ¨¡å‹ä¸€å…±è®­ç»ƒ $M$ è½®ï¼Œæ¯è½®äº§ç”Ÿä¸€ä¸ªå¼±åˆ†ç±»å™¨ $T(x;\theta_m)$ã€‚å¼±åˆ†ç±»å™¨çš„<strong>æŸå¤±å‡½æ•°</strong></p>
<script type="math/tex; mode=display">
\theta_m = argmin_{\theta_m}\sum_{i=1}^N L(y_i,F_{m-1}(x_i)+T(x_i;\theta_m))</script><p>$F_{m-1}(x)$ ä¸ºå½“å‰çš„æ¨¡å‹ï¼ŒGBDT é€šè¿‡ç»éªŒé£é™©æå°åŒ–æ¥ç¡®å®šä¸‹ä¸€ä¸ªå¼±åˆ†ç±»å™¨çš„å‚æ•°ã€‚å…·ä½“åˆ°æŸå¤±å‡½æ•°æœ¬èº«çš„é€‰æ‹©ä¹Ÿå°±æ˜¯ $L$ çš„é€‰æ‹©ï¼Œæœ‰å¹³æ–¹æŸå¤±å‡½æ•°ï¼Œ0-1æŸå¤±å‡½æ•°ï¼Œå¯¹æ•°æŸå¤±å‡½æ•°ç­‰ç­‰ã€‚å¦‚æœæˆ‘ä»¬é€‰æ‹©å¹³æ–¹æŸå¤±å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå·®å€¼å…¶å®å°±æ˜¯æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„æ®‹å·®ã€‚</p>
<p>å¦‚ä½•è®©æŸå¤±å‡½æ•°å°½å¯èƒ½å¿«çš„å‡å°ï¼šè®©æŸå¤±å‡½æ•°æ²¿ç€æ¢¯åº¦æ–¹å‘ä¸‹é™ã€‚è¿™ä¸ªå°±æ˜¯ GBDT çš„ GB çš„æ ¸å¿ƒäº†ã€‚ <strong>åˆ©ç”¨æŸå¤±å‡½æ•°çš„è´Ÿæ¢¯åº¦åœ¨å½“å‰æ¨¡å‹çš„å€¼</strong></p>
<script type="math/tex; mode=display">
-[\frac{\partial L(y_i,f(x_i))}{\partial f(x_i)}]_{f(x)=f_{m-1}(x)}</script><p><strong>ä½œä¸ºå›å½’é—®é¢˜æå‡æ ‘ç®—æ³•ä¸­çš„æ®‹å·®çš„è¿‘ä¼¼å€¼å»æ‹Ÿåˆä¸€ä¸ªå›å½’æ ‘ã€‚gbdt æ¯è½®è¿­ä»£çš„æ—¶å€™ï¼Œéƒ½å»æ‹ŸåˆæŸå¤±å‡½æ•°åœ¨å½“å‰æ¨¡å‹ä¸‹çš„è´Ÿæ¢¯åº¦ã€‚</strong>è¿™æ ·æ¯è½®è®­ç»ƒçš„æ—¶å€™éƒ½èƒ½å¤Ÿè®©æŸå¤±å‡½æ•°å°½å¯èƒ½å¿«çš„å‡å°ï¼Œå°½å¿«çš„æ”¶æ•›è¾¾åˆ°å±€éƒ¨æœ€ä¼˜è§£æˆ–è€…å…¨å±€æœ€ä¼˜è§£ã€‚</p>
<h5 id="5-1-1-Boosting"><a href="#5-1-1-Boosting" class="headerlink" title="5.1.1 Boosting"></a>5.1.1 Boosting</h5><p>GBDT çš„å…¨ç§°æ˜¯ Gradient Boosting Decision Treeï¼ŒGradient Boosting å’Œ Decision Treeæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„æ¦‚å¿µã€‚å› æ­¤æˆ‘ä»¬å…ˆè¯´è¯´Boostingã€‚Boostingçš„æ¦‚å¿µå¾ˆå¥½ç†è§£ï¼Œæ„æ€æ˜¯ç”¨ä¸€äº›å¼±åˆ†ç±»å™¨çš„ç»„åˆæ¥æ„é€ ä¸€ä¸ªå¼ºåˆ†ç±»å™¨ã€‚å› æ­¤ï¼Œå®ƒä¸æ˜¯æŸä¸ªå…·ä½“çš„ç®—æ³•ï¼Œå®ƒè¯´çš„æ˜¯ä¸€ç§ç†å¿µã€‚å’Œè¿™ä¸ªç†å¿µç›¸å¯¹åº”çš„æ˜¯ä¸€æ¬¡æ€§æ„é€ ä¸€ä¸ªå¼ºåˆ†ç±»å™¨ã€‚åƒæ”¯æŒå‘é‡æœºï¼Œé€»è¾‘å›å½’ç­‰éƒ½å±äºåè€…ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬<strong>é€šè¿‡ç›¸åŠ æ¥ç»„åˆå¼±åˆ†ç±»å™¨</strong>ï¼Œå½¢å¼å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
F_m(x) = f_0 + \alpha_1f_1(x) +\alpha_2f_2(x) + ... + \alpha_m f_m(x)</script><h5 id="5-1-2-Gradient-Boosting-Modeling-GBM"><a href="#5-1-2-Gradient-Boosting-Modeling-GBM" class="headerlink" title="5.1.2 Gradient Boosting Modeling (GBM)"></a>5.1.2 Gradient Boosting Modeling (GBM)</h5><p>ç»™å®šä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¦‚ä½•æ„é€ è¿™äº›å¼±åˆ†ç±»å™¨å‘¢ï¼ŸGradient Boosting Modeling (GBM) å°±æ˜¯æ„é€ è¿™äº›å¼±åˆ†ç±»å™¨çš„ä¸€ç§æ–¹æ³•ã€‚åŒæ ·ï¼Œå®ƒæŒ‡çš„ä¸æ˜¯æŸä¸ªå…·ä½“çš„ç®—æ³•ï¼Œä»ç„¶åªæ˜¯ä¸€ä¸ªç†å¿µã€‚</p>
<h6 id="5-1-2-1-æœ€æ·±æ¢¯åº¦ä¸‹é™æ³•ï¼ˆSteepest-Gradient-Descentï¼‰"><a href="#5-1-2-1-æœ€æ·±æ¢¯åº¦ä¸‹é™æ³•ï¼ˆSteepest-Gradient-Descentï¼‰" class="headerlink" title="5.1.2.1 æœ€æ·±æ¢¯åº¦ä¸‹é™æ³•ï¼ˆSteepest Gradient Descentï¼‰"></a>5.1.2.1 æœ€æ·±æ¢¯åº¦ä¸‹é™æ³•ï¼ˆSteepest Gradient Descentï¼‰</h6><p>åœ¨ç†è§£ Gradient Boosting Modeling ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ä¸€ä¸ªå…¸å‹çš„ä¼˜åŒ–é—®é¢˜ï¼š</p>
<script type="math/tex; mode=display">
find\ \hat x = \mathop{\arg\min}_x f(x)</script><p>é’ˆå¯¹è¿™ç§ä¼˜åŒ–é—®é¢˜ï¼Œæœ‰ä¸€ä¸ªç»å…¸çš„ç®—æ³•å« Steepest Gradient Descentï¼ˆæœ€æ·±æ¢¯åº¦ä¸‹é™æ³•ï¼‰ã€‚ è¿™ä¸ªç®—æ³•çš„è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹: </p>
<p>1.ç»™å®šä¸€ä¸ªèµ·å§‹ç‚¹  $x_0$</p>
<p>2.å¯¹ $i = 1, 2, â€¦, K$ åˆ†åˆ«åšå¦‚ä¸‹è¿­ä»£ï¼š</p>
<script type="math/tex; mode=display">
x_i = x_{i-1} + \gamma_{i-1}*g_{i-1}ï¼Œè¿™é‡Œg_{i-1}=-\frac{\partial f}{\partial x}|_{x=x_{i-1}}è¡¨ç¤º f åœ¨ x_{i-1}å¤„çš„æ¢¯åº¦</script><p>ç›´åˆ° $g_{i-1}$ è¶³å¤Ÿå°ï¼Œæˆ–è€… $|x_i-x_{i-1}|$ è¶³å¤Ÿå°ã€‚</p>
<p>ä»¥ä¸Šè¿­ä»£è¿‡ç¨‹å¯ä»¥è¿™ä¹ˆç†è§£ï¼šæ•´ä¸ªå¯»ä¼˜çš„è¿‡ç¨‹å°±æ˜¯ä¸ªå°æ­¥å¿«è·‘çš„è¿‡ç¨‹ï¼Œæ¯è·‘ä¸€å°æ­¥ï¼Œéƒ½å¾€å‡½æ•°å½“å‰ä¸‹é™æœ€å¿«çš„é‚£ä¸ªæ–¹å‘èµ°ä¸€ç‚¹ã€‚</p>
<p>è¿™æ ·å¯»ä¼˜å¾—åˆ°çš„ç»“æœå¯ä»¥è¡¨ç¤ºæˆåŠ å’Œå½¢å¼ï¼Œå³ï¼š</p>
<script type="math/tex; mode=display">
x_k = x_0 + \gamma_1*g_1 +\gamma_2*g_2 + ... + \gamma_k*g_k</script><h6 id="5-1-2-2-Gradient-Boosting"><a href="#5-1-2-2-Gradient-Boosting" class="headerlink" title="5.1.2.2 Gradient Boosting"></a>5.1.2.2 Gradient Boosting</h6><p>Gradient Boosting æ­£æ˜¯ç”±æ­¤å¯å‘è€Œæ¥ã€‚ æ„é€  $F_m(x)$ æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯»ä¼˜çš„è¿‡ç¨‹ï¼Œåªä¸è¿‡æˆ‘ä»¬å¯»æ‰¾çš„ä¸æ˜¯ä¸€ä¸ªæœ€ä¼˜ç‚¹ï¼Œè€Œæ˜¯ä¸€ä¸ªæœ€ä¼˜çš„å‡½æ•°ã€‚ä¼˜åŒ–çš„ç›®æ ‡é€šå¸¸éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªæŸå¤±å‡½æ•°æ¥å®šä¹‰ï¼Œå³ï¼š</p>
<script type="math/tex; mode=display">
find\ F_m = \mathop{\arg \min_F} L(F)= \mathop{\arg \min_F} \sum_{i=0}^N Loss(F(x_i),y_i)</script><p>å…¶ä¸­ $Loss(F(x_i),y_i)$ è¡¨ç¤ºæŸå¤±å‡½æ•° Loss åœ¨ç¬¬ i ä¸ªæ ·æœ¬ä¸Šçš„æŸå¤±å€¼ã€‚å¸¸è§çš„æŸå¤±å‡½æ•°å¦‚å¹³æ–¹å·®å‡½æ•°ï¼š</p>
<script type="math/tex; mode=display">
Loss(F(x_i),y_i)=(F(x_i)-y_i)^2</script><p>ç±»ä¼¼æœ€æ·±æ¢¯åº¦ä¸‹é™æ³•ï¼Œå¯ä»¥é€šè¿‡æ¢¯åº¦ä¸‹é™æ³•æ¥æ„é€ å¼±åˆ†ç±»å™¨ $f_1,f_2,â€¦,f_m$ï¼Œåªä¸è¿‡æ¯æ¬¡è¿­ä»£æ—¶ï¼Œä»¤</p>
<script type="math/tex; mode=display">
g_i=-\frac{\partial L}{\partial F}|_{F=F_{i-1}}</script><p>å³å¯¹æŸå¤±å‡½æ•°Lï¼Œä»¥ F ä¸ºå‚è€ƒæ±‚å–æ¢¯åº¦ã€‚è¿™é‡Œæœ‰ä¸ªå°é—®é¢˜ï¼Œä¸€ä¸ªå‡½æ•°å¯¹å‡½æ•°çš„æ±‚å¯¼ä¸å¥½ç†è§£ï¼Œè€Œä¸”é€šå¸¸éƒ½æ— æ³•é€šè¿‡ä¸Šè¿°å…¬å¼ç›´æ¥æ±‚è§£åˆ°æ¢¯åº¦å‡½æ•° $g_i$ã€‚ä¸ºæ­¤ï¼Œé‡‡å–ä¸€ä¸ªè¿‘ä¼¼çš„æ–¹æ³•ï¼ŒæŠŠå‡½æ•° $F_{iâˆ’1}$ ç†è§£æˆåœ¨æ‰€æœ‰æ ·æœ¬ä¸Šçš„ç¦»æ•£çš„å‡½æ•°å€¼ï¼Œå³ï¼š$[F_{i-1}(x_1),F_{i-1}(x_2),â€¦F_{i-1}(x_N)]$ï¼Œä¸éš¾ç†è§£ï¼Œè¿™æ˜¯ä¸€ä¸ª N ç»´å‘é‡ã€‚ç„¶åè®¡ç®—</p>
<script type="math/tex; mode=display">
\hat g_i(x_k)=-\frac{\partial L}{\partial F(x_k)}|_{F=F_{i-1}} \quad for\ k = 1,2,3,...,N</script><p>ä¸¥æ ¼æ¥è¯´ $\hat g_i(x_k) \quad for\ k = 1,2, â€¦ , N$ åªæ˜¯æè¿°äº† $g_i$ åœ¨æŸäº›ä¸ªåˆ«ç‚¹ä¸Šçš„å€¼ï¼Œå¹¶ä¸è¶³ä»¥è¡¨è¾¾ $g_i$ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°æ‹Ÿåˆçš„æ–¹æ³•ä» $\hat g_i(x_k) \quad for\ k = 1,2, â€¦ , N$ æ„é€  $g_i$ï¼Œè¿™æ ·æˆ‘ä»¬å°±é€šè¿‡è¿‘ä¼¼çš„æ–¹æ³•å¾—åˆ°äº†å‡½æ•°å¯¹å‡½æ•°çš„æ¢¯åº¦æ±‚å¯¼ã€‚ </p>
<h6 id="5-1-2-3-GBM-çš„è¿‡ç¨‹æ€»ç»“"><a href="#5-1-2-3-GBM-çš„è¿‡ç¨‹æ€»ç»“" class="headerlink" title="5.1.2.3 GBM çš„è¿‡ç¨‹æ€»ç»“"></a>5.1.2.3 GBM çš„è¿‡ç¨‹æ€»ç»“</h6><blockquote>
<p>1.é€‰æ‹©ä¸€ä¸ªèµ·å§‹å¸¸é‡å‡½æ•° $f_0$ï¼ˆå¸¸é‡å‡½æ•° $f_0$ é€šå¸¸å–æ ·æœ¬ç›®æ ‡å€¼çš„å‡å€¼ï¼Œå³ $f_0 = \frac{1}{N}\sum_{i=0}^Ny_i$.ï¼‰</p>
<p>2.å¯¹ $i=1,2,â€¦,K$ åˆ†åˆ«åšå¦‚ä¸‹è¿­ä»£ï¼š</p>
<p>a) è®¡ç®—ç¦»æ•£æ¢¯åº¦å€¼ $\hat g_i(x_j)=-\frac{\partial L}{\partial F(x_j)}|_{F=F_{i-1}}, \quad for\ j = 1,2,3,â€¦,N$<br>b) å¯¹ $\hat g_{i-1}(x_j) \quad for\ j = 1,2,3,â€¦,N$ åšå‡½æ•°æ‹Ÿåˆå¾—åˆ° $g_i-1$<br>c) é€šè¿‡ line search å¾—åˆ° $\gamma_{i-1}=\arg \min L(F_{i-1}+\gamma_{i-1}<em>g_{i-1})$<br>d) ä»¤ $F_i = F_{i-1}+\gamma_{i-1}</em>g_{i-1}$</p>
<p>3.ç›´åˆ° $|\hat g_{i-1}|$ è¶³å¤Ÿå°ï¼Œæˆ–è€…è¿­ä»£æ¬¡æ•°å®Œæ¯•</p>
</blockquote>
<h5 id="5-1-3-Gradient-Boosting-Decision-Tree"><a href="#5-1-3-Gradient-Boosting-Decision-Tree" class="headerlink" title="5.1.3 Gradient Boosting Decision Tree"></a>5.1.3 Gradient Boosting Decision Tree</h5><p>ä»¥ä¸Š Gradient Boosting Modeling çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜æ²¡æœ‰è¯´æ¸…æ¥šå¦‚ä½•é€šè¿‡ç¦»æ•£å€¼ $\hat g_{iâˆ’1}(x_j) \quad for\ j = 1,2,3,â€¦N$ æ„é€ æ‹Ÿåˆå‡½æ•° $g_{iâˆ’1}$ã€‚å‡½æ•°æ‹Ÿåˆæ˜¯ä¸ªæ¯”è¾ƒç†ŸçŸ¥çš„æ¦‚å¿µï¼Œæœ‰å¾ˆå¤šç°æˆçš„æ–¹æ³•ï¼Œä¸è¿‡æœ‰ä¸€ç§æ‹Ÿåˆæ–¹æ³•å¹¿ä¸ºåº”ç”¨ï¼Œé‚£å°±æ˜¯å†³ç­–æ ‘ Decision Treeã€‚GBDT æ˜¯ Gradient Boosting çš„ä¸€ç§å…·ä½“å®ä¾‹ï¼Œåªä¸è¿‡è¿™é‡Œçš„å¼±åˆ†ç±»å™¨æ˜¯å†³ç­–æ ‘ã€‚å¦‚æœä½ æ”¹ç”¨å…¶ä»–å¼±åˆ†ç±»å™¨ XYZï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸º Gradient Boosting XYZã€‚åªä¸è¿‡ Decision Tree å¾ˆå¥½ç”¨ï¼ŒGBDT æ‰å¦‚æ­¤å¼•äººæ³¨ç›®ã€‚ </p>
<p>GBDT æ— è®ºç”¨äºåˆ†ç±»è¿˜æ˜¯å›å½’ä¸€ç›´éƒ½æ˜¯ä½¿ç”¨çš„CART å›å½’æ ‘ã€‚å¯¹äºåˆ†ç±»æ ‘è€Œè¨€ï¼Œå…¶å€¼åŠ å‡æ— æ„ä¹‰ï¼ˆå¦‚æ€§åˆ«ï¼‰ï¼Œè€Œå¯¹äºå›å½’æ ‘è€Œè¨€ï¼Œå…¶å€¼åŠ å‡æ‰æ˜¯æœ‰æ„ä¹‰çš„ï¼ˆå¦‚è¯´å¹´é¾„ï¼‰ã€‚<strong>GBDT çš„æ ¸å¿ƒåœ¨äºç´¯åŠ æ‰€æœ‰æ ‘çš„ç»“æœä½œä¸ºæœ€ç»ˆç»“æœ</strong>ï¼Œæ‰€ä»¥ <strong><span style="color:red">GBDT ä¸­çš„æ ‘éƒ½æ˜¯å›å½’æ ‘</span></strong>ï¼Œä¸æ˜¯åˆ†ç±»æ ‘ï¼Œè¿™ä¸€ç‚¹ç›¸å½“é‡è¦ã€‚</p>
<p>å›å½’æ ‘åœ¨åˆ†ææ—¶ä¼šç©·ä¸¾æ¯ä¸€ä¸ªç‰¹å¾çš„æ¯ä¸ªé˜ˆå€¼ä»¥æ‰¾åˆ°æœ€å¥½çš„åˆ†å‰²ç‚¹ï¼Œè¡¡é‡æ ‡å‡†æ˜¯æœ€å°åŒ–å‡æ–¹è¯¯å·®ã€‚</p>
<h5 id="5-1-4-æ¢¯åº¦è¿­ä»£ï¼ˆGradient-Boostingï¼‰"><a href="#5-1-4-æ¢¯åº¦è¿­ä»£ï¼ˆGradient-Boostingï¼‰" class="headerlink" title="5.1.4 æ¢¯åº¦è¿­ä»£ï¼ˆGradient Boostingï¼‰"></a>5.1.4 æ¢¯åº¦è¿­ä»£ï¼ˆGradient Boostingï¼‰</h5><p>ä¸Šé¢è¯´åˆ° GBDT çš„æ ¸å¿ƒåœ¨äºç´¯åŠ æ‰€æœ‰æ ‘çš„ç»“æœä½œä¸ºæœ€ç»ˆç»“æœï¼Œ<strong>GBDT çš„æ¯ä¸€æ£µæ ‘éƒ½æ˜¯ä»¥ä¹‹å‰æ ‘å¾—åˆ°çš„æ®‹å·®æ¥æ›´æ–°ç›®æ ‡å€¼ï¼Œè¿™æ ·æ¯ä¸€æ£µæ ‘çš„å€¼åŠ èµ·æ¥å³ä¸º GBDT çš„é¢„æµ‹å€¼</strong>ã€‚</p>
<blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼šæ¯”å¦‚è¯´ A ç”¨æˆ·å¹´é¾„ 20 å²ï¼Œç¬¬ä¸€æ£µæ ‘é¢„æµ‹ 12 å²ï¼Œé‚£ä¹ˆæ®‹å·®å°±æ˜¯ 8ï¼Œç¬¬äºŒæ£µæ ‘ç”¨ 8 æ¥å­¦ä¹ ï¼Œå‡è®¾å…¶é¢„æµ‹ä¸º 5ï¼Œé‚£ä¹ˆå…¶æ®‹å·®å³ä¸º 3ï¼Œå¦‚æ­¤ç»§ç»­å­¦ä¹ å³å¯ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆGradient ä»ä½•ä½“ç°ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œå…¶æ®‹å·®å…¶å®æ˜¯æœ€å°å‡æ–¹æŸå¤±å‡½æ•°å…³äºé¢„æµ‹å€¼çš„åå‘æ¢¯åº¦ã€‚</p>
<script type="math/tex; mode=display">
F_i(x) = F_{i-1}(x) + (-\frac{\partial(\frac{1}{2}(y-F_{i-1}(x))^2)}{\partial F(x)} )</script><p><img src="/2020/07/25/å†³ç­–æ ‘/1595667123278.png" alt="1595667123278"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595667175530.png" alt="1595667175530"></p>
<p>GBDT çš„ Boosting ä¸åŒäº Adaboost çš„ Boostingï¼ŒGBDT çš„æ¯ä¸€æ­¥æ®‹å·®è®¡ç®—å…¶å®å˜ç›¸åœ°å¢å¤§äº†è¢«åˆ†é”™æ ·æœ¬çš„æƒé‡ï¼Œè€Œå¯¹äºåˆ†å¯¹æ ·æœ¬çš„æƒé‡è¶‹äº 0ï¼Œè¿™æ ·åé¢çš„æ ‘å°±èƒ½ä¸“æ³¨äºé‚£äº›è¢«åˆ†é”™çš„æ ·æœ¬ã€‚</p>
<hr>
<blockquote>
<p>å‚è€ƒ <a href="https://blog.csdn.net/sb19931201/article/details/52506157" target="_blank" rel="noopener">https://blog.csdn.net/sb19931201/article/details/52506157</a></p>
</blockquote>
<p><span id="jump_GBDT">GBDTç®—æ³•æ­¥éª¤ï¼š</span></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601189631302.png" alt="1601189631302"></p>
<p>ç®—æ³•ç¬¬ 1 æ­¥åˆå§‹åŒ– ï¼Œä¼°è®¡ä½¿æŸå¤±å‡½æ•°æå°åŒ–çš„å¸¸æ•°å€¼ï¼Œå®ƒæ˜¯åªæœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹çš„æ ‘ã€‚ç¬¬ 2 (a) æ­¥è®¡ç®—æŸå¤±å‡½æ•°çš„è´Ÿæ¢¯åº¦åœ¨å½“å‰æ¨¡å‹çš„å€¼ï¼Œå°†å®ƒä½œä¸ºæ®‹å·®çš„ä¼°è®¡ã€‚å¯¹äºå¹³æ–¹æŸå¤±å‡½æ•°ï¼Œå®ƒå°±æ˜¯é€šå¸¸æ‰€è¯´çš„æ®‹å·®ï¼›å¯¹äºä¸€èˆ¬æŸå¤±å‡½æ•°ï¼Œå®ƒå°±æ˜¯æ®‹å·®çš„è¿‘ä¼¼å€¼ã€‚ç¬¬ 2 (b) æ­¥ä¼°è®¡å›å½’æ ‘å¶ç»“ç‚¹åŒºåŸŸï¼Œä»¥æ‹Ÿåˆæ®‹å·®çš„è¿‘ä¼¼å€¼ã€‚ç¬¬ 2(c) æ­¥åˆ©ç”¨çº¿æ€§æœç´¢ä¼°è®¡å¶ç»“ç‚¹åŒºåŸŸçš„å€¼ï¼Œä½¿æŸå¤±å‡½æ•°æå°åŒ–ã€‚ç¬¬ 2(d) æ­¥æ›´æ–°å›å½’æ ‘ï¼Œç¬¬ 3 æ­¥å¾—åˆ°è¾“å‡ºçš„æœ€ç»ˆæ¨¡å‹ã€‚</p>
<hr>
<blockquote>
<p>ç»´åŸºç™¾ç§‘ <a href="https://en.wikipedia.org/wiki/Gradient_boosting" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Gradient_boosting</a></p>
</blockquote>
<p>In pseudocode, the generic gradient boosting method is:</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601190228458.png" alt="1601190228458"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601190289236.png" alt="1601190289236"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601190443051.png" alt="1601190443051"></p>
<h5 id="5-1-5-é¿å…è¿‡æ‹Ÿåˆ-ç¼©å‡ï¼ˆShrinkageï¼‰"><a href="#5-1-5-é¿å…è¿‡æ‹Ÿåˆ-ç¼©å‡ï¼ˆShrinkageï¼‰" class="headerlink" title="5.1.5 é¿å…è¿‡æ‹Ÿåˆ - ç¼©å‡ï¼ˆShrinkageï¼‰"></a>5.1.5 é¿å…è¿‡æ‹Ÿåˆ - ç¼©å‡ï¼ˆShrinkageï¼‰</h5><p>Shrinkage çš„æ€æƒ³è®¤ä¸ºï¼Œæ¯èµ°ä¸€å°æ­¥é€æ¸é€¼è¿‘ç»“æœçš„æ•ˆæœè¦æ¯”æ¯æ¬¡è¿ˆä¸€å¤§æ­¥å¾ˆå¿«é€¼è¿‘ç»“æœçš„æ–¹å¼æ›´å®¹æ˜“é¿å…è¿‡æ‹Ÿåˆã€‚å³å®ƒå¹¶ä¸æ˜¯å®Œå…¨ä¿¡ä»»æ¯ä¸€æ£µæ®‹å·®æ ‘ã€‚</p>
<p>æ›´æ–°è§„åˆ™ï¼š</p>
<script type="math/tex; mode=display">
F_m(x)=F_{m-1}(x)+\nu \cdot \gamma_m h_m(x), (0< v \leq 1)</script><p>Shrinkage ä¸ç›´æ¥ç”¨æ®‹å·®ä¿®å¤è¯¯å·®ï¼Œè€Œæ˜¯åªä¿®å¤ä¸€ç‚¹ç‚¹ï¼ŒæŠŠå¤§æ­¥åˆ‡æˆå°æ­¥ã€‚æœ¬è´¨ä¸Š Shrinkage ä¸ºæ¯æ£µæ ‘è®¾ç½®äº†ä¸€ä¸ª weightï¼Œç´¯åŠ æ—¶è¦ä¹˜ä»¥è¿™ä¸ª weightï¼Œå½“ weight é™ä½æ—¶ï¼ŒåŸºæ¨¡å‹æ•°ä¼šé…åˆå¢å¤§ã€‚</p>
<blockquote>
<p>Empirically it has been found that using small <a href="https://en.wikipedia.org/wiki/Learning_rate" target="_blank" rel="noopener">learning rates</a> (such as  $\nu$ &lt;0.1) yields dramatic improvements in modelsâ€™ generalization ability over gradient boosting without shrinking ($\nu$ =1). However, it comes at the price of increasing <a href="https://en.wikipedia.org/wiki/Computational_time" target="_blank" rel="noopener">computational time</a> both during training and <a href="https://en.wikipedia.org/wiki/Information_retrieval" target="_blank" rel="noopener">querying</a>: lower learning rate requires more iterations.</p>
<p>ï¼ˆæ¥è‡ª <a href="https://en.wikipedia.org/wiki/Gradient_boostingï¼‰" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Gradient_boostingï¼‰</a></p>
</blockquote>
<h5 id="5-1-6-å¯¹GBDTæŸå¤±å‡½æ•°çš„ç†è§£"><a href="#5-1-6-å¯¹GBDTæŸå¤±å‡½æ•°çš„ç†è§£" class="headerlink" title="5.1.6 å¯¹GBDTæŸå¤±å‡½æ•°çš„ç†è§£"></a>5.1.6 å¯¹GBDTæŸå¤±å‡½æ•°çš„ç†è§£</h5><p>è°ˆåˆ° GBDTï¼Œå¸¸å¬åˆ°ä¸€ç§ç®€å•çš„æè¿°æ–¹å¼ï¼šâ€œå…ˆæ„é€ ä¸€ä¸ª(å†³ç­–)æ ‘ï¼Œç„¶åä¸æ–­åœ¨å·²æœ‰æ¨¡å‹å’Œå®é™…æ ·æœ¬è¾“å‡ºçš„æ®‹å·®ä¸Šå†æ„é€ ä¸€é¢—æ ‘ï¼Œä¾æ¬¡è¿­ä»£â€ã€‚å…¶å®è¿™ä¸ªè¯´æ³•ä¸å…¨é¢ï¼Œå®ƒåªæ˜¯ GBDT çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œä¸ºäº†çœ‹æ¸…è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å¯¹æŸå¤±å‡½æ•°çš„é€‰æ‹©åšä¸€äº›è§£é‡Šã€‚ </p>
<p>ä»å¯¹ GBM çš„æè¿°é‡Œå¯ä»¥çœ‹åˆ° Gradient Boosting è¿‡ç¨‹å’Œå…·ä½“ç”¨ä»€ä¹ˆæ ·çš„å¼±åˆ†ç±»å™¨æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œå¯ä»¥ä»»æ„ç»„åˆï¼Œå› æ­¤è¿™é‡Œä¸å†åˆ»æ„å¼ºè°ƒç”¨å†³ç­–æ ‘æ¥æ„é€ å¼±åˆ†ç±»å™¨ï¼Œè½¬è€Œæˆ‘ä»¬æ¥ä»”ç»†çœ‹çœ‹å¼±åˆ†ç±»å™¨æ‹Ÿåˆçš„ç›®æ ‡å€¼ï¼Œå³æ¢¯åº¦$\hat g_{iâˆ’1}(x_j)$ã€‚</p>
<p>ä»¥<strong>å¹³æ–¹å·®æŸå¤±å‡½æ•°</strong>ä¸ºä¾‹</p>
<script type="math/tex; mode=display">
\frac{\partial L}{\partial F(x_k)}|_{F=F_{i-1}}=2(F_{i-1}(x_k)-y_k)</script><p> å¿½ç•¥å€æ•°2ï¼Œè¿™æ­£å¥½æ˜¯å½“å‰å·²ç»æ„é€ å¥½çš„å‡½æ•° $F_{i-1}$ åœ¨æ ·æœ¬ä¸Šå’Œç›®æ ‡å€¼ $y_k$ ä¹‹é—´çš„å·®å€¼ã€‚</p>
<p>å¯¹äº<strong>ç»å¯¹å·®å€¼æŸå¤±å‡½æ•°</strong>ï¼Œæ¢¯åº¦æ˜¯ä¸ªç¬¦å·å‡½æ•°ï¼š</p>
<script type="math/tex; mode=display">
Loss(F(x_i),y_i)=|F(x_i)-y_i|</script><script type="math/tex; mode=display">
\frac{\partial L}{\partial F(x_k)}|_{F=F_{i-1}}=sign(F_{i-1}(x_k)-y_k)</script><p>ç”±æ­¤å¯ä»¥çœ‹åˆ°ï¼Œ<strong>åªæœ‰å½“æŸå¤±å‡½æ•°ä¸ºå¹³æ–¹å·®å‡½æ•°æ—¶ï¼Œæ‰èƒ½è¯´ GBDT æ˜¯é€šè¿‡æ‹Ÿåˆæ®‹å·®æ¥æ„é€ å¼±åˆ†ç±»å™¨çš„</strong>ã€‚</p>
<h5 id="5-1-7-åˆ©ç”¨-GBDT-æ„å»ºç‰¹å¾ç»„åˆ"><a href="#5-1-7-åˆ©ç”¨-GBDT-æ„å»ºç‰¹å¾ç»„åˆ" class="headerlink" title="5.1.7 åˆ©ç”¨ GBDT æ„å»ºç‰¹å¾ç»„åˆ"></a>5.1.7 åˆ©ç”¨ GBDT æ„å»ºç‰¹å¾ç»„åˆ</h5><blockquote>
<p>å‚è€ƒ <a href="https://www.cnblogs.com/bnuvincent/p/9693190.html" target="_blank" rel="noopener">https://www.cnblogs.com/bnuvincent/p/9693190.html</a></p>
</blockquote>
<p> å…¶å®è¯´ GBDT èƒ½å¤Ÿæ„å»ºç‰¹å¾å¹¶éå¾ˆå‡†ç¡®ï¼ŒGBDT æœ¬èº«æ˜¯ä¸èƒ½äº§ç”Ÿç‰¹å¾çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ GBDT å»äº§ç”Ÿç‰¹å¾çš„ç»„åˆã€‚åœ¨CTRé¢„ä¼°ä¸­ï¼Œå·¥ä¸šç•Œä¸€èˆ¬ä¼šé‡‡ç”¨<a href="http://www.cnblogs.com/ModifyRong/p/7739955.html#3825035" target="_blank" rel="noopener">é€»è¾‘å›å½’</a>å»è¿›è¡Œå¤„ç†ï¼Œ<strong>é€»è¾‘å›å½’æœ¬èº«æ˜¯é€‚åˆå¤„ç†çº¿æ€§å¯åˆ†çš„æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®©é€»è¾‘å›å½’å¤„ç†éçº¿æ€§çš„æ•°æ®ï¼Œå…¶ä¸­ä¸€ç§æ–¹å¼ä¾¿æ˜¯ç»„åˆä¸åŒç‰¹å¾ï¼Œå¢å¼ºé€»è¾‘å›å½’å¯¹éçº¿æ€§åˆ†å¸ƒçš„æ‹Ÿåˆèƒ½åŠ›</strong>ã€‚</p>
<p>é•¿ä¹…ä»¥æ¥ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡äººå·¥çš„å…ˆéªŒçŸ¥è¯†æˆ–è€…å®éªŒæ¥è·å¾—æœ‰æ•ˆçš„ç»„åˆç‰¹å¾ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œä½¿ç”¨äººå·¥ç»éªŒçŸ¥è¯†æ¥ç»„åˆç‰¹å¾è¿‡äºè€—è´¹äººåŠ›ï¼Œé€ æˆäº†æœºå™¨å­¦ä¹ å½“ä¸­ä¸€ä¸ªå¾ˆå¥‡ç‰¹çš„ç°è±¡ï¼šæœ‰å¤šå°‘äººå·¥å°±æœ‰å¤šå°‘æ™ºèƒ½ã€‚å…³é”®æ˜¯è¿™æ ·é€šè¿‡äººå·¥å»ç»„åˆç‰¹å¾å¹¶ä¸ä¸€å®šèƒ½å¤Ÿæå‡æ¨¡å‹çš„æ•ˆæœã€‚æ‰€ä»¥æˆ‘ä»¬çš„ä»ä¸šè€…æˆ–è€…å­¦ç•Œä¸€ç›´éƒ½æœ‰ä¸€ä¸ªè¶‹åŠ¿ä¾¿æ˜¯é€šè¿‡ç®—æ³•è‡ªåŠ¨ã€é«˜æ•ˆçš„å¯»æ‰¾åˆ°æœ‰æ•ˆçš„ç‰¹å¾ç»„åˆã€‚Facebook åœ¨2014å¹´ å‘è¡¨çš„ä¸€ç¯‡è®ºæ–‡ä¾¿æ˜¯è¿™ç§å°è¯•ä¸‹çš„äº§ç‰©ï¼Œåˆ©<strong>ç”¨ GBDT å»äº§ç”Ÿæœ‰æ•ˆçš„ç‰¹å¾ç»„åˆï¼Œä»¥ä¾¿ç”¨äºé€»è¾‘å›å½’çš„è®­ç»ƒï¼Œæå‡æ¨¡å‹æœ€ç»ˆçš„æ•ˆæœ</strong>ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1606036242199.png" alt="1606036242199"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨ GBDT ç”Ÿæˆäº†ä¸¤æ£µæ ‘ï¼Œä¸¤æ£µæ ‘ä¸€å…±æœ‰äº”ä¸ªå¶å­èŠ‚ç‚¹ã€‚æˆ‘ä»¬å°†æ ·æœ¬ X è¾“å…¥åˆ°ä¸¤æ£µæ ‘å½“ä¸­å»ï¼Œæ ·æœ¬ X è½åœ¨äº†ç¬¬ä¸€æ£µæ ‘çš„ç¬¬äºŒä¸ªå¶å­èŠ‚ç‚¹ï¼Œç¬¬äºŒæ£µæ ‘çš„ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œäºæ˜¯æˆ‘ä»¬ä¾¿å¯ä»¥ä¾æ¬¡æ„å»ºä¸€ä¸ªäº”ç»´çš„ç‰¹å¾å‘é‡ï¼Œæ¯ä¸€ä¸ªç»´åº¦ä»£è¡¨ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ ·æœ¬è½åœ¨è¿™ä¸ªå¶å­èŠ‚ç‚¹ä¸Šé¢çš„è¯é‚£ä¹ˆå€¼ä¸º1ï¼Œæ²¡æœ‰è½åœ¨è¯¥å¶å­èŠ‚ç‚¹çš„è¯ï¼Œé‚£ä¹ˆå€¼ä¸º 0ã€‚äºæ˜¯å¯¹äºè¯¥æ ·æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªå‘é‡ [0,1,0,1,0] ä½œä¸ºè¯¥æ ·æœ¬çš„ç»„åˆç‰¹å¾ï¼Œå’ŒåŸæ¥çš„ç‰¹å¾ä¸€èµ·è¾“å…¥åˆ°é€»è¾‘å›å½’å½“ä¸­è¿›è¡Œè®­ç»ƒã€‚å®éªŒè¯æ˜è¿™æ ·ä¼šå¾—åˆ°æ¯”è¾ƒæ˜¾è‘—çš„æ•ˆæœæå‡ã€‚</p>
<p>ï¼ˆå…·ä½“ä¾‹å­è§åŸç½‘é¡µï¼‰</p>
<h5 id="5-1-8-GBDT-å¦‚ä½•ç”¨äºåˆ†ç±»"><a href="#5-1-8-GBDT-å¦‚ä½•ç”¨äºåˆ†ç±»" class="headerlink" title="5.1.8 GBDT å¦‚ä½•ç”¨äºåˆ†ç±»"></a>5.1.8 GBDT å¦‚ä½•ç”¨äºåˆ†ç±»</h5><blockquote>
<p>å‚è€ƒ <a href="https://www.cnblogs.com/bnuvincent/p/9693190.html" target="_blank" rel="noopener">https://www.cnblogs.com/bnuvincent/p/9693190.html</a></p>
</blockquote>
<p> é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼ŒGBDT æ— è®ºç”¨äºåˆ†ç±»è¿˜æ˜¯å›å½’ä¸€ç›´éƒ½æ˜¯ä½¿ç”¨çš„CART å›å½’æ ‘ã€‚è¿™é‡Œé¢çš„æ ¸å¿ƒæ˜¯å› ä¸º GBDT æ¯è½®çš„è®­ç»ƒæ˜¯åœ¨ä¸Šä¸€è½®è®­ç»ƒçš„æ®‹å·®åŸºç¡€ä¹‹ä¸Šè¿›è¡Œè®­ç»ƒçš„ã€‚è¿™é‡Œçš„æ®‹å·®å°±æ˜¯å½“å‰æ¨¡å‹çš„è´Ÿæ¢¯åº¦å€¼ ã€‚è¿™ä¸ªè¦æ±‚æ¯è½®è¿­ä»£çš„æ—¶å€™ï¼Œå¼±åˆ†ç±»å™¨çš„è¾“å‡ºçš„ç»“æœç›¸å‡æ˜¯æœ‰æ„ä¹‰çš„ã€‚æ®‹å·®ç›¸å‡æ˜¯æœ‰æ„ä¹‰çš„ã€‚å¦‚æœé€‰ç”¨çš„å¼±åˆ†ç±»å™¨æ˜¯åˆ†ç±»æ ‘ï¼Œç±»åˆ«ç›¸å‡æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p>
<p>å…·ä½“åˆ°åˆ†ç±»è¿™ä¸ªä»»åŠ¡ä¸Šé¢æ¥ï¼Œå‡è®¾æ ·æœ¬ $X$ æ€»å…±æœ‰ $K$ ç±»ã€‚æ¥äº†ä¸€ä¸ªæ ·æœ¬ $x$ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ GBDT æ¥åˆ¤æ–­ $x$ å±äºå“ªä¸€ç±»ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1606040985704.png" alt="1606040985704"></p>
<p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œæ˜¯é’ˆå¯¹æ ·æœ¬ $X$ æ¯ä¸ªå¯èƒ½çš„ç±»éƒ½è®­ç»ƒä¸€ä¸ªåˆ†ç±»å›å½’æ ‘ã€‚ä¸¾ä¾‹è¯´æ˜ï¼Œç›®å‰æ ·æœ¬æœ‰ä¸‰ç±»ï¼ˆ K = 3ï¼‰ã€‚æ ·æœ¬ $x$ å±äº ç¬¬äºŒç±»ï¼Œé‚£ä¹ˆé’ˆå¯¹è¯¥æ ·æœ¬ $x$ çš„åˆ†ç±»ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªä¸‰ç»´å‘é‡ [0,1,0] æ¥è¡¨ç¤ºã€‚</p>
<p>é’ˆå¯¹æ ·æœ¬æœ‰ä¸‰ç±»çš„æƒ…å†µï¼Œæˆ‘ä»¬å®è´¨ä¸Šæ˜¯åœ¨æ¯è½®è®­ç»ƒæ—¶ï¼ŒåŒæ—¶è®­ç»ƒä¸‰æ£µæ ‘ã€‚ç¬¬ä¸€æ£µæ ‘é’ˆå¯¹æ ·æœ¬ $x$ çš„ç¬¬ä¸€ç±»ï¼Œè¾“å…¥ä¸º $(x,0)$ã€‚ç¬¬äºŒæ£µæ ‘è¾“å…¥é’ˆå¯¹æ ·æœ¬ $x$ çš„ç¬¬äºŒç±»ï¼Œè¾“å…¥ä¸º $(x,1)$ã€‚ç¬¬ä¸‰æ£µæ ‘é’ˆå¯¹æ ·æœ¬ $x$ çš„ç¬¬ä¸‰ç±»ï¼Œè¾“å…¥ä¸º $(x, 0)$ã€‚</p>
<p>åœ¨è¿™é‡Œæ¯æ£µæ ‘çš„è®­ç»ƒè¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯ä¹‹å‰æåˆ°è¿‡çš„ CART TREE çš„ç”Ÿæˆè¿‡ç¨‹ã€‚å‚ç…§ä¹‹å‰çš„ç”Ÿæˆæ ‘çš„ç¨‹åºå¯ä»¥è§£å‡ºä¸‰æ£µæ ‘ï¼Œä»¥åŠä¸‰æ£µæ ‘å¯¹ $x$ ç±»åˆ«çš„é¢„æµ‹å€¼ $f_1(x),f_2(x),f_3(x)$ã€‚åœ¨æ­¤ç±»è®­ç»ƒä¸­ï¼Œæˆ‘ä»¬ä»¿ç…§å¤šåˆ†ç±»çš„é€»è¾‘å›å½’ ï¼Œä½¿ç”¨ softmax æ¥äº§ç”Ÿæ¦‚ç‡ï¼Œåˆ™å±äºç±»åˆ« 1 çš„æ¦‚ç‡ </p>
<script type="math/tex; mode=display">
p_1=\frac{exp(f_1(x))}{âˆ‘_{k=1}^3 exp(f_k(x))}</script><p>å¹¶ä¸”æˆ‘ä»¬å¯ä»¥é’ˆå¯¹ç±»åˆ« 1 æ±‚å‡ºæ®‹å·® $y_1(x)=0âˆ’p_1(x)$; ç±»åˆ« 2 æ±‚å‡ºæ®‹å·® $y_2(x)=1âˆ’p_2(x)$; ç±»åˆ« 3 æ±‚å‡ºæ®‹å·® $y_3(x)=0âˆ’p_3(x)$.</p>
<p>ç„¶åå¼€å§‹ç¬¬äºŒè½®è®­ç»ƒã€‚é’ˆå¯¹ç¬¬ä¸€ç±»è¾“å…¥ä¸º $(x,y_1(x))$, é’ˆå¯¹ç¬¬äºŒç±»è¾“å…¥ä¸º $(x,y_2(x))$, é’ˆå¯¹ç¬¬ä¸‰ç±»è¾“å…¥ä¸º $(x,y_3(x))$. ç»§ç»­è®­ç»ƒå‡ºä¸‰æ£µæ ‘ã€‚ä¸€ç›´è¿­ä»£ M è½®ï¼Œæ¯è½®æ„å»º 3 æ£µæ ‘ã€‚</p>
<p>æ‰€ä»¥å½“ K = 3 æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æœ‰ä¸‰ä¸ªå¼å­</p>
<script type="math/tex; mode=display">
F_{1M}(x)=âˆ‘_{m=1}^M C_{1m}I(x\in R_{1m})\\
F_{2M}(x)=âˆ‘_{m=1}^M C_{2m} I(x\in R_{2m})\\
F_{3M}(x)=âˆ‘_{m=1}^M C_{3m} I(x\in R_{3m})</script><p>å½“è®­ç»ƒå®Œæ¯•ä»¥åï¼Œæ–°æ¥ä¸€ä¸ªæ ·æœ¬ $x_1$ ï¼Œæˆ‘ä»¬éœ€è¦é¢„æµ‹è¯¥æ ·æœ¬çš„ç±»åˆ«çš„æ—¶å€™ï¼Œä¾¿å¯ä»¥ç”¨è¿™ä¸‰ä¸ªå¼å­äº§ç”Ÿä¸‰ä¸ªå€¼ï¼Œ$f1(x_1),f2(x_1),f3(x_1)$ã€‚æ ·æœ¬å±äºæŸä¸ªç±»åˆ« $c$ çš„æ¦‚ç‡ä¸º </p>
<script type="math/tex; mode=display">
p_c=\frac{exp(f_c(x_1))}{âˆ‘_{k=1}^3exp(f_k(x_1))}</script><p>(GBDT å¤šåˆ†ç±»ä¸¾ä¾‹è¯´æ˜ Iris æ•°æ®é›†è§åŸç½‘é¡µ.)</p>
<h5 id="5-1-9-GBDTæ€»ç»“"><a href="#5-1-9-GBDTæ€»ç»“" class="headerlink" title="5.1.9 GBDTæ€»ç»“"></a>5.1.9 GBDTæ€»ç»“</h5><blockquote>
<p> æ¥è‡ª <a href="https://blog.csdn.net/sb19931201/article/details/52506157" target="_blank" rel="noopener">https://blog.csdn.net/sb19931201/article/details/52506157</a> </p>
</blockquote>
<ol>
<li><p>Gradient Boostingï¼šæ¯ä¸€æ¬¡çš„è®¡ç®—æ˜¯ä¸ºäº†å‡å°‘ä¸Šä¸€æ¬¡çš„æ®‹å·®(residual)ï¼Œè€Œä¸ºäº†æ¶ˆé™¤æ®‹å·®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ®‹å·®å‡å°‘çš„æ¢¯åº¦(Gradient)æ–¹å‘ä¸Šå»ºç«‹ä¸€ä¸ªæ–°çš„æ¨¡å‹ã€‚æ‰€ä»¥è¯´ï¼Œåœ¨Gradient Boostä¸­ï¼Œæ¯ä¸ªæ–°çš„æ¨¡å‹çš„å»ºç«‹æ˜¯ä¸ºäº†ä½¿å¾—ä¹‹å‰æ¨¡å‹çš„æ®‹å·®å¾€æ¢¯åº¦æ–¹å‘å‡å°‘ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥å˜å‘ç†è§£æˆæ¯ä¸ªæ–°å»ºçš„æ¨¡å‹éƒ½ç»™äºˆä¸Šä¸€æ¨¡å‹çš„è¯¯å·®æ›´å¤šçš„å…³æ³¨ï¼‰ï¼Œä¸ä¼ ç»ŸBoostå¯¹æ­£ç¡®ã€é”™è¯¯çš„æ ·æœ¬è¿›è¡Œç›´æ¥åŠ æƒè¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p>
</li>
<li><p>Size of trees(J)ï¼šæ¨¡å‹å¶ç»“ç‚¹çš„æ•°é‡Jéœ€è¦æ ¹æ®ç°æœ‰æ•°æ®è°ƒæ•´ï¼Œå®ƒæ§åˆ¶ç€æ¨¡å‹å˜é‡ä¹‹é—´çš„ç›¸äº’ä½œç”¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½é€‰æ‹©Jçš„å¤§å°åœ¨4åˆ°8ä¹‹é—´ï¼ŒJ=2ä¸€èˆ¬ä¸èƒ½æ»¡è¶³éœ€è¦ï¼ŒJ&gt;10çš„æƒ…å†µä¹Ÿä¸å¤ªå¯èƒ½éœ€è¦ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601191484592.png" alt="1601191484592"></p>
</li>
</ol>
<h4 id="5-2-ä¼˜ç¼ºç‚¹"><a href="#5-2-ä¼˜ç¼ºç‚¹" class="headerlink" title="5.2 ä¼˜ç¼ºç‚¹"></a>5.2 ä¼˜ç¼ºç‚¹</h4><p><strong>ä¼˜ç‚¹</strong></p>
<ol>
<li>å¯ä»¥è‡ªåŠ¨è¿›è¡Œç‰¹å¾ç»„åˆï¼Œæ‹Ÿåˆéçº¿æ€§æ•°æ®ï¼›</li>
<li>å¯ä»¥çµæ´»å¤„ç†å„ç§ç±»å‹çš„æ•°æ®ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹</strong></p>
<ol>
<li>å¯¹å¼‚å¸¸ç‚¹æ•æ„Ÿã€‚</li>
</ol>
<p>å¦ï¼š</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595669502617.png" alt="1595669502617"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595669541744.png" alt="1595669541744"></p>
<h4 id="5-3-ä¸-Adaboost-çš„å¯¹æ¯”"><a href="#5-3-ä¸-Adaboost-çš„å¯¹æ¯”" class="headerlink" title="5.3 ä¸ Adaboost çš„å¯¹æ¯”"></a>5.3 ä¸ Adaboost çš„å¯¹æ¯”</h4><p>ç›¸åŒï¼š</p>
<ol>
<li>éƒ½æ˜¯ Boosting å®¶æ—æˆå‘˜ï¼Œä½¿ç”¨å¼±åˆ†ç±»å™¨ï¼›</li>
<li>éƒ½ä½¿ç”¨å‰å‘åˆ†å¸ƒç®—æ³•ï¼›</li>
</ol>
<p>ä¸åŒï¼š</p>
<ol>
<li>è¿­ä»£æ€è·¯ä¸åŒï¼šAdaboost æ˜¯é€šè¿‡æå‡é”™åˆ†æ•°æ®ç‚¹çš„æƒé‡æ¥å¼¥è¡¥æ¨¡å‹çš„ä¸è¶³ï¼ˆåˆ©ç”¨é”™åˆ†æ ·æœ¬ï¼‰ï¼Œè€Œ GBDT æ˜¯é€šè¿‡ç®—æ¢¯åº¦æ¥å¼¥è¡¥æ¨¡å‹çš„ä¸è¶³ï¼ˆåˆ©ç”¨æ®‹å·®ï¼‰ï¼›</li>
<li>æŸå¤±å‡½æ•°ä¸åŒï¼šAdaBoost é‡‡ç”¨çš„æ˜¯æŒ‡æ•°æŸå¤±ï¼ŒGBDT ä½¿ç”¨çš„æ˜¯ç»å¯¹æŸå¤±æˆ–è€… Huber æŸå¤±å‡½æ•°ï¼›</li>
</ol>
<h4 id="5-4-éšæœºæ£®æ—ä¸GBDTçš„æ¯”è¾ƒ"><a href="#5-4-éšæœºæ£®æ—ä¸GBDTçš„æ¯”è¾ƒ" class="headerlink" title="5.4 éšæœºæ£®æ—ä¸GBDTçš„æ¯”è¾ƒ"></a>5.4 éšæœºæ£®æ—ä¸GBDTçš„æ¯”è¾ƒ</h4><ul>
<li><p>éšæœºæ£®æ—é‡‡ç”¨çš„baggingæ€æƒ³ï¼ŒGBDTé‡‡ç”¨çš„boostingæ€æƒ³ï¼Œç»„æˆéšæœºæ£®æ—çš„æ ‘å¯ä»¥å¹¶è¡Œç”Ÿæˆï¼ŒGBDTåªèƒ½ä¸²è¡Œç”Ÿæˆï¼Œå› ä¸ºæ¯ä¸ªå­¦ä¹ å™¨æ˜¯åœ¨ä¹‹å‰çš„å­¦ä¹ å™¨çš„åŸºç¡€ä¸Šè¿›è¡Œè®­ç»ƒçš„</p>
</li>
<li><p>ç»„æˆéšæœºæ£®æ—çš„æ ‘å¯ä»¥æ˜¯åˆ†ç±»æ ‘ï¼Œä¹Ÿå¯ä»¥æ˜¯å›å½’æ ‘ï¼›è€ŒGBDTåªèƒ½ç”±å›å½’æ ‘ç»„æˆã€‚</p>
</li>
<li><p>å¯¹äºæœ€ç»ˆçš„è¾“å‡ºç»“æœè€Œè¨€ï¼Œéšæœºæ£®æ—é‡‡ç”¨å¤šæ•°æŠ•ç¥¨ç­‰ï¼›è€ŒGBDTåˆ™æ˜¯å°†æ‰€æœ‰ç»“æœç´¯åŠ èµ·æ¥ï¼Œæˆ–è€…åŠ æƒç´¯åŠ èµ·æ¥ã€‚</p>
</li>
<li><p>éšæœºæ£®æ—å¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿï¼›GBDTå¯¹å¼‚å¸¸å€¼éå¸¸æ•æ„Ÿã€‚</p>
</li>
<li><p>éšæœºæ£®æ—æ˜¯é€šè¿‡å‡å°‘æ¨¡å‹æ–¹å·®æé«˜æ€§èƒ½ï¼›GBDTæ˜¯é€šè¿‡å‡å°‘æ¨¡å‹åå·®æé«˜æ€§èƒ½ã€‚</p>
</li>
<li><p>Random Forest and Gradient Boosted Decision Trees have vastly different optimal max_depthï¼š Random Forest usually have <em>max_depth</em> â‰¥ 15, while for GBDT it is typically 4 â‰¤ <em>max_depth</em> â‰¤ 8.</p>
<p>(<a href="https://towardsdatascience.com/why-do-random-forest-and-gradient-boosted-decision-trees-have-vastly-different-optimal-max-depth-a64c2f63e127" target="_blank" rel="noopener">https://towardsdatascience.com/why-do-random-forest-and-gradient-boosted-decision-trees-have-vastly-different-optimal-max-depth-a64c2f63e127</a>)</p>
</li>
</ul>
<ul>
<li><p>When would one use Random Forests over Gradient Boosted Machines (GBMs)?</p>
<p>There are two main reasons why you would use Random Forests over Gradient Boosted Decision Trees, and they are both pretty related:</p>
<ol>
<li>RF are much easier to tune than GBM</li>
<li>RF are harder to overfit than GBM</li>
</ol>
<p>Related to (1), RF basically has only one hyperparameter to set: the number of features to randomly select at each node. However there is a rule-of-thumb to use the square root of the number of total features which works pretty well in most cases<a href="https://www.quora.com/When-would-one-use-Random-Forests-over-Gradient-Boosted-Machines-GBMs#pvZHI" target="_blank" rel="noopener">[1]</a>. On the other hand, GBMs have several hyperparameters that include the number of trees, the depth (or number of leaves), and the shrinkage (or learning rate).</p>
<p>And, regarding (2), while it is not true that RF do not overfit (as opposed as many are led to believe by Breimanâ€™s strong assertions<a href="https://www.quora.com/When-would-one-use-Random-Forests-over-Gradient-Boosted-Machines-GBMs#DVkbR" target="_blank" rel="noopener">[2]</a>), it is true that they are more robust to overfitting and require less tuning to avoid it.</p>
<p>éšæœºæ£®æ—æ›´ä¸å®¹æ˜“è¿‡æ‹Ÿåˆï¼Ÿ</p>
<blockquote>
<p>GBMs are more sensitive to overfitting if the data is noisy.<br>(<a href="https://medium.com/@aravanshad/gradient-boosting-versus-random-forest-cfa3fa8f0d80" target="_blank" rel="noopener">https://medium.com/@aravanshad/gradient-boosting-versus-random-forest-cfa3fa8f0d80</a>)</p>
</blockquote>
<p>In some sense, RF is a tree ensemble that is more â€œplugâ€™nâ€™playâ€ than GBM. However, it is generally true that a well-tuned GBM can outperform a RF.</p>
<p>Also, as <a href="https://www.quora.com/profile/Tianqi-Chen-1" target="_blank" rel="noopener">Tianqi Chen</a> mentioned, RF has traditionally been easier to parallelism. However, that is not a good reason anymore given there are efficient ways to do it with GBMs also.</p>
<p>(<a href="https://www.quora.com/When-would-one-use-Random-Forests-over-Gradient-Boosted-Machines-GBMs" target="_blank" rel="noopener">https://www.quora.com/When-would-one-use-Random-Forests-over-Gradient-Boosted-Machines-GBMs</a>)</p>
</li>
</ul>
<hr>
<h2 id="ç¯‡ä¸‰ï¼šXGBoost"><a href="#ç¯‡ä¸‰ï¼šXGBoost" class="headerlink" title="ç¯‡ä¸‰ï¼šXGBoost"></a>ç¯‡ä¸‰ï¼šXGBoost</h2><p><img src="/2020/07/25/å†³ç­–æ ‘/1595667573239.png" alt="1595667573239"></p>
<blockquote>
<p>æœ¬éƒ¨åˆ†å†…å®¹å‚è€ƒå…¬ä¼—å·Datawhale</p>
<p><a href="https://mp.weixin.qq.com/s/LoX987dypDg8jbeTJMpEPQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/LoX987dypDg8jbeTJMpEPQ</a></p>
<p>ä»¥åŠæ–‡ç« ï¼š</p>
<p><a href="https://mp.weixin.qq.com/s/qongHAx-X2SWrUxjk8tg0A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/qongHAx-X2SWrUxjk8tg0A</a></p>
<p>XGBooståŸè®ºæ–‡ï¼š</p>
<p><a href="https://arxiv.org/pdf/1603.02754.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1603.02754.pdf</a></p>
</blockquote>
<p>ï¼ˆæ³¨ï¼šä»¥ä¸‹å†…å®¹åªåŒ…å«XGBoostéƒ¨åˆ†ï¼ŒLightGBMéƒ¨åˆ†å¯è§åŸæ–‡é“¾æ¥ï¼‰</p>
<h3 id="XGBoost"><a href="#XGBoost" class="headerlink" title="XGBoost"></a>XGBoost</h3><p>XGBoost æ˜¯å¤§è§„æ¨¡å¹¶è¡Œ boosting tree çš„å·¥å…·ï¼Œå®ƒæ˜¯ç›®å‰æœ€å¿«æœ€å¥½çš„å¼€æº boosting tree å·¥å…·åŒ…ï¼Œæ¯”å¸¸è§çš„å·¥å…·åŒ…å¿« 10 å€ä»¥ä¸Šã€‚Xgboost å’Œ GBDT ä¸¤è€…éƒ½æ˜¯ boosting æ–¹æ³•ï¼Œé™¤äº†å·¥ç¨‹å®ç°ã€è§£å†³é—®é¢˜ä¸Šçš„ä¸€äº›å·®å¼‚å¤–ï¼Œæœ€å¤§çš„ä¸åŒå°±æ˜¯ç›®æ ‡å‡½æ•°çš„å®šä¹‰ã€‚</p>
<h4 id="1-1-æ•°å­¦åŸç†"><a href="#1-1-æ•°å­¦åŸç†" class="headerlink" title="1.1 æ•°å­¦åŸç†"></a>1.1 æ•°å­¦åŸç†</h4><h5 id="1-1-1-ç›®æ ‡å‡½æ•°"><a href="#1-1-1-ç›®æ ‡å‡½æ•°" class="headerlink" title="1.1.1 ç›®æ ‡å‡½æ•°"></a>1.1.1 ç›®æ ‡å‡½æ•°</h5><p><img src="/2020/07/25/å†³ç­–æ ‘/1595667719081.png" alt="1595667719081"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595667791401.png" alt="1595667791401"></p>
<p>ğŸ‘† <span style="color:blue">ä»¥åŸºæ¨¡å‹ä¸ºå›å½’æ ‘ä¸ºä¾‹ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å…¶å®å°±æ˜¯è®­ç»ƒä¸€ç¾¤å›å½’æ ‘ï¼Œä½¿è¿™ç¾¤æ ‘çš„é¢„æµ‹å€¼å°½é‡æ¥è¿‘çœŸå®å€¼ï¼Œå¹¶ä¸”æœ‰å°½å¯èƒ½å¼ºå¤§çš„æ³›åŒ–èƒ½åŠ›ã€‚å‰ä¸€é¡¹è¡¨ç¤ºçš„æ˜¯é¢„æµ‹è¯¯å·®ï¼Œåä¸€é¡¹è¡¨ç¤ºçš„æ˜¯æ ‘çš„å¤æ‚åº¦å‡½æ•°ï¼Œ$f_t$è¡¨ç¤ºç¬¬tæ£µæ ‘ï¼Œä¸€å…±æœ‰kæ£µæ ‘ã€‚</span></p>
<p>æˆ‘ä»¬è¦åšçš„å°±æ˜¯ä½¿<strong>é¢„æµ‹è¯¯å·®å°½é‡å°ï¼Œå¶å­èŠ‚ç‚¹æ•°å°½é‡å°‘ï¼Œé¢„æµ‹å€¼å°½é‡ä¸æç«¯</strong>ï¼ˆä»€ä¹ˆå«é¢„æµ‹å€¼å°½é‡ä¸æç«¯?ä¸¾ä¸ªæ —å­ï¼Œä¸€ä¸ªäººçš„çœŸå®å¹´é¾„æ˜¯4å²ï¼Œæœ‰ä¸¤ä¸ªæ¨¡å‹ï¼Œç¬¬ä¸€ä¸ªæ¨¡å‹çš„ç¬¬ä¸€æ£µå›å½’æ ‘é¢„æµ‹å€¼æ˜¯3å²ï¼Œç¬¬äºŒæ£µå›å½’æ ‘é¢„æµ‹å€¼æ˜¯1å²ï¼Œç¬¬äºŒä¸ªæ¨¡å‹çš„ç¬¬ä¸€æ£µå›å½’æ ‘é¢„æµ‹å€¼æ˜¯2å²ï¼Œç¬¬äºŒæ£µé¢„æµ‹å€¼ä¹Ÿæ˜¯2å²ï¼Œé‚£æˆ‘ä»¬æ›´å€¾å‘äºé€‰æ‹©ç¬¬äºŒä¸ªæ¨¡å‹ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ¨¡å‹å­¦ä¹ çš„å¤ªå¤šï¼Œæœ‰è¿‡æ‹Ÿåˆçš„é£é™©ï¼‰</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595667837751.png" alt="1595667837751"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595667861205.png" alt="1595667861205"></p>
<blockquote>
<script type="math/tex; mode=display">
g_i=\frac{\partial\ l(y_i,\hat{y_i}^{t-1})}{\partial\,\hat{y_i}^{t-1}}</script><script type="math/tex; mode=display">
h_i=\frac{\partial^2 l(y_i,\hat{y_i}^{t-1})}{\partial (\hat{y_i}^{t-1})^2}</script></blockquote>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595667888425.png" alt="1595667888425"></p>
<p>åˆå› ä¸ºæœ‰ </p>
<script type="math/tex; mode=display">
\sum_{i=1}^{t} \Omega(f_i)=\Omega(f_t)+\sum_{i=1}^{t-1}\Omega(f_i)</script><p>å¹¶ä¸”$\sum_{i=1}^{t-1}\Omega(f_i)$åœ¨å‰t-1æ£µæ ‘å·²çŸ¥ä¸‹ä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥ç›®æ ‡å‡½æ•°å¯å†™ä¸ºï¼š</p>
<script type="math/tex; mode=display">
Obj^{(t)}â‰ˆ\sum_{i=1}^{n}[g_if_t(x_i)+\frac{1}{2}h_if_t^2(x_i)]+\Omega(f_t)</script><p><span style="color:red">ï¼ˆæœ€ä¼˜åŒ–ç›®æ ‡å‡½æ•°ï¼Œå°±ç›¸å½“äºæ±‚è§£$f_{t}$ï¼‰</span></p>
<h5 id="1-1-2-åŸºäºå†³ç­–æ ‘çš„ç›®æ ‡å‡½æ•°"><a href="#1-1-2-åŸºäºå†³ç­–æ ‘çš„ç›®æ ‡å‡½æ•°" class="headerlink" title="1.1.2 åŸºäºå†³ç­–æ ‘çš„ç›®æ ‡å‡½æ•°"></a>1.1.2 åŸºäºå†³ç­–æ ‘çš„ç›®æ ‡å‡½æ•°</h5><p>æˆ‘ä»¬çŸ¥é“ <span style="color:red">Xgboost çš„åŸºæ¨¡å‹ä¸ä»…æ”¯æŒå†³ç­–æ ‘ï¼Œè¿˜æ”¯æŒçº¿æ€§æ¨¡å‹</span>ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç»åŸºäºå†³ç­–æ ‘çš„ç›®æ ‡å‡½æ•°ã€‚</p>
<p>ä¸‹é¢è®¨è®ºåŸºäºå†³ç­–æ ‘æ—¶ï¼Œ$\Omega(f_t)$ çš„è¡¨è¾¾å¼ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595667950419.png" alt="1595667950419"></p>
<p>(æ³¨ï¼šè¿™é‡Œçš„èŠ‚ç‚¹æƒé‡$w_{j}$æŒ‡çš„å°±æ˜¯è¯¥å¶å­èŠ‚ç‚¹çš„é¢„æµ‹å€¼)</p>
<hr>
<p>å¦ä¸€ç§æè¿°ï¼š</p>
<blockquote>
<p>å‚è€ƒ <a href="https://mp.weixin.qq.com/s/AAKPSIHk1iUqCeUibrORqQ" target="_blank" rel="noopener">æˆ‘çš„XGBoostå­¦ä¹ ç»å†åŠåŠ¨æ‰‹å®è·µ</a></p>
</blockquote>
<p>ç°åœ¨å®šä¹‰$\Omega(f_t)$ï¼šå‡è®¾æˆ‘ä»¬å¾…è®­ç»ƒçš„ç¬¬tæ£µæ ‘æœ‰Tä¸ªå¶å­ç»“ç‚¹ï¼Œå¶å­ç»“ç‚¹çš„è¾“å‡ºå‘é‡è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
[w_1,w_2,...,w_T]</script><p>å‡è®¾ $q(x):R^d \rightarrow \{1,2,3,â€¦,T\}$ è¡¨ç¤ºæ ·æœ¬åˆ°å¶å­ç»“ç‚¹çš„æ˜ å°„ï¼Œé‚£ä¹ˆ$f_t(x)=w_{q(x)},wâˆˆR^T$.é‚£ä¹ˆæˆ‘ä»¬å®šä¹‰ï¼š</p>
<script type="math/tex; mode=display">
\Omega(f_t)=\gamma T+\frac{1}{2}\lambda\sum_{j=1}^Tw_j^2</script><p>å…¶ä¸­$T$ä¸ºå¶å­ç»“ç‚¹æ•°ï¼Œ$w_j$ä¸ºå¶å­ç»“ç‚¹$j$çš„è¾“å‡ºï¼Œ$\gamma$ä¸ºç³»æ•°ã€‚</p>
<hr>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595667972342.png" alt="1595667972342"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595667995025.png" alt="1595667995025"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595668020156.png" alt="1595668020156"></p>
<hr>
<p>å¦ä¸€ç§æè¿°ï¼š</p>
<blockquote>
<p>å‚è€ƒ <a href="https://mp.weixin.qq.com/s/AAKPSIHk1iUqCeUibrORqQ" target="_blank" rel="noopener">æˆ‘çš„XGBoostå­¦ä¹ ç»å†åŠåŠ¨æ‰‹å®è·µ</a></p>
</blockquote>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595822346216.png" alt="1595822346216"></p>
<hr>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595668057942.png" alt="1595668057942"></p>
<h5 id="1-1-3-æœ€ä¼˜åˆ‡åˆ†ç‚¹åˆ’åˆ†ç®—æ³•"><a href="#1-1-3-æœ€ä¼˜åˆ‡åˆ†ç‚¹åˆ’åˆ†ç®—æ³•" class="headerlink" title="1.1.3 æœ€ä¼˜åˆ‡åˆ†ç‚¹åˆ’åˆ†ç®—æ³•"></a>1.1.3 æœ€ä¼˜åˆ‡åˆ†ç‚¹åˆ’åˆ†ç®—æ³•</h5><p>æˆ‘ä»¬åˆšåˆšçš„å‡è®¾å‰ææ˜¯å·²çŸ¥å‰t-1æ£µæ ‘ï¼Œç°åœ¨æˆ‘ä»¬è®¨è®ºæ€ä¹ˆç”Ÿæˆæ ‘ã€‚æ ¹æ®å†³ç­–æ ‘çš„ç”Ÿæˆç­–ç•¥ï¼Œåœ¨æ¯æ¬¡åˆ†è£‚èŠ‚ç‚¹çš„æ—¶å€™æˆ‘ä»¬éœ€è¦è€ƒè™‘èƒ½ä½¿å¾—æŸå¤±å‡½æ•°å‡å°æœ€å¿«çš„èŠ‚ç‚¹ï¼Œå°†åˆ†è£‚å‰æŸå¤±å‡½æ•°å‡å»åˆ†è£‚åæŸå¤±å‡½æ•°ç§°ä¹‹ä¸ºGainï¼š</p>
<p>å¯¹äºæŸä¸ªèŠ‚ç‚¹ï¼Œæœ‰</p>
<script type="math/tex; mode=display">
Gain = \frac{1}{2}[\frac{G_L^2}{H_L+\lambda}+\frac{G_R^2}{H_R+\lambda}-\frac{(G_L+G_R)^2}{H_L+H_R+\lambda}]-\gamma</script><p>å…¶ä¸­</p>
<script type="math/tex; mode=display">
G_L=\sum_{i\in I_L} g_i, \quad G_R = \sum_{i\in I_R}g_i, \quad H_L = \sum_{i\in I_L} h_i, \quad H_R=\sum_{i\in I_R}h_i</script><p>$I_L$ï¼Œ$I_R$ åˆ†åˆ«è¡¨ç¤ºåˆ†è£‚åå·¦å³å­èŠ‚ç‚¹çš„æ ·æœ¬é›†åˆï¼Œ $I=I_L \cup L_R$ .</p>
<p>Gainè¶Šå¤§è¶Šèƒ½è¯´æ˜åˆ†è£‚åç›®æ ‡å‡½æ•°å€¼å‡å°è¶Šå¤šã€‚</p>
<p>å¦‚ä½•æ‰¾åˆ°å¶å­çš„èŠ‚ç‚¹çš„æœ€ä¼˜åˆ‡åˆ†ç‚¹ï¼šXgboost æ”¯æŒä¸¤ç§åˆ†è£‚èŠ‚ç‚¹çš„æ–¹æ³•â€”â€”è´ªå¿ƒç®—æ³•å’Œè¿‘ä¼¼ç®—æ³•ã€‚</p>
<h6 id="1ï¼‰è´ªå¿ƒç®—æ³•-ç²¾ç¡®è´ªå¿ƒç®—æ³•-Basic-Exact-Greedy-Algorithm"><a href="#1ï¼‰è´ªå¿ƒç®—æ³•-ç²¾ç¡®è´ªå¿ƒç®—æ³•-Basic-Exact-Greedy-Algorithm" class="headerlink" title="1ï¼‰è´ªå¿ƒç®—æ³• (ç²¾ç¡®è´ªå¿ƒç®—æ³• Basic Exact Greedy Algorithm)"></a>1ï¼‰è´ªå¿ƒç®—æ³• (ç²¾ç¡®è´ªå¿ƒç®—æ³• Basic Exact Greedy Algorithm)</h6><p>åœ¨å†³ç­–æ ‘ï¼ˆCARTï¼‰é‡Œé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ç²¾ç¡®è´ªå¿ƒç®—æ³•ï¼Œä¹Ÿå°±æ˜¯å°†æ‰€æœ‰ç‰¹å¾çš„æ‰€æœ‰å–å€¼æ’åºï¼ˆè€—æ—¶è€—å†…å­˜å·¨å¤§ï¼‰ï¼Œç„¶åæ¯”è¾ƒæ¯ä¸€ä¸ªç‚¹çš„Giniï¼Œæ‰¾å‡ºå˜åŒ–æœ€å¤§çš„èŠ‚ç‚¹ã€‚å½“ç‰¹å¾æ˜¯è¿ç»­ç‰¹å¾æ—¶ï¼Œæˆ‘ä»¬å¯¹è¿ç»­å€¼ç¦»æ•£åŒ–ï¼Œå–ä¸¤ç‚¹çš„å¹³å‡å€¼ä¸ºåˆ†å‰²èŠ‚ç‚¹ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„æ’åºç®—æ³•éœ€è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´ï¼Œå› ä¸ºè¦éå†æ•´ä¸ªæ ·æœ¬æ‰€æœ‰ç‰¹å¾ï¼Œè€Œä¸”è¿˜è¦æ’åºã€‚</p>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li>ä»æ·±åº¦ä¸º 0 çš„æ ‘å¼€å§‹ï¼Œå¯¹æ¯ä¸ªå¶èŠ‚ç‚¹æšä¸¾æ‰€æœ‰çš„å¯ç”¨ç‰¹å¾ï¼›</li>
<li>é’ˆå¯¹æ¯ä¸ªç‰¹å¾ï¼ŒæŠŠå±äºè¯¥èŠ‚ç‚¹çš„è®­ç»ƒæ ·æœ¬æ ¹æ®è¯¥ç‰¹å¾å€¼è¿›è¡Œå‡åºæ’åˆ—ï¼Œé€šè¿‡çº¿æ€§æ‰«æçš„æ–¹å¼æ¥å†³å®šè¯¥ç‰¹å¾çš„æœ€ä½³åˆ†è£‚ç‚¹ï¼Œå¹¶è®°å½•è¯¥ç‰¹å¾çš„åˆ†è£‚æ”¶ç›Šï¼›</li>
<li>é€‰æ‹©æ”¶ç›Šæœ€å¤§çš„ç‰¹å¾ä½œä¸ºåˆ†è£‚ç‰¹å¾ï¼Œç”¨è¯¥ç‰¹å¾çš„æœ€ä½³åˆ†è£‚ç‚¹ä½œä¸ºåˆ†è£‚ä½ç½®ï¼Œåœ¨è¯¥èŠ‚ç‚¹ä¸Šåˆ†è£‚å‡ºå·¦å³ä¸¤ä¸ªæ–°çš„å¶èŠ‚ç‚¹ï¼Œå¹¶ä¸ºæ¯ä¸ªæ–°èŠ‚ç‚¹å…³è”å¯¹åº”çš„æ ·æœ¬é›†</li>
<li>å›åˆ°ç¬¬ 1 æ­¥ï¼Œé€’å½’æ‰§è¡Œåˆ°æ»¡è¶³ç‰¹å®šæ¡ä»¶ä¸ºæ­¢</li>
</ol>
<p>é‚£ä¹ˆå¦‚ä½•è®¡ç®—æ¯ä¸ªç‰¹å¾çš„åˆ†è£‚æ”¶ç›Šå‘¢ï¼Ÿ</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595668137245.png" alt="1595668137245"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595668154967.png" alt="1595668154967"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595823332714.png" alt="1595823332714"></p>
<h6 id="2ï¼‰è¿‘ä¼¼ç®—æ³•-Approximate-Algorithm"><a href="#2ï¼‰è¿‘ä¼¼ç®—æ³•-Approximate-Algorithm" class="headerlink" title="2ï¼‰è¿‘ä¼¼ç®—æ³• (Approximate Algorithm)"></a>2ï¼‰è¿‘ä¼¼ç®—æ³• (Approximate Algorithm)</h6><p>è´ªå©ªç®—æ³•å¯ä»¥å¾—åˆ°æœ€ä¼˜è§£ï¼Œä½†å½“æ•°æ®é‡å¤ªå¤§æ—¶åˆ™æ— æ³•è¯»å…¥å†…å­˜è¿›è¡Œè®¡ç®—ï¼Œè¿‘ä¼¼ç®—æ³•ä¸»è¦é’ˆå¯¹è´ªå©ªç®—æ³•è¿™ä¸€ç¼ºç‚¹ç»™å‡ºäº†è¿‘ä¼¼æœ€ä¼˜è§£ã€‚</p>
<p>å¯¹äºæ¯ä¸ªç‰¹å¾ï¼Œåªè€ƒå¯Ÿåˆ†ä½ç‚¹å¯ä»¥å‡å°‘è®¡ç®—å¤æ‚åº¦ã€‚</p>
<p>è¯¥ç®—æ³•ä¼šé¦–å…ˆæ ¹æ®ç‰¹å¾åˆ†å¸ƒçš„åˆ†ä½æ•°æå‡ºå€™é€‰åˆ’åˆ†ç‚¹ï¼Œç„¶åå°†è¿ç»­å‹ç‰¹å¾æ˜ å°„åˆ°ç”±è¿™äº›å€™é€‰ç‚¹åˆ’åˆ†çš„æ¡¶ä¸­ï¼Œç„¶åèšåˆç»Ÿè®¡ä¿¡æ¯æ‰¾åˆ°æ‰€æœ‰åŒºé—´çš„æœ€ä½³åˆ†è£‚ç‚¹ã€‚</p>
<hr>
<p>å¦ä¸€ç§æè¿°ï¼š</p>
<blockquote>
<p>å‚è€ƒ <a href="https://mp.weixin.qq.com/s/AAKPSIHk1iUqCeUibrORqQ" target="_blank" rel="noopener">æˆ‘çš„XGBoostå­¦ä¹ ç»å†åŠåŠ¨æ‰‹å®è·µ</a></p>
</blockquote>
<p>è¯¥ç®—æ³•é¦–å…ˆæ ¹æ®ç‰¹å¾åˆ†å¸ƒçš„ç™¾åˆ†ä½æ•°(percentiles)æå‡ºå€™é€‰åˆ†è£‚ç‚¹ï¼Œå°†è¿ç»­ç‰¹å¾æ˜ å°„åˆ°ç”±è¿™äº›å€™é€‰ç‚¹åˆ†å‰²çš„æ¡¶ä¸­ï¼Œæ±‡æ€»ç»Ÿè®¡ä¿¡æ¯å¹¶æ ¹æ®æ±‡æ€»çš„ä¿¡æ¯åœ¨ææ¡ˆä¸­æ‰¾åˆ°æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚å¯¹äºæŸä¸ªç‰¹å¾kï¼Œç®—æ³•é¦–å…ˆæ ¹æ®ç‰¹å¾åˆ†å¸ƒçš„åˆ†ä½æ•°æ‰¾åˆ°ç‰¹å¾åˆ‡å‰²ç‚¹çš„å€™é€‰é›†åˆ$S_k=\{S_{k_1},S_{k_2},â€¦,S_{k_l}\}$ , ç„¶åå°†ç‰¹å¾kçš„å€¼æ ¹æ®é›†åˆ$S_k$ åˆ’åˆ†åˆ°æ¡¶(bucket)ä¸­ï¼Œæ¥ç€å¯¹æ¯ä¸ªæ¡¶å†…çš„æ ·æœ¬ç»Ÿè®¡å€¼Gã€Hè¿›è¡Œç´¯åŠ ï¼Œæœ€ååœ¨è¿™äº›ç´¯è®¡çš„ç»Ÿè®¡é‡ä¸Šå¯»æ‰¾æœ€ä½³åˆ†è£‚ç‚¹ã€‚</p>
<hr>
<p>åœ¨æå‡ºå€™é€‰åˆ‡åˆ†ç‚¹æ—¶æœ‰ä¸¤ç§ç­–ç•¥ï¼š</p>
<ul>
<li>Globalï¼šå­¦ä¹ æ¯æ£µæ ‘å‰å°±æå‡ºå€™é€‰åˆ‡åˆ†ç‚¹ï¼Œå¹¶åœ¨æ¯æ¬¡åˆ†è£‚æ—¶éƒ½é‡‡ç”¨è¿™ç§åˆ†å‰²ï¼›</li>
<li>Localï¼šæ¯æ¬¡åˆ†è£‚å‰å°†é‡æ–°æå‡ºå€™é€‰åˆ‡åˆ†ç‚¹ã€‚</li>
</ul>
<p>ç›´è§‚ä¸Šæ¥çœ‹ï¼ŒLocal ç­–ç•¥éœ€è¦æ›´å¤šçš„è®¡ç®—æ­¥éª¤ï¼Œè€Œ Global ç­–ç•¥å› ä¸ºèŠ‚ç‚¹æ²¡æœ‰åˆ’åˆ†æ‰€ä»¥éœ€è¦æ›´å¤šçš„å€™é€‰ç‚¹ã€‚</p>
<p>ä¸‹å›¾ç»™å‡ºä¸åŒç§åˆ†è£‚ç­–ç•¥çš„ AUC å˜æ¢æ›²çº¿ï¼Œæ¨ªåæ ‡ä¸ºè¿­ä»£æ¬¡æ•°ï¼Œçºµåæ ‡ä¸ºæµ‹è¯•é›† AUCï¼Œeps ä¸ºè¿‘ä¼¼ç®—æ³•çš„ç²¾åº¦ï¼Œå…¶å€’æ•°ä¸ºæ¡¶çš„æ•°é‡ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595668243451.png" alt="1595668243451"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Global ç­–ç•¥åœ¨å€™é€‰ç‚¹æ•°å¤šæ—¶ï¼ˆeps å°ï¼‰å¯ä»¥å’Œ Local ç­–ç•¥åœ¨å€™é€‰ç‚¹å°‘æ—¶ï¼ˆeps å¤§ï¼‰å…·æœ‰ç›¸ä¼¼çš„ç²¾åº¦ã€‚æ­¤å¤–æˆ‘ä»¬è¿˜å‘ç°ï¼Œåœ¨ eps å–å€¼åˆç†çš„æƒ…å†µä¸‹ï¼Œåˆ†ä½æ•°ç­–ç•¥å¯ä»¥è·å¾—ä¸è´ªå©ªç®—æ³•ç›¸åŒçš„ç²¾åº¦ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595668320876.png" alt="1595668320876"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595668340241.png" alt="1595668340241"></p>
<h5 id="1-1-4-åŠ æƒåˆ†ä½æ•°ç¼©ç•¥å›¾ï¼ˆweighted-quantile-sketchï¼‰"><a href="#1-1-4-åŠ æƒåˆ†ä½æ•°ç¼©ç•¥å›¾ï¼ˆweighted-quantile-sketchï¼‰" class="headerlink" title="1.1.4 åŠ æƒåˆ†ä½æ•°ç¼©ç•¥å›¾ï¼ˆweighted quantile sketchï¼‰"></a>1.1.4 åŠ æƒåˆ†ä½æ•°ç¼©ç•¥å›¾ï¼ˆweighted quantile sketchï¼‰</h5><p><img src="/2020/07/25/å†³ç­–æ ‘/1595668403168.png" alt="1595668403168"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595668446774.png" alt="1595668446774"></p>
<h5 id="1-1-5-ç¨€ç–æ„ŸçŸ¥ç®—æ³•ï¼ˆç¼ºå¤±å€¼å¤„ç†ï¼‰"><a href="#1-1-5-ç¨€ç–æ„ŸçŸ¥ç®—æ³•ï¼ˆç¼ºå¤±å€¼å¤„ç†ï¼‰" class="headerlink" title="1.1.5 ç¨€ç–æ„ŸçŸ¥ç®—æ³•ï¼ˆç¼ºå¤±å€¼å¤„ç†ï¼‰"></a>1.1.5 ç¨€ç–æ„ŸçŸ¥ç®—æ³•ï¼ˆç¼ºå¤±å€¼å¤„ç†ï¼‰</h5><p>å®é™…åº”ç”¨ä¸­ï¼Œç¨€ç–æ•°æ®æ— æ³•é¿å…ï¼Œäº§ç”Ÿç¨€ç–æ•°æ®çš„åŸå› ï¼šï¼ˆ1ï¼‰æ•°æ®ç¼ºå¤±ï¼›ï¼ˆ2ï¼‰ç»Ÿè®¡ä¸Šçš„0ï¼›ï¼ˆ3ï¼‰ç‰¹å¾è¡¨ç¤ºä¸­çš„one-hotå½¢å¼ã€‚</p>
<p>åœ¨å†³ç­–æ ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä»‹ç» CART æ ‘åœ¨åº”å¯¹æ•°æ®ç¼ºå¤±æ—¶çš„åˆ†è£‚ç­–ç•¥ï¼ŒXGBoost ä¹Ÿç»™å‡ºäº†å…¶è§£å†³æ–¹æ¡ˆã€‚</p>
<p>XGBoost åœ¨æ„å»ºæ ‘çš„èŠ‚ç‚¹è¿‡ç¨‹ä¸­åªè€ƒè™‘éç¼ºå¤±å€¼çš„æ•°æ®éå†ï¼Œè€Œä¸ºæ¯ä¸ªèŠ‚ç‚¹å¢åŠ äº†ä¸€ä¸ªç¼ºçœæ–¹å‘ï¼Œå½“æ ·æœ¬ç›¸åº”çš„ç‰¹å¾å€¼ç¼ºå¤±æ—¶ï¼Œå¯ä»¥è¢«å½’ç±»åˆ°ç¼ºçœæ–¹å‘ä¸Šï¼Œæœ€ä¼˜çš„ç¼ºçœæ–¹å‘å¯ä»¥ä»æ•°æ®ä¸­å­¦åˆ°ã€‚è‡³äºå¦‚ä½•å­¦åˆ°ç¼ºçœå€¼çš„åˆ†æ”¯ï¼Œå…¶å®å¾ˆç®€å•ï¼Œåˆ†åˆ«æšä¸¾ç‰¹å¾ç¼ºçœçš„æ ·æœ¬å½’ä¸ºå·¦å³åˆ†æ”¯åçš„å¢ç›Šï¼Œé€‰æ‹©å¢ç›Šæœ€å¤§çš„æšä¸¾é¡¹å³ä¸ºæœ€ä¼˜ç¼ºçœæ–¹å‘ã€‚</p>
<blockquote>
<p>å‡è®¾æ ·æœ¬çš„ç¬¬iä¸ªç‰¹å¾ç¼ºå¤±ï¼Œæ— æ³•ä½¿ç”¨è¯¥ç‰¹å¾è¿›è¡Œæ ·æœ¬åˆ’åˆ†ï¼Œé‚£æˆ‘ä»¬å°±æŠŠç¼ºå¤±æ ·æœ¬é»˜è®¤çš„åˆ†åˆ°æŸä¸ªèŠ‚ç‚¹ï¼Œå…·ä½“åˆ†åˆ°å“ªä¸ªèŠ‚ç‚¹è¿˜è¦æ ¹æ®ç®—æ³•ï¼š</p>
<p>ç®—æ³•æ€æƒ³ï¼šåˆ†åˆ«å‡è®¾ç¼ºå¤±å±äºå·¦èŠ‚ç‚¹å’Œå³èŠ‚ç‚¹ï¼Œè€Œä¸”åªåœ¨ä¸ç¼ºå¤±çš„æ ·æœ¬ä¸Šè¿­ä»£ï¼Œåˆ†åˆ«è®¡ç®—æ ·æœ¬å±äºå·¦å­æ ‘å’Œå³å­æ ‘çš„å¢ç›Šï¼Œé€‰æ‹©å¢ç›Šæœ€å¤§çš„æ–¹å‘ä½œä¸ºç¼ºå¤±æ•°æ®çš„é»˜è®¤æ–¹å‘ã€‚</p>
</blockquote>
<p>åœ¨æ„å»ºæ ‘çš„è¿‡ç¨‹ä¸­éœ€è¦æšä¸¾ç‰¹å¾ç¼ºå¤±çš„æ ·æœ¬ï¼Œä¹ä¸€çœ‹è¯¥ç®—æ³•çš„è®¡ç®—é‡å¢åŠ äº†ä¸€å€ï¼Œä½†å…¶å®è¯¥ç®—æ³•åœ¨æ„å»ºæ ‘çš„è¿‡ç¨‹ä¸­åªè€ƒè™‘äº†ç‰¹å¾æœªç¼ºå¤±çš„æ ·æœ¬éå†ï¼Œè€Œç‰¹å¾å€¼ç¼ºå¤±çš„æ ·æœ¬æ— éœ€éå†åªéœ€ç›´æ¥åˆ†é…åˆ°å·¦å³èŠ‚ç‚¹ï¼Œæ•…ç®—æ³•æ‰€éœ€éå†çš„æ ·æœ¬é‡å‡å°‘ï¼Œä¸‹å›¾å¯ä»¥çœ‹åˆ°ç¨€ç–æ„ŸçŸ¥ç®—æ³•æ¯” basic ç®—æ³•é€Ÿåº¦å—äº†è¶…è¿‡ 50 å€ã€‚</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595668537184.png" alt="1595668537184"></p>
<h5 id="1-1-6-é¿å…è¿‡æ‹Ÿåˆ-æ­£åˆ™åŒ–ã€shrinkageä¸é‡‡æ ·æŠ€æœ¯"><a href="#1-1-6-é¿å…è¿‡æ‹Ÿåˆ-æ­£åˆ™åŒ–ã€shrinkageä¸é‡‡æ ·æŠ€æœ¯" class="headerlink" title="1.1.6 é¿å…è¿‡æ‹Ÿåˆ(æ­£åˆ™åŒ–ã€shrinkageä¸é‡‡æ ·æŠ€æœ¯)"></a>1.1.6 é¿å…è¿‡æ‹Ÿåˆ(æ­£åˆ™åŒ–ã€shrinkageä¸é‡‡æ ·æŠ€æœ¯)</h5><h6 id="1-æ­£åˆ™åŒ–"><a href="#1-æ­£åˆ™åŒ–" class="headerlink" title="1) æ­£åˆ™åŒ–"></a>1) æ­£åˆ™åŒ–</h6><p>ä¸€è¯´èµ·è¿‡æ‹Ÿåˆï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ååº”å°±æ˜¯æ­£åˆ™åŒ–ã€‚XGBoostä¹Ÿæ˜¯è¿™æ ·åšçš„ã€‚</p>
<p>æˆ‘ä»¬åœ¨loss_functioné‡Œçœ‹åˆ°äº†æ­£åˆ™åŒ–é¡¹ï¼ˆæ ‘çš„å¤æ‚åº¦å‡½æ•°ï¼‰ï¼Œæ­£åˆ™åŒ–çš„ç›®çš„å°±æ˜¯é˜²æ­¢è¿‡æ‹Ÿåˆã€‚æˆ‘ä»¬å†çœ‹çœ‹è¿™ä¸ªå‡½æ•°:</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjMAAACzCAIAAADzHwpkAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAFwiSURBVHhe7d15vJdVtT9wKnNGIBAR1HBIvSYOYdcUbqJeTG+iKQ4vSAU19abQIJqFN4GuoCJoKTmQKVpKKpiC9+dQlDmAGKiJA+CEA6AMoiIq5r3+3t/venh8+J6BAxzgHNyfPzb7Wc/aa6+99tpr7fU933P43CeffNIkISEhISGhweDz2b8JCQkJCQkNAykzJSQkJCQ0LKTMlJCQkJDQsJB+zpSQ0KARJ/Rzn/tcPBaRH95q3yYkNF6kmikhISEhoWEhZaaEhAYKJVFeFf1fGfmjTjwGUP75z39qEcvvExIaN9KneQkJDRTFs1lOTKWskxM/97nPfeELX4g+fP7zn1+6dOkGG2xQJCYkNFKkzJSQ0EARZ7PYFrNOFEkSkvbZZ5/deOON27Rpo/3iF79Yfp+Q0IiRPs1LSGjoiPQD/1tAEKOQko3efffdzTbb7MMPPywzJiQ0bqSaKSGhEWDx4sUbbLCB9LPRRhu9//772rlz53q87777Pv7446effnrzzTcfMWKEomqLLbbIxiQkNFqkmikhoUEjyiBV0cYbb/zRRx/985//VDAplZYsWdKqVSuVk1ebbrrpggUL0OMjvoSExo5UMyUkNAIojz73uc9deumlktPrr7+ubdmyJfqYMWO23HLL/fffX666/vrr58+f7zGGJCQ0XqSaKSGhQSPKoA022CCvmT7++GN5SIWE3rp1a4/xMydpKf+JVEJCo0aqmRISGiiKZzP6CxYs2GijjTbZZJMNN9xw0aJF8lO3bt3Q/+Vf/uULX/jC0KFDZalWrVqVRyQkNGKkG1ZCQqOBtPTFL36xlr9FlC6aCesHUmZKSGgckHU23XRTmUl5VJGB5CoUSH9AL2H9QMpMCQmNA/E1vKiZKjIToMTvNiUkrAdImSkhoYFCBsproOiU66JSTopXclV0iq8SEtYDpMyUkJCQUM+IiwJkzwkriZSZEhIaJUS9/1v258bjsaKTsG6RtmN1kDJTQsL6gPxjvYSGgEhIkD9GJ6GOSJkpIaFBI1JOVWSva0CExUBGSlhbKJo9+qrbjz76SAtLly7V9+rtt98OnoSqSJkpIWF9QF3SVcJaQyShPD/BhhtuKCfBRhttFPTmzZunvw1fE1JmSkholIjAlyOI2UOqkxoAYhfy7fjggw82KUNHcoqCaeONNy6xJlRBykwJCY0eEfuKnYaPcsReDtmL9QKxIreHeFTO5jWTDnqzZs3Q09+Grwnp7+YlJDRKLFy40OGNv5u3yy67fOELX7jkkkv+93//t/i3xouf7zWoz/oi7GirarV+fCb59NNPL1my5Iknnnjvvfd0rLRp06bSUt++fT/88MPNN9/8448/jv/pcdNNN83GJBSQaqaEhEYPgS9HRmrwyNQtIHvRyJH/6EhHbfT+++9/9NFH6iQZN/7vx/hYLyjBmVAVqWZKSGiUKP6t8a985St5zdS6detggGLsa1BxMFIRVNWwscfr55577q233nryyScVRl27dt1iiy1s09tvv33DDTdIUQ8//LD21ltvxWmn7NoXv/jFGJhQxDqomTKXLCB70XhQ1Dn6VVeRf8ScUHeUvGF5ZC9WhIy7OmQcjRbZMsrISFUQryoY6hjiy4IzZKQqyF6XkZFWFVUlrL7Mekd5oRkyUp2xdOlSlgcdw1VO//znPzfaaCOvJKFizVT1L/Mm5Firmam80dXsRE30QLytHRlrFUQ1rcNLtPHzRm02rIwSXw0wHLM7DmfyuHjx4vgPrfOBkX6K/WjDKTHHq4S6IGxVYTGPdUG1zEVi9BsXiprrcK0igp4jPHzjjTeOsAgxvFrEkGr777zzjpbDZ9OUEW+rojy0GngVH2oZGxTqoThKITCIEELQ4eOPP65F5lpD6KCtimCoHU888cTf//73SZMmPfjgg5tttpkM1LJly6ZNm5544ondu3d/6aWXpk2b9thjj02cOBGzJceohAo0gpqJT+fISLUiE7oMcTFxUN977z2dyDF1AU5+45rDt+LLnfwsqu/Pf/7zXjlpxKLnUSDuRxKYKxIinrpPlwBhxiKyFytCxr0McScIZByNFrEKK4K4J1U9C7HMaONtBPqwQ5mlRpSkF8DDEXl49lxAkT/6tYAEGYjC8ehEOESOUpydUC9eOSleYYijWhfhaxRxqHOsrEpvvvkms+sIOBbFAsKCIomQzTffXEDYoAymEEnS1x9qQiP4BgSvzVHhNEWEAzkM0UKcTB7gGHB6xdPbb7/tbX4kagdn4jrGcizgZ5yMEL6l41XoQ6BHE82dO3fevHl8jjsGc/K8tQkbER1bH531CRw4whnv4pmQvSgj93yIk4KN+xlSy5EpItgIMUobA2UR0FlZk1KDBKfAwXFRcy4cEB3HJ85F5KGceeHChWo1/BjqqHC9gwI5wpjZi5VE165d99tvv912223bbbfN449FWTWZe+655+677269ixYtisCSDUtYHusmM9XF+ewicBGwwTmCDhnfMpAJDhI/wJZfGBF10B2J+fPnO9J18QYD8ZvaAXPOjdKJ0x59MjGATjam/G0cs7/77rsSEh46VNxtE9YObJ+9yx7WF1gUj+JyfAzC28teX0Lej7fYMDNCHIFMxIqAn4fH1S2kQbwCorQVxGoRh8JxoEZkIK0Y7ezomAUdkRx9zG57Wm+bNm1aGr8uEOsKZKQ6gE3CLDkc+QULFrgEs6REa0U6sV59NhEZwhpxh4hRCRVYN9/N444Okqk5gVO0ZMkS9ymPXNOj1kZiaN68eX6xMiQ6OaWIojOR42jFumKKKVOmaCdMmEDyOeecw3XQ+YSOZBOjKlAcrhOf7MVvIaiN6EYUD+Ne3C5U+vOf/4z++OOPezzllFNatGjhDmhISVxCzWAlFrMdFZuYG7+OwGyb7Is+b7G54U72KBgaKdghby2Hj3E8rcUiHn744ejt27fnh7/61a/0I9gFf10MWJSPn+lIjs+dHMwvfelLWsfEK5NqoTyuhGK/CHpScsaMGdpHH33URhxyyCEUs9GGSELo2Eyqb8Y777xTEO/QoYO5DjjggBCylnH77bdHttB+85vfRKFqaKhP81g+PZ9++mntv/7rv6IwOyKUZZTA8WILJCEdKUoc8/jSSy9h3mWXXTBMnDhRu/feexMebxMqsA5qJpHIfoDtjKsEKDJsVVzWeK1TYV+5CIcI2FR0Hb4SiIFVYaC3+OM4aaU9RwUxPi5ACdehA+YYVYFwtdzhTL3FFltgJtZBohhpiNRG4aA0NwVOnfBXy/HWFCEhoSbYU/aMrY+d4hUsz8JMXXcYztpGQXxUgkJyaY7GDwYBi2IoC8yoy1A+IqVaxFvWy70ut0xdEFOQ45jYCA5sOs6Mwozh5xlrHUAUCZFKKSw5xV7oBwVyTqfSo/PSsmXLIK59WKATHa3HsjFK1oi1M6ygxLaURKRnOGr4bRFiC7tBBJlIPPITznfffbdZs2akeRt31pSWakI91ExVJdjRrFcDbEz8jvQDDzxguNuEdrfddjPQFmpfe+01Z2P77bfX9u7d28WtTZs22uIxq/acxNTY4nw+//zz3Gjw4MG87brrrps3b167du24FC/ZbLPN8NQSuYrrmjNnDpm/+93vyOReZM6ePZsCJ554ogrd3SfkkHzVVVc5Zq1ateJ5PXv2NKqW85xPsUKLrcdgBFayU2z74osvujcsWLBAGwGi7nDgeYvAoW+4UMh/tPYiGBopin743HPP8bGI+O+8845XRxxxBPquu+7KhS666CIuvdVWWzFFGDBqKc4ZTlitvxXlh+QnnniC3YYNG+aVWgf9sMMOE2e5tLbIX5PfEmLShx56yClTM6GcfPLJWlqV32cf94GjRMhll12m7dy5M4paJF6tZdx00010tkAWs958aRJS5KegSNuDBg166623fvGLX2C2wHxRAWzim463ecEEP/jBD1jVW3s0fPhwYcRll8euww8wGzLWRs1UdGUQuCUGvssD4q6EKKA4FeGv/KB05SgXKBwiLjK5Z9QO0kgm36g4RfyGMxH+xhtvOLTOs1NqOtK8zU9I7aCAW1KoZBThWn2+Fbp5jKxpavIJl3fNW5e09BkHW9lxG6HjJNu+8A32XCnEFmjBLtssAiuiRmOHRXEwC2SxWGnQw83Y0FuBD5jC8rm9fjh5zlwL4rgJl+KmsabzSHjE31qcuQKm1sbscRwEZecx3gZCH6/AeQz5dVFyDcFKA3wvI5VBc0QLsRyP8QVdt+SIMxSmf3AGGM1KQScvmLQk6ETE8Eqaty8pLdWE1aqZahmb75YTouVztsHtw17++te/trUXXHCBrVLH2KEDDzyw4mJLsrB+7733GnjcccehDBkyZP78+e4pJHAUo4qz59OFo5hUzuNJp5xyCqc/44wz8Ktsck5tsNV+2AhxYGj705/+lA9FhvvGN76hf9RRR+mrxhxmVV2uPx5tr169OO65556r7dSpE+cOf6WeSSNSWEUoU4Fqiesx3BhatGhx/PHHL1q06O9//zt79unTx67pMH7ELFU1o9l9/OWt+1z0VUW8iJGjRbnxxhtxvvrqq5KTytsO7rzzzqVpVhvE8oToUMCG6tvT2l1oNcFhOLyOqU109dVX87rwbfZBEeaizel0428CKNN973vfC5fT1uRvNWHcuHHNmjU79NBDyef/1Ojfvz81yMk4avZV20GlyZMnm/epp56iwH/+53+i6wQDeGV44JprrvFq3333Zdt1VTONGTOGSlxRe/DBB9Mq6Hknh9iFeNppp7HM1ltvXZWB7zGdcIeB9955550LFy6cPXu2lH/xxRdzVGaMDa06NiGwpg6V3XXtclQ4NOs7xnbCVjktjk2EEhsD8+bNa9269SuvvJKNLMMoPJzb8fNoiFbFQ4Jdt9kRhqqFV+bVMaM+n4g/61sBGpo9e6gODjlttfo6VIooSSYdIm5yNSq5QMUQaUkK1FmwYEFYwBJCeWCEyM35uhKANcKeselMqjyNrRGnUGyBsMXaNpQxGdZjnh70jWV2cvTFTQwExpkv/nnT1QSVTEoZanjkDBCv1hyswrqAceL4WCxiLL8IWjERBnrq60hO7GOgxxiVCa0byDHKem2BqVmYHBbOXtcKY2vnDJ0he25g4EKQPawkRDYBh91Yz46ww1tvvaVUYkbeO3fuXDxeMablr85E6zfqoWaqKiEcLlpv42zYsKFDhzpRqh+Pv/vd79S2aho8Iriyt+jKEZgUSaqTu+++2wE78cQTUX7+859rBw0aFKe0xFoD3ICc57vuuotP/Pd//zc5Ib94GGo/GBEQXeTj3i3k3Xbbbc4nryKzY8eObdq0GT16NJ4uXbqIp6R5G8npnnvuQcdv+SNHjiTN5TrEojMFO+QUqLtW6x+ef/55DqBO4g8TJkxgWyZyhvkAU4QnqIFY+IgjjmDerl272oJLLrlEKwSwZNQKBuJ89NFHDb/++uvx/+Y3v+E522yzTXme1YWt5HWqN/O6Kcf2kb+mP5AxaaQWfZ4TRMoA+3DycBiPFg4oHnGCM4KiU4u/1YQlS5bw+b59+1LgueeeY2Rnyr6oUzOOmuWY1CsVMK3+8Y9/eIyayWMwQOivo21oNdNBBx1Eq1AvUOznNZO2Xbt2GXUZDJeE5CRmF39EthdeeIENv//979tEQ9DVTywpUMRNIhuZUMAaNIpDa4c4HNPr2yqt/QB0ju68cURbZcPEpmxYGUbF7sbBs4WIaiYFEGIFcwUEL2N1zMsJlC+rFjuENqoKeVrXzzjnoXzc8R11XqjgsxYLMaRYM2npGWwlcWWDkIbTgS+GiUYE661A9mI14OLCSkxqrwl0FZBjmMi+e2R2Bo/Aik0qYkbEiH3oOujMbrh+tOzPuwyvx5qJP9CBWPrwqNLiy/+1QfZ6jYHLsUbYweogYpk2rKTPDpRB8VaHBeJxdfwt0qGQal4eHj9fITl7XStCw/UejJz1CmAuMYq32IuddtrJxnnkJ7aAWcQEW4ZiUwz3NhuWsDxWq2YKVCshiPmrhx9+mHP/x3/8h2PWuXPnli1b/vKXv7RP8dsSIpEDUDw8TpRHgV4yiE9mTj/9dGnJjVhguvXWW72N3+TIkc9FlP0++OCDRav4zs9XvvIVdEcrGCDOc+1wCM01ffp0xfi3v/1tAfR//ud/+NM+++zDsSjvzFNPJHXP4o7hahEj6M8v/+Vf/oUOF198MWnWrvWK2Di3RR1q6jcohIW1VTVcHZ1vvPFGW7bDDjuwNjsHMRcY9nzwwQf1v/Wtb+lfccUViO7y+jrBBhzMFrzxxhvMO2rUKPb/4Q9/WLwZrD644vnnn29SFRtPRtGvR/nVIsxeFUWbF3kq+iv0t5qAx46MHTtWVD322GN5+L333iuwHnPMMTmDNp+uqswpU6aY/cknn9Q2xpop6FXX9fOf/5xJzzjjDDpvu+22xUWBQCH+qPJ59eTJk0WAww47TMsVvVU/8Rx04Uj1T3jsTkIF1pJRhAkXLgHdtkUesp22SgT3KLhXHO94tHm2TWsvZSlOI/rwBhRnhhMTkiMGAk7TgY6DBPh5Rva6zjC1rGkimscHktttt50lUBgxvkVmIeHKQDds5sVjam8jY5kakTQIsSG/MSJWWkT2YiWRDS6D3Zo3bz5//nwWzl4v+0Fj2DP8hEltPX6PLGwLGD/jLsMtgakNwUMUO+Ovxzvp66+/TqW4lPBPKpFPvex1Q8Xq+JvFWqkTFPZkcDVoedM+Rcb6mUQsv8IIbAUuMTyWQzKaizg/4TDyEP988803xRCj+E+jjgZrFGvJLrfffvukSZMcbLfa3XbbzeXIljRr1syjDbN/IkhxgyMSIdpXJYtXe+21l1Px5S9/2eX6/vvvdyXxFuw0RMyKse5oOTp06OAK5miZmlvkCM7aQQczTp061QWnffv2W221VZRH0pXWo3gaGVSWcoYjA5mI5m3btrU6d/xTTjnlpptuuvvuuxV8XoXkQKZKGRmpMWA1tY0DCXYtdnDChAmuq6ql+HWWAEuybdhT6po2bdqLL75oamnJ/cB2RB4qGy8DTpeVuXPnKpvYv3Xr1jaoHj9tM11ckuw1NehPPTNmr9c7WBpX32mnnQ499FDH0Jb9+c9/vu6668oHrpT+UbSQDagCm7LKkbcWsQ0H1So5c+ZMl5hTTz31rLPOEqZeeumlq6666tJLL73llluGDx8+aNCgyy+/nAE5J//h/9mwhOVR/5mp7KuVGyYDgSMd4cPBFjK4O9/FzH11MtYycOLHBu4XgpTwJB/YyDlz5shPkoGBedlkSH4G7Lfc4E6tUy6Z3hVTyAnOQHAGMlIZGamM0Na8JPMkrXkRaY5OfjmulhxLEtKRyehDbfErFIuaSQylidZNKiQ3HMSqi8herDFEtGIuJipnqFJ0YyWvog0wOB4U9mS6uKkEpy0AlCI/2GUWJhbCGQiPDaoXuAUr7Ox7+KEpgA9nr9c7MKY0zPhOUL7YVq1ahYWBEexmxcldfdg17Uq5YgypCSsUlTPULqeOYChyhCkey4ZxYY0PitiK0bzyyIHN61U2LGF51ENmCu8E/XyPdSAiRURk/m1XPHJumQZRfLEx0dfJpJRhrLda22ysGKRGkQBs9pe+9KVHH33UrQRbCMcWLiWcIT700EMzZsz4Xhnbb7+9PIHHwJJay1BSbtnlvUih4eLyF8GVRyAYEeXiQ84+++xDGRmOKAz6kpZHuunTRN9EobCOEPa1r31tjz32uO++++655x5sij+veCQeE5WnzVBedIaMtOZhvXmbo2yG6k9yrl50rIKJdCxNyGa3BWU4eB4J8TZEqRcjgrNJ2NzmGmUTH3/88ZNOOqlnz56ukC0Lf5mGcC6BU4fk+A9vOnbsuOeeezrVfMC8DO5tDqNYVYentWnTZueddzZFPZ58GvIlPvbmm29STMq06RaSvV5jKBu7GmSvy8hItSJjrTNsmcUqT13IfvKTn5x77rmjRo361a9+9dprr82ePZtAJ7fsLNUgJOgwVPTrjpAQiPBtH9E5lf3Vvvzyy8RyMwcQJXjsBSIEhadp9Y1F9FYHxeFVUgMK5NPhtF4dFDubm2sV7Pbcc88JQf369fvOd74jgKg7KcxovH3evHk77LCDsMCBFaOUzMYkVEE9ZKYKxE7r8AN7r+UTNlvIiDY8hrsEf11AYDicekXQFw4MJwo9kgFgc5DMaNflAHPhyROSm0tZrwxBDGSkMgQ10cco/C6M/FIcpL9XhFPARCRHvPOWVuKjE5JTyiJLoJj7ZpRTxmrpFspjc6ozvnWKWHUR2Ys6QL5haufZuiKpGG5dTBR2YEOr1lFkxE8KvcXMGjjZQYgX7hkQJxsWrUcInthEtrUvcl4YmUmNCjZDcuB31Fk4+hA8awIUsxATmS4jrV+wNJsVy4wbmB1Et15EJ8IGxW2j3hGRQWsH7XhEDy2HMSOP4mz8gc84X9SLA8Wp7D4fM+Tt8l84Q9cnBE9sk4VgsBByUMjUMdBacIJR2PCX9ChjFbzIFGTSWbDS5gjldagdq8sGJFSHevhuXg6icmk6EaHCLf7rv/7L4/Dhw+3ZeeedJ/r37ds3Qn/wVyCXA/KBxwsvvJCokSNHcqATTzxRO2jQoMhV6OSQzyO13bt3b926dfzlq+9+97sk8BUthyjLKyHmLc4SfZcdnUsvvdStyu2GNAHRMRCC9WUpOk+dOpX+VsTJDjnkEKsLd8cQoiCkPfPMM1rFFp7Jkyc7CR06dKAzTaIt864zUDIQ1ijuRbFfBOast4znH//4h0hxwQUXtG3bdvDgwYggefTq1UvhYq8lMAxu2e3atXOFtF8Yxo0bJ3Dos+2BBx6oKoqvdxeDAqOJNQpW5j322GO96tKlCwXsjkDJetqq+jjzeadMLiW5oKwmKC+yWKP2sssus5uRerlixtEwULRJsV9EXQzC7DyckW3E+PHjeaw91TqD9s6OeJUbGYoyo79q383be++9zRuG9YoafICH3HTTTZKlM45HQezEHXPMMdxGSMEJNhqzgfF3FpxN7ZFHHonCzbwdMmSIsX/7298c5+uuu86FyYmmAAZC7r77bm+5rja+SWv2UDj0zJF/N88oBSXNiwyGACIwVEYtA4VKRvEcjyEcKuQnQP3XTDk4cbR2mnPbSy3YGxSbFPuRb09NCP+wnUTFNcR+G45IWvAQruVheDicmgkFD08NhnCFFSLinbFbbbVVyI8PA/XpTLg+BWJeium4ChHubUjIQQhpxZoJCKe8URUuWwtWaJ96Qd3PRs7pBqplDVFDWpKB7A4Kiy1atMjlQLB48cUX1TeMs/XWW7NeHHvWsHzBwgaJNRBpKQQWwVB4yJEVyGc9RELiLTBODpJZmNnrvpZVQAjXWrhOON56Cd5rjazKw1leJkBEgTh9FR9GoWS9+oPZHa6ogdxsTMHZtGKI2bfddlsHnJ52AScHoypvCX56hsNAbBMHM9xCsPFSQiIWcTPEOPgG5gvRyft1R2RHahTPODkm0uHtKS3VBfVZM0FpJwsC8/7NN9/Mb/r162fbTjjhBPQRI0aIUO4s3MLexPYUx+bgPVzt/PPP50+33HILyu9+9zsb3K1bN84XwSs8z8WczPgBw/333+9Vp06dvNIpS1qxN0hp7lNz587VqnLM0rVrV63ZzaVWI5nb8S0SuHIoYGmRLDMpZfnmmjlzpmAdt6p7770Xs1t/aanlt9qMu1bgtHDz3nbbbRmp/rD77rtbxZ577ukghXHqqBW4C7MSaxtiL8hp37699b7yyiutWrW65JJLrPeqq65SdNp3qcVeM92SJUsEiLPPPlsyUzdrY++AHMYMNcKYXv3hD39AOf300x1sd2EtaQxuU9jEFOWhJStV1TyIufzVRNzW3bvJvOiii6iaz1h16gaCMOYqIAZq43C9/vrrPFwlof3KV76iVTWyAPvnFg4jFNtVq5n22WcfWUe+0c6ZM8cs8VnLr371K/vuTNn3/fbbz0AnlAIdOnSggIHk/P3vf9fuv//+2nvuuceo+A057qc/YMAAvnfrrbdixskbeX4oQBl0c3FpjwcddFBoGMuPBeZYYc2U9ZbZoXbUhecziPo5tCsE6/MhLmXb3Fa4nUsKCIj22AbzwuKOFuGVoBahX4siCBpCprFGxdZ6y+HQCedhOoIgfvNyQVOjlOXVBmPlTt5JFMlOAuEx3B2fNApTBrwNNdBNUfW+H8vJlQwhHiFe1RE5c4ytX1CbVkwXU9QRYWqrVhJZnQ2SO5lCYYTISmyITrjiSccQhjWdtcgo+lIXnm222cYoZgywbQiHGGUfDfFKhwERtehERettwOOqYWXHxtT0yR+Dsr4iNsJR1Vo1b3EoBHp2U3/ErqEDztUxhbGxF+TwCg7GVfiV6ZTU9n3evHk8Klo+ho3j0cQQDhNTcypalcSV+y4T0cfgNonfQLOQRkjOaS4tgUVniL511bKo9Xvr1y1WLkquELm06OSP7lzaHj168AnRipdcf/313OWrX/2qWBYhCapVxqWbOx577LH8lWO1bt3aPXr+/Pm77LILvyEEnQSSX3vtNS2ZiH/6058Qv/71r+NxfsLv0UNmTS6Fh0M3a9aM4z766KNOBZ2148ePJ6Rz585xUMkJaabg1qYIYllGCeR7fP7555s3b+5W5Tz/8Y9/RDnqqKNCk7r7NOaomZ566qmMVH9o164drdyCtbG0FQInZdj5sMMOa9OmzZlnnql/yCGHvPrqq1YaUQPbHXfcIQMdfvjhjDljxgw23G677dDVu1bEYux20kknGWv7yoJLRqODV6FJmCj+pnj8z0N33XWXUeozfduhLepc1aRFSk0Gr/teRM2kbjNk6NChRtVxIBiS9WrVJOvVzLOyKMpcKcTAfLggTiVVglbtzgcmTZrkfrbDDjugBOyFNvj1jV2pv5vn0Wn1qI6Xk3T4jJpbFe6m6BypY9g/Kqfbb79dmrn//vtzvwo4ZeT07NlT++abb3JUdyDyeYv+rFmzBB/1lpjzzDPPUNLYcEV9MnGai5yDDz44VxURoh+Imkkdb10k5JyrhgrhCYE6BaPVB+vzBqHEXnI1ZVO07mL2mGeAVxl3md+j1q4Xaya37LgWGRhvtQK3V/rkk0NsyESPskzs45dF+bVAPMUZKYffo4TaYi6xKBEQCcRDN57tFeYYHqjq1kYZor/Kfhyi6heR8+pomRzWwg4tWrTQzpkzx9Xhrbfeiu/LRW0U2SWMr6a0ffoxixgBsfUeMQhDAVvs0cDSHMvAXEFkYWJNjWgKbQXnqmHVtqNsvPUnoFhLhR0qVhfHLY6w1kbYxChBQN8eraZBDA8PIUqHZ5JsCj4WNVM4gEcM3qKESoghASI4hCY68pBOnE1KxrXJSo3Vx1was8wHivrnFJrU4iHFIQn1i1UPlLUjxObCuQKfcF92gz7++OM53IQJE8TEAw88MHaXhwVnIEI/Z+IZOPmWGzqPvPbaa8W+4447Lpwm4y5P5NHdXGevvfbirEahxP/nH/C4Qk8qWuPGG280o5uRdtq0aYarCbJ3yztl9Itj9UG8NqpLly70v/DCC5csWXLyySejr1CNInJ+naBUoO7SQkKxZWd7Ie5ExCkxlVG7zLFjx7JwfHZ/6qmnolhmvAIyhQ/bLTT85je/MdGee+4pEOy7776S2dlnn+1S8pOf/MSMyt8IN9nI5WGInHfeeeex/80330yOW7Di2/5GlWxsXdZe5KngJxN4murWEggMSva6DMsxl1aZbl2jR4+meXyzVGgL02WsyyO8t2PHjthk4oy6PHJ9YtJ86viM4bHHHtPSqkxbMUJasS2uJS5GdkGb/73wIhtt2Xzz8t/Lp7DWwmPUiBEjbNPDDz/s7d13360/ePBgbe/evVnGSmN4SWIZiGRGzfTEE09ov//972tjOtCH6GO++uqrSYuT+7WvfS3o8MADD3BLOtNk4cKFWhHDHUitxvKXXXYZCjn2hUtQfsiQId5OnjxZO3z4cE5oIVrz8nP5zKJ4IMkqJK3VxRq1Y8aMQYkLVvH/ZwoUH/OaydTxd/OKb/N1QYWQhLpjTdVM4Qo8JsA5ELVvvPGGjn3lCnIMCl+MI1EeV4Kxdhc9HufNmxdftsEc1U/Qi/AWf9EnqmJlvcR5M6NV8ObQk3yaZ69rRa6JSTMTlFG7hmsfRTvXBRF9vlSGgQodpx3iLYSRIzAxIAZsyibZSOXEmChSmmjOAXDWMrtIJJMRIj95JNDs8V9axC6s7IZWi9gRfkWl2GuzBKQE8CoQzOj6WruJYlSZt3rg5K519JkiHAeGkgspYHgdEWPzqYF6OYRydyMbYZnBCeTTEH+cIG91TI1uv0hwSOP7Pni22morErxt1aqVa4d9N6kNih87BTK5Kw9TxPA4KQF5BXTMRTe7YxU8R/4I1/LKKH0M6JbJ2aid//zJ6mK98dYsZcOUGHCWJl7mA17FY6C0mGX0ilc50IMnod6xlizrpLn7qCE4d48ePbiFWxviFVdcEQnAHnOjYKaSR07veHC+AQMGcK+pU6fqq2NUXRgMqap5/P5QTTVTXVZa5HH/0l5zzTVa9z6ur2bi3ISjFJ01+sWxcdTFVn01k8eomU488cTiwJVCTfrXXWBIKLYUc2KZ1+5UXVFVxI4899xzER2cealCaxNzBi1pDj+e+P2wmTNnKndUD6LMrFmz7F38P8UGRmgrD62E3SRht912ExyPOOIItxN7wWe+8pWvkEnDWMIKUcu6SGABe/rXv/5VjLNBVCrWjog0pIZVx9fW77vvPvofcsghRnm03jwlVKBly5ZEde7cGT9k1Br0oUkgHh955BGrHjp0qJjLaEFcIaxFG0KKbSDqsEGDBmnzv+edK2AhVhRBXA7QCtxykurWAu3yokWLevXqxRQoDrIjTLc77rjDFBJVSCgJKsMQ9KiZnnzySe0Kaya22mOPPcgv1kx0MIQFtKqc7bbbLr53p2rHmf9lemnSI5W23nprbqnOdnOKeg7ySVnAY/z/A5deeikKz7eJ4cBkokR46dq1a6iHvzRyeUTNlP//TLn8hHrESt/makfZ30pwSMLX7T04mc62du7cuTaSHwCH4/pcKtiMCiEYoo8eFK4DPC84q7pC8Nevi9DQBY3Tx02Nqoi5krUjYkRAdMtheAUypnWEUKCW8FotHHthVxu/9WUH84XYZTuV72DccMUXF/CKmsnb8ITyuGrAW1RLzM7+0pJwaTrzehUbXY/bLY/yK5ePYu0OLBOeDB4tKh61dhPFQvSrRSR7zFZdFrYC5DYM61m1VrIsnZ+6oaxm9oEkIVXB+KF2jkzX8vdfvM1rEetieWa3QY6AUbabhHK9UfrNQnsqV1ljsJk9k7iqIJzaOrGWAOHFmsnu8CiTKqZ1MHtlFB4M1NanGCPwMX0dQtjfAjF7xKP1iI2FEWNSoEB0IIhFSrXIdU6od9SnZUOUNjqcoEwueU+c+S3Lf0J/8uTJnDu+/fLSSy85e7vvvju28J4A7xHR3HEcjPbt2xuuZsLZqVMnr9xeMbdt2xZnebYSHK3p06cbteuuu5r6L3/5C85/+7d/C4GAJ+vVDEKcybg79+vXL7zf7XXw4MEo9OfNxTtsTb5raqJee+014XWnnXYyavTo0ewQ/zNv1VG1nwGaW6+yw7ocS5I95supy7pyxFkyXEcrErGwJWuLcor65H0MEBI8Mog+lbRUCp4ASljg1VdfZa7LL7/c2kUZAUW1Ifa5g7OM6BDX8xz5XPCHP/xh22235SfUu/baa7VhPXKCAUKTuqMoP8bGioJeIS0nBn3evHk0HzhwoLZ///5Wx9liO8rsmSidaMM+kZ/K7zMUH4t9MdQuOCbkG8vrRHzpnCUzjpVHaB4gn/DWrVsTHlNEa1JvaRL6c346a4cNG8bmrpJ2bciQIZbpOLgrjBkzBt3psPy7777bzsb/MsydYiLATNpK/ZyJtPjtuogGAfzoMfA3v/kNrS644AIG4VfqNu6B7pGtHnvsMR7FW/CorgyJv+MQEHAsSiWqVbVz2vhZtYXoh69G/ZfXTN5CNn555DWTVpWmzV4k1B/WSM2UPZRzkosVimuXM8DJHA+t8+YtnxBllMMiVPBXAN1AHUdIXOB5BBoOXI0ojkV4OJA2omRZhVLw1ZbFlFDs1w4DeSr5rl1xZ+TNAmgExGJaqh2hVWiiQzdqlzRbHmXe2mC4VYsphlMG8s4qwFjGZEnbQSbhTrLHmg5hBcK80RcOhCrrigUWgSeOK81tIktilp5tImbTgbesSmBNU2+33XZvvPEG+djstU0JG2av6wlmpxJHCney75QPrXS80gbYzaKwhcUCucvhjFEQksPOhtA8KCsEOQRquRzTkaClEsV0bNnqwGapOOlPvqtezGiK6CBqrYKfc3uPOK2FPi6CcSL0BW4d0jBEWHddoy1KyKlfsF5MBIypD5Q3nRqOhohcK5hds0Qbr6TSCn24DVXDFS3QEPYk0ysCU2ppgPg00Kw+ym7zqTTOwQPitwrciVDcs5wNdK7g1untXnvt5RZ2+umnc5Ri0HESPD744INOTvwVgKFDhwptfE48PfPMM411j3MkuCZOJ4rM559/nv/tuOOOTpSaCfHAAw8MgaFYHjWKKOoM1Is8Gne3ESNGkHP88cdTyVzWUseaiSZudpLBDjvsYHXxmxbx//AWR0W/JjmGGCsU0ufCCy8k05LjuELwUC86dQTdHE6n1ELiN7RYKSyZcVSnIcSMWhStQ24U4wN6BVuAJYlV68hJhx12mF37wQ9+gNOiWNLmig5RmAaK8w4aNIj8AQMGUPiBBx6gcLdu3cKwGUeVvVshivJjbJGSw6uqVp0zZw5V7YJVxE9fLFwbO1JVDvtg8Ba8zVUtchb7liboc5iImF7lYrXRWR3E513kZ89lV9cWKYyMeMUVV8SnFAL9tGnT7J1Ky7mzELv2+OOP85+vf/3rTGR3OKedYpOixWhuvXWvma655hrCO3TowGLaoAMisXGFOuuss5hIBEBUz9HTdogJhuvceeednO1HP/qRUePHj6fwLrvsEkIAm1bVpVVLmfqrX/2qPoGl12UUayaVfS0GTzXTWsAatKlj4Iwpuu00x+Jz8UMCx0+rj8jFba3zUB7xKWKzuRqX0hoSTomTHGcJRXTThn+HG5WOb7mDGJMGMTp1QUSHaE0NjgEIr3HBF81jitpRMaMhoXb2XGdYBRtaqUhBQoAcyB5Wvn6yFoiLp2XqWNTKni4rckU1sJgnqsIUti9qJpxCjEBmRRTItK+5BvJKbc0C+oREGC0iXq0mSo5SdhWbHtCv2L6A8EelsFjYMMB01bqEGGfVnEe/LqqSY/YQZRZzWbWBNclfWdBfXtGxC5YQxLxmClDAkYzPObxy4twsY49CJW+5kCoq9l271VZbxUkvC1h1sLllVmsoUzsCTO0tDSkPzGIID6QSole8xYHlYDyzwlvoTHnRQzmI375QOKyR0DBRnzUTkJYL5Ey8J3DppZfOnz//5JNP5jfqJJSHHnqII/7tb3/T/6//+i+OEmc4B7e78sorSfvXf/1Xoc1NB+eUKVOktIsvvthbt1fOysm4HTbTEa5130F3q9V+5zvf8SoCTTGG5kpWgBpevfTSS9p9992XQHpydzLzIcUwkfe9dX50zELPXI5+3N3GjRvnbBx66KHOjDNPT2qXh5ZQU+ghJH8lTkWnAjWNrRYEhsywhg4N41EneCpQlG9sdIrE2mMKevzOk1uzuPDtb39bHMnn8tYjCYyjj1+fMvpHHXWUV4yvdZ8VjNq3b29IKFwUUncU1c5RoXl4S1VOcc2kgwcPxhA/d6FzKJNLqIv8InL+4Ik2lhZq6ECJo4xq5deCWqbOQSYj2xon6/TTT5dpbr75ZhvhrDlc8mvRUSHs0LNnT60jhjJixAjttttuW35fEhh6xt/NU2NRY4U1k84+++yDQXwIOnjE5rDIphdccIGzs+WWW4okqh95Jc+1Qoc6T8r56U9/ynkmTJggObVt2xY/Hu306dOta9SoURT+8Y9/HMIrUFEzZdTqkGqmtYA1aFM+wQ84DQ92C7OFc+bMEZR5G3+NRML18dja3E0DIjtitJwyPj5Gj5PA7cQpfWcmIqzhxIoUIU0Qj2uRWZwxPMG2QhBIAnc31ryhVQTNYMiPVgVidjAd3UxHFAtwdNpGh0peBX8sZIXIp6OA6yEJqww6APtD2I2htDaI2vox0SqAkrmeFbD1LBmz058pEIt7YSAFWAMnr/AYcVBrx22EcKNaZVVEbUyEuY4bWhdUKO+xglI7Kly3KlZKGuR7ER3yVzjF6sAZCcd4q/yHPObOncvmsSkco6rylOHMEfQdYR1bbEey16sKYs0VbY54tNc0kRGppFxr3bp11NDxlqtwDG+jvPPIblSim0WFntaFQXKy2Gy+hIaN+s9MZY8qQaHjLsZFeLlHN53u3bsrgA466KAjjjjipJNOOvPMM1988UX+xF3iDOTgc4gzZsx48sknBw4cOHr0aNVPly5d9txzz5122kmM69y5s5anBrN5uaNHRJzHHXecm9ozzzwTp4sOHDTUC8QsgZyiNSm8/vrrkqixQioiCWWWFUDWEUkdDCchzqqa6YUXXmAH/RYtWrjuRQgwRdz11iZisQ45RDaiamxNIOOrAyqY47Eso4QgBtgBrH2L8n9EK6Ygxn7l4AOvvfbaP/7xDxfbZ5999qmnnrrrrrtuu+22v//97y7dNkKstJVTp06dOXOmt4899piWtSvkrE1kS11+4RBvVxMhhz/Xo8xawJLO4IUXXnj55ZdfffXV48eP//Of/3zPPfdwfkeAt2R8y8CBufQPf/jD448/fuLEiZMnT3bWVvOPOkYOjsXGqnOg8FU47LDD3G5/+9vf0lN+EltcZTjwgw8++Oijj9Jh2rRpb7zxhsOr//DDD7vQEOvgY1ZR/eEPf+jUqZPgUJqvZuSTJqxb1H9mCthdFyt5gmeLIFxKYHKLEad4PD9DFK/z7BKfXeTAhih8a41ym1PB8DOnAqeQioEQwhGJAh0U0nR4rRwQpY9ZuK+BmeiaQYjh4ApmoBYFndhgoExQqoUZTWSgeelAN6IYAZ0OxZqJHEuIUWsT5gW6VSB7vfIIa9RiEwtnkLxmYgTM+agAU9gdnEFk7Yg4cUtwf5fVCKGnlv54dDAUhUBpvjWJtTDFOgEj2yBb4JTZI8dNorIpvJeRGTzjWwa7Yx9jlDZqpihqYxPrEbHdOjSZN28eT6Cnk6VmcpSihqYqlaJmwkmrcBX98B+PFJZN27RpU8uNMN/fqktOWPuoLdSuJnLJOn/84x95lbvw9ttvHzUEr4LtttuO9/zkJz+ReIrJgzMZ5QbHwxYtWsRXIpk999xzDkzv3r218XvsiJHVcn9y3XZdOu+887jjX/7yl7ffflsVTz6XDYYKkECHCI6m8zh06FAyH3roIe2tt97qFYE445wUHbfY9yrrLaMPGzZMxw1Oprz99tudqJrGFvs1oSi/iLqMrXfUpEwF1Dpiyg033GD7fvGLX7Bw8TIRPKNGjUJUHKPbiJYtW7r2tmrVKv5yuYgjVnoVzBDXndNOO00b36mpippssjp2Fri1l156KSEXXHABlSyqqNhqIp83OtqittGvi/4ri/hp0AknnCDEjxw50h7tu+++Zi9enqrO+8orr+B0crXbbrut8xjfpYTcJspccsjX1v5zpnxemnTs2DHokPPoxE/CLrroIslGbSQsiB7ykxkxnHLKKdoXXnjBFNdffz2ZO+20k2M7a9Ys7RFHHEHCHnvsoc0vmhWIv6TnAq09+OCDy7TqkX7OtBawNmzKV+L3+7iIoCOgcKZohR4dPBVpgxe+9tpr3E444G2uSDr4nQEZDoP0puVnFWkJRDfMzpXOggUL+A22mtJSEURJQs4YrURD2uobHlMAOdFZIYKTHHc0R47mlq8Tb9cbWGYge64CZmQEywd7FHuBzqQxEBgZJdqIGvqYI/q4K1SEEpYkR8Ziz0xEGdnrNQmz0KeWe3djhAMo2cf1y2a5RdUUu3M4WXbQRtgmQxxJ5zp7t2ZgovhqbpxQB9yJdvUEjzSPnzxhc991raESfrpZGmYbxwO1tSxt7bhQQh2xNmom4MecRijh0648HjmQx03K35zhbVIRJ8u4l31FVWbidhELOCI/k294WESrCHNAMmQjmzSR0rgj78Qzb948frnDDjvw6UhpVUECrehALJW07l/aHXfckbu7zeWZKVCcq9gnJ+uVQWavXr0spE+fPuR069YNc1FUTXJqQoX8HHUZW++oSZkKTJgwQeBTfWr79+8f+16MDiHHEphL6xVOfRudfyhadYFGeWWzCMQQxLrYoS48NS2Ni1Je5acdPnw4BcIJs9dl1EV+TaiLSVdHfi1wOizEPcDNj0k5PzhE2evl57UveBxM7cLy3xJ0h2jXrp2NKN9A6rNmKoKSQoSjhNOkLp2URN9mm21Q4uqJYlNwUmPu3LmmcPbRMegbpZ/PW4FUMzUorCWbijX2L5CRyuDl4ShuPUEJOPzubryfS/FmycztG51vOQDouRxvc3cPmMuB0eGmOt6aoiItocS8FYgbmbkgaiZEysTbusMQ88qsdLAEp2U9u2jXESzAksJEJBhxh9kZJHtdjkqRWiJqRJ/ZMWvZLUbFwEBcjUUoRg7+tYPQxKSNaytZLOvVAIvi6vJubAGPZfliWqoKW6C1uWzinDpcroMoHsvv1wikJXPFCZWWXGrNC9SOayutuJPdQUTBaV2GeMUIfCnkrFDJFVosYS1gDdZMaxqhefhZcRWOFmL8PCASw8CBAwWUimSG4hWGm2++uXnz5mIc199pp514cPv27bVjxozh5fn/QhtjK+BV1ivP65A7NpgnTZqkaPvOd76jve222xAdpHiVcS8/tthvRMiXU9SfVWWj+Mnzueeea+Huwujf/va3mUhHotLGWANXZ+112Zd6hDB3//33C4Vdu3aNdJu9qG8U18WpmNSk8emCRzWK2R999FFeOnv2bEn6m9/85pw5c/bYYw8R2a0/vB2n4TirGnl17JPrFp38kUz9OGUhP36CFZXTmWeeqV/TvNdee623/MRK87+DDrlwWB2d6wLnVNuiRQvtv//7v5dp1SPVTGsB66FNHWAn1q1KXnFQZR0+jaKWCmDg8cKKFh2Pk+zk43dVRAcUSaVly5Z1Pw9EyT2CFzkkiBdiBK9FFB10isdsPYa1u7TOnz+fnS3cZTwurcAI3mZ89YE1Ha2KUCKInvZU8JJiwUZD9nqNoeSO5b/5Ji2xJAqPoozcL46zwJZbbvnyyy9zYE4bdUMcARri9Bj0kFaPMDWQH4jH7F1jxmfknDZwNOKaqRaIFyKjm7u7pOD40EMPOajxn87lwDNjxgynt3Pnzo7ur3/9a63MJFG5E4k+t99+u/OviqrFRMWjKOeRJl7on3322WY01uw9e/aMQ1sRlItji/3Gjkj/gqZqyS1elvqf//kf1o6/DR9GKJq0sazdogR6Nx4Ky09rTW3ZiE+yJ0ybNo0lr7jiClb9xje+wZi0oszIkSN5r7fcfvTo0XQ7+uijZQtveSBXLGrL+KujfC3HIZcc7erXTGsT8RfKXWS16W9ArHOshzbl4u6P8QPSqJm4jpji2pjDAcCjdWjzmskx1pk9e/Yuu+zSrFmzqJkIrOMxJkFaIsS8QkbUTDroUTNlfOs7mDRqpvgJ0zvvvKMT4Wx1AuI6h2pYa095lC3mPDwNLC1Wt4bAPyUnjgQqJxQe5c7k8tS6dWuF1KJFi94q/8Jf/FSVp/Fwu8CZXQ5sAfUoXKFkWesSsuf6QHF/SQ7jZM8NHqGqJTQinddjrIfbEOchAsdtt93mZMZv1VxwwQXeOrdOrE7QHfLdd9/d8f7xj3/sPIuhcljXrl21nTp1whMZpSYrFY+iyyw29Zn2jjvukKX++7//m+R8rE5NobkmemNEWF49Kj/16tWLBcaNG8eM1hjAU7RnUBo4KByIx2prkTUExmS9l19+mWHPP/98Olx00UX807UJPfDKK6+4vP/iF79wH1I/sfl1112nPfzww7mljrESWyZxrdjfFPG3xmfOnCkvnnLKKRZS01wNoWb6wx/+wJJxm+zSpUtGrQ6pZloLWA9t6vLoJAgcDmRUQo6HE8uBvHI2eL8+nmgNiZppxx13xPDmm2+2adNms802c1RCINTl9JIgVGl5tqCMQkL8XvpnCpbvRu+2zrYM4lHKZ1ivwozFsNgYYVsjJ62dhfBSxRA31mfGqMUVT1EPcV1E7qo2lYTch5idbvjpGUFTx46UhX2KXHmdel9IyAzQKu6CtSBjLSMjrXUIC/SkwAq1TVgL+MLAgQOz7voCucGBdB4ExL333nuPPfZ49tlnpQp3t+eff16FJKxE0GzevLkk5DbXo0cPQ9xDjz/++G9+85tf/epX0TmoqBqnpabMVKRPnTpV1Bg6dOj06dMHDx789a9/vUWLFvFjp0CEiWpRk/zGCLYVNN3imzZtuttuux100EFSPtt6Ve0yG9HaqQr2MSCWASfJXq8xbLrppi+VMX78+Hnz5qktqMG8PJO3u4ExOKj4O3bs+Pvf/16u8jhlyhTGtx3yFrZMVgGEZL01swtz5szRvvrqq6xUeyU0efJkPG3btpVE879ZvpbxxBNPaBmTVXfaaacgVou//vWvzMXUsQtrwnQJ61vNxLPlJF4u8TjPnCYum1EzuTlq8aBHTHFu3377be7VunVrV1GciIZIS8FZllqneyWfNmnkRfI9mnSFo9Y/uMhHzcSGDAJ2BOIArx8GiS3W4UVBWXMIJ3z99dcj97z33nstW7ZUM3FvpqYAa3NjPDIQm4N+1ExxtYpDUZJVxlrYAsbJZ6EJ9apOGgYM0NlCIJRfJ4jZV1YH/FkvoV6xXv2cKV9LtYv605/+5KAqZYQVV3gR05GOK1LGsfxpqaAXX+UoEt2khAbpTZ205ZZbxqtim9CowR+KLgEe7Sx3yp7XJG666SZtr169TBe/TTVu3DiUXAfR/5133pGxzjrrLMlApaK95557vNp11121ReWjX3TLendR+lBG9SYpyqlbbLGF01ExCwb0Dz/88OWXX6atSsWo+I2itY+ZM2cKC1TVxqfxVWEt3g4ZMkTc6Nmzp777QUU9Wu+W/GxiPfw5E1TrHE5j1EOukHGeg66TIyiBjLQMGbVm5Ke9LswJjRf5/gr3+vY9tn7NIcoOicd1Sk5Cya/qoQyXxiPQu2zp5ODwwYA/9AyUh65xUDViPdC86rmItTBjcK7b+oOGNNGJIrVa0NAuWI66isLUDgfIXifUH9bPmgmqrotX8Tn+x6u85ViOsTZ7XSuqHqpAkR4JL3drQUEbDDUNT2hEqOpdxW1dc1vMb/nS9OnT+eof//hHDta5c2ftN77xjYyjHNy1L5X/L+Yf/ehHqpBXXnlFZvrLX/5i+Pbbbx+RNJhzrFH9aajCkFBJdugUFhVTYKCVVzpOoiWoP7J3ax10YKi4alToWYQVWUj8wehYERgFGUc67PWE9bNmqooIJRzIceWFQalHH8rDVoWbBvK3CQkrC2lJ0BTE3dZFw7jxoMTbQHxopmaSk3i4PujEpT5yQMa6tmBeWWfj8rczJMWKsxYngnqhmHXhqVjU2oQzm9dMFae1+EjDt99+WwbVoTP986o0oX6xHpai1a7I4QSvcjfihdyrjo5VE0+RLhBog0Ks6SKI5MS6TJTQKFD0sTW6rbyIl5YuO+XrvMcl5b9J+N577xW/9im+c7ZHH30UT6dOnZo1a7bffvuJ9ddddx233GqrrQyvei6KmtfvKupin5wn76w5feqCCn3yR6aLDtBK7pdu1YIyWUZdxrz2dV6P8ZmomXiMcxsfKWgh7pL160kCAcQUJBcdusLXExLqiFJGKv9uuFS0aNEiaSnoxbQEXA6bJARNy384nLOJnjJZ8/JfK1ZCZawND/V7DFcTcXKB0QKhXhxe5rUXjFlRg+IJtoT6wmelZgKXHW34UIDbBaX8flVQHPvBsv9JPYf8F69yIGa9hMaMoo+t0T2NmomjipXxaLr4O0nF5PTuu+969dvf/hbzT3/6UzVT/PW8rl27yk/CKObaT3r9rqIu9lmb+tQFuT4sCfFIjdz4KKFV3klYc/hM1EwBNTgoa6JmirRUX+CsITxqJsLrV37CZxMRGXmXe9X75f9qOegVNZM6CcWNPj5reuedd8RWV3uJyiOH1MlYE2pFGJzFHOT88w/2B5243dqFZM81jc/uVx5XauGrcEWqkL8KEhISoBQUl/2/RzniUq8VOj1OmjRJu//++2tHjhzJ2U444QRDMMhMMpY7U2nYMhirbTg+2dD0SVjn+AzVTBVY08cgHbOEegFHqkhLgBJX+3+W/+q5yP5x+XvhiPjVTx5d+aUlzN5KTjEwIaFR4LNbMyUkNGpINvLTq6++qt1jjz0++OAD1ZL21FNPjR8sRdLCGfkpIaER4bNbMyUkNF64UMZPTON7Yv9X/qJEUNRMm222WXytWU6K2j1+QJKQ0FiQaqaEhMYHeWj27Nk6J5988qabbnrkkUdKSz179kTfcMMN43sQ2vjQD1Grnz5hTmgsSDVTQkIjg0wDrVq1iv9gd9GiRZtssok8pH6SljBIS26c+htssIFyKlqUHCEnIaHBItVMCQmNCXJS/Aptjx49PvjggzPPPHOzzTbbb7/94gdL8pPi6eOPP37iiSckqvgfV7fffvv4ZkQmIn09J6HBI9VMCQmNAy6RUS1JS3JP1ExbbLFF/CW3peW/Rx5fz/MoLel8sfz3UuMDvUxKwqqiXG2us3t8zA7Z8/qOVDMlJDR0xMd0KiS1jpx06aWXejz44IPlm06dOmEonuL33ntPZurTp88mm2xywQUX4G/ZsqWkVfyLJKl+qjsqIqRMHx35PjqBnK3e7VlLiF6P9y7VTAkJDRrSUsQmmUYrIDZr1mzx4sXxY6QPP/xQKsKQQ1rCs2TJkviP+2Qv8St+/pRQR2SmLCMjLSNmD2sdMTtkz+s7Us2UkNAIIP2ofm655RaV0/Tp0zfffPMjjzxS0tpyyy2Xlv/PwIyvSZO5c+e2aNFi5MiR2quuusqo+BFU8beaUs1UO6qNikHMX63lmqla+evx3qWaKSGhQUMq0kowUTMJRsWaSU6Kv5KXQ5H05ptvNm/eXDYyViuGxtiEhMaCVDMlJDRoxFcebrvtto022ujYY4+VY1BUS/nvKslPxd9V8mqzzTY74IAD1FL33ntvpCvHHFu1V+z1+N69OohPQRm2GCHdD5jRtWCLLbbISGUUeerXnvaODmZs2rRp7KNN1+rruHbg0cFDYepxEpT4wWQMD93waPWpt2DBglatWnkMxBSGc5hNN900eNBRYq58Re+//z738+jGYyKjdNbQpSfVTAkJDRoCh2go0Lz99ttf/OIX4/eWxIWIOFoRBAU94FEhpa6Kr+3FH8YWTfL4krBCsCejibzZ8zLEdx0lfgw6ObLX9Yd8c+kgYeRpSUsxr9DtNX3AziLKIrwi3vKWSFpyVSBWFD7wpS99ST84gdgorOMrncQilpf1f/GFT4/BnHudbBT0NVeLp5opIaGhQ7CYPHmyuPDSSy+1bNlSoJFvpCvQ13qVsZbDxzvvvNOmTRujVE4owoo4UuQpImWsqoigzzKRGzJqkybMiK7jVYTmgC3IeqtkT7MUR0VMRqHG2LFjv/vd7wbdjLJFpAc5A0PMS0N9FB3qYYt8Jm1U6B88RuHnFfPnz2/RooUOyjPPPNOuXbvWrVtjy0uiGEUNj8RKeATSYeHChcG55pBqpoSEBo0ILkLDokWLhAZRAyIkiRERKYIYWLBggSCibFIzvffeeygYIp4m1AKWzHrl7K6GkPXfeustjwwolAOi9oYbbkAU0HMUx9YEPHVhC+A0KTXytAT0Of/88++66y79U0899dVXX501a9Y555wzYMAAzFdfffWZZ545YsSIW2+9FcN55533s5/9rE+fPscff/yTTz7JeSZOnNivX7/nn3/+7rvvPvLIIxcvXixRTZkyhW9wEswvv/yytRg7Y8aMvn37msvjUUcdtfHGG1922WX//u//ftBBBz322GMTJky4+eabSwqVLROd+kfYKyEhYX2F+CKCQPacUB2q2ketEJleGxShfNSoUThvuummnF8ntzAEsQLxSmp5//33CZEV7rzzzqeeegol3mrnzp178sknxyOBksEPf/jDq666yuyXXHLJddddpxTu1auXx+eee+7QQw9V8aDMmzdv2rRp+ieccMJ9991nLLGvvfZa165dH3/88ZkzZz777LPxv+/LTBdffLEh2H77299SA3HkyJFaFNNZrz48/PDDv/71r2OUhBREKkXniSeeGDZsWPTXHFLNlJCwnkPJFVf+7DmhOoR9xN94FBxRBHqFSzxqPcoNOtJA/EhGfJcJSgPqABuxySabqHfHjRvXqVOnyZMnK8Kyd8vDdC1btvzWt751xBFHmPShhx7Sp1vz5s1VMAYefPDBrVq1UhaTufvuu1Pm3/7t3zp37kznDh06NGvW7N57791zzz3btWu38847eyRkr732UmAZIrcde+yxKEpqtZfppLEf//jH0hiix3322Uf5pZYyIwmEDxo06Oijjz7mmGOkN7WaoryUPepcAq4CUmZKSEhIyCBYZ70yxH0BWitkQ/ypXJ3Zs2f/6Ec/Ev1FbYkh464ZpXtB+adW+m+88cbzzz8vr+SfnlWE+HhUrFBGYnj66adbt27dtm1bOfJrX/uaVzfffHOXLl10aKJmkqiuvfbaI488ctNNN33hhRdOPPHE008/Xalk+PHHH/+3v/2NQEuYNWvWGWecga44+3//7/8NGDCgf//+FOjRo8d//Md/HHLIIR6xEUvgYYcdJo2RL4/Ceeedd8stt/z+97/v2LHjTjvthCdKLp01hJSZEhISEjIsXrw4L5tApAaVDaJCwVsJ5pJLLtlmm20uv/xyBU3Tpk2XLFmSca/o6w8kCOgvvviifCas77LLLlIUej5jnr2kBKlImeLV17/+9SuvvNIQmrRp02bBggVyg8KIKJRdd92VnO9///tbbbXVjTfeKIf169fvmmuukS9/85vfqLEUQFIUsUTtuOOOu+22m6Qo2Vx44YWWQMLHH3/8u9/97r777rvjjjviAz21l75JLXy//fZDUWMpFuW8Rx555LXXXiPKq1B1DSFlpoSEhIRStSTUfulLX4rsIu5vuOGG+oK4vlgsiMtDDzzwwLnnnosBs2whlG+++eZe4ZROIlhrAyW5y+AtHjJvvfXWvfbay9iDDjroL3/5S158eCvcy15TpkwZOHCgmkZZNnTo0LPOOuvnP/95/HzrtttuI0E5RSsdo+TFZs2ayViDBg2aOHHiSy+9RDjKX//61z//+c8k0FktZSxm6UonPlE0V+DLX/5yzG4VikKdSZMmnXLKKbKdGuvwww9XbHmlUJPq6LzFFlsQssa/UxMWTEhISPiMQ/qJPCHyxmP8JEmn/P4TRYmy6YMPPkA85phjdN5///141b17dy26sTniVQBzyLngggvmz58vM0kq+ojgEfG0004jAf2FF154/PHHpZmZM2e+8sorWpR33nnne9/73ptvvomfJqZ+4oknvI2KR5IzkHwaPvXUU94a5REzmUAB5RGoe6wrJoWScp98gk7Uq6++6hWthg0bFn1QhF199dUkYDPF73//+1/+8pf6XpWHrhGkmikhISGhBAFRIXLHHXfoC9li8UYbbYSijhGF33333R49eqiQUO6///7bb78dm/pDBsI5ZsyYv/3tb1HHVAvliMpDPlAPtWrVylzKjvbt20s/yhSPckOUTUqcHXfcce+9995+++233XZb9VDr1q2bN28eX0nQJ0ceopXySKk3e/bsPfbYo1OnTt6qt9RYd955J4att97aKuQzWhH74IMPHn/88dLVk08+efnllx999NGjR48m85xzzunateuBBx4oA0lalqxc69Onj4kIfOaZZyzwhBNOIGTy5Ml47rnnnn333deKqEGHWF29I/tYMyEhIeEzDsFQbtC5+OKLf/rTn4rIgq/gLijryz3HHXdcPEpUIngwyCgGAoq3xY+5QlpAlJce+vfvL9ZH/fHb3/5WK2EQ65WSRaUyYsQIwiWbc889V4Fi4NChQ6UTyaxLly69evVSIRklx8gu7dq1UyHRh8A5c+bssMMOZpctzKtDvbFjx8qg3/zmN0899VR55fnnn9d59tlnTfHVr36V8uTLYVLgzjvvHI9AfmhOVHE56jA8Ut2WW24ZzOTIuPG2fpFqpoSEhM86xGLQEc3hvPPO+8EPfhDReYNlf2dBOA4GnPElPcRo5RVsck+IMnDevHnCun4OxPj8TUUybty4u+66q23btkqip59+WvQnpEWLFgogbKQZu9NOO6nMxo8fv+eee26zzTYYpIHrr7/eFAsXLsRmlEQYf7joRz/6kRlffPHFo4466ogjjvj2t7994oknGiLrHH744aeffjqFJbbTTjvNQIXa3LlzJT+p9KqrrjrssMP+8Y9/xFpAkiN25MiRRx55pMe+ffueffbZltatWzez0+HMM8/EjGI5aygtQcpMCQkJCSUIxNER63/4wx8K4voLFizQeiUcf/DBB1GUQBC1wRaIpGK4hFGsNsDwadOmbbbZZoqVKLxQpIFdd931zTffRJHbtDiJxSZvkSMBeIwP+jbddNMhQ4b8+Mc/PuOMM7z1GFPIIuR07tx5xx13lOruvPNOKe26666jySabbLLHHnuY6+2335YOzznnnFdffVUhpf5TJ82fP1/ms8B99tlHawpypCuQJk1EH7P36dPHK0JOOumk5s2bU0mhZqUUKK9sjSB9mpeQkPBZR4TBPBiKyFENnHvuuUqKhx9+eObMmQqOAw44QKEgIovgxcRTjKLyjeGCOx7RPKOWv+z33e9+96CDDvrP//xPYR1FnnvnnXdOPvnk7t27f+9731OakHP55ZdHepAAgg1kGkRFj3ypiNliiy0kIXS5Z9asWSgjRozYbrvt5A/pTUsBY2lCZnyh/JlnnpkwYYIsqISaPn26gkzu7N27t7xF5ltvvWWUSRFDbY8KuM0339wspKFEm398J9VRIzdUvSNlpoSEhM86KjKTuKw6EbjbtWsnUgvx8pC3CpFTTz1VPhCji5Gz2BesL7300gsuuEC/SI9YT5RQHtWSt5IButpIVRRpjHBJ5ZFHHrnkkks8YjPj888/v9dee+25556DBg1SIUlamI0y9uijj46MhfjSSy9dfPHFJOhLn+edd94vf/lLOc/Yd999V5rBD6+//jqGwYMHL1myxCytW7eWI1944YXbbrvNkgn505/+ZGo8Sjflkb65DMdGOFWl5++UQX9v1wRSZkpISEhYLosUIZRnvfIPeATlbbfdVtT2GDWNvo4ILuWI9c2bN1dYyD1exc+oihKiX9NcBhJl1Pjx46UBtVSUPjKiKqdZs2YTJ04866yzMu4ybrzxxuOOO26TTTYxVm03efLkE088kSZS12uvvfarX/2qf//+O+ywQ8ZdTpy/+MUv6CnH/PznP1dOIUo8CxYsuPbaa0866STJxisZEdErCtOH8HgMtGjRQtKKT/MqPrSsL6TMlJCQkFBjtihCmH7jjTeeeOKJww47TEKSPFQS4ngenQX0N998U+qSACKmx6h4C7VnJm/j00L9d955R0daAvT4MM3AojSPZpe9ICjBFn9pPigB2spGQZRm8BBLfyktPrWTeFCCOUA46KAbjiFmCWIglCm29YWUmRISEhLqlJnEdKFc8rjmmmv23nvvAw88MKdPmDChU6dOCiaP8pPKQyivGqyDUu1cUZSI/obLHB9//LGEJz8plcgnUNaR6iJR4Qwh+jERfh1sQfeIM3KJ4flPg/CgE0W4UZJT0M3o0dhgAERCUHAW8x+GYIuJDCyNr2+kzJSQkJBQp8wkHEd0BsH99ddf14rabdq02XLLLUX5gQMHnnbaafE3TzFHCikiKDXNFdkoShmSMXvMmWWpyHwBdPz00TEXTsQoblBibHBGkURgJLyackkwmF3+i7Eh2RTW6DHWHkRtaUzKTAkJCQmNCHlorZqf6gXkryHJDQHp95kSEhISGh/W47QEqWZKSEhISGhYSDVTQkJCQkLDQspMCQkJCQkNCykzJSQkJCQ0LKTMlJCQkJDQsJAyU0JCQkJCw0LKTAkJCQkJDQspMyUkJCQkNCykzJSQkJCQ0LCQMlNCQkJCQsNCykwJCQkJCQ0LKTMlJCQkJDQspMyUkJCQkNCwkDJTQkJCQkLDQspMCQkJCQkNCykzJSQkJCQ0LKTMlJCQkJDQsJAyU0JCQkJCw0LKTAkJCQkJDQspMyUkJCQkNCykzJSQkJCQ0LCQMlNCQkJCQsNCykwJCQkJCQ0LKTMlJCQkJDQspMyUkJCQkNCwkDJTQkJCQkLDQspMCQkJCQkNCykzJSQkJCQ0LKTMlJCQkJDQsJAyU0JCQkJCw0LKTAkJCQkJDQspMyUkJCQkNCykzJSQkJCQ0LCQMlNCQkJCQsNCykwJCQkJCQ0LKTMlJCQkJDQspMyUkJCQkNCwkDJTQkJCQkLDQspMCQkJCQkNCykzJSQkJCQ0LKTMlLAusWB8377jF2QPFajybsao3gMfKBLmjD2j99hZ2cPyWPxA/+7Dpy7NnuqCacP3GT4t69cJi6de2bvvqGmLs8cKEFcjCvMsnXZl//FzdLLpF0wcPvC+8vOV+w9ZKf0TEtYjfO6TTz7JugkJax2yz6AmA67cb1LfQwdNymj7Dbj3ym6t8nelbglLpw751tj9xw/p0jSemzSZNbb3wCZDRnVvmz1/ijnj+x4zfE77thtlz0UsnDVz6dY7t+3+s1t6dijlg5NHZy8q0eOGKf06ZP0yamNehiqDMixdMOvpp6fOmNOkZfvdO3TcpaCZ3HTRnO4D247e5/5DxrQfNb79wL4dm5ZWMKrtsP4dq1tBQsJ6j5SZEtYRinF+WTIqU+9v0mP06E8zQPnd3OWTQol2yCtDDjzjjo8ySglZVpjzwMC+59z9Sg05Qr47dObpVV/NGNXtxva3LMt71XKVdDukTNMbufMylYsvAjH63t1HX/be6QO6t9+oKE5RNHLx7hudf3d5fOlFnpKXgea9Zi1P/9RACQmfBaTMlLAOsfiB/geO3U+WWXjL8Jld+ndrK1Kf3+Rn13YrlUH6ec1UjP1l+s/6LOzbv8mQsb13KZFgGcesWxQbvTuOPWP4nJ1rqpkOubaQRkpYOm14z4EbDrylb4dsxKepZOnU4efM6XFlSaPSFMtnzSqIDJKNPr3JqL5njG8/4MqBHaeGuJbj+508uv2wG7rc36mY2RZPvfKMvjfO7E6tjmXCnLG9h29+5fBvSZOzxvYcvuEVKS0lfLaQfs6UsO6wdNrE+8udjXY5pOP95wyfNufpSbP2azqt35CJK/gJy6xJY6d2H5KnpQLa97xyYJcv63QbeEt1uKJPBP9lWDpn6qgzjrioSb9r87RUwobelOuxmRMfKNZlh/SbAjf0KOWgUq8Mj+qcEpbLIE079B41pm+TSVPnZBLmTJ3adtgNy83TZOms8QN795vVvc/hTaZe2fuM0s+tlk68/4GmH723sPx6zoyZ7duntJTwGUPKTAnrDEunPnD3hhsuvntQ//FzWn1rQK9ZfY/pP637fl327/beiNEzMqbq0f6A/ld2Wzik/9hZWQpbMKfymxDjB/asDj8YMTVjKIX9+/r3vOiBrc8ec0u//cvRX1lU/tZFq/179Hi6b+nbCn2ndunVpepPsppMHfGDTGLPngPHZ8SqaLp1xyZ3j50qNS2dOqr/3Tsf0n65tDTjlnOGL+x27QPDu3do2qRjv1EDWo4eeOXYSU1P77H1A9NKX/aYNXPSIR3bB3dCwmcHnyQkrBvMH9fn7Btu6NNn3OzZ4waPefmTT5664pCOgx/50KuXx/zshqdmj/NufvA+NaxjERl9/iODe/S4Ysq7pW6BOfDhU8OOPvqG6dlTHWGeCjEFTBnWcdhTWb9WUKbjsCnvTh83oMcBPQaMm/6upRj64cvjBhy9X48B984mqTjNy2NO73Xz9NLCc5SMc++7n0y/4fCa9UlIWG+Rfs6UsG5Q+tHO+C7DO4wanv0saenEId8a8XTLpYcs++FRrT9nWvadvQUTh182q/uAnpvfv/wX+WaNPafnRZM2/HLlz5qWzpn5yke9bpjYtySq9POgKt8/qIJl3z7AffLCPkMWfreGL+h9+pWLktyp7XstXNy+T79uuzQt/dzojCNm9Sm/nnPfwJEfddhw0AMdSlKtq1LafoPvvfJbrZosvq9fz781bT/xo+7FryMmJHxGEAkqIWFtY/q4cS9/WuqUKhzV07v+6VWqn6BYBqll8nKlankEReL8R4b1OOT0m6dMublPr1LFEtRPPpw95YbTjz79him11CC11UxPXbHfz/5aFjZ73Nm9olQrY/a9A5aVbgHKZOq+PKZHucjbr8cNTxVqosI0yqmjh02Jd2rAo7MpqPvI4I4dj755JYu+hIT1AunnTAnrCLt065b//GTO+HP6zur9s25tm3bo07/DxKmlXzVdOSxcGD9nUiz1O+eBnQeMubZnx449r7yyR5OxfbufMeTKIX2/dcSgaR0Gj722d8esrsqxeMbY/v3vK/4K79I54/v3Hjh+RvG3aGfNnLRzx53L1UvbbsOH7Dy+b99RU2dMHXVG90Fzu11xS+mXkKqiffdbyt+MmHhL7+W+9/Ap2nYbMny/WSP69+vf/4xjRjQdOCAKpKWz7h59/847Nxkxovx7uAkJny2kzJSwzvHRtPvv3/nKYeWvijfZqGO/4fG7s+8tLn87bRlGn1z++wn77PPpB3BLFy/7Ct+cp6fO3bqlmL5R++7DR/XvtkvTpYvnzLhv7Mgbx05d3P7Lu7Rt33TrpdNGX3nZ8LH3TZu1YHE+cMHUK3sfc9ni7md/q5yvsi/RbSRfDOu28LJuXc4YNbWcspZOGzuqZfcDyoqVRM/6qGXLhaNHjRw1elarnVsuXTgnl5ghV7c6FD7BW7pg4ZxZU6dNnbthx6P7dZx50fCJC0qf+PXsPbHLqBtuuXJIy1E9+41dLkUmJHwGkNVOCQnrAtV+MrfsM7ADTs8+16vp07wpn34v4oBe+cdl5e9F9Dh78M3jHpk+u/i1gg/nvzxl3M2Dz+5xyH4dDx/21Icfzr73Z70GjHu5xDP9hsPLcvbrsdznZ7PvHdBnwF/nf/LhUzf0ueGpd6eP6VNV9Iezpz9SFtvj6KNLvHXAsk/zPnxqWI+jzx427qmCnrPvPXuZUmWY9OxeVxQ/C0xIWO+RvgGR0NixdPHiJk2bVv9ZWUJCQmNEykwJCQkJCQ0L6edMCQkJCQkNCykzJSQkJCQ0LKTMlJCQkJDQsJAyU0JCQkJCw0LKTAkJCQkJDQlNmvx/I9b6t5tk6PEAAAAASUVORK5CYII=" alt="Q(f) = TT + â€”Allw112 "></p>
<p>è¿™é‡Œå‡ºç°äº†Î³å’ŒÎ»ï¼Œè¿™æ˜¯XGBoostè‡ªå·±å®šä¹‰çš„ï¼Œåœ¨ä½¿ç”¨XGBoostæ—¶ï¼Œä½ å¯ä»¥è®¾å®šå®ƒä»¬çš„å€¼ï¼Œæ˜¾ç„¶ï¼ŒÎ³è¶Šå¤§ï¼Œè¡¨ç¤ºè¶Šå¸Œæœ›è·å¾—ç»“æ„ç®€å•çš„æ ‘ï¼Œå› ä¸ºè¦æ•´ä½“æœ€å°åŒ–çš„è¯å°±è¦æœ€å°åŒ–<em>T</em>ã€‚Î»è¶Šå¤§ä¹Ÿæ˜¯è¶Šå¸Œæœ›è·å¾—ç»“æ„ç®€å•çš„æ ‘ã€‚</p>
<h6 id="2-Shrinkage"><a href="#2-Shrinkage" class="headerlink" title="2) Shrinkage"></a>2) Shrinkage</h6><p>é™¤äº†ä½¿ç”¨æ­£åˆ™åŒ–ï¼Œæˆ‘ä»¬è¿˜æœ‰shrinkageä¸é‡‡æ ·æŠ€æœ¯æ¥é¿å…è¿‡æ‹Ÿåˆçš„å‡ºç°ã€‚</p>
<p>æ‰€è°“çš„shrinkageå°±æ˜¯åœ¨æ¯æ¬¡çš„è¿­ä»£äº§ç”Ÿçš„æ ‘ä¸­ï¼Œå¯¹æ¯ä¸ªå¶å­ç»“ç‚¹ä¹˜ä»¥ä¸€ä¸ªç¼©å‡æƒé‡ (learning_rateï¼Œä¹Ÿå«eta)ï¼Œä¸»è¦çš„ç›®çš„å°±æ˜¯ç¼©å‡è¯¥æ¬¡è¿­ä»£äº§ç”Ÿçš„æ ‘çš„å½±å“åŠ›ï¼Œç•™ç»™åè¾¹è¿­ä»£ç”Ÿæˆçš„æ ‘æ›´å¤šå‘æŒ¥çš„ç©ºé—´ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ï¼šæ¯”å¦‚ç¬¬ä¸€æ£µæ ‘é¢„æµ‹å€¼ä¸º3.3ï¼Œlabelä¸º4.0ï¼Œç¬¬äºŒæ£µæ ‘æ‰å­¦0.7ï¼Œé‚£åé¢çš„æ ‘å°±æ²¡å•¥å¯å­¦çš„äº†ï¼Œæ‰€ä»¥ç»™ä»–æ‰“ä¸ªæŠ˜æ‰£ï¼Œæ¯”å¦‚3æŠ˜ï¼Œé‚£ä¹ˆç¬¬äºŒæ£µæ ‘è®­ç»ƒçš„æ®‹å·®ä¸º4.0-3.3*0.3=3.01ï¼Œè¿™å°±å¯ä»¥å‘æŒ¥äº†å•¦ï¼Œä»¥æ­¤ç±»æ¨ï¼Œä½œç”¨çš„è¯ï¼Œå°±æ˜¯é˜²æ­¢è¿‡æ‹Ÿåˆã€‚</p>
<h6 id="3-é‡‡æ ·æŠ€æœ¯"><a href="#3-é‡‡æ ·æŠ€æœ¯" class="headerlink" title="3) é‡‡æ ·æŠ€æœ¯"></a>3) é‡‡æ ·æŠ€æœ¯</h6><p>é‡‡æ ·æŠ€æœ¯æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯è¡Œé‡‡æ · (subsample) å’Œåˆ—é‡‡æ · (colsample_bytree)ã€‚</p>
<p>åˆ—é‡‡æ ·æ•ˆæœæ¯”è¾ƒå¥½çš„æ˜¯æŒ‰å±‚éšæœºçš„æ–¹æ³•ï¼šä¹‹å‰æåˆ°ï¼Œæ¯æ¬¡åˆ†è£‚èŠ‚ç‚¹çš„æ—¶å€™æˆ‘ä»¬éƒ½è¦éå†æ‰€æœ‰çš„ç‰¹å¾å’Œåˆ†å‰²ç‚¹ï¼Œæ¥ç¡®å®šæœ€ä¼˜åˆ†å‰²ç‚¹ã€‚å¦‚æœåŠ å…¥åˆ—é‡‡æ ·ï¼Œæˆ‘ä»¬ä¼šåœ¨åŒä¸€å±‚çš„ç»“ç‚¹åˆ†å‰²å‰å…ˆéšæœºé€‰ä¸€éƒ¨åˆ†ç‰¹å¾ï¼Œéå†çš„æ—¶å€™åªç”¨éå†è¿™éƒ¨åˆ†ç‰¹å¾å°±è¡Œäº†ã€‚</p>
<p>è¡Œé‡‡æ ·åˆ™æ˜¯é‡‡ç”¨baggingçš„æ€æƒ³ï¼Œæ¯æ¬¡åªæŠ½å–éƒ¨åˆ†æ ·æœ¬è¿›è¡Œè®­ç»ƒï¼Œä¸ä½¿ç”¨å…¨éƒ¨çš„æ ·æœ¬ï¼Œå¯ä»¥å¢åŠ æ ‘çš„å¤šæ ·æ€§ã€‚</p>
<h4 id="1-2-å·¥ç¨‹å®ç°"><a href="#1-2-å·¥ç¨‹å®ç°" class="headerlink" title="1.2 å·¥ç¨‹å®ç°"></a>1.2 å·¥ç¨‹å®ç°</h4><h5 id="1-2-1-å—ç»“æ„è®¾è®¡-æ”¯æŒå¹¶è¡ŒåŒ–"><a href="#1-2-1-å—ç»“æ„è®¾è®¡-æ”¯æŒå¹¶è¡ŒåŒ–" class="headerlink" title="1.2.1 å—ç»“æ„è®¾è®¡ - æ”¯æŒå¹¶è¡ŒåŒ–"></a><span id="jump3.1.2.1">1.2.1 å—ç»“æ„è®¾è®¡ - æ”¯æŒå¹¶è¡ŒåŒ–</span></h5><p>ä¸€ç›´å¬åˆ«äººè¯´XGBoostèƒ½å¹¶è¡Œè®¡ç®—ï¼Œæ„Ÿè§‰è¿™æ‰æ˜¯XGBoostæœ€bugçš„åœ°æ–¹ï¼Œä½†æ˜¯ç›´è§‚ä¸Šå¹¶ä¸å¥½ç†è§£ï¼Œæ˜æ˜æ¯æ¬¡åˆ†è£‚èŠ‚ç‚¹éƒ½ç”¨åˆ°äº†ä¸Šä¸€æ¬¡çš„ç»“æœï¼Œæ˜æ˜æ˜¯ä¸ªä¸²è¡Œæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œå¹¶è¡Œè¿™ä¸ªå°å¦–ç²¾åˆ°åº•åœ¨å“ªï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼šé€‰å“ªä¸ªfeatureè¿›è¡Œåˆ†è£‚çš„æ—¶å€™ï¼Œå°±æ˜¯åœ¨æšä¸¾ï¼Œé€‰æ‹©æœ€ä½³åˆ†è£‚ç‚¹çš„æ—¶å€™è¿›è¡Œã€‚</p>
<p><strong>æ³¨æ„ï¼šåŒå±‚çº§èŠ‚ç‚¹ä¹‹é—´å¯ä»¥å¹¶è¡Œã€‚èŠ‚ç‚¹å†…é€‰æ‹©æœ€ä½³åˆ†è£‚ç‚¹ï¼Œå€™é€‰åˆ†è£‚ç‚¹è®¡ç®—å¢ç›Šä½¿ç”¨å¹¶è¡Œã€‚</strong></p>
<p>(æ¥è‡ª <a href="https://mp.weixin.qq.com/s/qongHAx-X2SWrUxjk8tg0A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/qongHAx-X2SWrUxjk8tg0A</a>)</p>
<hr>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œå†³ç­–æ ‘çš„å­¦ä¹ æœ€è€—æ—¶çš„ä¸€ä¸ªæ­¥éª¤å°±æ˜¯åœ¨æ¯æ¬¡å¯»æ‰¾æœ€ä½³åˆ†è£‚ç‚¹æ˜¯éƒ½éœ€è¦å¯¹ç‰¹å¾çš„å€¼è¿›è¡Œæ’åºã€‚è€Œ XGBoost åœ¨è®­ç»ƒä¹‹å‰å¯¹æ ¹æ®ç‰¹å¾å¯¹æ•°æ®è¿›è¡Œäº†æ’åºï¼Œç„¶åä¿å­˜åˆ°å—ç»“æ„ä¸­ï¼Œå¹¶åœ¨æ¯ä¸ªå—ç»“æ„ä¸­éƒ½é‡‡ç”¨äº†ç¨€ç–çŸ©é˜µå­˜å‚¨æ ¼å¼ï¼ˆCompressed Sparse Columns Formatï¼ŒCSCï¼‰è¿›è¡Œå­˜å‚¨ï¼Œåé¢çš„è®­ç»ƒè¿‡ç¨‹ä¸­ä¼šé‡å¤åœ°ä½¿ç”¨å—ç»“æ„ï¼Œå¯ä»¥å¤§å¤§å‡å°è®¡ç®—é‡ã€‚</p>
<ul>
<li>æ¯ä¸€ä¸ªå—ç»“æ„åŒ…æ‹¬ä¸€ä¸ªæˆ–å¤šä¸ªå·²ç»æ’åºå¥½çš„ç‰¹å¾ï¼›</li>
<li>ç¼ºå¤±ç‰¹å¾å€¼å°†ä¸è¿›è¡Œæ’åºï¼›</li>
<li>æ¯ä¸ªç‰¹å¾ä¼šå­˜å‚¨æŒ‡å‘æ ·æœ¬æ¢¯åº¦ç»Ÿè®¡å€¼çš„ç´¢å¼•ï¼Œæ–¹ä¾¿è®¡ç®—ä¸€é˜¶å¯¼å’ŒäºŒé˜¶å¯¼æ•°å€¼ï¼›</li>
</ul>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595668680481.png" alt="1595668680481"></p>
<p>è¿™ç§å—ç»“æ„å­˜å‚¨çš„ç‰¹å¾ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œæ–¹ä¾¿è®¡ç®—æœºè¿›è¡Œå¹¶è¡Œè®¡ç®—ã€‚åœ¨å¯¹èŠ‚ç‚¹è¿›è¡Œåˆ†è£‚æ—¶éœ€è¦é€‰æ‹©å¢ç›Šæœ€å¤§çš„ç‰¹å¾ä½œä¸ºåˆ†è£‚ï¼Œè¿™æ—¶å„ä¸ªç‰¹å¾çš„å¢ç›Šè®¡ç®—å¯ä»¥åŒæ—¶è¿›è¡Œï¼Œè¿™ä¹Ÿæ˜¯ Xgboost èƒ½å¤Ÿå®ç°åˆ†å¸ƒå¼æˆ–è€…å¤šçº¿ç¨‹è®¡ç®—çš„åŸå› ã€‚</p>
<h5 id="1-2-2-ç¼“å­˜è®¿é—®ä¼˜åŒ–ç®—æ³•"><a href="#1-2-2-ç¼“å­˜è®¿é—®ä¼˜åŒ–ç®—æ³•" class="headerlink" title="1.2.2 ç¼“å­˜è®¿é—®ä¼˜åŒ–ç®—æ³•"></a>1.2.2 ç¼“å­˜è®¿é—®ä¼˜åŒ–ç®—æ³•</h5><p>å—ç»“æ„çš„è®¾è®¡å¯ä»¥å‡å°‘èŠ‚ç‚¹åˆ†è£‚æ—¶çš„è®¡ç®—é‡ï¼Œä½†ç‰¹å¾å€¼é€šè¿‡ç´¢å¼•è®¿é—®æ ·æœ¬æ¢¯åº¦ç»Ÿè®¡å€¼çš„è®¾è®¡ä¼šå¯¼è‡´è®¿é—®æ“ä½œçš„å†…å­˜ç©ºé—´ä¸è¿ç»­ï¼Œè¿™æ ·ä¼šé€ æˆç¼“å­˜å‘½ä¸­ç‡ä½ï¼Œä»è€Œå½±å“åˆ°ç®—æ³•çš„æ•ˆç‡ã€‚</p>
<p>ä¸ºäº†è§£å†³ç¼“å­˜å‘½ä¸­ç‡ä½çš„é—®é¢˜ï¼ŒXGBoost æå‡ºäº†ç¼“å­˜è®¿é—®ä¼˜åŒ–ç®—æ³•ï¼šä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€ä¸ªè¿ç»­çš„ç¼“å­˜åŒºï¼Œå°†éœ€è¦çš„æ¢¯åº¦ä¿¡æ¯å­˜æ”¾åœ¨ç¼“å†²åŒºä¸­ï¼Œè¿™æ ·å°±æ˜¯å®ç°äº†éè¿ç»­ç©ºé—´åˆ°è¿ç»­ç©ºé—´çš„è½¬æ¢ï¼Œæé«˜äº†ç®—æ³•æ•ˆç‡ã€‚</p>
<p>æ­¤å¤–é€‚å½“è°ƒæ•´å—å¤§å°ï¼Œä¹Ÿå¯ä»¥æœ‰åŠ©äºç¼“å­˜ä¼˜åŒ–ã€‚</p>
<h5 id="1-2-3-â€œæ ¸å¤–â€å—è®¡ç®—"><a href="#1-2-3-â€œæ ¸å¤–â€å—è®¡ç®—" class="headerlink" title="1.2.3 â€œæ ¸å¤–â€å—è®¡ç®—"></a>1.2.3 â€œæ ¸å¤–â€å—è®¡ç®—</h5><p>å½“æ•°æ®é‡è¿‡å¤§æ—¶æ— æ³•å°†æ•°æ®å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåªèƒ½å…ˆå°†æ— æ³•åŠ è½½åˆ°å†…å­˜ä¸­çš„æ•°æ®æš‚å­˜åˆ°ç¡¬ç›˜ä¸­ï¼Œç›´åˆ°éœ€è¦æ—¶å†è¿›è¡ŒåŠ è½½è®¡ç®—ï¼Œè€Œè¿™ç§æ“ä½œå¿…ç„¶æ¶‰åŠåˆ°å› å†…å­˜ä¸ç¡¬ç›˜é€Ÿåº¦ä¸åŒè€Œé€ æˆçš„èµ„æºæµªè´¹å’Œæ€§èƒ½ç“¶é¢ˆã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒXGBoost ç‹¬ç«‹ä¸€ä¸ªçº¿ç¨‹ä¸“é—¨ç”¨äºä»ç¡¬ç›˜è¯»å…¥æ•°æ®ï¼Œä»¥å®ç°å¤„ç†æ•°æ®å’Œè¯»å…¥æ•°æ®åŒæ—¶è¿›è¡Œã€‚</p>
<p>æ­¤å¤–ï¼ŒXGBoost è¿˜ç”¨äº†ä¸¤ç§æ–¹æ³•æ¥é™ä½ç¡¬ç›˜è¯»å†™çš„å¼€é”€ï¼š</p>
<ul>
<li>å—å‹ç¼©ï¼šå¯¹ Block è¿›è¡ŒæŒ‰åˆ—å‹ç¼©ï¼Œå¹¶åœ¨è¯»å–æ—¶è¿›è¡Œè§£å‹ï¼›</li>
<li>å—æ‹†åˆ†ï¼šå°†æ¯ä¸ªå—å­˜å‚¨åˆ°ä¸åŒçš„ç£ç›˜ä¸­ï¼Œä»å¤šä¸ªç£ç›˜è¯»å–å¯ä»¥å¢åŠ ååé‡ã€‚</li>
</ul>
<h4 id="1-3-ä¼˜ç¼ºç‚¹"><a href="#1-3-ä¼˜ç¼ºç‚¹" class="headerlink" title="1.3 ä¼˜ç¼ºç‚¹"></a>1.3 ä¼˜ç¼ºç‚¹</h4><h5 id="1-3-1-ä¼˜ç‚¹"><a href="#1-3-1-ä¼˜ç‚¹" class="headerlink" title="1.3.1 ä¼˜ç‚¹"></a>1.3.1 ä¼˜ç‚¹</h5><ol>
<li>ç²¾åº¦æ›´é«˜ï¼šGBDT åªç”¨åˆ°ä¸€é˜¶æ³°å‹’å±•å¼€ï¼Œè€Œ XGBoost  å¯¹æŸå¤±å‡½æ•°è¿›è¡Œäº†äºŒé˜¶æ³°å‹’å±•å¼€ã€‚XGBoost å¼•å…¥äºŒé˜¶å¯¼ä¸€æ–¹é¢æ˜¯ä¸ºäº†å¢åŠ ç²¾åº¦ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸ºäº†èƒ½å¤Ÿè‡ªå®šä¹‰æŸå¤±å‡½æ•°ï¼ŒäºŒé˜¶æ³°å‹’å±•å¼€å¯ä»¥è¿‘ä¼¼å¤§é‡æŸå¤±å‡½æ•°ï¼›</li>
<li>çµæ´»æ€§æ›´å¼ºï¼šGBDT ä»¥ CART ä½œä¸ºåŸºåˆ†ç±»å™¨ï¼ŒXGBoost ä¸ä»…æ”¯æŒ CART è¿˜æ”¯æŒçº¿æ€§åˆ†ç±»å™¨ï¼Œï¼ˆä½¿ç”¨çº¿æ€§åˆ†ç±»å™¨çš„ XGBoost ç›¸å½“äºå¸¦ L1 å’Œ L2 æ­£åˆ™åŒ–é¡¹çš„Logisticå›å½’ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰æˆ–è€…çº¿æ€§å›å½’ï¼ˆå›å½’é—®é¢˜ï¼‰ï¼‰ã€‚æ­¤å¤–ï¼ŒXGBoost å·¥å…·æ”¯æŒè‡ªå®šä¹‰æŸå¤±å‡½æ•°ï¼Œåªéœ€å‡½æ•°æ”¯æŒä¸€é˜¶å’ŒäºŒé˜¶æ±‚å¯¼ï¼›</li>
<li>æ­£åˆ™åŒ–ï¼šXGBoost åœ¨ç›®æ ‡å‡½æ•°ä¸­åŠ å…¥äº†æ­£åˆ™é¡¹ï¼Œç”¨äºæ§åˆ¶æ¨¡å‹çš„å¤æ‚åº¦ã€‚æ­£åˆ™é¡¹é‡ŒåŒ…å«äº†æ ‘çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°ã€å¶å­èŠ‚ç‚¹æƒé‡çš„ L2 èŒƒå¼ã€‚æ­£åˆ™é¡¹é™ä½äº†æ¨¡å‹çš„æ–¹å·®ï¼Œä½¿å­¦ä¹ å‡ºæ¥çš„æ¨¡å‹æ›´åŠ ç®€å•ï¼Œæœ‰åŠ©äºé˜²æ­¢è¿‡æ‹Ÿåˆï¼›</li>
<li>Shrinkageï¼ˆç¼©å‡ï¼‰ï¼šç›¸å½“äºå­¦ä¹ é€Ÿç‡ã€‚XGBoost åœ¨è¿›è¡Œå®Œä¸€æ¬¡è¿­ä»£åï¼Œä¼šå°†å¶å­èŠ‚ç‚¹çš„æƒé‡ä¹˜ä¸Šè¯¥ç³»æ•°ï¼Œä¸»è¦æ˜¯ä¸ºäº†å‰Šå¼±æ¯æ£µæ ‘çš„å½±å“ï¼Œè®©åé¢æœ‰æ›´å¤§çš„å­¦ä¹ ç©ºé—´ï¼›</li>
<li>åˆ—æŠ½æ ·ï¼šXGBoost å€Ÿé‰´äº†éšæœºæ£®æ—çš„åšæ³•ï¼Œæ”¯æŒåˆ—æŠ½æ ·ï¼Œä¸ä»…èƒ½é™ä½è¿‡æ‹Ÿåˆï¼Œè¿˜èƒ½å‡å°‘è®¡ç®—ï¼›</li>
<li>ç¼ºå¤±å€¼å¤„ç†ï¼šXGBoost é‡‡ç”¨çš„ç¨€ç–æ„ŸçŸ¥ç®—æ³•æå¤§çš„åŠ å¿«äº†èŠ‚ç‚¹åˆ†è£‚çš„é€Ÿåº¦ï¼›</li>
<li>å¯ä»¥å¹¶è¡ŒåŒ–æ“ä½œï¼šå—ç»“æ„å¯ä»¥å¾ˆå¥½çš„æ”¯æŒå¹¶è¡Œè®¡ç®—ã€‚</li>
</ol>
<h5 id="1-3-2-ç¼ºç‚¹"><a href="#1-3-2-ç¼ºç‚¹" class="headerlink" title="1.3.2 ç¼ºç‚¹"></a>1.3.2 ç¼ºç‚¹</h5><ol>
<li>è™½ç„¶åˆ©ç”¨é¢„æ’åºå’Œè¿‘ä¼¼ç®—æ³•å¯ä»¥é™ä½å¯»æ‰¾æœ€ä½³åˆ†è£‚ç‚¹çš„è®¡ç®—é‡ï¼Œä½†åœ¨èŠ‚ç‚¹åˆ†è£‚è¿‡ç¨‹ä¸­ä»éœ€è¦éå†æ•°æ®é›†ï¼›</li>
<li>é¢„æ’åºè¿‡ç¨‹çš„ç©ºé—´å¤æ‚åº¦è¿‡é«˜ï¼Œä¸ä»…éœ€è¦å­˜å‚¨ç‰¹å¾å€¼ï¼Œè¿˜éœ€è¦å­˜å‚¨ç‰¹å¾å¯¹åº”æ ·æœ¬çš„æ¢¯åº¦ç»Ÿè®¡å€¼çš„ç´¢å¼•ï¼Œç›¸å½“äºæ¶ˆè€—äº†ä¸¤å€çš„å†…å­˜ã€‚</li>
</ol>
<h4 id="1-4-ä¸GBDTçš„æ¯”è¾ƒ"><a href="#1-4-ä¸GBDTçš„æ¯”è¾ƒ" class="headerlink" title="1.4 ä¸GBDTçš„æ¯”è¾ƒ"></a><span id="jump3.1.4">1.4 ä¸GBDTçš„æ¯”è¾ƒ</span></h4><p>æ¥è‡ª <a href="https://mp.weixin.qq.com/s/qongHAx-X2SWrUxjk8tg0A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/qongHAx-X2SWrUxjk8tg0A</a></p>
<h5 id="1-4-1-å…±åŒç‚¹"><a href="#1-4-1-å…±åŒç‚¹" class="headerlink" title="1.4.1 å…±åŒç‚¹"></a>1.4.1 å…±åŒç‚¹</h5><ul>
<li><p>äºŒè€…éƒ½æ˜¯ç”±ä¸€å †å›å½’æ ‘æ„æˆçš„æ¨¡å‹ï¼ˆæœ¬æ¬¡è®­ç»ƒçš„æ¨¡å‹åŸºäºä¸Šæ¬¡è®­ç»ƒçš„æ¨¡å‹ï¼‰ã€‚ä¼ ç»ŸGBDTä»¥CARTä½œä¸ºåŸºåˆ†ç±»å™¨ï¼Œxgboostè¿˜æ”¯æŒçº¿æ€§åˆ†ç±»å™¨ï¼Œè¿™ä¸ªæ—¶å€™xgboostç›¸å½“äºå¸¦L1å’ŒL2æ­£åˆ™åŒ–é¡¹çš„Logisticå›å½’ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰æˆ–è€…çº¿æ€§å›å½’ï¼ˆå›å½’é—®é¢˜ï¼‰ã€‚</p>
</li>
<li><p>äºŒéƒ½æ˜¯æœ€å°åŒ–æŸå¤±å‡½æ•°çš„æ€æƒ³ï¼Œæ±‚æœ€ä¼˜çš„å†³ç­–æ ‘ã€‚</p>
</li>
</ul>
<h5 id="1-4-2-ä¸åŒç‚¹"><a href="#1-4-2-ä¸åŒç‚¹" class="headerlink" title="1.4.2 ä¸åŒç‚¹"></a>1.4.2 ä¸åŒç‚¹</h5><ul>
<li><p>ç¬¬ä¸€çœ¼çš„æ„Ÿè§‰XGBoostæ›´å¥½çš„åœ°æ–¹å…¶å®å°±æ˜¯<strong>æ­£åˆ™åŒ–+å¹¶è¡ŒåŒ–ã€‚</strong></p>
</li>
<li><p>äºŒè€…æœ€å°åŒ–æŸå¤±å‡½æ•°çš„æ–¹æ³•ä¸åŒã€‚GBDTä½¿ç”¨çš„æ˜¯Gradient Descentæ–¹æ³•ï¼Œä¼˜åŒ–æ—¶åªç”¨åˆ°äº†æŸå¤±å‡½æ•°çš„ä¸€é˜¶å¯¼æ•°ä¿¡æ¯ï¼ˆæœ‰äººè¯´æ®‹å·®å…¶å®å°±æ˜¯è¿™é‡Œçš„æ¢¯åº¦ï¼Œä¸æ˜¯å¾ˆç†è§£ï¼‰ï¼Œæ‹Ÿåˆä¸Šä¸€ä¸ªæ¨¡å‹äº§ç”Ÿçš„æ®‹å·®ã€‚è€ŒXGBoostä½¿ç”¨çš„åˆ™æ˜¯ç‰›é¡¿æ³•ï¼Œä¼˜åŒ–æ—¶åŒæ—¶ç”¨åˆ°äº†ä¸€é˜¶å¯¼æ•°å’ŒäºŒé˜¶å¯¼æ•°ä¿¡æ¯(âˆ’<em>gi</em>(1+<em>hi</em>))ï¼Œå…¶å®è¿™ä¸ªå€¼å°±æ˜¯æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„é¢„æµ‹å€¼ï¼ˆå¯¹æ¨å¯¼è¿‡ç¨‹æœ‰å…´è¶£çš„æœ‹å‹è¯·ç§»æ­¥å‚è€ƒåšæ–‡2ï¼‰ã€‚</p>
</li>
<li><p>GBDTåˆ†å‰²ç‚¹çš„é€‰æ‹©é€šè¿‡æšä¸¾è®­ç»ƒæ ·æœ¬é›†ä¸Šçš„ç‰¹å¾å€¼æ¥å®Œæˆï¼Œåˆ†å‰²ç‚¹çš„é€‰æ‹©ä¾æ®åˆ™æ˜¯å‡å°‘Lossã€‚ XGBoostä½¿ç”¨çš„åˆ™æ˜¯å°†æœ€å°åŒ–çš„ç›®æ ‡å‡½æ•°å€¼ä½œä¸ºæ‰“åˆ†å‡½æ•°ï¼Œæå‡ºäº†ä¸€ä¸ªGainçš„å…¬å¼æ¥åˆ’åˆ†æ ·æœ¬ã€‚</p>
</li>
<li><p>XGBoostè¿˜æ”¯æŒè‡ªå®šä¹‰æŸå¤±å‡½æ•°ï¼Œåªè¦èƒ½å¤ŸäºŒé˜¶æ³°å‹’å±•å¼€çš„å‡½æ•°éƒ½å¯ä»¥ä½œä¸ºæŸå¤±å‡½æ•°ã€‚</p>
</li>
<li><p>é‡‡æ ·æ–¹æ³•ï¼ˆShrinkageï¼‰</p>
</li>
<li><p>åˆ†è£‚ç»“ç‚¹çš„ç®—æ³•ï¼ˆWeighted Quantile Sketchï¼‰</p>
</li>
</ul>
<h3 id="XGBooståŠ¨æ‰‹å®è·µ"><a href="#XGBooståŠ¨æ‰‹å®è·µ" class="headerlink" title="XGBooståŠ¨æ‰‹å®è·µ"></a>XGBooståŠ¨æ‰‹å®è·µ</h3><p>æœ¬éƒ¨åˆ†å†…å®¹æ¥æºäº <a href="https://mp.weixin.qq.com/s/AAKPSIHk1iUqCeUibrORqQ" target="_blank" rel="noopener">æˆ‘çš„XGBoostå­¦ä¹ ç»å†åŠåŠ¨æ‰‹å®è·µ</a></p>
<h4 id="1-å¼•å…¥åŸºæœ¬å·¥å…·åº“"><a href="#1-å¼•å…¥åŸºæœ¬å·¥å…·åº“" class="headerlink" title="1. å¼•å…¥åŸºæœ¬å·¥å…·åº“"></a>1. å¼•å…¥åŸºæœ¬å·¥å…·åº“</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¼•å…¥åŸºæœ¬å·¥å…·åº“</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.style.use(<span class="string">"ggplot"</span>)</span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>
<h4 id="2-XGBooståŸç”Ÿå·¥å…·åº“çš„ä¸Šæ‰‹"><a href="#2-XGBooståŸç”Ÿå·¥å…·åº“çš„ä¸Šæ‰‹" class="headerlink" title="2. XGBooståŸç”Ÿå·¥å…·åº“çš„ä¸Šæ‰‹"></a>2. XGBooståŸç”Ÿå·¥å…·åº“çš„ä¸Šæ‰‹</h4><p>æ›´è¯¦ç»†çš„å‚æ•°è®¾ç½®è§åé¢</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb  <span class="comment"># å¼•å…¥å·¥å…·åº“</span></span><br><span class="line"><span class="comment"># read in data</span></span><br><span class="line"><span class="comment"># XGBoostçš„ä¸“å±æ•°æ®æ ¼å¼ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨dataframeæˆ–è€…ndarray</span></span><br><span class="line">dtrain = xgb.DMatrix(<span class="string">'demo/data/agaricus.txt.train'</span>)   </span><br><span class="line">dtest = xgb.DMatrix(<span class="string">'demo/data/agaricus.txt.test'</span>)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># specify parameters via map</span></span><br><span class="line"><span class="comment"># è®¾ç½®XGBçš„å‚æ•°ï¼Œä½¿ç”¨å­—å…¸å½¢å¼ä¼ å…¥</span></span><br><span class="line">param = &#123;<span class="string">'max_depth'</span>:<span class="number">2</span>, <span class="string">'eta'</span>:<span class="number">1</span>, <span class="string">'objective'</span>:<span class="string">'binary:logistic'</span> &#125;    </span><br><span class="line"></span><br><span class="line">num_round = <span class="number">2</span>     <span class="comment"># ä½¿ç”¨çº¿ç¨‹æ•°</span></span><br><span class="line">bst = xgb.train(param, dtrain, num_round)   <span class="comment"># è®­ç»ƒ</span></span><br><span class="line"><span class="comment"># make prediction</span></span><br><span class="line">preds = bst.predict(dtest)   <span class="comment"># é¢„æµ‹</span></span><br></pre></td></tr></table></figure>
<h4 id="3-XGBoostçš„å‚æ•°è®¾ç½®"><a href="#3-XGBoostçš„å‚æ•°è®¾ç½®" class="headerlink" title="3. XGBoostçš„å‚æ•°è®¾ç½®"></a>3. XGBoostçš„å‚æ•°è®¾ç½®</h4><p>(æ‹¬å·å†…çš„åç§°ä¸ºsklearnæ¥å£å¯¹åº”çš„å‚æ•°åå­—)</p>
<p><span style="background:yellow">æ›´è¯¦ç»†çš„ä»‹ç»è§ <a href="https://xgboost.readthedocs.io/en/latest/parameter.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>.</span></p>
<p>XGBoostçš„å‚æ•°åˆ†ä¸ºä¸‰ç§ï¼š</p>
<h5 id="3-1-é€šç”¨å‚æ•°"><a href="#3-1-é€šç”¨å‚æ•°" class="headerlink" title="3.1. é€šç”¨å‚æ•°"></a>3.1. é€šç”¨å‚æ•°</h5><blockquote>
<ul>
<li>booster: ä½¿ç”¨å“ªä¸ªå¼±å­¦ä¹ å™¨è®­ç»ƒï¼Œé»˜è®¤gbtreeï¼Œå¯é€‰gbtreeï¼Œgblinearæˆ– dart<ul>
<li>boosterå‚æ•°ï¼šæ§åˆ¶æ¯ä¸€æ­¥çš„booster (tree/regression). å› ä¸ºtreeçš„æ€§èƒ½æ¯”çº¿æ€§å›å½’å¥½å¾—å¤šï¼Œå› æ­¤æˆ‘ä»¬å¾ˆå°‘ç”¨çº¿æ€§å›å½’. <code>gbtree</code> and <code>dart</code> use tree based models while <code>gblinear</code> uses linear functions.</li>
</ul>
</li>
<li>nthreadï¼šç”¨äºè¿è¡ŒXGBoostçš„å¹¶è¡Œçº¿ç¨‹æ•°ï¼Œé»˜è®¤ä¸ºæœ€å¤§å¯ç”¨çº¿ç¨‹æ•°</li>
<li>verbosityï¼šæ‰“å°æ¶ˆæ¯çš„è¯¦ç»†ç¨‹åº¦ã€‚é»˜è®¤å€¼ä¸º1ï¼Œæœ‰æ•ˆå€¼ä¸º0ï¼ˆé™é»˜ï¼‰ï¼Œ1ï¼ˆè­¦å‘Šï¼‰ï¼Œ2ï¼ˆä¿¡æ¯ï¼‰ï¼Œ3ï¼ˆè°ƒè¯•ï¼‰ã€‚</li>
</ul>
</blockquote>
<p>tree boosterï¼š</p>
<blockquote>
<ul>
<li><p>Tree Boosterçš„å‚æ•°ï¼š</p>
</li>
<li><ul>
<li><p>etaï¼ˆlearning_rateï¼‰ï¼šlearning_rateï¼Œåœ¨æ›´æ–°ä¸­ä½¿ç”¨æ­¥é•¿æ”¶ç¼©ä»¥é˜²æ­¢è¿‡åº¦æ‹Ÿåˆï¼Œé»˜è®¤= 0.3ï¼ŒèŒƒå›´ï¼š[0,1]ï¼›å…¸å‹å€¼ä¸€èˆ¬è®¾ç½®ä¸ºï¼š0.01-0.2</p>
</li>
<li><p>gammaï¼ˆmin_split_lossï¼‰ï¼šé»˜è®¤= 0ï¼Œåˆ†è£‚èŠ‚ç‚¹æ—¶ï¼ŒæŸå¤±å‡½æ•°å‡å°å€¼åªæœ‰å¤§äºç­‰äºgammaèŠ‚ç‚¹æ‰åˆ†è£‚ï¼Œgammaå€¼è¶Šå¤§ï¼Œç®—æ³•è¶Šä¿å®ˆï¼Œè¶Šä¸å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œä½†æ€§èƒ½å°±ä¸ä¸€å®šèƒ½ä¿è¯ï¼Œéœ€è¦å¹³è¡¡ã€‚èŒƒå›´ï¼š[0ï¼Œâˆ]</p>
</li>
<li><p>max_depthï¼šé»˜è®¤= 6ï¼Œä¸€æ£µæ ‘çš„æœ€å¤§æ·±åº¦ã€‚å¢åŠ æ­¤å€¼å°†ä½¿æ¨¡å‹æ›´å¤æ‚ï¼Œå¹¶ä¸”æ›´å¯èƒ½è¿‡åº¦æ‹Ÿåˆã€‚èŒƒå›´ï¼š[0ï¼Œâˆ]</p>
</li>
<li><p>min_child_weightï¼šé»˜è®¤å€¼= 1ï¼Œå¦‚æœæ–°åˆ†è£‚çš„èŠ‚ç‚¹çš„æ ·æœ¬æƒé‡å’Œå°äºmin_child_weightåˆ™åœæ­¢åˆ†è£‚ ã€‚è¿™ä¸ªå¯ä»¥ç”¨æ¥å‡å°‘è¿‡æ‹Ÿåˆï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½å¤ªé«˜ï¼Œä¼šå¯¼è‡´æ¬ æ‹Ÿåˆã€‚èŒƒå›´ï¼š[0ï¼Œâˆ]</p>
</li>
<li><p>max_delta_stepï¼šé»˜è®¤= 0ï¼Œå…è®¸æ¯ä¸ªå¶å­è¾“å‡ºçš„æœ€å¤§å¢é‡æ­¥é•¿ã€‚å¦‚æœå°†è¯¥å€¼è®¾ç½®ä¸º0ï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰çº¦æŸã€‚å¦‚æœå°†å…¶è®¾ç½®ä¸ºæ­£å€¼ï¼Œåˆ™å¯ä»¥å¸®åŠ©ä½¿æ›´æ–°æ­¥éª¤æ›´åŠ ä¿å®ˆã€‚é€šå¸¸ä¸éœ€è¦æ­¤å‚æ•°ï¼Œä½†æ˜¯å½“ç±»æåº¦ä¸å¹³è¡¡æ—¶ï¼Œå®ƒå¯èƒ½æœ‰åŠ©äºé€»è¾‘å›å½’ã€‚å°†å…¶è®¾ç½®ä¸º1-10çš„å€¼å¯èƒ½æœ‰åŠ©äºæ§åˆ¶æ›´æ–°ã€‚èŒƒå›´ï¼š[0ï¼Œâˆ]</p>
</li>
<li><p>subsampleï¼šé»˜è®¤å€¼= 1ï¼Œæ„å»ºæ¯æ£µæ ‘å¯¹æ ·æœ¬çš„é‡‡æ ·ç‡ï¼Œå¦‚æœè®¾ç½®æˆ0.5ï¼ŒXGBoostä¼šéšæœºé€‰æ‹©ä¸€åŠçš„æ ·æœ¬ä½œä¸ºè®­ç»ƒé›†ã€‚èŒƒå›´ï¼šï¼ˆ0,1]</p>
</li>
<li><p>sampling_methodï¼šé»˜è®¤= uniformï¼Œç”¨äºå¯¹è®­ç»ƒå®ä¾‹è¿›è¡Œé‡‡æ ·çš„æ–¹æ³•ã€‚</p>
</li>
<li><ul>
<li>uniformï¼šæ¯ä¸ªè®­ç»ƒå®ä¾‹çš„é€‰æ‹©æ¦‚ç‡å‡ç­‰ã€‚é€šå¸¸å°†subsample&gt; = 0.5 è®¾ç½® ä¸ºè‰¯å¥½çš„æ•ˆæœã€‚</li>
<li>gradient_basedï¼šæ¯ä¸ªè®­ç»ƒå®ä¾‹çš„é€‰æ‹©æ¦‚ç‡ä¸è§„åˆ™åŒ–çš„æ¢¯åº¦ç»å¯¹å€¼æˆæ­£æ¯”ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ $\sqrt{g^2+\lambda h^2}$ï¼Œsubsampleå¯ä»¥è®¾ç½®ä¸ºä½è‡³0.1ï¼Œè€Œä¸ä¼šæŸå¤±æ¨¡å‹ç²¾åº¦ã€‚</li>
</ul>
</li>
<li><p>colsample_bytreeï¼šé»˜è®¤= 1ï¼Œåˆ—é‡‡æ ·ç‡ï¼Œä¹Ÿå°±æ˜¯ç‰¹å¾é‡‡æ ·ç‡ã€‚èŒƒå›´ä¸ºï¼ˆ0ï¼Œ1]</p>
</li>
<li><p>lambdaï¼ˆreg_lambdaï¼‰ï¼šé»˜è®¤=1ï¼ŒL2æ­£åˆ™åŒ–æƒé‡é¡¹ã€‚å¢åŠ æ­¤å€¼å°†ä½¿æ¨¡å‹æ›´åŠ ä¿å®ˆã€‚</p>
</li>
<li><p>alphaï¼ˆreg_alphaï¼‰ï¼šé»˜è®¤= 0ï¼Œæƒé‡çš„L1æ­£åˆ™åŒ–é¡¹ã€‚å¢åŠ æ­¤å€¼å°†ä½¿æ¨¡å‹æ›´åŠ ä¿å®ˆã€‚</p>
</li>
<li><p>tree_methodï¼šé»˜è®¤=autoï¼ŒXGBoostä¸­ä½¿ç”¨çš„æ ‘æ„å»ºç®—æ³•ã€‚å¯é€‰ï¼š<code>auto</code>, <code>exact</code>, <code>approx</code>, <code>hist</code>, <code>gpu_hist</code></p>
</li>
<li><ul>
<li>autoï¼šä½¿ç”¨å¯å‘å¼é€‰æ‹©æœ€å¿«çš„æ–¹æ³•ã€‚</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>å¯¹äºå°å‹æ•°æ®é›†ï¼Œå°†ä½¿ç”¨ç²¾ç¡®è´ªå©ª<code>exact</code>ã€‚</li>
<li>å¯¹äºè¾ƒå¤§çš„æ•°æ®é›†ï¼Œå°†é€‰æ‹©è¿‘ä¼¼ç®—æ³•<code>approx</code>ã€‚å»ºè®®å°è¯•<code>hist</code>ï¼Œ<code>gpu_hist</code>ï¼Œå¯¹äºå¤§é‡çš„æ•°æ®æœ‰æ›´é«˜çš„æ€§èƒ½ã€‚<code>gpu_hist</code>æ”¯æŒ external memory å¤–éƒ¨å­˜å‚¨å™¨ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li>exactï¼šç²¾ç¡®çš„è´ªå©ªç®—æ³•ã€‚æšä¸¾æ‰€æœ‰æ‹†åˆ†çš„å€™é€‰ç‚¹ã€‚</li>
<li>approxï¼šä½¿ç”¨åˆ†ä½æ•°å’Œæ¢¯åº¦ç›´æ–¹å›¾çš„è¿‘ä¼¼è´ªå©ªç®—æ³•ã€‚</li>
<li>histï¼šæ›´å¿«çš„ç›´æ–¹å›¾ä¼˜åŒ–çš„è¿‘ä¼¼è´ªå©ªç®—æ³•ã€‚ï¼ˆLightGBMä¹Ÿæ˜¯ä½¿ç”¨ç›´æ–¹å›¾ç®—æ³•ï¼‰</li>
<li>gpu_histï¼šGPU histç®—æ³•çš„å®ç°ã€‚</li>
</ul>
</li>
<li><p>scale_pos_weight: é»˜è®¤å€¼1ï¼Œæ§åˆ¶æ­£è´Ÿæƒé‡çš„å¹³è¡¡ï¼Œè¿™å¯¹äºä¸å¹³è¡¡çš„ç±»åˆ«å¾ˆæœ‰ç”¨ã€‚Kaggleç«èµ›ä¸€èˆ¬è®¾ç½® sum(negative instances) / sum(positive instances)ï¼Œåœ¨ç±»åˆ«é«˜åº¦ä¸å¹³è¡¡çš„æƒ…å†µä¸‹ï¼Œå°†å‚æ•°è®¾ç½®å¤§äº0ï¼Œå¯ä»¥åŠ å¿«æ”¶æ•›ã€‚</p>
</li>
<li><p>num_parallel_treeï¼šé»˜è®¤=1ï¼Œæ¯æ¬¡è¿­ä»£æœŸé—´æ„é€ çš„å¹¶è¡Œæ ‘çš„æ•°é‡ã€‚æ­¤é€‰é¡¹ç”¨äºæ”¯æŒå¢å¼ºå‹éšæœºæ£®æ—ã€‚</p>
</li>
<li><p>monotone_constraintsï¼šå¯å˜å•è°ƒæ€§çš„çº¦æŸï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœæœ‰éå¸¸å¼ºçƒˆçš„å…ˆéªŒä¿¡å¿µè®¤ä¸ºçœŸå®çš„å…³ç³»å…·æœ‰ä¸€å®šçš„è´¨é‡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨çº¦æŸæ¡ä»¶æ¥æé«˜æ¨¡å‹çš„é¢„æµ‹æ€§èƒ½ã€‚ï¼ˆä¾‹å¦‚params_constrained[â€˜monotone_constraintsâ€™] = â€œ(1,-1)â€ï¼Œ(1,-1)å‘Šè¯‰XGBoostå¯¹ç¬¬ä¸€ä¸ªé¢„æµ‹å˜é‡æ–½åŠ å¢åŠ çš„çº¦æŸï¼Œå¯¹ç¬¬äºŒä¸ªé¢„æµ‹å˜é‡æ–½åŠ å‡å°çš„çº¦æŸã€‚ï¼‰</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<p>linear boosterï¼š</p>
<blockquote>
<ul>
<li><p>Linear Boosterçš„å‚æ•°ï¼š</p>
</li>
<li><ul>
<li><p>lambdaï¼ˆreg_lambdaï¼‰ï¼šé»˜è®¤= 0ï¼ŒL2æ­£åˆ™åŒ–æƒé‡é¡¹ã€‚å¢åŠ æ­¤å€¼å°†ä½¿æ¨¡å‹æ›´åŠ ä¿å®ˆã€‚å½’ä¸€åŒ–ä¸ºè®­ç»ƒç¤ºä¾‹æ•°ã€‚(Normalised to number of training examples.)</p>
</li>
<li><p>alphaï¼ˆreg_alphaï¼‰ï¼šé»˜è®¤= 0ï¼Œæƒé‡çš„L1æ­£åˆ™åŒ–é¡¹ã€‚å¢åŠ æ­¤å€¼å°†ä½¿æ¨¡å‹æ›´åŠ ä¿å®ˆã€‚å½’ä¸€åŒ–ä¸ºè®­ç»ƒç¤ºä¾‹æ•°ã€‚</p>
</li>
<li><p>updaterï¼šé»˜è®¤= shotgunã€‚</p>
</li>
<li><ul>
<li>shotgunï¼šåŸºäºshotgunç®—æ³•çš„å¹³è¡Œåæ ‡ä¸‹é™ç®—æ³•ã€‚ä½¿ç”¨â€œ hogwildâ€å¹¶è¡Œæ€§ï¼Œå› æ­¤æ¯æ¬¡è¿è¡Œéƒ½äº§ç”Ÿä¸ç¡®å®šçš„è§£å†³æ–¹æ¡ˆã€‚</li>
<li>coord_descentï¼šæ™®é€šåæ ‡ä¸‹é™ç®—æ³•ã€‚åŒæ ·æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä½†ä»ä¼šäº§ç”Ÿç¡®å®šæ€§çš„è§£å†³æ–¹æ¡ˆã€‚</li>
</ul>
</li>
<li><p>feature_selectorï¼šé»˜è®¤= cyclicã€‚ç‰¹å¾é€‰æ‹©å’Œæ’åºæ–¹æ³•</p>
</li>
<li><ul>
<li>cyclicï¼šé€šè¿‡æ¯æ¬¡å¾ªç¯ä¸€ä¸ªç‰¹å¾æ¥å®ç°çš„ã€‚</li>
<li>shuffleï¼šç±»ä¼¼äºcyclicï¼Œä½†æ˜¯åœ¨æ¯æ¬¡æ›´æ–°ä¹‹å‰éƒ½æœ‰éšæœºçš„ç‰¹å¾å˜æ¢ã€‚</li>
<li>randomï¼šä¸€ä¸ªéšæœº(æœ‰æ”¾å›)ç‰¹å¾é€‰æ‹©å™¨ã€‚</li>
<li>greedyï¼šé€‰æ‹©æ¢¯åº¦æœ€å¤§çš„ç‰¹å¾ã€‚ï¼ˆè´ªå©ªé€‰æ‹©ï¼‰</li>
<li>thriftyï¼šè¿‘ä¼¼è´ªå©ªç‰¹å¾é€‰æ‹©ï¼ˆè¿‘ä¼¼äºgreedyï¼‰</li>
</ul>
</li>
<li><p>top_kï¼šé»˜è®¤å€¼ä¸º0ï¼Œè¦é€‰æ‹©çš„æœ€é‡è¦ç‰¹å¾æ•°ï¼ˆåœ¨greedyå’Œthriftyå†…ï¼‰ã€‚The number of top features to select in <code>greedy</code> and <code>thrifty</code> feature selector. The value of 0 means using all the features.</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="3-2-ä»»åŠ¡å‚æ•°"><a href="#3-2-ä»»åŠ¡å‚æ•°" class="headerlink" title="3.2. ä»»åŠ¡å‚æ•°"></a>3.2. ä»»åŠ¡å‚æ•°</h5><p>å­¦ä¹ ç›®æ ‡å‚æ•°ã€‚è¿™ä¸ªå‚æ•°ç”¨æ¥æ§åˆ¶ç†æƒ³çš„ä¼˜åŒ–ç›®æ ‡å’Œæ¯ä¸€æ­¥ç»“æœçš„åº¦é‡æ–¹æ³•ã€‚</p>
<blockquote>
<ul>
<li><p>objectiveï¼šé»˜è®¤=<code>reg:squarederror</code>ï¼Œè¡¨ç¤ºæœ€å°å¹³æ–¹è¯¯å·®ã€‚</p>
</li>
<li><ul>
<li><p><code>reg:squarederror</code>ï¼šæœ€å°å¹³æ–¹è¯¯å·®ã€‚</p>
</li>
<li><p><code>reg:squaredlogerror</code>ï¼šå¯¹æ•°å¹³æ–¹æŸå¤±ã€‚</p>
</li>
<li><p><code>reg:logistic</code>ï¼šé€»è¾‘å›å½’</p>
</li>
<li><p><code>reg:pseudohubererror</code>ï¼š ä½¿ç”¨ä¼ªHuberæŸå¤±è¿›è¡Œå›å½’ï¼Œè¿™æ˜¯ç»å¯¹æŸå¤±çš„ä¸¤å€å¯å¾®é€‰æ‹©ã€‚</p>
</li>
<li><p><code>binary:logistic</code>ï¼šlogistic regression for binary classification, output probability.</p>
</li>
<li><p><code>binary:logitraw</code>ï¼šlogistic regression for binary classification, output score before logistic transformation.</p>
</li>
<li><p><code>binary:hinge</code>ï¼šäºŒå…ƒåˆ†ç±»çš„é“°é“¾æŸå¤±(hinge loss)ã€‚è¿™ä½¿é¢„æµ‹ä¸º0æˆ–1ï¼Œè€Œä¸æ˜¯äº§ç”Ÿæ¦‚ç‡ã€‚ï¼ˆSVMå°±æ˜¯é“°é“¾æŸå¤±å‡½æ•°ï¼‰</p>
</li>
<li><p><code>count:poisson</code>ï¼šè®¡æ•°æ•°æ®çš„æ³Šæ¾å›å½’ï¼Œè¾“å‡ºæ³Šæ¾åˆ†å¸ƒçš„å¹³å‡å€¼ã€‚</p>
</li>
<li><p><code>survival:cox</code>ï¼šé’ˆå¯¹æ­£ç¡®çš„ï¼ˆright censoredï¼‰ç”Ÿå­˜æ—¶é—´æ•°æ®è¿›è¡ŒCoxå›å½’ï¼ˆè´Ÿå€¼è¢«è§†ä¸ºæ­£ç¡®çš„ç”Ÿå­˜æ—¶é—´ï¼‰ã€‚</p>
</li>
<li><p><code>survival:aft</code>ï¼šç”¨äºæ£€æŸ¥ç”Ÿå­˜æ—¶é—´æ•°æ®çš„åŠ é€Ÿæ•…éšœæ—¶é—´æ¨¡å‹ã€‚</p>
</li>
<li><p><code>aft_loss_distribution</code>ï¼šProbabilty Density Function used by <code>survival:aft</code> objective and <code>aft-nloglik</code> metric.</p>
</li>
<li><p><code>multi:softmax</code>ï¼šè®¾ç½®XGBoostä»¥ä½¿ç”¨softmaxç›®æ ‡è¿›è¡Œå¤šç±»åˆ†ç±»ï¼Œè¿˜éœ€è¦è®¾ç½®num_classï¼ˆç±»æ•°ï¼‰</p>
</li>
<li><p><code>multi:softprob</code>ï¼šä¸softmaxç›¸åŒï¼Œä½†è¾“å‡ºå‘é‡ï¼Œå¯ä»¥è¿›ä¸€æ­¥é‡æ•´ä¸ºçŸ©é˜µã€‚ç»“æœåŒ…å«å±äºæ¯ä¸ªç±»åˆ«çš„æ¯ä¸ªæ•°æ®ç‚¹çš„é¢„æµ‹æ¦‚ç‡ã€‚</p>
</li>
<li><p><code>rank:pairwise</code>ï¼šä½¿ç”¨LambdaMARTè¿›è¡Œæˆå¯¹æ’åï¼Œä»è€Œä½¿æˆå¯¹æŸå¤±æœ€å°åŒ–ã€‚</p>
</li>
<li><p><code>rank:ndcg</code>ï¼šä½¿ç”¨LambdaMARTè¿›è¡Œåˆ—è¡¨å¼æ’åï¼Œä½¿æ ‡å‡†åŒ–æŠ˜è®©ç´¯ç§¯æ”¶ç›Šï¼ˆNDCGï¼‰æœ€å¤§åŒ–ã€‚</p>
</li>
<li><p><code>rank:map</code>ï¼šä½¿ç”¨LambdaMARTè¿›è¡Œåˆ—è¡¨å¹³å‡æ’åï¼Œä½¿å¹³å‡å¹³å‡ç²¾åº¦ï¼ˆMAPï¼‰æœ€å¤§åŒ–ã€‚</p>
</li>
<li><p><code>reg:gamma</code>ï¼šä½¿ç”¨å¯¹æ•°é“¾æ¥(log-link)è¿›è¡Œä¼½é©¬å›å½’ã€‚è¾“å‡ºæ˜¯ä¼½é©¬åˆ†å¸ƒçš„å¹³å‡å€¼ã€‚</p>
</li>
<li><p><code>reg:tweedie</code>ï¼šä½¿ç”¨å¯¹æ•°é“¾æ¥è¿›è¡ŒTweedieå›å½’ã€‚</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>eval_metricï¼šéªŒè¯æ•°æ®çš„è¯„ä¼°æŒ‡æ ‡ï¼Œå°†æ ¹æ®objectiveåˆ†é…é»˜è®¤æŒ‡æ ‡ (rmse for regression, and error for classification, mean average precision for ranking)ï¼Œç”¨æˆ·å¯ä»¥æ·»åŠ å¤šä¸ªè¯„ä¼°æŒ‡æ ‡ (Python users: remember to pass the metrics in as list of parameters pairs instead of map)</p>
</li>
<li><ul>
<li><p>rmseï¼Œå‡æ–¹æ ¹è¯¯å·®ï¼›</p>
</li>
<li><p>rmsleï¼šå‡æ–¹æ ¹å¯¹æ•°è¯¯å·®ï¼›Default metric of <code>reg:squaredlogerror</code> objective.</p>
</li>
<li><p>maeï¼šå¹³å‡ç»å¯¹è¯¯å·®ï¼›</p>
</li>
<li><p>mpheï¼šå¹³å‡ä¼ªHuberé”™è¯¯ï¼›</p>
</li>
<li><p>loglossï¼šè´Ÿå¯¹æ•°ä¼¼ç„¶ï¼›</p>
</li>
<li><p>errorï¼šäºŒå…ƒåˆ†ç±»é”™è¯¯ç‡ï¼› It is calculated as <code>#(wrong cases)/#(all cases)</code></p>
</li>
<li><p>merrorï¼šå¤šç±»åˆ†ç±»é”™è¯¯ç‡ï¼›</p>
</li>
<li><p>mloglossï¼šå¤šç±»loglossï¼›</p>
</li>
<li><p>aucï¼šæ›²çº¿ä¸‹é¢ç§¯ï¼›</p>
</li>
<li><p>aucprï¼šPRæ›²çº¿ä¸‹çš„é¢ç§¯ï¼›</p>
</li>
<li><p>ndcgï¼šå½’ä¸€åŒ–ç´¯è®¡æŠ˜æ‰£ï¼›</p>
</li>
<li><p>mapï¼šå¹³å‡ç²¾åº¦ï¼›</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>seed ï¼šéšæœºæ•°ç§å­ï¼Œ[é»˜è®¤= 0]ã€‚</li>
</ul>
</blockquote>
<h5 id="3-3-å‘½ä»¤è¡Œå‚æ•°"><a href="#3-3-å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="3.3. å‘½ä»¤è¡Œå‚æ•°"></a>3.3. å‘½ä»¤è¡Œå‚æ•°</h5><p>è¿™é‡Œä¸è¯´äº†ï¼Œå› ä¸ºå¾ˆå°‘ç”¨å‘½ä»¤è¡Œæ§åˆ¶å°ç‰ˆæœ¬ã€‚(only used in the console version of XGBoost)</p>
<h4 id="4-XGBoostçš„è°ƒå‚è¯´æ˜"><a href="#4-XGBoostçš„è°ƒå‚è¯´æ˜" class="headerlink" title="4. XGBoostçš„è°ƒå‚è¯´æ˜"></a>4. XGBoostçš„è°ƒå‚è¯´æ˜</h4><p>å‚æ•°è°ƒä¼˜çš„ä¸€èˆ¬æ­¥éª¤ï¼š</p>
<ul>
<li>1.ç¡®å®šï¼ˆè¾ƒå¤§ï¼‰å­¦ä¹ é€Ÿç‡å’Œæå‡å‚æ•°è°ƒä¼˜çš„åˆå§‹å€¼</li>
<li>2.max_depth å’Œ min_child_weight å‚æ•°è°ƒä¼˜</li>
<li>3.gammaå‚æ•°è°ƒä¼˜</li>
<li>4.subsample å’Œ colsample_bytree å‚æ•°è°ƒä¼˜</li>
<li>5.æ­£åˆ™åŒ–å‚æ•°alphaè°ƒä¼˜</li>
<li>6.é™ä½å­¦ä¹ é€Ÿç‡å’Œä½¿ç”¨æ›´å¤šçš„å†³ç­–æ ‘</li>
</ul>
<h4 id="5-XGBoostè¯¦ç»†æ”»ç•¥"><a href="#5-XGBoostè¯¦ç»†æ”»ç•¥" class="headerlink" title="5. XGBoostè¯¦ç»†æ”»ç•¥"></a>5. XGBoostè¯¦ç»†æ”»ç•¥</h4><p>æ›´è¯¦ç»†å†…å®¹è§<a href="https://xgboost.readthedocs.io/en/latest/python/python_intro.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>
<h5 id="1-å®‰è£…XGBoost"><a href="#1-å®‰è£…XGBoost" class="headerlink" title="1). å®‰è£…XGBoost"></a>1). å®‰è£…XGBoost</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip3 install xgboost</span><br><span class="line">æˆ–</span><br><span class="line">pip install xgboost</span><br><span class="line"></span><br><span class="line">æ›´æ–°</span><br><span class="line">pip install --upgrade xgboost</span><br></pre></td></tr></table></figure>
<h5 id="2-æ•°æ®æ¥å£ï¼ˆXGBoostå¯å¤„ç†çš„æ•°æ®æ ¼å¼DMatrixï¼‰"><a href="#2-æ•°æ®æ¥å£ï¼ˆXGBoostå¯å¤„ç†çš„æ•°æ®æ ¼å¼DMatrixï¼‰" class="headerlink" title="2). æ•°æ®æ¥å£ï¼ˆXGBoostå¯å¤„ç†çš„æ•°æ®æ ¼å¼DMatrixï¼‰"></a>2). æ•°æ®æ¥å£ï¼ˆXGBoostå¯å¤„ç†çš„æ•°æ®æ ¼å¼DMatrixï¼‰</h5><p>The XGBoost python module is able to load data from:</p>
<ul>
<li>LibSVM text format file</li>
<li>Comma-separated values (CSV) file</li>
<li>NumPy 2D array</li>
<li>SciPy 2D sparse array</li>
<li>cuDF DataFrame</li>
<li>Pandas data frame, and</li>
<li>XGBoost binary buffer file.</li>
</ul>
<p>(See <a href="https://xgboost.readthedocs.io/en/latest/tutorials/input_format.html" target="_blank" rel="noopener">Text Input Format of DMatrix</a> for detailed description of text input format.)</p>
<p>The data is stored in a <a href="https://xgboost.readthedocs.io/en/latest/python/python_api.html#xgboost.DMatrix" target="_blank" rel="noopener"><code>DMatrix</code></a> object.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.LibSVMæ–‡æœ¬æ ¼å¼æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># To load a libsvm text file or a XGBoost binary file into DMatrix:</span></span><br><span class="line">dtrain = xgb.DMatrix(<span class="string">'train.svm.txt'</span>)</span><br><span class="line">dtest = xgb.DMatrix(<span class="string">'test.svm.buffer'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.CSVæ–‡ä»¶(ä¸èƒ½å«ç±»åˆ«æ–‡æœ¬å˜é‡ï¼Œå¦‚æœå­˜åœ¨æ–‡æœ¬å˜é‡è¯·åšç‰¹å¾å¤„ç†å¦‚one-hot)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Categorical features not supported</span></span><br><span class="line"><span class="string">Note that XGBoost does not provide specialization for categorical features; if your data contains categorical features, load it as a NumPy array first and then perform corresponding preprocessing steps like one-hot encoding.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use Pandas to load CSV files with headers</span></span><br><span class="line"><span class="string">Currently, the DMLC data parser cannot parse CSV files with headers. Use Pandas (see below) to read CSV files with headers.</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">dtrain = xgb.DMatrix(<span class="string">'train.csv?format=csv&amp;label_column=0'</span>)</span><br><span class="line">dtest = xgb.DMatrix(<span class="string">'test.csv?format=csv&amp;label_column=0'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.NumPyæ•°ç»„</span></span><br><span class="line">data = np.random.rand(<span class="number">5</span>, <span class="number">10</span>)  <span class="comment"># 5 entities, each contains 10 features</span></span><br><span class="line">label = np.random.randint(<span class="number">2</span>, size=<span class="number">5</span>)  <span class="comment"># binary target</span></span><br><span class="line">dtrain = xgb.DMatrix(data, label=label)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.scipy.sparseæ•°ç»„</span></span><br><span class="line">csr = scipy.sparse.csr_matrix((dat, (row, col)))</span><br><span class="line">dtrain = xgb.DMatrix(csr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.pandasæ•°æ®æ¡†dataframe</span></span><br><span class="line">data = pandas.DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">4</span>,<span class="number">3</span>)), columns=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line">label = pandas.DataFrame(np.random.randint(<span class="number">2</span>, size=<span class="number">4</span>))</span><br><span class="line">dtrain = xgb.DMatrix(data, label=label)</span><br></pre></td></tr></table></figure>
<p>ç¬”è€…æ¨èï¼šå…ˆä¿å­˜åˆ°XGBoostäºŒè¿›åˆ¶æ–‡ä»¶ä¸­å°†ä½¿åŠ è½½é€Ÿåº¦æ›´å¿«ï¼Œç„¶åå†åŠ è½½è¿›æ¥</p>
<p>Saving <a href="https://xgboost.readthedocs.io/en/latest/python/python_api.html#xgboost.DMatrix" target="_blank" rel="noopener"><code>DMatrix</code></a> into a XGBoost binary file will make loading faster:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.ä¿å­˜DMatrixåˆ°XGBoostäºŒè¿›åˆ¶æ–‡ä»¶ä¸­</span></span><br><span class="line">dtrain = xgb.DMatrix(<span class="string">'train.svm.txt'</span>)</span><br><span class="line">dtrain.save_binary(<span class="string">'train.buffer'</span>)</span><br><span class="line"><span class="comment"># 2. ç¼ºå¤±å€¼å¯ä»¥ç”¨DMatrixæ„é€ å‡½æ•°ä¸­çš„é»˜è®¤å€¼æ›¿æ¢ï¼š</span></span><br><span class="line">dtrain = xgb.DMatrix(data, label=label, missing=<span class="number">-999.0</span>)</span><br><span class="line"><span class="comment"># 3.å¯ä»¥åœ¨éœ€è¦æ—¶è®¾ç½®æƒé‡ï¼š</span></span><br><span class="line">w = np.random.rand(<span class="number">5</span>, <span class="number">1</span>)</span><br><span class="line">dtrain = xgb.DMatrix(data, label=label, missing=<span class="number">-999.0</span>, weight=w)</span><br></pre></td></tr></table></figure>
<h5 id="3-å‚æ•°çš„è®¾ç½®æ–¹å¼"><a href="#3-å‚æ•°çš„è®¾ç½®æ–¹å¼" class="headerlink" title="3). å‚æ•°çš„è®¾ç½®æ–¹å¼"></a>3). å‚æ•°çš„è®¾ç½®æ–¹å¼</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åŠ è½½å¹¶å¤„ç†æ•°æ®</span></span><br><span class="line">df_wine = pd.read_csv(<span class="string">'https://archive.ics.uci.edu/ml/machine-learning-databases/wine/wine.data'</span>,header=<span class="literal">None</span>)</span><br><span class="line">df_wine.columns = [<span class="string">'Class label'</span>, <span class="string">'Alcohol'</span>,<span class="string">'Malic acid'</span>, <span class="string">'Ash'</span>,<span class="string">'Alcalinity of ash'</span>,<span class="string">'Magnesium'</span>, <span class="string">'Total phenols'</span>,</span><br><span class="line">                   <span class="string">'Flavanoids'</span>, <span class="string">'Nonflavanoid phenols'</span>,<span class="string">'Proanthocyanins'</span>,<span class="string">'Color intensity'</span>, <span class="string">'Hue'</span>,<span class="string">'OD280/OD315 of diluted wines'</span>,<span class="string">'Proline'</span>]</span><br><span class="line">df_wine = df_wine[df_wine[<span class="string">'Class label'</span>] != <span class="number">1</span>]  <span class="comment"># drop 1 class</span></span><br><span class="line">y = df_wine[<span class="string">'Class label'</span>].values</span><br><span class="line">X = df_wine[[<span class="string">'Alcohol'</span>,<span class="string">'OD280/OD315 of diluted wines'</span>]].values</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split  <span class="comment"># åˆ‡åˆ†è®­ç»ƒé›†ä¸æµ‹è¯•é›†</span></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder   <span class="comment"># æ ‡ç­¾åŒ–åˆ†ç±»å˜é‡</span></span><br><span class="line"></span><br><span class="line">le = LabelEncoder()</span><br><span class="line">y = le.fit_transform(y)</span><br><span class="line">X_train,X_test,y_train,y_test = train_test_split(X,y,test_size=<span class="number">0.2</span>,random_state=<span class="number">1</span>,stratify=y)</span><br><span class="line"></span><br><span class="line">dtrain = xgb.DMatrix(X_train, label=y_train)</span><br><span class="line">dtest = xgb.DMatrix(X_test)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.Booster å‚æ•°</span></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">'booster'</span>: <span class="string">'gbtree'</span>,</span><br><span class="line">    <span class="string">'objective'</span>: <span class="string">'multi:softmax'</span>,  <span class="comment"># å¤šåˆ†ç±»çš„é—®é¢˜</span></span><br><span class="line">    <span class="string">'num_class'</span>: <span class="number">10</span>,               <span class="comment"># ç±»åˆ«æ•°ï¼Œä¸ multisoftmax å¹¶ç”¨</span></span><br><span class="line">    <span class="string">'gamma'</span>: <span class="number">0.1</span>,                  <span class="comment"># ç”¨äºæ§åˆ¶æ˜¯å¦åå‰ªæçš„å‚æ•°,è¶Šå¤§è¶Šä¿å®ˆï¼Œä¸€èˆ¬0.1ã€0.2è¿™æ ·å­ã€‚</span></span><br><span class="line">    <span class="string">'max_depth'</span>: <span class="number">12</span>,               <span class="comment"># æ„å»ºæ ‘çš„æ·±åº¦ï¼Œè¶Šå¤§è¶Šå®¹æ˜“è¿‡æ‹Ÿåˆ</span></span><br><span class="line">    <span class="string">'lambda'</span>: <span class="number">2</span>,                   <span class="comment"># æ§åˆ¶æ¨¡å‹å¤æ‚åº¦çš„æƒé‡å€¼çš„L2æ­£åˆ™åŒ–é¡¹å‚æ•°ï¼Œå‚æ•°è¶Šå¤§ï¼Œæ¨¡å‹è¶Šä¸å®¹æ˜“è¿‡æ‹Ÿåˆã€‚</span></span><br><span class="line">    <span class="string">'subsample'</span>: <span class="number">0.7</span>,              <span class="comment"># éšæœºé‡‡æ ·è®­ç»ƒæ ·æœ¬</span></span><br><span class="line">    <span class="string">'colsample_bytree'</span>: <span class="number">0.7</span>,       <span class="comment"># ç”Ÿæˆæ ‘æ—¶è¿›è¡Œçš„åˆ—é‡‡æ ·</span></span><br><span class="line">    <span class="string">'min_child_weight'</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">'silent'</span>: <span class="number">1</span>,                   <span class="comment"># è®¾ç½®æˆ1åˆ™æ²¡æœ‰è¿è¡Œä¿¡æ¯è¾“å‡ºï¼Œæœ€å¥½æ˜¯è®¾ç½®ä¸º0.? slientè¿˜æ˜¯verbosity?</span></span><br><span class="line">    <span class="string">'eta'</span>: <span class="number">0.007</span>,                  <span class="comment"># å¦‚åŒå­¦ä¹ ç‡</span></span><br><span class="line">    <span class="string">'seed'</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="string">'nthread'</span>: <span class="number">4</span>,                  <span class="comment"># cpu çº¿ç¨‹æ•°</span></span><br><span class="line">    <span class="string">'eval_metric'</span>:<span class="string">'auc'</span></span><br><span class="line">&#125;</span><br><span class="line">plst = params.items()</span><br><span class="line"><span class="comment"># evallist = [(dtest, 'eval'), (dtrain, 'train')]   # æŒ‡å®šéªŒè¯é›†</span></span><br></pre></td></tr></table></figure>
<p>XGBoost can use either a list of pairs or a dictionary to set <a href="https://xgboost.readthedocs.io/en/latest/parameter.html" target="_blank" rel="noopener">parameters</a>. For instance:</p>
<ul>
<li><p>Booster parameters</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">param = &#123;<span class="string">'max_depth'</span>: <span class="number">2</span>, <span class="string">'eta'</span>: <span class="number">1</span>, <span class="string">'objective'</span>: <span class="string">'binary:logistic'</span>&#125;</span><br><span class="line">param[<span class="string">'nthread'</span>] = <span class="number">4</span></span><br><span class="line">param[<span class="string">'eval_metric'</span>] = <span class="string">'auc'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>You can also specify multiple eval metrics:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">param[<span class="string">'eval_metric'</span>] = [<span class="string">'auc'</span>, <span class="string">'ams@0'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># alternatively:</span></span><br><span class="line"><span class="comment"># plst = param.items()</span></span><br><span class="line"><span class="comment"># plst += [('eval_metric', 'ams@0')]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Specify validations set to watch performance</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">evallist = [(dtest, <span class="string">'eval'</span>), (dtrain, <span class="string">'train'</span>)]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="4-è®­ç»ƒ"><a href="#4-è®­ç»ƒ" class="headerlink" title="4). è®­ç»ƒ"></a>4). è®­ç»ƒ</h5><p>æ³¨ï¼šè²Œä¼¼ç°åœ¨ä¸éœ€è¦<code>plst = param.items()</code>ï¼Œç›´æ¥ä¼  <code>param</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 2.è®­ç»ƒ</span></span><br><span class="line">num_round = <span class="number">10</span></span><br><span class="line">bst = xgb.train(plst, dtrain, num_round)</span><br><span class="line"><span class="comment">#bst = xgb.train(plst, dtrain, num_round, evallist )</span></span><br></pre></td></tr></table></figure>
<h5 id="5-ä¿å­˜æ¨¡å‹"><a href="#5-ä¿å­˜æ¨¡å‹" class="headerlink" title="5). ä¿å­˜æ¨¡å‹"></a>5). ä¿å­˜æ¨¡å‹</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 3.ä¿å­˜æ¨¡å‹</span></span><br><span class="line"><span class="comment"># After training, the model can be saved.</span></span><br><span class="line">bst.save_model(<span class="string">'0001.model'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># The model and its feature map can also be dumped to a text file.</span></span><br><span class="line"><span class="comment"># dump model</span></span><br><span class="line">bst.dump_model(<span class="string">'dump.raw.txt'</span>)</span><br><span class="line"><span class="comment"># dump model with feature map</span></span><br><span class="line"><span class="comment">#bst.dump_model('dump.raw.txt', 'featmap.txt')</span></span><br></pre></td></tr></table></figure>
<h5 id="6-åŠ è½½ä¿å­˜çš„æ¨¡å‹"><a href="#6-åŠ è½½ä¿å­˜çš„æ¨¡å‹" class="headerlink" title="6) . åŠ è½½ä¿å­˜çš„æ¨¡å‹"></a>6) . åŠ è½½ä¿å­˜çš„æ¨¡å‹</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 4.åŠ è½½ä¿å­˜çš„æ¨¡å‹ï¼š</span></span><br><span class="line">bst = xgb.Booster(&#123;<span class="string">'nthread'</span>: <span class="number">4</span>&#125;)  <span class="comment"># init model</span></span><br><span class="line">bst.load_model(<span class="string">'0001.model'</span>)  <span class="comment"># load data</span></span><br></pre></td></tr></table></figure>
<h5 id="7-è®¾ç½®æ—©åœæœºåˆ¶"><a href="#7-è®¾ç½®æ—©åœæœºåˆ¶" class="headerlink" title="7). è®¾ç½®æ—©åœæœºåˆ¶"></a>7). è®¾ç½®æ—©åœæœºåˆ¶</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 5.ä¹Ÿå¯ä»¥è®¾ç½®æ—©åœæœºåˆ¶ï¼ˆéœ€è¦è®¾ç½®éªŒè¯é›†ï¼‰</span></span><br><span class="line">train(..., evals=evals, early_stopping_rounds=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>The model will train until the validation score stops improving. Validation error needs to decrease at least every <code>early_stopping_rounds</code> to continue training.</p>
<p>If early stopping occurs, the model will have three additional fields: <code>bst.best_score</code>, <code>bst.best_iteration</code> and <code>bst.best_ntree_limit</code>. Note that <a href="https://xgboost.readthedocs.io/en/latest/python/python_api.html#xgboost.train" target="_blank" rel="noopener"><code>xgboost.train()</code></a> will return a model from the last iteration, not the best one.</p>
<p>This works with both metrics to minimize (RMSE, log loss, etc.) and to maximize (MAP, NDCG, AUC). Note that if you specify more than one evaluation metric the last one in <code>param[&#39;eval_metric&#39;]</code> is used for early stopping.</p>
<h5 id="8-é¢„æµ‹"><a href="#8-é¢„æµ‹" class="headerlink" title="8). é¢„æµ‹"></a>8). é¢„æµ‹</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 6.é¢„æµ‹</span></span><br><span class="line">ypred = bst.predict(dtest)</span><br></pre></td></tr></table></figure>
<p>If early stopping is enabled during training, you can get predictions from the best iteration with <code>bst.best_ntree_limit</code>:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ypred = bst.predict(dtest, ntree_limit=bst.best_ntree_limit)</span><br></pre></td></tr></table></figure>
<h5 id="9-ç»˜å›¾"><a href="#9-ç»˜å›¾" class="headerlink" title="9). ç»˜å›¾"></a>9). ç»˜å›¾</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.ç»˜åˆ¶é‡è¦æ€§</span></span><br><span class="line"><span class="comment"># This function requires matplotlib to be installed.</span></span><br><span class="line">xgb.plot_importance(bst)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ç»˜åˆ¶è¾“å‡ºæ ‘</span></span><br><span class="line"><span class="comment"># This function requires graphviz and matplotlib.</span></span><br><span class="line"><span class="comment">#xgb.plot_tree(bst, num_trees=2)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ä½¿ç”¨xgboost.to_graphviz()å°†ç›®æ ‡æ ‘è½¬æ¢ä¸ºgraphviz</span></span><br><span class="line"><span class="comment"># When you use IPython, you can use the xgboost.to_graphviz() function, which converts the target tree to a graphviz instance. The graphviz instance is automatically rendered in IPython.</span></span><br><span class="line"><span class="comment">#xgb.to_graphviz(bst, num_trees=2)</span></span><br></pre></td></tr></table></figure>
<h4 id="6-å®æˆ˜æ¡ˆä¾‹"><a href="#6-å®æˆ˜æ¡ˆä¾‹" class="headerlink" title="6. å®æˆ˜æ¡ˆä¾‹"></a>6. å®æˆ˜æ¡ˆä¾‹</h4><h5 id="1-åˆ†ç±»æ¡ˆä¾‹"><a href="#1-åˆ†ç±»æ¡ˆä¾‹" class="headerlink" title="1). åˆ†ç±»æ¡ˆä¾‹"></a>1). åˆ†ç±»æ¡ˆä¾‹</h5><p>a. Irisæ•°æ®é›†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb</span><br><span class="line"><span class="keyword">from</span> xgboost <span class="keyword">import</span> plot_importance</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score   <span class="comment"># å‡†ç¡®ç‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æ ·æœ¬æ•°æ®é›†</span></span><br><span class="line">iris = load_iris()</span><br><span class="line">X,y = iris.data,iris.target</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.2</span>, random_state=<span class="number">1234565</span>) <span class="comment"># æ•°æ®é›†åˆ†å‰²</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç®—æ³•å‚æ•°</span></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">'booster'</span>: <span class="string">'gbtree'</span>,</span><br><span class="line">    <span class="string">'objective'</span>: <span class="string">'multi:softmax'</span>,</span><br><span class="line">    <span class="string">'num_class'</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">'gamma'</span>: <span class="number">0.1</span>,</span><br><span class="line">    <span class="string">'max_depth'</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="string">'lambda'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'subsample'</span>: <span class="number">0.7</span>,</span><br><span class="line">    <span class="string">'colsample_bytree'</span>: <span class="number">0.75</span>,</span><br><span class="line">    <span class="string">'min_child_weight'</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">'silent'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">'eta'</span>: <span class="number">0.1</span>,</span><br><span class="line">    <span class="string">'seed'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'nthread'</span>: <span class="number">4</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">plst = params.items()</span><br><span class="line"></span><br><span class="line">dtrain = xgb.DMatrix(X_train, y_train) <span class="comment"># ç”Ÿæˆæ•°æ®é›†æ ¼å¼</span></span><br><span class="line">num_rounds = <span class="number">500</span></span><br><span class="line">model = xgb.train(plst, dtrain, num_rounds) <span class="comment"># xgboostæ¨¡å‹è®­ç»ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æµ‹è¯•é›†è¿›è¡Œé¢„æµ‹</span></span><br><span class="line">dtest = xgb.DMatrix(X_test)</span><br><span class="line">y_pred = model.predict(dtest)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—å‡†ç¡®ç‡</span></span><br><span class="line">accuracy = accuracy_score(y_test,y_pred)</span><br><span class="line">print(<span class="string">"accuarcy: %.2f%%"</span> % (accuracy*<span class="number">100.0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºé‡è¦ç‰¹å¾</span></span><br><span class="line">plot_importance(model)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">accuarcy: 96.67%</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595830272543.png" alt="1595830272543"></p>
<p>b. Titanicæ•°æ®é›†</p>
<p>æ¥è‡ª  <a href="https://mp.weixin.qq.com/s/qongHAx-X2SWrUxjk8tg0A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/qongHAx-X2SWrUxjk8tg0A</a></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601268650680.png" alt="1601268650680"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1601268679265.png" alt="1601268679265"></p>
<h5 id="2-å›å½’æ¡ˆä¾‹"><a href="#2-å›å½’æ¡ˆä¾‹" class="headerlink" title="2). å›å½’æ¡ˆä¾‹"></a>2). å›å½’æ¡ˆä¾‹</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb</span><br><span class="line"><span class="keyword">from</span> xgboost <span class="keyword">import</span> plot_importance</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_boston</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æ•°æ®é›†</span></span><br><span class="line">boston = load_boston()</span><br><span class="line">X,y = boston.data,boston.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># XGBoostè®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.2</span>, random_state=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">'booster'</span>: <span class="string">'gbtree'</span>,</span><br><span class="line">    <span class="string">'objective'</span>: <span class="string">'reg:squarederror'</span>,</span><br><span class="line">    <span class="string">'gamma'</span>: <span class="number">0.1</span>,</span><br><span class="line">    <span class="string">'max_depth'</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">'lambda'</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">'subsample'</span>: <span class="number">0.7</span>,</span><br><span class="line">    <span class="string">'colsample_bytree'</span>: <span class="number">0.7</span>,</span><br><span class="line">    <span class="string">'min_child_weight'</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">'silent'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'eta'</span>: <span class="number">0.1</span>,</span><br><span class="line">    <span class="string">'seed'</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="string">'nthread'</span>: <span class="number">4</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dtrain = xgb.DMatrix(X_train, y_train)</span><br><span class="line">num_rounds = <span class="number">300</span></span><br><span class="line">plst = params.items()</span><br><span class="line">model = xgb.train(plst, dtrain, num_rounds)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æµ‹è¯•é›†è¿›è¡Œé¢„æµ‹</span></span><br><span class="line">dtest = xgb.DMatrix(X_test)</span><br><span class="line">ans = model.predict(dtest)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºé‡è¦ç‰¹å¾</span></span><br><span class="line">plot_importance(model)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595837055748.png" alt="1595837055748"></p>
<h5 id="3-XGBoostè°ƒå‚ï¼ˆç»“åˆsklearnç½‘æ ¼æœç´¢ï¼‰"><a href="#3-XGBoostè°ƒå‚ï¼ˆç»“åˆsklearnç½‘æ ¼æœç´¢ï¼‰" class="headerlink" title="3). XGBoostè°ƒå‚ï¼ˆç»“åˆsklearnç½‘æ ¼æœç´¢ï¼‰"></a><strong>3). XGBoostè°ƒå‚</strong>ï¼ˆç»“åˆsklearnç½‘æ ¼æœç´¢ï¼‰</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> roc_auc_score</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"></span><br><span class="line">iris = load_iris()</span><br><span class="line">X,y = iris.data,iris.target</span><br><span class="line">col = iris.target_names</span><br><span class="line">train_x, valid_x, train_y, valid_y = train_test_split(X, y, test_size=<span class="number">0.3</span>, random_state=<span class="number">1</span>)   <span class="comment"># åˆ†è®­ç»ƒé›†å’ŒéªŒè¯é›†</span></span><br><span class="line"></span><br><span class="line">parameters = &#123;</span><br><span class="line">              <span class="string">'max_depth'</span>: [<span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">25</span>],</span><br><span class="line">              <span class="string">'learning_rate'</span>: [<span class="number">0.01</span>, <span class="number">0.02</span>, <span class="number">0.05</span>, <span class="number">0.1</span>, <span class="number">0.15</span>],</span><br><span class="line">              <span class="string">'n_estimators'</span>: [<span class="number">500</span>, <span class="number">1000</span>, <span class="number">2000</span>, <span class="number">3000</span>, <span class="number">5000</span>],</span><br><span class="line">              <span class="string">'min_child_weight'</span>: [<span class="number">0</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">20</span>],</span><br><span class="line">              <span class="string">'max_delta_step'</span>: [<span class="number">0</span>, <span class="number">0.2</span>, <span class="number">0.6</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">              <span class="string">'subsample'</span>: [<span class="number">0.6</span>, <span class="number">0.7</span>, <span class="number">0.8</span>, <span class="number">0.85</span>, <span class="number">0.95</span>],</span><br><span class="line">              <span class="string">'colsample_bytree'</span>: [<span class="number">0.5</span>, <span class="number">0.6</span>, <span class="number">0.7</span>, <span class="number">0.8</span>, <span class="number">0.9</span>],</span><br><span class="line">              <span class="string">'reg_alpha'</span>: [<span class="number">0</span>, <span class="number">0.25</span>, <span class="number">0.5</span>, <span class="number">0.75</span>, <span class="number">1</span>],</span><br><span class="line">              <span class="string">'reg_lambda'</span>: [<span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span>, <span class="number">0.8</span>, <span class="number">1</span>],</span><br><span class="line">              <span class="string">'scale_pos_weight'</span>: [<span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span>, <span class="number">0.8</span>, <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">xlf = xgb.XGBClassifier(max_depth=<span class="number">10</span>,</span><br><span class="line">            learning_rate=<span class="number">0.01</span>,</span><br><span class="line">            n_estimators=<span class="number">2000</span>,</span><br><span class="line">            silent=<span class="literal">True</span>,</span><br><span class="line">            objective=<span class="string">'multi:softmax'</span>,</span><br><span class="line">            num_class=<span class="number">3</span> ,</span><br><span class="line">            nthread=<span class="number">-1</span>,</span><br><span class="line">            gamma=<span class="number">0</span>,</span><br><span class="line">            min_child_weight=<span class="number">1</span>,</span><br><span class="line">            max_delta_step=<span class="number">0</span>,</span><br><span class="line">            subsample=<span class="number">0.85</span>,</span><br><span class="line">            colsample_bytree=<span class="number">0.7</span>,</span><br><span class="line">            colsample_bylevel=<span class="number">1</span>,</span><br><span class="line">            reg_alpha=<span class="number">0</span>,</span><br><span class="line">            reg_lambda=<span class="number">1</span>,</span><br><span class="line">            scale_pos_weight=<span class="number">1</span>,</span><br><span class="line">            seed=<span class="number">0</span>,</span><br><span class="line">            missing=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">gs = GridSearchCV(xlf, param_grid=parameters, scoring=<span class="string">'accuracy'</span>, cv=<span class="number">3</span>)</span><br><span class="line">gs.fit(train_x, train_y)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"Best score: %0.3f"</span> % gs.best_score_)</span><br><span class="line">print(<span class="string">"Best parameters set: %s"</span> % gs.best_params_ )</span><br></pre></td></tr></table></figure>
<h2 id="å†³ç­–æ ‘ç®—æ³•åé—®åŠç»å…¸é¢è¯•é—®é¢˜"><a href="#å†³ç­–æ ‘ç®—æ³•åé—®åŠç»å…¸é¢è¯•é—®é¢˜" class="headerlink" title="å†³ç­–æ ‘ç®—æ³•åé—®åŠç»å…¸é¢è¯•é—®é¢˜"></a>å†³ç­–æ ‘ç®—æ³•åé—®åŠç»å…¸é¢è¯•é—®é¢˜</h2><blockquote>
<p> å‚è€ƒ <a href="https://mp.weixin.qq.com/s/vkbZweJ5oRo4IPt-3kg64g" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/vkbZweJ5oRo4IPt-3kg64g</a> </p>
<p><a href="https://blog.csdn.net/jaffe507/article/details/105004324" target="_blank" rel="noopener">https://blog.csdn.net/jaffe507/article/details/105004324</a></p>
</blockquote>
<h3 id="ç®€ä»‹å’Œç®—æ³•"><a href="#ç®€ä»‹å’Œç®—æ³•" class="headerlink" title="ç®€ä»‹å’Œç®—æ³•"></a>ç®€ä»‹å’Œç®—æ³•</h3><blockquote>
<p>å†³ç­–æ ‘æ˜¯æœºå™¨å­¦ä¹ æœ€å¸¸ç”¨çš„ç®—æ³•ä¹‹ä¸€ï¼Œå®ƒå°†ç®—æ³•ç»„ç»‡æˆä¸€é¢—æ ‘çš„å½¢å¼ã€‚å…¶å®è¿™å°±æ˜¯å°†å¹³æ—¶æ‰€è¯´çš„if-thenè¯­å¥æ„å»ºæˆäº†æ ‘çš„å½¢å¼ã€‚è¿™ä¸ªå†³ç­–æ ‘ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼šå†…éƒ¨èŠ‚ç‚¹ã€å¶èŠ‚ç‚¹å’Œè¾¹ã€‚å†…éƒ¨èŠ‚ç‚¹æ˜¯åˆ’åˆ†çš„å±æ€§ï¼Œè¾¹ä»£è¡¨åˆ’åˆ†çš„æ¡ä»¶ï¼Œå¶èŠ‚ç‚¹è¡¨ç¤ºç±»åˆ«ã€‚æ„å»ºå†³ç­–æ ‘å°±æ˜¯ä¸€ä¸ªé€’å½’çš„é€‰æ‹©å†…éƒ¨èŠ‚ç‚¹ï¼Œè®¡ç®—åˆ’åˆ†æ¡ä»¶çš„è¾¹ï¼Œæœ€ååˆ°è¾¾å¶å­èŠ‚ç‚¹çš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595669193083.png" alt="1595669193083"></p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1603251940059.png" alt="1603251940059"></p>
<h3 id="æ ¸å¿ƒå…¬å¼"><a href="#æ ¸å¿ƒå…¬å¼" class="headerlink" title="æ ¸å¿ƒå…¬å¼"></a>æ ¸å¿ƒå…¬å¼</h3><p><img src="/2020/07/25/å†³ç­–æ ‘/1595669223727.png" alt="1595669223727"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">model</th>
<th style="text-align:center">feature select</th>
<th style="text-align:center">æ ‘çš„ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ID3</td>
<td style="text-align:center">{åˆ†ç±»:ä¿¡æ¯å¢ç›Š}</td>
<td style="text-align:center">å¤šå‰æ ‘</td>
</tr>
<tr>
<td style="text-align:center">C4.5</td>
<td style="text-align:center">{åˆ†ç±»:ä¿¡æ¯å¢ç›Šç‡}</td>
<td style="text-align:center">å¤šå‰æ ‘</td>
</tr>
<tr>
<td style="text-align:center">CART (åˆ†ç±»æ ‘)</td>
<td style="text-align:center">{åˆ†ç±»:åŸºå°¼æŒ‡æ•°}</td>
<td style="text-align:center">äºŒå‰æ ‘</td>
</tr>
<tr>
<td style="text-align:center">CART (å›å½’æ ‘)</td>
<td style="text-align:center">{å›å½’:å¹³æ–¹è¯¯å·®}</td>
<td style="text-align:center">äºŒå‰æ ‘</td>
</tr>
</tbody>
</table>
</div>
<h3 id="ç®—æ³•åé—®"><a href="#ç®—æ³•åé—®" class="headerlink" title="ç®—æ³•åé—®"></a>ç®—æ³•åé—®</h3><p>1.å†³ç­–æ ‘å’Œæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒçš„å…³ç³»ï¼Ÿ</p>
<blockquote>
<p>å†³ç­–æ ‘å¯ä»¥è¡¨ç¤ºæˆç»™å®šæ¡ä»¶ä¸‹ç±»çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ. å†³ç­–æ ‘ä¸­çš„æ¯ä¸€æ¡è·¯å¾„éƒ½å¯¹åº”æ˜¯åˆ’åˆ†çš„ä¸€ä¸ªæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ. æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹éƒ½æ˜¯é€šè¿‡å¤šä¸ªæ¡ä»¶ä¹‹åçš„åˆ’åˆ†ç©ºé—´ï¼Œåœ¨å¶å­èŠ‚ç‚¹ä¸­è®¡ç®—æ¯ä¸ªç±»çš„æ¡ä»¶æ¦‚ç‡ï¼Œå¿…ç„¶ä¼šå€¾å‘äºæŸä¸€ä¸ªç±»ï¼Œå³è¿™ä¸ªç±»çš„æ¦‚ç‡æœ€å¤§.</p>
</blockquote>
<p>2.ID3å’ŒC4.5ç®—æ³•å¯ä»¥å¤„ç†å®æ•°ç‰¹å¾å—ï¼Ÿå¦‚æœå¯ä»¥åº”è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿå¦‚æœä¸å¯ä»¥è¯·ç»™å‡ºç†ç”±ï¼Ÿ</p>
<p><img src="/2020/07/25/å†³ç­–æ ‘/1595669343135.png" alt="1595669343135"></p>
<p>3.æ—¢ç„¶ä¿¡æ¯å¢ç›Šå¯ä»¥è®¡ç®—ï¼Œä¸ºä»€ä¹ˆC4.5è¿˜ä½¿ç”¨ä¿¡æ¯å¢ç›Šæ¯”ï¼Ÿ</p>
<blockquote>
<p>åœ¨ä½¿ç”¨ä¿¡æ¯å¢ç›Šçš„æ—¶å€™ï¼Œæ¨¡å‹åå‘äºé€‰æ‹©å–å€¼è¾ƒå¤šçš„ç‰¹å¾ã€‚ï¼ˆå¯èƒ½ä¼šå¯¼è‡´å‡ºç°å¾ˆå¤šåˆ†æ”¯ï¼Œå°†æ•°æ®åˆ’åˆ†æ›´ç»†ï¼Œæ¨¡å‹å¤æ‚åº¦é«˜ï¼Œå‡ºç°è¿‡æ‹Ÿåˆçš„æœºç‡æ›´å¤§ã€‚ï¼‰</p>
<p>ä½¿ç”¨ä¿¡æ¯å¢ç›Šæ¯”å°±æ˜¯ä¸ºäº†è§£å†³åå‘äºé€‰æ‹©å–å€¼è¾ƒå¤šçš„ç‰¹å¾çš„é—®é¢˜. ä½¿ç”¨ä¿¡æ¯å¢ç›Šæ¯”å¯¹å–å€¼å¤šçš„ç‰¹å¾åŠ ä¸Šæƒ©ç½šï¼Œå¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œäº†æ ¡æ­£.</p>
</blockquote>
<p>4.åŸºå°¼æŒ‡æ•°å¯ä»¥è¡¨ç¤ºæ•°æ®ä¸ç¡®å®šæ€§ï¼Œä¿¡æ¯ç†µä¹Ÿå¯ä»¥è¡¨ç¤ºæ•°æ®çš„ä¸ç¡®å®šæ€§. ä¸ºä»€ä¹ˆCARTä½¿ç”¨åŸºå°¼æŒ‡æ•°ï¼Ÿ</p>
<blockquote>
<p>ä¿¡æ¯ç†µã€åŸºå°¼æŒ‡æ•°éƒ½æ˜¯å€¼è¶Šå¤§ï¼Œæ•°æ®çš„ä¸ç¡®å®šæ€§è¶Šå¤§. ä¿¡æ¯ç†µéœ€è¦è®¡ç®—å¯¹æ•°ï¼Œè®¡ç®—é‡å¤§ï¼›ä¿¡æ¯ç†µå¯ä»¥å¤„ç†å¤šä¸ªç±»åˆ«ï¼ŒåŸºå°¼æŒ‡æ•°å°±æ˜¯é’ˆå¯¹ä¸¤ä¸ªç±»è®¡ç®—çš„ï¼Œç”±äºCARTæ ‘æ˜¯ä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ¯æ¬¡éƒ½æ˜¯é€‰æ‹©yes or noè¿›è¡Œåˆ’åˆ†ï¼Œä»è¿™ä¸ªè§’åº¦ä¹Ÿæ˜¯åº”è¯¥é€‰æ‹©ç®€å•çš„åŸºå°¼æŒ‡æ•°è¿›è¡Œè®¡ç®—.</p>
</blockquote>
<p>5.å†³ç­–æ ‘æ€ä¹ˆå‰ªæï¼Ÿ</p>
<blockquote>
<p>ä¸€èˆ¬ç®—æ³•åœ¨æ„é€ å†³ç­–æ ‘æ—¶éƒ½æ˜¯å°½å¯èƒ½çš„ç»†åˆ†ï¼Œç›´åˆ°æ•°æ®ä¸å¯åˆ’åˆ†æ‰ä¼šåˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼Œåœæ­¢åˆ’åˆ†. å› ä¸ºç»™è®­ç»ƒæ•°æ®å·¨å¤§çš„ä¿¡ä»»ï¼Œè¿™ç§å½¢å¼å½¢å¼å¾ˆå®¹æ˜“é€ æˆè¿‡æ‹Ÿåˆï¼Œä¸ºäº†é˜²æ­¢è¿‡æ‹Ÿåˆéœ€è¦è¿›è¡Œå†³ç­–æ ‘å‰ªæ. </p>
<p>ä¸€èˆ¬åˆ†ä¸ºé¢„å‰ªæå’Œåå‰ªæï¼š</p>
<p>1ï¼‰é¢„å‰ªææ˜¯åœ¨å†³ç­–æ ‘çš„æ„å»ºè¿‡ç¨‹ä¸­åŠ å…¥é™åˆ¶ï¼Œæ¯”å¦‚æ§åˆ¶å¶å­èŠ‚ç‚¹æœ€å°‘çš„æ ·æœ¬ä¸ªæ•°ï¼Œæå‰åœæ­¢. </p>
<p>é¢„å‰ªæ(æå‰åœæ­¢)ï¼šæ§åˆ¶æ·±åº¦ã€å½“å‰çš„èŠ‚ç‚¹æ•°ã€åˆ†è£‚å¯¹æµ‹è¯•é›†çš„å‡†ç¡®åº¦æå‡å¤§å°</p>
<ul>
<li>é™åˆ¶æ ‘çš„é«˜åº¦ï¼Œå¯ä»¥åˆ©ç”¨äº¤å‰éªŒè¯é€‰æ‹©</li>
<li>åˆ©ç”¨åˆ†ç±»æŒ‡æ ‡ï¼Œå¦‚æœä¸‹ä¸€æ¬¡åˆ‡åˆ†æ²¡æœ‰é™ä½è¯¯å·®ï¼Œåˆ™åœæ­¢åˆ‡åˆ†</li>
<li>é™åˆ¶æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œæ¯”å¦‚æŸä¸ªèŠ‚ç‚¹å°äº100ä¸ªæ ·æœ¬ï¼Œåœæ­¢å¯¹è¯¥èŠ‚ç‚¹åˆ‡åˆ†</li>
</ul>
<p>2ï¼‰åå‰ªææ˜¯åœ¨å†³ç­–æ ‘æ„å»ºå®Œæˆä¹‹åï¼Œæ ¹æ®åŠ ä¸Šæ­£åˆ™é¡¹çš„ç»“æ„é£é™©æœ€å°åŒ–è‡ªä¸‹å‘ä¸Šè¿›è¡Œçš„å‰ªææ“ä½œ. å‰ªæçš„ç›®çš„å°±æ˜¯é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œä½¿æ¨¡å‹åœ¨æµ‹è¯•æ•°æ®ä¸Šå˜ç°è‰¯å¥½ï¼Œæ›´åŠ é²æ£’.</p>
<p>åå‰ªæ(è‡ªåº•è€Œä¸Š)ï¼šç”Ÿæˆå†³ç­–æ ‘ã€äº¤å‰éªŒè¯å‰ªæï¼šå­æ ‘åˆ é™¤ï¼ŒèŠ‚ç‚¹ä»£æ›¿å­æ ‘ã€æµ‹è¯•é›†å‡†ç¡®ç‡åˆ¤æ–­å†³å®šå‰ªæ.</p>
</blockquote>
<p>6.ID3ç®—æ³•ï¼Œä¸ºä»€ä¹ˆä¸é€‰æ‹©å…·æœ‰æœ€é«˜é¢„æµ‹ç²¾åº¦çš„å±æ€§ç‰¹å¾ï¼Œè€Œæ˜¯ä½¿ç”¨ä¿¡æ¯å¢ç›Šï¼Ÿ</p>
<p>7.ä¸ºä»€ä¹ˆä½¿ç”¨è´ªå¿ƒå’Œå¯å‘å¼æœç´¢å»ºç«‹å†³ç­–æ ‘ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨æš´åŠ›æœç´¢å»ºç«‹æœ€ä¼˜çš„å†³ç­–æ ‘ï¼Ÿ</p>
<blockquote>
<p>å†³ç­–æ ‘ç›®çš„æ˜¯æ„å»ºä¸€ä¸ªä¸è®­ç»ƒæ•°æ®æ‹Ÿåˆå¾ˆå¥½ï¼Œå¹¶ä¸”å¤æ‚åº¦å°çš„å†³ç­–æ ‘. å› ä¸º<strong>ä»æ‰€æœ‰å¯èƒ½çš„å†³ç­–æ ‘ä¸­ç›´æ¥é€‰æ‹©æœ€ä¼˜çš„å†³ç­–æ ‘æ˜¯NPå®Œå…¨é—®é¢˜</strong>ï¼Œåœ¨ä½¿ç”¨ä¸­ä¸€èˆ¬ä½¿ç”¨å¯å‘å¼æ–¹æ³•å­¦ä¹ ç›¸å¯¹æœ€ä¼˜çš„å†³ç­–æ ‘.</p>
</blockquote>
<p>8.å¦‚æœç‰¹å¾å¾ˆå¤šï¼Œå†³ç­–æ ‘ä¸­æœ€åæ²¡æœ‰ç”¨åˆ°çš„ç‰¹å¾ä¸€å®šæ˜¯æ— ç”¨å—ï¼Ÿ</p>
<blockquote>
<p>ä¸æ˜¯æ— ç”¨çš„ï¼Œä»ä¸¤ä¸ªè§’åº¦è€ƒè™‘ï¼Œä¸€æ˜¯ç‰¹å¾æ›¿ä»£æ€§ï¼Œå¦‚æœå·²ç»ä½¿ç”¨çš„ç‰¹å¾Aå’Œç‰¹å¾Bå¯ä»¥æ›¿ä»£ç‰¹å¾Cï¼Œç‰¹å¾Cå¯èƒ½å°±æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœæŠŠç‰¹å¾Cå•ç‹¬æ‹¿å‡ºæ¥è¿›è¡Œè®­ç»ƒï¼Œä¾ç„¶æœ‰æ•ˆ. å…¶äºŒï¼Œå†³ç­–æ ‘çš„æ¯ä¸€æ¡è·¯å¾„å°±æ˜¯è®¡ç®—æ¡ä»¶æ¦‚ç‡çš„æ¡ä»¶ï¼Œå‰é¢çš„æ¡ä»¶å¦‚æœåŒ…å«äº†åé¢çš„æ¡ä»¶ï¼Œåªæ˜¯è¿™ä¸ªæ¡ä»¶åœ¨è¿™æ£µæ ‘ä¸­æ˜¯æ— ç”¨çš„ï¼Œå¦‚æœæŠŠè¿™ä¸ªæ¡ä»¶æ‹¿å‡ºæ¥ä¹Ÿæ˜¯å¯ä»¥å¸®åŠ©åˆ†ææ•°æ®ã€‚</p>
</blockquote>
<p>9.å†³ç­–æ ‘çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</p>
<blockquote>
<p>ä¼˜ç‚¹: </p>
<ul>
<li><p>å†³ç­–æ ‘æ¨¡å‹å¯è¯»æ€§å¥½ï¼Œå…·æœ‰æè¿°æ€§ï¼Œæœ‰åŠ©äºäººå·¥åˆ†æï¼›</p>
</li>
<li><p>åŸºæœ¬ä¸éœ€è¦é¢„å¤„ç†ï¼Œä¸éœ€è¦æå‰å½’ä¸€åŒ–ï¼Œå¤„ç†ç¼ºå¤±å€¼ï¼›</p>
</li>
<li><p>å¯¹äºå¼‚å¸¸ç‚¹çš„å®¹é”™èƒ½åŠ›å¥½ï¼Œå¥å£®æ€§é«˜ï¼›</p>
</li>
<li><p>æ•ˆç‡é«˜ï¼Œå†³ç­–æ ‘åªéœ€è¦ä¸€æ¬¡æ€§æ„å»ºï¼Œåå¤ä½¿ç”¨ï¼Œæ¯ä¸€æ¬¡é¢„æµ‹çš„æœ€å¤§è®¡ç®—æ¬¡æ•°ä¸è¶…è¿‡å†³ç­–æ ‘çš„æ·±åº¦ã€‚</p>
</li>
</ul>
<p>ç¼ºç‚¹: </p>
<ul>
<li><p>å†³ç­–æ ‘ç®—æ³•éå¸¸å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œå¯¼è‡´æ³›åŒ–èƒ½åŠ›ä¸å¼ºã€‚å¯ä»¥é€šè¿‡è®¾ç½®èŠ‚ç‚¹æœ€å°‘æ ·æœ¬æ•°é‡å’Œé™åˆ¶å†³ç­–æ ‘æ·±åº¦æ¥æ”¹è¿›ï¼›</p>
</li>
<li><p>å¯¹ä¸­é—´å€¼çš„ç¼ºå¤±æ•æ„Ÿï¼›</p>
</li>
<li><p>å†³ç­–æ ‘ä¼šå› ä¸ºæ ·æœ¬å‘ç”Ÿä¸€ç‚¹ç‚¹çš„æ”¹åŠ¨ï¼Œå°±ä¼šå¯¼è‡´æ ‘ç»“æ„çš„å‰§çƒˆæ”¹å˜ã€‚è¿™ä¸ªå¯ä»¥é€šè¿‡é›†æˆå­¦ä¹ ä¹‹ç±»çš„æ–¹æ³•è§£å†³ï¼›</p>
</li>
<li><p>å¯»æ‰¾æœ€ä¼˜çš„å†³ç­–æ ‘æ˜¯ä¸€ä¸ªNPéš¾çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ˜¯é€šè¿‡å¯å‘å¼æ–¹æ³•ï¼Œå®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ã€‚å¯ä»¥é€šè¿‡é›†æˆå­¦ä¹ ä¹‹ç±»çš„æ–¹æ³•æ¥æ”¹å–„ï¼›</p>
</li>
<li><p>æœ‰äº›æ¯”è¾ƒå¤æ‚çš„å…³ç³»ï¼Œå†³ç­–æ ‘å¾ˆéš¾å­¦ä¹ ï¼Œæ¯”å¦‚å¼‚æˆ–ã€‚è¿™ä¸ªå°±æ²¡æœ‰åŠæ³•äº†ï¼Œä¸€èˆ¬è¿™ç§å…³ç³»å¯ä»¥æ¢ç¥ç»ç½‘ç»œåˆ†ç±»æ–¹æ³•æ¥è§£å†³ï¼›</p>
</li>
<li><p>å¦‚æœæŸäº›ç‰¹å¾çš„æ ·æœ¬æ¯”ä¾‹è¿‡å¤§ï¼Œç”Ÿæˆå†³ç­–æ ‘å®¹æ˜“åå‘äºè¿™äº›ç‰¹å¾ã€‚è¿™ä¸ªå¯ä»¥é€šè¿‡è°ƒèŠ‚æ ·æœ¬æƒé‡æ¥æ”¹å–„ã€‚</p>
</li>
</ul>
</blockquote>
<p>10.åŸºå°¼ç³»æ•°å­˜åœ¨çš„é—®é¢˜?</p>
<blockquote>
<p>åŸºå°¼æŒ‡æ•°åå‘äºå¤šå€¼å±æ€§ï¼›å½“ç±»æ•°è¾ƒå¤§æ—¶ï¼ŒåŸºå°¼æŒ‡æ•°æ±‚è§£æ¯”è¾ƒå›°éš¾ï¼›åŸºå°¼æŒ‡æ•°å€¾å‘äºæ”¯æŒåœ¨ä¸¤ä¸ªåˆ†åŒºä¸­ç”Ÿæˆå¤§å°ç›¸åŒçš„æµ‹è¯•ã€‚</p>
</blockquote>
<h3 id="é¢è¯•çœŸé¢˜"><a href="#é¢è¯•çœŸé¢˜" class="headerlink" title="é¢è¯•çœŸé¢˜"></a>é¢è¯•çœŸé¢˜</h3><p>1.å†³ç­–æ ‘å¦‚ä½•é˜²æ­¢è¿‡æ‹Ÿåˆï¼Ÿ</p>
<p>2.ä¿¡æ¯å¢ç›Šæ¯”ç›¸å¯¹ä¿¡æ¯å¢ç›Šæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p>
<p>3.å¦‚æœæœ‰å¼‚å¸¸å€¼æˆ–è€…æ•°æ®åˆ†å¸ƒä¸å‡åŒ€ï¼Œä¼šå¯¹å†³ç­–æ ‘æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</p>
<p>4.æ‰‹åŠ¨æ„å»ºCARTçš„å›å½’æ ‘çš„å‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œç»™å‡ºå…¬å¼æ¯ä¸€æ­¥çš„å…¬å¼æ¨åˆ°ï¼Ÿ</p>
<p>5.å†³ç­–æ ‘å’Œå…¶ä»–æ¨¡å‹ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ</p>
<p>6.å†³ç­–æ ‘çš„ç›®æ ‡å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>7.æ ‘å½¢ç»“æ„ä¸ºä»€ä¹ˆä¸éœ€è¦å½’ä¸€åŒ–?</p>
<blockquote>
<ul>
<li>æ•°å€¼ç¼©æ”¾ä¸å½±å“åˆ†è£‚ç‚¹ä½ç½®ï¼Œå¯¹æ ‘æ¨¡å‹çš„ç»“æ„ä¸é€ æˆå½±å“ã€‚</li>
<li>æŒ‰ç…§ç‰¹å¾å€¼è¿›è¡Œæ’åºçš„ï¼Œæ’åºçš„é¡ºåºä¸å˜ï¼Œé‚£ä¹ˆæ‰€å±çš„åˆ†æ”¯ä»¥åŠåˆ†è£‚ç‚¹å°±ä¸ä¼šæœ‰ä¸åŒã€‚</li>
<li>æ ‘æ¨¡å‹æ˜¯ä¸èƒ½è¿›è¡Œæ¢¯åº¦ä¸‹é™çš„ï¼Œå› ä¸ºæ„å»ºæ ‘æ¨¡å‹ï¼ˆå›å½’æ ‘ï¼‰å¯»æ‰¾æœ€ä¼˜ç‚¹æ—¶æ˜¯é€šè¿‡å¯»æ‰¾æœ€ä¼˜åˆ†è£‚ç‚¹å®Œæˆçš„ï¼Œå› æ­¤æ ‘æ¨¡å‹æ˜¯é˜¶è·ƒçš„ï¼Œé˜¶è·ƒç‚¹æ˜¯ä¸å¯å¯¼çš„ï¼Œå¹¶ä¸”æ±‚å¯¼æ²¡æ„ä¹‰ï¼Œä¹Ÿå°±ä¸éœ€è¦å½’ä¸€åŒ–ã€‚</li>
</ul>
</blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ª <a href="https://www.cnblogs.com/liuyingjun/p/10590095.html" target="_blank" rel="noopener">https://www.cnblogs.com/liuyingjun/p/10590095.html</a></p>
<p>å¼•è‡ªçŸ¥ä¹â€”â€”æ•°æ®å–ç»å›¢ï¼šå•æ´å®¾</p>
<p>é¢è¯•å®˜ï¼šå°å¼ åŒå­¦ï¼Œä½ å¥½ï¼Œçœ‹äº†ä½ çš„ç®€å†ï¼Œå¯¹ç›¸å…³ç®—æ³•è¿˜æ˜¯ç•¥æ‡‚ä¸€äº›ï¼Œä¸‹é¢å¼€å§‹æˆ‘ä»¬çš„é¢è¯•ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼Œåœ¨ä¸€ä¸ªæ ·æœ¬é›†ä¸­ï¼Œå…¶ä¸­æœ‰100ä¸ªæ ·æœ¬å±äºAï¼Œ9900ä¸ªæ ·æœ¬å±äºBï¼Œæˆ‘æƒ³ç”¨å†³ç­–æ ‘ç®—æ³•æ¥å®ç°å¯¹ABæ ·æœ¬è¿›è¡ŒåŒºåˆ†ï¼Œè¿™æ—¶ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼š</p>
<p>å°å¼ ï¼šæ¬ æ‹Ÿåˆç°è±¡ï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ ·æœ¬é›†ä¸­ï¼ŒABæ ·æœ¬å±äºä¸¥é‡å¤±è¡¡çŠ¶æ€ï¼Œåœ¨å»ºç«‹å†³ç­–æ ‘ç®—æ³•çš„è¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹ä¼šæ›´å¤šçš„åå€šåˆ°Bæ ·æœ¬çš„æ€§è´¨ï¼Œå¯¹Aæ ·æœ¬çš„æ€§è´¨è®­ç»ƒè¾ƒå·®ï¼Œä¸èƒ½å¾ˆå¥½çš„åæ˜ æ ·æœ¬é›†çš„ç‰¹å¾ã€‚</p>
<p>é¢è¯•å®˜ï¼šçœ‹ä½ å†³ç­–æ ‘åº”è¯¥æŒæ¡çš„ä¸é”™ï¼Œä½ è¯´ä¸€ä¸‹è‡ªå·±å¯¹äºå†³ç­–æ ‘ç®—æ³•çš„ç†è§£ï¼Ÿ</p>
<p>å°å¼ ï¼šå†³ç­–æ ‘ç®—æ³•ï¼Œæ— è®ºæ˜¯å“ªç§ï¼Œå…¶ç›®çš„éƒ½æ˜¯ä¸ºäº†è®©æ¨¡å‹çš„ä¸ç¡®å®šæ€§é™ä½çš„è¶Šå¿«è¶Šå¥½ï¼ŒåŸºäºå…¶è¯„ä»·æŒ‡æ ‡çš„ä¸åŒï¼Œä¸»è¦æ˜¯ID3ç®—æ³•ï¼ŒC4.5ç®—æ³•å’ŒCARTç®—æ³•ï¼Œå…¶ä¸­ID3ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡æ˜¯ä¿¡æ¯å¢ç›Šï¼ŒC4.5ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡æ˜¯ä¿¡æ¯å¢ç›Šç‡ï¼ŒCARTç®—æ³•çš„è¯„ä»·æŒ‡æ ‡æ˜¯åŸºå°¼ç³»æ•°ã€‚</p>
<p>é¢è¯•å®˜ï¼šä¿¡æ¯å¢ç›Šï¼Œå¥½çš„ï¼Œè¿™é‡Œé¢æœ‰ä¸€ä¸ªä¿¡æ¯è®ºçš„æ¦‚å¿µï¼Œä½ åº”è¯¥çŸ¥é“çš„å§ï¼Œå™è¿°ä¸€ä¸‹</p>
<p>å°å¼ ï¼šé¦™å†œç†µï¼Œéšæœºå˜é‡ä¸ç¡®å®šæ€§çš„åº¦é‡ã€‚åˆ©ç”¨ID3ç®—æ³•ï¼Œæ¯ä¸€æ¬¡å¯¹å†³ç­–æ ‘è¿›è¡Œåˆ†å‰é€‰å–å±æ€§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé€‰å–ä¿¡æ¯å¢ç›Šæœ€é«˜çš„å±æ€§æ¥ä½œä¸ºåˆ†è£‚å±æ€§ï¼Œåªæœ‰è¿™æ ·ï¼Œå†³ç­–æ ‘çš„ä¸çº¯åº¦æ‰ä¼šé™ä½çš„è¶Šå¿«ã€‚</p>
<p>é¢è¯•å®˜ï¼šOKï¼Œä½ ä¹ŸçŸ¥é“ï¼Œåœ¨å†³ç­–æ ‘æ— é™åˆ†å‰çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°ä¸€ç§ç°è±¡ï¼Œå«è¿‡æ‹Ÿåˆï¼Œå’Œä¸Šé¢è¯´è¿‡çš„æ¬ æ‹Ÿåˆæ˜¯ä¸ä¸€æ ·çš„ï¼Œä½ è¯´ä¸€ä¸‹è¿‡æ‹Ÿåˆå‡ºç°çš„åŸå› ä»¥åŠæˆ‘ä»¬ç”¨ä»€ä¹ˆæ–¹æ³•æ¥é˜²æ­¢è¿‡æ‹Ÿåˆçš„äº§ç”Ÿï¼Ÿ</p>
<p>å°å¼ ï¼šå¯¹è®­ç»ƒæ•°æ®é¢„æµ‹æ•ˆæœå¾ˆå¥½ï¼Œä½†æ˜¯æµ‹è¯•æ•°æ®é¢„æµ‹æ•ˆæœè¾ƒå·®ï¼Œåˆ™ç§°å‡ºç°äº†è¿‡æ‹Ÿåˆç°è±¡ã€‚å¯¹äºè¿‡æ‹Ÿåˆç°è±¡äº§ç”Ÿçš„åŸå› ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼Œç¬¬ä¸€ï¼šåœ¨å†³ç­–æ ‘æ„å»ºçš„è¿‡ç¨‹ä¸­ï¼Œå¯¹å†³ç­–æ ‘çš„ç”Ÿé•¿æ²¡æœ‰è¿›è¡Œåˆç†çš„é™åˆ¶ï¼ˆå‰ªæï¼‰ï¼›ç¬¬äºŒï¼šåœ¨å»ºæ¨¡è¿‡ç¨‹ä¸­ä½¿ç”¨äº†è¾ƒå¤šçš„è¾“å‡ºå˜é‡ï¼Œå˜é‡è¾ƒå¤šä¹Ÿå®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆï¼›ç¬¬ä¸‰ï¼šæ ·æœ¬ä¸­æœ‰ä¸€äº›å™ªå£°æ•°æ®ï¼Œå™ªå£°æ•°æ®å¯¹å†³ç­–æ ‘çš„æ„å»ºçš„å¹²æ‰°å¾ˆå¤šï¼Œæ²¡æœ‰å¯¹å™ªå£°æ•°æ®è¿›è¡Œæœ‰æ•ˆçš„å‰”é™¤ã€‚å¯¹äºè¿‡æ‹Ÿåˆç°è±¡çš„é¢„é˜²æªæ–½ï¼Œæœ‰ä»¥ä¸‹ä¸€äº›æ–¹æ³•ï¼Œç¬¬ä¸€ï¼šé€‰æ‹©åˆç†çš„å‚æ•°è¿›è¡Œå‰ªæï¼Œå¯ä»¥åˆ†ä¸ºé¢„å‰ªæåå‰ªæï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨åå‰ªæçš„æ–¹æ³•æ¥åšï¼›ç¬¬äºŒï¼šK-foldsäº¤å‰éªŒè¯ï¼Œå°†è®­ç»ƒé›†åˆ†ä¸ºKä»½ï¼Œç„¶åè¿›è¡ŒKæ¬¡çš„äº¤å‰éªŒè¯ï¼Œæ¯æ¬¡ä½¿ç”¨K-1ä»½ä½œä¸ºè®­ç»ƒæ ·æœ¬æ•°æ®é›†ï¼Œå¦å¤–çš„ä¸€ä»½ä½œä¸ºæµ‹è¯•é›†åˆï¼ˆä½œè€…è¯´åäº†ï¼Œåº”è¯¥æ˜¯ä»½ä½œä¸ºæµ‹è¯•é›†ï¼Œå…¶ä½™k-1ä»½ä½œä¸ºè®­ç»ƒé›†ï¼‰ï¼› ç¬¬ä¸‰ï¼šå‡å°‘ç‰¹å¾ï¼Œè®¡ç®—æ¯ä¸€ä¸ªç‰¹å¾å’Œå“åº”å˜é‡çš„ç›¸å…³æ€§ï¼Œå¸¸è§çš„ä¸ºçš®å°”é€Šç›¸å…³ç³»æ•°ï¼Œå°†ç›¸å…³æ€§è¾ƒå°çš„å˜é‡å‰”é™¤ï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ–¹æ³•æ¥è¿›è¡Œç‰¹å¾ç­›é€‰ï¼Œæ¯”å¦‚åŸºäºå†³ç­–æ ‘çš„ç‰¹å¾ç­›é€‰ï¼Œé€šè¿‡æ­£åˆ™åŒ–çš„æ–¹å¼æ¥è¿›è¡Œç‰¹å¾é€‰å–ç­‰ã€‚</p>
<p>é¢è¯•å®˜ï¼šä½ åˆšåˆšå‰é¢æœ‰æåˆ°é¢„å‰ªæå’Œåå‰ªæï¼Œå½“ç„¶é¢„å‰ªæå°±æ˜¯åœ¨å†³ç­–æ ‘ç”ŸæˆåˆæœŸå°±å·²ç»è®¾ç½®äº†å†³ç­–æ ‘çš„å‚æ•°ï¼Œåå‰ªææ˜¯åœ¨å†³ç­–æ ‘å®Œå…¨å»ºç«‹ä¹‹åå†è¿”å›å»å¯¹å†³ç­–æ ‘è¿›è¡Œå‰ªæï¼Œä½ èƒ½å¦è¯´ä¸€ä¸‹å‰ªæè¿‡ç¨‹ä¸­å¯ä»¥å‚è€ƒçš„æŸäº›å‚æ•°ï¼Ÿ</p>
<p>å°å¼ ï¼šå‰ªæåˆ†ä¸ºé¢„å‰ªæå’Œåå‰ªæï¼Œå‚æ•°æœ‰å¾ˆå¤šï¼Œåœ¨Rå’ŒPythonä¸­éƒ½æœ‰ä¸“é—¨çš„å‚æ•°æ¥è¿›è¡Œè®¾ç½®ï¼Œä¸‹é¢æˆ‘ä»¥Pythonä¸­çš„å‚æ•°æ¥è¿›è¡Œå™è¿°ï¼Œmax_depthï¼ˆæ ‘çš„é«˜åº¦ï¼‰ï¼Œmin_samples_splitï¼ˆå¶å­ç»“ç‚¹çš„æ•°ç›®ï¼‰ï¼Œmax_leaf_nodesï¼ˆæœ€å¤§å¶å­èŠ‚ç‚¹æ•°ï¼‰ï¼Œmin_impurity_splitï¼ˆé™åˆ¶ä¸çº¯åº¦ï¼‰ï¼Œå½“ç„¶Rè¯­è¨€é‡Œé¢çš„rpartåŒ…ä¹Ÿå¯ä»¥å¾ˆå¥½çš„å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>é¢è¯•å®˜ï¼šå¯¹äº†ï¼Œä½ åˆšåˆšè¿˜è¯´åˆ°äº†ç”¨å†³ç­–æ ‘æ¥è¿›è¡Œç‰¹å¾çš„ç­›é€‰ï¼Œç°åœ¨æˆ‘ä»¬å°±ä»¥ID3ç®—æ³•ä¸ºä¾‹ï¼Œæ¥è¯´ä¸€ä¸‹å†³ç­–æ ‘ç®—æ³•å¯¹ç‰¹å¾çš„ç­›é€‰ï¼Ÿ</p>
<p>å°å¼ ï¼šå¯¹äºç¦»æ•£å˜é‡ï¼Œè®¡ç®—æ¯ä¸€ä¸ªå˜é‡çš„ä¿¡æ¯å¢ç›Šï¼Œé€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„å±æ€§æ¥ä½œä¸ºç»“ç‚¹çš„åˆ†è£‚å±æ€§ï¼›å¯¹äºè¿ç»­å˜é‡ï¼Œé¦–å…ˆå°†å˜é‡çš„å€¼è¿›è¡Œå‡åºæ’åˆ—ï¼Œæ¯å¯¹ç›¸é‚»å€¼çš„ä¸­ç‚¹ä½œä¸ºå¯èƒ½çš„åˆ†ç¦»ç‚¹ï¼Œå¯¹äºæ¯ä¸€ä¸ªåˆ’åˆ†ï¼Œé€‰æ‹©å…·æœ‰æœ€å°æœŸæœ›ä¿¡æ¯è¦æ±‚çš„ç‚¹ä½œä¸ºåˆ†è£‚ç‚¹ï¼Œæ¥è¿›è¡Œåç»­çš„å†³ç­–æ•°çš„åˆ†è£‚ã€‚</p>
<p>é¢è¯•å®˜ï¼šä½ åˆšåˆšè¿˜è¯´åˆ°äº†æ­£åˆ™åŒ–ï¼Œç¡®å®å¯ä»¥å¯¹è¿‡æ‹Ÿåˆç°è±¡æ¥è¿›è¡Œå¾ˆå¥½çš„è°ƒæ•´ï¼ŒåŸºäºä½ è‡ªå·±çš„ç†è§£ï¼Œæ¥è¯´ä¸€ä¸‹æ­£åˆ™åŒ–ï¼Ÿ</p>
<p>å°å¼ ï¼šè¿™ä¸€å—çš„çŸ¥è¯†æŒæ¡çš„ä¸æ˜¯å¾ˆå¥½ï¼Œæˆ‘ç®€å•è¯´ä¸€ä¸‹è‡ªå·±å¯¹è¿™ä¸€å—çš„äº†è§£ã€‚ä»¥äºŒç»´æƒ…å†µä¸ºä¾‹ï¼Œåœ¨L1æ­£åˆ™åŒ–ä¸­ï¼Œæƒ©ç½šé¡¹æ˜¯ç»å¯¹å€¼ä¹‹å’Œï¼Œå› æ­¤åœ¨åæ ‡è½´ä¸Šä¼šå‡ºç°ä¸€ä¸ªçŸ©å½¢ï¼Œä½†æ˜¯L2æ­£åˆ™åŒ–çš„æƒ©ç½šé¡¹æ˜¯åœ†å½¢ï¼Œå› æ­¤åœ¨L1æ­£åˆ™åŒ–ä¸­å¢å¤§äº†ç³»æ•°ä¸º0çš„æœºä¼šï¼Œè¿™æ ·å…·æœ‰ç¨€ç–è§£çš„ç‰¹æ€§ï¼Œåœ¨L2æ­£åˆ™åŒ–ä¸­ï¼Œç”±äºç³»æ•°ä¸º0çš„æœºç‡å¤§å¤§å‡å°ï¼Œå› æ­¤ä¸å…·æœ‰ç¨€ç–è§£çš„ç‰¹æ€§ã€‚ä½†æ˜¯L1æ²¡æœ‰é€‰åˆ°çš„ç‰¹æ€§ä¸ä»£è¡¨ä¸é‡è¦ï¼Œå› æ­¤L1å’ŒL2æ­£åˆ™åŒ–è¦ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p>
<p>é¢è¯•å®˜ï¼šè¿˜å¯ä»¥å§ï¼æ­£åˆ™åŒ–å°±æ˜¯åœ¨ç›®æ ‡å‡½æ•°åé¢åŠ ä¸Šäº†æƒ©ç½šé¡¹ï¼Œä½ ä¹Ÿå¯ä»¥å°†åé¢çš„æƒ©ç½šé¡¹ç†è§£ä¸ºèŒƒæ•°ã€‚åˆ†ç±»ç®—æ³•æœ‰å¾ˆå¤šï¼Œé€»è¾‘å›å½’ç®—æ³•ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„ç®—æ³•ï¼Œåˆšåˆšä¸»è¦è®¨è®ºçš„æ˜¯å†³ç­–æ ‘ç®—æ³•ï¼Œç°åœ¨æˆ‘ä»¬ç®€å•èŠä¸€ä¸‹ä¸åŒåˆ†ç±»ç®—æ³•ä¹‹é—´çš„åŒºåˆ«å§ï¼è®¨è®ºä¸€ä¸‹å†³ç­–æ ‘ç®—æ³•å’Œé€»è¾‘å›å½’ç®—æ³•ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ</p>
<p>å°å¼ ï¼šåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼šç¬¬ä¸€ï¼Œé€»è¾‘å›å½’ç€çœ¼äºå¯¹æ•´ä½“æ•°æ®çš„æ‹Ÿåˆï¼Œåœ¨æ•´ä½“ç»“æ„ä¸Šä¼˜äºå†³ç­–æ ‘ï¼› ä½†æ˜¯å†³ç­–æ ‘é‡‡ç”¨åˆ†å‰²çš„æ–¹æ³•ï¼Œæ·±å…¥åˆ°æ•°æ®å†…éƒ¨ï¼Œå¯¹å±€éƒ¨ç»“æ„çš„åˆ†ææ˜¯ä¼˜äºé€»è¾‘å›å½’ï¼›ç¬¬äºŒï¼Œé€»è¾‘å›å½’å¯¹çº¿æ€§é—®é¢˜æŠŠæ¡è¾ƒå¥½ï¼Œå› æ­¤æˆ‘ä»¬åœ¨å»ºç«‹åˆ†ç±»ç®—æ³•çš„æ—¶å€™ä¹Ÿæ˜¯ä¼˜å…ˆé€‰æ‹©é€»è¾‘å›å½’ç®—æ³•ï¼Œå†³ç­–æ ‘å¯¹éçº¿æ€§é—®é¢˜çš„æŠŠæ¡è¾ƒå¥½ï¼›ç¬¬ä¸‰ï¼Œä»æœ¬è´¨æ¥è€ƒè™‘ï¼Œå†³ç­–æ ‘ç®—æ³•å‡è®¾æ¯ä¸€æ¬¡å†³ç­–è¾¹ç•Œéƒ½æ˜¯å’Œç‰¹å¾ç›¸äº’å¹³è¡Œæˆ–å‚ç›´çš„ï¼Œå› æ­¤ä¼šå°†ç‰¹å¾ç©ºé—´åˆ’åˆ†ä¸ºçŸ©å½¢ï¼Œå› è€Œå†³ç­–æ ‘ä¼šäº§ç”Ÿå¤æ‚çš„æ–¹ç¨‹å¼ï¼Œè¿™æ ·ä¼šé€ æˆè¿‡æ‹Ÿåˆç°è±¡ï¼›é€»è¾‘å›å½’åªæ˜¯ä¸€æ¡å¹³æ»‘çš„è¾¹ç•Œæ›²çº¿ï¼Œä¸å®¹æ˜“å‡ºç°è¿‡æ‹Ÿåˆç°è±¡ã€‚</p>]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>Time Series</title>
    <url>/2020/04/02/Time-Series/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ¥æºï¼š<a href="https://courses.analyticsvidhya.com/courses/creating-time-series-forecast-using-python" target="_blank" rel="noopener">Time Series Forecasting using Python - Analytics Vidhya</a></p>
<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><h3 id="What-is-Time-Series-Analysis"><a href="#What-is-Time-Series-Analysis" class="headerlink" title="What is Time Series Analysis?"></a>What is Time Series Analysis?</h3><p> As the name â€˜time series forecastingâ€™ suggests, it involves working on time (years, days, hours, minutes) based data, to derive hidden insights to make informed decision making.</p>
<h3 id="Importance-of-Time-Series-Analysis"><a href="#Importance-of-Time-Series-Analysis" class="headerlink" title="Importance of Time Series Analysis"></a>Importance of Time Series Analysis</h3><p>Time series models are very useful models when you have serially correlated data as shown above. Most businesses work on time series data to analyze </p>
<ul>
<li>Sales numbers for the next year </li>
<li>Website Traffic</li>
<li>Competition Position</li>
<li>Demand of products</li>
<li>Stock Market Analysis</li>
<li>Census Analysis</li>
<li>Budgetary Analysis</li>
</ul>
<p>This is just the tip of the iceberg and there are numerous prediction problems that involve a time component and concepts of time series analysis come into picture.</p>
<h3 id="Why-is-Time-Series-Forecasting-Challenging"><a href="#Why-is-Time-Series-Forecasting-Challenging" class="headerlink" title="Why is Time Series Forecasting Challenging?"></a>Why is Time Series Forecasting Challenging?</h3><p>But what makes a time series more challenging than say a regular regression problem? There are 2 things:</p>
<ul>
<li><strong>Time Dependence of a time series -</strong> The basic assumption of a linear regression model that the observations are independent doesnâ€™t hold in this case.</li>
<li><strong>Seasonality in a time series -</strong> Along with an increasing or decreasing trend, most time series have some form of seasonal trends, i.e. variations specific to a particular time frame. </li>
</ul>
<a id="more"></a>
<h2 id="Introduction-to-Time-Series"><a href="#Introduction-to-Time-Series" class="headerlink" title="Introduction to Time Series"></a>Introduction to Time Series</h2><p><em>Time Series is generally data which is collected over time and is dependent on it.</em></p>
<p><img src="/2020/04/02/Time-Series/1585797313470.png" alt="1585797313470"></p>
<p>Here we see that the count of cars is independent of time, hence it is not a time series. While the CO2 level increases with respect to time, hence it is a time series.</p>
<p>Some of the examples of time series are:</p>
<p>Stock Price :</p>
<p><img src="https://s3.amazonaws.com/thinkific/file_uploads/118220/images/865/5c1/2c7/1549344770403.jpg" alt="img"></p>
<p>Passenger Count of an airlines :</p>
<p><img src="https://s3.amazonaws.com/thinkific/file_uploads/118220/images/a5d/87f/854/1549344770489.jpg" alt="img"></p>
<p>Temperature over time :</p>
<p><img src="https://s3.amazonaws.com/thinkific/file_uploads/118220/images/1e6/e15/479/1549344770578.jpg" alt="img"></p>
<p>Number of visitors in a hotel :</p>
<p><img src="https://s3.amazonaws.com/thinkific/file_uploads/118220/images/8e3/d40/890/1549344770669.jpg" alt="img"></p>
<h3 id="Trend"><a href="#Trend" class="headerlink" title="Trend"></a>Trend</h3><p>Trend is a general direction in which something is developing or changing.</p>
<p><img src="https://s3.amazonaws.com/thinkific/file_uploads/118220/images/7d7/791/f5e/1549344821475.jpg" alt="Example"></p>
<p>Example</p>
<p>Here the red line represents an increasing trend of the time series.</p>
<h3 id="Seasonality"><a href="#Seasonality" class="headerlink" title="Seasonality"></a><strong>Seasonality</strong></h3><p>Another clear pattern can also be seen in the above time series, i.e., the pattern is repeating at regular time interval which is known as the seasonality. Any predictable change or pattern in a time series that recurs or repeats over a specific time period can be said to be seasonality. </p>
<p><img src="https://s3.amazonaws.com/thinkific/file_uploads/118220/images/115/9ee/826/1549344821557.jpg" alt="Example"></p>
<p>Example</p>
<p>We can see that the time series is repeating its pattern after every 12 months i.e there is a peak every year during the month of January and a trough every year in the month of September, hence this time series has a seasonality of 12 months.</p>
<h3 id="Difference-between-a-time-series-and-regression-problem"><a href="#Difference-between-a-time-series-and-regression-problem" class="headerlink" title="Difference between a time series and regression problem"></a><strong>Difference between a time series and regression problem</strong></h3><ul>
<li>The main difference is that a time series is time dependent. So the basic assumption of a linear regression model that the observations are independent doesnâ€™t hold in this case.</li>
<li>Along with an increasing or decreasing trend, most Time Series have some form of seasonality trends,i.e. variations specific to a particular time frame.</li>
</ul>
<p>So, predicting a time series using regression techniques is not a good approach.</p>
<p>Time series analysis comprises methods for analyzing time series data in order to extract meaningful statistics and other characteristics of the data. Time series forecasting is the use of a model to predict future values based on previously observed values.</p>
<h2 id="Project"><a href="#Project" class="headerlink" title="Project"></a>Project</h2><p> <a href="https://datahack.analyticsvidhya.com/contest/practice-problem-time-series-2/" target="_blank" rel="noopener">https://datahack.analyticsvidhya.com/contest/practice-problem-time-series-2/</a></p>
<h3 id="Problem-Statement"><a href="#Problem-Statement" class="headerlink" title="Problem Statement"></a>Problem Statement</h3><p>Unicorn Investors wants to make an investment in a new form of transportation - JetRail. JetRail uses Jet propulsion technology to run rails and move people at a high speed! The investment would only make sense, if they can get more than 1 Million monthly users with in next 18 months. In order to help Unicorn Ventures in their decision, you need to forecast the traffic on JetRail for the next 7 months. You are provided with traffic data of JetRail since inception in the test file.</p>
<h3 id="Exploratory-Analysis"><a href="#Exploratory-Analysis" class="headerlink" title="Exploratory Analysis"></a>Exploratory Analysis</h3><p>åŸæœ¬çš„datetime: train.Datetimeæ˜¯Objectæ ¼å¼ï¼Œé¦–å…ˆchange the data type to datetime format</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train[<span class="string">'Datetime'</span>] = pd.to_datetime(train.Datetime,format=<span class="string">'%d-%m-%Y %H:%M'</span>) </span><br><span class="line"><span class="comment"># formatæ˜¯åŸæ ¼å¼çš„å½¢å¼</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train.index = train[<span class="string">'Datetime'</span>] <span class="comment"># indexing the Datetime to get the time period on the x-axis.</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line">ts = df[<span class="string">'Count'</span>] </span><br><span class="line">plt.figure(figsize=(<span class="number">16</span>,<span class="number">8</span>)) </span><br><span class="line">plt.plot(ts, label=<span class="string">'Passenger Count'</span>) </span><br><span class="line">plt.title(<span class="string">'Time Series'</span>) </span><br><span class="line">plt.xlabel(<span class="string">"Time(year-month)"</span>) </span><br><span class="line">plt.ylabel(<span class="string">"Passenger count"</span>) </span><br><span class="line">plt.legend(loc=<span class="string">'best'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="https://s3.amazonaws.com/thinkific/file_uploads/118220/images/a58/220/12e/1549346696050.jpg" alt="png"></p>
<h3 id="Split-data"><a href="#Split-data" class="headerlink" title="Split data"></a>Split data</h3><p>å°†è®­ç»ƒæ•°æ®åˆ’åˆ†ä¸ºè®­ç»ƒé›†ä¸éªŒè¯é›†</p>
<p>The starting date of the dataset is 25-08-2012 as we have seen in the exploration part and the end date is 25-09-2014.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Train=train.ix[<span class="string">'2012-08-25'</span>:<span class="string">'2014-06-24'</span>] valid=train.ix[<span class="string">'2014-06-25'</span>:<span class="string">'2014-09-25'</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li>We have done time based validation here by selecting the last 3 months for the validation data and rest in the train data. If we would have done it randomly it may work well for the train dataset but will not work effectively on validation dataset.</li>
<li>Lets understand it in this way: If we choose the split randomly it will take some values from the starting and some from the last years as well. It is similar to predicting the old values based on the future values which is not the case in real scenario. So, this kind of split is used while working with time related problems.</li>
</ul>
<p>åˆ’åˆ†æ ‡å‡†ï¼šå°†æœ€å3ä¸ªæœˆçš„æ•°æ®åˆ’åˆ†ä¸ºéªŒè¯é›†ï¼Œè€Œä¸æ˜¯éšæœºåˆ’åˆ†ã€‚å› ä¸ºè‹¥æ˜¯éšæœºåˆ’åˆ†ï¼Œåˆ™å­˜åœ¨ç”¨future valueå»é¢„æµ‹old valueçš„æƒ…å†µï¼Œè€Œè¿™åœ¨ç°å®æƒ…å†µä¸­æ˜¯ä¸å¯èƒ½çš„ã€‚</p>
<h3 id="ARIMA-model"><a href="#ARIMA-model" class="headerlink" title="ARIMA model"></a>ARIMA model</h3><p>ARIMA Modelçš„ä»‹ç»å¯è§ï¼š<a href="https://www.youtube.com/watch?v=0xHf-SJ9Z9U" target="_blank" rel="noopener">https://www.youtube.com/watch?v=0xHf-SJ9Z9U</a></p>
<ul>
<li>ARIMA stands for Auto Regression Integrated Moving Average. It is specified by three ordered parameters (p,d,q).</li>
<li>Here p is the order of the autoregressive model(number of time lags)</li>
<li>d is the degree of differencing(number of times the data have had past values subtracted)</li>
<li>q is the order of moving average model. We will discuss more about these parameters in next section.</li>
</ul>
<p>The ARIMA forecasting for a stationary time series is nothing but a linear (like a linear regression) equation.</p>
<h4 id="What-is-a-stationary-time-series"><a href="#What-is-a-stationary-time-series" class="headerlink" title="What is a stationary time series?"></a>What is a stationary time series?</h4><p>There are three basic criterion for a series to be classified as stationary series :</p>
<ul>
<li>The mean of the time series should not be a function of time. It should be constant.</li>
<li>The variance of the time series should not be a function of time.</li>
<li>THe covariance of the ith term and the (i+m)th term should not be a function of time.</li>
</ul>
<h4 id="Why-do-we-have-to-make-the-time-series-stationary"><a href="#Why-do-we-have-to-make-the-time-series-stationary" class="headerlink" title="Why do we have to make the time series stationary?"></a>Why do we have to make the time series stationary?</h4><p>We make the series stationary to make the variables independent. Variables can be dependent in various ways, but can only be independent in one way. So, we will get more information when they are independent. Hence the time series must be stationary.</p>
<p>If the time series is not stationary, firstly we have to make it stationary. For doing so, we need to remove the trend and seasonality from the data. To learn more about stationarity you can refer this article: <a href="https://www.analyticsvidhya.com/blog/2015/12/complete-tutorial-time-series-modeling/" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2015/12/complete-tutorial-time-series-modeling/</a></p>
]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>æ—¶é—´åºåˆ—</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®æŒ–æ˜</title>
    <url>/2020/04/01/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ¥æºï¼šä¹¦ç±ï¼šæ•°æ®æŒ–æ˜ï¼šRè¯­è¨€å®æˆ˜</p>
<h2 id="1-æ•°æ®æŒ–æ˜"><a href="#1-æ•°æ®æŒ–æ˜" class="headerlink" title="1. æ•°æ®æŒ–æ˜"></a>1. æ•°æ®æŒ–æ˜</h2><h3 id="æ•°æ®æŒ–æ˜çš„è¿‡ç¨‹"><a href="#æ•°æ®æŒ–æ˜çš„è¿‡ç¨‹" class="headerlink" title="æ•°æ®æŒ–æ˜çš„è¿‡ç¨‹"></a>æ•°æ®æŒ–æ˜çš„è¿‡ç¨‹</h3><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585702561613.png" alt="1"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585702611608.png" alt="1585702611608"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585702665564.png" alt="1585702665564"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585702697687.png" alt="1585702697687"></p>
<h3 id="æ•°æ®æŒ–æ˜çš„å¯¹è±¡"><a href="#æ•°æ®æŒ–æ˜çš„å¯¹è±¡" class="headerlink" title="æ•°æ®æŒ–æ˜çš„å¯¹è±¡"></a>æ•°æ®æŒ–æ˜çš„å¯¹è±¡</h3><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585702748399.png" alt="1585702748399"></p>
<a id="more"></a>
<h3 id="æ•°æ®æŒ–æ˜çš„æ–¹æ³•"><a href="#æ•°æ®æŒ–æ˜çš„æ–¹æ³•" class="headerlink" title="æ•°æ®æŒ–æ˜çš„æ–¹æ³•"></a>æ•°æ®æŒ–æ˜çš„æ–¹æ³•</h3><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585702952640.png" alt="1585702952640"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585702973741.png" alt="1585702973741"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585702996306.png" alt="1585702996306"></p>
<h2 id="2-æ•°æ®æ¦‚è§ˆ"><a href="#2-æ•°æ®æ¦‚è§ˆ" class="headerlink" title="2. æ•°æ®æ¦‚è§ˆ"></a>2. æ•°æ®æ¦‚è§ˆ</h2><h3 id="Rçš„æ•°æ®åˆ†ç±»"><a href="#Rçš„æ•°æ®åˆ†ç±»" class="headerlink" title="Rçš„æ•°æ®åˆ†ç±»"></a>Rçš„æ•°æ®åˆ†ç±»</h3><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585708306115.png" alt="1585708306115"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585708352907.png" alt="1585708352907"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585708426054.png" alt="1585708426054"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585708478937.png" alt="1585708478937"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585708516071.png" alt="1585708516071"></p>
<h3 id="ç”¨Rç®€å•å¤„ç†æ•°æ®"><a href="#ç”¨Rç®€å•å¤„ç†æ•°æ®" class="headerlink" title="ç”¨Rç®€å•å¤„ç†æ•°æ®"></a>ç”¨Rç®€å•å¤„ç†æ•°æ®</h3><p>è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬ä»¥MASSè½¯ä»¶åŒ…ä¸­çš„Insuranceæ•°æ®é›†ä¸ºä¾‹ï¼Œé€šè¿‡å¯¹å…¶åŸºæœ¬ä¿¡æ¯åŠå˜é‡ç±»å‹ç­‰<br>æ–¹é¢çš„æ¢ç´¢ï¼Œä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„Rå‡½æ•°ã€‚åœ¨ç€æ‰‹å¤„ç†æ¯ä¸€ä¸ªæ•°æ®é›†æ—¶ï¼ŒåŒ…æ‹¬è¿›è¡Œæ•°æ®é¢„å¤„ç†åŠåç»­åˆ†æçš„è¿‡ç¨‹ä¸­ï¼Œè¿™äº›å‡½æ•°é€šå¸¸ä¼šè¢«åå¤ä½¿ç”¨ï¼Œå¯ä»¥è¯´æ˜¯å±•å¼€æ•°æ®æŒ–æ˜çš„å¿…ç»æ­¥éª¤ã€‚</p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585708954877.png" alt="1585708954877"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585708983273.png" alt="1585708983273"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709046088.png" alt="1585709046088"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709085363.png" alt="1585709085363"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709217345.png" alt="1585709217345"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709257400.png" alt="1585709257400"></p>
<h3 id="æ•°æ®æŠ½æ ·"><a href="#æ•°æ®æŠ½æ ·" class="headerlink" title="æ•°æ®æŠ½æ ·"></a>æ•°æ®æŠ½æ ·</h3><p>æŠ½æ ·æŠ€æœ¯æ˜¯æˆ‘ä»¬åœ¨å’Œæ•°æ®æ‰“äº¤é“è¿‡ç¨‹ä¸­å¸¸å¸¸éœ€è¦ç”¨åˆ°çš„åŸºæœ¬æŠ€èƒ½ä¹‹ä¸€ã€‚</p>
<p>æ¯”å¦‚ï¼šåœ¨æ”¶é›†æ•°æ®è¿‡ç¨‹ä¸­ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¹¶ä¸é‡‡å–æ™®æŸ¥çš„æ–¹å¼è·å–æ€»ä½“ä¸­æ‰€æœ‰æ ·æœ¬çš„æ•°æ®ä¿¡æ¯ï¼Œè€Œæ˜¯ä»¥å„ç±»æŠ½æ ·æ–¹æ³•æŠ½å–å…¶ä¸­çš„è‹¥å¹²ä»£è¡¨æ€§æ ·æœ¬æ¥è¿›è¡Œæ•°æ®è·å–å’Œåˆ†æï¼šè€Œåœ¨è·å¾—å¾…åˆ†ææ•°æ®é›†åï¼Œå¾€å¾€éœ€è¦å†æ¬¡é€šè¿‡æŠ½æ ·æŠ€æœ¯é€‰å–å‡ºè®­ç»ƒé›†ä¸æµ‹è¯•é›†ï¼Œä»¥ä¾¿æ¯”è¾ƒé€‰æ‹©å‡ºæœ€ä¼˜çš„æŒ–æ˜ç®—æ³•ã€‚</p>
<p>ä»¥ä¸‹æˆ‘ä»¬ä¸»è¦ä»‹ç»ç®€å•éšæœºæŠ½æ ·ã€åˆ†å±‚æŠ½æ ·åŠæ•´ç¾¤æŠ½æ ·è¿™ä¸‰ç§åŸºæœ¬æŠ½æ ·æ–¹æ³•åœ¨Rä¸­çš„å®ç°ã€‚å…¶ä¸­ä¸»è¦ç”¨åˆ°<code>base</code>è½¯ä»¶åŒ…ä¸­çš„<code>sample()</code>å‡½æ•°ï¼Œè¯¥è½¯ä»¶åŒ…æ˜¯Rä¸­ä½¿ç”¨å‰ä¸éœ€åŠ è½½çš„é»˜è®¤è½¯ä»¶åŒ…ä¹‹ä¸€ï¼Œå…¶ä¸­å«æœ‰è®¸å¤šåŸºæœ¬ç»Ÿè®¡å‡½æ•°ï¼›ä»¥åŠ<code>sampling</code>è½¯ä»¶åŒ…ä¸­çš„<code>strata()</code>ã€<code>cluster()</code>å‡½æ•°ï¼Œè¯¥è½¯ä»¶åŒ…ä¸“ç”¨äºå®ç°è°ƒæŸ¥æŠ½æ ·æŠ€æœ¯ï¼Œå…¶ä¸­å«æœ‰å¤§é‡å„ç±»æŠ½æ ·æ–¹æ³•åŠç›¸å…³æŒ‡æ ‡çš„è®¡ç®—ç­‰å‡½æ•°ã€‚</p>
<h4 id="ç®€å•éšæœºæŠ½æ ·"><a href="#ç®€å•éšæœºæŠ½æ ·" class="headerlink" title="ç®€å•éšæœºæŠ½æ ·"></a>ç®€å•éšæœºæŠ½æ ·</h4><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585706632444.png" alt="1585706632444"></p>
<h5 id="æœ‰æ”¾å›çš„éšæœºæŠ½æ ·"><a href="#æœ‰æ”¾å›çš„éšæœºæŠ½æ ·" class="headerlink" title="æœ‰æ”¾å›çš„éšæœºæŠ½æ ·"></a>æœ‰æ”¾å›çš„éšæœºæŠ½æ ·</h5><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585706684055.png" alt="1585706684055"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585706725890.png" alt="1585706725890"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585706752383.png" alt="1585706752383"></p>
<h5 id="æ— æ”¾å›çš„éšæœºæŠ½æ ·"><a href="#æ— æ”¾å›çš„éšæœºæŠ½æ ·" class="headerlink" title="æ— æ”¾å›çš„éšæœºæŠ½æ ·"></a>æ— æ”¾å›çš„éšæœºæŠ½æ ·</h5><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585706789410.png" alt="1585706789410"></p>
<h4 id="åˆ†å±‚æŠ½æ ·"><a href="#åˆ†å±‚æŠ½æ ·" class="headerlink" title="åˆ†å±‚æŠ½æ ·"></a>åˆ†å±‚æŠ½æ ·</h4><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707032237.png" alt="1585707032237"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707055590.png" alt="1585707055590"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707081081.png" alt="1585707081081"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707104352.png" alt="1585707104352"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707127382.png" alt="1585707127382"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707162805.png" alt="1585707162805"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707188396.png" alt="1585707188396"></p>
<h4 id="æ•´ç¾¤æŠ½æ ·"><a href="#æ•´ç¾¤æŠ½æ ·" class="headerlink" title="æ•´ç¾¤æŠ½æ ·"></a>æ•´ç¾¤æŠ½æ ·</h4><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707442032.png" alt="1585707442032"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707564705.png" alt="1585707564705"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707593282.png" alt="1585707593282"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585707615607.png" alt="1585707615607"></p>
<h3 id="è®­ç»ƒé›†ä¸æµ‹è¯•é›†"><a href="#è®­ç»ƒé›†ä¸æµ‹è¯•é›†" class="headerlink" title="è®­ç»ƒé›†ä¸æµ‹è¯•é›†"></a>è®­ç»ƒé›†ä¸æµ‹è¯•é›†</h3><p>ä¸€èˆ¬æˆ‘ä»¬æ§åˆ¶ä¸¤è€…çš„æ¯”ä¾‹ä¸º3:1å·¦å³ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨ä¿è¯å»ºç«‹æ¨¡å‹çš„è®­ç»ƒé›†æ ·æœ¬è¶³å¤Ÿçš„å‰æä¸‹ï¼Œå°½é‡ä½¿æµ‹è¯•é›†çš„è¯„ä»·ç»“æœå¯ä¿¡ã€‚</p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709638657.png" alt="1585709638657"></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709698423.png" alt="1585709698423"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709720262.png" alt="1585709720262"></p>
<h2 id="3-ç”¨Rè·å–æ•°æ®"><a href="#3-ç”¨Rè·å–æ•°æ®" class="headerlink" title="3. ç”¨Rè·å–æ•°æ®"></a>3. ç”¨Rè·å–æ•°æ®</h2><h3 id="è·å–å†…ç½®æ•°æ®é›†"><a href="#è·å–å†…ç½®æ•°æ®é›†" class="headerlink" title="è·å–å†…ç½®æ•°æ®é›†"></a>è·å–å†…ç½®æ•°æ®é›†</h3><h4 id="datasetsæ•°æ®é›†"><a href="#datasetsæ•°æ®é›†" class="headerlink" title="datasetsæ•°æ®é›†"></a>datasetsæ•°æ®é›†</h4><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709889840.png" alt="1585709889840"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709919129.png" alt="1585709919129"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709942978.png" alt="1585709942978"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585709978867.png" alt="1585709978867"></p>
<h4 id="åŒ…çš„æ•°æ®é›†"><a href="#åŒ…çš„æ•°æ®é›†" class="headerlink" title="åŒ…çš„æ•°æ®é›†"></a>åŒ…çš„æ•°æ®é›†</h4><p>é™¤äº†datasetsè½¯ä»¶åŒ…å¤–ï¼ŒRä¸­è®¸å¤šå…¶ä»–è½¯ä»¶åŒ…ä¹Ÿè‡ªå¸¦æœ‰å°‘é‡æ•°æ®é›†ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡å¦‚ä¸‹ç¨‹åºä»£ç ï¼Œæ¥è·å¾—å¦‚å›¾3.3æ‰€ç¤ºçš„æ‰€æœ‰æ•°æ®é›†çš„åˆ—è¡¨ã€‚</p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710056729.png" alt="1585710056729"></p>
<p>æˆ‘ä»¬è¦çŸ¥é“ï¼ŒæŸä¸€è½¯ä»¶åŒ…ä¸­çš„æ•°æ®é›†ï¼Œå¾€å¾€æ­£æ˜¯ç”±äºé€‚åˆè¯ é‡Šè¯¥è½¯ä»¶åŒ…å†…ç›¸å…³å‡½æ•°çš„åŠŸèƒ½è€Œæ”¶é›†å¹¶æ·»ç½®çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸä¸€è½¯ä»¶åŒ…ä¸­çš„æ•°æ®é›†åœ¨æ ¼å¼ã€å†…å®¹ï¼Œç”šè‡³å–å€¼ç­‰æ–¹é¢ï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šæ˜¯è¿åˆäºè¯¥è½¯ä»¶åŒ…çš„åŠŸèƒ½éœ€è¦çš„ã€‚</p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710151137.png" alt="1585710151137"></p>
<h3 id="è·å–å…¶ä»–æ ¼å¼çš„æ•°æ®"><a href="#è·å–å…¶ä»–æ ¼å¼çš„æ•°æ®" class="headerlink" title="è·å–å…¶ä»–æ ¼å¼çš„æ•°æ®"></a>è·å–å…¶ä»–æ ¼å¼çš„æ•°æ®</h3><p>è¿™ä¸€èŠ‚æˆ‘ä»¬ä¸»è¦ä»‹ç»å¦‚ä½•ç”¨Rè¯»å–ç”±å›ºå®šåˆ†éš”ç¬¦ä½œä¸ºæ•°æ®é—´éš”çš„æ–‡ä»¶ï¼Œå¦‚CSVå’ŒTXT;å¦‚ä½•è¯»å–Excelæ–‡ä»¶ä¸­çš„æ•°æ®ï¼›å¦‚ä½•ä»SPSSã€Minitabã€STATAã€SYSTATç­‰ç»Ÿè®¡è½¯ä»¶ä¸­è·å–å¤šç§æ ¼å¼çš„æ•°æ®ã€‚ä¸ºäº†å®Œæˆä¸Šè¿°ä»»åŠ¡ï¼Œæˆ‘ä»¬å°†ç”¨åˆ°utllsã€RODBCã€gdataã€foreignåŠHmiscåŠ è½½åŒ…ä¸­çš„å¤šç§å‡½æ•°ã€‚</p>
<h4 id="CSVä¸TXTæ ¼å¼"><a href="#CSVä¸TXTæ ¼å¼" class="headerlink" title="CSVä¸TXTæ ¼å¼"></a>CSVä¸TXTæ ¼å¼</h4><p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨åˆ°utilsè½¯ä»¶åŒ…ä¸­çš„read.csv(ï¼‰å’Œread.table(ï¼‰å‡½æ•°ï¼ŒutilsåŒ…ä¸­å«æœ‰å¤§é‡Rä¸­æœ€å®<br>ç”¨çš„å‡½æ•°ï¼Œå…¶ä¸­åŒ…æ‹¬å¸®åŠ©å‡½æ•°help()ä»¥åŠå®‰è£…è½¯ä»¶åŒ…å‡½æ•°installed.packages()ç­‰ã€‚</p>
<h5 id="è¯»å–CSVæ ¼å¼"><a href="#è¯»å–CSVæ ¼å¼" class="headerlink" title="è¯»å–CSVæ ¼å¼"></a>è¯»å–CSVæ ¼å¼</h5><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710410455.png" alt="1585710410455"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710532350.png" alt="1585710532350"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710551806.png" alt="1585710551806"></p>
<h5 id="è¯»å–TXTæ ¼å¼"><a href="#è¯»å–TXTæ ¼å¼" class="headerlink" title="è¯»å–TXTæ ¼å¼"></a>è¯»å–TXTæ ¼å¼</h5><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710664703.png" alt="1585710664703"></p>
<h4 id="ä»Excelç›´æ¥è·å–æ•°æ®"><a href="#ä»Excelç›´æ¥è·å–æ•°æ®" class="headerlink" title="ä»Excelç›´æ¥è·å–æ•°æ®"></a>ä»Excelç›´æ¥è·å–æ•°æ®</h4><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710773419.png" alt="1585710773419"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710795936.png" alt="1585710795936"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710816961.png" alt="1585710816961"></p>
<h4 id="ä»å…¶ä»–ç»Ÿè®¡è½¯ä»¶ä¸­è·å–æ•°æ®"><a href="#ä»å…¶ä»–ç»Ÿè®¡è½¯ä»¶ä¸­è·å–æ•°æ®" class="headerlink" title="ä»å…¶ä»–ç»Ÿè®¡è½¯ä»¶ä¸­è·å–æ•°æ®"></a>ä»å…¶ä»–ç»Ÿè®¡è½¯ä»¶ä¸­è·å–æ•°æ®</h4><p>æˆ‘ä»¬å°†ä½¿ç”¨foreignè½¯ä»¶åŒ…ä¸­çš„ç›¸å…³å‡½æ•°ï¼Œè¯¥è½¯ä»¶åŒ…çš„ä¸»è¦åŠŸèƒ½å³æ˜¯è¯»å†™SPSSã€SASã€Minitabã€<br>Stataã€Systatç­‰ç»Ÿè®¡è½¯ä»¶ä¸­çš„æ•°æ®ã€‚</p>
<h5 id="ä»SPSSè·å–æ•°æ®"><a href="#ä»SPSSè·å–æ•°æ®" class="headerlink" title="ä»SPSSè·å–æ•°æ®"></a>ä»SPSSè·å–æ•°æ®</h5><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710963416.png" alt="1585710963416"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585710992751.png" alt="1585710992751"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711020984.png" alt="1585711020984"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711042365.png" alt="1585711042365"></p>
<h5 id="ä»SASã€Minitabã€STATAã€SYSTATä¸­è·å–æ•°æ®"><a href="#ä»SASã€Minitabã€STATAã€SYSTATä¸­è·å–æ•°æ®" class="headerlink" title="ä»SASã€Minitabã€STATAã€SYSTATä¸­è·å–æ•°æ®"></a>ä»SASã€Minitabã€STATAã€SYSTATä¸­è·å–æ•°æ®</h5><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711134273.png" alt="1585711134273"></p>
<h3 id="è·å–æ•°æ®åº“æ•°æ®"><a href="#è·å–æ•°æ®åº“æ•°æ®" class="headerlink" title="è·å–æ•°æ®åº“æ•°æ®"></a>è·å–æ•°æ®åº“æ•°æ®</h3><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711399514.png" alt="1585711399514"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711419648.png" alt="1585711419648"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711437360.png" alt="1585711437360"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711487670.png" alt="1585711487670"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711516518.png" alt="1585711516518"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711542616.png" alt="1585711542616"></p>
<h3 id="è·å–ç½‘é¡µæ•°æ®"><a href="#è·å–ç½‘é¡µæ•°æ®" class="headerlink" title="è·å–ç½‘é¡µæ•°æ®"></a>è·å–ç½‘é¡µæ•°æ®</h3><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711889961.png" alt="1585711889961"></p>
<p><a href="http://stockdata.stock.hexun.com/2008en/zxcwzb.aspx?stockid=000002&amp;type=1&amp;date=2013.06.30" target="_blank" rel="noopener">http://stockdata.stock.hexun.com/2008en/zxcwzb.aspx?stockid=000002&amp;type=1&amp;date=2013.06.30</a></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585711961289.png" alt="1585711961289"></p>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585712253379.png" alt="1585712253379"></p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="keyword">library</span>(XML)</span><br><span class="line">ul = <span class="string">"http://stockdata.stock.hexun.com/2008en/zxcwzb.aspx?stockid=000002&amp;type=1&amp;date=2013.06.30"</span></span><br><span class="line">tables1 = readHTMLTable(ul)</span><br><span class="line">names(tables1)</span><br></pre></td></tr></table></figure>
<p>[1] â€œNULLâ€  â€œNULLâ€  â€œNULLâ€  â€œNULLâ€</p>
<p>å¦‚ä¸Šæˆ‘ä»¬çŸ¥é“æ‰€è¯»å–ç»“æœå…±æœ‰4ä¸ªéƒ¨åˆ†ï¼Œå› æ­¤ï¼Œå¯ä»¥åˆ†åˆ«æŸ¥çœ‹tables1ä¸­4ä¸ªç»´åº¦ä¸­æ‰€å‚¨å­˜çš„<br>ä¿¡æ¯ï¼Œä»¥ä¸‹ä»…è¾“å‡ºå…¶ä¸­çš„ç¬¬2ã€3ç»´åº¦çš„æ•°æ®ã€‚</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">tables1[[<span class="number">2</span>]]</span><br></pre></td></tr></table></figure>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585712408039.png" alt="1585712408039"></p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">tables1[[<span class="number">3</span>]]</span><br></pre></td></tr></table></figure>
<p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585712457342.png" alt="1585712457342"></p>
<h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><img src="/2020/04/01/æ•°æ®æŒ–æ˜/1585712504471.png" alt="1585712504471"></p>
]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ•°æ®æŒ–æ˜</tag>
        <tag>R</tag>
      </tags>
  </entry>
  <entry>
    <title>çº¿æ€§è¡¨,é¡ºåºè¡¨ä¸æ•°ç»„</title>
    <url>/2020/03/05/%E7%BA%BF%E6%80%A7%E8%A1%A8-%E9%A1%BA%E5%BA%8F%E8%A1%A8%E4%B8%8E%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://blog.csdn.net/foreverhuylee/article/details/37813053?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">https://blog.csdn.net/foreverhuylee/article/details/37813053?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task</a></p>
<ol>
<li><p>æ•°ç»„å°±æ˜¯ç›¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ æŒ‰ä¸€å®šé¡ºåºæ’åˆ—çš„é›†åˆã€‚</p>
<p>ä¸€å¥è¯ï¼šå°±æ˜¯ç‰©ç†ä¸Šå­˜å‚¨åœ¨ä¸€ç»„è”ç³»çš„åœ°å€ä¸Šã€‚ä¹Ÿç§°ä¸ºæ•°æ®ç»“æ„ä¸­çš„ç‰©ç†ç»“æ„ã€‚</p>
</li>
<li><p>çº¿æ€§è¡¨ä¸­æ•°æ®å…ƒç´ ä¹‹é—´çš„å…³ç³»æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œå³é™¤äº†ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæ•°æ®å…ƒç´ ä¹‹å¤–ï¼Œå…¶å®ƒæ•°æ®å…ƒç´ éƒ½æ˜¯é¦–å°¾ç›¸æ¥çš„ã€‚</p>
<p>ä¸€å¥è¯ï¼šçº¿æ€§è¡¨æ˜¯æ•°æ®ç»“æ„ä¸­çš„é€»è¾‘ç»“æ„ã€‚å¯ä»¥å­˜å‚¨åœ¨æ•°ç»„ä¸Šï¼Œä¹Ÿå¯ä»¥å­˜å‚¨åœ¨é“¾è¡¨ä¸Šã€‚</p>
</li>
<li><p>çº¿æ€§è¡¨çš„ç»“ç‚¹æŒ‰é€»è¾‘æ¬¡åºä¾æ¬¡å­˜æ”¾åœ¨ä¸€ç»„åœ°å€è¿ç»­çš„å­˜å‚¨å•å…ƒé‡Œçš„æ–¹æ³•ã€‚ç”¨é¡ºåºå­˜å‚¨æ–¹æ³•å­˜å‚¨çš„çº¿æ€§è¡¨ç®€ç§°ä¸ºé¡ºåºè¡¨ã€‚</p>
<p>ä¸€å¥è¯ï¼šç”¨æ•°ç»„æ¥å­˜å‚¨çš„çº¿æ€§è¡¨å°±æ˜¯é¡ºåºè¡¨ã€‚</p>
</li>
</ol>
]]></content>
      <tags>
        <tag>çŸ¥è¯†ç‚¹</tag>
      </tags>
  </entry>
  <entry>
    <title>ç‰›å®¢-å‰‘æŒ‡offer</title>
    <url>/2020/03/05/%E7%89%9B%E5%AE%A2-%E5%89%91%E6%8C%87offer/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾"><a href="#äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾" class="headerlink" title="äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾"></a>äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</h4><p><a href="https://www.nowcoder.com/practice/abc3fe2ce8e146608e868a70efebf62e?tpId=13&amp;tqId=11154&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/abc3fe2ce8e146608e868a70efebf62e?tpId=13&amp;tqId=11154&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>åœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­ï¼ˆæ¯ä¸ªä¸€ç»´æ•°ç»„çš„é•¿åº¦ç›¸åŒï¼‰ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚</p>
<p><u>æ–¹æ³•</u>ï¼š</p>
<p>ä»å·¦ä¸‹æ‰¾</p>
<p><a href="https://www.nowcoder.com/questionTerminal/abc3fe2ce8e146608e868a70efebf62e?answerType=1&amp;f=discussion" target="_blank" rel="noopener">https://www.nowcoder.com/questionTerminal/abc3fe2ce8e146608e868a70efebf62e?answerType=1&amp;f=discussion</a></p>
<p>å¯¹äºå·¦ä¸‹è§’çš„å€¼ mï¼Œm æ˜¯è¯¥è¡Œæœ€å°çš„æ•°ï¼Œæ˜¯è¯¥åˆ—æœ€å¤§çš„æ•°<br>æ¯æ¬¡å°† m å’Œç›®æ ‡å€¼ target æ¯”è¾ƒï¼š</p>
<ol>
<li>å½“ m &lt; targetï¼Œç”±äº m å·²ç»æ˜¯è¯¥è¡Œæœ€å¤§çš„å…ƒç´ ï¼Œæƒ³è¦æ›´å¤§åªæœ‰ä»åˆ—è€ƒè™‘ï¼Œå–å€¼å³ç§»ä¸€ä½ </li>
<li>å½“ m &gt; targetï¼Œç”±äº m å·²ç»æ˜¯è¯¥åˆ—æœ€å°çš„å…ƒç´ ï¼Œæƒ³è¦æ›´å°åªæœ‰ä»è¡Œè€ƒè™‘ï¼Œå–å€¼ä¸Šç§»ä¸€ä½ </li>
<li>å½“ m = targetï¼Œæ‰¾åˆ°è¯¥å€¼ï¼Œè¿”å› true </li>
</ol>
<p>ç”¨æŸè¡Œæœ€å°æˆ–æŸåˆ—æœ€å¤§ä¸ target æ¯”è¾ƒï¼Œæ¯æ¬¡å¯å‰”é™¤ä¸€æ•´è¡Œæˆ–ä¸€æ•´åˆ—</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> target, <span class="keyword">int</span> [][] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> r = array.length;</span><br><span class="line">        <span class="keyword">int</span> c = array[<span class="number">0</span>].length;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å·¦ä¸‹è§’</span></span><br><span class="line">        <span class="keyword">int</span> cur_r = r - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> cur_c = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(cur_r &gt;= <span class="number">0</span> &amp;&amp; cur_c &lt;= c-<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> cur = array[cur_r][cur_c];</span><br><span class="line">            <span class="keyword">if</span>(target == cur)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(target &lt; cur)</span><br><span class="line">                cur_r--;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(target &gt; cur)</span><br><span class="line">                cur_c++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><u>å¤æ‚åº¦</u>ï¼š</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(è¡Œé«˜ + åˆ—å®½)<br>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p>
<hr>
<h4 id="ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨"><a href="#ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨" class="headerlink" title="ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨"></a>ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨</h4><p><a href="https://www.nowcoder.com/practice/d0267f7f55b3412ba93bd35cfa8e8035?tpId=13&amp;tqId=11156&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/d0267f7f55b3412ba93bd35cfa8e8035?tpId=13&amp;tqId=11156&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼ŒæŒ‰é“¾è¡¨ä»å°¾åˆ°å¤´çš„é¡ºåºè¿”å›ä¸€ä¸ªArrayListã€‚</p>
<p><u>æ³•ä¸€</u>ï¼šå°†é“¾è¡¨ç¿»è½¬ï¼Œå†ä¾æ¬¡åŠ å…¥ArrayList</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*    public class ListNode &#123;</span></span><br><span class="line"><span class="comment">*        int val;</span></span><br><span class="line"><span class="comment">*        ListNode next = null;</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*        ListNode(int val) &#123;</span></span><br><span class="line"><span class="comment">*            this.val = val;</span></span><br><span class="line"><span class="comment">*        &#125;</span></span><br><span class="line"><span class="comment">*    &#125;</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">printListFromTailToHead</span><span class="params">(ListNode listNode)</span> </span>&#123;</span><br><span class="line">        ListNode cur = listNode;</span><br><span class="line">        ListNode prev = <span class="keyword">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(cur != <span class="keyword">null</span>)&#123;</span><br><span class="line">            ListNode tmp = cur.next;</span><br><span class="line">            cur.next = prev;</span><br><span class="line">            prev = cur;</span><br><span class="line">            cur = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        ArrayList&lt;Integer&gt; arr = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span>(prev != <span class="keyword">null</span>)&#123;</span><br><span class="line">            arr.add(prev.val);</span><br><span class="line">            prev = prev.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><u>æ³•äºŒ</u>ï¼šåˆ©ç”¨ArrayListçš„æ–¹æ³•<code>add(int index, E element)</code>,æ¯æ¬¡å°†é“¾è¡¨ä¸­çš„å…ƒç´ æ·»åŠ è‡³ç´¢å¼•0å¤„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*    public class ListNode &#123;</span></span><br><span class="line"><span class="comment">*        int val;</span></span><br><span class="line"><span class="comment">*        ListNode next = null;</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*        ListNode(int val) &#123;</span></span><br><span class="line"><span class="comment">*            this.val = val;</span></span><br><span class="line"><span class="comment">*        &#125;</span></span><br><span class="line"><span class="comment">*    &#125;</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">printListFromTailToHead</span><span class="params">(ListNode listNode)</span> </span>&#123;</span><br><span class="line">        ListNode cur = listNode;</span><br><span class="line">        ArrayList&lt;Integer&gt; arr = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(cur != <span class="keyword">null</span>)&#123;</span><br><span class="line">            arr.add(<span class="number">0</span>,cur.val);</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><u>å¤æ‚åº¦</u>ï¼š</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)<br>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p>
<a id="more"></a>
<hr>
<h4 id="é‡å»ºäºŒå‰æ ‘"><a href="#é‡å»ºäºŒå‰æ ‘" class="headerlink" title="é‡å»ºäºŒå‰æ ‘"></a>é‡å»ºäºŒå‰æ ‘</h4><p><a href="https://www.nowcoder.com/practice/8a19cbe657394eeaac2f6ea9b0f6fcf6?tpId=13&amp;tqId=11157&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/8a19cbe657394eeaac2f6ea9b0f6fcf6?tpId=13&amp;tqId=11157&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œè¯·é‡å»ºå‡ºè¯¥äºŒå‰æ ‘ã€‚å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚ä¾‹å¦‚è¾“å…¥å‰åºéå†åºåˆ—{1,2,4,7,3,5,6,8}å’Œä¸­åºéå†åºåˆ—{4,7,2,1,5,3,8,6}ï¼Œåˆ™é‡å»ºäºŒå‰æ ‘å¹¶è¿”å›ã€‚</p>
<p><u>æ–¹æ³•</u>ï¼š</p>
<p>é€’å½’</p>
<p>æ ¹æ®ä¸­åºéå†å’Œå‰åºéå†å¯ä»¥ç¡®å®šäºŒå‰æ ‘ï¼Œå…·ä½“è¿‡ç¨‹ä¸ºï¼š</p>
<ol>
<li>æ ¹æ®å‰åºåºåˆ—ç¬¬ä¸€ä¸ªç»“ç‚¹ç¡®å®šæ ¹ç»“ç‚¹</li>
<li>æ ¹æ®æ ¹ç»“ç‚¹åœ¨ä¸­åºåºåˆ—ä¸­çš„ä½ç½®åˆ†å‰²å‡ºå·¦å³ä¸¤ä¸ªå­åºåˆ—</li>
<li>å¯¹å·¦å­æ ‘å’Œå³å­æ ‘åˆ†åˆ«é€’å½’ä½¿ç”¨åŒæ ·çš„æ–¹æ³•ç»§ç»­åˆ†è§£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for binary tree</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">reConstructBinaryTree</span><span class="params">(<span class="keyword">int</span> [] pre,<span class="keyword">int</span> [] in)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pre.length==<span class="number">0</span> || in.length==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        TreeNode root = <span class="keyword">new</span> TreeNode(pre[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; in.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(in[i]==pre[<span class="number">0</span>])&#123;</span><br><span class="line">                <span class="comment">//copyOfRange å‡½æ•°ï¼Œå·¦é—­å³å¼€</span></span><br><span class="line">                root.left = reConstructBinaryTree(Arrays.copyOfRange(pre,<span class="number">1</span>,i+<span class="number">1</span>),Arrays.copyOfRange(in,<span class="number">0</span>,i));</span><br><span class="line">                root.right = reConstructBinaryTree(Arrays.copyOfRange(pre,i+<span class="number">1</span>,pre.length),Arrays.copyOfRange(in,i+<span class="number">1</span>,in.length));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><u>å¤æ‚åº¦</u>ï¼š</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)<br>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p>
<hr>
<h4 id="ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—"><a href="#ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—" class="headerlink" title="ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—"></a>ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</h4><p><a href="https://www.nowcoder.com/practice/54275ddae22f475981afa2244dd448c6?tpId=13&amp;tqId=11158&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/54275ddae22f475981afa2244dd448c6?tpId=13&amp;tqId=11158&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°ï¼š</u></p>
<p>ç”¨ä¸¤ä¸ªæ ˆæ¥å®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®Œæˆé˜Ÿåˆ—çš„Pushå’ŒPopæ“ä½œã€‚ é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ºintç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    Stack&lt;Integer&gt; stack1 = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">    Stack&lt;Integer&gt; stack2 = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> node)</span> </span>&#123;</span><br><span class="line">        stack1.push(node);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stack2.empty())&#123; </span><br><span class="line">        <span class="comment">// æ³¨æ„è¿™é‡Œæœ‰ä¸ªstack2è¦æ˜¯emptyçš„æ¡ä»¶ï¼Œè‹¥stack2ä¸æ˜¯emptyå´å¾€é‡Œpush stack1ä¸­çš„å…ƒç´ ï¼Œä¼šå‡ºé”™</span></span><br><span class="line">            <span class="keyword">while</span>(!stack1.empty())&#123;</span><br><span class="line">                stack2.push(stack1.pop());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack2.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—"><a href="#æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—" class="headerlink" title="æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—"></a>æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—</h4><p><a href="https://www.nowcoder.com/practice/9f3231a991af4f55b95579b44b7a01ba?tpId=13&amp;tqId=11159&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/9f3231a991af4f55b95579b44b7a01ba?tpId=13&amp;tqId=11159&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>æŠŠä¸€ä¸ªæ•°ç»„æœ€å¼€å§‹çš„è‹¥å¹²ä¸ªå…ƒç´ æ¬åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°ç»„çš„æ—‹è½¬ã€‚<br>è¾“å…¥ä¸€ä¸ªéé€’å‡æ’åºçš„æ•°ç»„çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¾“å‡ºæ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ ã€‚<br>ä¾‹å¦‚æ•°ç»„{3,4,5,1,2}ä¸º{1,2,3,4,5}çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¯¥æ•°ç»„çš„æœ€å°å€¼ä¸º1ã€‚<br>NOTEï¼šç»™å‡ºçš„æ‰€æœ‰å…ƒç´ éƒ½å¤§äº0ï¼Œè‹¥æ•°ç»„å¤§å°ä¸º0ï¼Œè¯·è¿”å›0ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minNumberInRotateArray</span><span class="params">(<span class="keyword">int</span> [] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array.length==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end = array.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(array[start]&lt;array[end])</span><br><span class="line">            <span class="keyword">return</span> array[start];</span><br><span class="line">        <span class="keyword">while</span>(start &lt; end)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (start+end)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(mid&gt;<span class="number">1</span> &amp;&amp; array[mid-<span class="number">1</span>]&gt;array[mid])</span><br><span class="line">                <span class="keyword">return</span> array[mid];</span><br><span class="line">            <span class="keyword">if</span>(array[mid]&gt;array[<span class="number">0</span>])</span><br><span class="line">                <span class="comment">// å¾€å³</span></span><br><span class="line">                start = mid+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(array[mid]&lt;array[<span class="number">0</span>])</span><br><span class="line">                <span class="comment">// å¾€å·¦</span></span><br><span class="line">                end = mid-<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                start++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[start];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="æ–æ³¢é‚£å¥‘æ•°åˆ—"></a>æ–æ³¢é‚£å¥‘æ•°åˆ—</h4><p><a href="https://www.nowcoder.com/practice/c6c7742f5ba7442aada113136ddea0c3?tpId=13&amp;tqId=11160&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/c6c7742f5ba7442aada113136ddea0c3?tpId=13&amp;tqId=11160&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>å¤§å®¶éƒ½çŸ¥é“æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œç°åœ¨è¦æ±‚è¾“å…¥ä¸€ä¸ªæ•´æ•°nï¼Œè¯·ä½ è¾“å‡ºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬né¡¹ï¼ˆä»0å¼€å§‹ï¼Œç¬¬0é¡¹ä¸º0ï¼‰ã€‚</p>
<p>n&lt;=39</p>
<p><u>æ–¹æ³•</u>ï¼š</p>
<p>ä¼˜åŒ–åŠ¨æ€è§„åˆ’</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Fibonacci</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> F1 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> F2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;=n)&#123;</span><br><span class="line">            <span class="keyword">int</span> F3 = F1 + F2;</span><br><span class="line">            F1 = F2;</span><br><span class="line">            F2 = F3;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> F2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><u>å¤æ‚åº¦</u>ï¼š</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)<br>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p>
<hr>
<h4 id="è·³å°é˜¶"><a href="#è·³å°é˜¶" class="headerlink" title="è·³å°é˜¶"></a>è·³å°é˜¶</h4><p><a href="https://www.nowcoder.com/practice/8c82a5b80378478f9484d87d1c5f12a4?tpId=13&amp;tqId=11161&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/8c82a5b80378478f9484d87d1c5f12a4?tpId=13&amp;tqId=11161&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>ä¸€åªé’è›™ä¸€æ¬¡å¯ä»¥è·³ä¸Š1çº§å°é˜¶ï¼Œä¹Ÿå¯ä»¥è·³ä¸Š2çº§ã€‚æ±‚è¯¥é’è›™è·³ä¸Šä¸€ä¸ªnçº§çš„å°é˜¶æ€»å…±æœ‰å¤šå°‘ç§è·³æ³•ï¼ˆå…ˆåæ¬¡åºä¸åŒç®—ä¸åŒçš„ç»“æœï¼‰ã€‚</p>
<p><u>æ–¹æ³•</u>ï¼š</p>
<p>ä¼˜åŒ–åŠ¨æ€è§„åˆ’</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">JumpFloor</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(target==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> F1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> F2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> F3 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= target; i++)&#123;</span><br><span class="line">            F3 = F1 + F2;</span><br><span class="line">            F1 = F2;</span><br><span class="line">            F2 = F3;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> F2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><u>å¤æ‚åº¦</u>ï¼š</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)<br>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p>
<hr>
<h4 id="å˜æ€è·³å°é˜¶"><a href="#å˜æ€è·³å°é˜¶" class="headerlink" title="å˜æ€è·³å°é˜¶"></a>å˜æ€è·³å°é˜¶</h4><p><a href="https://www.nowcoder.com/practice/22243d016f6b47f2a6928b4313c85387?tpId=13&amp;tqId=11162&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/22243d016f6b47f2a6928b4313c85387?tpId=13&amp;tqId=11162&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>ä¸€åªé’è›™ä¸€æ¬¡å¯ä»¥è·³ä¸Š1çº§å°é˜¶ï¼Œä¹Ÿå¯ä»¥è·³ä¸Š2çº§â€¦â€¦å®ƒä¹Ÿå¯ä»¥è·³ä¸Šnçº§ã€‚æ±‚è¯¥é’è›™è·³ä¸Šä¸€ä¸ªnçº§çš„å°é˜¶æ€»å…±æœ‰å¤šå°‘ç§è·³æ³•ã€‚</p>
<p><u>æ–¹æ³•</u>ï¼š</p>
<p>æ˜“çŸ¥ f(n)=f(n-1)+f(n-2)+â€¦â€¦f(1)<br>f(n-1)=f(n-2)+â€¦â€¦f(1)<br>ä¸¤å¼ç›¸å‡å¾—f(n)=2f(n-1)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">JumpFloorII</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(target==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> f1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> f2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= target; i++)&#123;</span><br><span class="line">            f2 = <span class="number">2</span>*f1;</span><br><span class="line">            f1 = f2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="çŸ©å½¢è¦†ç›–"><a href="#çŸ©å½¢è¦†ç›–" class="headerlink" title="çŸ©å½¢è¦†ç›–"></a>çŸ©å½¢è¦†ç›–</h4><p><a href="https://www.nowcoder.com/practice/72a5a919508a4251859fb2cfb987a0e6?tpId=13&amp;tqId=11163&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/72a5a919508a4251859fb2cfb987a0e6?tpId=13&amp;tqId=11163&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>:</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨2*1çš„å°çŸ©å½¢æ¨ªç€æˆ–è€…ç«–ç€å»è¦†ç›–æ›´å¤§çš„çŸ©å½¢ã€‚è¯·é—®ç”¨nä¸ª2*1çš„å°çŸ©å½¢æ— é‡å åœ°è¦†ç›–ä¸€ä¸ª2*nçš„å¤§çŸ©å½¢ï¼Œæ€»å…±æœ‰å¤šå°‘ç§æ–¹æ³•ï¼Ÿ</p>
<p>æ¯”å¦‚n=3æ—¶ï¼Œ2*3çš„çŸ©å½¢å—æœ‰3ç§è¦†ç›–æ–¹æ³•ï¼š</p>
<p><img src="/2020/03/05/ç‰›å®¢-å‰‘æŒ‡offer/1583470479650.png" alt="1583470479650"></p>
<p><u>æ–¹æ³•ï¼šè¿­ä»£</u></p>
<p>ç±»ä¼¼æ–æ³¢é‚£å¥‘æ•°åˆ—</p>
<p>f(n) = f(n-1) + f(n-2)</p>
<p><img src="/2020/03/05/ç‰›å®¢-å‰‘æŒ‡offer/20200306-162012.jpg" alt="20200306-162012"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">RectCover</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(target==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> f0=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> f1=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> f2=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= target; i++)&#123;</span><br><span class="line">            f2 = f0 + f1;</span><br><span class="line">            f0 = f1;</span><br><span class="line">            f1 = f2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°"><a href="#äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°" class="headerlink" title="äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°"></a>äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</h4><p><a href="https://www.nowcoder.com/practice/8ee967e43c2c4ec193b040ea7fbb10b8?tpId=13&amp;tqId=11164&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/8ee967e43c2c4ec193b040ea7fbb10b8?tpId=13&amp;tqId=11164&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°ã€‚å…¶ä¸­è´Ÿæ•°ç”¨è¡¥ç è¡¨ç¤ºã€‚</p>
<p>ï¼ˆæ³¨ï¼šè¾“å…¥çš„æ˜¯äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ï¼‰</p>
<p><u>æ–¹æ³•</u>ï¼š</p>
<p>ä¸€ä¸ªäºŒè¿›åˆ¶æ•°å‡å»1ï¼Œå†å’ŒåŸäºŒè¿›åˆ¶æ•°åš<code>ä¸è¿ç®—</code>ï¼Œä¼šæŠŠè¯¥æ•°æœ€å³è¾¹çš„1å˜ä¸º0ï¼Œé‚£ä¹ˆä¸€ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶æœ‰å¤šå°‘ä¸ª1ï¼Œå°±å¯ä»¥è¿›è¡Œå¤šå°‘æ¬¡è¿™æ ·çš„æ“ä½œã€‚</p>
<p><a href="https://www.nowcoder.com/questionTerminal/8ee967e43c2c4ec193b040ea7fbb10b8?answerType=1&amp;f=discussion" target="_blank" rel="noopener">https://www.nowcoder.com/questionTerminal/8ee967e43c2c4ec193b040ea7fbb10b8?answerType=1&amp;f=discussion</a></p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šä¸€ä¸ªäºŒè¿›åˆ¶æ•°1100ï¼Œå‡å»1åï¼Œç»“æœä¸º1011ã€‚æˆ‘ä»¬å‘ç°å‡1çš„ç»“æœæ˜¯æŠŠæœ€å³è¾¹çš„ä¸€ä¸ª1å¼€å§‹çš„æ‰€æœ‰ä½éƒ½å–åäº†ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœæˆ‘ä»¬å†æŠŠåŸæ¥çš„æ•´æ•°å’Œå‡å»1ä¹‹åçš„ç»“æœåšä¸è¿ç®—ï¼Œä»åŸæ¥æ•´æ•°æœ€å³è¾¹ä¸€ä¸ª1é‚£ä¸€ä½å¼€å§‹æ‰€æœ‰ä½éƒ½ä¼šå˜æˆ0ã€‚å¦‚1100&amp;1011=1000.  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">NumberOf1</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n!=<span class="number">0</span>)&#123;</span><br><span class="line">            n = n &amp; (n-<span class="number">1</span>);</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹"><a href="#æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹" class="headerlink" title="æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹"></a>æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹</h4><p><a href="https://www.nowcoder.com/practice/1a834e5e3e1a4b7ba251417554e07c00?tpId=13&amp;tqId=11165&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/1a834e5e3e1a4b7ba251417554e07c00?tpId=13&amp;tqId=11165&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>ç»™å®šä¸€ä¸ªdoubleç±»å‹çš„æµ®ç‚¹æ•°baseå’Œintç±»å‹çš„æ•´æ•°exponentã€‚æ±‚baseçš„exponentæ¬¡æ–¹ã€‚</p>
<p>ä¿è¯baseå’Œexponentä¸åŒæ—¶ä¸º0</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">Power</span><span class="params">(<span class="keyword">double</span> base, <span class="keyword">int</span> exponent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(exponent&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            flag = <span class="keyword">true</span>;</span><br><span class="line">            exponent = - exponent;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">double</span> ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(exponent != <span class="number">0</span>)&#123;</span><br><span class="line">            ans *= base;</span><br><span class="line">            exponent--;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> flag? <span class="number">1</span>/ans : ans;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢"><a href="#è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢" class="headerlink" title="è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢"></a>è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢</h4><p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°æ¥è°ƒæ•´è¯¥æ•°ç»„ä¸­æ•°å­—çš„é¡ºåºï¼Œä½¿å¾—æ‰€æœ‰çš„å¥‡æ•°ä½äºæ•°ç»„çš„å‰åŠéƒ¨åˆ†ï¼Œæ‰€æœ‰çš„å¶æ•°ä½äºæ•°ç»„çš„ååŠéƒ¨åˆ†ï¼Œå¹¶ä¿è¯å¥‡æ•°å’Œå¥‡æ•°ï¼Œå¶æ•°å’Œå¶æ•°ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ä¸å˜ã€‚</p>
<p><u>æ€è·¯</u>ï¼š</p>
<p><a href="https://www.nowcoder.com/questionTerminal/beb5aa231adc45b2a5dcc5b62c93f593?answerType=1&amp;f=discussion" target="_blank" rel="noopener">https://www.nowcoder.com/questionTerminal/beb5aa231adc45b2a5dcc5b62c93f593?answerType=1&amp;f=discussion</a></p>
<ul>
<li><code>i++</code>å¾€å‰èµ°ï¼Œç¢°åˆ°å¶æ•°åœä¸‹æ¥ï¼Œ<code>j=i+1</code></li>
<li>è‹¥ <code>a[j]</code>ä¸ºå¶æ•°ï¼Œ<code>j++</code>å‰è¿›ï¼Œç›´åˆ°ç¢°åˆ°å¥‡æ•°<ul>
<li><code>a[j]</code>å¯¹åº”çš„å¥‡æ•°æ’åˆ°<code>a[i]</code>ä½ç½®ï¼Œ<code>j</code>ç»è¿‡çš„<code>j-1</code>ä¸ªå¶æ•°ä¾æ¬¡åç§»</li>
</ul>
</li>
</ul>
<ul>
<li>å¦‚æœ<code>j==len-1</code>æ—¶è¿˜æ²¡ç¢°åˆ°å¥‡æ•°ï¼Œè¯æ˜<code>i</code>å’Œ<code>j</code>ä¹‹é—´éƒ½ä¸ºå¶æ•°äº†ï¼Œå®Œæˆæ•´ä¸ªç§»åŠ¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reOrderArray</span><span class="params">(<span class="keyword">int</span> [] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array.length&lt;=<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; array.length)&#123;</span><br><span class="line">            <span class="comment">// ié‡åˆ°å¶æ•°åœä¸‹</span></span><br><span class="line">            <span class="keyword">if</span>(array[i]%<span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">int</span> j = i + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">                <span class="comment">// jé‡åˆ°å¥‡æ•°åœä¸‹</span></span><br><span class="line">                <span class="keyword">while</span>(array[j]%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(j==array.length-<span class="number">1</span>)</span><br><span class="line">                        <span class="keyword">return</span> ;</span><br><span class="line">                    j++;</span><br><span class="line">                    count++;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">int</span> temp = array[i];</span><br><span class="line">                array[i] = array[j];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k &lt; count; k++)&#123;</span><br><span class="line">                    array[j-k] = array[j-k-<span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                array[j-count] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="é“¾è¡¨ä¸­ç¬¬kä¸ªç»“ç‚¹"><a href="#é“¾è¡¨ä¸­ç¬¬kä¸ªç»“ç‚¹" class="headerlink" title="é“¾è¡¨ä¸­ç¬¬kä¸ªç»“ç‚¹"></a>é“¾è¡¨ä¸­ç¬¬kä¸ªç»“ç‚¹</h4><p><a href="https://www.nowcoder.com/practice/529d3ae5a407492994ad2a246518148a?tpId=13&amp;tqId=11167&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/529d3ae5a407492994ad2a246518148a?tpId=13&amp;tqId=11167&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œè¾“å‡ºè¯¥é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªç»“ç‚¹ã€‚</p>
<p><u>æ–¹æ³•</u>ï¼šå¿«æ…¢æŒ‡é’ˆ</p>
<p>å¿«æŒ‡é’ˆå…ˆå¾€å‰èµ°kæ­¥ï¼Œæ³¨æ„åˆ¤æ–­è¾¹ç•Œï¼Œç„¶åå¿«æ…¢ä¸€èµ·èµ°ï¼Œå½“å¿«æŒ‡é’ˆä¸ºnullçš„æ—¶å€™ï¼Œæ…¢æŒ‡é’ˆèµ°åˆ°äº†å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class ListNode &#123;</span></span><br><span class="line"><span class="comment">    int val;</span></span><br><span class="line"><span class="comment">    ListNode next = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    ListNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">FindKthToTail</span><span class="params">(ListNode head,<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        ListNode slow = head;</span><br><span class="line">        ListNode fast = head;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(fast==<span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            fast = fast.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(fast!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">            fast = fast.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> slow;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="åè½¬é“¾è¡¨"><a href="#åè½¬é“¾è¡¨" class="headerlink" title="åè½¬é“¾è¡¨"></a>åè½¬é“¾è¡¨</h4><p><a href="https://www.nowcoder.com/practice/75e878df47f24fdc9dc3e400ec6058ca?tpId=13&amp;tqId=11168&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/75e878df47f24fdc9dc3e400ec6058ca?tpId=13&amp;tqId=11168&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œåè½¬é“¾è¡¨åï¼Œè¾“å‡ºæ–°é“¾è¡¨çš„è¡¨å¤´ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class ListNode &#123;</span></span><br><span class="line"><span class="comment">    int val;</span></span><br><span class="line"><span class="comment">    ListNode next = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    ListNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">ReverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        ListNode cur = head;</span><br><span class="line">        ListNode prev = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span>(cur!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            ListNode tmp = cur.next;</span><br><span class="line">            cur.next = prev;</span><br><span class="line">            prev = cur;</span><br><span class="line">            cur = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨"><a href="#åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨"></a>åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨</h4><p><a href="https://www.nowcoder.com/practice/d8b6b4358f774294a89de2a6ac4d9337?tpId=13&amp;tqId=11169&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/d8b6b4358f774294a89de2a6ac4d9337?tpId=13&amp;tqId=11169&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>è¾“å…¥ä¸¤ä¸ªå•è°ƒé€’å¢çš„é“¾è¡¨ï¼Œè¾“å‡ºä¸¤ä¸ªé“¾è¡¨åˆæˆåçš„é“¾è¡¨ï¼Œå½“ç„¶æˆ‘ä»¬éœ€è¦åˆæˆåçš„é“¾è¡¨æ»¡è¶³å•è°ƒä¸å‡è§„åˆ™ã€‚</p>
<p><u>æ–¹æ³•</u>ï¼šé€’å½’</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class ListNode &#123;</span></span><br><span class="line"><span class="comment">    int val;</span></span><br><span class="line"><span class="comment">    ListNode next = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    ListNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">Merge</span><span class="params">(ListNode list1,ListNode list2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(list1==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> list2;</span><br><span class="line">        <span class="keyword">if</span>(list2==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> list1;</span><br><span class="line">        <span class="keyword">if</span>(list1.val &lt; list2.val)&#123;</span><br><span class="line">            list1.next = Merge(list1.next,list2);</span><br><span class="line">            <span class="comment">//ä¸è¦å¿˜è®°è¿™ä¸ªreturn</span></span><br><span class="line">            <span class="keyword">return</span> list1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            list2.next = Merge(list1, list2.next);</span><br><span class="line">            <span class="comment">//ä¸è¦å¿˜è®°è¿™ä¸ªreturn</span></span><br><span class="line">            <span class="keyword">return</span> list2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="æ ‘çš„å­ç»“æ„"><a href="#æ ‘çš„å­ç»“æ„" class="headerlink" title="æ ‘çš„å­ç»“æ„"></a>æ ‘çš„å­ç»“æ„</h4><p><a href="https://www.nowcoder.com/practice/6e196c44c7004d15b1610b9afca8bd88?tpId=13&amp;tqId=11170&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/6e196c44c7004d15b1610b9afca8bd88?tpId=13&amp;tqId=11170&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>è¾“å…¥ä¸¤æ£µäºŒå‰æ ‘Aï¼ŒBï¼Œåˆ¤æ–­Bæ˜¯ä¸æ˜¯Açš„å­ç»“æ„ã€‚ï¼ˆpsï¼šæˆ‘ä»¬çº¦å®šç©ºæ ‘ä¸æ˜¯ä»»æ„ä¸€ä¸ªæ ‘çš„å­ç»“æ„ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">HasSubtree</span><span class="params">(TreeNode root1,TreeNode root2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root1==<span class="keyword">null</span> || root2==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> judge(root1, root2) || judge(root1.left, root2) ||judge(root2.right, root2);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">judge</span><span class="params">(TreeNode root1, TreeNode root2)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root2==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(root1==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(root1.val==root2.val)</span><br><span class="line">            <span class="keyword">return</span> judge(root1.left, root2.left) &amp;&amp; judge(root1.right, root2.right);</span><br><span class="line">        <span class="keyword">return</span> judge(root1.left, root2) || judge(root1.right, root2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ä¸å­æ ‘çš„åŒºåˆ«ï¼š</p>
<p><a href="https://www.nowcoder.com/questionTerminal/6e196c44c7004d15b1610b9afca8bd88?answerType=1&amp;f=discussion" target="_blank" rel="noopener">https://www.nowcoder.com/questionTerminal/6e196c44c7004d15b1610b9afca8bd88?answerType=1&amp;f=discussion</a></p>
<hr>
<h4 id="äºŒå‰æ ‘çš„é•œåƒ"><a href="#äºŒå‰æ ‘çš„é•œåƒ" class="headerlink" title="äºŒå‰æ ‘çš„é•œåƒ"></a>äºŒå‰æ ‘çš„é•œåƒ</h4><p><a href="https://www.nowcoder.com/practice/564f4c26aa584921bc75623e48ca3011?tpId=13&amp;tqId=11171&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/564f4c26aa584921bc75623e48ca3011?tpId=13&amp;tqId=11171&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>æ“ä½œç»™å®šçš„äºŒå‰æ ‘ï¼Œå°†å…¶å˜æ¢ä¸ºæºäºŒå‰æ ‘çš„é•œåƒã€‚</p>
<p><u>è¾“å…¥æè¿°</u>:</p>
<blockquote>
<p>äºŒå‰æ ‘çš„é•œåƒå®šä¹‰ï¼š</p>
<p>â€‹        æºäºŒå‰æ ‘<br>â€‹            8<br>â€‹           /  \<br>â€‹          6   10<br>â€‹         / \  / \<br>â€‹        5  7 9 11<br>â€‹        é•œåƒäºŒå‰æ ‘<br>â€‹            8<br>â€‹           /  \<br>â€‹          10   6<br>â€‹         / \  / \<br>â€‹        11 9 7  5</p>
</blockquote>
<p><u>æ€è·¯</u>ï¼š</p>
<p>äº¤æ¢å·¦å³å­æ ‘çš„èŠ‚ç‚¹ï¼Œç„¶åé€’å½’è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Mirror</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        TreeNode tmp = root.left;</span><br><span class="line">        root.left = root.right;</span><br><span class="line">        root.right = tmp;</span><br><span class="line">        Mirror(root.left);</span><br><span class="line">        Mirror(root.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ"><a href="#é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ" class="headerlink" title="é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ"></a>é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</h4><p><a href="https://www.nowcoder.com/practice/9b4c81a02cd34f76be2659fa0d54342a?tpId=13&amp;tqId=11172&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/9b4c81a02cd34f76be2659fa0d54342a?tpId=13&amp;tqId=11172&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>:</p>
<p>è¾“å…¥ä¸€ä¸ªçŸ©é˜µï¼ŒæŒ‰ç…§ä»å¤–å‘é‡Œä»¥é¡ºæ—¶é’ˆçš„é¡ºåºä¾æ¬¡æ‰“å°å‡ºæ¯ä¸€ä¸ªæ•°å­—ï¼Œä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥å¦‚ä¸‹4 X 4çŸ©é˜µï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 åˆ™ä¾æ¬¡æ‰“å°å‡ºæ•°å­—1,2,3,4,8,12,16,15,14,13,9,5,6,7,11,10.</p>
<p><u>æ€è·¯</u>ï¼š</p>
<p><a href="https://www.nowcoder.com/questionTerminal/9b4c81a02cd34f76be2659fa0d54342a?answerType=1&amp;f=discussion" target="_blank" rel="noopener">https://www.nowcoder.com/questionTerminal/9b4c81a02cd34f76be2659fa0d54342a?answerType=1&amp;f=discussion</a></p>
<ol>
<li>å‘å³èµ°å­˜å…¥æ•´è¡Œçš„å€¼ï¼Œå½“å­˜å…¥åï¼Œè¯¥è¡Œå†ä¹Ÿä¸ä¼šè¢«éå†ï¼Œä»£è¡¨ä¸Šè¾¹ç•Œçš„ up åŠ ä¸€ï¼ŒåŒæ—¶åˆ¤æ–­æ˜¯å¦å’Œä»£è¡¨ä¸‹è¾¹ç•Œçš„ down äº¤é”™ </li>
<li>å‘ä¸‹èµ°å­˜å…¥æ•´åˆ—çš„å€¼ï¼Œå½“å­˜å…¥åï¼Œè¯¥åˆ—å†ä¹Ÿä¸ä¼šè¢«éå†ï¼Œä»£è¡¨å³è¾¹ç•Œçš„ right å‡ä¸€ï¼ŒåŒæ—¶åˆ¤æ–­æ˜¯å¦å’Œä»£è¡¨å·¦è¾¹ç•Œçš„ left äº¤é”™ </li>
<li>å‘å·¦èµ°å­˜å…¥æ•´è¡Œçš„å€¼ï¼Œå½“å­˜å…¥åï¼Œè¯¥è¡Œå†ä¹Ÿä¸ä¼šè¢«éå†ï¼Œä»£è¡¨ä¸‹è¾¹ç•Œçš„ down å‡ä¸€ï¼ŒåŒæ—¶åˆ¤æ–­æ˜¯å¦å’Œä»£è¡¨ä¸Šè¾¹ç•Œçš„ up äº¤é”™ </li>
<li>å‘ä¸Šèµ°å­˜å…¥æ•´åˆ—çš„å€¼ï¼Œå½“å­˜å…¥åï¼Œè¯¥åˆ—å†ä¹Ÿä¸ä¼šè¢«éå†ï¼Œä»£è¡¨å·¦è¾¹ç•Œçš„ left åŠ ä¸€ï¼ŒåŒæ—¶åˆ¤æ–­æ˜¯å¦å’Œä»£è¡¨å³è¾¹ç•Œçš„ right äº¤é”™</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">printMatrix</span><span class="params">(<span class="keyword">int</span> [][] matrix)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(matrix.length==<span class="number">0</span> || matrix[<span class="number">0</span>].length==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> up = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = matrix[<span class="number">0</span>].length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> down = matrix.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = left; i &lt;= right; i++)</span><br><span class="line">                res.add(matrix[up][i]);</span><br><span class="line">            up++;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯å¦å‡ºç•Œ</span></span><br><span class="line">            <span class="keyword">if</span>(up&gt;down)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = up; i &lt;= down; i++)</span><br><span class="line">                res.add(matrix[i][right]);</span><br><span class="line">            right--;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯å¦å‡ºç•Œ</span></span><br><span class="line">            <span class="keyword">if</span>(right&lt;left)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = right; i &gt;= left; i--)</span><br><span class="line">                res.add(matrix[down][i]);</span><br><span class="line">            down--;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯å¦å‡ºç•Œ</span></span><br><span class="line">            <span class="keyword">if</span>(down&lt;up)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = down; i&gt;=up; i--)</span><br><span class="line">                res.add(matrix[i][left]);</span><br><span class="line">            left++;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯å¦å‡ºç•Œ</span></span><br><span class="line">            <span class="keyword">if</span>(left&gt;right)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="åŒ…å«minå‡½æ•°çš„æ ˆ"><a href="#åŒ…å«minå‡½æ•°çš„æ ˆ" class="headerlink" title="åŒ…å«minå‡½æ•°çš„æ ˆ"></a>åŒ…å«minå‡½æ•°çš„æ ˆ</h4><p><a href="https://www.nowcoder.com/practice/4c776177d2c04c2494f2555c9fcc1e49?tpId=13&amp;tqId=11173&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/4c776177d2c04c2494f2555c9fcc1e49?tpId=13&amp;tqId=11173&amp;tPage=1&amp;rp=1&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>å®šä¹‰æ ˆçš„æ•°æ®ç»“æ„ï¼Œè¯·åœ¨è¯¥ç±»å‹ä¸­å®ç°ä¸€ä¸ªèƒ½å¤Ÿå¾—åˆ°æ ˆä¸­æ‰€å«æœ€å°å…ƒç´ çš„minå‡½æ•°ï¼ˆæ—¶é—´å¤æ‚åº¦åº”ä¸ºO(1)ï¼‰ã€‚</p>
<p>æ³¨æ„ï¼šä¿è¯æµ‹è¯•ä¸­ä¸ä¼šå½“æ ˆä¸ºç©ºçš„æ—¶å€™ï¼Œå¯¹æ ˆè°ƒç”¨pop()æˆ–è€…min()æˆ–è€…top()æ–¹æ³•ã€‚</p>
<p><u>æ€è·¯</u>ï¼š</p>
<p>å…³é”®åœ¨äºè‹¥ç”¨ä¸€ä¸ªintæ¥ä¿å­˜æœ€å°å€¼ï¼Œè¢«popå‡ºå»äº†åæ€ä¹ˆåŠï¼š</p>
<p>ä½¿ç”¨ä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªä¿å­˜æ‰€æœ‰çš„å…ƒç´ ï¼Œå¦ä¸€ä¸ªç”¨æ¥ä¿å­˜å†å²æœ€å°å€¼ã€‚</p>
<p>å½“pop()æ—¶ï¼Œæ£€æŸ¥stackä¸minStackçš„æ ˆé¡¶å…ƒç´ æ˜¯å¦ç›¸åŒï¼Œè‹¥ç›¸åŒåˆ™éƒ½pop()ï¼Œå¦åˆ™åªéœ€pop stack.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    Stack&lt;Integer&gt; minStack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stack.empty() || node &lt;= stack.peek())</span><br><span class="line">            minStack.push(node);</span><br><span class="line">        stack.push(node);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stack.peek()==minStack.peek())</span><br><span class="line">            minStack.pop();</span><br><span class="line">        stack.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stack.peek();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">min</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> minStack.peek();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—"><a href="#æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—" class="headerlink" title="æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—"></a>æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—</h4><p><a href="https://www.nowcoder.com/practice/d77d11405cc7470d82554cb392585106?tpId=13&amp;tqId=11174&amp;tPage=2&amp;rp=2&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/d77d11405cc7470d82554cb392585106?tpId=13&amp;tqId=11174&amp;tPage=2&amp;rp=2&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>è¾“å…¥ä¸¤ä¸ªæ•´æ•°åºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—è¡¨ç¤ºæ ˆçš„å‹å…¥é¡ºåºï¼Œè¯·åˆ¤æ–­ç¬¬äºŒä¸ªåºåˆ—æ˜¯å¦å¯èƒ½ä¸ºè¯¥æ ˆçš„å¼¹å‡ºé¡ºåºã€‚å‡è®¾å‹å…¥æ ˆçš„æ‰€æœ‰æ•°å­—å‡ä¸ç›¸ç­‰ã€‚ä¾‹å¦‚åºåˆ—1,2,3,4,5æ˜¯æŸæ ˆçš„å‹å…¥é¡ºåºï¼Œåºåˆ—4,5,3,2,1æ˜¯è¯¥å‹æ ˆåºåˆ—å¯¹åº”çš„ä¸€ä¸ªå¼¹å‡ºåºåˆ—ï¼Œä½†4,3,5,1,2å°±ä¸å¯èƒ½æ˜¯è¯¥å‹æ ˆåºåˆ—çš„å¼¹å‡ºåºåˆ—ã€‚ï¼ˆæ³¨æ„ï¼šè¿™ä¸¤ä¸ªåºåˆ—çš„é•¿åº¦æ˜¯ç›¸ç­‰çš„ï¼‰</p>
<p><u>æ€è·¯</u>ï¼š</p>
<p>æ–°å»ºä¸€ä¸ªæ ˆï¼Œå°†æ•°ç»„Aå‹å…¥æ ˆä¸­ï¼Œåªè¦æ ˆé¡¶å…ƒç´ ç­‰äºæ•°ç»„Bæ—¶ï¼Œå°±å°†å…¶å‡ºæ ˆï¼Œå½“å¾ªç¯ç»“æŸæ—¶ï¼Œåˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºåˆ™è¿”å›true.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">IsPopOrder</span><span class="params">(<span class="keyword">int</span> [] pushA,<span class="keyword">int</span> [] popA)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pushA.length==<span class="number">0</span> || popA.length==<span class="number">0</span> || pushA.length != popA.length)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pushA.length; i++)&#123;</span><br><span class="line">            stack.push(pushA[i]);</span><br><span class="line">            <span class="keyword">while</span>(!stack.empty() &amp;&amp; stack.peek()==popA[j])&#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.empty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="ä»ä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘"><a href="#ä»ä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘" class="headerlink" title="ä»ä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘"></a>ä»ä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘</h4><p><a href="https://www.nowcoder.com/practice/7fe2212963db4790b57431d9ed259701?tpId=13&amp;tqId=11175&amp;tPage=2&amp;rp=2&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/7fe2212963db4790b57431d9ed259701?tpId=13&amp;tqId=11175&amp;tPage=2&amp;rp=2&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking</a></p>
<p><u>é¢˜ç›®æè¿°</u>ï¼š</p>
<p>ä»ä¸Šå¾€ä¸‹æ‰“å°å‡ºäºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼ŒåŒå±‚èŠ‚ç‚¹ä»å·¦è‡³å³æ‰“å°ã€‚</p>
<p><u>æ€è·¯</u>ï¼š</p>
<p><a href="https://www.nowcoder.com/questionTerminal/7fe2212963db4790b57431d9ed259701?answerType=1&amp;f=discussion" target="_blank" rel="noopener">https://www.nowcoder.com/questionTerminal/7fe2212963db4790b57431d9ed259701?answerType=1&amp;f=discussion</a></p>
<p>æ¯ä¸€æ¬¡æ‰“å°ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™æŠŠè¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ”¾åˆ°ä¸€ä¸ªé˜Ÿåˆ—çš„å°¾éƒ¨ã€‚æ¥ä¸‹æ¥åˆ°å¯¹é˜Ÿåˆ—çš„å¤´éƒ¨å–å‡ºæœ€æ—©è¿›å…¥é˜Ÿåˆ—çš„èŠ‚ç‚¹æ”¾åˆ°ArrayList ä¸­ï¼Œé‡å¤å‰é¢çš„æ“ä½œï¼Œç›´è‡³é˜Ÿåˆ—ä¸ºç©ºã€‚  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">PrintFromTopToBottom</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.offer(root);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            TreeNode cur = queue.poll();</span><br><span class="line">            res.add(cur.val);</span><br><span class="line">            <span class="keyword">if</span>(cur.left!=<span class="keyword">null</span>)</span><br><span class="line">                queue.offer(cur.left);</span><br><span class="line">            <span class="keyword">if</span>(cur.right!=<span class="keyword">null</span>)</span><br><span class="line">                queue.offer(cur.right);</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>pipå‘½ä»¤</title>
    <url>/2020/02/25/pip%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="å®‰è£…åŒ…"><a href="#å®‰è£…åŒ…" class="headerlink" title="å®‰è£…åŒ…"></a>å®‰è£…åŒ…</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install package-name</span><br></pre></td></tr></table></figure>
<p>è‹¥å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°[WinError 5]é”™è¯¯ï¼Œå¯å°è¯•ä½¿ç”¨<code>pip install --user package-name</code></p>
<p>å‚è€ƒ<a href="https://www.lizenghai.com/archives/585.html" target="_blank" rel="noopener">https://www.lizenghai.com/archives/585.html</a></p>
<h4 id="æ‰€æœ‰å·²å®‰è£…çš„åŒ…"><a href="#æ‰€æœ‰å·²å®‰è£…çš„åŒ…" class="headerlink" title="æ‰€æœ‰å·²å®‰è£…çš„åŒ…"></a>æ‰€æœ‰å·²å®‰è£…çš„åŒ…</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip list</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¥çœ‹æŸä¸ªå·²å®‰è£…åŒ…"><a href="#æŸ¥çœ‹æŸä¸ªå·²å®‰è£…åŒ…" class="headerlink" title="æŸ¥çœ‹æŸä¸ªå·²å®‰è£…åŒ…"></a>æŸ¥çœ‹æŸä¸ªå·²å®‰è£…åŒ…</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip show package_name</span><br></pre></td></tr></table></figure>
<h4 id="æ£€æŸ¥å“ªäº›åŒ…éœ€è¦æ›´æ–°"><a href="#æ£€æŸ¥å“ªäº›åŒ…éœ€è¦æ›´æ–°" class="headerlink" title="æ£€æŸ¥å“ªäº›åŒ…éœ€è¦æ›´æ–°"></a>æ£€æŸ¥å“ªäº›åŒ…éœ€è¦æ›´æ–°</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip list --outdated</span><br></pre></td></tr></table></figure>
<h4 id="å‡çº§åŒ…"><a href="#å‡çº§åŒ…" class="headerlink" title="å‡çº§åŒ…"></a>å‡çº§åŒ…</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install --upgrade package_name</span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…æŸä¸ªç‰ˆæœ¬çš„åŒ…"><a href="#å®‰è£…æŸä¸ªç‰ˆæœ¬çš„åŒ…" class="headerlink" title="å®‰è£…æŸä¸ªç‰ˆæœ¬çš„åŒ…"></a>å®‰è£…æŸä¸ªç‰ˆæœ¬çš„åŒ…</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install numpy==1.18</span><br></pre></td></tr></table></figure>
<h4 id="å¸è½½åŒ…"><a href="#å¸è½½åŒ…" class="headerlink" title="å¸è½½åŒ…"></a>å¸è½½åŒ…</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip uninstall package_name</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨pip â€“helpå‘½ä»¤å¯ä»¥æŸ¥çœ‹pipå¸®åŠ©æ‰‹å†Œ</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Computer Vision</title>
    <url>/2020/02/18/Computer-Vision/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ¥æºäº<a href="https://www.analyticsvidhya.com/blog/2020/01/computer-vision-learning-path-2020/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+AnalyticsVidhya+(Analytics+Vidhya" target="_blank" rel="noopener">Hereâ€™s your Learning Path to Master Computer Vision in 2020</a>)</p>
<h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><h3 id="Face-Recognition"><a href="#Face-Recognition" class="headerlink" title="Face Recognition"></a>Face Recognition</h3><p><img src="/2020/02/18/Computer-Vision/1581936373011.png" alt="1581936373011"></p>
<h3 id="Types-of-computer-vision"><a href="#Types-of-computer-vision" class="headerlink" title="Types of computer vision"></a>Types of computer vision</h3><p><img src="/2020/02/18/Computer-Vision/1581936472914.png" alt="1581936472914"></p>
<h2 id="2-Image-Preprocessing"><a href="#2-Image-Preprocessing" class="headerlink" title="2. Image Preprocessing"></a>2. Image Preprocessing</h2><h3 id="2-1-Three-Beginner-Friendly-Techniques-to-Extract-Features-from-Images"><a href="#2-1-Three-Beginner-Friendly-Techniques-to-Extract-Features-from-Images" class="headerlink" title="2.1 Three Beginner-Friendly Techniques to Extract Features from Images"></a>2.1 Three Beginner-Friendly Techniques to Extract Features from Images</h3><p><a href="https://www.analyticsvidhya.com/blog/2019/08/3-techniques-extract-features-from-image-data-machine-learning-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2019/08/3-techniques-extract-features-from-image-data-machine-learning-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<h4 id="2-1-1-How-do-Machines-Store-Images"><a href="#2-1-1-How-do-Machines-Store-Images" class="headerlink" title="2.1.1 How do Machines Store Images?"></a>2.1.1 How do Machines Store Images?</h4><p>Machines store images in the form of a matrix of numbers. The size of this matrix depends on the number of pixels we have in any given image.</p>
<blockquote>
<p><em>Letâ€™s say the dimensions of an image are 180 x 200 or n x m. These dimensions are basically the number of pixels in the image (height x width).</em></p>
</blockquote>
<p><strong>These numbers, or the pixel values, denote the intensity or brightness of the pixel.</strong> <span style="color:red">Smaller numbers (closer to zero) represent black, and larger numbers (closer to 255) denote white. </span>Youâ€™ll understand whatever we have learned so far by analyzing the below image.</p>
<p>The dimensions of the below image are 22 x 16, which you can verify by counting the number of pixels:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/article-image-16.png" alt="reading image data machine learning"></p>
<blockquote>
<p><em>A colored image is typically composed of multiple colors and almost all colors can be generated from three primary colors â€“ red, green and blue.</em></p>
</blockquote>
<p>In the case of a colored image, there are three Matrices (or channels) â€“ Red, Green, and Blue. <strong>Each matrix has values between 0-255 representing the intensity of the color for that pixel.</strong> Consider the below image to understand this concept:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/article-image-41.png" alt="Channels in Images"></p>
<p>The three channels are superimposed (å åŠ ) to form a colored image.</p>
<p><em>Note that these are not the original pixel values for the given image as the original matrix would be very large and difficult to visualize. Also, there are various other formats in which the images are stored. RGB is the most popular one and hence I have addressed it here. You can read more about the other popular formats <a href="https://www.w3schools.com/cssref/css_colors_legal.asp" target="_blank" rel="noopener">here</a>.</em></p>
<h4 id="2-1-2-Reading-Image-Data-in-Python"><a href="#2-1-2-Reading-Image-Data-in-Python" class="headerlink" title="2.1.2 Reading Image Data in Python"></a>2.1.2 Reading Image Data in Python</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">from</span> skimage.io <span class="keyword">import</span> imread, imshow</span><br><span class="line"></span><br><span class="line">image = imread(<span class="string">'image_8_original.png'</span>, as_gray=<span class="literal">True</span>)</span><br><span class="line">imshow(image)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/index_1.png" alt="image data machine learning"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#checking image shape </span></span><br><span class="line">image.shape, image</span><br></pre></td></tr></table></figure>
<p>(28,28)</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/index_2-300x289.png" alt="image data machine learning"></p>
<p>Letâ€™s now explore various methods of using pixel values as features.</p>
<h4 id="2-1-3-Method-1-Grayscale-Pixel-Values-as-Features"><a href="#2-1-3-Method-1-Grayscale-Pixel-Values-as-Features" class="headerlink" title="2.1.3 Method #1: Grayscale Pixel Values as Features"></a>2.1.3 Method #1: Grayscale Pixel Values as Features</h4><blockquote>
<p><em>The simplest way to create features from an image is to use these raw pixel values as separate features.</em></p>
</blockquote>
<p>The number of features will be the same as the number of pixels.</p>
<p>How do we arrange these pixels as features? Well, we can simply append every pixel value one after the other to generate a feature vector. This is illustrated in the image below:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/article-image-52.png" alt="pixel features machine learning"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">image = imread(<span class="string">'puppy.jpeg'</span>, as_gray=<span class="literal">True</span>) </span><br><span class="line">image.shape, imshow(image)</span><br></pre></td></tr></table></figure>
<p>(660, 450)</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/index_3.png" alt="image data machine learning"></p>
<p>The image shape here is 660 x 450. Hence, the number of features should be 297,000. We can generate this using the <code>reshape</code> function from NumPy where we specify the dimension of the image:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#pixel features</span></span><br><span class="line">features = np.reshape(image, (<span class="number">660</span>*<span class="number">450</span>))</span><br><span class="line">features.shape, features</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(297000,)</span><br><span class="line">array([0.96470588, 0.96470588, 0.96470588, ..., 0.96862745, 0.96470588,</span><br><span class="line">       0.96470588])</span><br></pre></td></tr></table></figure>
<p>But here, we only had a single channel or a grayscale image. Can we do the same for a colored image? Letâ€™s find out!</p>
<h4 id="2-1-4-Method-2-Mean-Pixel-Value-of-Channels-Colored-Image"><a href="#2-1-4-Method-2-Mean-Pixel-Value-of-Channels-Colored-Image" class="headerlink" title="2.1.4 Method #2: Mean Pixel Value of Channels (Colored Image)"></a>2.1.4 Method #2: Mean Pixel Value of Channels (Colored Image)</h4><p>While reading the image in the previous section, we had set the parameter <em>â€˜as_gray = Trueâ€™</em>. So we only had one channel in the image and we could easily append the pixel values. Let us remove the parameter and load the image again:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">image = imread(<span class="string">'puppy.jpeg'</span>) </span><br><span class="line">image.shape</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(660, 450, 3)</span><br></pre></td></tr></table></figure>
<p>This time, the image has a dimension (660, 450, 3), where 3 is the number of channels. We can go ahead and create the features as we did previously. The number of features, in this case, will be 660*450*3 = 891,000.</p>
<p>Alternatively, here is another approach we can use:</p>
<blockquote>
<p><em>Instead of using the pixel values from the three channels separately, we can generate a new matrix that has the mean value of pixels from all three channels.</em></p>
</blockquote>
<p>The image below will give you even more clarity around this idea:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/article-image-6.png" alt="image pixel features"></p>
<p>By doing so, the number of features remains the same and we also take into account the pixel values from all three channels of the image. </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">image = imread(<span class="string">'puppy.jpeg'</span>)</span><br><span class="line">feature_matrix = np.zeros((<span class="number">660</span>,<span class="number">450</span>)) </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,image.shape[<span class="number">0</span>]):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,image.shape[<span class="number">1</span>]):</span><br><span class="line">        feature_matrix[i][j] = ((int(image[i,j,<span class="number">0</span>]) + int(image[i,j,<span class="number">1</span>]) + int(image[i,j,<span class="number">2</span>]))/<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>The new matrix will have the same height and width but only 1 channel. Now we can follow the same steps that we did in the previous section. We append the pixel values one after the other to get a 1D array:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">features = np.reshape(feature_matrix, (<span class="number">660</span>*<span class="number">450</span>)) </span><br><span class="line">features.shape</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(297000,)</span><br></pre></td></tr></table></figure>
<h4 id="2-1-5-Method-3-Extracting-Edge-Features"><a href="#2-1-5-Method-3-Extracting-Edge-Features" class="headerlink" title="2.1.5 Method #3: Extracting Edge Features"></a>2.1.5 Method #3: Extracting Edge Features</h4><p>Consider that we are given the below image and we need to identify the objects present in it:</p>
<p><img src="/2020/02/18/Computer-Vision/article-image-71.webp" alt="article-image-71"></p>
<p>You must have recognized the objects in an instant â€“ a dog, a car and a cat. What are the features that you considered while differentiating each of these images? The shape could be one important factor, followed by color, or size. What if the machine could also identify the shape as we do?</p>
<p>A similar idea is to <strong>extract edges as features and use that as the input for the model.</strong> I want you to think about this for a moment â€“ how can we identify edges in an image? <strong>Edge is basically where there is a sharp change in color</strong>. Look at the below image:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/article-image-81.png" alt="edge features"></p>
<p>And as we know, an image is represented in the form of numbers. So, we will look for pixels around which there is a drastic change in the pixel values.</p>
<p>Letâ€™s say we have the following matrix for the image:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/article-image-9.png" alt="img"></p>
<p>To identify if a pixel is an edge or not, we will simply subtract the values on either side of the pixel. For this example, we have the highlighted value of 85. We will find the difference between the values 89 and 78. Since this difference is not very large, we can say that there is no edge around this pixel.</p>
<p>Now consider the pixel 125 highlighted in the below image:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/article-image-101.png" alt="img"></p>
<p>Since the difference between the values on either side of this pixel is large, we can conclude that there is a significant transition at this pixel and hence it is an edge. Now the question is, do we have to do this step manually?</p>
<p>No! <strong>There are various kernels that can be used to highlight the edges in an image.</strong> The method we just discussed can also be achieved using the Prewitt kernel (in the x-direction). Given below is the Prewitt kernel:</p>
<p><img src="/2020/02/18/Computer-Vision/article-image-132-300x159.webp" alt="article-image-132-300x159"></p>
<p>We take the values surrounding the selected pixel and multiply it with the selected kernel (Prewitt kernel). We can then add the resulting values to get a final value. Since we already have -1 in one column and 1 in the other column, adding the values is equivalent to taking the difference.</p>
<p><img src="/2020/02/18/Computer-Vision/article-image-111.webp" alt="article-image-111"></p>
<p>There are various other kernels and I have mentioned four most popularly used ones below:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/article-image-121.png" alt="kernels"></p>
<p>Letâ€™s now go back to the notebook and generate edge features for the same image:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#importing the required libraries</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> skimage.io <span class="keyword">import</span> imread, imshow</span><br><span class="line"><span class="keyword">from</span> skimage.filters <span class="keyword">import</span> prewitt_h,prewitt_v</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment">#reading the image </span></span><br><span class="line">image = imread(<span class="string">'puppy.jpeg'</span>,as_gray=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#calculating horizontal edges using prewitt kernel</span></span><br><span class="line">edges_prewitt_horizontal = prewitt_h(image)</span><br><span class="line"><span class="comment">#calculating vertical edges using prewitt kernel</span></span><br><span class="line">edges_prewitt_vertical = prewitt_v(image)</span><br><span class="line"></span><br><span class="line">imshow(edges_prewitt_vertical, cmap=<span class="string">'gray'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/index_61.png" alt="edge features"></p>
<h3 id="2-2-HOG-Histogram-of-Oriented-Gradients-features"><a href="#2-2-HOG-Histogram-of-Oriented-Gradients-features" class="headerlink" title="2.2 HOG (Histogram of Oriented Gradients) features"></a>2.2 HOG (Histogram of Oriented Gradients) features</h3><p><a href="https://www.analyticsvidhya.com/blog/2019/09/feature-engineering-images-introduction-hog-feature-descriptor/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2019/09/feature-engineering-images-introduction-hog-feature-descriptor/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<h4 id="2-2-1-What-is-a-Feature-Descriptor"><a href="#2-2-1-What-is-a-Feature-Descriptor" class="headerlink" title="2.2.1 What is a Feature Descriptor?"></a>2.2.1 What is a Feature Descriptor?</h4><p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/article-image-1.png" alt="HOG feature"></p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/article-image-2.png" alt="HOG feature"></p>
<p>The first pair of images had a lot of information, like the shape of the object, its color, the edges, background, etc.</p>
<p>On the other hand, the second pair had much less information (only the shape and the edges) but it was still enough to differentiate the two images.</p>
<p>We were easily able to differentiate the objects in the second case because it had the necessary information we would need to identify the object. And that is exactly what a <strong>feature descriptor</strong> does:</p>
<blockquote>
<p><em>It is a simplified representation of the image that contains only the most important information about the image.</em></p>
</blockquote>
<p>There are a number of feature descriptors out there. Here are a few of the most popular ones:</p>
<ul>
<li><a href="#jumpHOG">HOG: Histogram of Oriented Gradients</a></li>
<li><a href="#jumpSIFT">SIFT: Scale Invariant Feature Transform</a></li>
<li>SURF: Speeded-Up Robust Feature</li>
</ul>
<h4 id="2-2-2-Introduction-to-the-HOG-Feature-Descriptor"><a href="#2-2-2-Introduction-to-the-HOG-Feature-Descriptor" class="headerlink" title="2.2.2 Introduction to the HOG Feature Descriptor"></a><span id="jumpHOG">2.2.2 Introduction to the HOG Feature Descriptor</span></h4><p>HOG, or Histogram of Oriented Gradients, is a feature descriptor that is often used to extract features from image data. It is widely used in <a href="https://courses.analyticsvidhya.com/courses/computer-vision-using-deep-learning-version2/?utm_source=blog&amp;utm_medium=understand-math-HOG-feature-descriptor" target="_blank" rel="noopener">computer vision</a> tasks for <a href="https://www.analyticsvidhya.com/blog/2018/10/a-step-by-step-introduction-to-the-basic-object-detection-algorithms-part-1/?utm_source=blog&amp;utm_medium=understand-math-HOG-feature-descriptor" target="_blank" rel="noopener">object detection</a>.</p>
<p>Letâ€™s look at some important aspects of HOG that makes it different from other feature descriptors:</p>
<ul>
<li>The HOG descriptor focuses on the <strong>structure or the shape</strong> of an object. Now you might ask, how is this different from the edge features we extract for images? In the case of edge features, we only identify if the pixel is an edge or not. HOG is able to provide the edge direction as well. This is done by extracting the <strong>gradient and orientation</strong> (or you can say magnitude and direction) of the edges</li>
<li>Additionally, these orientations are calculated in <strong>â€˜localizedâ€™ portions</strong>. This means that the complete image is broken down into smaller regions and for each region, the gradients and orientation are calculated. We will discuss this in much more detail in the upcoming sections</li>
<li>Finally the HOG would generate a <strong>Histogram</strong> for each of these regions separately. The histograms are created using the gradients and orientations of the pixel values, hence the name â€˜Histogram of Oriented Gradientsâ€™</li>
</ul>
<p>To put a formal definition to this:</p>
<blockquote>
<p>The HOG feature descriptor counts the occurrences of gradient orientation in localized portions of an image.</p>
</blockquote>
<p>Implementing HOG using tools like OpenCV is extremely simple. Itâ€™s just a few lines of code since we have a predefined function called <strong>hog</strong> in the <strong>skimage.feature</strong> library. Our focus in this article, however, is on how these features are actually calculated.</p>
<h4 id="2-2-3-Process-of-Calculating-the-Histogram-of-Oriented-Gradients-HOG"><a href="#2-2-3-Process-of-Calculating-the-Histogram-of-Oriented-Gradients-HOG" class="headerlink" title="2.2.3 Process of Calculating the Histogram of Oriented Gradients (HOG)"></a>2.2.3 Process of Calculating the Histogram of Oriented Gradients (HOG)</h4><p>HOGå…·ä½“æ˜¯æ€ä¹ˆè®¡ç®—çš„ï¼šè¯¦ç»†å†…å®¹è§<a href="https://www.analyticsvidhya.com/blog/2019/09/feature-engineering-images-introduction-hog-feature-descriptor/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">è¿™é‡Œ</a>.</p>
<h4 id="2-2-4-Implementing-HOG-Feature-Descriptor-in-Python"><a href="#2-2-4-Implementing-HOG-Feature-Descriptor-in-Python" class="headerlink" title="2.2.4 Implementing HOG Feature Descriptor in Python"></a>2.2.4 Implementing HOG Feature Descriptor in Python</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#importing required libraries</span></span><br><span class="line"><span class="keyword">from</span> skimage.io <span class="keyword">import</span> imread, imshow</span><br><span class="line"><span class="keyword">from</span> skimage.transform <span class="keyword">import</span> resize</span><br><span class="line"><span class="keyword">from</span> skimage.feature <span class="keyword">import</span> hog</span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> exposure</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#reading the image</span></span><br><span class="line">img = imread(<span class="string">'puppy.jpeg'</span>)</span><br><span class="line">imshow(img)</span><br><span class="line">print(img.shape)</span><br></pre></td></tr></table></figure>
<p>(663, 459, 3)</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/index_7.png" alt="hog_feature"></p>
<p>We can see that the shape of the image is 663 x 459. We will have to resize this image into 64 x 128. Note that we are using <code>skimage</code> which takes the input as height x width.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#resizing image </span></span><br><span class="line">resized_img = resize(img, (<span class="number">128</span>,<span class="number">64</span>)) </span><br><span class="line">imshow(resized_img) </span><br><span class="line">print(resized_img.shape)</span><br></pre></td></tr></table></figure>
<p>(128, 64, 3)</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/index_8.png" alt="hog_feature"></p>
<p>Here, I am going to use the hog function from <code>skimage.feature</code> directly. So we donâ€™t have to calculate the gradients, magnitude (total gradient) and orientation individually. The hog function would internally calculate it and return the feature matrix.</p>
<p>Also, if you set the parameter <code>visualize = True</code>, it will return an image of the HOG.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#creating hog features </span></span><br><span class="line">fd, hog_image = hog(resized_img, orientations=<span class="number">9</span>, pixels_per_cell=(<span class="number">8</span>, <span class="number">8</span>), </span><br><span class="line">                    cells_per_block=(<span class="number">2</span>, <span class="number">2</span>), visualize=<span class="literal">True</span>, multichannel=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>Before going ahead, let me give you a basic idea of what each of these hyperparameters represents. Alternatively, you can check the definitions from the official documentation <a href="https://scikit-image.org/docs/dev/api/skimage.feature.html#skimage.feature.hog" target="_blank" rel="noopener">here</a>.</p>
<ul>
<li>The <code>orientations</code> are the number of buckets we want to create. Since I want to have a 9 x 1 matrix, I will set the orientations to 9</li>
<li><code>pixels_per_cell</code> defines the size of the cell for which we create the histograms. In the example we covered in this article, we used 8 x 8 cells and here I will set the same value. As mentioned previously, you can choose to change this value</li>
<li>We have another hyperparameter <code>cells_per_block</code> which is the size of the block over which we normalize the histogram. Here, we mention the cells per blocks and not the number of pixels. So, instead of writing 16 x 16, we will use 2 x 2 here</li>
</ul>
<p>The feature matrix from the function is stored in the variable <code>fd</code>, and the image is stored in <code>hog_image</code>. Let us check the shape of the feature matrix:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fd.shape</span><br></pre></td></tr></table></figure>
<p>(3780,)</p>
<p>As expected, we have 3,780 features for the image and this verifies the calculations we did in step 7 earlier. You can choose to change the values of the hyperparameters and that will give you a feature matrix of different sizes.</p>
<p>Letâ€™s finally look at the HOG image:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fig, (ax1, ax2) = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">16</span>, <span class="number">8</span>), sharex=<span class="literal">True</span>, sharey=<span class="literal">True</span>) </span><br><span class="line"></span><br><span class="line">ax1.imshow(resized_img, cmap=plt.cm.gray) </span><br><span class="line">ax1.set_title(<span class="string">'Input image'</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># Rescale histogram for better display </span></span><br><span class="line">hog_image_rescaled = exposure.rescale_intensity(hog_image, in_range=(<span class="number">0</span>, <span class="number">10</span>)) </span><br><span class="line"></span><br><span class="line">ax2.imshow(hog_image_rescaled, cmap=plt.cm.gray) </span><br><span class="line">ax2.set_title(<span class="string">'Histogram of Oriented Gradients'</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/08/index_9.png" alt="hog_features"></p>
<h3 id="2-3-SIFT-Scale-Invariant-Feature-Transform-features"><a href="#2-3-SIFT-Scale-Invariant-Feature-Transform-features" class="headerlink" title="2.3 SIFT (Scale Invariant Feature Transform) features"></a><span id="jumpSIFT">2.3 SIFT (Scale Invariant Feature Transform) features</span></h3><p><a href="https://www.analyticsvidhya.com/blog/2019/10/detailed-guide-powerful-sift-technique-image-matching-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2019/10/detailed-guide-powerful-sift-technique-image-matching-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<p>Take a look at the below collection of images and think of the common element between them:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/09/Screenshot-from-2019-09-20-17-49-55.png" alt="SIFT"></p>
<p>The resplendent Eiffel Tower, of course! We naturally understand that the scale or angle of the image may change but the object remains the same.</p>
<p>But machines have an almighty struggle with the same idea. Itâ€™s a challenge for them to identify the object in an image if we change certain things (like the angle or the scale). Hereâ€™s the good news â€“ machines are super flexible and we can teach them to identify images at an almost human-level.</p>
<p>So, in this article, we will talk about an <span style="color:red">image matching algorithm</span> that <strong>identifies the key features from the images and is able to match these features to a new image of the same object.</strong></p>
<h4 id="2-3-1-Introduciton-to-SIFT"><a href="#2-3-1-Introduciton-to-SIFT" class="headerlink" title="2.3.1 Introduciton to SIFT"></a>2.3.1 Introduciton to SIFT</h4><blockquote>
<p><em>SIFT, or Scale Invariant Feature Transform, is a feature detection algorithm in Computer Vision.</em></p>
</blockquote>
<p>SIFT helps locate the local features in an image, commonly known as the <span style="color:red">â€˜<em>keypoints</em>â€˜ </span>of the image. These keypoints are <strong>scale &amp; rotation invariant</strong> that can be used for various computer vision applications, like image matching, object detection, scene detection, etc.</p>
<p>åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨SIFTç”Ÿæˆçš„å…³é”®ç‚¹ä½œä¸ºå›¾åƒçš„ç‰¹å¾ã€‚<strong>The major advantage of SIFT features, over edge features or hog features, is that they are not affected by the size or orientation of the image.</strong></p>
<p>For example, here is another image of the Eiffel Tower along with its smaller version. The keypoints of the object in the first image are matched with the keypoints found in the second image. The same goes for two images when the object in the other image is slightly rotated. Amazing, right?</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/10/Screenshot-from-2019-10-01-16-08-16-300x282.png" alt="SIFT"></p>
<p>Letâ€™s understand how these keypoints are identified and what are the techniques used to ensure the scale and rotation invariance. Broadly speaking, the entire process can be divided into 4 parts:</p>
<ul>
<li><strong><a href="#jump2.3.2">Constructing a Scale Space:</a></strong> To make sure that features are scale-independent</li>
<li><strong><a href="#jump2.3.3">Keypoint Localisation (å…³é”®ç‚¹å®šä½):</a></strong> Identifying the suitable features or keypoints</li>
<li><strong><a href="#jump2.3.4">Orientation Assignment:</a></strong> Ensure the keypoints are rotation invariant</li>
<li><strong><a href="#jump2.3.5">Keypoint Descriptor:</a></strong> Assign a unique fingerprint to each keypoint</li>
</ul>
<p>Finally, we can use these keypoints for feature matching!</p>
<p><em>This article is based on the original paper by David G. Lowe. Here is the link: <a href="https://people.eecs.berkeley.edu/~malik/cs294/lowe-ijcv04.pdf" target="_blank" rel="noopener">Distinctive Image Features from Scale-Invariant Keypoints.</a></em></p>
<h4 id="2-3-2-Constructing-the-Scale-Space"><a href="#2-3-2-Constructing-the-Scale-Space" class="headerlink" title="2.3.2 Constructing the Scale Space"></a><span id="jump2.3.2">2.3.2 Constructing the Scale Space</span></h4><p>We need to identify the most distinct features in a given image while ignoring any noise. Additionally, we need to ensure that the features are not scale-dependent.</p>
<p>1.reduce the noise</p>
<blockquote>
<p><em>We use the</em> <strong>Gaussian Blurring technique</strong> <em>to reduce the noise in an image.</em></p>
</blockquote>
<p>So, for every pixel in an image, the Gaussian Blur calculates a value based on its neighboring pixels. Below is an example of image before and after applying the Gaussian Blur. As you can see, the texture and minor details are removed from the image and only the relevant information like the shape and edges remain:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/09/index_110.png" alt="gaussian blur"></p>
<p>2.ensure the features are not scale-dependent</p>
<p>Gaussian Blur successfully removed the noise from the images and we have highlighted the important features of the image. Now, <em>we need to ensure that these features must not be scale-dependent.</em> This means we will be searching for these features on multiple scales, by creating a â€˜scale spaceâ€™.</p>
<blockquote>
<p><em>Scale space is a collection of images having different scales, generated from a single image.</em></p>
</blockquote>
<p>To create a new set of images of different scales, we will take the original image and <strong>reduce the scale by half</strong>. For each new image, we will create blur versions as we saw above.</p>
<p>ä¾‹ï¼šWe have the original image of size (275, 183) and a scaled image of dimension (138, 92). For both the images, two blur images are created:</p>
<p><img src="/2020/02/18/Computer-Vision/1582017369109.png" alt="1582017369109"></p>
<p>How many times do we need to scale the image and how many subsequent blur images need to be created for each scaled image? <strong>The ideal number of octaves should be four</strong>, and for each octave, the number of blur images should be five.</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/09/Screenshot-from-2019-09-24-18-27-46.png" alt="sift octave"></p>
<h5 id="Difference-of-Gaussian"><a href="#Difference-of-Gaussian" class="headerlink" title="Difference of Gaussian"></a>Difference of Gaussian</h5><p>So far we have created images of multiple scales (often represented by Ïƒ) and used Gaussian blur for each of them to reduce the noise in the image. Next, we will try to enhance the features using a technique called Difference of Gaussians or DoG.</p>
<blockquote>
<p><em>Difference of Gaussian is a <span style="color:red">feature enhancement</span> algorithm that involves the subtraction of one blurred version of an original image from another, less blurred version of the original.</em></p>
</blockquote>
<p>DoG creates another set of images, for each octave, by subtracting every image from the previous image in the same scale. </p>
<p>Let us create the DoG for the images in scale space. å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒOn the left, we have 5 images, all from the first octave (thus having the same scale). Each subsequent image is created by applying the Gaussian blur over the previous image. On the right, we have four images generated by subtracting the consecutive Gaussians. The results are jaw-dropping (è®©äººåƒæƒŠ)!</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/09/Screenshot-from-2019-09-25-14-18-26.png" alt="difference of gaussian"></p>
<p>Now that we have a new set of images, we are going to use this to find the important keypoints.</p>
<h4 id="2-3-3-Keypoint-Localization-å…³é”®ç‚¹å®šä½"><a href="#2-3-3-Keypoint-Localization-å…³é”®ç‚¹å®šä½" class="headerlink" title="2.3.3 Keypoint Localization (å…³é”®ç‚¹å®šä½)"></a><span id="jump2.3.3">2.3.3 Keypoint Localization (å…³é”®ç‚¹å®šä½)</span></h4><p>Once the images have been created, the next step is to find the important keypoints from the image that can be used for feature matching. <strong>The idea is to find the local maxima and minima for the images.</strong> This part is divided into two steps:</p>
<ol>
<li><a href="#jump2.3.3.1">Find the local maxima and minima</a></li>
<li><a href="#jump2.3.3.2">Remove low contrast keypoints (keypoint selection)</a></li>
</ol>
<h5 id="Local-Maxima-and-Local-Minima"><a href="#Local-Maxima-and-Local-Minima" class="headerlink" title="Local Maxima and Local Minima"></a><span id="jump2.3.3.1">Local Maxima and Local Minima</span></h5><blockquote>
<p><em>To locate the local maxima and minima, we go through every pixel in the image and compare it with its neighboring pixels.</em></p>
</blockquote>
<p>When I say â€˜neighboringâ€™, this not only includes the surrounding pixels of that image (in which the pixel lies), but also the nine pixels for the previous and next image in the octave.</p>
<p>This means that every pixel value is compared with 26 other pixel values to find whether it is the local maxima/minima. For example, in the below diagram, we have three images from the first octave. The pixel marked <em>x</em> is compared with the neighboring pixels (in green) and is selected as a keypoint if it is the highest or lowest among the neighbors:</p>
<p><img src="/2020/02/18/Computer-Vision/Screenshot-from-2019-09-25-16-50-01-300x207.webp" alt="Screenshot-from-2019-09-25-16-50-01-300x207"></p>
<p>We now have potential keypoints that represent the images and are scale-invariant. We will apply the last check over the selected keypoints to ensure that these are the most accurate keypoints to represent the image. ( å› ä¸ºsome of these keypoints may not be robust to noise. )</p>
<h5 id="Keypoint-Selection"><a href="#Keypoint-Selection" class="headerlink" title="Keypoint Selection"></a><span id="jump2.3.3.2">Keypoint Selection</span></h5><p><strong>we will eliminate the keypoints that have low contrast, or lie very close to the edge.</strong></p>
<p>To deal with the low contrast keypoints, <strong>a second-order Taylor expansion</strong> is computed for each keypoint. If the resulting value is less than 0.03 (in magnitude), we reject the keypoint.</p>
<p>So what do we do about the remaining keypoints? Well, we perform a check to identify the poorly located keypoints. è¿™äº›æ˜¯æ¥è¿‘è¾¹ç¼˜çš„å…³é”®ç‚¹ï¼Œå…·æœ‰é«˜è¾¹ç¼˜å“åº”ï¼Œä½†å¯èƒ½å¯¹å°‘é‡å™ªå£°ä¸å¤Ÿç¨³å¥ã€‚<strong>A second-order Hessian matrix</strong> is used to identify such keypoints. </p>
<p>Now that we have performed both the <span style="color:red">contrast test</span> and the <span style="color:red">edge test</span> to reject the unstable keypoints, we will now assign an orientation value for each keypoint to make the rotation invariant.</p>
<h4 id="2-3-4-Orientation-Assignment"><a href="#2-3-4-Orientation-Assignment" class="headerlink" title="2.3.4 Orientation Assignment"></a><span id="jump2.3.4">2.3.4 Orientation Assignment</span></h4><p>At this stage, we have a set of stable keypoints for the images. We will now assign an orientation to each of these keypoints so that they are invariant to rotation. We can again divide this step into two smaller steps:</p>
<ol>
<li>Calculate the magnitude and orientation</li>
<li>Create a histogram for magnitude and orientation</li>
</ol>
<p>è®¡ç®—magnitudeå’Œorientationçš„æ–¹æ³•ä¸ HOGä¸­çš„è®¡ç®—æ–¹æ³•ç±»ä¼¼ï¼Œå…·ä½“è®¡ç®—è¿‡ç¨‹è§<a href="https://www.analyticsvidhya.com/blog/2019/10/detailed-guide-powerful-sift-technique-image-matching-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">è¿™é‡Œ</a>.</p>
<blockquote>
<p><em>The magnitude represents the intensity of the pixel and the orientation gives the direction for the same.</em></p>
</blockquote>
<h5 id="Creating-a-Histogram-for-Magnitude-and-Orientation"><a href="#Creating-a-Histogram-for-Magnitude-and-Orientation" class="headerlink" title="Creating a Histogram for Magnitude and Orientation"></a>Creating a Histogram for Magnitude and Orientation</h5><p>On the x-axis, we will have bins for angle values, like 0-9, 10 â€“ 19, 20-29, up to 360. Since our angle value is 57, it will fall in the 6th bin. The 6th bin value will be in proportion to the magnitude of the pixel, i.e. 16.64.  We will do this for all the pixels around the keypoint.</p>
<p>This is how we get the below histogram:</p>
<p><img src="/2020/02/18/Computer-Vision/Screenshot-from-2019-09-26-18-53-12.webp" alt="Screenshot-from-2019-09-26-18-53-12"></p>
<p><em>You can refer to this article for a much detailed explanation for calculating the gradient, magnitude, orientation and plotting histogram â€“ <a href="https://www.analyticsvidhya.com/blog/2019/09/feature-engineering-images-introduction-hog-feature-descriptor/" target="_blank" rel="noopener">A Valuable Introduction to the Histogram of Oriented Gradients.</a></em></p>
<p>This histogram would peak at some point. <strong>The bin at which we see the peak will be the orientation for the keypoint.</strong> Additionally, if there is another significant peak (seen between 80 â€“ 100%), then another keypoint is generated with the magnitude and scale the same as the keypoint used to generate the histogram. And the angle or orientation will be equal to the new bin that has the peak.</p>
<p>Effectively at this point, we can say that there can be a small increase in the number of keypoints.</p>
<h4 id="2-3-5-Keypoint-Descriptor"><a href="#2-3-5-Keypoint-Descriptor" class="headerlink" title="2.3.5 Keypoint Descriptor"></a><span id="jump2.3.5">2.3.5 Keypoint Descriptor</span></h4><p>This is the final step for SIFT. So far, we have stable keypoints that are scale-invariant and rotation invariant. In this section, we will use the neighboring pixels, their orientations, and magnitude, to generate a unique fingerprint for this keypoint called a â€˜descriptorâ€™.</p>
<p>Additionally, since we use the surrounding pixels, the descriptors will be partially invariant to illumination or brightness of the images.</p>
<p>We will first take a 16Ã—16 neighborhood around the keypoint. This 16Ã—16 block is further divided into 4Ã—4 sub-blocks and for each of these sub-blocks, we generate the histogram using magnitude and orientation.</p>
<p><img src="/2020/02/18/Computer-Vision/Screenshot-from-2019-09-26-20-10-52.webp" alt="Screenshot-from-2019-09-26-20-10-52"></p>
<p>At this stage, the bin size is increased and we take only 8 bins (not 36). Each of these arrows represents the 8 bins and the length of the arrows define the magnitude. So, we will have a total of 128 bin values for every keypoint.</p>
<p>Here is an example:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 </span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment">#reading image</span></span><br><span class="line">img1 = cv2.imread(<span class="string">'eiffel_2.jpeg'</span>)  </span><br><span class="line">gray1 = cv2.cvtColor(img1, cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line"><span class="comment">#keypoints</span></span><br><span class="line">sift = cv2.xfeatures2d.SIFT_create()</span><br><span class="line">keypoints_1, descriptors_1 = sift.detectAndCompute(img1,<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">img_1 = cv2.drawKeypoints(gray1,keypoints_1,img1)</span><br><span class="line">plt.imshow(img_1)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/18/Computer-Vision/index_41.webp" alt="index_41"></p>
<h4 id="2-3-6-Feature-Matching-ä»£ç "><a href="#2-3-6-Feature-Matching-ä»£ç " class="headerlink" title="2.3.6 Feature Matching (ä»£ç )"></a>2.3.6 Feature Matching (ä»£ç )</h4><p>We will now use the SIFT features for feature matching. For this purpose, I have downloaded two images of the Eiffel Tower, taken from different positions. You can try it with any two images that you want. <br>Here are the two images that I have used:</p>
<p><span style="background:yellow">reading_image_eiffel.py</span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 </span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment"># read images</span></span><br><span class="line">img1 = cv2.imread(<span class="string">'eiffel_2.jpeg'</span>)  </span><br><span class="line">img2 = cv2.imread(<span class="string">'eiffel_1.jpg'</span>) </span><br><span class="line"></span><br><span class="line">img1 = cv2.cvtColor(img1, cv2.COLOR_BGR2GRAY)</span><br><span class="line">img2 = cv2.cvtColor(img2, cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line">figure, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">16</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>].imshow(img1, cmap=<span class="string">'gray'</span>)</span><br><span class="line">ax[<span class="number">1</span>].imshow(img2, cmap=<span class="string">'gray'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/18/Computer-Vision/index_71.png" alt="index_71"></p>
<p>Now, for both these images, we are going to generate the SIFT features. First, we have to construct a SIFT object and then use the function <em>detectAndCompute</em> to get the keypoints. It will return two values â€“ the keypoints and the descriptors.</p>
<p>Letâ€™s determine the keypoints and print the total number of keypoints found in each image:</p>
<p><span style="background:yellow">keypoints_shape.py</span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 </span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment"># read images</span></span><br><span class="line">img1 = cv2.imread(<span class="string">'eiffel_2.jpeg'</span>)  </span><br><span class="line">img2 = cv2.imread(<span class="string">'eiffel_1.jpg'</span>) </span><br><span class="line"></span><br><span class="line">img1 = cv2.cvtColor(img1, cv2.COLOR_BGR2GRAY)</span><br><span class="line">img2 = cv2.cvtColor(img2, cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line"><span class="comment">#sift</span></span><br><span class="line">sift = cv2.xfeatures2d.SIFT_create()</span><br><span class="line"></span><br><span class="line">keypoints_1, descriptors_1 = sift.detectAndCompute(img1,<span class="literal">None</span>)</span><br><span class="line">keypoints_2, descriptors_2 = sift.detectAndCompute(img2,<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">len(keypoints_1), len(keypoints_2)</span><br></pre></td></tr></table></figure>
<p>283, 540</p>
<p>Next, letâ€™s try and match the features from image 1 with features from image 2. We will be using the function <em>match()</em> from the <em>BFmatcher</em> (brute force match) module. Also, we will draw lines between the features that match in both the images. This can be done using the <em>drawMatches</em> function in OpenCV.</p>
<p><span style="background:yellow">feature_matching.py</span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 </span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment"># read images</span></span><br><span class="line">img1 = cv2.imread(<span class="string">'eiffel_2.jpeg'</span>)  </span><br><span class="line">img2 = cv2.imread(<span class="string">'eiffel_1.jpg'</span>) </span><br><span class="line"></span><br><span class="line">img1 = cv2.cvtColor(img1, cv2.COLOR_BGR2GRAY)</span><br><span class="line">img2 = cv2.cvtColor(img2, cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line"><span class="comment">#sift</span></span><br><span class="line">sift = cv2.xfeatures2d.SIFT_create()</span><br><span class="line"></span><br><span class="line">keypoints_1, descriptors_1 = sift.detectAndCompute(img1,<span class="literal">None</span>)</span><br><span class="line">keypoints_2, descriptors_2 = sift.detectAndCompute(img2,<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#feature matching</span></span><br><span class="line">bf = cv2.BFMatcher(cv2.NORM_L1, crossCheck=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">matches = bf.match(descriptors_1,descriptors_2)</span><br><span class="line">matches = sorted(matches, key = <span class="keyword">lambda</span> x:x.distance)</span><br><span class="line"></span><br><span class="line">img3 = cv2.drawMatches(img1, keypoints_1, img2, keypoints_2, matches[:<span class="number">50</span>], img2, flags=<span class="number">2</span>)</span><br><span class="line">plt.imshow(img3),plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/18/Computer-Vision/index_61.webp" alt="index_61"></p>
<p>I have plotted only 50 matches here for clarityâ€™s sake. You can increase the number according to what you prefer. To find out how many keypoints are matched, we can print the length of the variable <em>matches</em>. In this case, the answer would be 190.</p>
<h4 id="2-3-7-End-Notes"><a href="#2-3-7-End-Notes" class="headerlink" title="2.3.7 End Notes"></a>2.3.7 End Notes</h4><p>In this article, we discussed the SIFT feature matching algorithm in detail. Here is a site that provides excellent visualization for each step of SIFT. You can add your own image and it will create the keypoints for that image as well. Check it out <a href="http://weitz.de/sift/" target="_blank" rel="noopener">here</a>.</p>
<p>Another popular feature matching algorithm is SURF (Speeded Up Robust Feature), which is simply a faster version of SIFT. I would encourage you to go ahead and explore it as well.</p>
<p>And if youâ€™re new to the world of computer vision and image data, I recommend checking out the below course:</p>
<ul>
<li><a href="https://courses.analyticsvidhya.com/courses/computer-vision-using-deep-learning-version2?utm_source=blog&amp;utm_medium=detailed-guide-powerful-sift-technique-image-matching-python" target="_blank" rel="noopener">Computer Vision using Deep Learning 2.0</a></li>
</ul>
<h2 id="3-Image-Classification-using-Logistic-Regression"><a href="#3-Image-Classification-using-Logistic-Regression" class="headerlink" title="3. Image Classification using Logistic Regression"></a>3. Image Classification using Logistic Regression</h2><ul>
<li><p>Python:</p>
<p>kaggle kernel: used grid search method in logistic regression to classify rooms as messy or clean.</p>
</li>
</ul>
<p>å®Œæ•´ä»£ç è§ï¼š<a href="https://www.kaggle.com/gulsahdemiryurek/image-classification-with-logistic-regression/notebook" target="_blank" rel="noopener">https://www.kaggle.com/gulsahdemiryurek/image-classification-with-logistic-regression/notebook</a></p>
<p>å¯¹å›¾ç‰‡çš„å¤§è‡´å¤„ç†ï¼šï¼ˆåœ¨è¿™é‡Œï¼Œå…ˆä¸çº ç»“train/val/testç­‰ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># linear algebra</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># data processing, CSV file I/O (e.g. pd.read_csv)</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> cv2 </span><br><span class="line"><span class="keyword">import</span> os </span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> shuffle </span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm </span><br><span class="line"></span><br><span class="line">train_messy = <span class="string">"../input/images/images/train/messy"</span></span><br><span class="line">train_clean= <span class="string">"../input/images/images/train/clean"</span></span><br><span class="line">test_messy= <span class="string">"../input/images/images/val/messy"</span></span><br><span class="line">test_clean= <span class="string">"../input/images/images/val/clean"</span></span><br><span class="line">image_size = <span class="number">128</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_data</span><span class="params">()</span>:</span></span><br><span class="line">    train_data_messy = [] </span><br><span class="line">    train_data_clean=[]</span><br><span class="line">    <span class="keyword">for</span> image1 <span class="keyword">in</span> tqdm(os.listdir(train_messy)): </span><br><span class="line">        path = os.path.join(train_messy, image)</span><br><span class="line">        img1 = cv2.imread(path, cv2.IMREAD_GRAYSCALE) </span><br><span class="line">        img1 = cv2.resize(img1, (image_size, image_size))</span><br><span class="line">        train_data_messy.append(img1) </span><br><span class="line">    <span class="keyword">for</span> image2 <span class="keyword">in</span> tqdm(os.listdir(train_clean)): </span><br><span class="line">        path = os.path.join(train_clean, image)</span><br><span class="line">        img2 = cv2.imread(path, cv2.IMREAD_GRAYSCALE) </span><br><span class="line">        img2 = cv2.resize(img2, (image_size, image_size))</span><br><span class="line">        train_data_clean.append(img2) </span><br><span class="line">    </span><br><span class="line">    train_data= np.concatenate((np.asarray(train_data_messy),np.asarray(train_data_clean)),axis=<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> train_data </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_data</span><span class="params">()</span>:</span></span><br><span class="line">    test_data_messy = [] </span><br><span class="line">    test_data_clean=[]</span><br><span class="line">    <span class="keyword">for</span> image1 <span class="keyword">in</span> tqdm(os.listdir(test_messy)): </span><br><span class="line">        path = os.path.join(test_messy, image1)</span><br><span class="line">        img1 = cv2.imread(path, cv2.IMREAD_GRAYSCALE) </span><br><span class="line">        img1 = cv2.resize(img1, (image_size, image_size))</span><br><span class="line">        test_data_messy.append(img1) </span><br><span class="line">    <span class="keyword">for</span> image2 <span class="keyword">in</span> tqdm(os.listdir(test_clean)): </span><br><span class="line">        path = os.path.join(test_clean, image2)</span><br><span class="line">        img2 = cv2.imread(path, cv2.IMREAD_GRAYSCALE) </span><br><span class="line">        img2 = cv2.resize(img2, (image_size, image_size))</span><br><span class="line">        test_data_clean.append(img2) </span><br><span class="line">    </span><br><span class="line">    test_data= np.concatenate((np.asarray(test_data_messy),np.asarray(test_data_clean)),axis=<span class="number">0</span>) </span><br><span class="line">    <span class="keyword">return</span> test_data</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train_data = train_data() </span><br><span class="line">test_data = test_data()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x_train_flatten = train_data.reshape(train_data.shape[<span class="number">0</span>],train_data.shape[<span class="number">1</span>]*train_data.shape[<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<p>Grid search:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line">grid=&#123;<span class="string">"C"</span>:np.logspace(<span class="number">-3</span>,<span class="number">3</span>,<span class="number">7</span>),<span class="string">"penalty"</span>:[<span class="string">"l1"</span>,<span class="string">"l2"</span>]&#125;,</span><br><span class="line">logistic_regression=LogisticRegression(random_state=<span class="number">42</span>)</span><br><span class="line">log_reg_cv=GridSearchCV(logistic_regression,grid,cv=<span class="number">10</span>)</span><br><span class="line">log_reg_cv.fit(x_train_flatten, y_train)</span><br></pre></td></tr></table></figure>
<ul>
<li>C: <a href="https://mmlind.github.io/Using_Logistic_Regression_to_solve_MNIST/" target="_blank" rel="noopener">Using Logistic regression to classify images</a> (MNIST data)</li>
</ul>
<h2 id="4-Project-1-Identify-the-Apparels-æœè£…"><a href="#4-Project-1-Identify-the-Apparels-æœè£…" class="headerlink" title="4. Project 1- Identify the Apparels (æœè£…)"></a>4. Project 1- Identify the Apparels (æœè£…)</h2><p><a href="https://datahack.analyticsvidhya.com/contest/practice-problem-identify-the-apparels/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://datahack.analyticsvidhya.com/contest/practice-problem-identify-the-apparels/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<p><img src="/2020/02/18/Computer-Vision/1582027636102.png" alt="1582027636102"></p>
<p>More than 25% of entire revenue in E-Commerce is attributed to apparels &amp; accessories. A major problem they face is categorizing these apparels from just the images especially when the categories provided by the brands are inconsistent. This poses an interesting computer vision problem which has caught the eyes of several deep learning researchers.</p>
<p>Fashion MNIST is a drop-in replacement for the very well known, machine learning hello world - MNIST dataset which can be checked out at <a href="https://datahack.analyticsvidhya.com/contest/practice-problem-identify-the-digits/" target="_blank" rel="noopener">â€˜Identify the digitsâ€™</a> practice problem. Instead of digits, the images show a type of apparel e.g. T-shirt, trousers, bag, etc. The dataset used in this problem was created by Zalando Research. More details can be found at this <a href="https://github.com/zalandoresearch/fashion-mnist" target="_blank" rel="noopener">link</a>.</p>
<h2 id="5-Introduction-to-Keras-amp-Neural-Networks"><a href="#5-Introduction-to-Keras-amp-Neural-Networks" class="headerlink" title="5. Introduction to Keras &amp; Neural Networks"></a>5. Introduction to Keras &amp; Neural Networks</h2><h3 id="5-1-Keras"><a href="#5-1-Keras" class="headerlink" title="5.1 Keras"></a>5.1 Keras</h3><p>Keras is one of the most commonly used deep learning tools.</p>
<ul>
<li><a href="https://keras.io/" target="_blank" rel="noopener">Keras Documentation</a> (Keraså®˜æ–¹æ–‡æ¡£)</li>
<li><a href="https://www.analyticsvidhya.com/blog/2016/10/tutorial-optimizing-neural-networks-using-keras-with-image-recognition-case-study/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">Neural Networks using Keras</a> (MNIST)</li>
</ul>
<h3 id="5-2-Neural-Network"><a href="#5-2-Neural-Network" class="headerlink" title="5.2 Neural Network"></a>5.2 Neural Network</h3><ul>
<li><p><a href="https://www.analyticsvidhya.com/blog/2017/05/neural-network-from-scratch-in-python-and-r/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">Neural Networks from Scratch</a></p>
</li>
<li><p>Introduction to Neural Networks by Stanford:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/d14TUNcbn1k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</li>
</ul>
<ul>
<li><p>Neural Networks by 3Blue1Brown:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/aircAruvnKk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

</li>
</ul>
<h2 id="6-Project-1-Identify-the-Apparels"><a href="#6-Project-1-Identify-the-Apparels" class="headerlink" title="6. Project 1 - Identify the Apparels"></a>6. Project 1 - Identify the Apparels</h2><p>åŒç¬¬4éƒ¨åˆ†</p>
<h2 id="7-Understanding-Convolutional-Neural-Networks-CNNs-Transfer-Learning"><a href="#7-Understanding-Convolutional-Neural-Networks-CNNs-Transfer-Learning" class="headerlink" title="7. Understanding Convolutional Neural Networks (CNNs), Transfer Learning"></a>7. Understanding Convolutional Neural Networks (CNNs), Transfer Learning</h2><h3 id="7-1-Introduction-to-Convolutional-Neural-Networks-CNNs"><a href="#7-1-Introduction-to-Convolutional-Neural-Networks-CNNs" class="headerlink" title="7.1 Introduction to Convolutional Neural Networks (CNNs):"></a>7.1 <strong>Introduction to Convolutional Neural Networks (CNNs):</strong></h3><ul>
<li><p><a href="https://www.analyticsvidhya.com/blog/2017/06/architecture-of-convolutional-neural-networks-simplified-demystified/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">Convolutional Neural Networks (CNNs) Simplified</a></p>
</li>
<li><p>Convolutional Neural Networks by Stanford:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/bNb2fEVKeEo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


</li>
</ul>
<h3 id="7-2-Introduction-to-Transfer-Learning"><a href="#7-2-Introduction-to-Transfer-Learning" class="headerlink" title="7.2 Introduction to Transfer Learning:"></a>7.2 <strong>Introduction to Transfer Learning:</strong></h3><h4 id="7-2-1-Master-Transfer-Learning"><a href="#7-2-1-Master-Transfer-Learning" class="headerlink" title="7.2.1 Master Transfer Learning"></a>7.2.1 Master Transfer Learning</h4><p><a href="https://www.analyticsvidhya.com/blog/2017/06/transfer-learning-the-art-of-fine-tuning-a-pre-trained-model/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2017/06/transfer-learning-the-art-of-fine-tuning-a-pre-trained-model/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<p>è®­ç»ƒç¥ç»ç½‘ç»œæœ‰æ—¶éœ€è¦å¾ˆå¤šçš„èµ„æºï¼ˆRAM, GPUsï¼‰, RAM on a machine is cheap and is available in plenty, but access to GPUs is not that cheap. </p>
<p>Now, that may change in future. But for now, it means that we have to be smarter about the way we use our resources in solving Deep Learning problems. Especially so, when we try to solve complex real life problems on areas like image and voice recognition. Once you have a few hidden layers in your model, adding another layer of hidden layer would need immense resources.</p>
<p>Thankfully, there is something called â€œTransfer Learningâ€ which enables us to <strong>use pre-trained models from other people by making small changes.</strong> In this article, I am going to tell how we can use pre-trained models to accelerate our solutions.</p>
<ul>
<li><strong>What is transfer learning?</strong></li>
</ul>
<p>A neural network is trained on a data. This network gains knowledge from this data, which is compiled as â€œweightsâ€ of the network. <span style="color:red">These weights can be extracted and then transferred to any other neural network.</span> Instead of training the other neural network from scratch, we <strong>â€œtransferâ€</strong> the learned features.</p>
<ul>
<li><strong>What is a Pre-trained Model?</strong></li>
</ul>
<p>Simply put, a pre-trained model is a model created by some one else to solve a similar problem. Instead of building a model from scratch to solve a similar problem, you use the model trained on other problem as a starting point.<br>For example, if you want to build a self learning car. You can spend years to build a decent image recognition algorithm from scratch or you can take inception model (a pre-trained model) from Google which was built on ImageNet data to identify images in those pictures.<br>A pre-trained model may not be 100% accurate in your application, but it saves huge efforts required to re-invent the wheel. </p>
<p>ä½¿ç”¨pre-trained modelä¸ä»…èƒ½èŠ‚çº¦è®­ç»ƒæ—¶é—´ï¼Œè¿˜èƒ½å¾—åˆ°æ›´é«˜çš„å‡†ç¡®ç‡</p>
<ul>
<li><strong>How can I use Pre-trained Models?</strong></li>
</ul>
<p> By using pre-trained models which have been previously trained on large datasets, we can directly use the weights and architecture obtained and apply the learning on our problem statement. This is known as transfer learning. We â€œtransfer the learningâ€ of the pre-trained model to our specific problem statement.</p>
<p>You should be very careful while choosing what pre-trained model you should use in your case. If the problem statement we have at hand is very different from the one on which the pre-trained model was trained â€“ the prediction we would get would be very inaccurate. For example, a model previously trained for speech recognition would work horribly if we try to use it to identify objects using it.</p>
<p>We are lucky that many pre-trained architectures are directly available for us in the Keras library. <strong>Imagenet</strong> data set has been widely used to build various architectures since it is large enough (1.2M images) to create a generalized model. The problem statement is to train a model that can correctly classify the images into 1,000 separate object categories. These 1,000 image categories represent object classes that we come across in our day-to-day lives, such as species of dogs, cats, various household objects, vehicle types etc.</p>
<p>These pre-trained networks demonstrate a strong ability to generalize to images outside the ImageNet dataset via transfer learning. <strong>We make modifications in the pre-existing model by fine-tuning the model. </strong>Since we assume that the pre-trained network has been trained quite well, we would not want to modify the weights too soon and too much. While modifying we generally use a learning rate smaller than the one used for initially training the model.</p>
<ul>
<li><p><strong>Ways to Fine tune the model</strong></p>
<ol>
<li><strong>Feature extraction</strong> â€“ We can use a pre-trained model as a feature extraction mechanism. What we can do is that we can remove the output layer( the one which gives the probabilities for being in each of the 1000 classes) and then use the entire network as a fixed feature extractor for the new data set.</li>
<li><strong>Use the Architecture of the pre-trained model â€“</strong> What we can do is that we use architecture of the model while we initialize all the weights randomly and train the model according to our dataset again.</li>
<li><strong>Train some layers while freeze others</strong> â€“ Another way to use a pre-trained model is to train is partially. What we can do is we keep the weights of initial layers of the model frozen while we retrain only the higher layers. We can try and test as to how many layers to be frozen and how many to be trained.</li>
</ol>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2017/05/31112715/finetune1-300x270.jpg"></p>
</li>
</ul>
<p><strong>Scenario 1 â€“ Size of the Data set is small while the Data similarity is very high â€“</strong> In this case, since the data similarity is very high, we do not need to retrain the model. All we need to do is to customize and modify the output layers according to our problem statement. We use the pretrained model as a feature extractor. Suppose we decide to use models trained on Imagenet to identify if the new set of images have cats or dogs. Here the images we need to identify would be similar to imagenet, however we just need two categories as my output â€“ cats or dogs. In this case all we do is just modify the dense layers and the final softmax layer to output 2 categories instead of a 1000.</p>
<p><strong>Scenario 2 â€“ Size of the data is small as well as data similarity is very low</strong> â€“ In this case we can freeze the initial (letâ€™s say k) layers of the pretrained model and train just the remaining(n-k) layers again. The top layers would then be customized to the new data set. Since the new data set has low similarity it is significant to retrain and customize the higher layers according to the new dataset.  The small size of the data set is compensated by the fact that the initial layers are kept pretrained(which have been trained on a large dataset previously) and the weights for those layers are frozen.</p>
<p><strong>Scenario 3 â€“ Size of the data set is large however the Data similarity is very low</strong> â€“ In this case, since we have a large dataset, our neural network training would be effective. However, since the data we have is very different as compared to the data used for training our pretrained models. The predictions made using pretrained models would not be effective. Hence, its best to train the neural network from scratch according to your data.</p>
<p><strong>Scenario 4 â€“ Size of the data is large as well as there is high data similarity â€“</strong> This is the ideal situation. In this case the pretrained model should be most effective. The best way to use the model is to retain the architecture of the model and the initial weights of the model. Then we can retrain this model using the weights as initialized in the pre-trained model.</p>
<blockquote>
<p>There are various architectures that have been trained on the imageNet data set. You can go through various architectures <a href="http://www.pyimagesearch.com/2017/03/20/imagenet-vggnet-resnet-inception-xception-keras/" target="_blank" rel="noopener">here</a>.</p>
</blockquote>
<p><span style="background:yellow">ä»£ç ç¤ºä¾‹</span>ï¼š se the pre-trained models to identify handwritten digits. è§<a href="https://www.analyticsvidhya.com/blog/2017/06/transfer-learning-the-art-of-fine-tuning-a-pre-trained-model/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">è¿™é‡Œ</a></p>
<h4 id="7-2-2-ConvNets-in-Practice-by-Stanford"><a href="#7-2-2-ConvNets-in-Practice-by-Stanford" class="headerlink" title="7.2.2 ConvNets in Practice by Stanford:"></a>7.2.2 ConvNets in Practice by Stanford:</h4><iframe width="560" height="315" src="https://www.youtube.com/embed/dUTzeP_HTZg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="8-Project-2-Idendify-the-Digits"><a href="#8-Project-2-Idendify-the-Digits" class="headerlink" title="8. Project 2 - Idendify the Digits"></a>8. Project 2 - Idendify the Digits</h2><p><a href="https://datahack.analyticsvidhya.com/contest/practice-problem-identify-the-digits/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://datahack.analyticsvidhya.com/contest/practice-problem-identify-the-digits/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<p>Automatic digit recognition is of popular interest today. Deep Learning techniques makes it possible for object recognition in image data . This practice problem is meant to give you a kick start in deep learning. As usual, we will not only provide you with the challenge and a solution checker, but also a set of tutorials to get you off the ground!</p>
<p>The data set used for this problem is from the populat MNIST data set. Developed by Yann LeCun, Corina Cortes and Christopher Burger for evaluating machine learning model on the handwritten digit classification problem. It is a widely used data set in the machine learning community. For more details about the data set, read here <a href="http://bit.ly/1REjJgL" target="_blank" rel="noopener">http://bit.ly/1REjJgL</a></p>
<h2 id="9-Build-your-profile-Participate-in-competitions"><a href="#9-Build-your-profile-Participate-in-competitions" class="headerlink" title="9. Build your profile: Participate in competitions"></a>9. <strong>Build your profile: Participate in competitions</strong></h2><ul>
<li><a href="https://datahack.analyticsvidhya.com/contest/all/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">DataHack</a></li>
<li><a href="https://www.kaggle.com/competitions" target="_blank" rel="noopener">Kaggle</a></li>
</ul>
<h2 id="10-Solving-Object-Detection-problems"><a href="#10-Solving-Object-Detection-problems" class="headerlink" title="10. Solving Object Detection problems"></a>10. Solving Object Detection problems</h2><h3 id="10-1-Step-by-Step-Introduction-to-Object-Detection-Techniques"><a href="#10-1-Step-by-Step-Introduction-to-Object-Detection-Techniques" class="headerlink" title="10.1 Step-by-Step Introduction to Object Detection Techniques"></a>10.1 Step-by-Step Introduction to Object Detection Techniques</h3><p><a href="https://www.analyticsvidhya.com/blog/2018/10/a-step-by-step-introduction-to-the-basic-object-detection-algorithms-part-1/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2018/10/a-step-by-step-introduction-to-the-basic-object-detection-algorithms-part-1/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<p>The below image is a popular example of illustrating how an object detection algorithm works. Each object in the image, from a person to a kite, have been located and identified with a certain level of precision.</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/06/OD.png" alt="img"></p>
<p>Letâ€™s look at how we can solve a general object detection problem using a CNN.</p>
<ol>
<li><p>First, we take an image as input:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/I1_2009_09_08_drive_0012_001351-768x223.png" alt="img"></p>
</li>
<li><p>Then we divide the image into various regions:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-09-14-21-14.png" alt="img"></p>
</li>
<li><p>We will then consider each region as a separate image.</p>
</li>
<li><p>Pass all these regions (images) to the CNN and classify them into various classes.</p>
</li>
<li><p>Once we have divided each region into its corresponding class, we can combine all these regions to get the original image with the detected objects:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/I1_2009_09_08_drive_0012_001351-another-copy-768x223.png" alt="img"></p>
</li>
</ol>
<p>The problem with using this approach is that the objects in the image can have different aspect ratios and spatial locations. For instance, in some cases the object might be covering most of the image, while in others the object might only be covering a small percentage of the image. The shapes of the objects might also be different (happens a lot in real-life use cases).</p>
<p>As a result of these factors, we would require a very large number of regions resulting in a huge amount of computational time. So to solve this problem and reduce the number of regions, we can use region-based CNN, which selects the regions using a proposal method. Letâ€™s understand what this region-based CNN can do for us.</p>
<h4 id="10-1-1-Understanding-Region-Based-Convolutional-Neural-Network-RCNN"><a href="#10-1-1-Understanding-Region-Based-Convolutional-Neural-Network-RCNN" class="headerlink" title="10.1.1 Understanding Region-Based Convolutional Neural Network (RCNN)"></a>10.1.1 Understanding Region-Based Convolutional Neural Network (RCNN)</h4><h5 id="10-1-1-1-Intuition-of-RCNN"><a href="#10-1-1-1-Intuition-of-RCNN" class="headerlink" title="10.1.1.1 Intuition of RCNN"></a>10.1.1.1 Intuition of RCNN</h5><p>Instead of working on a massive number of regions, the RCNN algorithm proposes a bunch of boxes in the image and checks if any of these boxes contain any object. RCNN <strong>uses <span style="color:red">selective search</span> to extract these boxes from an image (these boxes are called regions).</strong></p>
<p>Letâ€™s first understand what selective search is and how it identifies the different regions. There are basically four regions that form an object: varying scales, colors, textures, and enclosure. Selective search identifies these patterns in the image and based on that, proposes various regions. <a href="https://www.analyticsvidhya.com/blog/2018/10/a-step-by-step-introduction-to-the-basic-object-detection-algorithms-part-1/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">Here is a brief overview of how selective search works.</a></p>
<p>Below is a succint summary of the steps followed in RCNN to detect objects:</p>
<ol>
<li>We first take a pre-trained convolutional neural network.</li>
<li>Then, this model is retrained. We train the last layer of the network based on the number of classes that need to be detected.</li>
<li>The third step is to get the Region of Interest for each image. We then reshape all these regions so that they can match the CNN input size.</li>
<li>After getting the regions, we train SVM to classify objects and background. For each class, we train one binary SVM.</li>
<li>Finally, we train a linear regression model to generate tighter bounding boxes for each identified object in the image.</li>
</ol>
<p>You might get a better idea of the above steps with a visual example:</p>
<ul>
<li><p>First, an image is taken as an input:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-08-14-59-02.png" alt="img"></p>
</li>
</ul>
<ul>
<li><p>Then, we get the Regions of Interest (ROI) using some proposal method (for example, selective search as seen above):</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-08-15-00-09.png" alt="img"></p>
</li>
<li><p>All these regions are then reshaped as per the input of the CNN, and each region is passed to the ConvNet:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-08-15-01-56.png" alt="img"></p>
</li>
<li><p>CNN then extracts features for each region and SVMs are used to divide these regions into different classes:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-08-15-03-02.png" alt="img"></p>
</li>
<li><p>Finally, a bounding box regression (<em>Bbox reg</em>) is used to predict the bounding boxes for each identified region:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-08-15-06-33.png" alt="img"></p>
</li>
</ul>
<p>And this, in a nutshell, is how an RCNN helps us to detect objects.</p>
<h5 id="10-1-1-2-Limitations-of-RCNN"><a href="#10-1-1-2-Limitations-of-RCNN" class="headerlink" title="10.1.1.2  Limitations of RCNN"></a>10.1.1.2  Limitations of RCNN</h5><p>Training an RCNN model is expensive and slow:</p>
<ul>
<li>Extracting 2,000 regions for each image based on selective search</li>
<li>Extracting features using CNN for every image region. Suppose we have N images, then the number of CNN features will be N*2,000</li>
<li>The entire process of object detection using RCNN has three models:<ol>
<li>CNN for feature extraction</li>
<li>Linear SVM classifier for identifying objects</li>
<li>Regression model for tightening the bounding boxes.</li>
</ol>
</li>
</ul>
<p>All these processes combine to make RCNN very slow. It takes around 40-50 seconds to make predictions for each new image, which essentially makes the model cumbersome and practically impossible to build when faced with a gigantic dataset.</p>
<p>Hereâ€™s the good news â€“ we have another object detection technique which fixes most of the limitations we saw in RCNN.</p>
<h4 id="10-1-2-Understanding-Fast-RCNN"><a href="#10-1-2-Understanding-Fast-RCNN" class="headerlink" title="10.1.2 Understanding Fast RCNN"></a>10.1.2 Understanding Fast RCNN</h4><h5 id="10-1-2-1-Intuition-of-Fast-RCNN"><a href="#10-1-2-1-Intuition-of-Fast-RCNN" class="headerlink" title="10.1.2.1 Intuition of Fast RCNN"></a>10.1.2.1 Intuition of Fast RCNN</h5><p>What else can we do to reduce the computation time a RCNN algorithm typically takes? Instead of running a CNN 2,000 times per image, we can run it just once per image and get all the regions of interest (regions containing some object).</p>
<p>In Fast RCNN, we feed the input image to the CNN, which in turn generates the convolutional feature maps. Using these maps, the regions of proposals are extracted. We then use a RoI pooling layer to reshape all the proposed regions into a fixed size, so that it can be fed into a fully connected network.</p>
<p>Letâ€™s break this down into steps to simplify the concept:</p>
<ol>
<li>As with the earlier two techniques, we take an image as an input.</li>
<li>This image is passed to a ConvNet which in turns generates the Regions of Interest.</li>
<li>A RoI pooling layer is applied on all of these regions to reshape them as per the input of the ConvNet. Then, each region is passed on to a fully connected network.</li>
<li>A softmax layer is used on top of the fully connected network to output classes. Along with the softmax layer, a linear regression layer is also used parallely to output bounding box coordinates for predicted classes.</li>
</ol>
<p>So, instead of using three different models (like in RCNN), Fast RCNN uses a single model which extracts features from the regions, divides them into different classes, and returns the boundary boxes for the identified classes simultaneously.</p>
<p>å›¾è§£ï¼š</p>
<ul>
<li><p>Taking an image as input:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-08-14-59-021.png" alt="img"></p>
</li>
<li><p>This image is passed to a ConvNet which returns the region of interests accordingly:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-08-15-44-03.png" alt="img"></p>
</li>
<li><p>Then we apply the RoI pooling layer on the extracted regions of interest to make sure all the regions are of the same size:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-08-15-45-26.png" alt="img"></p>
</li>
<li><p>Finally, these regions are passed on to a fully connected network which classifies them, as well as returns the bounding boxes using softmax and linear regression layers simultaneously:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-08-15-47-18.png" alt="img"></p>
</li>
</ul>
<p>This is how Fast RCNN resolves two major issues of RCNN, i.e., <span style="color:red">passing one instead of 2,000 regions per image to the ConvNet, and using one instead of three different models for extracting features, classification and generating bounding boxes.</span></p>
<h5 id="10-1-2-2-Limitations-of-Fast-RCNN"><a href="#10-1-2-2-Limitations-of-Fast-RCNN" class="headerlink" title="10.1.2.2 Limitations of Fast RCNN"></a>10.1.2.2 Limitations of Fast RCNN</h5><p>It also uses <strong>selective search</strong> as a proposal method to find the Regions of Interest, which is a slow and time consuming process. It takes around 2 seconds per image to detect objects, which is much better compared to RCNN. But when we consider large real-life datasets, then even a Fast RCNN doesnâ€™t look so fast anymore.</p>
<p>But thereâ€™s yet another object detection algorithm that trump Fast RCNN. </p>
<h4 id="10-1-3-Understanding-Faster-RCNN"><a href="#10-1-3-Understanding-Faster-RCNN" class="headerlink" title="10.1.3 Understanding Faster RCNN"></a>10.1.3 Understanding Faster RCNN</h4><h5 id="10-1-3-1-Intuition-of-Faster-RCNN"><a href="#10-1-3-1-Intuition-of-Faster-RCNN" class="headerlink" title="10.1.3.1 Intuition of Faster RCNN"></a>10.1.3.1 Intuition of Faster RCNN</h5><p>Faster RCNN is the modified version of Fast RCNN. The major difference between them is that Fast RCNN uses selective search for generating Regions of Interest, while Faster RCNN uses <strong>â€œRegion Proposal Networkâ€, aka RPN.</strong> RPN takes image feature maps as an input and generates a set of object proposals, each with an objectness score as output.</p>
<p>The  below steps are typically followed in a Faster RCNN approach:</p>
<ol>
<li>We take an image as input and pass it to the ConvNet which returns the feature map for that image.</li>
<li>Region proposal network is applied on these feature maps. This returns the object proposals along with their objectness score.</li>
<li>A RoI pooling layer is applied on these proposals to bring down all the proposals to the same size.</li>
<li>Finally, the proposals are passed to a fully connected layer which has a softmax layer and a linear regression layer at its top, to classify and output the bounding boxes for objects.</li>
</ol>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/10/Screenshot-from-2018-10-09-14-15-36.png" alt="img"></p>
<p><a href="https://www.analyticsvidhya.com/blog/2018/10/a-step-by-step-introduction-to-the-basic-object-detection-algorithms-part-1/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">A briefly explain how this Region Proposal Network (RPN) actually works.</a></p>
<h5 id="10-1-3-2-Limitations-of-Faster-RCNN"><a href="#10-1-3-2-Limitations-of-Faster-RCNN" class="headerlink" title="10.1.3.2 Limitations of Faster RCNN"></a>10.1.3.2 Limitations of Faster RCNN</h5><p>All of the object detection algorithms we have discussed so far use regions to identify the objects. The network does not look at the complete image in one go, but focuses on parts of the image sequentially. This creates two complications:</p>
<ul>
<li>The algorithm requires many passes through a single image to extract all the objects</li>
<li>As there are different systems working one after the other, the performance of the systems further ahead depends on how the previous systems performed</li>
</ul>
<h4 id="10-1-4-Summary"><a href="#10-1-4-Summary" class="headerlink" title="10.1.4 Summary"></a>10.1.4 Summary</h4><div class="table-container">
<table>
<thead>
<tr>
<th><strong>Algorithm</strong></th>
<th><strong>Features</strong></th>
<th><strong>Prediction time / image</strong></th>
<th><strong>Limitations</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>CNN</td>
<td>Divides the image into multiple regions and then classify each region into various classes.</td>
<td>â€“</td>
<td>Needs a lot of regions to predict accurately and hence high computation time.</td>
</tr>
<tr>
<td>RCNN</td>
<td>Uses selective search to generate regions. Extracts around 2000 regions from each image.</td>
<td>40-50 seconds</td>
<td>High computation time as each region is passed to the CNN separately also it uses three different model for making predictions.</td>
</tr>
<tr>
<td>Fast RCNN</td>
<td>Each image is passed only once to the CNN and feature maps are extracted. Selective search is used on these maps to generate predictions. Combines all the three models used in RCNN together.</td>
<td>2 seconds</td>
<td>Selective search is slow and hence computation time is still high.</td>
</tr>
<tr>
<td>Faster RCNN</td>
<td>Replaces the selective search method with region proposal network which made the algorithm much faster.</td>
<td>0.2 seconds</td>
<td>Object proposal takes time and as there are different systems working one after the other, the performance of systems depends on how the previous system has performed.</td>
</tr>
</tbody>
</table>
</div>
<h3 id="10-2-Implementing-Faster-RCNN-for-Object-Detection-ä»£ç "><a href="#10-2-Implementing-Faster-RCNN-for-Object-Detection-ä»£ç " class="headerlink" title="10.2 Implementing Faster RCNN for Object Detection (ä»£ç )"></a>10.2 Implementing Faster RCNN for Object Detection (ä»£ç )</h3><p><a href="https://www.analyticsvidhya.com/blog/2018/11/implementation-faster-r-cnn-python-object-detection/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2018/11/implementation-faster-r-cnn-python-object-detection/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a>)</p>
<h3 id="10-3-Object-Detection-using-YOLO-å«ä»£ç "><a href="#10-3-Object-Detection-using-YOLO-å«ä»£ç " class="headerlink" title="10.3 Object Detection using YOLO (å«ä»£ç )"></a>10.3 Object Detection using YOLO (å«ä»£ç )</h3><p>è¯¦ç»†ä»‹ç»è§è¿™é‡Œï¼š<a href="https://www.analyticsvidhya.com/blog/2018/12/practical-guide-object-detection-yolo-framewor-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2018/12/practical-guide-object-detection-yolo-framewor-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<p>The R-CNN family of techniques we saw in Part 1 primarily use regions to localize the objects within the image. The network does not look at the entire image, only at the parts of the images which have a higher chance of containing an object.</p>
<p>The YOLO framework (You Only Look Once) on the other hand, deals with object detection in a different way. It takes the entire image in a single instance and predicts the bounding box coordinates and class probabilities for these boxes. <strong>The biggest advantage of using YOLO is its superb speed</strong> â€“ itâ€™s incredibly fast and can process 45 frames per second. YOLO also understands generalized object representation.</p>
<blockquote>
<p>YOLO is a state-of-the-art object detection algorithm that is incredibly fast and accurate</p>
</blockquote>
<p>_<strong>Training</strong>_</p>
<p>The input for training our model will obviously be images and their corresponding y labels. Letâ€™s see an image and make its y label:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2018/12/Screenshot-from-2018-11-17-15-02-11.png" alt="img"></p>
<p>Consider the scenario where we are using a 3 X 3 grid with two anchors per grid, and there are 3 different object classes. So the corresponding y labels will have a shape of 3 X 3 X 16. Now, suppose if we use 5 anchor boxes per grid and the number of classes has been increased to 5. So the target will be 3 X 3 X 10 X 5 = 3 X 3 X 50. This is how the training process is done â€“ taking an image of a particular shape and mapping it with a 3 X 3 X 16 target (this may change as per the grid size, number of anchor boxes and the number of classes).</p>
<p><strong>_Testing_</strong></p>
<p>The new image will be divided into the same number of grids which we have chosen during the training period. For each grid, the model will predict an output of shape 3 X 3 X 16 (assuming this is the shape of the target during training time). The 16 values in this prediction will be in the same format as that of the training label. The first 8 values will correspond to anchor box 1, where the first value will be the probability of an object in that grid. Values 2-5 will be the bounding box coordinates for that object, and the last three values will tell us which class the object belongs to. The next 8 values will be for anchor box 2 and in the same format, i.e., first the probability, then the bounding box coordinates, and finally the classes.</p>
<p>Finally, the Non-Max Suppression technique will be applied on the predicted boxes to obtain a single prediction per object.</p>
<p>That brings us to the end of the theoretical aspect of understanding how the YOLO algorithm works, starting from training the model and then generating prediction boxes for the objects. Below are the exact dimensions and steps that the YOLO algorithm follows:</p>
<ul>
<li>Takes an input image of shape (608, 608, 3)</li>
<li>Passes this image to a convolutional neural network (CNN), which returns a (19, 19, 5, 85) dimensional output</li>
<li>The last two dimensions of the above output are flattened to get an output volume of (19, 19, 425):<ul>
<li>Here, each cell of a 19 X 19 grid returns 425 numbers</li>
<li>425 = 5 * 85, where 5 is the number of anchor boxes per grid</li>
<li>85 = 5 + 80, where 5 is (pc, bx, by, bh, bw) and 80 is the number of classes we want to detect</li>
</ul>
</li>
<li>Finally, we do the IoU and Non-Max Suppression to avoid selecting overlapping boxes</li>
</ul>
<h3 id="10-4-Object-detection-by-Stanford"><a href="#10-4-Object-detection-by-Stanford" class="headerlink" title="10.4 Object detection by Stanford:"></a>10.4 Object detection by Stanford:</h3><p><iframe width="560" height="315" src="https://www.youtube.com/embed/nDPWywWRIRo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
<h3 id="10-5-å…¶ä»–Resources"><a href="#10-5-å…¶ä»–Resources" class="headerlink" title="10.5 å…¶ä»–Resources"></a>10.5 å…¶ä»–Resources</h3><ul>
<li><a href="https://arxiv.org/pdf/1506.02640.pdf" target="_blank" rel="noopener">YOLO Paper</a></li>
<li><a href="https://pjreddie.com/darknet/yolo/" target="_blank" rel="noopener">YOLO Pre-Trained Models</a></li>
</ul>
<h2 id="11-Project-3-Face-Counting-Challenge"><a href="#11-Project-3-Face-Counting-Challenge" class="headerlink" title="11. Project 3 - Face Counting Challenge"></a>11. Project 3 - Face Counting Challenge</h2><p><a href="https://datahack.analyticsvidhya.com/contest/vista-codefest-computer-vision-1/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://datahack.analyticsvidhya.com/contest/vista-codefest-computer-vision-1/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<h2 id="12-Project-4-COCO-Object-Detection-Challenge"><a href="#12-Project-4-COCO-Object-Detection-Challenge" class="headerlink" title="12. Project 4 - COCO Object Detection Challenge"></a>12. Project 4 - COCO Object Detection Challenge</h2><p><a href="http://cocodataset.org/#download" target="_blank" rel="noopener">http://cocodataset.org/#download</a></p>
<h2 id="13-Image-Segmentation"><a href="#13-Image-Segmentation" class="headerlink" title="13. Image Segmentation"></a>13. Image Segmentation</h2><h3 id="13-1-A-Step-by-Step-Introduction-to-Image-Segmentation-Techniques"><a href="#13-1-A-Step-by-Step-Introduction-to-Image-Segmentation-Techniques" class="headerlink" title="13.1 A Step-by-Step Introduction to Image Segmentation Techniques"></a>13.1 A Step-by-Step Introduction to Image Segmentation Techniques</h3><p><a href="https://www.analyticsvidhya.com/blog/2019/04/introduction-image-segmentation-techniques-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2019/04/introduction-image-segmentation-techniques-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<h4 id="13-1-1-What-is-Image-Segmentation"><a href="#13-1-1-What-is-Image-Segmentation" class="headerlink" title="13.1.1 What is Image Segmentation?"></a>13.1.1 What is Image Segmentation?</h4><p>An image is a collection or set of different pixels. We group together the pixels that have similar attributes using image segmentation. Take a moment to go through the below visual (itâ€™ll give you a practical idea of image segmentation):</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/03/instance_segmentation_example.jpg" alt="object detection and instance segmentation"></p>
<p>Object detection builds a bounding box corresponding to each class in the image. But it tells us nothing about the shape of the object. We only get the set of bounding box coordinates. We want to get more information â€“ this is too vague for our purposes.</p>
<p><span style="color:red">Image segmentation creates a pixel-wise mask for each object in the image.</span> This technique gives us a far more granular understanding of the object(s) in the image.</p>
<h4 id="13-1-2-Why-do-we-need-Image-Segmentation"><a href="#13-1-2-Why-do-we-need-Image-Segmentation" class="headerlink" title="13.1.2 Why do we need Image Segmentation?"></a>13.1.2 Why do we need Image Segmentation?</h4><p>Cancer has long been a deadly illness. Even in todayâ€™s age of technological advancements, cancer can be fatal if we donâ€™t identify it at an early stage. Detecting cancerous cell(s) as quickly as possible can potentially save millions of lives.</p>
<p>The shape of the cancerous cells plays a vital role in determining the severity of the cancer. You might have put the pieces together â€“ object detection will not be very useful here. We will only generate bounding boxes which will not help us in identifying the shape of the cells.</p>
<p>Image Segmentation techniques make a MASSIVE impact here. They help us approach this problem in a more granular manner and get more meaningful results. A win-win for everyone in the healthcare industry.</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/03/cancer-cell-segmentation.png" alt="cancer cell segmentation"></p>
<p>There are many other applications where Image segmentation is transforming industries:</p>
<ul>
<li>Traffic Control Systems</li>
<li>Self Driving Cars</li>
<li>Locating objects in satellite images</li>
</ul>
<h4 id="13-1-3-The-Different-Types-of-Image-Segmentation"><a href="#13-1-3-The-Different-Types-of-Image-Segmentation" class="headerlink" title="13.1.3 The Different Types of Image Segmentation"></a>13.1.3 The Different Types of Image Segmentation</h4><p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/03/Screenshot-from-2019-03-28-12-08-09.png" alt="semantic and instance segmentation"></p>
<p>If there are 5 people in an image, semantic segmentation will focus on classifying all the people as a single instance. Instance segmentation, on the other hand. will identify each of these people individually.</p>
<h4 id="13-1-4-Region-based-Segmentation-Threshold"><a href="#13-1-4-Region-based-Segmentation-Threshold" class="headerlink" title="13.1.4 Region-based Segmentation (Threshold)"></a>13.1.4 Region-based Segmentation (Threshold)</h4><p>One simple way to segment different objects could be to use their pixel values. An important point to note â€“ the pixel values will be different for the objects and the imageâ€™s background if thereâ€™s a sharp contrast between them.</p>
<p>In this case, we can set a threshold value. The pixel values falling below or above that threshold can be classified accordingly (as an object or the background). This technique is known as <strong>Threshold Segmentation</strong>.</p>
<blockquote>
<p>If we want to divide the image into two regions (object and background), we define a single threshold value. This is known as the <strong>global threshold</strong>.</p>
<p>If we have multiple objects along with the background, we must define multiple thresholds. These thresholds are collectively known as the <strong>local threshold</strong>.</p>
</blockquote>
<p><span style="background:yellow">ä»£ç è§<a href="https://www.analyticsvidhya.com/blog/2019/04/introduction-image-segmentation-techniques-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">è¿™é‡Œ</a>.</span></p>
<p>You can set different threshold values and check how the segments are made. Some of the advantages of this method are:</p>
<ul>
<li>Calculations are simpler</li>
<li>Fast operation speed</li>
<li>When the object and background have high contrast, this method performs really well</li>
</ul>
<p>But there are some limitations to this approach. When we donâ€™t have significant grayscale difference, or there is an overlap of the grayscale pixel values, it becomes very difficult to get accurate segments.</p>
<h4 id="13-1-5-Edge-Detection-Segmentation"><a href="#13-1-5-Edge-Detection-Segmentation" class="headerlink" title="13.1.5 Edge Detection Segmentation"></a>13.1.5 Edge Detection Segmentation</h4><p>What divides two objects in an image? There is always an edge between two adjacent regions with different grayscale values (pixel values). The edges can be considered as the discontinuous local features of an image.</p>
<p>We can make use of this discontinuity to detect edges and hence define a boundary of the object. This helps us in detecting the shapes of multiple objects present in a given image. Now the question is how can we detect these edges? This is where we can make use of <span style="color:red">filters and convolutions</span>. Refer to <a href="https://www.analyticsvidhya.com/blog/2017/06/architecture-of-convolutional-neural-networks-simplified-demystified/?utm_source=blog&amp;utm_medium=image-segmentation-article" target="_blank" rel="noopener">this article</a> if you need to learn about these concepts.</p>
<p>Researchers have found that choosing some specific values for these weight matrices (filters) helps us to detect horizontal or vertical edges (or even the combination of horizontal and vertical edges).</p>
<p>One such weight matrix is the sobel operator. It is typically used to detect edges. </p>
<p><img src="/2020/02/18/Computer-Vision/1582182873707.png" alt="1582182873707"></p>
<p>There is one more type of filter that can detect both horizontal and vertical edges at the same time. This is called the laplace operator:</p>
<p><img src="/2020/02/18/Computer-Vision/1582182970901.png" alt="1582182970901"></p>
<p>ä¾‹ï¼š</p>
<p><img src="/2020/02/18/Computer-Vision/1582183125398.png" alt="1582183125398"></p>
<p><span style="background:yellow">ä»£ç è§<a href="https://www.analyticsvidhya.com/blog/2019/04/introduction-image-segmentation-techniques-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">è¿™é‡Œ</a>.</span></p>
<h4 id="13-1-6-Image-Segmentation-based-on-Clustering"><a href="#13-1-6-Image-Segmentation-based-on-Clustering" class="headerlink" title="13.1.6 Image Segmentation based on Clustering"></a>13.1.6 Image Segmentation based on Clustering</h4><p>Clustering is the task of dividing the population (data points) into a number of groups, such that data points in the same groups are more similar to other data points in that same group than those in other groups. These groups are known as clusters.</p>
<p>One of the most commonly used clustering algorithms is <a href="https://www.analyticsvidhya.com/blog/2016/11/an-introduction-to-clustering-and-different-methods-of-clustering/" target="_blank" rel="noopener">k-means</a>. Here, the k represents the number of clusters (not to be confused with k-nearest neighbor). Letâ€™s understand how k-means works:</p>
<ol>
<li>First, randomly select k initial clusters</li>
<li>Randomly assign each data point to any one of the k clusters</li>
<li>Calculate the centers of these clusters</li>
<li>Calculate the distance of all the points from the center of each cluster</li>
<li>Depending on this distance, the points are reassigned to the nearest cluster</li>
<li>Calculate the center of the newly formed clusters</li>
<li>Finally, repeat steps (4), (5) and (6) until either the center of the clusters does not change or we reach the set number of iterations</li>
</ol>
<p><strong>The key advantage of using k-means algorithm is that it is simple and easy to understand.</strong> We are assigning the points to the clusters which are closest to them.</p>
<p><span style="background:yellow">ä»£ç è§<a href="https://www.analyticsvidhya.com/blog/2019/04/introduction-image-segmentation-techniques-python/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">è¿™é‡Œ</a>.</span></p>
<p>é€‰æ‹©5 clusterçš„æ•ˆæœ:</p>
<p><img src="/2020/02/18/Computer-Vision/1582183359913.png" alt="1582183359913"></p>
<p>k-means works really well when we have a small dataset. It can segment the objects in the image and give impressive results. But the algorithm hits a roadblock when applied on a large dataset (more number of images).</p>
<p>It looks at all the samples at every iteration, so the time taken is too high. Hence, itâ€™s also too expensive to implement. And since k-means is a distance-based algorithm, it is only applicable to convex datasets and is not suitable for clustering <a href="https://en.wikipedia.org/wiki/Convex_set" target="_blank" rel="noopener">non-convex clusters</a>.</p>
<p>Finally, letâ€™s look at a simple, flexible and general approach for image segmentation.</p>
<h4 id="13-1-7-Mask-R-CNN"><a href="#13-1-7-Mask-R-CNN" class="headerlink" title="13.1.7 Mask R-CNN"></a>13.1.7 Mask R-CNN</h4><p>Mask R-CNN is an extension of the popular <a href="https://www.analyticsvidhya.com/blog/2018/10/a-step-by-step-introduction-to-the-basic-object-detection-algorithms-part-1/?utm_source=blog&amp;utm_medium=image-segmentation-article" target="_blank" rel="noopener">Faster R-CNN</a> object detection architecture. Mask R-CNN adds a branch to the already existing Faster R-CNN outputs. The Faster R-CNN method generates two things for each object in the image:</p>
<ul>
<li>Its class</li>
<li>The bounding box coordinates</li>
</ul>
<p>Mask R-CNN adds a third branch to this which outputs the object mask as well. Take a look at the below image to get an intuition of how Mask R-CNN works on the inside:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/03/Mask-R-CNN.png" alt="Mask R-CNN"></p>
<ol>
<li>We take an image as input and pass it to the ConvNet, which returns the feature map for that image</li>
<li>Region proposal network (RPN) is applied on these feature maps. This returns the object proposals along with their objectness score</li>
<li>A RoI pooling layer is applied on these proposals to bring down all the proposals to the same size</li>
<li>Finally, the proposals are passed to a fully connected layer to classify and output the bounding boxes for objects. It also returns the mask for each proposal</li>
</ol>
<blockquote>
<p><strong>Mask R-CNN is the current state-of-the-art for image segmentation and runs at 5 fps.</strong></p>
</blockquote>
<h4 id="13-1-8-Summary"><a href="#13-1-8-Summary" class="headerlink" title="13.1.8 Summary"></a>13.1.8 Summary</h4><div class="table-container">
<table>
<thead>
<tr>
<th><strong>Algorithm</strong></th>
<th><strong>Description</strong></th>
<th><strong>Advantages</strong></th>
<th><strong>Limitations</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Region-Based Segmentation</td>
<td>Separates the objects into different regions based on some threshold value(s).</td>
<td>a. Simple calculationsb. Fast operation speedc. When the object and background have high contrast, this method performs really well</td>
<td>When there is no significant grayscale difference or an overlap of the grayscale pixel values, it becomes very difficult to get accurate segments.</td>
</tr>
<tr>
<td>Edge Detection Segmentation</td>
<td>Makes use of discontinuous local features of an image to detect edges and hence define a boundary of the object.</td>
<td>It is good for images having better contrast between objects.</td>
<td>Not suitable when there are too many edges in the image and if there is less contrast between objects.</td>
</tr>
<tr>
<td>Segmentation based on Clustering</td>
<td>Divides the pixels of the image into homogeneous clusters.</td>
<td>Works really well on small datasets and generates excellent clusters.</td>
<td>a. Computation time is too large and expensive.b. k-means is a distance-based algorithm. It is not suitable for clustering non-convex clusters.</td>
</tr>
<tr>
<td>Mask R-CNN</td>
<td>Gives three outputs for each object in the image: its class, bounding box coordinates, and object mask</td>
<td>a. Simple, flexible and general approachb. It is also the current state-of-the-art for image segmentation</td>
<td>High training time</td>
</tr>
</tbody>
</table>
</div>
<h3 id="13-2-Implementing-Mask-R-CNN-for-Image-Segmentation"><a href="#13-2-Implementing-Mask-R-CNN-for-Image-Segmentation" class="headerlink" title="13.2 Implementing Mask R-CNN for Image Segmentation"></a>13.2 Implementing Mask R-CNN for Image Segmentation</h3><p><a href="https://www.analyticsvidhya.com/blog/2019/07/computer-vision-implementing-mask-r-cnn-image-segmentation/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2019/07/computer-vision-implementing-mask-r-cnn-image-segmentation/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020</a></p>
<h4 id="13-2-1-Understanding-Mask-R-CNN"><a href="#13-2-1-Understanding-Mask-R-CNN" class="headerlink" title="13.2.1 Understanding Mask R-CNN"></a>13.2.1 Understanding Mask R-CNN</h4><p>Mask R-CNN is basically an extension of <a href="https://www.analyticsvidhya.com/blog/2018/10/a-step-by-step-introduction-to-the-basic-object-detection-algorithms-part-1/?utm_source=blog&amp;utm_medium=computer-vision-implementing-mask-r-cnn-image-segmentation" target="_blank" rel="noopener">Faster R-CNN</a>. Faster R-CNN is widely used for object detection tasks. For a given image, it returns the class label and bounding box coordinates for each object in the image. </p>
<p><strong>The Mask R-CNN framework is built on top of Faster R-CNN.</strong> So, for a given image, Mask R-CNN, in addition to the class label and bounding box coordinates for each object, will also return the object mask.</p>
<p>Letâ€™s first quickly understand how Faster R-CNN works. This will help us grasp the intuition behind Mask R-CNN as well.</p>
<ul>
<li>Faster R-CNN first uses a ConvNet to extract feature maps from the images</li>
<li>These feature maps are then passed through a Region Proposal Network (RPN) which returns the candidate bounding boxes</li>
<li>We then apply an RoI pooling layer on these candidate bounding boxes to bring all the candidates to the same size</li>
<li>And finally, the proposals are passed to a fully connected layer to classify and output the bounding boxes for objects</li>
</ul>
<p>Once you understand how Faster R-CNN works, understanding Mask R-CNN will be very easy. So, letâ€™s understand it step-by-step starting from the input to predicting the class label, bounding box, and object mask.</p>
<p><span style="background:yellow">ç¬¬ä¸€æ­¥ï¼š<u>Backbone Model</u></span></p>
<p>Similar to the <a href="https://www.analyticsvidhya.com/blog/2018/12/guide-convolutional-neural-network-cnn/?utm_source=blog&amp;utm_medium=computer-vision-implementing-mask-r-cnn-image-segmentation" target="_blank" rel="noopener">ConvNet</a> that we use in Faster R-CNN to extract feature maps from the image, we use the ResNet 101 architecture to extract features from the images in Mask R-CNN. So, the first step is to take an image and extract features using the ResNet 101 architecture. These features act as an input for the next layer.</p>
<p><span style="background:yellow">ç¬¬äºŒæ­¥ï¼š<u>Region Proposal Network (RPN)</u></span></p>
<p>Now, we take the feature maps obtained in the previous step and apply a region proposal network (RPM). This basically predicts if an object is present in that region (or not). In this step, we get those regions or feature maps which the model predicts contain some object.</p>
<p><span style="background:yellow">ç¬¬ä¸‰æ­¥ï¼š<u>Region of Interest (RoI)</u></span></p>
<p>The regions obtained from the RPN might be of different shapes, hence, we apply a pooling layer and convert all the regions to the same shape. Next, these regions are passed through a fully connected network so that the class label and bounding boxes are predicted.</p>
<p>Till this point, the steps are almost similar to how Faster R-CNN works. Now comes the difference between the two frameworks. In addition to this, <strong>Mask R-CNN also generates the segmentation mask.</strong></p>
<p>For that, we first compute the region of interest so that the computation time can be reduced. For all the predicted regions, we compute the Intersection over Union (IoU) with the ground truth boxes. We can computer IoU like this:</p>
<p>IoU = Area of the intersection / Area of the union</p>
<p><strong>Now, only if the IoU is greater than or equal to 0.5, we consider that as a region of interest. Otherwise, we neglect that particular region. We do this for all the regions and then select only a set of regions for which the IoU is greater than 0.5.</strong></p>
<p>Letâ€™s understand it using an example. Consider this image:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/07/Screenshot-from-2019-07-19-16-37-49.png" alt="image_bounding_box">Here, the red box is the ground truth box for this image. Now, letâ€™s say we got 4 regions from the RPN as shown below:</p>
<p><a href="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/07/Screenshot-from-2019-07-19-16-46-07.png" target="_blank" rel="noopener"><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/07/Screenshot-from-2019-07-19-16-46-07.png" alt="rpn_predictions"></a></p>
<p>Here, the IoU of Box 1 and Box 2 is possibly less than 0.5, whereas the IoU of Box 3 and Box 4 is approximately greater than 0.5. Hence. we can say that Box 3 and Box 4 are the region of interest for this particular image whereas Box 1 and Box 2 will be neglected.</p>
<p>Next, letâ€™s see the final step of Mask R-CNN.</p>
<p><span style="background:yellow">ç¬¬å››æ­¥ï¼š<u>Segmentation Mask</u></span></p>
<p>Once we have the RoIs based on the IoU values, we can add a mask branch to the existing architecture. This returns the segmentation mask for each region that contains an object. It returns a mask of size 28 X 28 for each region which is then scaled up for inference.</p>
<p>Again, letâ€™s understand this visually. Consider the following image:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/07/3.jpg" alt="sample image for segmentation"></p>
<p>The segmentation mask for this image would look something like this:</p>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2019/07/Screenshot-from-2019-07-19-16-59-48.png" alt="masks using Mask R-CNN"></p>
<p>Here, our model has segmented all the objects in the image. This is the final step in Mask R-CNN where we predict the masks for all the objects in the image.</p>
<p>Keep in mind that <strong>the training time for Mask R-CNN is quite high.</strong> It took me somewhere around 1 to 2 days to train the Mask R-CNN on the famous <a href="http://cocodataset.org/#home" target="_blank" rel="noopener">COCO dataset</a>. So, for the scope of this article, we will not be training our own Mask R-CNN model.</p>
<p>We will instead use the pretrained weights of the Mask R-CNN model trained on the COCO dataset. We will be using the <a href="https://github.com/matterport/Mask_RCNN" target="_blank" rel="noopener">mask rcnn framework</a> created by the Data scientists and researchers at Facebook AI Research (FAIR).</p>
<h4 id="13-2-2-Implement-Mask-R-CNN"><a href="#13-2-2-Implement-Mask-R-CNN" class="headerlink" title="13.2.2 Implement Mask R-CNN"></a>13.2.2 Implement Mask R-CNN</h4><p><span style="background:yellow">ä»£ç è§<a href="https://www.analyticsvidhya.com/blog/2019/07/computer-vision-implementing-mask-r-cnn-image-segmentation/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">è¿™é‡Œ</a>.</span></p>
<h3 id="13-3-å…¶ä»–Resources"><a href="#13-3-å…¶ä»–Resources" class="headerlink" title="13.3 å…¶ä»–Resources"></a>13.3 å…¶ä»–Resources</h3><ul>
<li><a href="https://arxiv.org/pdf/1703.06870.pdf" target="_blank" rel="noopener">Mask R-CNN Paper</a></li>
<li><a href="https://github.com/matterport/Mask_RCNN" target="_blank" rel="noopener">Mask R-CNN GitHub Repository</a></li>
</ul>
<h2 id="14-Project-5-COCO-Segmentation-Challenge"><a href="#14-Project-5-COCO-Segmentation-Challenge" class="headerlink" title="14. Project 5 - COCO Segmentation Challenge"></a>14. Project 5 - COCO Segmentation Challenge</h2><p> <a href="http://cocodataset.org/#download" target="_blank" rel="noopener">COCO Segmentation Challenge</a></p>
<h2 id="15-Attention-Model"><a href="#15-Attention-Model" class="headerlink" title="15. Attention Model"></a>15. Attention Model</h2><ul>
<li><a href="https://www.analyticsvidhya.com/blog/2018/03/essentials-of-deep-learning-sequence-to-sequence-modelling-with-attention-part-i/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">Sequence-to-Sequence Modeling with Attention</a></li>
<li><a href="https://nlp.stanford.edu/~johnhew/public/14-seq2seq.pdf" target="_blank" rel="noopener">Sequence-to-Sequence Models</a> by Stanford</li>
</ul>
<h2 id="16-Explore-Deep-Learning-Tools"><a href="#16-Explore-Deep-Learning-Tools" class="headerlink" title="16. Explore Deep Learning Tools"></a>16. Explore Deep Learning Tools</h2><h3 id="16-1-PyTorch"><a href="#16-1-PyTorch" class="headerlink" title="16.1 PyTorch"></a>16.1 PyTorch</h3><ul>
<li><a href="https://pytorch.org/tutorials/" target="_blank" rel="noopener">PyTorch Tutorials</a></li>
<li><a href="https://www.analyticsvidhya.com/blog/2019/09/introduction-to-pytorch-from-scratch/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">Beginner-Friendly Guide to PyTorch</a></li>
</ul>
<h3 id="16-2-TensorFlow"><a href="#16-2-TensorFlow" class="headerlink" title="16.2 TensorFlow"></a>16.2 TensorFlow</h3><ul>
<li><a href="https://www.tensorflow.org/tutorials" target="_blank" rel="noopener">TensorFlow Tutorials</a></li>
<li><a href="https://www.analyticsvidhya.com/blog/2016/10/an-introduction-to-implementing-neural-networks-using-tensorflow/?utm_source=blog&amp;utm_medium=computer-vision-learning-path-2020" target="_blank" rel="noopener">Introduction to TensorFlow</a></li>
</ul>]]></content>
      <categories>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>Computer Vision</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoç›¸å…³é—®é¢˜</title>
    <url>/2020/02/17/hexo%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="hexoä¸­æ— æ³•æ˜¾ç¤ºæ•°å­¦å…¬å¼ï¼š"><a href="#hexoä¸­æ— æ³•æ˜¾ç¤ºæ•°å­¦å…¬å¼ï¼š" class="headerlink" title="hexoä¸­æ— æ³•æ˜¾ç¤ºæ•°å­¦å…¬å¼ï¼š"></a>hexoä¸­æ— æ³•æ˜¾ç¤ºæ•°å­¦å…¬å¼ï¼š</h4><p>å‚è€ƒ <a href="https://runninggump.github.io/2018/12/05/æˆåŠŸè§£å†³åœ¨hexoä¸­æ— æ³•æ˜¾ç¤ºæ•°å­¦å…¬å¼çš„é—®é¢˜/" target="_blank" rel="noopener">æˆåŠŸè§£å†³åœ¨hexoä¸­æ— æ³•æ˜¾ç¤ºæ•°å­¦å…¬å¼çš„é—®é¢˜</a></p>
<p><a href="https://blog.csdn.net/yexiaohhjk/article/details/82526604" target="_blank" rel="noopener">hexo nextä¸»é¢˜è§£å†³æ— æ³•æ˜¾ç¤ºæ•°å­¦å…¬å¼</a></p>
<h4 id="å–æ¶ˆå¯¹â€æ–‡ç« ç›®å½•â€çš„è‡ªåŠ¨ç¼–å·"><a href="#å–æ¶ˆå¯¹â€æ–‡ç« ç›®å½•â€çš„è‡ªåŠ¨ç¼–å·" class="headerlink" title="å–æ¶ˆå¯¹â€æ–‡ç« ç›®å½•â€çš„è‡ªåŠ¨ç¼–å·"></a>å–æ¶ˆå¯¹â€æ–‡ç« ç›®å½•â€çš„è‡ªåŠ¨ç¼–å·</h4><p><a href="https://segmentfault.com/q/1010000008494901" target="_blank" rel="noopener">hexoçš„NexTä¸»é¢˜ï¼Œæ€ä¹ˆå–æ¶ˆâ€œæ–‡ç« ç›®å½•â€å¯¹æ ‡é¢˜çš„è‡ªåŠ¨ç¼–å·ï¼Ÿ</a></p>
<h4 id="Markdowné¡µé¢å†…è·³è½¬"><a href="#Markdowné¡µé¢å†…è·³è½¬" class="headerlink" title="Markdowné¡µé¢å†…è·³è½¬"></a>Markdowné¡µé¢å†…è·³è½¬</h4><p><a href="https://www.cnblogs.com/triple-y/p/10780644.html" target="_blank" rel="noopener">markdowné¡µé¢å†…è·³è½¬</a></p>
<h4 id="è®¾ç½®æ–‡ç« å°é¢"><a href="#è®¾ç½®æ–‡ç« å°é¢" class="headerlink" title="è®¾ç½®æ–‡ç« å°é¢"></a>è®¾ç½®æ–‡ç« å°é¢</h4><p>å‚è€ƒ <a href="https://www.zhihu.com/tardis/sogou/art/60424755" target="_blank" rel="noopener">https://www.zhihu.com/tardis/sogou/art/60424755</a></p>
<p><code>&lt;!-- less --&gt;</code>: ç‚¹å‡»é˜…è¯»å…¨æ–‡åä¸æ˜¾ç¤º<code>&lt;!-- less --&gt;</code> ä»¥ä¸Šçš„å†…å®¹</p>
<p><code>&lt;!-- more --&gt;</code>: è¦æ˜¾ç¤º</p>
<h4 id="è®¾ç½®æ ‡é¢˜æ ·å¼ï¼ˆä¸ºæµ…è“è‰²ï¼‰"><a href="#è®¾ç½®æ ‡é¢˜æ ·å¼ï¼ˆä¸ºæµ…è“è‰²ï¼‰" class="headerlink" title="è®¾ç½®æ ‡é¢˜æ ·å¼ï¼ˆä¸ºæµ…è“è‰²ï¼‰"></a>è®¾ç½®æ ‡é¢˜æ ·å¼ï¼ˆä¸ºæµ…è“è‰²ï¼‰</h4><p>å‚è€ƒ<a href="https://juejin.im/post/5a71ab9f518825735300ee6c#heading-24" target="_blank" rel="noopener">ç¯‡â…¡ï¼šNexTä¸»é¢˜çš„é…ç½®å’Œä¼˜åŒ–æŒ‡å—</a></p>
<p><img src="/2020/02/17/hexoç›¸å…³é—®é¢˜/1595819136654.png" alt="1595819136654"></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*æ·»åŠ ä¸‹é¢çš„CSSä»£ç æ¥ä¿®æ”¹åšå®¢æ ‡é¢˜æ ·å¼*/</span></span><br><span class="line">.page-post-detail .post-title &#123;</span><br><span class="line">  font-size: <span class="number">26</span>px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  word-<span class="keyword">break</span>: <span class="keyword">break</span>-word;</span><br><span class="line">  font-weight: $posts-expand-title-font-weight</span><br><span class="line">  background-color: #b9d3ee;</span><br><span class="line">  border-radius:<span class="number">.3</span>em;</span><br><span class="line">  line-height:<span class="number">1</span>em;</span><br><span class="line">  padding-bottom:<span class="number">.12</span>em;</span><br><span class="line">  padding-top:<span class="number">.12</span>em;</span><br><span class="line">  box-shadow:2px 2px 7px #9fb6cd;</span><br><span class="line">  +mobile() &#123;</span><br><span class="line">    font-size: <span class="number">22</span>px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*æ·»åŠ ä¸Šé¢çš„CSSä»£ç æ¥ä¿®æ”¹åšå®¢æ ‡é¢˜æ ·å¼*/</span></span><br><span class="line"></span><br><span class="line">@<span class="keyword">import</span> <span class="string">"post-expand"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"post-collapse"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"post-type"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"post-title"</span>;</span><br></pre></td></tr></table></figure>
<p><em>æ³¨æ„ï¼šå¦‚æœæƒ³æŠŠä¸»é¡µæ ‡é¢˜æ ·å¼ä¸€åŒä¿®æ”¹ï¼Œå¯ä»¥ç”¨æŠŠ</em> <code>.page-post-detail</code> å»æ‰ã€‚</p>
<h4 id="ä¿®æ”¹æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼"><a href="#ä¿®æ”¹æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼" class="headerlink" title="ä¿®æ”¹æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼"></a>ä¿®æ”¹æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼</h4><p> å‚è€ƒ<a href="https://www.cnblogs.com/brady-wang/p/8416122.html" target="_blank" rel="noopener">hexoçš„nextä¸»é¢˜ä¸ªæ€§åŒ–æ•™ç¨‹:æ‰“é€ ç‚«é…·ç½‘ç«™</a></p>
<p>å®ç°æ•ˆæœå›¾</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5308475-8cc4fc18c399af7e.gif" alt="img"></p>
<p>ä¿®æ”¹æ–‡ä»¶ <code>themes\next\source\css\_common\components\post\post.styl</code>ï¼Œåœ¨æœ«å°¾æ·»åŠ å¦‚ä¸‹cssæ ·å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼</span><br><span class="line">.post-body p a&#123;</span><br><span class="line">  color: #0593d3;</span><br><span class="line">  border-bottom: none;</span><br><span class="line">  border-bottom: 1px solid #0593d3;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    color: #fc6423;</span><br><span class="line">    border-bottom: none;</span><br><span class="line">    border-bottom: 1px solid #fc6423;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­é€‰æ‹©<code>.post-body</code> æ˜¯ä¸ºäº†ä¸å½±å“æ ‡é¢˜ï¼Œé€‰æ‹© <code>p</code> æ˜¯ä¸ºäº†ä¸å½±å“é¦–é¡µâ€œé˜…è¯»å…¨æ–‡â€çš„æ˜¾ç¤ºæ ·å¼,é¢œè‰²å¯ä»¥è‡ªå·±å®šä¹‰ã€‚</p>
<h4 id="ä¿®æ”¹ä¸»é¢˜é¡µé¢å¸ƒå±€ä¸ºåœ†è§’"><a href="#ä¿®æ”¹ä¸»é¢˜é¡µé¢å¸ƒå±€ä¸ºåœ†è§’" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜é¡µé¢å¸ƒå±€ä¸ºåœ†è§’"></a>ä¿®æ”¹ä¸»é¢˜é¡µé¢å¸ƒå±€ä¸ºåœ†è§’</h4><p>å‚è€ƒ<a href="https://wugenqiang.github.io/articles/hexo-do-optimization.htmlä¸­3.12.2" target="_blank" rel="noopener">https://wugenqiang.github.io/articles/hexo-do-optimization.htmlä¸­3.12.2</a></p>
<p>å¯¹schemeä¸ºMistæ—¶æ— ç”¨ï¼Ÿ</p>
<h4 id="NeXTç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ"><a href="#NeXTç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ" class="headerlink" title="NeXTç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ"></a>NeXTç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ</h4><p>(è¯„è®ºç³»ç»Ÿï¼Œæ•°æ®ç»Ÿè®¡ä¸åˆ†æï¼Œå†…å®¹åˆ†äº«æœåŠ¡ï¼Œæœç´¢æœåŠ¡ç­‰)</p>
<p><a href="http://theme-next.iissnan.com/third-party-services.html#google-webmaster-tools" target="_blank" rel="noopener">NeXTç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ</a></p>
<p>æ–‡ç« åŠç½‘ç«™è®¿é—®é‡ï¼š</p>
<p><img src="/2020/02/17/hexoç›¸å…³é—®é¢˜/1595773900727.png" alt="1595773900727"></p>
<p>æ³¨ï¼šç”±äºåŸé“¾æ¥å·²å¤±æ•ˆï¼Œè¿˜éœ€ä¿®æ”¹</p>
<p>themes\next\layout_third_party\analytics\busuanzi-counter.swig ä¸­</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">src = <span class="string">"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/17/hexoç›¸å…³é—®é¢˜/1595774099538.png" alt="1595774099538"></p>
<h4 id="ç»™åšå®¢åŠ ä¸ŠèŒå® æˆ–èŒå¦¹å­"><a href="#ç»™åšå®¢åŠ ä¸ŠèŒå® æˆ–èŒå¦¹å­" class="headerlink" title="ç»™åšå®¢åŠ ä¸ŠèŒå® æˆ–èŒå¦¹å­"></a>ç»™åšå®¢åŠ ä¸ŠèŒå® æˆ–èŒå¦¹å­</h4><p>å‚è€ƒ <a href="https://www.jianshu.com/p/c59a15d90759" target="_blank" rel="noopener">https://www.jianshu.com/p/c59a15d90759</a></p>
<p>ä¸åŒçš„é€‰æ‹©æ•ˆæœè§ <a href="https://huaji8.top/post/live2d-plugin-2.0/" target="_blank" rel="noopener">https://huaji8.top/post/live2d-plugin-2.0/</a></p>
<h4 id="æ·»åŠ èƒŒæ™¯éŸ³ä¹"><a href="#æ·»åŠ èƒŒæ™¯éŸ³ä¹" class="headerlink" title="æ·»åŠ èƒŒæ™¯éŸ³ä¹"></a>æ·»åŠ èƒŒæ™¯éŸ³ä¹</h4><p><a href="https://www.cnblogs.com/Guhongying/p/10461970.html" target="_blank" rel="noopener">Hexo çš„nextä¸»é¢˜ä¸‹æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹ä½œBGM</a></p>
<p>ç½‘æ˜“äº‘éŸ³ä¹æ— æ³•ç”Ÿæˆå¤–é“¾ï¼š</p>
<p><a href="https://www.cnblogs.com/cstdio1/p/11617357.html" target="_blank" rel="noopener">https://www.cnblogs.com/cstdio1/p/11617357.html</a></p>
<p>ï¼ˆ<span style="background:yellow">æ›´æ–°</span>ï¼šå‚è€ƒä»¥ä¸Šæ–¹æ³•æ—¶ï¼Œæ— æ³•æ’­æ”¾éŸ³ä¹ï¼Ÿï¼‰</p>
<p>å¦ä¸€ä¸ªæ–¹æ³•å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_35859750/article/details/91452615" target="_blank" rel="noopener">hexoæ·»åŠ éŸ³ä¹</a></p>
<p>å®‰è£…aplayer: <code>npm install --save hexo-tag-aplayer</code></p>
<p>ç²˜è´´ä»¥ä¸‹å†…å®¹åˆ° \themes\next\layout\_macro\sidebar.swig</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–°å¢çš„å†…å®¹ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- require APlayer --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- require MetingJS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">meting-js</span></span></span><br><span class="line"><span class="tag"><span class="attr">server</span>=<span class="string">"netease"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">type</span>=<span class="string">"song"</span></span></span><br><span class="line"><span class="tag"><span class="attr">id</span>=<span class="string">"188376"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">meting-js</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ–°å¢çš„å†…å®¹end --&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/17/hexoç›¸å…³é—®é¢˜/1582012566416.png" alt="1582012566416"></p>
<p>å³å¯.</p>
<p>å…¶ä¸­server, type, idç­‰æ ¹æ®å…·ä½“æƒ…å†µä¿®æ”¹.</p>
<p>ä¾‹ï¼š</p>
<p><img src="/2020/02/17/hexoç›¸å…³é—®é¢˜/1582014322346.png" alt="1582014322346"></p>
<h4 id="å…³äºç›®å½•"><a href="#å…³äºç›®å½•" class="headerlink" title="å…³äºç›®å½•"></a>å…³äºç›®å½•</h4><p>åœ¨ themes\next\_config.yml ä¸­è®¾å®šï¼Œä¸è¦å»å®‰è£… hexo-tocï¼Œå¦åˆ™ä¼šå†²çª</p>
<p><img src="/2020/02/17/hexoç›¸å…³é—®é¢˜/1582014793720.png" alt="1582014793720"></p>
<h4 id="åµŒå…¥è§†é¢‘"><a href="#åµŒå…¥è§†é¢‘" class="headerlink" title="åµŒå…¥è§†é¢‘"></a>åµŒå…¥è§†é¢‘</h4><p>å‚è€ƒ <a href="https://www.bilibili.com/video/av23207325/" target="_blank" rel="noopener">https://www.bilibili.com/video/av23207325/</a></p>]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Bæ ‘ä»‹ç»</title>
    <url>/2020/02/16/B%E6%A0%91%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å‚è€ƒï¼š<br><a href="https://blog.csdn.net/A_zhangq/article/details/99662693" target="_blank" rel="noopener">https://blog.csdn.net/A_zhangq/article/details/99662693</a><br><a href="https://blog.csdn.net/qq_35571554/article/details/82759668" target="_blank" rel="noopener">æ¼«ç”»å™è¿°B+æ ‘å’ŒB-æ ‘ï¼Œå¾ˆå€¼å¾—çœ‹!</a></p>
</blockquote>
<h3 id="Bæ ‘"><a href="#Bæ ‘" class="headerlink" title="Bæ ‘"></a>Bæ ‘</h3><p>B-æ ‘å°±æ˜¯Bæ ‘ï¼ˆå¯èƒ½æœ‰éƒ¨åˆ†äººä¼šä¹ æƒ¯ä¸ŠæŠŠB-æ ‘è¯»ä¸ºBå‡æ ‘ï¼Œå…¶å®å¹¶ä¸å­˜åœ¨Bå‡æ ‘ï¼Œåªæ˜¯è¯»æ³•ä¸Šçš„ä¸åŒè€Œå·²ï¼‰ï¼ŒBå°±æ˜¯balancedï¼Œå¹³è¡¡çš„æ„æ€ã€‚<strong>B-æ ‘å°±æ˜¯æŒ‡çš„Bæ ‘</strong>ã€‚</p>
<p>B-æ ‘æ˜¯ä¸€ç§å¤šè·¯æœç´¢æ ‘ï¼ˆå¹¶ä¸æ˜¯äºŒå‰çš„ï¼‰ï¼š    </p>
<ol>
<li><p>å®šä¹‰ä»»æ„éå¶å­ç»“ç‚¹æœ€å¤šåªæœ‰Mä¸ªå„¿å­ï¼Œä¸”M&gt;2ï¼›    </p>
</li>
<li><p>æ ¹ç»“ç‚¹çš„å„¿å­æ•°ä¸º [2, M]ï¼›    </p>
</li>
<li><p>é™¤æ ¹ç»“ç‚¹ä»¥å¤–çš„éå¶å­ç»“ç‚¹çš„å„¿å­æ•°ä¸º [M/2, M]ï¼›    </p>
</li>
<li><p>æ¯ä¸ªç»“ç‚¹å­˜æ”¾è‡³å°‘ M/2-1ï¼ˆå–ä¸Šæ•´ï¼‰å’Œè‡³å¤š  M-1 ä¸ªå…³é”®å­—ï¼›ï¼ˆè‡³å°‘ 2ä¸ªå…³é”®å­—ï¼‰    </p>
</li>
<li><p>éå¶å­ç»“ç‚¹çš„å…³é”®å­—ä¸ªæ•° = æŒ‡å‘å„¿å­çš„æŒ‡é’ˆä¸ªæ•° - 1ï¼›    </p>
</li>
<li><p>éå¶å­ç»“ç‚¹çš„å…³é”®å­—ï¼šK[1], K[2], â€¦, K[M-1]ï¼›ä¸” K[i] &lt; K[i+1] ï¼›    </p>
</li>
<li><p>éå¶å­ç»“ç‚¹çš„æŒ‡é’ˆï¼šP[1], P[2], â€¦, P[M]ï¼›å…¶ä¸­P[1] æŒ‡å‘å…³é”®å­—å°äº K[1] çš„å­æ ‘ï¼ŒP[M] æŒ‡å‘å…³é”®å­—å¤§äº            K[M-1] çš„å­æ ‘ï¼Œå…¶å®ƒ P[i] æŒ‡å‘å…³é”®å­—å±äº(K[i-1], K[i]) çš„å­æ ‘ï¼›    </p>
</li>
<li><p>æ‰€æœ‰å¶å­ç»“ç‚¹ä½äºåŒä¸€å±‚ï¼›    </p>
</li>
</ol>
<p>å¦‚ (M = 3)ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20190815211241789.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0Ffemhhbmdx,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>B-æ ‘çš„æœç´¢ï¼š</strong></p>
<p>ä»æ ¹ç»“ç‚¹å¼€å§‹ï¼Œå¯¹ç»“ç‚¹å†…çš„å…³é”®å­—ï¼ˆæœ‰åºï¼‰åºåˆ—è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¦‚æœå‘½ä¸­åˆ™ç»“æŸï¼Œå¦åˆ™è¿›å…¥æŸ¥è¯¢å…³é”®å­—æ‰€å±èŒƒå›´çš„å„¿å­ç»“ç‚¹ï¼›é‡å¤ï¼Œç›´åˆ°æ‰€å¯¹åº”çš„å„¿å­æŒ‡é’ˆä¸ºç©ºï¼Œæˆ–å·²ç»æ˜¯å¶å­ç»“ç‚¹.</p>
<p><strong>B-æ ‘çš„ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>å…³é”®å­—é›†åˆåˆ†å¸ƒåœ¨æ•´é¢—æ ‘ä¸­ï¼›</li>
<li>ä»»ä½•ä¸€ä¸ªå…³é”®å­—å‡ºç°ä¸”åªå‡ºç°åœ¨ä¸€ä¸ªç»“ç‚¹ä¸­ï¼›</li>
<li>æœç´¢æœ‰å¯èƒ½åœ¨éå¶å­ç»“ç‚¹ç»“æŸï¼›</li>
<li>å…¶æœç´¢æ€§èƒ½ç­‰ä»·äºåœ¨å…³é”®å­—å…¨é›†å†…åšä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ï¼›</li>
<li>è‡ªåŠ¨å±‚æ¬¡æ§åˆ¶ï¼›</li>
</ul>
<hr>
<a id="more"></a>
<h3 id="B-æ ‘"><a href="#B-æ ‘" class="headerlink" title="B+æ ‘"></a>B+æ ‘</h3><p>B+æ ‘æ˜¯B-æ ‘çš„å˜ä½“ï¼Œä¹Ÿæ˜¯ä¸€ç§å¤šè·¯æœç´¢æ ‘ï¼š</p>
<p>å…¶å®šä¹‰åŸºæœ¬ä¸B-æ ‘åŒï¼Œé™¤äº†ï¼š</p>
<ol>
<li>éå¶å­ç»“ç‚¹çš„å­æ ‘æŒ‡é’ˆä¸å…³é”®å­—ä¸ªæ•°ç›¸åŒï¼›</li>
<li>éå¶å­ç»“ç‚¹çš„å­æ ‘æŒ‡é’ˆP[i]ï¼ŒæŒ‡å‘å…³é”®å­—å€¼å±äº[K[i], K[i+1]]çš„å­æ ‘ï¼ˆB-æ ‘æ˜¯å¼€åŒºé—´ï¼‰ï¼›</li>
<li>ä¸ºæ‰€æœ‰å¶å­ç»“ç‚¹å¢åŠ ä¸€ä¸ªé“¾æŒ‡é’ˆï¼›</li>
<li>æ‰€æœ‰å…³é”®å­—éƒ½åœ¨å¶å­ç»“ç‚¹å‡ºç°ï¼›</li>
</ol>
<p>å¦‚ï¼ˆM=3ï¼‰:</p>
<p><img src="https://img-blog.csdnimg.cn/20190817142029576.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0Ffemhhbmdx,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>B+æ ‘çš„æœç´¢</strong>ï¼š</p>
<p>ä¸B-æ ‘åŸºæœ¬ç›¸åŒï¼ŒåŒºåˆ«æ˜¯B+æ ‘åªæœ‰è¾¾åˆ°å¶å­ç»“ç‚¹æ‰å‘½ä¸­ï¼ˆB-æ ‘å¯ä»¥åœ¨éå¶å­ç»“ç‚¹å‘½ä¸­ï¼‰ï¼Œå…¶æ€§èƒ½ä¹Ÿç­‰ä»·äºåœ¨å…³é”®å­—å…¨é›†åšä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ï¼›</p>
<p><strong>B+æ ‘çš„ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>æ‰€æœ‰å…³é”®å­—éƒ½å‡ºç°åœ¨å¶å­ç»“ç‚¹çš„é“¾è¡¨ä¸­ï¼ˆç¨ å¯†ç´¢å¼•ï¼‰ï¼Œä¸”é“¾è¡¨ä¸­çš„å…³é”®å­—æ°å¥½æ˜¯<strong>æœ‰åº</strong>çš„ï¼›</li>
<li>ä¸å¯èƒ½åœ¨éå¶å­ç»“ç‚¹å‘½ä¸­ï¼›</li>
<li>éå¶å­ç»“ç‚¹ç›¸å½“äºæ˜¯å¶å­ç»“ç‚¹çš„ç´¢å¼•ï¼ˆç¨€ç–ç´¢å¼•ï¼‰ï¼Œå¶å­ç»“ç‚¹ç›¸å½“äºæ˜¯å­˜å‚¨ï¼ˆå…³é”®å­—ï¼‰æ•°æ®çš„æ•°æ®å±‚ï¼›</li>
<li>æ›´é€‚åˆæ–‡ä»¶ç´¢å¼•ç³»ç»Ÿï¼›</li>
</ul>
<blockquote>
<p>å…³äºç¨ å¯†ç´¢å¼•ä¸ç¨€ç–ç´¢å¼•ï¼š<a href="https://blog.csdn.net/Qmen_Crow/article/details/51052160" target="_blank" rel="noopener">https://blog.csdn.net/Qmen_Crow/article/details/51052160</a></p>
</blockquote>
<p><strong>B+æ ‘çš„åˆ†è£‚ï¼š</strong></p>
<p>å½“ä¸€ä¸ªç»“ç‚¹æ»¡æ—¶ï¼Œåˆ†é…ä¸€ä¸ªæ–°çš„ç»“ç‚¹ï¼Œå¹¶å°†åŸç»“ç‚¹ä¸­1/2çš„æ•°æ®å¤åˆ¶åˆ°æ–°ç»“ç‚¹ï¼Œæœ€ååœ¨çˆ¶ç»“ç‚¹ä¸­å¢åŠ æ–°ç»“ç‚¹çš„æŒ‡é’ˆï¼›B+æ ‘çš„åˆ†è£‚åªå½±å“åŸç»“ç‚¹å’Œçˆ¶ç»“ç‚¹ï¼Œè€Œä¸ä¼šå½±å“å…„å¼Ÿç»“ç‚¹ï¼Œæ‰€ä»¥å®ƒä¸éœ€è¦æŒ‡å‘å…„å¼Ÿçš„æŒ‡é’ˆã€‚</p>
<hr>
<h3 id="B-æ ‘-1"><a href="#B-æ ‘-1" class="headerlink" title="B*æ ‘"></a>B*æ ‘</h3><p>B*æ ‘æ˜¯B+æ ‘çš„ä¸€ç§å˜å½¢ï¼Œå®ƒæ˜¯åœ¨B+æ ‘çš„åŸºç¡€ä¸Šï¼Œå°†ç´¢å¼•å±‚ä»¥æŒ‡é’ˆè¿æ¥èµ·æ¥ï¼ˆåœ¨B+æ ‘çš„éæ ¹å’Œéå¶å­ç»“ç‚¹å†å¢åŠ æŒ‡å‘å…„å¼Ÿçš„æŒ‡é’ˆï¼‰ï¼Œä½¿æœç´¢å–å€¼æ›´åŠ å¿«æ·ã€‚ </p>
<p>å¦‚ä¸‹å›¾ï¼ˆM = 3ï¼‰ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20190817142644325.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0Ffemhhbmdx,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>B*æ ‘åœ¨B+æ ‘çš„åŸºç¡€ä¸Šäº§ç”Ÿäº†ä¸€ç³»åˆ—çš„å˜åŒ–ï¼Œå¦‚ä¸‹ï¼š</p>
<ol>
<li>B*æ ‘å®šä¹‰äº†éå¶å­ç»“ç‚¹å…³é”®å­—ä¸ªæ•°è‡³å°‘ä¸º(2/3)Mï¼Œå³å—çš„æœ€ä½ä½¿ç”¨ç‡ä¸º2/3ï¼ˆä»£æ›¿B+æ ‘çš„1/2ï¼‰ï¼›</li>
<li><strong>B *æ ‘çš„åˆ†è£‚ï¼š</strong>å½“ä¸€ä¸ªç»“ç‚¹æ»¡æ—¶ï¼Œå¦‚æœå®ƒçš„ä¸‹ä¸€ä¸ªå…„å¼Ÿç»“ç‚¹æœªæ»¡ï¼Œé‚£ä¹ˆå°†ä¸€éƒ¨åˆ†æ•°æ®ç§»åˆ°å…„å¼Ÿç»“ç‚¹ä¸­ï¼Œå†åœ¨åŸç»“ç‚¹æ’å…¥å…³é”®å­—ï¼Œæœ€åä¿®æ”¹çˆ¶ç»“ç‚¹ä¸­å…„å¼Ÿç»“ç‚¹çš„å…³é”®å­—ï¼ˆå› ä¸ºå…„å¼Ÿç»“ç‚¹çš„å…³é”®å­—èŒƒå›´æ”¹å˜äº†ï¼‰ï¼›å¦‚æœå…„å¼Ÿä¹Ÿæ»¡äº†ï¼Œåˆ™åœ¨åŸç»“ç‚¹ä¸å…„å¼Ÿç»“ç‚¹ä¹‹é—´å¢åŠ æ–°ç»“ç‚¹ï¼Œå¹¶å„å¤åˆ¶1/3çš„æ•°æ®åˆ°æ–°ç»“ç‚¹ï¼Œæœ€ååœ¨çˆ¶ç»“ç‚¹å¢åŠ æ–°ç»“ç‚¹çš„æŒ‡é’ˆã€‚</li>
</ol>
<p>B*æ ‘ç›¸å¯¹äºB+æ ‘ï¼Œç©ºé—´åˆ©ç”¨ç‡ä¸Šæœ‰æ‰€æé«˜ï¼ŒæŸ¥è¯¢é€Ÿç‡ä¹Ÿæœ‰æ‰€æé«˜ã€‚</p>
<hr>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul>
<li><p>äºŒå‰æœç´¢æ ‘ï¼šäºŒå‰æ ‘ï¼Œæ¯ä¸ªç»“ç‚¹åªå­˜å‚¨ä¸€ä¸ªå…³é”®å­—ä¸”å€¼å¤§äºå·¦å­æ ‘ï¼Œå°äºå³å­æ ‘ã€‚</p>
</li>
<li><p>Bï¼ˆB-ï¼‰æ ‘ï¼šå¤šè·¯æœç´¢æ ‘ï¼Œæ¯ä¸ªç»“ç‚¹å­˜å‚¨ M/2-1 åˆ° M - 1 ä¸ªå…³é”®å­—ï¼Œéå¶å­ç»“ç‚¹å­˜å‚¨æŒ‡å‘å…³é”®å­—èŒƒå›´çš„å­ç»“ç‚¹ï¼› æ‰€æœ‰å…³é”®å­—åœ¨æ•´é¢—æ ‘ä¸­å‡ºç°ï¼Œä¸”åªå‡ºç°ä¸€æ¬¡ï¼Œéå¶å­ç»“ç‚¹å¯ä»¥å‘½ä¸­ï¼›</p>
</li>
<li>B+æ ‘ï¼šåœ¨B-æ ‘åŸºç¡€ä¸Šï¼Œä¸ºå¶å­ç»“ç‚¹å¢åŠ é“¾è¡¨æŒ‡é’ˆï¼Œæ‰€æœ‰å…³é”®å­—éƒ½åœ¨å¶å­ç»“ç‚¹ä¸­å‡ºç°ï¼Œéå¶å­ç»“ç‚¹ä½œä¸ºå¶å­ç»“ç‚¹çš„ç´¢å¼•ï¼›B+æ ‘æ€»æ˜¯åˆ°å¶å­ç»“ç‚¹æ‰å‘½ä¸­ï¼›</li>
<li>B*æ ‘ï¼šåœ¨B+æ ‘åŸºç¡€ä¸Šï¼Œä¸ºéå¶å­ç»“ç‚¹ä¹Ÿå¢åŠ é“¾è¡¨æŒ‡é’ˆï¼Œå°†ç»“ç‚¹çš„æœ€ä½åˆ©ç”¨ç‡ä»1/2æé«˜åˆ°2/3ï¼›</li>
</ul>
<p><img src="/2020/02/16/Bæ ‘ä»‹ç»/1581863461822.png" alt="1581863461822"></p>
<p>è¿™ä¸¤ç§æ ‘éƒ½æ˜¯å¹³è¡¡çš„å¤šåˆ†æ ‘ï¼Œå®ƒä»¬éƒ½å¯ä»¥ç”¨äºæ–‡ä»¶çš„ç´¢å¼•ç»“æ„ï¼Œä½†Bæ ‘åªèƒ½æ”¯æŒéšæœºæ£€ç´¢ï¼Œè€ŒB+æ ‘æ˜¯æœ‰åºçš„æ ‘ï¼Œæ—¢èƒ½æ”¯æŒéšæœºæ£€ç´¢ï¼Œåˆèƒ½æ”¯æŒé¡ºåºæ£€ç´¢ã€‚</p>]]></content>
      <tags>
        <tag>Bæ ‘</tag>
        <tag>çŸ¥è¯†ç‚¹</tag>
      </tags>
  </entry>
  <entry>
    <title>RNNç›¸å…³èµ„æ–™ï¼ˆLSTM, GRUï¼‰</title>
    <url>/2020/02/15/RNN%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="pdfï¼š"><a href="#pdfï¼š" class="headerlink" title="pdfï¼š"></a>pdfï¼š</h4><p><a href="https://www.aclweb.org/anthology/C16-1311.pdf" target="_blank" rel="noopener">Effective LSTMs for Target-Dependent Sentiment Classification</a></p>
<h4 id="ç½‘é¡µï¼š"><a href="#ç½‘é¡µï¼š" class="headerlink" title="ç½‘é¡µï¼š"></a>ç½‘é¡µï¼š</h4><p><a href="https://www.jianshu.com/p/95d5c461924c" target="_blank" rel="noopener">ã€è¯‘ã€‘ç†è§£LSTMï¼ˆé€šä¿—æ˜“æ‡‚ç‰ˆï¼‰</a></p>
<p><a href="https://towardsdatascience.com/understanding-gru-networks-2ef37df6c9be" target="_blank" rel="noopener">Understanding GRU Networks</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/32481747" target="_blank" rel="noopener">äººäººéƒ½èƒ½çœ‹æ‡‚çš„GRU</a></p>
<p><a href="https://www.cnblogs.com/jiangxinyang/p/9376021.html" target="_blank" rel="noopener">æ·±åº¦å­¦ä¹ ä¹‹GRUç½‘ç»œ</a></p>
<p><a href="https://www.jianshu.com/p/3774d46b665e" target="_blank" rel="noopener">lstmå’Œgruç»“æ„çš„å†ç†è§£</a></p>
<p><a href="http://www.sohu.com/a/336551522_99979179" target="_blank" rel="noopener">å›¾è§£LSTMä¸GRUå•å…ƒçš„å„ä¸ªå…¬å¼å’ŒåŒºåˆ« </a></p>
<p><a href="https://www.analyticsvidhya.com/blog/2017/12/introduction-to-recurrent-neural-networks/" target="_blank" rel="noopener">Fundamentals of Deep Learning â€“ Introduction to Recurrent Neural Networks</a></p>
]]></content>
      <categories>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>RNN</tag>
      </tags>
  </entry>
  <entry>
    <title>CNNç›¸å…³èµ„æ–™</title>
    <url>/2020/02/15/CNN%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="pdfï¼š"><a href="#pdfï¼š" class="headerlink" title="pdfï¼š"></a>pdfï¼š</h4><p><a href="https://www.aclweb.org/anthology/D14-1181.pdf" target="_blank" rel="noopener">Convolutional Neural Networks for Sentence Classification</a></p>
<h4 id="ç½‘é¡µï¼š"><a href="#ç½‘é¡µï¼š" class="headerlink" title="ç½‘é¡µï¼š"></a>ç½‘é¡µï¼š</h4><p><a href="https://www.cnblogs.com/yelbosh/p/5808706.html" target="_blank" rel="noopener">å·ç§¯ç¥ç»ç½‘ç»œCNNåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„åº”ç”¨</a></p>
<h4 id="å·ç§¯ä¸çŸ©é˜µä¹˜æ³•ï¼š"><a href="#å·ç§¯ä¸çŸ©é˜µä¹˜æ³•ï¼š" class="headerlink" title="å·ç§¯ä¸çŸ©é˜µä¹˜æ³•ï¼š"></a>å·ç§¯ä¸çŸ©é˜µä¹˜æ³•ï¼š</h4><p><img src="/2020/02/15/CNNç›¸å…³èµ„æ–™/å·ç§¯ä¸çŸ©é˜µä¹˜æ³•.jpg" alt="å·ç§¯ä¸çŸ©é˜µä¹˜æ³•"></p>
<p><img src="/2020/02/15/CNNç›¸å…³èµ„æ–™/example.jpg" alt="example"></p>
]]></content>
      <categories>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>CNN</tag>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ç§»åŠ¨é›¶</title>
    <url>/2020/02/05/%E7%A7%BB%E5%8A%A8%E9%9B%B6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/move-zeroes/" target="_blank" rel="noopener">ç§»åŠ¨é›¶ï¼ˆéš¾åº¦ï¼šç®€ç­”ï¼‰</a></p>
<p><img src="/2020/02/05/ç§»åŠ¨é›¶/1580888243775.png" alt="1580888243775"></p>
<p>é—®é¢˜çš„ä¸¤ä¸ªè¦æ±‚æ˜¯ï¼š</p>
<ul>
<li>å°†æ‰€æœ‰ 0 ç§»åŠ¨åˆ°æ•°ç»„æœ«å°¾ã€‚</li>
<li>æ‰€æœ‰éé›¶å…ƒç´ å¿…é¡»ä¿æŒå…¶åŸå§‹é¡ºåºã€‚</li>
</ul>
<p>è¿™é‡Œå¾ˆå¥½åœ°è®¤è¯†åˆ°è¿™ä¸¤ä¸ªéœ€æ±‚æ˜¯ç›¸äº’æ’æ–¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥è§£å†³å•ç‹¬çš„å­é—®é¢˜ï¼Œç„¶åå°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ä»¥å¾—åˆ°æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h4 id="æ–¹æ³•ï¼š"><a href="#æ–¹æ³•ï¼š" class="headerlink" title="æ–¹æ³•ï¼š"></a>æ–¹æ³•ï¼š</h4><ul>
<li>ä¸€ä¸ªæŒ‡é’ˆ<code>i</code>ä»å‰åˆ°åéå†æ•°ç»„ï¼Œæ¯å½“é‡åˆ°é0æ•°æ—¶ï¼Œä»¤ <code>nums[cur] = nums[i]; cur++;</code>ï¼Œ<code>cur</code>æ˜¯å¦ä¸€ä¸ªæŒ‡é’ˆï¼ˆä»0å¼€å§‹ï¼‰ï¼Œè®°å½•å½“å‰ä½ç½®ã€‚</li>
<li>å½“<code>i</code>éå†å®Œåï¼Œæ­¤æ—¶<code>cur</code>æŒ‡å‘çš„ä½ç½®åˆ°æ•°ç»„çš„æœ«å°¾å…¨èµ‹ä¸º0å³å¯ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">moveZeroes</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]!=<span class="number">0</span>)&#123;</span><br><span class="line">                nums[cur] = nums[i];</span><br><span class="line">                cur++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(cur &lt; nums.length)&#123;</span><br><span class="line">            nums[cur] = <span class="number">0</span>;</span><br><span class="line">            cur++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/05/ç§»åŠ¨é›¶/1580890229187.png" alt="1580890229187"></p>
<p><strong>å¤æ‚åº¦</strong></p>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€å°è¦†ç›–å­ä¸²</title>
    <url>/2020/01/28/%E6%9C%80%E5%B0%8F%E8%A6%86%E7%9B%96%E5%AD%90%E4%B8%B2/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/minimum-window-substring/" target="_blank" rel="noopener">æœ€å°è¦†ç›–å­ä¸²ï¼ˆéš¾åº¦ï¼šå›°éš¾ï¼‰</a></p>
<p><img src="/2020/01/28/æœ€å°è¦†ç›–å­ä¸²/1580195563488.png" alt="1580195563488"></p>
<h4 id="æ–¹æ³•ï¼šæ»‘åŠ¨çª—å£"><a href="#æ–¹æ³•ï¼šæ»‘åŠ¨çª—å£" class="headerlink" title="æ–¹æ³•ï¼šæ»‘åŠ¨çª—å£"></a>æ–¹æ³•ï¼šæ»‘åŠ¨çª—å£</h4><h5 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h5><ol>
<li><p>åˆå§‹ï¼Œ<code>left</code>æŒ‡é’ˆå’Œ<code>right</code>æŒ‡é’ˆéƒ½æŒ‡å‘<code>s</code>çš„ç¬¬ä¸€ä¸ªå…ƒç´ .</p>
</li>
<li><p>å°† <code>right</code>æŒ‡é’ˆå³ç§»ï¼Œæ‰©å¼ çª—å£ï¼Œç›´åˆ°å¾—åˆ°ä¸€ä¸ªå¯è¡Œçª—å£ï¼Œäº¦å³åŒ…å«<code>t</code>çš„å…¨éƒ¨å­—æ¯çš„çª—å£ã€‚</p>
</li>
<li><p>å¾—åˆ°å¯è¡Œçš„çª—å£åï¼Œå°†<code>left</code>æŒ‡é’ˆé€ä¸ªå³ç§»ï¼Œè‹¥å¾—åˆ°çš„çª—å£ä¾ç„¶å¯è¡Œï¼Œåˆ™æ›´æ–°æœ€å°çª—å£å¤§å°ã€‚</p>
</li>
<li><p>è‹¥çª—å£ä¸å†å¯è¡Œï¼Œåˆ™è·³è½¬è‡³ 2ã€‚</p>
</li>
</ol>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minWindow</span><span class="params">(self, s: str, t: str)</span> -&gt; str:</span></span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        right = <span class="number">0</span></span><br><span class="line">        res = <span class="string">""</span></span><br><span class="line">        need = defaultdict(int)</span><br><span class="line">        window = defaultdict(int)</span><br><span class="line">        minLen = len(s)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> t:</span><br><span class="line">            need[i] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> right &lt; len(s):</span><br><span class="line">            window[s[right]] += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> self.con(need,window):</span><br><span class="line">                <span class="keyword">if</span> len(s[left:right+<span class="number">1</span>]) &lt; minLen:</span><br><span class="line">                    minLen = len(s[left:right+<span class="number">1</span>])</span><br><span class="line">                    res = s[left:right+<span class="number">1</span>]</span><br><span class="line">                window[s[left]] -= <span class="number">1</span></span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">            right += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">con</span><span class="params">(self, need, window)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> key <span class="keyword">in</span> need.keys():</span><br><span class="line">            <span class="keyword">if</span> need[key] &gt; window[key]:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p><img src="/2020/01/28/æœ€å°è¦†ç›–å­ä¸²/1580201292271.png" alt="1580201292271"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ»‘åŠ¨çª—å£</tag>
      </tags>
  </entry>
  <entry>
    <title>æ»‘åŠ¨çª—å£æœ€å¤§å€¼</title>
    <url>/2020/01/22/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%80%BC/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/sliding-window-maximum/" target="_blank" rel="noopener">æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆéš¾åº¦ï¼šå›°éš¾ï¼‰</a></p>
<p><img src="/2020/01/22/æ»‘åŠ¨çª—å£æœ€å¤§å€¼/1579702056767.png" alt="1579702056767"></p>
<p><img src="/2020/01/22/æ»‘åŠ¨çª—å£æœ€å¤§å€¼/1579702078067.png" alt="1579702078067"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•"><a href="#æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•"></a>æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•</h4><p>éå†æ¯ä¸ªæ»‘åŠ¨çª—å£ï¼Œæ‰¾åˆ°æ¯ä¸ªçª—å£çš„æœ€å¤§å€¼ã€‚ä¸€å…±æœ‰ N - k + 1 ä¸ªæ»‘åŠ¨çª—å£ï¼Œæ¯ä¸ªæœ‰ k ä¸ªå…ƒç´ ï¼Œäºæ˜¯ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(Nk)ï¼Œè¡¨ç°è¾ƒå·®ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxSlidingWindow</span><span class="params">(self, nums: List[int], k: int)</span> -&gt; List[int]:</span></span><br><span class="line">        <span class="keyword">if</span> len(nums) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> nums</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(nums)-(k<span class="number">-1</span>)):</span><br><span class="line">            j = i + k<span class="number">-1</span></span><br><span class="line">            res.append(max(nums[i:j+<span class="number">1</span>]))</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/22/æ»‘åŠ¨çª—å£æœ€å¤§å€¼/1579666044377.png" alt="1579666044377"></p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(Nk)ã€‚å…¶ä¸­ <code>N</code> ä¸ºæ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°ã€‚</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO<em>(</em>N<em>âˆ’</em>k+1)ï¼Œç”¨äºè¾“å‡ºæ•°ç»„ã€‚</li>
</ul>
<h4 id="æ–¹æ³•äºŒï¼šé€’å½’"><a href="#æ–¹æ³•äºŒï¼šé€’å½’" class="headerlink" title="æ–¹æ³•äºŒï¼šé€’å½’"></a>æ–¹æ³•äºŒï¼šé€’å½’</h4><p>è¯¦ç»†è®²è§£è§<a href="https://leetcode-cn.com/problems/sliding-window-maximum/solution/hua-dong-chuang-kou-zui-da-zhi-by-leetcode-3/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/sliding-window-maximum/solution/hua-dong-chuang-kou-zui-da-zhi-by-leetcode-3/</a></p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxSlidingWindow</span><span class="params">(self, nums: List[int], k: int)</span> -&gt; List[int]:</span></span><br><span class="line">        <span class="keyword">if</span> len(nums) &lt;= <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> nums</span><br><span class="line">        </span><br><span class="line">        n = len(nums)</span><br><span class="line">        left = [<span class="number">0</span>]*n</span><br><span class="line">        right = [<span class="number">0</span>]*n</span><br><span class="line">        left[<span class="number">0</span>] = nums[<span class="number">0</span>]</span><br><span class="line">        right[n<span class="number">-1</span>] = nums[n<span class="number">-1</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n):</span><br><span class="line">            <span class="comment"># ä»å·¦åˆ°å³</span></span><br><span class="line">            <span class="keyword">if</span> i % k == <span class="number">0</span>: </span><br><span class="line">                <span class="comment"># block start</span></span><br><span class="line">                left[i] = nums[i]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                left[i] = max(left[i<span class="number">-1</span>], nums[i])</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ä»å³åˆ°å·¦</span></span><br><span class="line">            j = n - i - <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> (j+<span class="number">1</span>) % k == <span class="number">0</span>:</span><br><span class="line">                <span class="comment"># block end</span></span><br><span class="line">                right[j] = nums[j]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                right[j] = max(right[j+<span class="number">1</span>], nums[j])</span><br><span class="line">        </span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n-k+<span class="number">1</span>):</span><br><span class="line">            j = i+k<span class="number">-1</span></span><br><span class="line">            res.append(max(right[i], left[j]))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/22/æ»‘åŠ¨çª—å£æœ€å¤§å€¼/1579669254322.png" alt="1579669254322"></p>
<h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œæˆ‘ä»¬å¯¹é•¿åº¦ä¸º N çš„æ•°ç»„å¤„ç†äº† 3æ¬¡ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œç”¨äºå­˜å‚¨é•¿åº¦ä¸º N çš„ left å’Œ right æ•°ç»„ï¼Œä»¥åŠé•¿åº¦ä¸º N - k + 1çš„è¾“å‡ºæ•°ç»„ã€‚</p>
<h4 id="æ–¹æ³•ä¸‰ï¼šåŒç«¯é˜Ÿåˆ—"><a href="#æ–¹æ³•ä¸‰ï¼šåŒç«¯é˜Ÿåˆ—" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šåŒç«¯é˜Ÿåˆ—"></a>æ–¹æ³•ä¸‰ï¼šåŒç«¯é˜Ÿåˆ—</h4><p><img src="/2020/01/22/æ»‘åŠ¨çª—å£æœ€å¤§å€¼/1579703855488.png" alt="1579703855488"></p>
<p><img src="/2020/01/22/æ»‘åŠ¨çª—å£æœ€å¤§å€¼/1579703901936.png" alt="1579703901936"></p>
<p>æ€è·¯ï¼šç»´æŠ¤çª—å£ï¼Œå‘å³ç§»åŠ¨æ—¶å·¦ä¾§è¶…å‡ºçª—å£çš„å€¼å¼¹å‡ºï¼Œå› ä¸ºéœ€è¦çš„æ˜¯çª—å£å†…çš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥åªè¦ä¿è¯çª—å£å†…çš„å€¼æ˜¯é€’å‡çš„å³å¯ï¼Œå°äºæ–°åŠ å…¥çš„å€¼å…¨éƒ¨å¼¹å‡ºã€‚æœ€å·¦ç«¯å³ä¸ºçª—å£æœ€å¤§å€¼ </p>
<h5 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxSlidingWindow</span><span class="params">(self, nums: List[int], k: int)</span> -&gt; List[int]:</span></span><br><span class="line">        temp = []</span><br><span class="line">        res = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i,v <span class="keyword">in</span> enumerate(nums): <span class="comment"># iæ˜¯ç´¢å¼•ï¼Œvæ˜¯å€¼</span></span><br><span class="line">            <span class="comment"># å·¦ä¾§è¶…å‡ºçª—å£çš„å€¼å¼¹å‡º</span></span><br><span class="line">            <span class="keyword">if</span> i&gt;=k <span class="keyword">and</span> temp[<span class="number">0</span>]&lt;=i-k:</span><br><span class="line">                temp.pop(<span class="number">0</span>) <span class="comment"># popç´¢å¼•ä¸º0çš„æ•°</span></span><br><span class="line">            <span class="keyword">while</span> temp <span class="keyword">and</span> nums[temp[<span class="number">-1</span>]] &lt;= v:</span><br><span class="line">                temp.pop() <span class="comment"># popæœ€åä¸€ä¸ªæ•°</span></span><br><span class="line">            temp.append(i)</span><br><span class="line">            <span class="keyword">if</span> i&gt;=k<span class="number">-1</span>:</span><br><span class="line">                res.append(nums[temp[<span class="number">0</span>]])</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/22/æ»‘åŠ¨çª—å£æœ€å¤§å€¼/1579704974700.png" alt="1579704974700"></p>
<h5 id="å¤æ‚åº¦-2"><a href="#å¤æ‚åº¦-2" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œæ¯ä¸ªå…ƒç´ è¢«å¤„ç†ä¸¤æ¬¡- å…¶ç´¢å¼•è¢«æ·»åŠ åˆ°åŒå‘é˜Ÿåˆ—ä¸­å’Œè¢«åŒå‘é˜Ÿåˆ—åˆ é™¤ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œè¾“å‡ºæ•°ç»„ä½¿ç”¨äº†O(Nâˆ’k+1) ç©ºé—´ï¼ŒåŒå‘é˜Ÿåˆ—ä½¿ç”¨äº† O(k)ã€‚</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>é€’å½’</tag>
        <tag>æ»‘åŠ¨çª—å£</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æ ‘çš„ä¸­åºéå†</title>
    <url>/2020/01/21/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/" target="_blank" rel="noopener">äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2020/01/21/äºŒå‰æ ‘çš„ä¸­åºéå†/1579622453083.png" alt="1579622453083"></p>
<p><strong>ä¸­åºéå†ï¼šå·¦-ä¸­-å³</strong></p>
<h4 id="æ–¹æ³•ä¸€ï¼šé€’å½’"><a href="#æ–¹æ³•ä¸€ï¼šé€’å½’" class="headerlink" title="æ–¹æ³•ä¸€ï¼šé€’å½’"></a>æ–¹æ³•ä¸€ï¼šé€’å½’</h4><p>å®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥å®ç°é€’å½’ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List &lt; Integer &gt; inorderTraversal(TreeNode root) &#123;</span><br><span class="line">        List &lt; Integer &gt; res = <span class="keyword">new</span> ArrayList &lt; &gt; ();</span><br><span class="line">        helper(root, res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">helper</span><span class="params">(TreeNode root, List &lt; Integer &gt; res)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (root.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                helper(root.left, res);</span><br><span class="line">            &#125;</span><br><span class="line">            res.add(root.val);</span><br><span class="line">            <span class="keyword">if</span> (root.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                helper(root.right, res);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚é€’å½’å‡½æ•° T(n) = 2 T(n/2)+1ã€‚<br>ç©ºé—´å¤æ‚åº¦ï¼šæœ€åæƒ…å†µä¸‹éœ€è¦ç©ºé—´O(n)ï¼Œå¹³å‡æƒ…å†µä¸ºO(logn)ã€‚</p>
<h4 id="æ–¹æ³•äºŒï¼šè¿­ä»£"><a href="#æ–¹æ³•äºŒï¼šè¿­ä»£" class="headerlink" title="æ–¹æ³•äºŒï¼šè¿­ä»£"></a>æ–¹æ³•äºŒï¼šè¿­ä»£</h4><p>é¢œè‰²æ ‡è®°æ³•ï¼š</p>
<blockquote>
<p>ä½œè€…ï¼šhzhu212<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/solution/yan-se-biao-ji-fa-yi-chong-tong-yong-qie-jian-ming/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/binary-tree-inorder-traversal/solution/yan-se-biao-ji-fa-yi-chong-tong-yong-qie-jian-ming/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</p>
</blockquote>
<p>å…¶æ ¸å¿ƒæ€æƒ³å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä½¿ç”¨é¢œè‰²æ ‡è®°èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œæ–°èŠ‚ç‚¹ä¸ºç™½è‰²ï¼Œå·²è®¿é—®çš„èŠ‚ç‚¹ä¸ºç°è‰²ã€‚</li>
<li>å¦‚æœé‡åˆ°çš„èŠ‚ç‚¹ä¸ºç™½è‰²ï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºç°è‰²ï¼Œç„¶åå°†å…¶å³å­èŠ‚ç‚¹ã€è‡ªèº«ã€å·¦å­èŠ‚ç‚¹ä¾æ¬¡å…¥æ ˆã€‚</li>
<li>å¦‚æœé‡åˆ°çš„èŠ‚ç‚¹ä¸ºç°è‰²ï¼Œåˆ™å°†èŠ‚ç‚¹çš„å€¼è¾“å‡ºã€‚</li>
</ul>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inorderTraversal</span><span class="params">(self, root: TreeNode)</span> -&gt; List[int]:</span></span><br><span class="line">        WHITE, GRAY = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">        res = []</span><br><span class="line">        stack = [(WHITE, root)]</span><br><span class="line">        <span class="keyword">while</span> stack:</span><br><span class="line">            color, node = stack.pop()</span><br><span class="line">            <span class="keyword">if</span> node == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> color == WHITE:</span><br><span class="line">                stack.append((WHITE, node.right))</span><br><span class="line">                stack.append((GRAY, node))</span><br><span class="line">                stack.append((WHITE, node.left))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                res.append(node.val)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<p>å¦‚è¦å®ç°å‰åºã€ååºéå†ï¼Œåªéœ€è¦è°ƒæ•´å·¦å³å­èŠ‚ç‚¹çš„å…¥æ ˆé¡ºåºå³å¯ã€‚</p>
<h5 id="å¦ä¸€ç§å†™æ³•ï¼š"><a href="#å¦ä¸€ç§å†™æ³•ï¼š" class="headerlink" title="å¦ä¸€ç§å†™æ³•ï¼š"></a>å¦ä¸€ç§å†™æ³•ï¼š</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inorderTraversal</span><span class="params">(self, root: TreeNode)</span> -&gt; List[int]:</span></span><br><span class="line">        stack = []</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">while</span> root:</span><br><span class="line">                stack.append(root)</span><br><span class="line">                root = root.left</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> stack:</span><br><span class="line">                <span class="keyword">return</span> res</span><br><span class="line">            root = stack.pop()</span><br><span class="line">            res.append(root.val)</span><br><span class="line">            root = root.right</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/21/äºŒå‰æ ‘çš„ä¸­åºéå†/1579622422214.png" alt="1579622422214"></p>
<h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">ç®—æ³•</th>
<th style="text-align:left">æ‰§è¡Œç”¨æ—¶</th>
<th style="text-align:left">å†…å­˜æ¶ˆè€—</th>
<th style="text-align:left">è¯­è¨€</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">æ–¹æ³•äºŒï¼šè¿­ä»£ï¼ˆå¦ä¸€ç§å†™æ³•ï¼‰</td>
<td style="text-align:left">28 ms</td>
<td style="text-align:left">13 MB</td>
<td style="text-align:left">Python3</td>
</tr>
<tr>
<td style="text-align:left">æ–¹æ³•äºŒï¼šè¿­ä»£ï¼ˆé¢œè‰²æ ‡ä»·æ³•ï¼‰</td>
<td style="text-align:left">36 ms</td>
<td style="text-align:left">12.7 MB</td>
<td style="text-align:left">Python3</td>
</tr>
<tr>
<td style="text-align:left">æ–¹æ³•ä¸€ï¼šé€’å½’</td>
<td style="text-align:left">0 ms</td>
<td style="text-align:left">34.6 MB</td>
<td style="text-align:left">Java</td>
</tr>
</tbody>
</table>
</div>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>äºŒå‰æ ‘</tag>
        <tag>é€’å½’</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ </title>
    <url>/2020/01/21/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%AD%E7%AC%ACk%E5%B0%8F%E7%9A%84%E5%85%83%E7%B4%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/kth-smallest-element-in-a-bst/" target="_blank" rel="noopener">äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2020/01/21/äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ /1579620616705.png" alt="1579620616705"></p>
<p><img src="/2020/01/21/äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ /1579620662544.png" alt="1579620662544"></p>
<p>æ­¤é¢˜ä¸<a href="https://qypx.github.io/2020/01/21/äºŒå‰æ ‘çš„ä¸­åºéå†/">äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a>ç±»ä¼¼ï¼Œåªéœ€ç¨åŠ å˜åŒ–ã€‚</p>
<h4 id="æ–¹æ³•ä¸€ï¼šé€’å½’"><a href="#æ–¹æ³•ä¸€ï¼šé€’å½’" class="headerlink" title="æ–¹æ³•ä¸€ï¼šé€’å½’"></a>æ–¹æ³•ä¸€ï¼šé€’å½’</h4><p>é€šè¿‡æ„é€  BST çš„ä¸­åºéå†åºåˆ—ï¼Œåˆ™ç¬¬ <code>k-1</code> ä¸ªå…ƒç´ å°±æ˜¯ç¬¬ <code>k</code> å°çš„å…ƒç´ ã€‚</p>
<p><img src="/2020/01/21/äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ /7dc3fe454519e27105c5aaf57d20b26137bd77c56bb0289830bf18116627de12-file_1579413216156.jpg" alt="7dc3fe454519e27105c5aaf57d20b26137bd77c56bb0289830bf18116627de12-file_1579413216156"></p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">kthSmallest</span><span class="params">(TreeNode root, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; arr = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        inorder(root,arr);</span><br><span class="line">        <span class="keyword">return</span> arr.get(k-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inorder</span><span class="params">(TreeNode root, List arr)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(root.left!=<span class="keyword">null</span>)</span><br><span class="line">                inorder(root.left, arr);</span><br><span class="line">            arr.add(root.val);</span><br><span class="line">            <span class="keyword">if</span>(root.right!=<span class="keyword">null</span>)</span><br><span class="line">                inorder(root.right, arr);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/21/äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ /1579620513520.png" alt="1579620513520"></p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œéå†äº†æ•´ä¸ªæ ‘ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œç”¨äº†ä¸€ä¸ªæ•°ç»„å­˜å‚¨ä¸­åºåºåˆ—ã€‚</p>
<h4 id="æ–¹æ³•äºŒï¼šè¿­ä»£"><a href="#æ–¹æ³•äºŒï¼šè¿­ä»£" class="headerlink" title="æ–¹æ³•äºŒï¼šè¿­ä»£"></a>æ–¹æ³•äºŒï¼šè¿­ä»£</h4><p>åœ¨æ ˆçš„å¸®åŠ©ä¸‹ï¼Œå¯ä»¥å°†æ–¹æ³•ä¸€çš„é€’å½’è½¬æ¢ä¸ºè¿­ä»£ï¼Œè¿™æ ·å¯ä»¥åŠ å¿«é€Ÿåº¦ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ä¸ç”¨éå†æ•´ä¸ªæ ‘ï¼Œå¯ä»¥åœ¨æ‰¾åˆ°ç­”æ¡ˆååœæ­¢ã€‚</p>
<p><img src="/2020/01/21/äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ /25159a5137867644b75f203ee1917645d2cd454d8f4871e371d7edfa67bef083-file_1579413216176.jpg" alt="25159a5137867644b75f203ee1917645d2cd454d8f4871e371d7edfa67bef083-file_1579413216176"></p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kthSmallest</span><span class="params">(self, root: TreeNode, k: int)</span> -&gt; int:</span></span><br><span class="line">        stack = []</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">while</span> root:</span><br><span class="line">                stack.append(root)</span><br><span class="line">                root = root.left</span><br><span class="line">            root = stack.pop()</span><br><span class="line">            k -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> k == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> root.val</span><br><span class="line">            root = root.right</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/21/äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ /1579621550313.png" alt="1579621550313"></p>
<h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(H+k)ï¼Œå…¶ä¸­ HæŒ‡çš„æ˜¯æ ‘çš„é«˜åº¦ï¼Œç”±äºæˆ‘ä»¬å¼€å§‹éå†ä¹‹å‰ï¼Œè¦å…ˆå‘ä¸‹è¾¾åˆ°å¶ï¼Œå½“æ ‘æ˜¯ä¸€ä¸ªå¹³è¡¡æ ‘æ—¶ï¼šå¤æ‚åº¦ä¸ºO(logN+k)ã€‚å½“æ ‘æ˜¯ä¸€ä¸ªä¸å¹³è¡¡æ ‘æ—¶ï¼šå¤æ‚åº¦ä¸º O(N+k)ï¼Œæ­¤æ—¶æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½åœ¨å·¦å­æ ‘ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(H+k)ã€‚å½“æ ‘æ˜¯ä¸€ä¸ªå¹³è¡¡æ ‘æ—¶ï¼šO(logN+k)ã€‚å½“æ ‘æ˜¯ä¸€ä¸ªéå¹³è¡¡æ ‘æ—¶ï¼šO(N+k)ã€‚</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>äºŒå‰æ ‘</tag>
        <tag>é€’å½’</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€é•¿è¿ç»­åºåˆ—</title>
    <url>/2020/01/20/%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E5%BA%8F%E5%88%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/longest-consecutive-sequence/" target="_blank" rel="noopener">æœ€é•¿è¿ç»­åºåˆ—ï¼ˆéš¾åº¦ï¼šå›°éš¾ï¼‰</a></p>
<p><img src="/2020/01/20/æœ€é•¿è¿ç»­åºåˆ—/1579513410172.png" alt="1579513410172"></p>
<h4 id="æ–¹æ³•ï¼šå“ˆå¸Œè¡¨ï¼ˆHashSetï¼‰"><a href="#æ–¹æ³•ï¼šå“ˆå¸Œè¡¨ï¼ˆHashSetï¼‰" class="headerlink" title="æ–¹æ³•ï¼šå“ˆå¸Œè¡¨ï¼ˆHashSetï¼‰"></a>æ–¹æ³•ï¼šå“ˆå¸Œè¡¨ï¼ˆHashSetï¼‰</h4><p>å› ä¸ºä¸€ä¸ªåºåˆ—å¯èƒ½åœ¨ <code>nums</code> æ•°ç»„çš„ä»»æ„ä¸€ä¸ªæ•°å­—å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥æšä¸¾æ¯ä¸ªæ•°å­—ä½œä¸ºåºåˆ—çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œæœç´¢æ‰€æœ‰çš„å¯èƒ½æ€§ ï¼ˆæš´åŠ›æ³•ï¼‰ã€‚ä¼˜åŒ–ï¼šå°†æ•°ç»„ä¸­çš„æ•°å­—ç”¨HashSetä¿å­˜ï¼Œå®ç°O(1)çš„æ—¶é—´æŸ¥è¯¢ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬åªå¯¹ <code>å½“å‰æ•°å­— - 1</code> ä¸åœ¨å“ˆå¸Œè¡¨é‡Œçš„æ•°å­—ï¼Œä½œä¸ºè¿ç»­åºåˆ—çš„ç¬¬ä¸€ä¸ªæ•°å­—å»æ‰¾å¯¹åº”çš„æœ€é•¿åºåˆ—ï¼Œè¿™æ˜¯å› ä¸ºå…¶ä»–æ•°å­—ä¸€å®šå·²ç»å‡ºç°åœ¨äº†æŸä¸ªåºåˆ—é‡Œã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestConsecutive</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.length &lt;= <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> nums.length;</span><br><span class="line">            </span><br><span class="line">        HashSet&lt;Integer&gt; hashSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> num:nums)</span><br><span class="line">            hashSet.add(num);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> maxLen = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> curLen = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(!hashSet.contains(nums[i]-<span class="number">1</span>))&#123;</span><br><span class="line">                <span class="keyword">int</span> curNum = nums[i];</span><br><span class="line">                <span class="keyword">while</span>(hashSet.contains(curNum+<span class="number">1</span>))&#123;</span><br><span class="line">                    curLen++;</span><br><span class="line">                    curNum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            maxLen = Math.max(maxLen,curLen);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxLen;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚å°½ç®¡åœ¨ for å¾ªç¯ä¸­åµŒå¥—äº†ä¸€ä¸ª while å¾ªç¯ï¼Œæ—¶é—´å¤æ‚åº¦çœ‹èµ·æ¥åƒæ˜¯äºŒæ¬¡æ–¹çº§åˆ«çš„ã€‚ä½†å…¶å®å®ƒæ˜¯çº¿æ€§çš„ç®—æ³•ã€‚å› ä¸ºåªæœ‰å½“ curNum é‡åˆ°äº†ä¸€ä¸ªåºåˆ—çš„å¼€å§‹ï¼Œ while å¾ªç¯æ‰ä¼šè¢«æ‰§è¡Œï¼ˆä¹Ÿå°±æ˜¯ curNum-1 ä¸åœ¨æ•°ç»„ nums é‡Œï¼‰ï¼Œ while å¾ªç¯åœ¨æ•´ä¸ªè¿è¡Œè¿‡ç¨‹ä¸­åªä¼šè¢«è¿­ä»£ n æ¬¡ã€‚è¿™æ„å‘³ç€å°½ç®¡çœ‹èµ·æ¥æ—¶é—´å¤æ‚åº¦ä¸º O(nâ‹…n) ï¼Œå®é™…è¿™ä¸ªåµŒå¥—å¾ªç¯åªä¼šè¿è¡ŒO(n+n)=O(n) æ¬¡ã€‚æ‰€æœ‰çš„è®¡ç®—éƒ½æ˜¯çº¿æ€§æ—¶é—´çš„ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)çš„ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚ä¸ºäº†å®ç° O(1)çš„æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯¹å“ˆå¸Œè¡¨åˆ†é…çº¿æ€§ç©ºé—´ï¼Œä»¥ä¿å­˜ nums æ•°ç»„ä¸­çš„ O(n)ä¸ªæ•°å­—ã€‚</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>å“ˆå¸Œè¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>HashSet</title>
    <url>/2020/01/20/HashSet/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul>
<li>æ— åºåˆ—è¡¨HashSetæ˜¯é‡‡ç”¨hashè¡¨æ¥å®ç°çš„ã€‚å…¶ä¸­çš„å…ƒç´ æ²¡æœ‰æŒ‰é¡ºåºæ’åˆ—ï¼Œadd()ã€remove()ä»¥åŠcontains()ç­‰æ–¹æ³•éƒ½æ˜¯å¤æ‚åº¦ä¸ºO(1)çš„æ–¹æ³•ã€‚ </li>
<li>æ— åºåˆ—è¡¨åˆ—è¡¨TreeSetæ˜¯é‡‡ç”¨æ ‘ç»“æ„å®ç°(çº¢é»‘æ ‘ç®—æ³•)ã€‚å…ƒç´ æ˜¯æŒ‰é¡ºåºè¿›è¡Œæ’åˆ—ï¼Œä½†æ˜¯add()ã€remove()ä»¥åŠcontains()ç­‰æ–¹æ³•éƒ½æ˜¯å¤æ‚åº¦ä¸ºO(log (n))çš„æ–¹æ³•ã€‚å®ƒè¿˜æä¾›äº†ä¸€äº›æ–¹æ³•æ¥å¤„ç†æ’åºçš„setï¼Œå¦‚first(), last(), headSet(), tailSet()ç­‰ç­‰</li>
</ul>
<p><a href="https://leetcode-cn.com/problems/longest-consecutive-sequence/solution/zui-chang-lian-xu-xu-lie-by-leetcode/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/longest-consecutive-sequence/solution/zui-chang-lian-xu-xu-lie-by-leetcode/</a></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†ç‚¹</tag>
        <tag>HashSet</tag>
      </tags>
  </entry>
  <entry>
    <title>Feeding Data to your Cluster - Kafka &amp; Flume</title>
    <url>/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h3 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h3><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579416693703.png" alt="1579416693703"></p>
<h4 id="What-is-streaming"><a href="#What-is-streaming" class="headerlink" title="What is streaming?"></a>What is streaming?</h4><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579417084705.png" alt="1579417084705"></p>
<p>With streaming technologies such as Kafka, you can actually process new data as itâ€™s generated into your cluster, maybe youâ€™re gonna save it into HDFS, maybe youâ€™ll save it into HBase or some other database or maybe youâ€™ll actually process it in real time as it comes in.</p>
<p>Usually when weâ€™re talking about Big Data, thereâ€™s a big flow of it coming in all the time and you want to be dealing with it as it comes instead of storing it up and dealing with it in batches. </p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579417930302.png" alt="1579417930302"></p>
<h4 id="Enter-Kafka"><a href="#Enter-Kafka" class="headerlink" title="Enter Kafka"></a>Enter Kafka</h4><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579418299281.png" alt="1579418299281"></p>
<p>The good thing is that Kafka because it stores it, consumers can catch up from where they last left off, so it will maintain the point where each consumer left off and allow them to just pick up whenever they want to. So it can publish data in real time to your consumers, but if your consumer goes off line or just wants to catch up from some point in the past, it can do that too.</p>
<a id="more"></a>
<h4 id="Kafka-architecture"><a href="#Kafka-architecture" class="headerlink" title="Kafka architecture"></a>Kafka architecture</h4><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579419075767.png" alt="1579419075767"></p>
<p>Even though it says app, that doesnâ€™t necessarily mean youâ€™re going to be developing an app in order to use Kafka, often there are ones you can just use off the shelf and Kafka even comes with some built-in that might serve your purposes.</p>
<p>You can make these pretty fancy systems that are very scalable, very fast, that can transform data and store it, and do whatever you want with it really, as it comes in.</p>
<h4 id="How-Kafka-scales"><a href="#How-Kafka-scales" class="headerlink" title="How Kafka scales"></a>How Kafka scales</h4><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579419261062.png" alt="1579419261062"></p>
<h3 id="Letâ€™s-play"><a href="#Letâ€™s-play" class="headerlink" title="Letâ€™s play"></a>Letâ€™s play</h3><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579419425921.png" alt="1579419425921"></p>
<h4 id="Activity-Setting-up-Kafka-and-publishing-some-data"><a href="#Activity-Setting-up-Kafka-and-publishing-some-data" class="headerlink" title="[Activity] Setting up Kafka, and publishing some data"></a>[Activity] Setting up Kafka, and publishing some data</h4><p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963832#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963832#overview</a></p>
<p>Kafka depends on ZooKeeper to keep track of what topics exists.</p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579420886266.png" alt="1579420886266"></p>
<p>in the real world, this would be massive floods of data coming in from massive web server fleets and things. It can handle that and publish it scalably and reliably to wherever it needs to go. So thatâ€™s really what itâ€™s all about, itâ€™s a scalable and reliable mechanism for publishing and subscribing to massive data streams.</p>
<h4 id="Activity-Publishing-web-logs-with-Kafka"><a href="#Activity-Publishing-web-logs-with-Kafka" class="headerlink" title="[Activity] Publishing web logs with Kafka"></a>[Activity] Publishing web logs with Kafka</h4><p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963846#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963846#overview</a></p>
<p>So letâ€™s do something a little bit closer to what you might do in reality. Letâ€™s use a built-in Kafka connector to actually monitor a file and publish new lines on that file to a given Kafka topic that then get written out to some other file somewhere else.</p>
<p>ä½¿ç”¨çš„ä¸€äº›Linuxè¯­å¥ï¼š</p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579422270057.png" alt="1579422270057"></p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579422355086.png" alt="1579422355086"></p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579422381621.png" alt="1579422381621"></p>
<h3 id="Flume"><a href="#Flume" class="headerlink" title="Flume"></a>Flume</h3><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579422490612.png" alt="1579422490612"></p>
<h4 id="What-is-Flume"><a href="#What-is-Flume" class="headerlink" title="What is Flume?"></a>What is Flume?</h4><p>You can really think of Flume as a bonafide part of the Hadoop ecosystem, as opposed to Kafka which is much more general purpose in its design.</p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579423582139.png" alt="1579423582139"></p>
<p>Now you might think to yourself â€œWhy canâ€™t I just directly transfer data across to my HDFS cluster?â€ Well, you need some sort of a buffer in between these two things.</p>
<h4 id="Flume-Agent"><a href="#Flume-Agent" class="headerlink" title="Flume Agent"></a>Flume Agent</h4><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579423781528.png" alt="1579423781528"></p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579425760102.png" alt="1579425760102"></p>
<p>Flumeä¸Kafkaçš„ä¸€ä¸ªåŒºåˆ«ï¼šItâ€™s not really like Kafka where Kafka just stores up data indefinitely and people can pull that data in whenever they want to. Kafka does expire data after some amount of time, but with Flume, basically your sink grabs data from Flume and once itâ€™s been grabbed from the channel it gets deleted, so flume does not hang onto your messages or your events any longer than it needs to, as soon as your sync processes it, it throws it away. Kafka is a little bit more easier to set up if you have data going to multiple different places that might be pulling at different rates.</p>
<h4 id="Built-in-Source-Types"><a href="#Built-in-Source-Types" class="headerlink" title="Built-in Source Types"></a>Built-in Source Types</h4><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579425301835.png" alt="1579425301835"></p>
<h4 id="Built-in-Sink-Types"><a href="#Built-in-Sink-Types" class="headerlink" title="Built-in Sink Types"></a>Built-in Sink Types</h4><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579424846813.png" alt="1579424846813"></p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579424947616.png" alt="1579424947616"></p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579425396680.png" alt="1579425396680"></p>
<p>Itâ€™s basically a way of smoothing out the traffic between the data coming in from your logs or whatever your source might be and where youâ€™re writing it to.</p>
<h3 id="Letâ€™s-play-1"><a href="#Letâ€™s-play-1" class="headerlink" title="Letâ€™s play"></a>Letâ€™s play</h3><h4 id="Activity-Set-up-Flume-and-publish-logs-with-it"><a href="#Activity-Set-up-Flume-and-publish-logs-with-it" class="headerlink" title="[Activity] Set up Flume and publish logs with it"></a>[Activity] Set up Flume and publish logs with it</h4><p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963868#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963868#overview</a></p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579425190618.png" alt="1579425190618"></p>
<p>All you really need to do to get Flume running is write a configuration file that defines what sources channels and sinks are associated with each agent that you want in your Flume setup.</p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579425924768.png" alt="1579425924768"></p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579427003629.png" alt="1579427003629"></p>
<h4 id="Activity-Set-up-Flume-to-monitor-a-directory-and-store-its-data-in-HDFS"><a href="#Activity-Set-up-Flume-to-monitor-a-directory-and-store-its-data-in-HDFS" class="headerlink" title="[Activity] Set up Flume to monitor a directory and store its data in HDFS"></a>[Activity] Set up Flume to monitor a directory and store its data in HDFS</h4><p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579425361515.png" alt="1579425361515"></p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579426725240.png" alt="1579426725240"></p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579426873190.png" alt="1579426873190"></p>
<p>What ends up happening is that we get new subdirectories being generated for each 10 minute interval that goes by.</p>
<p><img src="/2020/01/19/Feeding-Data-to-your-Cluster-Kafka/1579427060001.png" alt="1579427060001"></p>
]]></content>
      <categories>
        <category>Hadoop</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
        <tag>Kafka</tag>
        <tag>Flume</tag>
      </tags>
  </entry>
  <entry>
    <title>Using non-relational data stores with Hadoop - NoSQL &amp; HBase &amp; MongoDB</title>
    <url>/2020/01/16/Using-non-relational-data-stores-with-Hadoop/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h3 id="Why-NoSQL"><a href="#Why-NoSQL" class="headerlink" title="Why NoSQL?"></a>Why NoSQL?</h3><p>Weâ€™ve talked about integrating Hadoop with SQL solutions - MySQL - RDBMSs, if you will - relational database management systems - and those are very handy for giving you the power of a rich analytical query language like SQL to answer your business questions. But, you know, they do take a little bit of time to execute. So <strong>if youâ€™re doing analytic work, relational databases are awesome. </strong>Even if youâ€™re running a small, like, say, an internal web site or a very small-scale web site, something like MySQL can even vend that data to the outside world pretty well.</p>
<p>BUT letâ€™s imagine you need to take things up to the next level. Youâ€™re going to start to run into some limitations with SQL and relational database systems.</p>
<p>Maybe you donâ€™t really need the ability to issue arbitrary queries across your entire dataset. Maybe all you need is just the ability to <strong>very quickly answer a specific question </strong>like â€œWhat movie should I recommend for this customer?â€ or â€œWhat web pages has this customer looked at in the past?â€ </p>
<p>And if you need to do that <strong>at a very large scale very quickly across a massive dataset</strong>, something like MySQL might not cut it. You know, if youâ€™re an Amazon or a Google, you might need something that can even <strong>handle tens of thousands of transactions per second without breaking a sweat. And thatâ€™s where NoSQL comes in.</strong></p>
<p>These are alternative database systems that <em>give up</em> a rich query language like SQL <em>for</em> the ability to very quickly and at great scale answer very simple questions. So for systems like that you want something called NoSQL, also known as non-relational databases, or not only SQL - thatâ€™s a term that comes up sometimes, too. And <strong>these systems are built to scale horizontally forever, and also built to be very fast and very resilient.</strong></p>
<p>Up first, letâ€™s talk about HBase. HBase is actually built on top of HDFS, so it allows you to have a very fast, very scalable transactional system to query your data thatâ€™s stored on a horizontally partitioned HDFS file system. So if you need to expose your massive data thatâ€™s sitting on your Hadoop cluster, Hbase can be a great way to expose that data to a web service, to web applications, anything that needs to operate very quickly and at a very high scale.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579161940219.png" alt="1579161940219"></p>
<a id="more"></a>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579162098786.png" alt="1579162098786"></p>
<p>if you think about things like Amazon or Google, people are always buying new things or always searching for new things, new web sites are always coming out, so this data is always just getting bigger and bigger and bigger over time. So that has to live on some sort of a distributed cluster, like a Hadoop cluster. Youâ€™re just not going to fit that into a single hard drive on a single database. You need something thatâ€™s more horizontally scalable, where you can keep on adding capacity as your data continues to grow over time.</p>
<p>Itâ€™s not just about random access to planet-size data - itâ€™s also planet-size access to that data. Imagine youâ€™re running a web site like Amazon, where you need to very quickly retrieve the list of things people ordered, or the things they looked at, or what movies they should be recommended, or on Google - what they searched for in the past. That all has to happen at extremely large scale. Tens of thousands of people per second might be hitting your service to actually retrieve this information in real time.</p>
<p>Again, a single Oracle database or MySQL database is not gonna cut it, when youâ€™re talking about that kind of transaction rates on that large of a data set.</p>
<p>è¿‡å»æ²¡æœ‰NoSQL, Hadoopæ—¶ï¼Œé‡‡ç”¨çš„æ–¹æ³•ï¼š</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579162897675.png" alt="1579162897675"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579163190865.png" alt="1579163190865"></p>
<p>All you need is an API that says, â€œgiven this customer ID, give me back this list of informationâ€, or â€œgiven</p>
<p>this item identifier, give me back this information about this itemâ€. So, more often than not, all you really need at runtime is a simple API that allows you to get information for a given key or put information into a given key.</p>
<p>These are basically, key-value data stores at a high level. And if thatâ€™s all you need, then you donâ€™t need a big fancy relational database. All you need is a more scalable system that can be very easily horizontally partitioned for given key ranges, that just answers the question: â€œGive me this stuff for this keyâ€.</p>
<p>And you can always do both, too. For example, you can have a Hadoop cluster that youâ€™re running Hive on, or Pig, or Spark, to actually answer the more complex questions that you have, but for the things you are doing at a very high scale, at very high transaction rates, you can bolt on a NoSQL database to actually handle that part of the problem. Itâ€™s not a question of one or the other - itâ€™s about having the right tools in place for the right jobs.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579163943922.png" alt="1579163943922"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579165798303.png" alt="1579165798303"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579165874566.png" alt="1579165874566"></p>
<h3 id="What-is-HBase"><a href="#What-is-HBase" class="headerlink" title="What is HBase"></a>What is HBase</h3><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579166108894.png" alt="1579166108894"></p>
<p>HBase is built on top of HDFS. So if youâ€™re storing massive datasets on an HDFS file system, HBase can be used to actually vend that to the outside world at a very large scale.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579170600274.png" alt="1579170600274"></p>
<p>Just like every other NoSQL solution, it <strong>does not have a query language, but it does have an API</strong> that can very quickly answer the question â€œwhat are the values for this key?â€ or â€œstore this value for this keyâ€.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579170812851.png" alt="1579170812851"></p>
<h4 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579171017155.png" alt="1579171017155"></p>
<h4 id="HBase-architecture"><a href="#HBase-architecture" class="headerlink" title="HBase architecture"></a>HBase architecture</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579172096734.png" alt="1579172096734"></p>
<p>Basically, itâ€™s split up into different region servers. This is the core of HBase itself. When we talk about regions, weâ€™re talking about ranges of keys, so itâ€™s just like sharding or range partitioning in more traditional database systems. But the magic of it all is that it can automatically adapt, so, as your data grows, it can automatically repartition things, and if you add more servers to the mix, it can automatically deal with that at runtime.</p>
<p>So thereâ€™s a very complex mechanism that involves write-ahead commit logs and, merging things together over time asynchronously. But you donâ€™t have to worry about those details - HBase does it for you. All you need to know is that it can automatically distribute your data amongst a fleet of region servers, so an entire cluster, if you will.</p>
<p>Now, when you have an application thatâ€™s actually talking to HBase - a web application or a web server - itâ€™s not actually going to talk to these master nodes directly, itâ€™s going to be talking to region servers directly.</p>
<h4 id="HBase-data-model"><a href="#HBase-data-model" class="headerlink" title="HBase data model"></a>HBase data model</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579172733321.png" alt="1579172733321"></p>
<p>Whatâ€™s different about HBase is that it has the concept of column families. So you donâ€™t define a fixed set of columns for each row in your database. Instead you define column families, and each column family can contain a very large number of individual columns.</p>
<p>This comes in handy where you have cases of sparse data.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579174693898.png" alt="1579174693898"></p>
<h4 id="Ways-to-access-HBase"><a href="#Ways-to-access-HBase" class="headerlink" title="Ways to access HBase"></a>Ways to access HBase</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579175017006.png" alt="1579175017006"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579174915921.png" alt="1579174915921"></p>
<h3 id="Activity-Import-movie-ratings-into-HBase"><a href="#Activity-Import-movie-ratings-into-HBase" class="headerlink" title="[Activity] Import movie ratings into HBase"></a>[Activity] Import movie ratings into HBase</h3><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579178657253.png" alt="1579178657253"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579179141807.png" alt="1579179141807"></p>
<p>Now weâ€™re going to run a REST service on top of HBase. Itâ€™s just a service that you can query through</p>
<p>HTTP requests, and weâ€™re going to write a client that actually queries that service to store and retrieve</p>
<p>data through the REST service.</p>
<p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963426#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963426#overview</a></p>
<p>è¿”å›ç»“æœï¼š</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579179897880.png" alt="1579179897880"></p>
<h3 id="MongoDB-Overview"><a href="#MongoDB-Overview" class="headerlink" title="MongoDB Overview"></a>MongoDB Overview</h3><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579180346655.png" alt="1579180346655"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579180457304.png" alt="1579180457304"></p>
<p>CAP theorem: <strong>MongoDB chooses consistency and partition-tolerance.</strong></p>
<p>Since it dose have to deal with big data, partition-tolerance is something is has to do, and MongoDB chooses consistency over availability.</p>
<p>So MongoDB has a single master, a single primary database that you have to talk to all the time to ensure consistency. But if that master goes down, it will result in a period of unavailability, while a new primary database is put into place.</p>
<h4 id="Document-based-data-model"><a href="#Document-based-data-model" class="headerlink" title="Document-based data model"></a>Document-based data model</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579235814767.png" alt="1579235814767"></p>
<p>The big thing thatâ€™s different about MongoDB is that you can stick pretty much anything you want into MongoDB - basically, any JSON blob of data you can shove into a document in MongoDB. It doesnâ€™t have to be structured, you donâ€™t have to have the same schema across each document. You can put whatever you want in there.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579236174990.png" alt="1579236174990"></p>
<p>You still need to think about what the queries are you going to be performing on this database and design your database schema accordingly. Think about what indices you might need for fast lookups for the queries youâ€™re going to do. At the end of the day, itâ€™s still a NoSQL database, so you cannot do joins efficiently, so you want to make sure your schema is denormalized as much as you can. </p>
<h4 id="MongoDB-terminology"><a href="#MongoDB-terminology" class="headerlink" title="MongoDB terminology"></a>MongoDB terminology</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579238197250.png" alt="1579238197250"></p>
<p>åœ¨MongoDBä¸­æˆ‘ä»¬è®¨è®º Databse, Collection, å’Œ Document, è€Œä¸æ˜¯ Database, Table, å’Œ Row.</p>
<p>A MongoDB database contains collections, and a collection contains a collection of documents.</p>
<p>And the main restriction here is simply that you cannot move data between collections across different databases, so if you do need to reference data between different collections, they do need to be within the same database.</p>
<h4 id="Replication-Sets"><a href="#Replication-Sets" class="headerlink" title="Replication Sets"></a>Replication Sets</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579250924977.png" alt="1579250924977"></p>
<p>MongoDB has a single-master architecture, the idea being that we want to have consistency over availability, but you can have these secondary databases that maintain copies over time from your primary database, so, as writes happen to your primary database, those writes get replicated through an operation log to any secondary nodes that you might have attached to it.</p>
<p>The way that replication chain works is kind of arbitrary. It actually just tries to figure out which server can it talk to most quickly.</p>
<p>And I want to stress again that we havenâ€™t even talked about big data yet. What weâ€™re talking about here in replica sets is just having a single monolithic MongoDB server, where all of the data sits on that single server, and weâ€™re replicating that data to backup servers.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579254081608.png" alt="1579254081608"></p>
<h4 id="Sharding-How-MongoDB-handles-big-data"><a href="#Sharding-How-MongoDB-handles-big-data" class="headerlink" title="Sharding (How MongoDB handles big data)"></a>Sharding (How MongoDB handles big data)</h4><p>For actually scaling out data across more than one server with MongoDB, we need to set up something called sharding.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579254450944.png" alt="1579254450944"></p>
<p>The way sharding works is that we actually have multiple replica sets, where each replica set is responsible for some range of values on some indexed value in my database. So in order to get sharding to work, it requires that you set up an index on some unique value on your collection, and that index is used to actually balance the load of information among multiple replica sets, and then on each application server, whatever youâ€™re using to talk to MongoDB, youâ€™ll run a process called â€œmongosâ€, and â€œmongosâ€ talks to exactly three configuration servers that you have running somewhere that knows about how things are partitioned and then uses that to figure out which replica set do I talk to to get the information that I want.</p>
<p>â€œmongosâ€ is running something called a balancer in the background. So, over time, if it finds that it actually doesnâ€™t have an even distribution of values in whatever field youâ€™re partitioning on, it can rebalance things across your replica sets in real time over time.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579254879640.png" alt="1579254879640"></p>
<h4 id="Neat-Things-about-MongoDB"><a href="#Neat-Things-about-MongoDB" class="headerlink" title="Neat Things about MongoDB"></a>Neat Things about MongoDB</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579255204023.png" alt="1579255204023"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579255278039.png" alt="1579255278039"></p>
<h3 id="Activity-Install-MongoDB-and-integrate-Spark-with-MongoDB"><a href="#Activity-Install-MongoDB-and-integrate-Spark-with-MongoDB" class="headerlink" title="[Activity] Install MongoDB and integrate Spark with MongoDB"></a>[Activity] Install MongoDB and integrate Spark with MongoDB</h3><p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963458#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963458#overview</a></p>
<p>Weâ€™re going to read in the â€œu.userâ€ data file from the MovieLens dataset, convert that into a dataframe in Spark and then write that dataframe out to MongoDB, and then weâ€™re going to read it back and do a little query on it.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579328591006.png" alt="1579328591006"></p>
<p>What weâ€™re not doing is loading this data into Spark locally and then running a query on it - what itâ€™s</p>
<p>actually doing is figuring out how do I translate this SQL query into a MongoDB query and actually</p>
<p>execute that on MongoDB and return the results back from MongoDB.</p>
<h3 id="Activity-Using-the-MongoDB-Shell"><a href="#Activity-Using-the-MongoDB-Shell" class="headerlink" title="[Activity] Using the MongoDB Shell"></a>[Activity] Using the MongoDB Shell</h3><p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963462#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963462#overview</a></p>
<p>å¯åŠ¨MongoDB Shell:</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579406411404.png" alt="1579406411404"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579331041897.png" alt="1579331041897"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579331085161.png" alt="1579331085161"></p>
<p>æ³¨æ„ä¸€ç‚¹ï¼šwe never set up an index. So when I said, â€œgo find user ID 100â€, it couldnâ€™t do that very efficiently, and I actually had to do a full table scan, because MongoDB doesnâ€™t automatically index things for you.</p>
<p>I can do <code>db.users.explain().find( {user_id: 100} )</code> , and that will do an explain on the query, telling you what it will do under the hood to actually execute the command â€œfindâ€ on the expression â€œ{user_id: 100}â€. And you can see here all itâ€™s doing is a scan on the â€œwinningPlanâ€, looking for user ID 100 going forward. So itâ€™s kind of just starts at the beginning of the entire database and chugs through it forward one record, one document at a time, until it stumbles across user ID 100, so, obviously, not the most efficient way of doing a lookup.</p>
<p>So to fix that, letâ€™s make an index. To do that, I can say, <code>db.users.createIndex( {user_id: 1} )</code> -and what this means is I want to create an index on the â€œuser_idâ€ field and the â€œ1â€ just means itâ€™s ascending. So thatâ€™s going to give you back a sort order thatâ€™s in ascending order, if you want to optimize sorts as well.</p>
<p>Once it has its index on the â€œuser_idâ€ field, it can much more quickly look up where to find a given document for that user ID.</p>
<p><strong>MongoDB does not set up an index for you on your primary key. You have to do it by hand, and if you forget to do it, your database is going to be horribly inefficient when you do lookups.</strong></p>
<p>Letâ€™s aggregate all of the users by occupation and figure out the average age for each occupation.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579405319292.png" alt="1579405319292"></p>
<p>In MongoDB things that start with a dollar sign mean that this has some sort of a special meaning to MongoDB, so â€œ$groupâ€ is a command that MongoDB recognizes.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579405698972.png" alt="1579405698972"></p>
<p>How many users are in our database?</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579405757587.png" alt="1579405757587"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579406239652.png" alt="1579406239652"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579406303820.png" alt="1579406303820"></p>
<h3 id="Choosing-a-database-technology"><a href="#Choosing-a-database-technology" class="headerlink" title="Choosing a database technology"></a>Choosing a database technology</h3><h4 id="Integration-considerations"><a href="#Integration-considerations" class="headerlink" title="Integration considerations"></a>Integration considerations</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579406708880.png" alt="1579406708880"></p>
<p>Different technologies have different connectors for different other technologies. </p>
<p>ä¾‹å¦‚, if you have a big analytics job thatâ€™s currently running in Apache Spark, then you probably want to limit yourself to external databases that can connect easily to Apache Spark.</p>
<p>åˆä¾‹å¦‚, Maybe you have some front-end system that actually depends on having a SQL interface to a back-end database, and youâ€™re thinking about moving from a monolithic relational database to a distributed non-relational database. In that case, it might make life a lot easier if the non-relational database youâ€™re moving to offers some sort of SQL-like interface that can be easily migrated to from your front-end application.</p>
<h4 id="Scaling-requirements"><a href="#Scaling-requirements" class="headerlink" title="Scaling requirements"></a>Scaling requirements</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579406971416.png" alt="1579406971416"></p>
<p>How much data are you really talking about? Is it going to grow unbounded over time?</p>
<p>If so, then you need some sort of a database technology that is not limited to the data that you can store on one PC, right? Youâ€™re going to have to look at something like Cassandra or MongoDB or HBase, where you can actually distribute the storage of your data across an entire cluster and scale horizontally instead of vertically.</p>
<p>Think, too, about your transaction rates: how many requests do you intend to get per second? You know, if weâ€™re talking about thousands, then, again, a single database server is not going to cut it. You need something thatâ€™s distributed, where you can spread out the load of those transactions more evenly.</p>
<h4 id="Support-considerations"><a href="#Support-considerations" class="headerlink" title="Support considerations"></a>Support considerations</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579407277634.png" alt="1579407277634"></p>
<p>So do you actually have the in-house expertise to spin up this new technology and actually configure it properly? Itâ€™s going to be harder than you think, especially if youâ€™re using this in the real world or in any sort of situation, where you have personally identifiable information in the mix from your end users. In that case, you need to make sure youâ€™re thinking very deeply about the <strong>security</strong> of your system, and the truth is most of the NoSQL databases we talked about, if you just configure them with their default settings, thereâ€™ll be no security at all. Anybody at all can connect to these things and retrieve data or write data into them, so you need to make sure you have someone available who knows what theyâ€™re doing for setting this up in a secure manner.</p>
<p>That might mean if you are in a big organization that has these experts in house, thatâ€™s great, donâ€™t even think about it - but if youâ€™re in a smaller organization, you might want to consider: does this technology Iâ€™m choosing actually offer professional paid support that will help guide me through these setup decisions and the initial administration of my server over time? Or are there administrators that I can outsource the ongoing administration to over time? So in this case, you know, a more corporate solution like MongoDB might actually be a good choice, because, you know, they have paid support, and even for the more open-source Apache projects, there are companies out there that do offer paid professional support for them as well, so do your homework and try to figure out: can I really do this on my own, and if not, what resources are out there in the marketplace to help me? </p>
<h4 id="CAP-considerations"><a href="#CAP-considerations" class="headerlink" title="CAP considerations"></a>CAP considerations</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579407517312.png" alt="1579407517312"></p>
<p>So again, the way to think about this is when youâ€™re thinking about the scale of your requirements, do you need to have partition tolerance? Do you have sufficient scale, where you know youâ€™re going to eventually need more than one server serving up the data just for handling the transactions youâ€™re talking about, and also for the scale of the data that youâ€™re talking about? If so, partition tolerance is non-negotiable, you need that one, and your only real choice in that case is consistency or availability.</p>
<p>And that will determine which one of these sides of the triangle you might want to lean toward. So the type of application will determine what you want there. Is it actually OK if your system goes down for a few seconds or a few minutes? If not, then availabilityâ€™s going to be your prime concern. Is it OK if you have eventual consistency, where, if you write something, people might get the old value back on subsequent reads for a few seconds? If so, who cares about consistency, right? Again, I would take availability instead. But if youâ€™re dealing with something thatâ€™s dealing with real transactional information like, you know, stock transactions or some sort of financial transactions, you might value consistency above all else, and in that case, you want to really focus on that corner of the triangle.</p>
<blockquote>
<p>æ³¨ï¼šNow, I should point out that the CAP theorem isnâ€™t really a hard-and-fast rule. The reality is these tradeoffs have become a little bit more loose in recent years. For example, consider Cassandra: is it really trading off consistency for availability and partition tolerance? Well, you can actually configure the amount of consistency that you want from Cassandra - you can tell it, â€œI want to make sure I get back the same result from every replica of this data before I actually consider that transaction to be finalâ€, and if youâ€™re running it in that mode, youâ€™re kind of getting all three.</p>
<p>The lines are getting blurred between these different tradeoffs over time. So the honest truth is any of these technologies can be made to work in pretty much any situation, if you try hard enough. Itâ€™s really a question of choosing the technology thatâ€™s best suited to the tradeoffs that you want to make.</p>
</blockquote>
<h4 id="Simplicity"><a href="#Simplicity" class="headerlink" title="Simplicity"></a>Simplicity</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579408720595.png" alt="1579408720595"></p>
<p>If you donâ€™t need to set up a highly complex NoSQL cluster and something that needs a lot of maintenance, like, you know, MongoDB or HBase, where you have all these external servers that maintain its configuration, donâ€™t do it, if you donâ€™t need to. </p>
<p><strong>Think about the minimum requirements that you need for your system and keep it as simple as possible.</strong></p>
<p>If you donâ€™t need to deal with massive scale, donâ€™t deploy a NoSQL database, if you donâ€™t already have one, right? Just use a MySQL instance somewhere, it will be fine.</p>
<p>So keep it simple, do not deploy a whole new system that does not have good expertise within your organization, unless you really need to. Simple technologies and simple architectures are going to be a lot easier to maintain.</p>
<h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h4><p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579408982980.png" alt="1579408982980"></p>
<p>Go with MySQL.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579409021695.png" alt="1579409021695"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579409163590.png" alt="1579409163590"></p>
<p>Well, first of all, step back and ask yourself, â€œdo I even have enough scale here to warrant a non-relational database at all? Why am I even thinking about this question - right? - if all Iâ€™m doing is analytics, thatâ€™s what Hadoop is for, thatâ€™s what Spark is for.â€</p>
<p>å¦‚æœåªæ˜¯éœ€è¦åˆ†æï¼šYou can import this data into HDFS on your cluster and analyze it offline. </p>
<p>å¦‚æœæ˜¯æƒ³è¦å¾ˆå¿«çš„å¾—åˆ°ç»“æœï¼šIf weâ€™re not talking about high transaction rates here, where we care about very quickly getting the answer to a specific query over and over and over again, thousands of times per second, - thatâ€™s the sort of a problem that NoSQL databases are meant for.</p>
<p>You could solve this problem just by importing your log data into HDFS, but it doesnâ€™t involve external databases at all. Once that data is residing on my HDFS cluster, I can write a Spark job that mines that data, assigns the appropriate structure to it, and it can actually run machine learning algorithms on it even using Sparkâ€™s MLlib.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579409497341.png" alt="1579409497341"></p>
<p>Just use your Hadoop cluster and the capabilities that the Hadoop ecosystem gives you, without resorting to outside database technologies.</p>
<p>Thereâ€™s no need here to set up an external database at all necessarily, unless you need to vend this data to a very large audience externally. So if you were actually building Google Analytics for real, where you had, you know, millions of people that wanted to hit it and get answers from it at once, then, sure, youâ€™d want to expose that through some sort of an external database system thatâ€™s integrated with your cluster.</p>
<p>But if youâ€™re just using this internally for analytic use, thereâ€™s no need to even talk about things like NoSQL or Mongo or Cassandra or something like that.</p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579409662825.png" alt="1579409662825"></p>
<p>Consistency:  itâ€™s OK if, for a few seconds after new recommendations have been computed for a user, that youâ€™re still getting the old recommendations.</p>
<p>So, thinking back to the CAP theorem, we care about availability, we care about partition tolerance very much, the thing that weâ€™re willing to give up, maybe, is consistency.</p>
<p>In that case, Cassandra might be a good choice. </p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579409873125.png" alt="1579409873125"></p>
<p><img src="/2020/01/16/Using-non-relational-data-stores-with-Hadoop/1579410043297.png" alt="1579410043297"></p>
<p>We posed this scenario, where youâ€™re building a massive stock trading system, where maybe you want to run a big analytics job on Hadoop or Spark in the background, but you still need to have some sort of a front-end interface to the actual stock trades themselves, so what would be a good choice of a database in this situation?</p>
<p>é€‰æ‹© MongoDB æˆ–è€… HBase éƒ½å¯ä»¥ã€‚å¯¹äº MongoDB, there is a big company behind it that makes its living selling support for it. å¦ä¸€æ–¹é¢ï¼ŒNow, there are other companies out there that do specialize in offering support for things like HBase or other Apache projects, so donâ€™t make that a hard decision there.</p>
]]></content>
      <tags>
        <tag>Hadoop</tag>
        <tag>HBase</tag>
        <tag>MongoDB</tag>
        <tag>NoSQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Using relational data stores with Hadoop â€”â€” Hive &amp; Sqoop</title>
    <url>/2020/01/15/Using-relational-data-stores-with-Hadoop-%E2%80%94%E2%80%94-Hive/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h2 id="HIVE"><a href="#HIVE" class="headerlink" title="HIVE"></a>HIVE</h2><p>We can actually make your Hadoop cluster look like a relational database through a technology called <strong>Hive</strong>. And thereâ€™s also ways of integrating a new Hadoop cluster with a MySQL database.</p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579064046135.png" alt="1579064046135"></p>
<h3 id="What-is-Hive"><a href="#What-is-Hive" class="headerlink" title="What is Hive?"></a>What is Hive?</h3><p>It lets you write standard SQL queries that look just like youâ€™d be using them on MySQL, but actually execute them on data thatâ€™s stored across your entire cluster, maybe on an HDFS cluster as well.</p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579064255091.png" alt="1579064255091"></p>
<h4 id="Why-Hive"><a href="#Why-Hive" class="headerlink" title="Why Hive"></a>Why Hive</h4><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579082214734.png" alt="1579082214734"></p>
<h4 id="Why-not-Hive"><a href="#Why-not-Hive" class="headerlink" title="Why not Hive"></a>Why not Hive</h4><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579083363568.png" alt="1579083363568"></p>
<p>Itâ€™s not really meant for being hit with tons of queries all at once, from a website or something like that. Thatâ€™s where you use something like HBase instead.</p>
<p>Hive is a bunch of smoke and mirrors to make it look like a database, so you can issue SQL queries on it, but it isnâ€™t really.</p>
<a id="more"></a>
<h4 id="HiveQL"><a href="#HiveQL" class="headerlink" title="HiveQL"></a>HiveQL</h4><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579084456353.png" alt="1579084456353"></p>
<h3 id="Activity-Use-Hive-to-find-the-most-popular-movie"><a href="#Activity-Use-Hive-to-find-the-most-popular-movie" class="headerlink" title="[Activity] Use Hive to find the most popular movie"></a>[Activity] Use Hive to find the most popular movie</h3><p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963170#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963170#overview</a></p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579085359675.png" alt="1579085359675"></p>
<p>æˆ–å†™æˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT title, COUNT(movieID) AS ratingCount</span><br><span class="line">FROM ratings JOIN names ON ratings.movieID = names.movieID</span><br><span class="line">GROUP BY ratings.movieID</span><br><span class="line">ORDER BY ratingCount DESC;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579085980578.png" alt="1579085980578"></p>
<p>We used views in Hive to split up a more complicated query into something more readable and more manageable.</p>
<p>æ‰§è¡Œæ—¶ä¼šèŠ±ä¸€ç‚¹æ—¶é—´ï¼Œremember this isnâ€™t really a relational database, so things like joins are kind of painful when youâ€™re not dealing with normalized data.</p>
<p>æ‰§è¡Œåä¼šå‘ç°æ–°åˆ›å»ºçš„viewå‡ºç°åœ¨äº†Databaseé‡Œï¼š</p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579085692727.png" alt="1579085692727"></p>
<p>Your views are persistent, theyâ€™re stored to disk.</p>
<p>è‹¥æ­¤æ—¶å†æ‰§è¡Œä¼šå‡ºé”™ï¼Œå¯å†™æˆï¼š <code>CREATE VIEW IF NOT EXISTS topMovieIDs ...</code></p>
<p>Just to clean up our mess and not leave that around: <code>DROP VIEW topMovieIDs;</code></p>
<h3 id="How-Hive-works"><a href="#How-Hive-works" class="headerlink" title="How Hive works?"></a>How Hive works?</h3><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579086892876.png" alt="1579086892876"></p>
<h4 id="Schema-on-read"><a href="#Schema-on-read" class="headerlink" title="Schema on read"></a>Schema on read</h4><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579087836551.png" alt="1579087836551"></p>
<p>One of the basic concepts pf Hive is something called <em>schema on read</em>, and this is what separates it from a more traditional database. With a real relational database, it uses something called <em>schema on write</em> where you define the schema of your database before you load the data into it, and itâ€™s actually enforced at the time that you write the data to disk. </p>
<p>Hive flips that on its head. It takes unstructured data and just sort of applies a schema to it as itâ€™s being read instead.</p>
<p>So, Hive isnâ€™t creating some structured relational database under the hood, that would be very inefficient, itâ€™s just taking the existing data that you have on your cluster and imparting a schema to it when itâ€™s read in.</p>
<h4 id="Where-is-the-data-å†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨"><a href="#Where-is-the-data-å†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨" class="headerlink" title="Where is the data? (å†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨)"></a>Where is the data? (å†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨)</h4><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579089471741.png" alt="1579089471741"></p>
<p>å¯¹äº managed table, if you do a â€œDROP TABLEâ€ command from Hive, then that data is gone.</p>
<p>But sometimes you want to share that data with other systems that are outside of Hive. So thatâ€™s where external tables come in. â€œCREATE EXTERNAL TABLEâ€ with â€œLocationâ€ says, â€œIâ€™m going to use Hive on this data here, but Iâ€™m not going to own it anymoreâ€. So I drop this table, itâ€™s going to drop the metadata, ä½†æ˜¯åŸæ•°æ®ä¸ä¼šè¢«åˆ é™¤ã€‚</p>
<h4 id="Partitioning-åˆ†åŒº"><a href="#Partitioning-åˆ†åŒº" class="headerlink" title="Partitioning åˆ†åŒº"></a>Partitioning åˆ†åŒº</h4><p>If you do have a massive dataset and your queries tend to be on a specific partition of that data, partitioning in Hive can be a very important optimization. </p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579096514448.png" alt="1579096514448"></p>
<p>We wouldnâ€™t have to scan over the entire customer database, we could just scan over the actual files that are specific to the country that Iâ€™m interested in.</p>
<h4 id="Ways-to-use-Hive"><a href="#Ways-to-use-Hive" class="headerlink" title="Ways to use Hive"></a>Ways to use Hive</h4><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579096909189.png" alt="1579096909189"></p>
<h3 id="Activity-Use-Hive-to-find-the-movie-with-the-highest-average-rating"><a href="#Activity-Use-Hive-to-find-the-movie-with-the-highest-average-rating" class="headerlink" title="[Activity] Use Hive to find the movie with the highest average rating"></a>[Activity] Use Hive to find the movie with the highest average rating</h3><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579149719149.png" alt="1579149719149"></p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579097528758.png" alt="1579097528758"></p>
<p>æˆ–å†™æˆï¼šï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT title, AVG(rating) as avgRating</span><br><span class="line">FROM ratings JOIN names on ratings.movieID = names.movieID</span><br><span class="line">GROUP BY ratings.movieID</span><br><span class="line">HAVING COUNT(ratings.movieID)  &gt; 10</span><br><span class="line">ORDER BY avgRating DESC;</span><br></pre></td></tr></table></figure>
<h2 id="Sqoop"><a href="#Sqoop" class="headerlink" title="Sqoop"></a>Sqoop</h2><h3 id="Integrating-MySQL-with-Hadoop"><a href="#Integrating-MySQL-with-Hadoop" class="headerlink" title="Integrating MySQL with Hadoop"></a>Integrating MySQL with Hadoop</h3><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579149997458.png" alt="1579149997458"></p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579150738331.png" alt="1579150738331"></p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579150774304.png" alt="1579150774304"></p>
<h3 id="Import-Export-data-MySQL-lt-gt-HDFS-Hadoop"><a href="#Import-Export-data-MySQL-lt-gt-HDFS-Hadoop" class="headerlink" title="Import/Export data (MySQL &lt;-&gt; HDFS/Hadoop)"></a>Import/Export data (MySQL &lt;-&gt; HDFS/Hadoop)</h3><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579151204058.png" alt="1579151204058"></p>
<p>Export data from your database into Hadoop:</p>
<ol>
<li>kick off a bunch of mappers (åªæœ‰mappers, all weâ€™re doing is moving data and transforming it from one place to another, thereâ€™s no real reduce going on here.)</li>
<li>all these mappers are going to talk to your HDFS cluster on your Hadoop cluster and populate a big old table on HDFS, which is a giant text file (ä¾‹å¦‚é€—å·åˆ†éš”çš„æ•°æ®), and from there, you can use tools like Hive or Pig on it.</li>
</ol>
<p>REMEMBER, the power of HDFS is that file might be distributed across many different hosts, blocks, and also stored redundantly. Weâ€™ve done more than just dump our database to a file here - weâ€™ve dumped it into HDFS, which opens up a whole world of possibilities for analyzing it in a robust, scalable and a manner that can be resilient to failure.</p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579156422401.png" alt="1579156422401"></p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579157592193.png" alt="1579157592193"></p>
<p>ä¸å¯¼å…¥HDFSä¸€æ ·ï¼Œå¯¼å…¥HiveåŒæ ·ä¼škick off a MapReduce job.</p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579154105803.png" alt="1579154105803"></p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579159508995.png" alt="1579159508995"></p>
<h3 id="Play-with-MySQL-and-Sqoop"><a href="#Play-with-MySQL-and-Sqoop" class="headerlink" title="Play with MySQL and Sqoop"></a>Play with MySQL and Sqoop</h3><p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579154231118.png" alt="1579154231118"></p>
<h4 id="Activity-Install-MySQL-and-import-our-movie-data"><a href="#Activity-Install-MySQL-and-import-our-movie-data" class="headerlink" title="[Activity] Install MySQL and import our movie data"></a>[Activity] Install MySQL and import our movie data</h4><p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963236#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963236#overview</a></p>
<h4 id="Activity-Use-Sqoop-to-import-data-from-MySQL-to-HDFS-Hive"><a href="#Activity-Use-Sqoop-to-import-data-from-MySQL-to-HDFS-Hive" class="headerlink" title="[Activity] Use Sqoop to import data from MySQL to HDFS/Hive"></a>[Activity] Use Sqoop to import data from MySQL to HDFS/Hive</h4><p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963266#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963266#overview</a></p>
<p>ç”± MySQL å¯¼å…¥ HDFS åï¼š</p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579156905400.png" alt="1579156905400"></p>
<p>ç”± MySQL å¯¼å…¥Hiveåï¼š</p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579157822360.png" alt="1579157822360"></p>
<blockquote>
<p>æ³¨ï¼šThese sorts of tools that weâ€™re using with Hadoop are really intended for big datasets, so thereâ€™s a lot of overhead for doing whatâ€™s actually a pretty simple operation. It doesnâ€™t make sense if youâ€™re using small datasets. å¦‚æœæ•°æ®é›†å¾ˆå°ï¼Œåœ¨ä¸€ä¸ªhostå°±èƒ½è£…ä¸‹ï¼Œæ²¡å¿…è¦ç”¨è¿™äº›å·¥å…·ï¼Œç”¨MySQLå°±è¶³å¤Ÿäº†ã€‚</p>
</blockquote>
<h4 id="Activity-Use-Sqoop-tp-export-data-from-Hadoop-to-MySQL"><a href="#Activity-Use-Sqoop-tp-export-data-from-Hadoop-to-MySQL" class="headerlink" title="[Activity] Use Sqoop tp export data from Hadoop to MySQL"></a>[Activity] Use Sqoop tp export data from Hadoop to MySQL</h4><p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963272#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963272#overview</a></p>
<ol>
<li>é¦–å…ˆéœ€è¦çŸ¥é“ where the data in Hive actually resides. REMEMBER, Hive is just a schema-on-read sort of deal. The actual data itself if just stored as a plain old text somewhere, and all Hive is doing is imparting structure to it when itâ€™s being read. </li>
</ol>
<p>On Hortonworks:</p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579158771230.png" alt="1579158771230"></p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579158823550.png" alt="1579158823550"></p>
<p>ä¸æ˜¯é é€—å·åˆ†éš”çš„ï¼ŒHive actually uses low ASCII values, like 1 and 2 and 3, to delimit its data. </p>
<ol>
<li>åœ¨å¯¼å…¥å‰ï¼ŒMySQLä¸­è¦å…ˆæœ‰ target table</li>
</ol>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579159104056.png" alt="1579159104056"></p>
<p>3.</p>
<p><img src="/2020/01/15/Using-relational-data-stores-with-Hadoop-â€”â€”-Hive/1579159601163.png" alt="1579159601163"></p>
<p>å’Œimportä¸€æ ·ï¼Œexportä¹Ÿä¼škick off a bunch of mappers using MapReduce.</p>
<blockquote>
<p>ä»€ä¹ˆæ—¶å€™éœ€è¦ä»Hiveå¯¼å…¥MySQL: From a practical standpoint, if you need to expose your data to a database thatâ€™s more well-suited for OLTP. Sometimes youâ€™ll be doing some huge operation using Hive or some other tool on your cluster, but the output of that operation might be small enough to fit on a single database.</p>
</blockquote>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>We talked about making your Hadoop cluster look like a MySQL database or a SQL database, using Hive.</p>
<p>And we also talked about using your Hadoop cluster with a real MySQL database as well. Kind of two different directions there.</p>
<p>Next, letâ€™s talk about <strong>NoSQL</strong>. Sometimes you actually want to expose your data in a way thatâ€™s more amenable to <strong>real-time queries</strong>, and thereâ€™s a bunch of ways to do that and also ways of integrating Hadoop with systems that are more real-time in nature.</p>
]]></content>
      <categories>
        <category>Hadoop</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
        <tag>Hive</tag>
        <tag>Sqoop</tag>
      </tags>
  </entry>
  <entry>
    <title>Hadoop Course Overview</title>
    <url>/2020/01/14/Hadoop-Course-Overview/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¯¾ç¨‹ï¼š</p>
<p><a href="https://www.udemy.com/course-dashboard-redirect/?course_id=996228" target="_blank" rel="noopener"><img src="https://i.udemycdn.com/course/240x135/996228_af5f_3.jpg" alt="The Ultimate Hands-On Hadoop - Tame your Big Data!"></a><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/" target="_blank" rel="noopener"><strong>The Ultimate Hands-On Hadoop - Tame your Big Data!</strong></a></p>
<p><a href="https://sundog-education.com/hadoop-materials/" target="_blank" rel="noopener">Course Materials</a></p>
<h4 id="What-youâ€™ll-learn"><a href="#What-youâ€™ll-learn" class="headerlink" title="What youâ€™ll learn"></a>What youâ€™ll learn</h4><ul>
<li>Design distributed systems that manage â€œbig dataâ€ using Hadoop and related technologies.</li>
<li>Use HDFS and MapReduce for storing and analyzing data at scale.</li>
<li>Use Pig and Spark to create scripts to process data on a Hadoop cluster in more complex ways.</li>
<li>Analyze relational data using Hive and MySQL</li>
<li>Analyze non-relational data using HBase, Cassandra, and MongoDB</li>
<li>Query data interactively with Drill, Phoenix, and Presto</li>
<li>Choose an appropriate data storage technology for your application</li>
<li>Understand how Hadoop clusters are managed by YARN, Tez, Mesos, Zookeeper, Zeppelin, Hue, and Oozie.</li>
<li>Publish data to your Hadoop cluster using Kafka, Sqoop, and Flume</li>
<li>Consume streaming data using Spark Streaming, Flink, and Storm</li>
</ul>
]]></content>
      <categories>
        <category>Hadoop</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title>Spark</title>
    <url>/2020/01/14/Spark/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h3 id="Introduction-to-Spark"><a href="#Introduction-to-Spark" class="headerlink" title="Introduction to Spark"></a>Introduction to Spark</h3><p><img src="/2020/01/14/Spark/1578976053911.png" alt="1578976053911"></p>
<p><img src="/2020/01/14/Spark/1578976261212.png" alt="1578976261212"></p>
<p>Thereâ€™s a lot of cool features built on top of Spark, like things for machine learning and graph analysis and streaming data.</p>
<h4 id="Scalable"><a href="#Scalable" class="headerlink" title="Scalable"></a>Scalable</h4><p><img src="/2020/01/14/Spark/æ•è·.JPG" alt="æ•è·"></p>
<h4 id="Fast"><a href="#Fast" class="headerlink" title="Fast"></a>Fast</h4><p><img src="/2020/01/14/Spark/1578977218206.png" alt="1578977218206"></p>
<p>Sparké™¤äº†æ¯”MapReduceæ›´å¿«ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªä¼˜åŠ¿ï¼šMapReduce is very limited in what it can do. You have to think about things in terms of mappers and reducers, whereas Spark provides a framework for removing that level of though from you, you can just think more about your end results and program toward that and think less about how to actual distribute it across the cluster.</p>
<a id="more"></a>
<h4 id="Hot"><a href="#Hot" class="headerlink" title="Hot"></a>Hot</h4><p><img src="/2020/01/14/Spark/1578977501017.png" alt="1578977501017"></p>
<h4 id="Not-that-hard-å¯ä½¿ç”¨çš„è¯­è¨€ï¼ŒRDD"><a href="#Not-that-hard-å¯ä½¿ç”¨çš„è¯­è¨€ï¼ŒRDD" class="headerlink" title="Not that hard (å¯ä½¿ç”¨çš„è¯­è¨€ï¼ŒRDD)"></a>Not that hard (å¯ä½¿ç”¨çš„è¯­è¨€ï¼ŒRDD)</h4><p><img src="/2020/01/14/Spark/1578977890605.png" alt="1578977890605"></p>
<p>A few lines of code can actually kick off some very complex analysis on a cluster.</p>
<p>Spark 2.0 which came out in 2006, theyâ€™ve built on top of RDDs to produce something called a data set. Thatâ€™s a little bit more of a SQL focused take on an RDD, but at the end of the day, itâ€™s still built around the RDD.</p>
<h4 id="Components-of-Spark"><a href="#Components-of-Spark" class="headerlink" title="Components of Spark"></a>Components of Spark</h4><p><img src="/2020/01/14/Spark/1578978133377.png" alt="1578978133377"></p>
<p>Spark has a lot of depth to it, so while you could just program at the RDD level within <strong>Spark Core</strong>, there are also libraries built on top of Spark that are part of Spark itself.</p>
<p><strong>Spark Streaming</strong>: Instead of doing batch processing of data, you can actually input data in real time. Data can be ingested as itâ€™s being produced, and then Spark can analyze it across some window of time, and you can output the results of that analysis to a database or some NoSQL data store, all within a few lines of code.</p>
<p><strong>Spark SQL</strong>: Very hot area right now. Itâ€™s basically a SQL interface to Spark. You can write SQL queries against your data using Spark SQL. It allows us to do more optimizations beyond the directed acyclic graph, because it can do SQL optimizations on the queries that youâ€™re actually running.</p>
<p><strong>MLLib</strong>: An entire library of machine learning and data mining tools that you can run on a data set thatâ€™s in Spark.</p>
<p><strong>GraphX</strong>: Thatâ€™s the graph in terms of graph theory. Imagine for example, you have a social network graph, and you want to analyze the properties of that graph, and see whoâ€™s connected to who and what way, and what are the shortest path and things like that, GraphX provides a very extensible way of doing that.</p>
<p>SO, very rich ecosystem surrounding Spark that lets you do a wide variety of tasks on big data across the cluster.</p>
<h4 id="è¿™é—¨è¯¾å°†ä½¿ç”¨çš„è¯­è¨€åŠScala"><a href="#è¿™é—¨è¯¾å°†ä½¿ç”¨çš„è¯­è¨€åŠScala" class="headerlink" title="è¿™é—¨è¯¾å°†ä½¿ç”¨çš„è¯­è¨€åŠScala"></a>è¿™é—¨è¯¾å°†ä½¿ç”¨çš„è¯­è¨€åŠScala</h4><p><img src="/2020/01/14/Spark/1578979417251.png" alt="1578979417251"></p>
<p>If you do want to end up using Spark in production in the real world, Python is OK to start with, but you probably want to move to Scala. </p>
<p><img src="/2020/01/14/Spark/1578979634184.png" alt="1578979634184"></p>
<p>Itâ€™s not very hard to move from Python to Scala. </p>
<h3 id="RDD-The-Resilient-Distributed-Dataset"><a href="#RDD-The-Resilient-Distributed-Dataset" class="headerlink" title="RDD (The Resilient Distributed Dataset)"></a>RDD (The Resilient Distributed Dataset)</h3><p><img src="/2020/01/14/Spark/1578989468387.png" alt="1578989468387"></p>
<h4 id="What-is-RDD"><a href="#What-is-RDD" class="headerlink" title="What is RDD?"></a>What is RDD?</h4><p><img src="/2020/01/14/Spark/1578989673088.png" alt="1578989673088"></p>
<p>Itâ€™s an abstraction across all the nastiness that happens under the hood to actually make sure your job is evenly distributed across your cluster that it can handle failures in a resilient manner, and at the end of the day, it just looks like a dataset to you.</p>
<p>From a programming standpoint, an RDD is just a dataset to you. But under the hood, itâ€™s resilient and distributed and you donâ€™t have to think about that very much.</p>
<h4 id="How-do-you-make-RDD"><a href="#How-do-you-make-RDD" class="headerlink" title="How do you make RDD"></a>How do you make RDD</h4><p><img src="/2020/01/14/Spark/1578989938843.png" alt="1578989938843"></p>
<p>The SparkContext is sort of the environment that your driver program runs within Spark, and it is what creates RDDs.</p>
<h4 id="Create-RDD"><a href="#Create-RDD" class="headerlink" title="Create RDD"></a>Create RDD</h4><p><img src="/2020/01/14/Spark/1578990141827.png" alt="1578990141827"></p>
<p><img src="/2020/01/14/Spark/1579012530332.png" alt="1579012530332"></p>
<p><img src="/2020/01/14/Spark/1578990969096.png" alt="1578990969096"></p>
<p>Once you have an RDD, what do you do with it?</p>
<h4 id="Transform-RDD"><a href="#Transform-RDD" class="headerlink" title="Transform RDD"></a>Transform RDD</h4><p><img src="/2020/01/14/Spark/1579008653516.png" alt="1579008653516"></p>
<p><em>map</em>: apply some function to every input row of your RDD and create a new RDD that is transformed in some way. Map is used when you have a one to one relationship </p>
<p><em>flatmap</em>: ä¸mapçš„åŒºåˆ«åœ¨äºï¼Œä½¿ç”¨map, inputäºoutputæ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œä½¿ç”¨flatmap, can have any relationship, where your input lines may or may not result in one or more output lines. ä¾‹å¦‚ï¼Œmaybe you want to split out each input line into multiple rows, or maybe you want to discard some of the input lines if theyâ€™re invalid.</p>
<p><em>filter</em>: can be used to take stuff out of an RDD so you can provide that with some function that determines whether or not a row survives.</p>
<p><em>distinct</em>: gives you back the distinct unique values in an RDD. </p>
<p><em>sample</em>: sample them randomly.</p>
<p><img src="/2020/01/14/Spark/1579008991727.png" alt="1579008991727"></p>
<p><img src="/2020/01/14/Spark/1579009321705.png" alt="1579009321705"></p>
<h4 id="RDD-actions"><a href="#RDD-actions" class="headerlink" title="RDD actions"></a>RDD actions</h4><p><img src="/2020/01/14/Spark/1579009474269.png" alt="1579009474269"></p>
<h4 id="Lazy-evaluation"><a href="#Lazy-evaluation" class="headerlink" title="Lazy evaluation"></a>Lazy evaluation</h4><p><img src="/2020/01/14/Spark/1579009528882.png" alt="1579009528882"></p>
<p>So basically, as you go through this script and transform your RDDâ€™s, until you hit an action, all thatâ€™s doing is building up this graph, this chain of dependencies within your driver script, and only when that action is called does it actually figure out the quickest path through those dependencies. And itâ€™s at that point that it actually kicks off the job on your cluster.</p>
<h4 id="Using-RDDâ€™s-in-Spark"><a href="#Using-RDDâ€™s-in-Spark" class="headerlink" title="Using RDDâ€™s in Spark"></a>Using RDDâ€™s in Spark</h4><p>Find the movie with the lowest average rating - with RDDâ€™s.</p>
<p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/6082670#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/6082670#overview</a></p>
<p><img src="/2020/01/14/Spark/1579014872589.png" alt="1579014872589"></p>
<h3 id="Spark-SQL-DataFrames-and-DataSets"><a href="#Spark-SQL-DataFrames-and-DataSets" class="headerlink" title="Spark SQL (DataFrames and DataSets)"></a>Spark SQL (DataFrames and DataSets)</h3><p><img src="/2020/01/14/Spark/1579012722667.png" alt="1579012722667"></p>
<p>Now, letâ€™s talk about Spark SQL and the Spark 2.0 way of doing things using dataframes and datasets.</p>
<p><img src="/2020/01/14/Spark/1579012953410.png" alt="1579012953410"></p>
<p><img src="/2020/01/14/Spark/1579013215223.png" alt="1579013215223"></p>
<p><img src="/2020/01/14/Spark/1579013233354.png" alt="1579013233354"></p>
<p><img src="/2020/01/14/Spark/1579013961536.png" alt="1579013961536"></p>
<p>DataFrame is really a dataset of row objects, and DataSet is a more general term that can contain any sort of typed information, not necessarily a row like you have in a DataFrame.</p>
<p><img src="/2020/01/14/Spark/1579014168231.png" alt="1579014168231"></p>
<p><img src="/2020/01/14/Spark/1579014221441.png" alt="1579014221441"></p>
<p>Spark SQL is very extensible, you can create user defined functions that plug into a SQL and create your own functions you can use within your SQL queries.</p>
<p>SO, this is the power of DataFrames and DataSets in Spark 2.0 and Spark SQL. The other thing thatâ€™s worth noting is that this is sort of the unified API between different subsystems of Spark going forward. Youâ€™ll see that in Spark 2 the MLLib machine learning library of the Spark streaming library, all now have DataSet based APIs that you can use, so DataSets are kind of the common denominator between these different systems that allow you to pass data between them. </p>
<p>So, not only do you get performance benefits by using DataSets in Spark 2, you also get easier ways of actually using all these capabilities built on top of Spark we can mix and match them in interesting ways.</p>
<h4 id="Using-DataSets-in-Spark-2"><a href="#Using-DataSets-in-Spark-2" class="headerlink" title="Using DataSets in Spark 2"></a>Using DataSets in Spark 2</h4><p>Find the movie with lowest average rating - with DataFrames.</p>
<p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963108#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963108#overview</a></p>
<p><img src="/2020/01/14/Spark/1579014920753.png" alt="1579014920753"></p>
<h3 id="Using-MLLib-in-Spark"><a href="#Using-MLLib-in-Spark" class="headerlink" title="Using MLLib in Spark"></a>Using MLLib in Spark</h3><p>movie recommendations (é€šè¿‡predict rating)</p>
<p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963112#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963112#overview</a></p>
<p><img src="/2020/01/14/Spark/1579059887637.png" alt="1579059887637"></p>
<h3 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h3><p><img src="/2020/01/14/Spark/1579060756315.png" alt="1579060756315"></p>
<p><img src="/2020/01/14/Spark/1579062594969.png" alt="1579062594969"></p>
<p><img src="/2020/01/14/Spark/1579062687242.png" alt="1579062687242"></p>
<p>check your result</p>
<p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/6115596#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/6115596#overview</a></p>
<p>The DataFrame approach is a lot easier to use, and when youâ€™re running it at a large scale itâ€™s going to be faster as well.</p>
]]></content>
      <categories>
        <category>Hadoop</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
        <tag>Spark</tag>
      </tags>
  </entry>
  <entry>
    <title>å­˜å‚¨è¿‡ç¨‹</title>
    <url>/2020/01/13/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å­˜å‚¨è¿‡ç¨‹ï¼ˆStored Procedureï¼‰æ˜¯ä¸€ç§åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å¤æ‚ç¨‹åºï¼Œä»¥ä¾¿å¤–éƒ¨ç¨‹åºè°ƒç”¨çš„ä¸€ç§æ•°æ®åº“å¯¹è±¡ã€‚</p>
<p>å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸ºäº†å®Œæˆç‰¹å®šåŠŸèƒ½çš„SQLè¯­å¥é›†ï¼Œç»ç¼–è¯‘åˆ›å»ºå¹¶ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œç”¨æˆ·å¯é€šè¿‡æŒ‡å®šå­˜å‚¨è¿‡ç¨‹çš„åå­—å¹¶ç»™å®šå‚æ•°(éœ€è¦æ—¶)æ¥è°ƒç”¨æ‰§è¡Œã€‚</p>
<p>å­˜å‚¨è¿‡ç¨‹æ€æƒ³ä¸Šå¾ˆç®€å•ï¼Œå°±æ˜¯æ•°æ®åº“ SQL è¯­è¨€å±‚é¢çš„ä»£ç å°è£…ä¸é‡ç”¨ã€‚</p>
<h4 id="ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿ</h4><p>å­˜å‚¨è¿‡ç¨‹å°±æ˜¯ä½œä¸ºå¯æ‰§è¡Œå¯¹è±¡å­˜æ”¾åœ¨æ•°æ®åº“ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªSQLå‘½ä»¤ã€‚<br>é€šä¿—æ¥è®²ï¼šå­˜å‚¨è¿‡ç¨‹å…¶å®å°±æ˜¯èƒ½å®Œæˆä¸€å®šæ“ä½œçš„ä¸€ç»„SQLè¯­å¥ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Ÿ</h4><p>1.å­˜å‚¨è¿‡ç¨‹åªåœ¨åˆ›é€ æ—¶è¿›è¡Œç¼–è¯‘ï¼Œä»¥åæ¯æ¬¡æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹éƒ½ä¸éœ€å†é‡æ–°ç¼–è¯‘ï¼Œè€Œä¸€èˆ¬SQLè¯­å¥æ¯æ‰§è¡Œä¸€æ¬¡å°±ç¼–è¯‘ä¸€æ¬¡,æ‰€ä»¥ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹å¯æé«˜æ•°æ®åº“æ‰§è¡Œé€Ÿåº¦ã€‚<br>2.å½“å¯¹æ•°æ®åº“è¿›è¡Œå¤æ‚æ“ä½œæ—¶ï¼Œå¯å°†æ­¤å¤æ‚æ“ä½œç”¨å­˜å‚¨è¿‡ç¨‹å°è£…èµ·æ¥ä¸æ•°æ®åº“æä¾›çš„äº‹åŠ¡å¤„ç†ç»“åˆä¸€èµ·ä½¿ç”¨ã€‚<br>3.å­˜å‚¨è¿‡ç¨‹å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå¯å‡å°‘æ•°æ®åº“å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚<br>4.å®‰å…¨æ€§é«˜ï¼Œå¯è®¾å®šåªæœ‰æŸäº›ç”¨æˆ·æ‰å…·æœ‰å¯¹æŒ‡å®šå­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨æƒ</p>
<h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul>
<li>å­˜å‚¨è¿‡ç¨‹å¯å°è£…ï¼Œå¹¶éšè—å¤æ‚çš„å•†ä¸šé€»è¾‘ã€‚</li>
<li>å­˜å‚¨è¿‡ç¨‹å¯ä»¥å›ä¼ å€¼ï¼Œå¹¶å¯ä»¥æ¥å—å‚æ•°ã€‚</li>
<li>å­˜å‚¨è¿‡ç¨‹æ— æ³•ä½¿ç”¨ SELECT æŒ‡ä»¤æ¥è¿è¡Œï¼Œå› ä¸ºå®ƒæ˜¯å­ç¨‹åºï¼Œä¸æŸ¥çœ‹è¡¨ï¼Œæ•°æ®è¡¨æˆ–ç”¨æˆ·å®šä¹‰å‡½æ•°ä¸åŒã€‚</li>
<li>å­˜å‚¨è¿‡ç¨‹å¯ä»¥ç”¨åœ¨æ•°æ®æ£€éªŒï¼Œå¼ºåˆ¶å®è¡Œå•†ä¸šé€»è¾‘ç­‰ã€‚</li>
</ul>
<h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul>
<li>å­˜å‚¨è¿‡ç¨‹ï¼Œå¾€å¾€å®šåˆ¶åŒ–äºç‰¹å®šçš„æ•°æ®åº“ä¸Šï¼Œå› ä¸ºæ”¯æŒçš„ç¼–ç¨‹è¯­è¨€ä¸åŒï¼Œå½“åˆ‡æ¢åˆ°å…¶ä»–å‚å•†çš„æ•°æ®åº“ç³»ç»Ÿæ—¶ï¼Œéœ€è¦é‡å†™åŸæœ‰çš„å­˜å‚¨è¿‡ç¨‹ã€‚</li>
<li>å­˜å‚¨è¿‡ç¨‹çš„æ€§èƒ½è°ƒæ ¡ä¸æ’°å†™ï¼Œå—é™äºå„ç§æ•°æ®åº“ç³»ç»Ÿã€‚</li>
</ul>
<p>å­˜å‚¨è¿‡ç¨‹ï¼šå­˜å‚¨è¿‡ç¨‹å°±æ˜¯ç¼–è¯‘å¥½äº†çš„ä¸€äº›sqlè¯­å¥ã€‚</p>
<ol>
<li><p>å­˜å‚¨è¿‡ç¨‹å› ä¸ºSQLè¯­å¥å·²ç»é¢„ç¼–ç»è¿‡äº†ï¼Œå› æ­¤è¿è¡Œçš„é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚</p>
</li>
<li><p>å¯ä¿è¯æ•°æ®çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ã€‚é€šè¿‡å­˜å‚¨è¿‡ç¨‹å¯ä»¥ä½¿æ²¡æœ‰æƒé™çš„ç”¨æˆ·åœ¨æ§åˆ¶ä¹‹ä¸‹é—´æ¥åœ°å­˜å–æ•°æ®åº“ï¼Œä»è€Œä¿è¯æ•°æ®çš„å®‰å…¨ã€‚é€šè¿‡å­˜å‚¨è¿‡ç¨‹å¯ä»¥ä½¿ç›¸å…³çš„åŠ¨ä½œåœ¨ä¸€èµ·å‘ç”Ÿï¼Œä»è€Œå¯ä»¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ã€‚</p>
</li>
<li>å¯ä»¥é™ä½ç½‘ç»œçš„é€šä¿¡é‡ã€‚å­˜å‚¨è¿‡ç¨‹ä¸»è¦æ˜¯åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå‡å°‘å¯¹å®¢æˆ·æœºçš„å‹åŠ›ã€‚</li>
<li>å­˜å‚¨è¿‡ç¨‹å¯ä»¥æ¥å—å‚æ•°ã€è¾“å‡ºå‚æ•°ã€è¿”å›å•ä¸ªæˆ–å¤šä¸ªç»“æœé›†ä»¥åŠè¿”å›å€¼ã€‚å¯ä»¥å‘ç¨‹åºè¿”å›é”™è¯¯åŸå› </li>
<li>å­˜å‚¨è¿‡ç¨‹å¯ä»¥åŒ…å«ç¨‹åºæµã€é€»è¾‘ä»¥åŠå¯¹æ•°æ®åº“çš„æŸ¥è¯¢ã€‚åŒæ—¶å¯ä»¥å®ä½“å°è£…å’Œéšè—æ•°æ®é€»è¾‘ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>äº‹åŠ¡ä¸é”</title>
    <url>/2020/01/13/%E4%BA%8B%E5%8A%A1%E4%B8%8E%E9%94%81/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- toc -->
<h4 id="äº‹åŠ¡-Transaction"><a href="#äº‹åŠ¡-Transaction" class="headerlink" title="äº‹åŠ¡ Transaction"></a>äº‹åŠ¡ Transaction</h4><p>äº‹åŠ¡ï¼šæ˜¯ä¸€ç³»åˆ—çš„æ•°æ®åº“æ“ä½œ (a group of SQL statement)ï¼Œæ˜¯æ•°æ®åº“åº”ç”¨çš„åŸºæœ¬é€»è¾‘å•ä½ã€‚</p>
<p>äº‹åŠ¡æ€§è´¨ï¼š(<span style="color:red">ACID</span>)</p>
<ul>
<li>åŸå­æ€§ï¼ˆatomicityï¼‰ã€‚å³ä¸å¯åˆ†å‰²æ€§ï¼Œäº‹åŠ¡è¦ä¹ˆå…¨éƒ¨è¢«æ‰§è¡Œï¼Œè¦ä¹ˆå°±å…¨éƒ¨ä¸è¢«æ‰§è¡Œã€‚</li>
<li>ä¸€è‡´æ€§æˆ–å¯ä¸²æ€§ï¼ˆconsistencyï¼‰ã€‚äº‹åŠ¡çš„æ‰§è¡Œä½¿å¾—æ•°æ®åº“ä»ä¸€ç§æ­£ç¡®çŠ¶æ€è½¬æ¢æˆå¦ä¸€ç§æ­£ç¡®çŠ¶æ€ã€‚</li>
<li>éš”ç¦»æ€§ï¼ˆisolationï¼‰ã€‚åœ¨äº‹åŠ¡æ­£ç¡®æäº¤ä¹‹å‰ï¼Œä¸å…è®¸æŠŠè¯¥äº‹åŠ¡å¯¹æ•°æ®çš„ä»»ä½•æ”¹å˜æä¾›ç»™ä»»ä½•å…¶ä»–äº‹åŠ¡ã€‚</li>
<li>æŒä¹…æ€§ï¼ˆdurabilityï¼‰ã€‚äº‹åŠ¡æ­£ç¡®æäº¤åï¼Œå…¶ç»“æœå°†æ°¸ä¹…ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œå³ä½¿åœ¨äº‹åŠ¡æäº¤åæœ‰äº†å…¶ä»–æ•…éšœï¼Œäº‹åŠ¡çš„å¤„ç†ç»“æœä¹Ÿä¼šå¾—åˆ°ä¿å­˜ã€‚</li>
</ul>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578903852566.png" alt="1578903852566"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578903920125.png" alt="1578903920125"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578904033183.png" alt="1578904033183"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578904133622.png" alt="1578904133622"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578904156358.png" alt="1578904156358"></p>
<a id="more"></a>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578904553025.png" alt="1578904553025"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578904582538.png" alt="1578904582538"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578904641058.png" alt="1578904641058"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578904660894.png" alt="1578904660894"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578904679577.png" alt="1578904679577"></p>
<p><code>å¯ä¸²è¡ŒåŒ–</code>ï¼šå¤šä¸ªäº‹åŠ¡çš„å¹¶å‘æ‰§è¡Œæ˜¯æ­£ç¡®çš„ï¼Œå½“ä¸”ä»…å½“å…¶ç»“æœä¸æŸä¸€æ¬¡åºä¸²è¡Œåœ°æ‰§è¡Œå®ƒä»¬æ—¶çš„ç»“æœç›¸åŒï¼Œç§°è¿™ç§è°ƒåº¦ç­–ç•¥æ˜¯å¯ä¸²è¡ŒåŒ–è°ƒåº¦ã€‚</p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578904744883.png" alt="1578904744883"></p>
<h4 id="å¹¶å‘æ§åˆ¶-Concurrency-Control"><a href="#å¹¶å‘æ§åˆ¶-Concurrency-Control" class="headerlink" title="å¹¶å‘æ§åˆ¶ Concurrency Control"></a>å¹¶å‘æ§åˆ¶ Concurrency Control</h4><p><strong>å¹¶å‘æ§åˆ¶ï¼š</strong> æ‰€è°“å¹¶å‘æ§åˆ¶ï¼Œæ˜¯æŒ‡å¤šç”¨æˆ·å…±äº«çš„ç³»ç»Ÿä¸­ï¼Œè®¸å¤šç”¨æˆ·å¯èƒ½åŒæ—¶å¯¹åŒä¸€æ•°æ®è¿›è¡Œæ“ä½œã€‚</p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578904973251.png" alt="1578904973251"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578905068177.png" alt="1578905068177"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578905172492.png" alt="1578905172492"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578905192362.png" alt="1578905192362"></p>
<h5 id="å…±äº«é”ä¸æ’ä»–é”ï¼ˆæˆ–å«äº’æ–¥é”ï¼‰"><a href="#å…±äº«é”ä¸æ’ä»–é”ï¼ˆæˆ–å«äº’æ–¥é”ï¼‰" class="headerlink" title="å…±äº«é”ä¸æ’ä»–é”ï¼ˆæˆ–å«äº’æ–¥é”ï¼‰"></a>å…±äº«é”ä¸æ’ä»–é”ï¼ˆæˆ–å«äº’æ–¥é”ï¼‰</h5><p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578905290193.png" alt="1578905290193"></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578905458095.png" alt="1578905458095"></p>
<h5 id="ä¸¤æ®µé”åè®®ï¼ˆTwo-Phase-Locking-â€”â€”-2PLï¼‰"><a href="#ä¸¤æ®µé”åè®®ï¼ˆTwo-Phase-Locking-â€”â€”-2PLï¼‰" class="headerlink" title="ä¸¤æ®µé”åè®®ï¼ˆTwo-Phase Locking â€”â€” 2PLï¼‰"></a>ä¸¤æ®µé”åè®®ï¼ˆTwo-Phase Locking â€”â€” 2PLï¼‰</h5><p><a href="https://www.jianshu.com/p/5c78f5c4d57b" target="_blank" rel="noopener">https://www.jianshu.com/p/5c78f5c4d57b</a></p>
<p>ä¸¤æ®µé”åè®®è§„å®šæ‰€æœ‰çš„äº‹åŠ¡åº”éµå®ˆçš„è§„åˆ™ï¼š</p>
<p>â‘  åœ¨å¯¹ä»»ä½•æ•°æ®è¿›è¡Œè¯»ã€å†™æ“ä½œä¹‹å‰ï¼Œé¦–å…ˆè¦ç”³è¯·å¹¶è·å¾—å¯¹è¯¥æ•°æ®çš„å°é”ã€‚</p>
<p>â‘¡ åœ¨é‡Šæ”¾ä¸€ä¸ªå°é”ä¹‹åï¼Œäº‹åŠ¡ä¸å†ç”³è¯·å’Œè·å¾—å…¶å®ƒä»»ä½•å°é”ã€‚</p>
<p>å³äº‹åŠ¡çš„æ‰§è¡Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<p>ç¬¬ä¸€é˜¶æ®µæ˜¯è·å¾—å°é”çš„é˜¶æ®µï¼Œç§°ä¸ºæ‰©å±•é˜¶æ®µã€‚</p>
<p>ç¬¬äºŒé˜¶æ®µæ˜¯é‡Šæ”¾å°é”çš„é˜¶æ®µï¼Œç§°ä¸ºæ”¶ç¼©é˜¶æ®µã€‚</p>
<p><em>è‹¥æ‰€æœ‰äº‹åŠ¡å‡éµå®ˆä¸¤æ®µé”åè®®ï¼Œåˆ™è¿™äº›äº‹åŠ¡çš„æ‰€æœ‰äº¤å‰è°ƒåº¦éƒ½æ˜¯å¯ä¸²è¡ŒåŒ–çš„ã€‚</em></p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578923170158.png" alt="1578923170158"></p>
<blockquote>
<p>ç®€å•çš„ç†è§£ä¸¤æ®µé”ï¼Œå°±æ˜¯åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š<br>ç¬¬ä¸€é˜¶æ®µ åªèƒ½å»ç”³è¯·é”<br>ç¬¬äºŒé˜¶æ®µ åªèƒ½å»é‡Šæ”¾é”</p>
</blockquote>
<p><a href="https://blog.csdn.net/weixin_38118016/article/details/90271468" target="_blank" rel="noopener">https://blog.csdn.net/weixin_38118016/article/details/90271468</a></p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰ä¸€ä¸ªè¡¨ tï¼Œä¸»é”®æ˜¯ idï¼Œå…¶ä¸­ä¸€ä¸ªå­—æ®µæ˜¯ kï¼Œåœ¨ä¸‹é¢çš„æ“ä½œä¸­ï¼Œäº‹åŠ¡ B çš„ update è¯­å¥æ‰§è¡Œæ—¶ï¼Œä¼šæ˜¯ä»€ä¹ˆç°è±¡å‘¢ ï¼Ÿ</p>
<p><img src="https://img-blog.csdnimg.cn/20190516203512941.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODExODAxNg==,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>è¿™ä¸ªé—®é¢˜çš„ç»“è®ºå–å†³äºäº‹åŠ¡ A æ‰§è¡Œå®Œå‰ä¸¤æ¡è¯­å¥åï¼ŒæŒæœ‰å“ªäº›é”ï¼Œä»¥åŠåœ¨ä»€ä¹ˆæ—¶å€™é‡Šæ”¾ã€‚</p>
<p>å®é™…ä¸Šï¼Œäº‹åŠ¡ A æŒæœ‰ä¸¤ä¸ªè®°å½•çš„è¡Œé”ï¼Œéƒ½æ˜¯åœ¨ commit çš„æ—¶å€™æ‰é‡Šæ”¾çš„ï¼Œæ‰€ä»¥äº‹åŠ¡ B çš„ update å°±ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°äº‹åŠ¡ A æ‰§è¡Œ commit ä¹‹åï¼Œäº‹åŠ¡ B æ‰èƒ½è¢«ç»§ç»­æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¡Œé”æ˜¯åœ¨éœ€è¦çš„æ—¶å€™æ‰åŠ ä¸Šçš„ï¼Œä½†å¹¶ä¸æ˜¯ä¸éœ€è¦äº†å°±ç«‹åˆ»é‡Šæ”¾ï¼Œéœ€è¦ç­‰äº‹åŠ¡ç»“æŸæ—¶æ‰é‡Šæ”¾ï¼Œè¿™å°±æ˜¯ä¸¤é˜¶æ®µé”åè®®ï¼Œåˆ†ä¸ºåŠ é”é˜¶æ®µå’Œè§£é”é˜¶æ®µï¼Œæ‰€æœ‰çš„ lock æ“ä½œéƒ½åœ¨ unlock æ“ä½œä¹‹åã€‚</p>
<p>å‡è®¾ä½ è´Ÿè´£å®ç°ä¸€ä¸ªç”µå½±ç¥¨åœ¨çº¿äº¤æ˜“ä¸šåŠ¡ï¼Œé¡¾å®¢ userA è¦åœ¨å½±é™¢ cinema è´­ä¹°ç”µå½±ç¥¨ï¼Œéœ€è¦æ¶‰åŠä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li><p>æ‰£é™¤é¡¾å®¢ userA è´¦æˆ·ä½™é¢</p>
</li>
<li><p>å¢åŠ å½±é™¢ cinema è´¦æˆ·ä½™é¢</p>
</li>
<li><p>è®°å½•ä¸€æ¡äº¤æ˜“æ—¥å¿—</p>
</li>
</ol>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®Œæˆè¿™æ¬¡äº¤æ˜“ï¼Œéœ€è¦ update ä¸¤æ¡è®°å½•ï¼Œ insert ä¸€æ¡è®°å½•ã€‚å½“ç„¶ä¸ºäº†ä¿è¯äº¤æ˜“çš„åŸå­æ€§ï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸‰ä¸ªæ“ä½œæ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚ä¸æ­¤åŒæ—¶ï¼Œè¿˜æœ‰é¡¾å®¢ userB ä¹Ÿåœ¨å½±é™¢è´­ä¹°ç”µå½±ç¥¨ï¼Œé‚£ä¹ˆä½ ä¼šæ€æ ·å®‰æ’è¿™ä¸‰ä¸ªè¯­å¥åœ¨äº‹åŠ¡ä¸­çš„é¡ºåºå‘¢ï¼Ÿ</p>
<p>é¦–å…ˆå‘ç°å†²çªçš„éƒ¨åˆ†æ˜¯è¯­å¥ 2ï¼Œå°±æ˜¯ä¸¤ä¸ªäº‹åŠ¡éƒ½è¦ç»™ cinema çš„è´¦æˆ·ä½™é¢å¢åŠ ç”µå½±ç¥¨ä»·ã€‚æ ¹æ®ä¸¤é˜¶æ®µåè®®ï¼Œä¸è®ºæ€ä¹ˆå®‰æ’è¯­å¥ï¼Œæ‰€æœ‰çš„æ“ä½œéœ€è¦çš„è¡Œé”éƒ½æ˜¯åœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™æ‰é‡Šæ”¾çš„ï¼Œè¦æƒ³ä½¿è¡Œé”åœ¨äº‹åŠ¡ä¸­ä¸ä¼šåœç•™å¤ªé•¿æ—¶é—´ï¼Œæœ€å¤§ç¨‹åº¦çš„å‡å°‘äº‹åŠ¡ä¹‹é—´çš„é”ç­‰å¾…ï¼Œåº”è¯¥æŠŠè¯­å¥ 2 æ”¾åœ¨æœ€åé¢ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20190516203204823.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODExODAxNg==,size_16,color_FFFFFF,t_70" alt="img"></p>
<h5 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h5><p>æ­»é”ï¼šäº‹åŠ¡å¾ªç¯ç­‰å¾…æ•°æ®é”ï¼Œåˆ™ä¼šæ­»é”ã€‚<br>æ­»é”å¤„ç†ï¼šé¢„é˜²æ­»é”åè®®ï¼Œæ­»é”æ¢å¤æœºåˆ¶ã€‚</p>
<p><img src="/2020/01/13/äº‹åŠ¡ä¸é”/1578905609640.png" alt="1578905609640"></p>
<p><a href="https://blog.csdn.net/weixin_38118016/article/details/90271468" target="_blank" rel="noopener">https://blog.csdn.net/weixin_38118016/article/details/90271468</a></p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œäº‹åŠ¡ A åœ¨ç­‰å¾…äº‹åŠ¡ B é‡Šæ”¾ id = 2 çš„è¡Œé”ï¼Œè€Œäº‹åŠ¡ B åœ¨ç­‰å¾… äº‹åŠ¡ A é‡Šæ”¾ id = 1 çš„è¡Œé”ï¼Œäº‹åŠ¡ A å’Œäº‹åŠ¡ B åœ¨äº’ç›¸ç­‰å¾…å¯¹æ–¹çš„èµ„æºé‡Šæ”¾ï¼Œå°±æ˜¯è¿›å…¥äº†æ­»é”çŠ¶æ€ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20190516203204496.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODExODAxNg==,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>åœ¨å¹¶å‘ç³»ç»Ÿä¸­ï¼Œ<strong>ä¸åŒçº¿ç¨‹å‡ºç°å¾ªç¯èµ„æºä¾èµ–ï¼Œæ¶‰åŠçš„çº¿ç¨‹éƒ½åœ¨ç­‰å¾…åˆ«çš„çº¿ç¨‹é‡Šæ”¾èµ„æºæ—¶ï¼Œå°±ä¼šå¯¼è‡´è¿™å‡ ä¸ªçº¿ç¨‹è¿›å…¥æ— é™ç­‰å¾…çš„çŠ¶æ€</strong>ï¼Œæˆä¸ºæ­»é”ã€‚</p>
<p>å½“è¿›å…¥æ­»é”çŠ¶æ€æ—¶ï¼Œæœ‰ä¸‹åˆ— 2 ç§ç­–ç•¥ï¼š</p>
<ol>
<li><p>è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œç¬¬ä¸€ä¸ªè¢«é”ä½çš„äº‹åŠ¡ A ç­‰å¾…è¶…è¿‡å¤šå°‘ç§’ä¼šè¶…æ—¶é€€å‡ºï¼ˆä¾‹å¦‚50sï¼‰ï¼Œå…¶ä»–äº‹åŠ¡å¾—ä»¥æ‰§è¡Œã€‚ç„¶è€Œå¯¹äºåœ¨çº¿æœåŠ¡æ¥è¯´ï¼Œè¿™ä¸ªç­‰å¾…æ—¶é—´å¾€å¾€æ˜¯æ— æ³•æ¥å—çš„ã€‚å¦‚æœè®¾ç½®å¤ªçŸ­ (å¦‚1s)ï¼Œå¯èƒ½æœ‰çš„äº‹åŠ¡åªæ˜¯ç®€å•çš„é”ç­‰å¾…ï¼Œå°±è¢«é€€å‡ºäº†ï¼Œä¼šå‡ºç°å¾ˆå¤šè¯¯ä¼¤ã€‚</p>
</li>
<li><p>å‘èµ·æ­»é”æ£€æµ‹ï¼Œå‘ç°æ­»é”ä¹‹åä¸»åŠ¨å›æ»šæ­»é”é“¾æ¡ä¸­çš„æŸä¸€ä¸ªäº‹åŠ¡ï¼Œè®©å…¶ä»–äº‹åŠ¡å¾—ä»¥ç»§ç»­æ‰§è¡Œã€‚æ¯”å¦‚å›æ»šäº‹åŠ¡ Aï¼Œè®©äº‹åŠ¡ B ç»§ç»­æ‰§è¡Œã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>ç´¢å¼•Index</title>
    <url>/2020/01/13/%E7%B4%A2%E5%BC%95Index/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/2020/01/13/ç´¢å¼•Index/1578902807233.png" alt="1578902807233"></p>
<a id="more"></a>
<p>MySQLå®˜æ–¹æ–‡æ¡£ï¼š</p>
<blockquote>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/8.0/en/</a></p>
</blockquote>
<p>MySQL Tutorial:</p>
<blockquote>
<p><a href="https://www.tutorialspoint.com/mysql/index.htm" target="_blank" rel="noopener">https://www.tutorialspoint.com/mysql/index.htm</a></p>
</blockquote>
<h2 id="å¿«é€Ÿå¯¼èˆª"><a href="#å¿«é€Ÿå¯¼èˆª" class="headerlink" title="å¿«é€Ÿå¯¼èˆª"></a>å¿«é€Ÿå¯¼èˆª</h2><p><a href="https://dev.mysql.com/doc/refman/5.6/en/create-table.html" target="_blank" rel="noopener">CREATE TABLE å®˜æ–¹æ‰‹å†Œ</a><br><a href="https://dev.mysql.com/doc/refman/5.6/en/create-index.html" target="_blank" rel="noopener">CREATE INDEX å®˜æ–¹æ‰‹å†Œ</a><br><a href="https://dev.mysql.com/doc/refman/5.6/en/alter-table.html" target="_blank" rel="noopener">ALTER TABLE å®˜æ–¹æ‰‹å†Œ</a><br><a href="#jump6.2">ä½¿ç”¨explainæŸ¥çœ‹æ˜¯å¦ä½¿ç”¨ç´¢å¼•</a><br><a href="#jump_index_zuzhibiao">ç´¢å¼•ç»„ç»‡è¡¨</a><br><a href="#jump_index_several">ä¸»é”®ç´¢å¼•(èšç°‡ç´¢å¼•ï¼Œèšé›†ç´¢å¼•)ã€éä¸»é”®ç´¢å¼•(æ™®é€šç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œéèšç°‡ç´¢å¼•)</a><br><a href="#jump_covering_index">è¦†ç›–ç´¢å¼•</a><br><a href="#jump_leftmost_prefix">æœ€å·¦å‰ç¼€</a><br><a href="#jump_pushed_down">ç´¢å¼•ä¸‹æ¨</a></p>
<h2 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šMySQLä¸­ç´¢å¼•çš„æ“ä½œ"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šMySQLä¸­ç´¢å¼•çš„æ“ä½œ" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šMySQLä¸­ç´¢å¼•çš„æ“ä½œ"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šMySQLä¸­ç´¢å¼•çš„æ“ä½œ</h2><blockquote>
<p>å‚è€ƒï¼š<br><a href="https://www.tutorialspoint.com/mysql/mysql-indexes" target="_blank" rel="noopener">https://www.tutorialspoint.com/mysql/mysql-indexes</a><br><a href="https://www.runoob.com/mysql/mysql-index.html" target="_blank" rel="noopener">https://www.runoob.com/mysql/mysql-index.html</a><br><a href="https://dev.mysql.com/doc/refman/5.6/en/create-table.html#create-table-indexes-keys" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.6/en/create-table.html#create-table-indexes-keys</a></p>
</blockquote>
<p>ç´¢å¼•åˆ†å•åˆ—ç´¢å¼•å’Œç»„åˆç´¢å¼•ã€‚å•åˆ—ç´¢å¼•ï¼Œå³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•ï¼Œä½†è¿™ä¸æ˜¯ç»„åˆç´¢å¼•ã€‚ç»„åˆç´¢å¼•ï¼Œå³ä¸€ä¸ªç´¢å¼•åŒ…å«å¤šä¸ªåˆ—ã€‚</p>
<p>å®é™…ä¸Šï¼Œç´¢å¼•ä¹Ÿæ˜¯ä¸€å¼ è¡¨ï¼Œè¯¥è¡¨ä¿å­˜äº†ä¸»é”®ä¸ç´¢å¼•å­—æ®µï¼Œå¹¶æŒ‡å‘å®ä½“è¡¨çš„è®°å½•ã€‚</p>
<p>ç”¨æˆ·çœ‹ä¸åˆ°ç´¢å¼•ï¼Œå®ƒä»¬ä»…ç”¨äºåŠ é€ŸæŸ¥è¯¢ï¼Œå¹¶ä¸”æ•°æ®åº“æœç´¢å¼•æ“å°†ä½¿ç”¨å®ƒä»¬éå¸¸å¿«é€Ÿåœ°å®šä½è®°å½•ã€‚</p>
<p>å¯¹äºå…·æœ‰ç´¢å¼•çš„è¡¨ï¼ŒINSERTå’ŒUPDATEè¯­å¥ä¼šèŠ±è´¹æ›´å¤šçš„æ—¶é—´ï¼Œè€ŒSELECTè¯­å¥ä¼šå˜å¾—æ›´å¿«ã€‚åŸå› æ˜¯åœ¨æ‰§è¡Œæ’å…¥æˆ–æ›´æ–°æ—¶ï¼Œæ•°æ®åº“è¿˜éœ€è¦æ’å…¥æˆ–æ›´æ–°ç´¢å¼•å€¼ã€‚</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1578902869016.png" alt="1578902869016"></p>
<h3 id="1-MySQLä¸­çš„ç´¢å¼•æœ‰å“ªäº›"><a href="#1-MySQLä¸­çš„ç´¢å¼•æœ‰å“ªäº›" class="headerlink" title="1. MySQLä¸­çš„ç´¢å¼•æœ‰å“ªäº›"></a>1. MySQLä¸­çš„ç´¢å¼•æœ‰å“ªäº›</h3><ul>
<li><code>PRIMAY KEY</code><br>A unique index where all key columns must be defined as <code>NOT NULL</code>. If they are not explicitly declared as <code>NOT NULL</code>, MySQL declares them so implicitly (and silently). ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ª <code>PRIMARY KEY</code>.  <code>PRIMARY KEY</code> çš„åå­—å§‹ç»ˆæ˜¯ <code>PRIMARY</code>, which thus cannot be used as the name for any other kind of index.<br>If you do not have a <code>PRIMARY KEY</code> and an application asks for the <code>PRIMARY KEY</code> in your tables, MySQL returns the first <code>UNIQUE</code> index that has no <code>NULL</code> columns as the <code>PRIMARY KEY</code>.<br>In <code>InnoDB</code> tables, keep the <code>PRIMARY KEY</code> short to minimize storage overhead for secondary indexes. Each secondary index entry contains a copy of the primary key columns for the corresponding row. (See <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-index-types.html" target="_blank" rel="noopener">Section 14.6.2.1, â€œClustered and Secondary Indexesâ€</a>.)<br>In the created table, a <code>PRIMARY KEY</code> is placed first, followed by all <code>UNIQUE</code> indexes, and then the nonunique indexes. This helps the MySQL optimizer to prioritize which index to use and also more quickly to detect duplicated <code>UNIQUE</code> keys.<br>A <code>PRIMARY KEY</code> can be a multiple-column index. <code>PRIMARY KEY(key_part, ...)</code> clause.<br>In MySQL, the name of a <code>PRIMARY KEY</code> is <code>PRIMARY</code>. For other indexes, if you do not assign a name, the index is assigned the same name as the first indexed column, with an optional suffix (<code>_2</code>, <code>_3</code>, <code>...</code>) to make it unique. You can see index names for a table using <code>SHOW INDEX FROM tbl_name</code>. See <a href="https://dev.mysql.com/doc/refman/5.6/en/show-index.html" target="_blank" rel="noopener">Section 13.7.5.23, â€œSHOW INDEX Statementâ€</a>.</li>
</ul>
<ul>
<li><code>KEY | INDEX</code><br><code>KEY</code> is normally a synonym for <code>INDEX</code>. The key attribute <code>PRIMARY KEY</code> can also be specified as just <code>KEY</code> when given in a column definition. This was implemented for compatibility with other database systems.<br>ä¹Ÿå°±æ˜¯è¯´keyå’Œindexé€šå¸¸æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·æ˜¯ä¸ºäº†å’Œå…¶ä»–æ•°æ®åº“çš„å…¼å®¹æ€§è€Œå®ç°çš„ã€‚<br>ä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„keyå’Œindexéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœåˆ›å»ºçš„æ˜¯çº¦æŸï¼Œæ¯”å¦‚PRIMARY KEYï¼ŒFOREIGN KEYè¿™ç§è¡¨ç¤ºçº¦æŸçš„ï¼Œåªèƒ½ç”¨keyã€‚(<a href="https://blog.csdn.net/kusedexingfu/article/details/78347354" target="_blank" rel="noopener">https://blog.csdn.net/kusedexingfu/article/details/78347354</a>)</li>
</ul>
<ul>
<li><code>UNIQUE</code><br>A <code>UNIQUE</code> index creates a constraint such that all values in the index must be distinct. An error occurs if you try to add a new row with a key value that matches an existing row. For all engines, a <code>UNIQUE</code> index permits multiple <code>NULL</code> values for columns that can contain <code>NULL</code>. If you specify a prefix value for a column in a <code>UNIQUE</code> index, the column values must be unique within the prefix length.<br>If a table has a <code>PRIMARY KEY</code> or <code>UNIQUE NOT NULL</code> index that consists of a single column that has an integer type, you can use <code>_rowid</code> to refer to the indexed column in <a href="https://dev.mysql.com/doc/refman/5.6/en/select.html" target="_blank" rel="noopener"><code>SELECT</code></a> statements, as described in <a href="https://dev.mysql.com/doc/refman/5.6/en/create-index.html#create-index-unique" target="_blank" rel="noopener">Unique Indexes</a>.</li>
</ul>
<ul>
<li><code>FULLTEXT</code><br>A <code>FULLTEXT</code> index is a special type of index used for full-text searches. Only the <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-storage-engine.html" target="_blank" rel="noopener"><code>InnoDB</code></a> and <a href="https://dev.mysql.com/doc/refman/5.6/en/myisam-storage-engine.html" target="_blank" rel="noopener"><code>MyISAM</code></a> storage engines support <code>FULLTEXT</code> indexes. They can be created only from <a href="https://dev.mysql.com/doc/refman/5.6/en/char.html" target="_blank" rel="noopener"><code>CHAR</code></a>, <a href="https://dev.mysql.com/doc/refman/5.6/en/char.html" target="_blank" rel="noopener"><code>VARCHAR</code></a>, and <a href="https://dev.mysql.com/doc/refman/5.6/en/blob.html" target="_blank" rel="noopener"><code>TEXT</code></a> columns.  See <a href="https://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html" target="_blank" rel="noopener">Section 12.10, â€œFull-Text Search Functionsâ€</a>, for details of operation.</li>
</ul>
<p>è¿˜æœ‰ SPATIAL, FOREIGN KEY ç­‰çš„ä»‹ç»è§ <a href="https://dev.mysql.com/doc/refman/5.6/en/create-table.html#create-table-indexes-keys" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.6/en/create-table.html#create-table-indexes-keys</a>.</p>
<h3 id="2-CREATE-UNIQUE-INDEX-åˆ›å»ºæ™®é€šç´¢å¼•-ç®€å•ç´¢å¼•-ä¸å”¯ä¸€ç´¢å¼•"><a href="#2-CREATE-UNIQUE-INDEX-åˆ›å»ºæ™®é€šç´¢å¼•-ç®€å•ç´¢å¼•-ä¸å”¯ä¸€ç´¢å¼•" class="headerlink" title="2. CREATE [UNIQUE] INDEX åˆ›å»ºæ™®é€šç´¢å¼•(ç®€å•ç´¢å¼•)ä¸å”¯ä¸€ç´¢å¼•"></a>2. CREATE [UNIQUE] INDEX åˆ›å»ºæ™®é€šç´¢å¼•(ç®€å•ç´¢å¼•)ä¸å”¯ä¸€ç´¢å¼•</h3><p>å”¯ä¸€ç´¢å¼•æ„å‘³ç€ç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ã€‚å¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œåˆ™åˆ—å€¼çš„ç»„åˆå¿…é¡»å”¯ä¸€ã€‚<br>æ™®é€šç´¢å¼•æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œå®ƒå…è®¸è¡¨ä¸­æœ‰é‡å¤å€¼ã€‚</p>
<p>ä¸‹é¢æ˜¯åœ¨è¡¨ä¸Šåˆ›å»ºç´¢å¼•çš„è¯­æ³•ï¼ˆå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—æ¥åˆ›å»ºç´¢å¼•ï¼‰ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">UNIQUE</span>] <span class="keyword">INDEX</span> index_name <span class="keyword">ON</span> table_name (column1, column2,...);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">ONLINE</span> | <span class="keyword">OFFLINE</span>] [<span class="keyword">UNIQUE</span> | FULLTEXT | SPATIAL] <span class="keyword">INDEX</span> index_name</span><br><span class="line">    [index_type]</span><br><span class="line">    <span class="keyword">ON</span> tbl_name (key_part,...)</span><br><span class="line">    [index_option]</span><br><span class="line">    [algorithm_option | lock_option] ...</span><br><span class="line"></span><br><span class="line">key_part:</span><br><span class="line">    col_name [(<span class="keyword">length</span>)] [<span class="keyword">ASC</span> | <span class="keyword">DESC</span>]</span><br><span class="line"></span><br><span class="line">index_option: &#123;</span><br><span class="line">    KEY_BLOCK_SIZE [=] <span class="keyword">value</span></span><br><span class="line">  | index_type</span><br><span class="line">  | <span class="keyword">WITH</span> PARSER parser_name</span><br><span class="line">  | <span class="keyword">COMMENT</span> <span class="string">'string'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">index_type:</span><br><span class="line">    <span class="keyword">USING</span> &#123;BTREE | <span class="keyword">HASH</span>&#125;</span><br><span class="line"></span><br><span class="line">algorithm_option:</span><br><span class="line">    ALGORITHM [=] &#123;<span class="keyword">DEFAULT</span> | INPLACE | COPY&#125;</span><br><span class="line"></span><br><span class="line">lock_option:</span><br><span class="line">    <span class="keyword">LOCK</span> [=] &#123;<span class="keyword">DEFAULT</span> | <span class="keyword">NONE</span> | <span class="keyword">SHARED</span> | EXCLUSIVE&#125;</span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- create an index on tutorials_tbl using tutorial_author.</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> AUTHOR_INDEX <span class="keyword">ON</span> tutorials_tbl (tutorial_author);</span><br></pre></td></tr></table></figure>
<p>å¯¹äºæ™®é€šç´¢å¼•ï¼Œåªéœ€ä»ä¸Šè¿°statementä¸­çœç•¥UNIQUEå…³é”®å­—å³å¯ã€‚</p>
<p>å¦‚æœå¸Œæœ›æŒ‰é™åºç´¢å¼•åˆ—ä¸­çš„å€¼ï¼Œå¯ä»¥åœ¨åˆ—ååæ·»åŠ ä¿ç•™å­—DESCã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE UNIQUE INDEX AUTHOR_INDEX ON tutorials_tbl (tutorial_author DESC)</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼š<strong>CREATE INDEX ä¸èƒ½ç”¨æ¥åˆ›å»º PRIMARY KEY.</strong><br><a href="https://dev.mysql.com/doc/refman/5.6/en/create-index.html" target="_blank" rel="noopener"><code>CREATE INDEX</code></a> is mapped to an <a href="https://dev.mysql.com/doc/refman/5.6/en/alter-table.html" target="_blank" rel="noopener"><code>ALTER TABLE</code></a> statement to create indexes. See <a href="https://dev.mysql.com/doc/refman/5.6/en/alter-table.html" target="_blank" rel="noopener">Section 13.1.7, â€œALTER TABLE Statementâ€</a>.<br> <a href="https://dev.mysql.com/doc/refman/5.6/en/create-index.html" target="_blank" rel="noopener"><code>CREATE INDEX</code></a> cannot be used to create a <code>PRIMARY KEY</code>; use <a href="https://dev.mysql.com/doc/refman/5.6/en/alter-table.html" target="_blank" rel="noopener"><code>ALTER TABLE</code></a> instead. </p>
<h3 id="3-ä½¿ç”¨-ALTER-å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•"><a href="#3-ä½¿ç”¨-ALTER-å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•" class="headerlink" title="3. ä½¿ç”¨ ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•"></a>3. ä½¿ç”¨ ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•</h3><ul>
<li><strong><code>ALTER TABLE tbl_name ADD PRIMARY KEY (column_list)</code></strong> - è¯¥è¯­å¥æ·»åŠ ä¸€ä¸ªä¸»é”®ï¼Œè¿™æ„å‘³ç€ç´¢å¼•å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¸”ä¸èƒ½ä¸ºNULLã€‚</li>
<li><strong><code>ALTER TABLE tbl_name ADD UNIQUE [INDEX | KEY] [index_name] (column_list)</code></strong> - è¯¥è¯­å¥åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œå…¶å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼ˆé™¤äº†NULLå¤–ï¼ŒNULLå¯èƒ½ä¼šå‡ºç°å¤šæ¬¡ï¼‰ã€‚</li>
<li><strong><code>ALTER TABLE tbl_name ADD {INDEX | KEY} [index_name] (column_list)</code></strong> - æ·»åŠ æ™®é€šç´¢å¼•ï¼Œç´¢å¼•å€¼å¯å‡ºç°å¤šæ¬¡ã€‚</li>
<li><strong><code>ALTER TABLE tbl_name ADD FULLTEXT [INDEX | KEY] [index_name] (column_list)</code></strong> - åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„FULLTEXTç´¢å¼•ï¼Œè¯¥ç´¢å¼•ç”¨äºæ–‡æœ¬æœç´¢ã€‚</li>
</ul>
<blockquote>
<p> æ›´å¤šå…³äº alter table çš„è¯­æ³•è§ <a href="https://dev.mysql.com/doc/refman/5.6/en/alter-table.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.6/en/alter-table.html</a></p>
</blockquote>
<p>ç¤ºä¾‹ï¼šåœ¨ç°æœ‰è¡¨ä¸­æ·»åŠ ç´¢å¼•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl ADD INDEX (c);</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šå½“ç”¨ create index åˆ›å»ºç´¢å¼•æ—¶ï¼Œå¿…é¡»æŒ‡å®šç´¢å¼•çš„åå­—ï¼Œå¦åˆ™mysqlä¼šæŠ¥é”™ï¼›ç”¨ ALTER TABLE åˆ›å»ºç´¢å¼•æ—¶ï¼Œå¯ä»¥ä¸æŒ‡å®šç´¢å¼•åå­—ï¼Œè‹¥ä¸æŒ‡å®šmysqlä¼šè‡ªåŠ¨ç”Ÿæˆç´¢å¼•åå­—ã€‚</p>
<p>å¯ä»¥åœ¨ ALTER å‘½ä»¤ä¸­ä½¿ç”¨ DROP å­å¥æ¥åˆ é™¤ç´¢å¼•ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">DROP</span> PRIMARY <span class="keyword">KEY</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">DROP</span> &#123;<span class="keyword">INDEX</span> | <span class="keyword">KEY</span>&#125; index_name;</span><br></pre></td></tr></table></figure>
<p>å°è¯•ä»¥ä¸‹ç¤ºä¾‹æ¥åˆ é™¤ä¸Šé¢åˆ›å»ºçš„ç´¢å¼•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl DROP INDEX (c);</span><br></pre></td></tr></table></figure>
<h4 id="3-1-ä½¿ç”¨-ALTER-å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ä¸»é”®"><a href="#3-1-ä½¿ç”¨-ALTER-å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ä¸»é”®" class="headerlink" title="3. 1 ä½¿ç”¨ ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ä¸»é”®"></a>3. 1 ä½¿ç”¨ ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ä¸»é”®</h4><p>å¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼æ·»åŠ ä¸»é”®ï¼ŒBut make sure the Primary Key works on columns, which are NOT NULL.</p>
<p>ä¸‹é¢çš„ä»£ç æ˜¯åœ¨ç°æœ‰è¡¨ä¸­æ·»åŠ ä¸»é”®ã€‚è¿™å°†é¦–å…ˆä½¿åˆ—ä¸ä¸ºNULLï¼Œç„¶åå°†å…¶æ·»åŠ ä¸ºä¸»é”®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl MODIFY i INT NOT NULL;</span><br><span class="line">mysql&gt; ALTER TABLE testalter_tbl ADD PRIMARY KEY (i);</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ ALTER å‘½ä»¤åˆ é™¤ä¸»é”®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤ä¸»é”®æ—¶åªéœ€æŒ‡å®š <code>PRIMARY KEY</code>ï¼Œä½†åœ¨åˆ é™¤ä¸æ˜¯ PRIMARY KEY çš„ç´¢å¼•æ—¶ï¼Œå¿…é¡»æŒ‡å®šç´¢å¼•åã€‚</p>
<h3 id="4-åˆ›å»ºè¡¨æ—¶ç›´æ¥æŒ‡å®šç´¢å¼•"><a href="#4-åˆ›å»ºè¡¨æ—¶ç›´æ¥æŒ‡å®šç´¢å¼•" class="headerlink" title="4. åˆ›å»ºè¡¨æ—¶ç›´æ¥æŒ‡å®šç´¢å¼•"></a>4. åˆ›å»ºè¡¨æ—¶ç›´æ¥æŒ‡å®šç´¢å¼•</h3><p>æ™®é€šç´¢å¼•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line">	<span class="keyword">ID</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,   </span><br><span class="line">	username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </span><br><span class="line">	&#123;<span class="keyword">INDEX</span> | <span class="keyword">KEY</span>&#125; [indexName] (username)  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>å”¯ä¸€ç´¢å¼•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line">	<span class="keyword">ID</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,   </span><br><span class="line">	username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </span><br><span class="line">	<span class="keyword">UNIQUE</span> [indexName] (username)  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ä¸»é”®ç´¢å¼•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(</span><br><span class="line">	<span class="keyword">ID</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">	username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">	PRIMARY <span class="keyword">KEY</span>(<span class="keyword">ID</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ³•äºŒ</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(</span><br><span class="line">	<span class="keyword">ID</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">	username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> T (</span><br><span class="line">    <span class="keyword">ID</span> <span class="built_in">int</span> primary <span class="keyword">key</span>,</span><br><span class="line">    k <span class="built_in">int</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>, </span><br><span class="line">    s <span class="built_in">varchar</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">    <span class="keyword">index</span> k(k)</span><br><span class="line">) <span class="keyword">engine</span>=<span class="keyword">InnoDB</span>;</span><br></pre></td></tr></table></figure>
<h3 id="5-ä½¿ç”¨-DROP-å‘½ä»¤åˆ é™¤ç´¢å¼•"><a href="#5-ä½¿ç”¨-DROP-å‘½ä»¤åˆ é™¤ç´¢å¼•" class="headerlink" title="5. ä½¿ç”¨ DROP å‘½ä»¤åˆ é™¤ç´¢å¼•"></a>5. ä½¿ç”¨ DROP å‘½ä»¤åˆ é™¤ç´¢å¼•</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> [indexName] <span class="keyword">ON</span> mytable;</span><br></pre></td></tr></table></figure>
<h3 id="6-æ˜¾ç¤ºç´¢å¼•ä¿¡æ¯"><a href="#6-æ˜¾ç¤ºç´¢å¼•ä¿¡æ¯" class="headerlink" title="6. æ˜¾ç¤ºç´¢å¼•ä¿¡æ¯"></a>6. æ˜¾ç¤ºç´¢å¼•ä¿¡æ¯</h3><h4 id="6-1-show-index"><a href="#6-1-show-index" class="headerlink" title="6.1 show index"></a>6.1 show index</h4><p>å¯ä»¥ä½¿ç”¨ <strong>SHOW INDEX</strong> å‘½ä»¤åˆ—å‡ºä¸è¡¨å…³è”çš„æ‰€æœ‰ç´¢å¼•ã€‚å¯ä»¥é€šè¿‡æ·»åŠ  \G è¿›è¡Œå‚ç›´æ ¼å¼è¾“å‡ºï¼Œä»¥é¿å…é•¿è¡Œæ¢è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW INDEX FROM table_name\G</span><br><span class="line">........</span><br></pre></td></tr></table></figure>
<h4 id="6-2-å¯ç”¨explainæ¥æŸ¥çœ‹æ˜¯å¦ä½¿ç”¨ç´¢å¼•"><a href="#6-2-å¯ç”¨explainæ¥æŸ¥çœ‹æ˜¯å¦ä½¿ç”¨ç´¢å¼•" class="headerlink" title="6.2 å¯ç”¨explainæ¥æŸ¥çœ‹æ˜¯å¦ä½¿ç”¨ç´¢å¼•"></a><span id="jump6.2">6.2 å¯ç”¨explainæ¥æŸ¥çœ‹æ˜¯å¦ä½¿ç”¨ç´¢å¼•</span></h4><p>explainç»“æœä¸­keyä»£è¡¨ä½¿ç”¨çš„ç´¢å¼•åç§°ï¼Œè‹¥ä¸ºNULLï¼Œåˆ™æœªä½¿ç”¨ç´¢å¼•ã€‚</p>
<p>explainç»“æœè¾“å‡ºçš„å†…å®¹</p>
<blockquote>
<p>å‚è€ƒ <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/8.0/en/explain-output.html</a></p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Column</th>
<th style="text-align:left">JSON Name</th>
<th style="text-align:left">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_id" target="_blank" rel="noopener"><code>id</code></a></td>
<td style="text-align:left"><code>select_id</code></td>
<td style="text-align:left">The <code>SELECT</code> identifier</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_select_type" target="_blank" rel="noopener"><code>select_type</code></a></td>
<td style="text-align:left">None</td>
<td style="text-align:left">The <code>SELECT</code> type</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_table" target="_blank" rel="noopener"><code>table</code></a></td>
<td style="text-align:left"><code>table_name</code></td>
<td style="text-align:left">The table for the output row</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_partitions" target="_blank" rel="noopener"><code>partitions</code></a></td>
<td style="text-align:left"><code>partitions</code></td>
<td style="text-align:left">The matching partitions</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_type" target="_blank" rel="noopener"><code>type</code></a></td>
<td style="text-align:left"><code>access_type</code></td>
<td style="text-align:left">The join type</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_possible_keys" target="_blank" rel="noopener"><code>possible_keys</code></a></td>
<td style="text-align:left"><code>possible_keys</code></td>
<td style="text-align:left">The possible indexes to choose</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_key" target="_blank" rel="noopener"><code>key</code></a></td>
<td style="text-align:left"><code>key</code></td>
<td style="text-align:left">The index actually chosen</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_key_len" target="_blank" rel="noopener"><code>key_len</code></a></td>
<td style="text-align:left"><code>key_length</code></td>
<td style="text-align:left">The length of the chosen key</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_ref" target="_blank" rel="noopener"><code>ref</code></a></td>
<td style="text-align:left"><code>ref</code></td>
<td style="text-align:left">The columns compared to the index</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_rows" target="_blank" rel="noopener"><code>rows</code></a></td>
<td style="text-align:left"><code>rows</code></td>
<td style="text-align:left">Estimate of rows to be examined</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_filtered" target="_blank" rel="noopener"><code>filtered</code></a></td>
<td style="text-align:left"><code>filtered</code></td>
<td style="text-align:left">Percentage of rows filtered by table condition</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain_extra" target="_blank" rel="noopener"><code>Extra</code></a></td>
<td style="text-align:left">None</td>
<td style="text-align:left">Additional information</td>
</tr>
</tbody>
</table>
</div>
<h5 id="6-2-1-å…³äºexplainä¸­çš„typeå’Œextra"><a href="#6-2-1-å…³äºexplainä¸­çš„typeå’Œextra" class="headerlink" title="6.2.1 å…³äºexplainä¸­çš„typeå’Œextra"></a>6.2.1 å…³äºexplainä¸­çš„typeå’Œextra</h5><p>ä¾‹å¦‚ï¼šç°æœ‰è¡¨city2å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605591080992.png" alt="1605591080992"></p>
<p>city2ä¸Šçš„ç´¢å¼•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šï¼ˆidä¸ºä¸»é”®ï¼Œ(age,name)è”åˆç´¢å¼•ï¼‰</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605591141489.png" alt="1605591141489"></p>
<p>æŸ¥è¯¢1ï¼š<strong><code>explain select name,age from city2 where age=20\G</code></strong><br>æŸ¥è¯¢å†…å®¹åœ¨ç´¢å¼•å†…ï¼Œwhere æ¡ä»¶ä¸ºç´¢å¼•æœ€å·¦åˆ—</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605591319736.png" alt="1605591319736"></p>
<p>ğŸ‘† type æ˜¯ refï¼Œè¡¨æ˜ç”¨åˆ°äº†ç´¢å¼•ï¼Œextra æ˜¯ using indexï¼Œè¡¨ç¤ºç´¢å¼•è¦†ç›–äº†.ï¼ˆå³ä¸ç”¨å›è¡¨ï¼‰</p>
<p>æŸ¥è¯¢2ï¼š<strong><code>explain select name, age from city2 where name=&#39;bob&#39;\G</code></strong><br> æŸ¥è¯¢å†…å®¹åœ¨ç´¢å¼•å†…ï¼Œwhereæ¡ä»¶ä¸ºç´¢å¼•ç¬¬äºŒåˆ—ï¼Œè¿™æ¬¡ä¸æ˜¯æœ€å·¦åˆ—äº†</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605591642645.png" alt="1605591642645"></p>
<p>ğŸ‘† type æ˜¯ indexï¼Œè¡¨æ˜å‘ç”Ÿäº†ç´¢å¼•æ‰«æï¼ˆå› ä¸ºwhereæ¡ä»¶ä¸æ˜¯æœ€å·¦åˆ—çš„ç¼˜æ•…ï¼‰ï¼Œextra æ˜¯ using where; using indexï¼ˆusing indexä»£è¡¨ç´¢å¼•è¦†ç›–äº†ï¼Œä¸ç”¨å›è¡¨ï¼Œusing whereä»£è¡¨å‘ç”Ÿäº†è¿‡æ»¤ï¼‰ï¼Œ</p>
<p>æŸ¥è¯¢3ï¼š<strong><code>explain select address from city2 where age=20\G</code></strong><br>æŸ¥è¯¢å†…å®¹ä¸åœ¨ç´¢å¼•å†…ï¼Œwhere æ¡ä»¶ä¸ºç´¢å¼•æœ€å·¦åˆ—</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605592157733.png" alt="1605592157733"></p>
<p>ğŸ‘† extra æ˜¯ NULLï¼Œtype æ˜¯ refï¼Œè¡¨æ˜è™½ç„¶ç”¨åˆ°äº†ç´¢å¼•ï¼Œä½†æ˜¯æ²¡æœ‰ç´¢å¼•è¦†ç›–ï¼Œäº§ç”Ÿäº†å›è¡¨ã€‚</p>
<p>æŸ¥è¯¢4ï¼š<strong><code>explain select address from city2 where name=&#39;bob&#39;\G</code></strong><br>æŸ¥è¯¢å†…å®¹ä¸åœ¨ç´¢å¼•èŒƒå›´å†…ï¼Œwhereæ¡ä»¶ä¸ºç´¢å¼•ç¬¬äºŒåˆ—</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605592577124.png" alt="1605592577124"></p>
<p>ğŸ‘† type æ˜¯ allï¼Œä»£è¡¨å…¨è¡¨æ‰«æï¼Œextra æ˜¯ using where è¯´æ˜åœ¨å…¨è¡¨æ‰«æåå‘ç”Ÿäº†è¿‡æ»¤ã€‚ï¼ˆèµ°å…¨è¡¨æ‰«æçš„åŸå› æ˜¯æŸ¥è¯¢å†…å®¹ä¸åœ¨ç´¢å¼•èŒƒå›´å†…ï¼Œä¸”whereæ¡ä»¶æ²¡æœ‰æœ€å·¦åˆ—ï¼Œæ‰€ä»¥å¼•æ“é€‰æ‹©äº†èµ°å…¨è¡¨æ‰«æã€‚ï¼‰</p>
<p>æ›´å¤šä¾‹å­è§ <a href="https://blog.csdn.net/jeffrey11223/article/details/79100761" target="_blank" rel="noopener">https://blog.csdn.net/jeffrey11223/article/details/79100761</a></p>
<h6 id="1-EXPLAIN-Join-Types"><a href="#1-EXPLAIN-Join-Types" class="headerlink" title="(1) EXPLAIN Join Types"></a>(1) EXPLAIN Join Types</h6><p>explainä¸­typeçš„è§£é‡Š</p>
<p>The <code>type</code> column of <a href="https://dev.mysql.com/doc/refman/8.0/en/explain.html" target="_blank" rel="noopener"><code>EXPLAIN</code></a> output describes how tables are joined.  The following list describes the join types, ordered from the best type to the worst:</p>
<p>ä¸‹é¢åªåˆ—å‡ºäº†éƒ¨åˆ†</p>
<ul>
<li><p><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_system" target="_blank" rel="noopener"><code>system</code></a><br>The table has only one row (= system table). This is a special case of the <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_const" target="_blank" rel="noopener"><code>const</code></a> join type.</p>
</li>
<li><p><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_const" target="_blank" rel="noopener"><code>const</code></a><br>The table has at most one matching row, which is read at the start of the query. Because there is only one row, values from the column in this row can be regarded as constants by the rest of the optimizer. <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_const" target="_blank" rel="noopener"><code>const</code></a> tables are very fast because they are read only once.<br><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_const" target="_blank" rel="noopener"><code>const</code></a> is used when you compare all parts of a <code>PRIMARY KEY</code> or <code>UNIQUE</code> index to constant values. In the following queries, <em>tbl_name</em> can be used as a <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_const" target="_blank" rel="noopener"><code>const</code></a> table:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> primary_key=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tbl_name</span><br><span class="line">  <span class="keyword">WHERE</span> primary_key_part1=<span class="number">1</span> <span class="keyword">AND</span> primary_key_part2=<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_ref" target="_blank" rel="noopener"><code>ref</code></a><br>All rows with matching index values are read from this table for each combination of rows from the previous tables. <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_ref" target="_blank" rel="noopener"><code>ref</code></a> is used if the join uses only a leftmost prefix of the key or if the key is not a <code>PRIMARY KEY</code> or <code>UNIQUE</code> index (in other words, if the join cannot select a single row based on the key value). If the key that is used matches only a few rows, this is a good join type.<br><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_ref" target="_blank" rel="noopener"><code>ref</code></a> can be used for indexed columns that are compared using the <code>=</code> or <code>&lt;=&gt;</code> operator. In the following examples, MySQL can use a <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_ref" target="_blank" rel="noopener"><code>ref</code></a> join to process <em>ref_table</em>:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ref_table <span class="keyword">WHERE</span> key_column=expr;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ref_table,other_table</span><br><span class="line">  <span class="keyword">WHERE</span> ref_table.key_column=other_table.column;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ref_table,other_table</span><br><span class="line">  <span class="keyword">WHERE</span> ref_table.key_column_part1=other_table.column</span><br><span class="line">  <span class="keyword">AND</span> ref_table.key_column_part2=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_index" target="_blank" rel="noopener"><code>index</code></a><br>The <code>index</code> join type is the same as <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_all" target="_blank" rel="noopener"><code>ALL</code></a>, except that the index tree is scanned. This occurs two ways:</p>
<ul>
<li>If the index is a covering index for the queries and can be used to satisfy all data required from the table, only the index tree is scanned. In this case, the <code>Extra</code> column says <code>Using index</code>. An index-only scan usually is faster than <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_all" target="_blank" rel="noopener"><code>ALL</code></a> because the size of the index usually is smaller than the table data.</li>
<li>A full table scan is performed using reads from the index to look up data rows in index order. <code>Uses index</code> does not appear in the <code>Extra</code> column.</li>
</ul>
<p>MySQL can use this join type when the query uses only columns that are part of a single index.</p>
</li>
<li><p><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_all" target="_blank" rel="noopener"><code>ALL</code></a><br>A full table scan is done for each combination of rows from the previous tables. This is normally not good if the table is the first table not marked const, and usually very bad in all other cases. Normally, you can avoid ALL by adding indexes that enable row retrieval from the table based on constant values or column values from earlier tables.</p>
</li>
</ul>
<h6 id="2-EXPLAIN-Extra-Information"><a href="#2-EXPLAIN-Extra-Information" class="headerlink" title="(2) EXPLAIN Extra Information"></a>(2) EXPLAIN Extra Information</h6><p>explianä¸­extraçš„è§£é‡Š</p>
<p>If you want to make your queries as fast as possible, look out for <code>Extra</code> column values of <code>Using filesort</code> and <code>Using temporary</code>.</p>
<p>ä¸‹é¢åªåˆ—å‡ºäº†ä¸€éƒ¨åˆ†ï¼š</p>
<ul>
<li><code>Distinct</code> (JSON property: <code>distinct</code>)<br>MySQL is looking for distinct values, so it stops searching for more rows for the current row combination after it has found the first matching row.</li>
</ul>
<ul>
<li><code>Full scan on NULL key</code> (JSON property: <code>message</code>)<br>This occurs for subquery optimization as a fallback strategy when the optimizer cannot use an index-lookup access method.</li>
</ul>
<ul>
<li><code>Using filesort</code> (JSON property: <code>using_filesort</code>)<br>MySQL must do an extra pass to find out how to retrieve the rows in sorted order. The sort is done by going through all rows according to the join type and storing the sort key and pointer to the row for all rows that match the <code>WHERE</code> clause. The keys then are sorted and the rows are retrieved in sorted order. See <a href="https://dev.mysql.com/doc/refman/8.0/en/order-by-optimization.html" target="_blank" rel="noopener">Section 8.2.1.16, â€œORDER BY Optimizationâ€</a>.</li>
</ul>
<ul>
<li><p><code>Using index</code> (JSON property: <code>using_index</code>)<br>The column information is retrieved from the table using only information in the index tree without having to do an additional seek to read the actual row. This strategy can be used when the query uses only columns that are part of a single index.<br>For <code>InnoDB</code> tables that have a user-defined clustered index, that index can be used even when <code>Using index</code> is absent from the <code>Extra</code> column. This is the case if <code>type</code> is <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_index" target="_blank" rel="noopener"><code>index</code></a> and <code>key</code> is <code>PRIMARY</code>.</p>
</li>
<li><p><code>Using index condition</code> (JSON property: <code>using_index_condition</code>)<br>Tables are read by accessing index tuples and testing them first to determine whether to read full table rows. In this way, index information is used to defer (â€œpush downâ€) reading full table rows unless it is necessary. See <a href="https://dev.mysql.com/doc/refman/8.0/en/index-condition-pushdown-optimization.html" target="_blank" rel="noopener">Section 8.2.1.6, â€œIndex Condition Pushdown Optimizationâ€</a>.</p>
</li>
<li><p><code>Using temporary</code> (JSON property: <code>using_temporary_table</code>)<br>To resolve the query, MySQL needs to create a temporary table to hold the result. This typically happens if the query contains <code>GROUP BY</code> and <code>ORDER BY</code> clauses that list columns differently.</p>
</li>
<li><p><code>Using where</code> (JSON property: <code>attached_condition</code>)<br>A <code>WHERE</code> clause is used to restrict which rows to match against the next table or send to the client. Unless you specifically intend to fetch or examine all rows from the table, you may have something wrong in your query if the <code>Extra</code> value is not <code>Using where</code> and the table join type is <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_all" target="_blank" rel="noopener"><code>ALL</code></a> or <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#jointype_index" target="_blank" rel="noopener"><code>index</code></a>.</p>
</li>
</ul>
<p>Tables are read by accessing index tuples and testing them first to determine whether to read full table rows. In this way, index information is used to defer (â€œpush downâ€) reading full table rows unless it is necessary. See <a href="https://dev.mysql.com/doc/refman/8.0/en/index-condition-pushdown-optimization.html" target="_blank" rel="noopener">Section 8.2.1.6, â€œIndex Condition Pushdown Optimizationâ€</a>.</p>
<h3 id="7-ä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨ç´¢å¼•"><a href="#7-ä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨ç´¢å¼•" class="headerlink" title="7. ä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨ç´¢å¼•"></a>7. ä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨ç´¢å¼•</h3><p><img src="/2020/01/13/ç´¢å¼•Index/1578902891139.png" alt="1578902891139"></p>
<h3 id="8-ä»€ä¹ˆæ—¶å€™ä¸è¯¥ä½¿ç”¨ç´¢å¼•"><a href="#8-ä»€ä¹ˆæ—¶å€™ä¸è¯¥ä½¿ç”¨ç´¢å¼•" class="headerlink" title="8. ä»€ä¹ˆæ—¶å€™ä¸è¯¥ä½¿ç”¨ç´¢å¼•"></a>8. ä»€ä¹ˆæ—¶å€™ä¸è¯¥ä½¿ç”¨ç´¢å¼•</h3><p>ç´¢å¼•ä¹Ÿä¼šæœ‰å®ƒçš„ç¼ºç‚¹ï¼šè™½ç„¶ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢é€Ÿåº¦ï¼ŒåŒæ—¶å´ä¼šé™ä½æ›´æ–°è¡¨çš„é€Ÿåº¦ï¼Œå¦‚å¯¹è¡¨è¿›è¡ŒINSERTã€UPDATEå’ŒDELETEã€‚å› ä¸ºæ›´æ–°è¡¨æ—¶ï¼ŒMySQLä¸ä»…è¦ä¿å­˜æ•°æ®ï¼Œè¿˜è¦ä¿å­˜ä¸€ä¸‹ç´¢å¼•æ–‡ä»¶ã€‚</p>
<p>å»ºç«‹ç´¢å¼•ä¼šå ç”¨ç£ç›˜ç©ºé—´çš„ç´¢å¼•æ–‡ä»¶ã€‚</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1578902910331.png" alt="1578902910331"></p>
<h2 id="ç¬¬äºŒéƒ¨åˆ†ï¼šç´¢å¼•çš„å¸¸è§æ¨¡å‹"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šç´¢å¼•çš„å¸¸è§æ¨¡å‹" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šç´¢å¼•çš„å¸¸è§æ¨¡å‹"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šç´¢å¼•çš„å¸¸è§æ¨¡å‹</h2><blockquote>
<p>å‚è€ƒ <a href="https://time.geekbang.org/column/article/69236" target="_blank" rel="noopener">https://time.geekbang.org/column/article/69236</a></p>
</blockquote>
<p>ç´¢å¼•çš„å¸¸è§æ¨¡å‹ï¼šå“ˆå¸Œè¡¨ã€æœ‰åºæ•°ç»„å’Œæœç´¢æ ‘ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç°åœ¨ç»´æŠ¤ç€ä¸€ä¸ªèº«ä»½è¯ä¿¡æ¯å’Œå§“åçš„è¡¨ï¼Œéœ€è¦æ ¹æ®èº«ä»½è¯å·æŸ¥æ‰¾å¯¹åº”çš„åå­—ã€‚</p>
<h3 id="1-å“ˆå¸Œè¡¨"><a href="#1-å“ˆå¸Œè¡¨" class="headerlink" title="1. å“ˆå¸Œè¡¨"></a>1. å“ˆå¸Œè¡¨</h3><p>å“ˆå¸Œç´¢å¼•çš„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605000393037.png" alt="1605000393037"></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œå››ä¸ªID_card_nçš„å€¼å¹¶ä¸æ˜¯é€’å¢çš„ï¼ˆå³å¹¶ä¸æ˜¯èº«ä»½è¯å·è¶Šå¤§ï¼Œç®—å‡ºæ¥çš„Nè¶Šå¤§ï¼‰</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå¢åŠ æ–°çš„æ•°æ®æ—¶ï¼Œåªéœ€å¾€åè¿½åŠ ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šå› ä¸ºä¸æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥å“ˆå¸Œç´¢å¼•åšåŒºé—´æŸ¥è¯¢çš„é€Ÿåº¦æ˜¯å¾ˆæ…¢çš„ã€‚ä¾‹å¦‚æŸ¥æ‰¾èº«ä»½è¯å·åœ¨[ID_card_X, ID_card_Y]åŒºé—´çš„æ‰€æœ‰ç”¨æˆ·ï¼Œå°±å¿…é¡»å…¨éƒ¨æ‰«æä¸€éäº†ã€‚</p>
<p><strong>å“ˆå¸Œè¡¨è¿™ç§ç»“æ„é€‚ç”¨äºåªæœ‰ç­‰å€¼æŸ¥è¯¢çš„åœºæ™¯ï¼Œæ¯”å¦‚ Memcached åŠå…¶ä»–ä¸€äº› NoSQL å¼•æ“ã€‚</strong></p>
<h3 id="2-æœ‰åºæ•°ç»„"><a href="#2-æœ‰åºæ•°ç»„" class="headerlink" title="2. æœ‰åºæ•°ç»„"></a>2. æœ‰åºæ•°ç»„</h3><p><strong>ä¼˜ç‚¹</strong>ï¼šæœ‰åºæ•°ç»„åœ¨ç­‰å€¼æŸ¥è¯¢å’ŒèŒƒå›´æŸ¥è¯¢åœºæ™¯ä¸­çš„æ€§èƒ½éƒ½éå¸¸ä¼˜ç§€ã€‚</p>
<p>è¿˜æ˜¯ä¸Šé¢è¿™ä¸ªæ ¹æ®èº«ä»½è¯å·æŸ¥åå­—çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨æœ‰åºæ•°ç»„æ¥å®ç°çš„è¯ï¼Œç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605000914282.png" alt="1605000914282"></p>
<p>æŸ¥æ‰¾èº«ä»½è¯å·å¯¹åº”çš„åå­—ï¼Œç”¨äºŒåˆ†æ³•å¯ä»¥å¿«é€Ÿå¾—åˆ°ï¼Œæ—¶é—´å¤æ‚åº¦ O(log(N))ã€‚</p>
<p>åŒæ—¶å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸ªç´¢å¼•ç»“æ„æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€‚è‹¥è¦æŸ¥èº«ä»½è¯å·åœ¨[ID_card_X, ID_card_Y]åŒºé—´çš„User, å¯ä»¥å…ˆäºŒåˆ†æ³•æ‰¾åˆ°ID_card_xï¼ˆå¦‚æœä¸å­˜åœ¨ID_card_X,å°±æ‰¾åˆ°å¤§äºID_card_Xçš„ç¬¬ä¸€ä¸ªuser)ï¼Œç„¶åå‘å³è°å†ï¼Œç›´åˆ°æŸ¥åˆ°ç¬¬ä¸€ä¸ªå¤§äºID_card)Yçš„èº«ä»½è¯å·ï¼Œé€€å‡ºå¾ªç¯ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šå¦‚æœä»…ä»…çœ‹æŸ¥è¯¢æ•ˆç‡ï¼Œæœ‰åºæ•°ç»„å°±æ˜¯æœ€å¥½çš„æ•°æ®ç»“æ„äº†ã€‚ä½†æ˜¯ï¼Œåœ¨éœ€è¦æ›´æ–°æ•°æ®çš„æ—¶å€™å°±éº»çƒ¦äº†ï¼Œä½ å¾€ä¸­é—´æ’å…¥ä¸€ä¸ªè®°å½•å°±å®ƒé¡»å¾—æŒªåŠ¨åé¢æ‰€æœ‰çš„è®°å½•ï¼Œæˆæœ¬å¤ªé«˜ã€‚</p>
<p>æ‰€ä»¥ï¼Œ<strong>æœ‰åºæ•°ç»„ç´¢å¼•åªé€‚ç”¨äºé™æ€å­˜å‚¨å¼•æ“</strong>ï¼Œæ¯”å¦‚ä½ è¦ä¿å­˜çš„æ˜¯2017å¹´æŸä¸ªåŸå¸‚çš„æ‰€æœ‰äººå›—ä¿¡æ¯ï¼Œè¿™ç±»ä¸ä¼šå†ä¿®æ”¹çš„æ•°æ®ã€‚</p>
<h3 id="3-æœç´¢æ ‘"><a href="#3-æœç´¢æ ‘" class="headerlink" title="3. æœç´¢æ ‘"></a>3. æœç´¢æ ‘</h3><p>è¿˜æ˜¯ä¸Šé¢æ ¹æ®èº«ä»½è¯å·æŸ¥åå­—çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬ç”¨äºŒå‰æœç´¢æ ‘æ¥å®ç°çš„è¯ï¼Œç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605080367750.png" alt="1605080367750"></p>
<p>äºŒå‰æœç´¢æ ‘çš„ç‰¹ç‚¹æ˜¯ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å„¿å­å°äºçˆ¶èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹åˆå°äºå³å„¿å­ã€‚è¿™æ ·å¦‚æœä½ è¦æŸ¥ ID_card_n2 çš„è¯ï¼ŒæŒ‰ç…§å›¾ä¸­çš„æœç´¢é¡ºåºå°±æ˜¯æŒ‰ç…§ UserA -&gt; UserC -&gt; UserF -&gt; User2 è¿™ä¸ªè·¯å¾„å¾—åˆ°ã€‚è¿™ä¸ªæ—¶é—´å¤æ‚åº¦æ‚åº¦æ˜¯O(log(N))ã€‚</p>
<p>å½“ç„¶ä¸ºäº†ç»´æŒ O(Iog(N)) çš„æŸ¥è¯¢å¤æ‚åº¦ï¼Œéœ€è¦ä¿æŒè¿™æ£µæ ‘æ˜¯å¹³è¡¡äºŒå‰æ ‘ã€‚ä¸ºäº†åšè¿™ä¸ªä¿è¯ï¼Œæ›´æ–°çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(log(N))ã€‚</p>
<p>æ ‘å¯ä»¥æœ‰äºŒå‰ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šå‰ã€‚å¤šå‰æ ‘å°±æ˜¯æ¯ä¸ªèŠ‚ç‚¹æœ‰å¤šä¸ªå„¿å­ï¼Œå„¿å­ä¹‹é—´çš„å¤§å°ä¿è¯ä»å·¦åˆ°å³é€’å¢ã€‚äºŒå‰æ ‘æ˜¯æœç´¢æ•ˆç‡æœ€é«˜çš„ï¼Œä½†æ˜¯å®é™…ä¸Šå¤§å¤šæ•°çš„æ•°æ®åº“å­˜å‚¨å´å¹¶ä¸ä½¿ç”¨äºŒå‰æ ‘ã€‚å…¶åŸå› æ˜¯ï¼Œç´¢å¼•ä¸æ­¢å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿˜è¦å†™åˆ°ç£ç›˜ä¸Šã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ä¸€æ£µ100ä¸‡èŠ‚ç‚¹çš„å¹³è¡¡äºŒå‰æ ‘ï¼Œæ ‘é«˜20ã€‚ä¸€æ¬¡æŸ¥è¯¢å¯èƒ½éœ€è¦è®¿é—®20ä¸ªæ•°æ®å—ã€‚åœ¨æœºæ¢°ç¡¬ç›˜æ—¶ä»£ï¼Œä»ç£ç›˜éšæœºè¯»ä¸€ä¸ªæ•°æ®å—éœ€è¦10mså·¦å³çš„å¯»å€æ—¶é—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä¸€ä¸ª100ä¸‡è¡Œçš„è¡¨ï¼Œå¦‚æœä½¿ç”¨äºŒå‰æ ‘æ¥å­˜å‚¨ï¼Œå•ç‹¬è®¿é—®ä¸€ä¸ªè¡Œå¯èƒ½éœ€è¦20ä¸ª10msçš„æ—¶é—´ï¼Œè¿™ä¸ªæŸ¥è¯¢å¯çœŸå¤Ÿæ…¢çš„ã€‚</p>
<p>ä¸ºäº†è®©ä¸€ä¸ªæŸ¥è¯¢å°½é‡å°‘åœ°è¯»ç£ç›˜ï¼Œå°±å¿…é¡»è®©æŸ¥è¯¢è¿‡ç¨‹è®¿é—®å°½é‡å°‘çš„æ•°æ®å—ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±ä¸åº”è¯¥ä½¿ç”¨äºŒå‰æ ‘ï¼Œè€Œæ˜¯è¦ä½¿ç”¨<strong><span style="color:red">â€œN å‰â€æ ‘</span></strong>ã€‚è¿™é‡Œï¼Œâ€œN å‰â€æ ‘ä¸­çš„â€œNâ€å–å†³äºæ•°æ®å—çš„å¤§å°ã€‚</p>
<p>ä»¥ InnoDB çš„ä¸€ä¸ªæ•´æ•°å­—æ®µç´¢å¼•ä¸ºä¾‹ï¼Œè¿™ä¸ª N å·®ä¸å¤šæ˜¯ 1200ã€‚è¿™æ£µæ ‘é«˜æ˜¯ 4 çš„æ—¶å€™ï¼Œå°±å¯ä»¥å­˜ 1200 çš„ 3 æ¬¡æ–¹ä¸ªå€¼ï¼Œè¿™å·²ç» 17 äº¿äº†ã€‚è€ƒè™‘åˆ°æ ‘æ ¹çš„æ•°æ®å—æ€»æ˜¯åœ¨å†…å­˜ä¸­çš„ï¼Œä¸€ä¸ª 10 äº¿è¡Œçš„è¡¨ä¸Šä¸€ä¸ªæ•´æ•°å­—æ®µçš„ç´¢å¼•ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªå€¼æœ€å¤šåªéœ€è¦è®¿é—® 3 æ¬¡ç£ç›˜ã€‚å…¶å®ï¼Œæ ‘çš„ç¬¬äºŒå±‚ä¹Ÿæœ‰å¾ˆå¤§æ¦‚ç‡åœ¨å†…å­˜ä¸­ï¼Œé‚£ä¹ˆè®¿é—®ç£ç›˜çš„å¹³å‡æ¬¡æ•°å°±æ›´å°‘äº†ã€‚</p>
<p><strong>N å‰æ ‘ç”±äºåœ¨è¯»å†™ä¸Šçš„æ€§èƒ½ä¼˜ç‚¹ï¼Œä»¥åŠé€‚é…ç£ç›˜çš„è®¿é—®æ¨¡å¼ï¼Œå·²ç»è¢«å¹¿æ³›åº”ç”¨åœ¨æ•°æ®åº“å¼•æ“ä¸­äº†ã€‚</strong></p>
<blockquote>
<p>Nå‰æ ‘çš„Nå€¼ï¼Œå¯ä»¥é€šè¿‡pageå¤§å°é—´æ¥æ§åˆ¶</p>
</blockquote>
<h2 id="ç¬¬ä¸‰éƒ¨åˆ†ï¼šInnoDBçš„ç´¢å¼•æ¨¡å‹"><a href="#ç¬¬ä¸‰éƒ¨åˆ†ï¼šInnoDBçš„ç´¢å¼•æ¨¡å‹" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†ï¼šInnoDBçš„ç´¢å¼•æ¨¡å‹"></a>ç¬¬ä¸‰éƒ¨åˆ†ï¼šInnoDBçš„ç´¢å¼•æ¨¡å‹</h2><blockquote>
<p>å‚è€ƒ <a href="https://time.geekbang.org/column/article/69236" target="_blank" rel="noopener">https://time.geekbang.org/column/article/69236</a></p>
</blockquote>
<h3 id="1-InnoDBç´¢å¼•ç»„ç»‡ç»“æ„"><a href="#1-InnoDBç´¢å¼•ç»„ç»‡ç»“æ„" class="headerlink" title="1. InnoDBç´¢å¼•ç»„ç»‡ç»“æ„"></a>1. InnoDBç´¢å¼•ç»„ç»‡ç»“æ„</h3><p>åœ¨ MySQL ä¸­ï¼Œç´¢å¼•æ˜¯åœ¨å­˜å‚¨å¼•æ“å±‚å®ç°çš„ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰ç»Ÿä¸€çš„ç´¢å¼•æ ‡å‡†ï¼Œå³ä¸åŒå­˜å‚¨å¼•æ“çš„ç´¢å¼•çš„å·¥ä½œæ–¹å¼å¹¶ä¸ä¸€æ ·ã€‚è€Œå³ä½¿å¤šä¸ªå­˜å‚¨å¼•æ“æ”¯æŒåŒä¸€ç§ç±»å‹çš„ç´¢å¼•ï¼Œå…¶åº•å±‚çš„å®ç°ä¹Ÿå¯èƒ½ä¸åŒã€‚ç”±äº InnoDB å­˜å‚¨å¼•æ“åœ¨ MySQL æ•°æ®åº“ä¸­ä½¿ç”¨æœ€ä¸ºå¹¿æ³›ï¼Œæ‰€ä»¥ä¸‹é¢ä»¥ InnoDB ä¸ºä¾‹ï¼Œåˆ†æä¸€ä¸‹å…¶ä¸­çš„ç´¢å¼•æ¨¡å‹ã€‚</p>
<p>åœ¨ InnoDB ä¸­ï¼Œè¡¨éƒ½æ˜¯æ ¹æ®ä¸»é”®é¡ºåºä»¥ç´¢å¼•çš„å½¢å¼å­˜æ”¾çš„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼çš„è¡¨ç§°ä¸º<strong><span id="jump_index_zuzhibiao">ç´¢å¼•ç»„ç»‡è¡¨</span></strong>ã€‚åˆå› ä¸ºå‰é¢æˆ‘ä»¬æåˆ°çš„ï¼ŒInnoDB ä½¿ç”¨äº† <strong>B+ æ ‘</strong>ç´¢å¼•æ¨¡å‹ï¼Œæ‰€ä»¥æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨ B+ æ ‘ä¸­çš„ã€‚</p>
<blockquote>
<p><span style="color:red">æ¯ä¸€ä¸ªç´¢å¼•åœ¨ InnoDB é‡Œé¢å¯¹åº”ä¸€æ£µ B+ æ ‘ã€‚</span></p>
</blockquote>
<p>å‡è®¾ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸»é”®åˆ—ä¸ºIDçš„è¡¨ï¼Œè¡¨ä¸­æœ‰å­—æ®µ kï¼Œå¹¶ä¸”åœ¨kä¸Šæœ‰ç´¢å¼•ã€‚è¿™ä¸ªè¡¨çš„å»ºè¡¨è¯­å¥æ˜¯ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql&gt;create table T(</span><br><span class="line">id int primary keyï¼Œ</span><br><span class="line">k int not nullï¼Œ</span><br><span class="line">name varchar(16)ï¼Œ</span><br><span class="line">index(k)) engine=InnoDB;</span><br></pre></td></tr></table></figure>
<p>è¡¨ä¸­R1-R5çš„(ID,k)å€¼åˆ†åˆ«ä¸º(100, 1)ã€(200, 2)ã€(300,3)ã€(500,5) å’Œ (600, 6)ï¼Œä¸¤æ£µæ ‘çš„ç¤ºä¾‹ç¤ºæ„å›¾å¦‚ä¸‹ã€‚</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605086187154.png" alt="1605086187154"></p>
<p>R1ä»£è¡¨çš„æ˜¯ä¸€è¡Œï¼Œå·¦è¾¹æ˜¯ä¸»é”®ç´¢å¼•ï¼Œå³è¾¹æ˜¯éä¸»é”®ç´¢å¼•ã€‚</p>
<blockquote>
<p><strong>innoDB B+æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯page (é¡µ)ï¼Œä¸€ä¸ªé¡µé‡Œé¢å¯ä»¥å­˜å¤šä¸ªè¡Œ</strong><br>ç´¢å¼•åªèƒ½å®šä½åˆ°pageï¼Œpageå†…éƒ¨æ€ä¹ˆå»å®šä½è¡Œæ•°æ®ï¼špageå†…éƒ¨æœ‰ä¸ªæœ‰åºæ•°ç»„ï¼ŒäºŒåˆ†æ³•</p>
</blockquote>
<p>ä»å›¾ä¸­ä¸éš¾çœ‹å‡ºï¼Œæ ¹æ®å¶å­èŠ‚ç‚¹çš„å†…å®¹ï¼Œç´¢å¼•ç±»å‹åˆ†ä¸º<span style="color:red" id="jump_index_several"><strong>ä¸»é”®ç´¢å¼•</strong></span>å’Œ<strong><span style="color:red">éä¸»é”®ç´¢å¼•ï¼ˆä¹Ÿå«æ™®é€šç´¢å¼•ï¼‰</span></strong>ã€‚<br><strong>ä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜çš„æ˜¯æ•´è¡Œæ•°æ®</strong>ã€‚åœ¨ InnoDB é‡Œï¼Œä¸»é”®ç´¢å¼•ä¹Ÿè¢«ç§°ä¸º<strong><span style="color:red">èšç°‡ç´¢å¼•ï¼ˆclustered indexï¼‰</span></strong>ã€‚<br><strong>éä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å†…å®¹æ˜¯ä¸»é”®çš„å€¼</strong>ã€‚åœ¨ InnoDB é‡Œï¼Œéä¸»é”®ç´¢å¼•ä¹Ÿè¢«ç§°ä¸º<strong><span style="color:red">äºŒçº§ç´¢å¼•ï¼ˆsecondary indexï¼‰</span></strong>ã€‚</p>
<p>æ ¹æ®ä¸Šé¢çš„ç´¢å¼•ç»“æ„è¯´æ˜ï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸ªé—®é¢˜ï¼šåŸºäºä¸»é”®ç´¢å¼•å’Œæ™®é€šç´¢å¼•çš„æŸ¥è¯¢æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<ul>
<li>å¦‚æœè¯­å¥æ˜¯ select * from T where ID=500ï¼Œå³ä¸»é”®æŸ¥è¯¢æ–¹å¼ï¼Œåˆ™åªéœ€è¦æœç´¢ ID è¿™æ£µ B+ æ ‘ï¼›</li>
<li>å¦‚æœè¯­å¥æ˜¯ select * from T where k=5ï¼Œå³æ™®é€šç´¢å¼•æŸ¥è¯¢æ–¹å¼ï¼Œåˆ™éœ€è¦å…ˆæœç´¢ k ç´¢å¼•æ ‘ï¼Œå¾—åˆ° ID çš„å€¼ä¸º 500ï¼Œå†åˆ° ID ç´¢å¼•æ ‘æœç´¢ä¸€æ¬¡ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå›è¡¨ã€‚</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>åŸºäºéä¸»é”®ç´¢å¼•çš„æŸ¥è¯¢éœ€è¦å¤šæ‰«æä¸€æ£µç´¢å¼•æ ‘</strong>ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨åº”ç”¨ä¸­åº”è¯¥å°½é‡ä½¿ç”¨ä¸»é”®æŸ¥è¯¢ã€‚</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605236459443.png" alt="1605236459443"></p>
<h4 id="1-1-èšç°‡ç´¢å¼•ï¼ˆä¹Ÿç§°ä¸»é”®ç´¢å¼•ï¼Œèšé›†ç´¢å¼•ï¼Œclustered-indexï¼‰"><a href="#1-1-èšç°‡ç´¢å¼•ï¼ˆä¹Ÿç§°ä¸»é”®ç´¢å¼•ï¼Œèšé›†ç´¢å¼•ï¼Œclustered-indexï¼‰" class="headerlink" title="1.1 èšç°‡ç´¢å¼•ï¼ˆä¹Ÿç§°ä¸»é”®ç´¢å¼•ï¼Œèšé›†ç´¢å¼•ï¼Œclustered indexï¼‰"></a><span style="color:Red">1.1 èšç°‡ç´¢å¼•ï¼ˆä¹Ÿç§°ä¸»é”®ç´¢å¼•ï¼Œèšé›†ç´¢å¼•ï¼Œclustered indexï¼‰</span></h4><blockquote>
<p>å‚è€ƒ <a href="https://www.cnblogs.com/jiawen010/p/11805241.html" target="_blank" rel="noopener">https://www.cnblogs.com/jiawen010/p/11805241.html</a></p>
</blockquote>
<p><strong>InnoDBä¸­ï¼Œè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯æŒ‰B+Treeç»„ç»‡çš„ä¸€ä¸ªç´¢å¼•ç»“æ„ï¼Œèšç°‡ç´¢å¼•å°±æ˜¯æŒ‰ç…§æ¯å¼ è¡¨çš„ä¸»é”®æ„é€ ä¸€é¢—B+æ ‘ï¼ŒåŒæ—¶å¶å­èŠ‚ç‚¹ä¸­å­˜æ”¾çš„å°±æ˜¯æ•´å¼ è¡¨çš„è¡Œè®°å½•æ•°æ®ï¼Œä¹Ÿå°†èšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ç§°ä¸ºæ•°æ®é¡µã€‚è¿™ä¸ªç‰¹æ€§å†³å®šäº†ç´¢å¼•ç»„ç»‡è¡¨ä¸­æ•°æ®ä¹Ÿæ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ†ã€‚ä¸€å¼ è¡¨åªæœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚</strong></p>
<p>èšç°‡ç´¢å¼•å¹¶ä¸æ˜¯ä¸€ç§å•ç‹¬çš„ç´¢å¼•ç±»å‹ï¼Œè€Œ<strong>æ˜¯ä¸€ç§æ•°æ®å­˜å‚¨æ–¹å¼</strong>ã€‚å…·ä½“ç»†èŠ‚ä¾èµ–äºå…¶å®ç°æ–¹å¼ã€‚</p>
<p>MySQLæ•°æ®åº“ä¸­innodbå­˜å‚¨å¼•æ“ï¼ŒB+æ ‘ç´¢å¼•å¯ä»¥åˆ†ä¸ºèšç°‡ç´¢å¼•ï¼ˆä¹Ÿç§°èšé›†ç´¢å¼•ï¼Œclustered indexï¼‰å’Œ<span style="color:red">è¾…åŠ©ç´¢å¼•ï¼ˆæœ‰æ—¶ä¹Ÿç§°éèšç°‡ç´¢å¼•æˆ–äºŒçº§ç´¢å¼•ï¼Œsecondary indexï¼Œnon-clustered indexï¼‰</span>ã€‚è¿™ä¸¤ç§ç´¢å¼•å†…éƒ¨éƒ½æ˜¯B+æ ‘ï¼Œèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾ç€ä¸€æ•´è¡Œçš„æ•°æ®ã€‚</p>
<p>Innobdä¸­çš„ä¸»é”®ç´¢å¼•æ˜¯ä¸€ç§èšç°‡ç´¢å¼•ï¼Œéèšç°‡ç´¢å¼•éƒ½æ˜¯è¾…åŠ©ç´¢å¼•ï¼Œåƒå¤åˆç´¢å¼•ã€å‰ç¼€ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€‚</p>
<blockquote>
<p><span style="color:red">Innodbä½¿ç”¨çš„æ˜¯èšç°‡ç´¢å¼•ï¼ŒMyISamä½¿ç”¨çš„æ˜¯éèšç°‡ç´¢å¼•ã€‚</span><br>MyISAMç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•æ–‡ä»¶ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚</p>
<p>é—®ï¼šä¸»é”®ç´¢å¼•æ˜¯èšé›†ç´¢å¼•è¿˜æ˜¯éèšé›†ç´¢å¼•ï¼Ÿ<br>åœ¨Innodbä¸‹ä¸»é”®ç´¢å¼•æ˜¯èšé›†ç´¢å¼•ï¼Œåœ¨Myisamä¸‹ä¸»é”®ç´¢å¼•æ˜¯éèšé›†ç´¢å¼•</p>
</blockquote>
<p>Innodbé€šè¿‡ä¸»é”®èšé›†æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰ä¸»é”®ï¼Œinnodbä¼šé€‰æ‹©éç©ºçš„å”¯ä¸€ç´¢å¼•ä»£æ›¿ã€‚å¦‚æœæ²¡æœ‰è¿™æ ·çš„ç´¢å¼•ï¼Œinnodbä¼šéšå¼çš„å®šä¹‰ä¸€ä¸ªä¸»é”®æ¥ä½œä¸ºèšç°‡ç´¢å¼•ã€‚</p>
<p>èšç°‡ç´¢å¼•çš„ä¼˜ç¼ºç‚¹ </p>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>æ•°æ®è®¿é—®æ›´å¿«ï¼Œå› ä¸ºèšç°‡ç´¢å¼•å°†ç´¢å¼•å’Œæ•°æ®ä¿å­˜åœ¨åŒä¸€ä¸ªB+æ ‘ä¸­ï¼Œå› æ­¤ä»èšç°‡ç´¢å¼•ä¸­è·å–æ•°æ®æ¯”éèšç°‡ç´¢å¼•æ›´å¿«</li>
<li>èšç°‡ç´¢å¼•å¯¹äºä¸»é”®çš„æ’åºæŸ¥æ‰¾å’ŒèŒƒå›´æŸ¥æ‰¾é€Ÿåº¦éå¸¸å¿«</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>æ’å…¥é€Ÿåº¦ä¸¥é‡ä¾èµ–äºæ’å…¥é¡ºåºï¼ŒæŒ‰ç…§ä¸»é”®çš„<strong>é¡ºåºæ’å…¥</strong>æ˜¯æœ€å¿«çš„æ–¹å¼ï¼Œå¦åˆ™å°†ä¼šå‡ºç°é¡µåˆ†è£‚ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚å› æ­¤ï¼Œå¯¹äºInnoDBè¡¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šå®šä¹‰ä¸€ä¸ª<strong>è‡ªå¢çš„IDåˆ—ä¸ºä¸»é”®</strong></li>
<li><strong>æ›´æ–°ä¸»é”®çš„ä»£ä»·å¾ˆé«˜</strong>ï¼Œå› ä¸ºå°†ä¼šå¯¼è‡´è¢«æ›´æ–°çš„è¡Œç§»åŠ¨ã€‚å› æ­¤ï¼Œå¯¹äºInnoDBè¡¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬å®šä¹‰ä¸»é”®ä¸ºä¸å¯æ›´æ–°ã€‚</li>
<li>äºŒçº§ç´¢å¼•è®¿é—®éœ€è¦ä¸¤æ¬¡ç´¢å¼•æŸ¥æ‰¾ï¼Œç¬¬ä¸€æ¬¡æ‰¾åˆ°ä¸»é”®å€¼ï¼Œç¬¬äºŒæ¬¡æ ¹æ®ä¸»é”®å€¼æ‰¾åˆ°è¡Œæ•°æ®ã€‚</li>
</ol>
<h4 id="1-2-è¾…åŠ©ç´¢å¼•ï¼ˆä¹Ÿç§°éèšç°‡ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œéä¸»é”®ç´¢å¼•ï¼Œæ™®é€šç´¢å¼•ï¼Œsecondary-indexï¼‰"><a href="#1-2-è¾…åŠ©ç´¢å¼•ï¼ˆä¹Ÿç§°éèšç°‡ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œéä¸»é”®ç´¢å¼•ï¼Œæ™®é€šç´¢å¼•ï¼Œsecondary-indexï¼‰" class="headerlink" title="1.2 è¾…åŠ©ç´¢å¼•ï¼ˆä¹Ÿç§°éèšç°‡ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œéä¸»é”®ç´¢å¼•ï¼Œæ™®é€šç´¢å¼•ï¼Œsecondary indexï¼‰"></a><span style="color:red">1.2 è¾…åŠ©ç´¢å¼•ï¼ˆä¹Ÿç§°éèšç°‡ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼Œéä¸»é”®ç´¢å¼•ï¼Œæ™®é€šç´¢å¼•ï¼Œsecondary indexï¼‰</span></h4><blockquote>
<p>å‚è€ƒ <a href="https://www.cnblogs.com/jiawen010/p/11805241.html" target="_blank" rel="noopener">https://www.cnblogs.com/jiawen010/p/11805241.html</a></p>
</blockquote>
<p>åœ¨<strong>èšç°‡ç´¢å¼•ä¹‹ä¸Šåˆ›å»ºçš„ç´¢å¼•ç§°ä¹‹ä¸ºè¾…åŠ©ç´¢å¼•</strong>ï¼Œè¾…åŠ©ç´¢å¼•è®¿é—®æ•°æ®æ€»æ˜¯éœ€è¦äºŒæ¬¡æŸ¥æ‰¾ã€‚è¾…åŠ©ç´¢å¼•å¶å­èŠ‚ç‚¹å­˜å‚¨çš„ä¸å†æ˜¯è¡Œçš„ç‰©ç†ä½ç½®ï¼Œè€Œæ˜¯ä¸»é”®å€¼ã€‚é€šè¿‡è¾…åŠ©ç´¢å¼•é¦–å…ˆæ‰¾åˆ°çš„æ˜¯ä¸»é”®å€¼ï¼Œå†é€šè¿‡ä¸»é”®å€¼æ‰¾åˆ°æ•°æ®è¡Œçš„æ•°æ®é¡µï¼Œå†é€šè¿‡æ•°æ®é¡µä¸­çš„Page Directoryæ‰¾åˆ°æ•°æ®è¡Œã€‚</p>
<p>Innodbè¾…åŠ©ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å¹¶<strong>ä¸åŒ…å«è¡Œè®°å½•çš„å…¨éƒ¨æ•°æ®</strong>ï¼Œå¶å­èŠ‚ç‚¹é™¤äº†åŒ…å«é”®å€¼å¤–ï¼Œè¿˜åŒ…å«äº†ç›¸åº”è¡Œæ•°æ®çš„èšç°‡ç´¢å¼•é”®ã€‚ï¼ˆè§ä¸Šå›¾å›¾4ï¼‰</p>
<p>è¾…åŠ©ç´¢å¼•çš„å­˜åœ¨ä¸å½±å“æ•°æ®åœ¨èšç°‡ç´¢å¼•ä¸­çš„ç»„ç»‡ï¼Œæ‰€ä»¥ä¸€å¼ è¡¨å¯ä»¥æœ‰å¤šä¸ªè¾…åŠ©ç´¢å¼•ã€‚åœ¨innodbä¸­æœ‰æ—¶ä¹Ÿç§°è¾…åŠ©ç´¢å¼•ä¸ºäºŒçº§ç´¢å¼•ã€‚</p>
<p>è¾…åŠ©ç´¢å¼•ä¼šåŒ…å«ä¸»é”®åˆ—ï¼Œæ‰€ä»¥ï¼Œ<strong>å¦‚æœä¸»é”®å®šä¹‰çš„æ¯”è¾ƒå¤§ï¼Œå…¶ä»–ç´¢å¼•ä¹Ÿå°†å¾ˆå¤§</strong>ã€‚å¦‚æœæƒ³åœ¨è¡¨ä¸Šå®šä¹‰ ã€å¾ˆå¤šç´¢å¼•ï¼Œåˆ™äº‰å–å°½é‡æŠŠä¸»é”®å®šä¹‰å¾—å°ä¸€äº›ã€‚InnoDB ä¸ä¼šå‹ç¼©ç´¢å¼•ã€‚</p>
<blockquote>
<p>In <code>InnoDB</code> tables, keep the <code>PRIMARY KEY</code> short to minimize storage overhead for secondary indexes. Each secondary index entry contains a copy of the primary key columns for the corresponding row. (See <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-index-types.html" target="_blank" rel="noopener">Section 14.6.2.1, â€œClustered and Secondary Indexesâ€</a>.)</p>
<p>(æ¥è‡ª <a href="https://dev.mysql.com/doc/refman/5.6/en/create-table.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.6/en/create-table.html</a>)</p>
</blockquote>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605671203873.png" alt="1605671203873"></p>
<h4 id="1-3-å°ç»“"><a href="#1-3-å°ç»“" class="headerlink" title="1.3 å°ç»“"></a>1.3 å°ç»“</h4><blockquote>
<p>å‚è€ƒ <a href="https://www.cnblogs.com/jiawen010/p/11805241.html" target="_blank" rel="noopener">https://www.cnblogs.com/jiawen010/p/11805241.html</a></p>
</blockquote>
<ul>
<li>ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿‡é•¿çš„å­—æ®µä½œä¸ºä¸»é”®ï¼Œå› ä¸ºæ‰€æœ‰è¾…åŠ©ç´¢å¼•éƒ½å¼•ç”¨ä¸»ç´¢å¼•ï¼Œè¿‡é•¿çš„ä¸»ç´¢å¼•ä¼šä»¤è¾…åŠ©ç´¢å¼•å˜å¾—è¿‡å¤§ã€‚</li>
<li>ç”¨éå•è°ƒçš„å­—æ®µä½œä¸ºä¸»é”®åœ¨InnoDBä¸­ä¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºInnoDBæ•°æ®æ–‡ä»¶æœ¬èº«æ˜¯ä¸€é¢—B+Treeï¼Œéå•è°ƒçš„ä¸»é”®ä¼šé€ æˆåœ¨æ’å…¥æ–°è®°å½•æ—¶æ•°æ®æ–‡ä»¶ä¸ºäº†ç»´æŒB+Treeçš„ç‰¹æ€§è€Œé¢‘ç¹çš„åˆ†è£‚è°ƒæ•´ï¼Œååˆ†ä½æ•ˆï¼Œè€Œä½¿ç”¨è‡ªå¢å­—æ®µä½œä¸ºä¸»é”®åˆ™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</li>
</ul>
<p>èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«ï¼š</p>
<ul>
<li>èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯ä¸»é”®å€¼å’Œæ•°æ®è¡Œï¼Œ<strong>æ”¯æŒè¦†ç›–ç´¢å¼•</strong>ï¼›äºŒçº§ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯ä¸»é”®å€¼æˆ–æŒ‡å‘æ•°æ®è¡Œçš„æŒ‡é’ˆã€‚</li>
<li>ç”±äºèŠ‚å­èŠ‚ç‚¹(æ•°æ®é¡µ)åªèƒ½æŒ‰ç…§ä¸€é¢—B+æ ‘æ’åºï¼Œæ•…<strong>ä¸€å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•</strong>ã€‚è¾…åŠ©ç´¢å¼•çš„å­˜åœ¨ä¸å½±å“èšç°‡ç´¢å¼•ä¸­æ•°æ®çš„ç»„ç»‡ï¼Œæ‰€ä»¥ä¸€å¼ è¡¨å¯ä»¥æœ‰å¤šä¸ªè¾…åŠ©ç´¢å¼•</li>
</ul>
<p>æ³¨ï¼š <strong><span id="jump_covering_index">è¦†ç›–ç´¢å¼•ï¼ˆcovering indexï¼‰</span></strong>æŒ‡ä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œåªç”¨ä»ç´¢å¼•ä¸­å°±èƒ½å¤Ÿå–å¾—ï¼Œä¸å¿…ä»æ•°æ®è¡¨ä¸­è¯»å–ã€‚ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå®ç°äº†ç´¢å¼•è¦†ç›–ã€‚ å½“ä¸€æ¡æŸ¥è¯¢è¯­å¥ç¬¦åˆè¦†ç›–ç´¢å¼•æ¡ä»¶æ—¶ï¼ŒMySQLåªéœ€è¦é€šè¿‡ç´¢å¼•å°±å¯ä»¥è¿”å›æŸ¥è¯¢æ‰€éœ€è¦çš„æ•°æ®ï¼Œè¿™æ ·é¿å…äº†æŸ¥åˆ°ç´¢å¼•åå†è¿”å›è¡¨æ“ä½œï¼Œå‡å°‘I/Oæé«˜æ•ˆç‡ã€‚ å¦‚ï¼Œè¡¨covering_index_sampleä¸­æœ‰ä¸€ä¸ªæ™®é€šç´¢å¼• idx_key1_key2(key1,key2)ã€‚å½“æˆ‘ä»¬é€šè¿‡SQLè¯­å¥ï¼šselect key2 from covering_index_sample where key1 = â€˜keytestâ€™;çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡è¦†ç›–ç´¢å¼•æŸ¥è¯¢ï¼Œæ— éœ€å›è¡¨ã€‚ï¼ˆå…³äºè¦†ç›–ç´¢å¼•æ›´è¯¦ç»†å†…å®¹è§<a href="#jump4">ç¬¬å››éƒ¨åˆ†ï¼šè¦†ç›–ç´¢å¼•</a>ï¼‰</p>
<h3 id="2-ç´¢å¼•ç»´æŠ¤"><a href="#2-ç´¢å¼•ç»´æŠ¤" class="headerlink" title="2. ç´¢å¼•ç»´æŠ¤"></a>2. ç´¢å¼•ç»´æŠ¤</h3><p>B+ æ ‘ä¸ºäº†ç»´æŠ¤ç´¢å¼•æœ‰åºæ€§ï¼Œåœ¨æ’å…¥æ–°å€¼çš„æ—¶å€™éœ€è¦åšå¿…è¦çš„ç»´æŠ¤ã€‚ä»¥ä¸Šé¢è¿™ä¸ªå›¾ä¸ºä¾‹ï¼Œå¦‚æœæ’å…¥æ–°çš„è¡Œ ID å€¼ä¸º 700ï¼Œåˆ™åªéœ€è¦åœ¨ R5 çš„è®°å½•åé¢æ’å…¥ä¸€ä¸ªæ–°è®°å½•ã€‚å¦‚æœæ–°æ’å…¥çš„ ID å€¼ä¸º 400ï¼Œå°±ç›¸å¯¹éº»çƒ¦äº†ï¼Œéœ€è¦é€»è¾‘ä¸ŠæŒªåŠ¨åé¢çš„æ•°æ®ï¼Œç©ºå‡ºä½ç½®ã€‚</p>
<p>è€Œæ›´ç³Ÿçš„æƒ…å†µæ˜¯ï¼Œå¦‚æœ R5 æ‰€åœ¨çš„æ•°æ®é¡µå·²ç»æ»¡äº†ï¼Œæ ¹æ® B+ æ ‘çš„ç®—æ³•ï¼Œè¿™æ—¶å€™éœ€è¦ç”³è¯·ä¸€ä¸ªæ–°çš„æ•°æ®é¡µï¼Œç„¶åæŒªåŠ¨éƒ¨åˆ†æ•°æ®è¿‡å»ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>é¡µåˆ†è£‚</strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ€§èƒ½è‡ªç„¶ä¼šå—å½±å“ã€‚</p>
<p>é™¤äº†æ€§èƒ½å¤–ï¼Œé¡µåˆ†è£‚æ“ä½œè¿˜å½±å“æ•°æ®é¡µçš„åˆ©ç”¨ç‡ã€‚åŸæœ¬æ”¾åœ¨ä¸€ä¸ªé¡µçš„æ•°æ®ï¼Œç°åœ¨åˆ†åˆ°ä¸¤ä¸ªé¡µä¸­ï¼Œæ•´ä½“ç©ºé—´åˆ©ç”¨ç‡é™ä½å¤§çº¦ 50%ã€‚</p>
<p>å½“ç„¶æœ‰åˆ†è£‚å°±æœ‰åˆå¹¶ã€‚å½“ç›¸é‚»ä¸¤ä¸ªé¡µç”±äºåˆ é™¤äº†æ•°æ®ï¼Œåˆ©ç”¨ç‡å¾ˆä½ä¹‹åï¼Œä¼šå°†æ•°æ®é¡µåšåˆå¹¶ã€‚åˆå¹¶çš„è¿‡ç¨‹ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯åˆ†è£‚è¿‡ç¨‹çš„é€†è¿‡ç¨‹ã€‚</p>
<p>åŸºäºä¸Šé¢çš„ç´¢å¼•ç»´æŠ¤è¿‡ç¨‹è¯´æ˜ï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸ªæ¡ˆä¾‹ï¼š</p>
<h3 id="3-å…³äºè‡ªå¢ä¸»é”®"><a href="#3-å…³äºè‡ªå¢ä¸»é”®" class="headerlink" title="3. å…³äºè‡ªå¢ä¸»é”®"></a>3. å…³äºè‡ªå¢ä¸»é”®</h3><p>ä½ å¯èƒ½åœ¨ä¸€äº›å»ºè¡¨è§„èŒƒé‡Œé¢è§åˆ°è¿‡ç±»ä¼¼çš„æè¿°ï¼Œè¦æ±‚å»ºè¡¨è¯­å¸é‡Œä¸€å®šè¦æœ‰è‡ªå¢ä¸»é”®ã€‚å½“ç„¶äº‹æ— ç»å¯¹ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å“ªäº›åœºæ™¯ä¸‹åº”è¯¥ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œè€Œå“ªäº›åœºæ™¯ä¸‹ä¸åº”è¯¥ã€‚</p>
<p>è‡ªå¢ä¸»é”®æ˜¯æŒ‡è‡ªå¢åˆ—ä¸Šå®šä¹‰çš„ä¸»é”®ï¼Œåœ¨å»ºè¡¨æµ¯å¥ä¸­ä¸€èˆ¬æ˜¯è¿™ä¹ˆå®šä¹‰çš„ï¼š<code>NOT NULL PRIMARY KEY AUTO INCREMENT</code>ã€‚</p>
<p>æ’å…¥æ–°è®°å½•çš„æ—¶å€™å¯ä»¥ä¸æŒ‡å®šIDçš„å€¼ï¼Œç³»ç»Ÿä¼šè·å–å½“å‰IDæœ€å¤§å€¼åŠ 1ä½œä¸ºä¸‹ä¸€æ¡è®°å½•çš„IDå€¼ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè‡ªå¢ä¸»é”®çš„æ’å…¥æ•°æ®æ¨¡å¼ï¼Œæ­£ç¬¦åˆäº†æˆ‘ä»¬å‰é¢æåˆ°çš„é€’å¢æ’å…¥çš„åœºæ™¯ã€‚æ¯æ¬¡æ’å…¥ä¸€æ¡æ–°è®°å½•ï¼Œéƒ½æ˜¯è¿½åŠ æ“ä½œï¼Œéƒ½ä¸æ¶‰åŠåˆ°æŒªåŠ¨å…¶ä»–è®°å½•ï¼Œä¹Ÿä¸ä¼šè§¦å‘å¶å­èŠ‚ç‚¹çš„åˆ†è£‚ã€‚</p>
<p>è€Œç”¨ä¸šåŠ¡é€»è¾‘çš„å­—æ®µåšä¸»é”®ï¼Œåˆ™å¾€å¾€ä¸å®¹æ˜“ä¿è¯æœ‰åºæ’å…¥ï¼Œè¿™æ ·å†™æ•°æ®æˆæœ¬ç›¸å¯¹è¾ƒé«˜ã€‚</p>
<p>é™¤äº†è€ƒè™‘æ€§èƒ½å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä»å­˜å‚¨ç©ºé—´çš„è§’åº¦æ¥çœ‹ã€‚å‡è®¾ä½ çš„è¡¨ä¸­ç¡®å®æœ‰ä¸€ä¸ªå”¯ä¸€å­—æ®µï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ç±»å‹çš„èº«ä»½è¯å·ï¼Œé‚£åº”è¯¥èº«ä»½è¯å·åšä¸»é”®ï¼Œè¿˜æ˜¯ç”¨è‡ªå¢å­—æ®µåšä¸»é”®å‘¢ï¼Ÿ</p>
<p>ç”±äºæ¯ä¸ªéä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸Šéƒ½æ˜¯ä¸»é”®çš„å€¼ã€‚å¦‚æœèº«ä»½è¯å·åšä¸»é”®ï¼Œé‚£ä¹ˆæ¯ä¸ªäºŒçº§ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å ç”¨çº¦20ä¸ªå­—èŠ‚ï¼Œè€Œå¦‚æœç”¨æ•´å‹åšä¸»é”®ï¼Œåˆ™åªè¦4ä¸ªå­—èŠ‚ï¼Œå¦‚æœæ˜¯é•¿æ•´å‹(bigint)åˆ™æ˜¯8ä¸ªå­—èŠ‚ã€‚</p>
<p>æ˜¾ç„¶ï¼Œä¸»é”®é•¿åº¦è¶Šå°ï¼Œæ™®é€šç´¢å¼•çš„å¶å­èŠ‚ç‚¹å°±è¶Šå°ï¼Œæ™®é€šç´¢å¼•å ç”¨çš„ç©ºé—´ä¹Ÿå°±è¶Šå°ã€‚</p>
<p>æ‰€ä»¥ï¼Œä»æ€§èƒ½å’Œå­˜å‚¨ç©ºé—´æ–¹é¢è€ƒé‡ï¼Œè‡ªå¢ä¸»é”®å¾€å¾€æ˜¯æ›´åˆç†çš„é€‰æ‹©ã€‚</p>
<p>æœ‰æ²¡æœ‰ä»€ä¹ˆåœºæ™¯é€‚åˆç”¨ä¸šåŠ¡å­—æ®µç›´æ¥åšä¸»é”®çš„å‘¢ï¼Ÿè¿˜æ˜¯æœ‰çš„ã€‚æ¯”å¦‚ï¼Œæœ‰äº›ä¸šåŠ¡çš„åœºæ™¯éœ€æ±‚æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>åªæœ‰ä¸€ä¸ªç´¢å¼•ï¼›</li>
<li>è¯¥ç´¢å¼•å¿…é¡»æ˜¯å”¯ä¸€ç´¢å¼•ã€‚</li>
</ol>
<p>è¿™å°±æ˜¯å…¸å‹çš„KV(key-value)åœºæ™¯ï¼Œç”±äºæ²¡æœ‰å…¶ä»–ç´¢å¼•ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸ç”¨è€ƒè™‘å…¶ä»–ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å¤§å°çš„é—®é¢˜ã€‚<br>è¿™æ—¶å€™æˆ‘ä»¬å°±è¦ä¼˜å…ˆè€ƒè™‘ä¸Šä¸€æ®µæåˆ°çš„â€å°½é‡ä½¿ç”¨ä¸»é”®æŸ¥è¯¢â€åŸåˆ™ï¼Œç›´æ¥å°†è¿™ä¸ªç´¢å¼•è®¾ç½®ä¸ºä¸»é”®ï¼Œå¯ä»¥é¿å…æ¯æ¬¡æŸ¥è¯¢éœ€è¦æœç´¢ä¸¤æ£µæ ‘ã€‚</p>
<h3 id="4-å°ç»“"><a href="#4-å°ç»“" class="headerlink" title="4. å°ç»“"></a>4. å°ç»“</h3><p>B+ æ ‘èƒ½å¤Ÿå¾ˆå¥½åœ°é…åˆç£ç›˜çš„è¯»å†™ç‰¹æ€§ï¼Œå‡å°‘å•æ¬¡æŸ¥è¯¢çš„ç£ç›˜è®¿é—®æ¬¡æ•°ã€‚</p>
<p>ç”±äº InnoDB æ˜¯ç´¢å¼•ç»„ç»‡è¡¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å»ºè®®åˆ›å»ºä¸€ä¸ªè‡ªå¢ä¸»é”®ï¼Œè¿™æ ·éä¸»é”®ç´¢å¼•å ç”¨çš„ç©ºé—´æœ€å°ã€‚</p>
<p>é—®é¢˜ï¼šå¯¹äºä¸Šé¢ä¾‹å­ä¸­çš„ InnoDB è¡¨ Tï¼Œå¦‚æœä½ è¦é‡å»ºç´¢å¼• kï¼Œä½ çš„ä¸¤ä¸ª SQL è¯­å¥å¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> T <span class="keyword">drop</span> <span class="keyword">index</span> k;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> T <span class="keyword">add</span> <span class="keyword">index</span>(k);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ è¦é‡å»ºä¸»é”®ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> T <span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> T <span class="keyword">add</span> primary <span class="keyword">key</span>(<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>
<h4 id="é—®ï¼šå¯¹äºä¸Šé¢è¿™ä¸¤ä¸ªé‡å»ºç´¢å¼•çš„åšæ³•ï¼Œæœ‰æ²¡æœ‰ä¸åˆé€‚çš„ï¼Ÿ"><a href="#é—®ï¼šå¯¹äºä¸Šé¢è¿™ä¸¤ä¸ªé‡å»ºç´¢å¼•çš„åšæ³•ï¼Œæœ‰æ²¡æœ‰ä¸åˆé€‚çš„ï¼Ÿ" class="headerlink" title="é—®ï¼šå¯¹äºä¸Šé¢è¿™ä¸¤ä¸ªé‡å»ºç´¢å¼•çš„åšæ³•ï¼Œæœ‰æ²¡æœ‰ä¸åˆé€‚çš„ï¼Ÿ"></a>é—®ï¼šå¯¹äºä¸Šé¢è¿™ä¸¤ä¸ªé‡å»ºç´¢å¼•çš„åšæ³•ï¼Œæœ‰æ²¡æœ‰ä¸åˆé€‚çš„ï¼Ÿ</h4><blockquote>
<p>æ³¨ï¼šä¸ºä»€ä¹ˆè¦é‡å»ºç´¢å¼•ï¼Ÿ<br>å‰é¢æåˆ°ï¼Œç´¢å¼•å¯èƒ½å› ä¸ºåˆ é™¤ï¼Œæˆ–è€…é¡µåˆ†è£‚ç­‰åŸå› ï¼Œå¯¼è‡´æ•°æ®é¡µæœ‰ç©ºæ´ï¼Œé‡å»ºç´¢å¼•çš„è¿‡ç¨‹ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç´¢å¼•ï¼ŒæŠŠæ•°æ®æŒ‰é¡ºåºæ’å…¥ï¼Œè¿™æ ·é¡µé¢çš„åˆ©ç”¨ç‡æœ€é«˜ï¼Œä¹Ÿå°±æ˜¯ç´¢å¼•æ›´ç´§å‡‘ã€æ›´çœç©ºé—´ã€‚</p>
</blockquote>
<p>ç­”æ¡ˆï¼šé‡å»ºç´¢å¼• k çš„åšæ³•æ˜¯åˆç†çš„ï¼Œå¯ä»¥è¾¾åˆ°çœç©ºé—´çš„ç›®çš„ã€‚ä½†æ˜¯ï¼Œé‡å»ºä¸»é”®çš„è¿‡ç¨‹ä¸åˆç†ã€‚<br>1.ç›´æ¥åˆ æ‰ä¸»é”®ç´¢å¼•ï¼Œä¼šä½¿å¾—æ‰€æœ‰äºŒçº§ç´¢å¼•éƒ½å¤±æ•ˆï¼Œå¹¶ä¸”ä¼šç”¨ROWIDæ¥åšä¸»é”®ç´¢å¼•ã€‚<br>2.ä¸è®ºæ˜¯åˆ é™¤ä¸»é”®è¿˜æ˜¯åˆ›å»ºä¸»é”®ï¼Œéƒ½ä¼šå°†æ•´ä¸ªè¡¨é‡å»ºã€‚æ‰€ä»¥è¿ç€æ‰§è¡Œè¿™ä¸¤ä¸ªè¯­å¥çš„è¯ï¼Œç¬¬ä¸€ä¸ªè¯­å¥å°±ç™½åšäº†ã€‚è¿™ä¸¤ä¸ªè¯­å¥ï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªè¯­å¥ä»£æ›¿ ï¼š<code>alter table T engine=InnoDB</code>ã€‚ğŸ‘ˆåŸåœ°é‡å»ºè¡¨ç»“æ„</p>
<h2 id="ç¬¬å››éƒ¨åˆ†ï¼šè¦†ç›–ç´¢å¼•"><a href="#ç¬¬å››éƒ¨åˆ†ï¼šè¦†ç›–ç´¢å¼•" class="headerlink" title="ç¬¬å››éƒ¨åˆ†ï¼šè¦†ç›–ç´¢å¼•"></a><span id="jump4">ç¬¬å››éƒ¨åˆ†ï¼šè¦†ç›–ç´¢å¼•</span></h2><blockquote>
<p>å‚è€ƒ <a href="https://time.geekbang.org/column/article/69636" target="_blank" rel="noopener">https://time.geekbang.org/column/article/69636</a></p>
</blockquote>
<p>åœ¨ä¸‹é¢è¿™ä¸ªè¡¨Tä¸­ï¼Œå¦‚æœæ‰§è¡Œ <code>select * from T where k between 3 and 5</code>ï¼Œéœ€è¦æ‰§è¡Œå‡ æ¬¡æ ‘çš„æœç´¢æ“ä½œï¼Œä¼šæ‰«æå¤šå°‘è¡Œï¼Ÿ<br>è¡¨çš„åˆå§‹åŒ–è¯­å¥ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> T (</span><br><span class="line">    <span class="keyword">ID</span> <span class="built_in">int</span> primary <span class="keyword">key</span>,</span><br><span class="line">    k <span class="built_in">int</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">    s <span class="built_in">varchar</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">    <span class="keyword">index</span> k(k)</span><br><span class="line">) <span class="keyword">engine</span>=<span class="keyword">InnoDB</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> T <span class="keyword">values</span>(<span class="number">100</span>,<span class="number">1</span>,<span class="string">'aa'</span>),(<span class="number">200</span>,<span class="number">2</span>,<span class="string">'bb'</span>),(<span class="number">300</span>,<span class="number">3</span>,<span class="string">'cc'</span>),(<span class="number">500</span>,<span class="number">5</span>,<span class="string">'cc'</span>),(<span class="number">600</span>,<span class="number">6</span>,<span class="string">'ff'</span>),(<span class="number">700</span>,<span class="number">7</span>,<span class="string">'gg'</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605443844487.png" alt="1605443844487"></p>
<p>è¿™æ¡SQLæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œæµç¨‹ï¼š</p>
<ol>
<li>åœ¨kç´¢å¼•æ ‘ä¸Šæ‰¾åˆ° k=3 çš„è®°å½•ï¼Œå–å¾— ID=300;</li>
<li>å†åˆ° ID ç´¢å¼•æ ‘æŸ¥åˆ° ID=300 å¯¹åº”çš„ R3ï¼›</li>
<li>åœ¨ k ç´¢å¼•æ ‘å–ä¸‹ä¸€ä¸ªå€¼ k=5ï¼Œå–å¾— ID=500ï¼›</li>
<li>å†å›åˆ° ID ç´¢å¼•æ ‘æŸ¥åˆ° ID=500å¯¹åº”çš„R4ï¼›</li>
<li>åœ¨ k ç´¢å¼•æ ‘å–ä¸‹ä¸€ä¸ªå€¼ k=6ï¼Œä¸æ»¡è¶³æ¡ä»¶ï¼Œå¾ªç¯ç»“æŸã€‚</li>
</ol>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>å›åˆ°ä¸»é”®ç´¢å¼•æ ‘æœç´¢çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¸ºå›è¡¨</strong>ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæŸ¥è¯¢è¿‡ç¨‹è¯»äº† k ç´¢å¼•æ ‘çš„ 3 æ¡è®°å½•ï¼ˆæ­¥éª¤ 1ã€3 å’Œ 5ï¼‰ï¼Œå›è¡¨äº†ä¸¤æ¬¡ï¼ˆæ­¥éª¤ 2 å’Œ 4ï¼‰ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äºæŸ¥è¯¢ç»“æœæ‰€éœ€è¦çš„æ•°æ®åªåœ¨ä¸»é”®ç´¢å¼•ä¸Šæœ‰ï¼Œæ‰€ä»¥ä¸å¾—ä¸å›è¡¨ã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰å¯èƒ½ç»è¿‡ç´¢å¼•ä¼˜åŒ–ï¼Œé¿å…å›è¡¨è¿‡ç¨‹å‘¢ï¼Ÿ</p>
<p>å¦‚æœæ‰§è¡Œçš„è¯­å¥æ˜¯ select ID from T where k between 3 and 5ï¼Œè¿™æ—¶åªéœ€è¦æŸ¥ ID çš„å€¼ï¼Œè€Œ ID çš„å€¼å·²ç»åœ¨ k ç´¢å¼•æ ‘ä¸Šäº†ï¼Œå› æ­¤å¯ä»¥ç›´æ¥æä¾›æŸ¥è¯¢ç»“æœï¼Œä¸éœ€è¦å›è¡¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿™ä¸ªæŸ¥è¯¢é‡Œé¢ï¼Œç´¢å¼• k å·²ç»â€œè¦†ç›–äº†â€æˆ‘ä»¬çš„æŸ¥è¯¢éœ€æ±‚ï¼Œæˆ‘ä»¬ç§°ä¸º<strong>è¦†ç›–ç´¢å¼•</strong>ã€‚</p>
<p><strong>ç”±äºè¦†ç›–ç´¢å¼•å¯ä»¥å‡å°‘æ ‘çš„æœç´¢æ¬¡æ•°ï¼Œæ˜¾è‘—æå‡æŸ¥è¯¢æ€§èƒ½ï¼Œæ‰€ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µã€‚</strong></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¼•æ“å†…éƒ¨ä½¿ç”¨è¦†ç›–ç´¢å¼•åœ¨ç´¢å¼•kä¸Šå…¶å®è¯»äº†ä¸‰ä¸ªè®°å½•ï¼ŒR3~R5ï¼ˆå¯¹åº”çš„ç´¢å¼•kä¸Šçš„è®°å½•é¡¹ï¼‰ï¼Œä½†æ˜¯å¯¹äºMySQLçš„ Server å±‚æ¥è¯´ï¼Œå®ƒå°±æ˜¯æ‰¾å¼•æ“æ‹¿åˆ°äº†ä¸¤æ¡è®°å½•ï¼Œå› æ­¤ MySQL è®¤ä¸ºæ‰«æè¡Œæ•°æ˜¯2ã€‚</p>
<p>åŸºäºä¸Šé¢è¦†ç›–ç´¢å¼•çš„è¯´æ˜ï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸ªé—®é¢˜ï¼šåœ¨ä¸€ä¸ªå¸‚æ°‘ä¿¡æ¯è¡¨ï¼Œæ˜¯å¦æœ‰å¿…è¦å°†èº«ä»½è¯å·å’Œåå­—å»ºç«‹è”åˆç´¢å¼•ï¼Ÿ</p>
<p>å‡è®¾è¿™ä¸ªå¸‚æ°‘è¡¨çš„å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`tuser`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`id_card`</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`age`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`ismale`</span> <span class="built_in">tinyint</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`id_card`</span> (<span class="string">`id_card`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`name_age`</span> (<span class="string">`name`</span>,<span class="string">`age`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œèº«ä»½è¯å·æ˜¯å¸‚æ°‘çš„å”¯ä¸€æ ‡è¯†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæœ‰æ ¹æ®èº«ä»½è¯å·æŸ¥è¯¢å¸‚æ°‘ä¿¡æ¯çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åªè¦åœ¨èº«ä»½è¯å·å­—æ®µä¸Šå»ºç«‹ç´¢å¼•å°±å¤Ÿäº†ã€‚è€Œå†å»ºç«‹ä¸€ä¸ªï¼ˆèº«ä»½è¯å·ã€å§“åï¼‰çš„è”åˆç´¢å¼•ï¼Œæ˜¯ä¸æ˜¯æµªè´¹ç©ºé—´ï¼Ÿ</p>
<p>å¦‚æœç°åœ¨æœ‰ä¸€ä¸ªé«˜é¢‘è¯·æ±‚ï¼Œè¦æ ¹æ®å¸‚æ°‘çš„èº«ä»½è¯å·æŸ¥è¯¢ä»–çš„å§“åï¼Œè¿™ä¸ªè”åˆç´¢å¼•å°±æœ‰æ„ä¹‰äº†ã€‚å®ƒå¯ä»¥åœ¨è¿™ä¸ªé«˜é¢‘è¯·æ±‚ä¸Šç”¨åˆ°è¦†ç›–ç´¢å¼•ï¼Œä¸å†éœ€è¦å›è¡¨æŸ¥æ•´è¡Œè®°å½•ï¼Œå‡å°‘è¯­å¥çš„æ‰§è¡Œæ—¶é—´ã€‚</p>
<p>å½“ç„¶ï¼Œç´¢å¼•å­—æ®µçš„ç»´æŠ¤æ€»æ˜¯æœ‰ä»£ä»·çš„ã€‚å› æ­¤ï¼Œåœ¨å»ºç«‹å†—ä½™ç´¢å¼•æ¥æ”¯æŒè¦†ç›–ç´¢å¼•æ—¶å°±éœ€è¦æƒè¡¡è€ƒè™‘äº†ã€‚è¿™æ­£æ˜¯ä¸šåŠ¡ DBAï¼Œæˆ–è€…ç§°ä¸ºä¸šåŠ¡æ•°æ®æ¶æ„å¸ˆçš„å·¥ä½œã€‚</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605236364285.png" alt="1605236364285"></p>
<h2 id="ç¬¬äº”éƒ¨åˆ†ï¼šæœ€å·¦å‰ç¼€åŸåˆ™"><a href="#ç¬¬äº”éƒ¨åˆ†ï¼šæœ€å·¦å‰ç¼€åŸåˆ™" class="headerlink" title="ç¬¬äº”éƒ¨åˆ†ï¼šæœ€å·¦å‰ç¼€åŸåˆ™"></a>ç¬¬äº”éƒ¨åˆ†ï¼šæœ€å·¦å‰ç¼€åŸåˆ™</h2><blockquote>
<p>å‚è€ƒ <a href="https://time.geekbang.org/column/article/69636" target="_blank" rel="noopener">https://time.geekbang.org/column/article/69636</a></p>
</blockquote>
<p>å¦‚æœä¸ºæ¯ä¸€ç§æŸ¥è¯¢éƒ½è®¾è®¡ä¸€ä¸ªç´¢å¼•ï¼Œç´¢å¼•æ˜¯ä¸æ˜¯å¤ªå¤šäº†ã€‚å¦‚æœç°åœ¨è¦æŒ‰ç…§å¸‚æ°‘çš„èº«ä»½è¯å·å–æŸ¥ä»–çš„å®¶åº­åœ°å€å‘¢ï¼Ÿè™½ç„¶è¿™ä¸ªæŸ¥è¯¢éœ€æ±‚åœ¨ä¸šåŠ¡ä¸­å‡ºç°çš„æ¦‚ç‡ä¸é«˜ï¼Œä½†æ€»ä¸èƒ½è®©å®ƒèµ°å…¨è¡¨æ‰«æå§ï¼Ÿåè¿‡æ¥è¯´ï¼Œå•ç‹¬ä¸ºä¸€ä¸ªä¸é¢‘ç¹çš„è¯·æ±‚åˆ›å»ºä¸€ä¸ªï¼ˆèº«ä»½è¯å·ï¼Œåœ°å€ï¼‰çš„ç´¢å¼•åˆæ„Ÿè§‰æœ‰ç‚¹æµªè´¹ã€‚åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<h3 id="1-æœ€å·¦å‰ç¼€"><a href="#1-æœ€å·¦å‰ç¼€" class="headerlink" title="1. æœ€å·¦å‰ç¼€"></a><span id="jump_leftmost_prefix">1. æœ€å·¦å‰ç¼€</span></h3><p><strong>B+æ ‘è¿™ç§ç´¢å¼•ç»“æ„ï¼Œå¯ä»¥åˆ©ç”¨ç´¢å¼•çš„â€æœ€å·¦å‰ç¼€â€œï¼Œæ¥å®šä½è®°å½•ã€‚</strong></p>
<p>ç”¨ï¼ˆname, ageï¼‰è¿™ä¸ªè”åˆç´¢å¼•æ¥åˆ†æï¼š</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605450882634.png" alt="1605450882634"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<strong>ç´¢å¼•é¡¹æ˜¯æŒ‰ç…§ç´¢å¼•å®šä¹‰é‡Œé¢å‡ºç°çš„å­—æ®µé¡ºåºæ’åºçš„ã€‚â†’</strong> å³å…ˆæŒ‰nameæ’åºï¼Œå†æŒ‰ageæ’åº</p>
<p>å½“ä½ çš„é€»è¾‘éœ€æ±‚æ˜¯æŸ¥åˆ°æ‰€æœ‰åå­—æ˜¯â€œå¼ ä¸‰â€çš„äººæ—¶ï¼Œå¯ä»¥å¿«é€Ÿå®šä½åˆ° ID4ï¼Œç„¶åå‘åéå†å¾—åˆ°æ‰€æœ‰éœ€è¦çš„ç»“æœã€‚</p>
<p>å¦‚æœä½ è¦æŸ¥çš„æ˜¯æ‰€æœ‰åå­—ç¬¬ä¸€ä¸ªå­—æ˜¯â€œå¼ â€çš„äººï¼Œä½ çš„ SQL è¯­å¥çš„æ¡ä»¶æ˜¯<code>where name like â€˜å¼  %â€™</code>ã€‚è¿™æ—¶ï¼Œä½ ä¹Ÿèƒ½å¤Ÿç”¨ä¸Šè¿™ä¸ªç´¢å¼•ï¼ŒæŸ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„è®°å½•æ˜¯ ID3ï¼Œç„¶åå‘åéå†ï¼Œç›´åˆ°ä¸æ»¡è¶³æ¡ä»¶ä¸ºæ­¢ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<span style="color:blue">ä¸åªæ˜¯ç´¢å¼•çš„å…¨éƒ¨å®šä¹‰ï¼Œåªè¦æ»¡è¶³æœ€å·¦å‰ç¼€ï¼Œå°±å¯ä»¥åˆ©ç”¨ç´¢å¼•æ¥åŠ é€Ÿæ£€ç´¢ã€‚è¿™ä¸ªæœ€å·¦å‰ç¼€å¯ä»¥æ˜¯è”åˆç´¢å¼•çš„æœ€å·¦ N ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ç´¢å¼•çš„æœ€å·¦ M ä¸ªå­—ç¬¦ã€‚</span></p>
<p>åŸºäºä¸Šé¢å¯¹æœ€å·¦å‰ç¼€ç´¢å¼•çš„è¯´æ˜ï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸ªé—®é¢˜ï¼š<strong>åœ¨å»ºç«‹è”åˆç´¢å¼•çš„æ—¶å€™ï¼Œå¦‚ä½•å®‰æ’ç´¢å¼•å†…çš„å­—æ®µé¡ºåºã€‚</strong></p>
<p>è¿™é‡Œæˆ‘ä»¬çš„è¯„ä¼°æ ‡å‡†æ˜¯ï¼Œ<span style="color:blue">ç´¢å¼•çš„å¤ç”¨èƒ½åŠ›</span>ã€‚<strong><span style="color:orange">å› ä¸ºå¯ä»¥æ”¯æŒæœ€å·¦å‰ç¼€ï¼Œæ‰€ä»¥å½“å·²ç»æœ‰äº† (a,b) è¿™ä¸ªè”åˆç´¢å¼•åï¼Œä¸€èˆ¬å°±ä¸éœ€è¦å•ç‹¬åœ¨ a ä¸Šå»ºç«‹ç´¢å¼•äº†</span></strong>ã€‚<strong>å› æ­¤ï¼Œç¬¬ä¸€åŸåˆ™æ˜¯ï¼Œå¦‚æœé€šè¿‡è°ƒæ•´é¡ºåºï¼Œå¯ä»¥å°‘ç»´æŠ¤ä¸€ä¸ªç´¢å¼•ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡ºåºå¾€å¾€å°±æ˜¯éœ€è¦ä¼˜å…ˆè€ƒè™‘é‡‡ç”¨çš„</strong>ã€‚</p>
<p>æ‰€ä»¥ç°åœ¨ä½ çŸ¥é“äº†ï¼Œè¿™æ®µå¼€å¤´çš„é—®é¢˜é‡Œï¼Œæˆ‘ä»¬è¦ä¸ºé«˜é¢‘è¯·æ±‚åˆ›å»º (èº«ä»½è¯å·ï¼Œå§“åï¼‰è¿™ä¸ªè”åˆç´¢å¼•ï¼Œå¹¶ç”¨è¿™ä¸ªç´¢å¼•æ”¯æŒâ€œæ ¹æ®èº«ä»½è¯å·æŸ¥è¯¢åœ°å€â€çš„éœ€æ±‚ã€‚</p>
<p>é‚£ä¹ˆï¼Œå¦‚æœæ—¢æœ‰è”åˆæŸ¥è¯¢ï¼Œåˆæœ‰åŸºäº aã€b å„è‡ªçš„æŸ¥è¯¢å‘¢ï¼Ÿ<strong>æŸ¥è¯¢æ¡ä»¶é‡Œé¢åªæœ‰ b çš„è¯­å¥ï¼Œæ˜¯æ— æ³•ä½¿ç”¨ (a,b) è¿™ä¸ªè”åˆç´¢å¼•çš„</strong>ï¼Œè¿™æ—¶å€™ä½ ä¸å¾—ä¸ç»´æŠ¤å¦å¤–ä¸€ä¸ªç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ éœ€è¦åŒæ—¶ç»´æŠ¤ (a,b)ã€(b) è¿™ä¸¤ä¸ªç´¢å¼•ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬è¦<strong>è€ƒè™‘çš„åŸåˆ™å°±æ˜¯ç©ºé—´</strong>äº†ã€‚æ¯”å¦‚ä¸Šé¢è¿™ä¸ªå¸‚æ°‘è¡¨çš„æƒ…å†µï¼Œname å­—æ®µæ˜¯æ¯” age å­—æ®µå¤§çš„ ï¼Œé‚£æˆ‘å°±å»ºè®®ä½ åˆ›å»ºä¸€ä¸ªï¼ˆname,ageï¼‰çš„è”åˆç´¢å¼•å’Œä¸€ä¸ª (age) çš„å•å­—æ®µç´¢å¼•ã€‚</p>
<h3 id="2-ç´¢å¼•ä¸‹æ¨"><a href="#2-ç´¢å¼•ä¸‹æ¨" class="headerlink" title="2. ç´¢å¼•ä¸‹æ¨"></a><span id="jump_pushed_down">2. ç´¢å¼•ä¸‹æ¨</span></h3><p>ä¸Šä¸€æ®µæˆ‘ä»¬è¯´åˆ°æ»¡è¶³æœ€å·¦å‰ç¼€åŸåˆ™çš„æ—¶å€™ï¼Œæœ€å·¦å‰ç¼€å¯ä»¥ç”¨äºåœ¨ç´¢å¼•ä¸­å®šä½è®°å½•ã€‚è¿™æ—¶ï¼Œä½ å¯èƒ½è¦é—®ï¼Œé‚£äº›ä¸ç¬¦åˆæœ€å·¦å‰ç¼€çš„éƒ¨åˆ†ï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<p>è¿˜æ˜¯ä»¥å¸‚æ°‘è¡¨çš„è”åˆç´¢å¼•ï¼ˆname, ageï¼‰ä¸ºä¾‹ã€‚å¦‚æœç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼šæ£€ç´¢å‡ºè¡¨ä¸­â€œåå­—ç¬¬ä¸€ä¸ªå­—æ˜¯å¼ ï¼Œè€Œä¸”å¹´é¾„æ˜¯ 10 å²çš„æ‰€æœ‰ç”·å­©â€ã€‚é‚£ä¹ˆï¼ŒSQL è¯­å¥æ˜¯è¿™ä¹ˆå†™çš„ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">mysql&gt; select * from tuser where name like 'å¼ %' and age=10 and ismale=1;</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®å‰ç¼€ç´¢å¼•è§„åˆ™ï¼Œè¿™ä¸ªè¯­å¥åœ¨æœç´¢ç´¢å¼•æ ‘çš„æ—¶å€™ï¼Œåªèƒ½ç”¨ â€œå¼ â€ï¼ˆç´¢å¼•åªæœ‰(name, age)ï¼‰ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„è®°å½• ID3ã€‚å½“ç„¶ï¼Œè¿™è¿˜ä¸é”™ï¼Œæ€»æ¯”å…¨è¡¨æ‰«æè¦å¥½ã€‚ç„¶åå‘¢ï¼Ÿå½“ç„¶æ˜¯åˆ¤æ–­å…¶ä»–æ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚</p>
<p>åœ¨ MySQL 5.6 ä¹‹å‰ï¼Œåªèƒ½ä» ID3 å¼€å§‹ä¸€ä¸ªä¸ªå›è¡¨ã€‚åˆ°ä¸»é”®ç´¢å¼•ä¸Šæ‰¾å‡ºæ•°æ®è¡Œï¼Œå†å¯¹æ¯”å­—æ®µå€¼ã€‚</p>
<p>è€Œ MySQL 5.6 å¼•å…¥çš„<strong>ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–ï¼ˆindex condition pushdown)</strong>ï¼Œ å¯ä»¥<strong>åœ¨ç´¢å¼•éå†è¿‡ç¨‹ä¸­ï¼Œå¯¹ç´¢å¼•ä¸­åŒ…å«çš„å­—æ®µå…ˆåšåˆ¤æ–­ï¼Œç›´æ¥è¿‡æ»¤æ‰ä¸æ»¡è¶³æ¡ä»¶çš„è®°å½•ï¼Œå‡å°‘å›è¡¨æ¬¡æ•°</strong>ã€‚</p>
<p>å›¾ 3 å’Œå›¾ 4ï¼Œæ˜¯è¿™ä¸¤ä¸ªè¿‡ç¨‹çš„æ‰§è¡Œæµç¨‹å›¾ã€‚</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605451488975.png" alt="1605451488975"></p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605451552321.png" alt="1605451552321"></p>
<h3 id="3-å°ç»“"><a href="#3-å°ç»“" class="headerlink" title="3. å°ç»“"></a>3. å°ç»“</h3><p>åœ¨æ»¡è¶³è¯­å¥éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œ å°½é‡å°‘åœ°è®¿é—®èµ„æºæ˜¯æ•°æ®åº“è®¾è®¡çš„é‡è¦åŸåˆ™ä¹‹ä¸€ã€‚åœ¨ä½¿ç”¨æ•°æ®åº“çš„æ—¶å€™ï¼Œå°¤å…¶æ˜¯åœ¨è®¾è®¡è¡¨ç»“æ„æ—¶ï¼Œä¹Ÿè¦ä»¥å‡å°‘èµ„æºæ¶ˆè€—ä½œä¸ºç›®æ ‡ã€‚</p>
<p>é—®é¢˜ï¼šå®é™…ä¸Šä¸»é”®ç´¢å¼•ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨å¤šä¸ªå­—æ®µçš„ã€‚DBA å°å•åœ¨å…¥èŒæ–°å…¬å¸çš„æ—¶å€™ï¼Œå°±å‘ç°è‡ªå·±æ¥æ‰‹ç»´æŠ¤çš„åº“é‡Œé¢ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªè¡¨ï¼Œè¡¨ç»“æ„å®šä¹‰ç±»ä¼¼è¿™æ ·çš„ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`geek`</span> (</span><br><span class="line">  <span class="string">`a`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`b`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`c`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`d`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`a`</span>,<span class="string">`b`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`c`</span> (<span class="string">`c`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`ca`</span> (<span class="string">`c`</span>,<span class="string">`a`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`cb`</span> (<span class="string">`c`</span>,<span class="string">`b`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span>;</span><br></pre></td></tr></table></figure>
<p>å…¬å¸çš„åŒäº‹å‘Šè¯‰ä»–è¯´ï¼Œç”±äºå†å²åŸå› ï¼Œè¿™ä¸ªè¡¨éœ€è¦ aã€b åšè”åˆä¸»é”®ï¼Œè¿™ä¸ªå°å•ç†è§£äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œå­¦è¿‡æœ¬ç« å†…å®¹çš„å°å•åˆçº³é—·äº†ï¼Œæ—¢ç„¶ä¸»é”®åŒ…å«äº† aã€b è¿™ä¸¤ä¸ªå­—æ®µï¼Œé‚£æ„å‘³ç€å•ç‹¬åœ¨å­—æ®µ c ä¸Šåˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œå°±å·²ç»åŒ…å«äº†ä¸‰ä¸ªå­—æ®µäº†å‘€ï¼Œä¸ºä»€ä¹ˆè¦åˆ›å»ºâ€œcaâ€â€œcbâ€è¿™ä¸¤ä¸ªç´¢å¼•ï¼Ÿ</p>
<p>åŒäº‹å‘Šè¯‰ä»–ï¼Œæ˜¯å› ä¸ºä»–ä»¬çš„ä¸šåŠ¡é‡Œé¢æœ‰è¿™æ ·çš„ä¸¤ç§è¯­å¥ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> geek <span class="keyword">where</span> c=N <span class="keyword">order</span> <span class="keyword">by</span> a <span class="keyword">limit</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> geek <span class="keyword">where</span> c=N <span class="keyword">order</span> <span class="keyword">by</span> b <span class="keyword">limit</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h4 id="é—®ï¼šè¿™ä½åŒäº‹çš„è§£é‡Šå¯¹å—ï¼Œä¸ºäº†è¿™ä¸¤ä¸ªæŸ¥è¯¢æ¨¡å¼ï¼Œè¿™ä¸¤ä¸ªç´¢å¼•æ˜¯å¦éƒ½æ˜¯å¿…é¡»çš„ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#é—®ï¼šè¿™ä½åŒäº‹çš„è§£é‡Šå¯¹å—ï¼Œä¸ºäº†è¿™ä¸¤ä¸ªæŸ¥è¯¢æ¨¡å¼ï¼Œè¿™ä¸¤ä¸ªç´¢å¼•æ˜¯å¦éƒ½æ˜¯å¿…é¡»çš„ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="é—®ï¼šè¿™ä½åŒäº‹çš„è§£é‡Šå¯¹å—ï¼Œä¸ºäº†è¿™ä¸¤ä¸ªæŸ¥è¯¢æ¨¡å¼ï¼Œè¿™ä¸¤ä¸ªç´¢å¼•æ˜¯å¦éƒ½æ˜¯å¿…é¡»çš„ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ"></a>é—®ï¼šè¿™ä½åŒäº‹çš„è§£é‡Šå¯¹å—ï¼Œä¸ºäº†è¿™ä¸¤ä¸ªæŸ¥è¯¢æ¨¡å¼ï¼Œè¿™ä¸¤ä¸ªç´¢å¼•æ˜¯å¦éƒ½æ˜¯å¿…é¡»çš„ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</h4><p>ç­”æ¡ˆï¼šcaç´¢å¼•ä¸éœ€è¦ï¼Œcbç´¢å¼•éœ€è¦</p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605452048904.png" alt="1605452048904"></p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605452080320.png" alt="1605452080320"></p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605452122669.png" alt="1605452122669"></p>
<p><img src="/2020/01/13/ç´¢å¼•Index/1605452156592.png" alt="1605452156592"></p>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>è§†å›¾View</title>
    <url>/2020/01/13/%E8%A7%86%E5%9B%BEView/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/2020/01/13/è§†å›¾View/1578902313361.png" alt="1578902313361"></p>
<p><img src="/2020/01/13/è§†å›¾View/1578902382330.png" alt="1578902382330"></p>
<p><img src="/2020/01/13/è§†å›¾View/1578902994931.png" alt="1578902994931"></p>
<p><img src="/2020/01/13/è§†å›¾View/1578903023109.png" alt="1578903023109"></p>
<p><code>INSERT INTO Viewname {column1,column2,â€¦} values(exp1,exp2,â€¦);</code>//æ’å…¥è§†å›¾å®é™…å½±å“è¡¨</p>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>Hiveä»‹ç»</title>
    <url>/2020/01/12/Hive%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p> å‚è€ƒï¼š<br> <a href="https://blog.csdn.net/PowerBlogger/article/details/83626449" target="_blank" rel="noopener">https://blog.csdn.net/PowerBlogger/article/details/83626449</a><br> <a href="https://blog.csdn.net/u010886217/article/details/83796151" target="_blank" rel="noopener">https://blog.csdn.net/u010886217/article/details/83796151</a><br> ã€ŠHadoopæ„å»ºæ•°æ®ä»“åº“å®è·µã€‹</p>
<p> æ›´å¤šå†…å®¹è§Hiveå®˜æ–¹æ–‡æ¡£<br> <a href="https://cwiki.apache.org/confluence/display/Hive/Home#Home-UserDocumentation" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/Home#Home-UserDocumentation</a></p>
</blockquote>
<h3 id="å¿«é€Ÿå¯¼èˆª"><a href="#å¿«é€Ÿå¯¼èˆª" class="headerlink" title="å¿«é€Ÿå¯¼èˆª"></a>å¿«é€Ÿå¯¼èˆª</h3><p><a href="#jump3.5.1.3">å‘Hiveè¡¨è£…è½½æ•°æ® LOAD</a><br><a href="#jump4.1.insert">INSERT</a></p>
<h3 id="1-ä»€ä¹ˆæ˜¯Hiveï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯Hiveï¼Ÿ" class="headerlink" title="1.ä»€ä¹ˆæ˜¯Hiveï¼Ÿ"></a>1.ä»€ä¹ˆæ˜¯Hiveï¼Ÿ</h3><p>Hive æ˜¯ Hadoop ç”Ÿæ€åœˆçš„æ•°æ®ä»“åº“è½¯ä»¶ï¼Œé‡Œé¢æœ‰è¡¨çš„æ¦‚å¿µï¼Œä½¿ç”¨ç±»ä¼¼äº SQL çš„è¯­è¨€ï¼ˆHiveQLï¼‰è¯»ã€å†™ã€ç®¡ç†åˆ†å¸ƒå¼å­˜å‚¨ä¸Šçš„å¤§æ•°æ®é›†ã€‚å®ƒå»ºç«‹åœ¨ Hadoop ä¹‹ä¸Šï¼Œå…·æœ‰ä»¥ä¸‹åŠŸèƒ½å’Œç‰¹ç‚¹ï¼š</p>
<ul>
<li>é€šè¿‡ HiveQL æ–¹ä¾¿åœ°è®¿é—®æ•°æ®ï¼Œ<strong>é€‚åˆæ‰§è¡Œ ETLã€æŠ¥è¡¨æŸ¥è¯¢ã€æ•°æ®åˆ†æç­‰æ•°æ®ä»“åº“ä»»åŠ¡</strong>ã€‚</li>
<li>æä¾›ä¸€ç§æœºåˆ¶ï¼Œç»™å„ç§å„æ ·çš„æ•°æ®æ ¼å¼æ·»åŠ ç»“æ„ã€‚</li>
<li>ç›´æ¥è®¿é—® HDFS çš„æ–‡ä»¶ï¼Œæˆ–è€…è®¿é—®å¦‚ HBase çš„å…¶ä»–æ•°æ®å­˜å‚¨ã€‚</li>
<li>å¯ä»¥é€šè¿‡ MapReduceã€Spark æˆ– Tez ç­‰å¤šç§è®¡ç®—æ¡†æ¶æ‰§è¡ŒæŸ¥è¯¢ã€‚</li>
</ul>
<p>Hive è¢«è®¾è®¡æˆä¸€ä¸ªå¯æ‰©å±•çš„ã€é«˜æ€§èƒ½çš„ã€å®¹é”™çš„ã€ä¸è¾“å…¥æ•°æ®æ ¼å¼æ¾è€¦åˆçš„ç³»ç»Ÿï¼Œé€‚åˆäºæ•°æ®ä»“åº“ä¸­çš„æ±‡æ€»ã€åˆ†æã€æ‰¹å¤„ç†æŸ¥è¯¢ç­‰ä»»åŠ¡ï¼Œ<strong>è€Œä¸é€‚åˆè”æœºäº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰çš„å·¥ä½œåœºæ™¯</strong>ã€‚Hive åŒ…æ‹¬ HCatalog å’Œ WebHCat ä¸¤ä¸ªç»„ä»¶ã€‚HCatalog æ˜¯ Hadoop çš„è¡¨å’Œå­˜å‚¨ç®¡ç†å±‚ï¼Œå…è®¸ä½¿ç”¨ Pig å’Œ MapReduce ç­‰æ•°æ®å¤„ç†å·¥å…·çš„ç”¨æˆ·æ›´å®¹æ˜“è¯»å†™é›†ç¾¤ä¸­çš„æ•°æ®ã€‚WebHCat æä¾›äº†ä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ HTTP æ¥å£æ‰§è¡Œ MapReduce ï¼ˆæˆ– YARNï¼‰ã€Pigã€Hive ä½œä¸šæˆ–å…ƒæ•°æ®æ“ä½œã€‚</p>
<p>HiveQL åªå¤„ç†ç»“æ„åŒ–æ•°æ®ï¼Œå¹¶ä¸”ä¸åŒºåˆ†å¤§å°å†™ã€‚é»˜è®¤æ—¶ï¼ŒHive ä½¿ç”¨å†…å»ºçš„ derby æ•°æ®åº“å­˜å‚¨å…ƒæ•°æ®ï¼Œä¹Ÿå¯ä»¥é…ç½® Hive ä½¿ç”¨ MySQLã€Oracle ç­‰å…³ç³»æ•°æ®åº“å­˜å‚¨å…ƒæ•°æ®ã€‚Hive é‡Œçš„æ•°æ®æœ€ç»ˆå­˜å‚¨åœ¨ HDFS çš„æ–‡ä»¶ä¸­ï¼Œå¸¸ç”¨çš„æ•°æ®æ–‡ä»¶æ ¼å¼æœ‰ä»¥ä¸‹4ä¸­ï¼š<strong>TEXTFILEã€SEQUENCEFILEã€RCFILEã€ORCFILE</strong>ã€‚ï¼ˆå…³äºæ–‡ä»¶æ ¼å¼çš„æ›´è¯¦ç»†å†…å®¹è§ <a href="#jump3.2">3.2 file format</a>ï¼‰</p>
<p>åœ¨ Hive ä¸­æ–‡ä»¶æ ¼å¼æŒ‡çš„æ˜¯è®°å½•ä»¥æ€æ ·çš„ç¼–ç æ ¼å¼è¢«å­˜å‚¨åˆ°æ–‡ä»¶ä¸­ã€‚ä¸åŒæ–‡ä»¶æ ¼å¼çš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬çš„æ•°æ®ç¼–ç ã€å‹ç¼©ç‡ã€ä½¿ç”¨çš„ç©ºé—´å’Œç£ç›˜I/Oã€‚</p>
<p>å½“ç”¨æˆ·å‘ä¼ ç»Ÿæ•°æ®åº“ä¸­å¢åŠ æ•°æ®æ—¶ï¼Œç³»ç»Ÿä¼šæ£€æŸ¥å†™å…¥çš„æ•°æ®ä¸è¡¨ç»“æ„æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…åˆ™æ‹’ç»æ’å…¥æ•°æ®ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„<strong>å†™æ—¶æ¨¡å¼</strong>ã€‚Hiveä¸æ­¤ä¸åŒï¼Œå®ƒä½¿ç”¨çš„æ˜¯<strong>è¯»æ—¶æ¨¡å¼</strong>ï¼Œå³ç›´åˆ°è¯»å–æ—¶å†è¿›è¡Œæ•°æ®æ ¡éªŒã€‚åœ¨å‘ Hive è£…è½½æ•°æ®æ—¶ï¼Œå®ƒå¹¶ä¸éªŒè¯æ•°æ®ä¸è¡¨ç»“æ„æ˜¯å¦åŒ¹é…ï¼Œä½†è¿™æ—¶å®ƒä¼šæ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦å’Œè¡¨å®šä¹‰ç›¸åŒ¹é…ã€‚</p>
<h3 id="2-Hiveçš„åŸç†"><a href="#2-Hiveçš„åŸç†" class="headerlink" title="2.Hiveçš„åŸç†"></a>2.Hiveçš„åŸç†</h3><p><strong>Hive å°†ç”¨æˆ·çš„ HiveQL è¯­å¥è¿›è¡Œè§£æï¼Œä¼˜åŒ–ï¼Œæœ€ç»ˆæŠŠä¸€ä¸ªä¸ªçš„HiveQLè¯­å¥è½¬æ¢ä¸º MapReduce ä½œä¸šæäº¤åˆ° Hadoop é›†ç¾¤ä¸Šï¼ŒHadoopè¿›è¡Œä½œä¸šçš„è°ƒåº¦åŠç›‘æ§ï¼Œä½œä¸šå®Œæˆåå°†æ‰§è¡Œç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚</strong>æ‰€ä»¥ï¼Œ<strong>Hiveå¹¶ä¸è¿›è¡Œè®¡ç®—ï¼Œåªæ˜¯æŠŠHiveQLè§£æä¸ºMapperReduceåœ¨HDFSé›†ç¾¤ä¸­è¿è¡Œè€Œå·²</strong>ï¼Œæ‰€ä»¥Hiveçš„æ•ˆç‡å¹¶ä¸é«˜ã€‚</p>
<h4 id="2-1-Hive-çš„ä½“ç³»ç»“æ„"><a href="#2-1-Hive-çš„ä½“ç³»ç»“æ„" class="headerlink" title="2.1 Hive çš„ä½“ç³»ç»“æ„"></a>2.1 Hive çš„ä½“ç³»ç»“æ„</h4><p>Hive çš„ä½“ç³»ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1606383486184.png" alt="1606383486184"></p>
<p>Hiveå»ºç«‹åœ¨ Hadoop çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ HDFS å’Œ MapReduce ä¹‹ä¸Šã€‚ä¸Šå›¾æ˜¾ç¤ºäº† Hadoop1 å’Œ Hadoop2 ä¸­çš„ä¸¤ç§ MapReduce ç»„ä»¶ã€‚</p>
<p>åœ¨ HDFS å’Œ MapReduce ä¹‹ä¸Šï¼Œå›¾ä¸­æ˜¾ç¤ºäº† Hive é©±åŠ¨ç¨‹åºå’Œå…ƒæ•°æ®å­˜å‚¨ã€‚Hive é©±åŠ¨ç¨‹åºåŠå…¶ç¼–è¯‘å™¨è´Ÿè´£ç¼–è¯‘ã€ä¼˜åŒ–å’Œæ‰§è¡Œ HiveQLã€‚ä¾èµ–äºå…·ä½“æƒ…å†µï¼ŒHive é©±åŠ¨ç¨‹åºå¯èƒ½é€‰æ‹©åœ¨æœ¬åœ°æ‰§è¡Œ Hive è¯­å¥æˆ–å‘½ä»¤ï¼Œä¹Ÿå¯èƒ½æ˜¯äº§ç”Ÿä¸€ä¸ª MapReduce ä½œä¸šã€‚Hive é©±åŠ¨ç¨‹åºæŠŠå…ƒæ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚</p>
<p>é»˜è®¤é…ç½®ä¸‹ï¼ŒHive åœ¨å†…å»ºçš„ Derby å…³ç³»æ•°æ®åº“ç³»ç»Ÿä¸­å­˜å‚¨å…ƒæ•°æ®ï¼Œè¿™ç§æ–¹å¼è¢«ç§°ä¸ºåµŒå…¥æ¨¡å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒHive é©±åŠ¨ç¨‹åºã€å…ƒæ•°æ®å’Œ Derby å…¨éƒ¨è¿è¡Œåœ¨åŒä¸€ä¸ª Java è™šæ‹Ÿæœºä¸­ï¼ˆJVMï¼‰ã€‚å®ƒåªæ”¯æŒå•ä¸€ Hive ä¼šè¯ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨äºå¤šç”¨æˆ·çš„ç”Ÿäº§ç¯å¢ƒã€‚Hive è¿˜å…è®¸å°†å…ƒæ•°æ®å­˜å‚¨äºæœ¬åœ°æˆ–è¿œç¨‹çš„å¤–éƒ¨æ•°æ®åº“ä¸­ï¼Œè¿™ç§è®¾ç½®å¯ä»¥æ›´å¥½åœ°æ”¯æŒ Hive çš„å¤šä¼šè¯ç”Ÿäº§ç¯å¢ƒã€‚å¹¶ä¸”ï¼Œå¯ä»¥é…ç½®ä»»ä½•ä¸ JDBC API å…¼å®¹çš„å…³ç³»æ•°æ®åº“ç³»ç»Ÿå­˜å‚¨å…ƒæ•°æ®ï¼Œå¦‚ MySQLã€Oracle ç­‰ã€‚ï¼ˆå…ƒæ•°æ®é»˜è®¤å­˜å‚¨åœ¨Hiveè‡ªå¸¦çš„Derbyæ•°æ®åº“ä¸­ï¼Œä½†ç”±äºDerbyä¸èƒ½å®ç°å¹¶å‘è®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ MySQL è¿›è¡Œæ›¿æ¢ï¼‰ã€‚</p>
<p>å¯¹åº”ç”¨æ”¯æŒçš„å…³é”®ç»„ä»¶æ˜¯ Hive Thrift æœåŠ¡ã€‚ä»»ä½•ä¸ JDBC å…¼å®¹çš„åº”ç”¨ï¼Œéƒ½å¯ä»¥é€šè¿‡ç»‘å®šçš„ JDBC é©±åŠ¨è®¿é—® Hiveã€‚ä¸ ODBC å…¼å®¹çš„å®¢æˆ·ç«¯ï¼Œå¦‚ Linux ä¸‹å…¸å‹çš„ unixODBC å’Œ isql åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ä»è¿œç¨‹ Linux å®¢æˆ·ç«¯è®¿é—® Hiveã€‚</p>
<p>æ¶æ„å›¾çš„æœ€ä¸Šé¢åŒ…æ‹¬ä¸€ä¸ªå‘½ä»¤è¡Œæ¥å£ï¼ˆCLIï¼‰ï¼Œå¯ä»¥åœ¨ Linux ç»ˆç«¯çª—å£å‘ Hive é©±åŠ¨ç¨‹åº ç›´æ¥å‘å‡ºæŸ¥è¯¢æˆ–ç®¡ç†å‘½ä»¤ã€‚è¿˜æœ‰ä¸€ä¸ªç®€å•çš„ Web ç•Œé¢ï¼Œé€šè¿‡å®ƒå¯ä»¥ä»æµè§ˆå™¨è®¿é—® Hive ç®¡ç†è¡¨åŠå…¶æ•°æ®ã€‚</p>
<h3 id="3-Hiveå»ºè¡¨è¯­å¥"><a href="#3-Hiveå»ºè¡¨è¯­å¥" class="headerlink" title="3.Hiveå»ºè¡¨è¯­å¥"></a><span id="jump3">3.Hiveå»ºè¡¨è¯­å¥</span></h3><blockquote>
<p>å‚è€ƒ<br><a href="https://blog.csdn.net/qq_36743482/article/details/78383964" target="_blank" rel="noopener">https://blog.csdn.net/qq_36743482/article/details/78383964</a><br><a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL</a><br><a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML</a></p>
</blockquote>
<p>Hiveå»ºè¡¨æ–¹å¼å…±æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li>ç›´æ¥å»ºè¡¨æ³•</li>
<li>æŸ¥è¯¢å»ºè¡¨æ³•</li>
<li>likeå»ºè¡¨æ³•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name    -- (Note: TEMPORARY available in Hive 0.14.0 and later)</span><br><span class="line">  [(col_name data_type [column_constraint_specification] [COMMENT col_comment], ... [constraint_specification])]</span><br><span class="line">  [COMMENT table_comment]</span><br><span class="line">  [PARTITIONED BY (col_name data_type [COMMENT col_comment], ...)]</span><br><span class="line">  [CLUSTERED BY (col_name, col_name, ...) [SORTED BY (col_name [ASC|DESC], ...)] INTO num_buckets BUCKETS]</span><br><span class="line">  [SKEWED BY (col_name, col_name, ...)                  -- (Note: Available in Hive 0.10.0 and later)]</span><br><span class="line">     ON ((col_value, col_value, ...), (col_value, col_value, ...), ...)</span><br><span class="line">     [STORED AS DIRECTORIES]</span><br><span class="line">  [</span><br><span class="line">   [ROW FORMAT row_format] </span><br><span class="line">   [STORED AS file_format]</span><br><span class="line">     | STORED BY &apos;storage.handler.class.name&apos; [WITH SERDEPROPERTIES (...)]  -- (Note: Available in Hive 0.6.0 and later)</span><br><span class="line">  ]</span><br><span class="line">  [LOCATION hdfs_path]</span><br><span class="line">  [TBLPROPERTIES (property_name=property_value, ...)]   -- (Note: Available in Hive 0.6.0 and later)</span><br><span class="line">  [AS select_statement];   -- (Note: Available in Hive 0.5.0 and later; not supported for external tables)</span><br><span class="line"> </span><br><span class="line">CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name</span><br><span class="line">  LIKE existing_table_or_view_name</span><br><span class="line">  [LOCATION hdfs_path];</span><br><span class="line"> </span><br><span class="line">data_type</span><br><span class="line">  : primitive_type</span><br><span class="line">  | array_type</span><br><span class="line">  | map_type</span><br><span class="line">  | struct_type</span><br><span class="line">  | union_type  -- (Note: Available in Hive 0.7.0 and later)</span><br><span class="line"> </span><br><span class="line">primitive_type</span><br><span class="line">  : TINYINT</span><br><span class="line">  | SMALLINT</span><br><span class="line">  | INT</span><br><span class="line">  | BIGINT</span><br><span class="line">  | BOOLEAN</span><br><span class="line">  | FLOAT</span><br><span class="line">  | DOUBLE</span><br><span class="line">  | DOUBLE PRECISION -- (Note: Available in Hive 2.2.0 and later)</span><br><span class="line">  | STRING</span><br><span class="line">  | BINARY      -- (Note: Available in Hive 0.8.0 and later)</span><br><span class="line">  | TIMESTAMP   -- (Note: Available in Hive 0.8.0 and later)</span><br><span class="line">  | DECIMAL     -- (Note: Available in Hive 0.11.0 and later)</span><br><span class="line">  | DECIMAL(precision, scale)  -- (Note: Available in Hive 0.13.0 and later)</span><br><span class="line">  | DATE        -- (Note: Available in Hive 0.12.0 and later)</span><br><span class="line">  | VARCHAR     -- (Note: Available in Hive 0.12.0 and later)</span><br><span class="line">  | CHAR        -- (Note: Available in Hive 0.13.0 and later)</span><br><span class="line"> </span><br><span class="line">array_type</span><br><span class="line">  : ARRAY &lt; data_type &gt;</span><br><span class="line"> </span><br><span class="line">map_type</span><br><span class="line">  : MAP &lt; primitive_type, data_type &gt;</span><br><span class="line"> </span><br><span class="line">struct_type</span><br><span class="line">  : STRUCT &lt; col_name : data_type [COMMENT col_comment], ...&gt;</span><br><span class="line"> </span><br><span class="line">union_type</span><br><span class="line">   : UNIONTYPE &lt; data_type, data_type, ... &gt;  -- (Note: Available in Hive 0.7.0 and later)</span><br><span class="line"> </span><br><span class="line">row_format</span><br><span class="line">  : DELIMITED [FIELDS TERMINATED BY char [ESCAPED BY char]] [COLLECTION ITEMS TERMINATED BY char]</span><br><span class="line">        [MAP KEYS TERMINATED BY char] [LINES TERMINATED BY char]</span><br><span class="line">        [NULL DEFINED AS char]   -- (Note: Available in Hive 0.13 and later)</span><br><span class="line">  | SERDE serde_name [WITH SERDEPROPERTIES (property_name=property_value, property_name=property_value, ...)]</span><br><span class="line"> </span><br><span class="line">file_format:</span><br><span class="line">  : SEQUENCEFILE</span><br><span class="line">  | TEXTFILE    -- (Default, depending on hive.default.fileformat configuration)</span><br><span class="line">  | RCFILE      -- (Note: Available in Hive 0.6.0 and later)</span><br><span class="line">  | ORC         -- (Note: Available in Hive 0.11.0 and later)</span><br><span class="line">  | PARQUET     -- (Note: Available in Hive 0.13.0 and later)</span><br><span class="line">  | AVRO        -- (Note: Available in Hive 0.14.0 and later)</span><br><span class="line">  | JSONFILE    -- (Note: Available in Hive 4.0.0 and later)</span><br><span class="line">  | INPUTFORMAT input_format_classname OUTPUTFORMAT output_format_classname</span><br><span class="line"> </span><br><span class="line">column_constraint_specification:</span><br><span class="line">  : [ PRIMARY KEY|UNIQUE|NOT NULL|DEFAULT [default_value]|CHECK  [check_expression] ENABLE|DISABLE NOVALIDATE RELY/NORELY ]</span><br><span class="line"> </span><br><span class="line">default_value:</span><br><span class="line">  : [ LITERAL|CURRENT_USER()|CURRENT_DATE()|CURRENT_TIMESTAMP()|NULL ] </span><br><span class="line"> </span><br><span class="line">constraint_specification:</span><br><span class="line">  : [, PRIMARY KEY (col_name, ...) DISABLE NOVALIDATE RELY/NORELY ]</span><br><span class="line">    [, PRIMARY KEY (col_name, ...) DISABLE NOVALIDATE RELY/NORELY ]</span><br><span class="line">    [, CONSTRAINT constraint_name FOREIGN KEY (col_name, ...) REFERENCES table_name(col_name, ...) DISABLE NOVALIDATE </span><br><span class="line">    [, CONSTRAINT constraint_name UNIQUE (col_name, ...) DISABLE NOVALIDATE RELY/NORELY ]</span><br><span class="line">    [, CONSTRAINT constraint_name CHECK [check_expression] ENABLE|DISABLE NOVALIDATE RELY/NORELY ]</span><br></pre></td></tr></table></figure>
<p>(ğŸ‘†æ¥è‡ªå®˜ç½‘ <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL</a><br>[] è¡¨ç¤ºå¯é€‰ï¼Œ| è¡¨ç¤ºé€‰å…¶ä¸€)</p>
<p>æ³¨ï¼š</p>
<ul>
<li>ä¸ä½¿ç”¨ EXTERNAL æ—¶ï¼Œåˆ›å»ºçš„æ˜¯å†…éƒ¨è¡¨ã€‚</li>
<li>è¡¨å’Œåˆ—çš„æ³¨é‡Šï¼ˆCOMMENTï¼‰æ˜¯å­—ç¬¦ä¸²æ–‡å­—(å•å¼•å·)ã€‚</li>
<li>è¦ä¸ºè¡¨æŒ‡å®šä¸€ä¸ªæ•°æ®åº“ï¼Œè¦ä¹ˆåœ¨<code>CREATE TABLE</code>è¯­å¥ä¹‹å‰ä½¿ç”¨<code>USE database_name</code>è¯­å¥(åœ¨Hive 0.6å’Œæ›´é«˜ç‰ˆæœ¬ä¸­)ï¼Œè¦ä¹ˆç”¨ä¸€ä¸ªæ•°æ®åº“åç§°é™å®šè¡¨å(åœ¨Hive 0.7å’Œæ›´é«˜ç‰ˆæœ¬ä¸­æ˜¯â€œdatabase _name.table.nameâ€)ã€‚</li>
<li>See <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-AlterTable" target="_blank" rel="noopener">Alter Table</a> for more information about table comments, table properties, and SerDe properties.</li>
<li>See <a href="https://cwiki.apache.org/confluence/display/Hive/Tutorial#Tutorial-TypeSystem" target="_blank" rel="noopener">Type System</a> and <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Types" target="_blank" rel="noopener">Hive Data Types</a> for details about the primitive and complex data types.</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬é’ˆå¯¹é‡Œé¢çš„ä¸€äº›ä¸åŒäºå…³ç³»å‹æ•°æ®åº“çš„åœ°æ–¹è¿›è¡Œè¯´æ˜ã€‚</p>
<h4 id="3-1-row-format"><a href="#3-1-row-format" class="headerlink" title="3.1 row format"></a><span id="jump3.1">3.1 row format</span></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">row_format</span><br><span class="line">  : DELIMITED [FIELDS TERMINATED BY char [ESCAPED BY char]] [COLLECTION ITEMS TERMINATED BY char]</span><br><span class="line">        [MAP KEYS TERMINATED BY char] [LINES TERMINATED BY char]</span><br><span class="line">        [NULL DEFINED AS char]   -- (Note: Available in Hive 0.13 and later)</span><br><span class="line">  | SERDE serde_name [WITH SERDEPROPERTIES (property_name=property_value, property_name=property_value, ...)]</span><br></pre></td></tr></table></figure>
<p>Hiveå°†HDFSä¸Šçš„æ–‡ä»¶æ˜ å°„æˆè¡¨ç»“æ„ï¼Œé€šè¿‡åˆ†éš”ç¬¦æ¥åŒºåˆ†åˆ—ï¼ˆæ¯”å¦‚â€™,â€™ â€˜;â€™ or â€˜^â€™ ç­‰ï¼‰ï¼Œrow formatå°±æ˜¯ç”¨äºæŒ‡å®šåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è§„åˆ™ã€‚<br>æ¯”å¦‚å¯¹äºä»¥ä¸‹è®°å½•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1,xiaoming,book-TV-code,beijing:chaoyang-shagnhai:pudong</span><br><span class="line">2,lilei,book-code,nanjing:jiangning-taiwan:taibei</span><br><span class="line">3,lihua,music-book,heilongjiang:haerbin</span><br></pre></td></tr></table></figure>
<p><strong>é€—å·</strong>ç”¨äºåˆ†å‰²åˆ—ï¼Œå³FIELDS TERMINATED BY charï¼Œåˆ†å‰²ä¸ºå¦‚ä¸‹åˆ— <strong>ID</strong>ã€<strong>name</strong>ã€<strong>hobby</strong>ï¼ˆè¯¥å­—æ®µæ˜¯æ•°ç»„å½¢å¼ï¼Œé€šè¿‡ â€˜-â€™ è¿›è¡Œåˆ†å‰²ï¼Œå³COLLECTION ITEMS TERMINATED BY â€˜-â€™ï¼‰ã€<strong>address</strong>ï¼ˆè¯¥å­—æ®µæ˜¯é”®å€¼å¯¹å½¢å¼mapï¼Œé€šè¿‡ â€˜:â€™ åˆ†å‰²é”®å€¼ï¼Œå³ MAP KEYS TERMINATED BY â€˜:â€™ï¼‰ï¼›<br>è€ŒFIELDS TERMINATED BY charç”¨äºåŒºåˆ†ä¸åŒæ¡çš„æ•°æ®ï¼Œé»˜è®¤æ˜¯æ¢è¡Œç¬¦ï¼›</p>
<h4 id="3-2-file-formatï¼ˆHDFSæ–‡ä»¶å­˜æ”¾çš„æ ¼å¼ï¼‰"><a href="#3-2-file-formatï¼ˆHDFSæ–‡ä»¶å­˜æ”¾çš„æ ¼å¼ï¼‰" class="headerlink" title="3.2 file formatï¼ˆHDFSæ–‡ä»¶å­˜æ”¾çš„æ ¼å¼ï¼‰"></a><span id="jump3.2">3.2 file formatï¼ˆHDFSæ–‡ä»¶å­˜æ”¾çš„æ ¼å¼ï¼‰</span></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">file_format:</span><br><span class="line">  : SEQUENCEFILE</span><br><span class="line">  | TEXTFILE    -- (Default, depending on hive.default.fileformat configuration)</span><br><span class="line">  | RCFILE      -- (Note: Available in Hive 0.6.0 and later)</span><br><span class="line">  | ORC         -- (Note: Available in Hive 0.11.0 and later)</span><br><span class="line">  | PARQUET     -- (Note: Available in Hive 0.13.0 and later)</span><br><span class="line">  | AVRO        -- (Note: Available in Hive 0.14.0 and later)</span><br><span class="line">  | JSONFILE    -- (Note: Available in Hive 4.0.0 and later)</span><br><span class="line">  | INPUTFORMAT input_format_classname OUTPUTFORMAT output_format_classname</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤TEXTFILEï¼Œå³æ–‡æœ¬æ ¼å¼ï¼Œå¯ä»¥ç›´æ¥æ‰“å¼€ã€‚</p>
<h5 id="3-2-1-TEXTFILE"><a href="#3-2-1-TEXTFILE" class="headerlink" title="3.2.1 TEXTFILE"></a>3.2.1 TEXTFILE</h5><p>TEXTFILEå°±æ˜¯æ™®é€šçš„æ–‡æœ¬å‹æ–‡ä»¶ï¼Œæ˜¯ Hadoop é‡Œæœ€å¸¸ç”¨çš„è¾“å…¥è¾“å‡ºæ ¼å¼ï¼Œä¹Ÿæ˜¯ Hive çš„é»˜è®¤æ–‡ä»¶æ ¼å¼ã€‚å¦‚æœè¡¨å®šä¹‰ä¸ºTEXTFILEï¼Œåˆ™å¯ä»¥å‘è¯¥è¡¨ä¸­è£…è½½ä»¥é€—å·ã€TABæˆ–ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥å¯¼å…¥JSONæ ¼å¼çš„æ•°æ®ã€‚<br>æ–‡æœ¬æ–‡ä»¶ä¸­é™¤äº†å¯ä»¥åŒ…å«æ™®é€šçš„å­—ç¬¦ä¸²ã€æ•°å­—ã€æ—¥æœŸç­‰ç®€å•æ•°æ®ç±»å‹å¤–ï¼Œè¿˜å¯ä»¥åŒ…å«å¤æ‚çš„é›†åˆæ•°æ®ç±»å‹ã€‚Hive æ”¯æŒ <strong>STRUCT</strong>ã€<strong>MAP</strong> å’Œ <strong>ARRAY</strong> ä¸‰ç§é›†åˆæ•°æ®ç±»å‹ã€‚</p>
<p><span style="color:blue">ç¤ºä¾‹1ï¼šä»¥TABä¸ºåˆ—é—´åˆ†éš”ç¬¦çš„æ–‡æœ¬æ–‡ä»¶</span><br>åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶/root/data.csvï¼Œå½•å…¥å››åˆ—ä¸¤è¡Œæ•°æ®ï¼Œåˆ—ä¹‹é—´ç”¨TABç¬¦å·ä½œä¸ºåˆ†éš”ç¬¦ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">a1	1	b1	c1</span><br><span class="line">a2	2	b2	c2</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä¸‹é¢çš„è¯­å¥åˆ›å»ºè¡¨ã€è£…è½½æ•°æ®ã€æŸ¥è¯¢è¡¨ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å»ºç«‹TESTFILEæ ¼å¼çš„è¡¨</span></span><br><span class="line"><span class="keyword">use</span> <span class="keyword">test</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_textfile(c1 <span class="keyword">string</span>, c2 <span class="built_in">int</span>, c3 <span class="keyword">string</span>, c4 <span class="keyword">string</span>)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\t'</span> <span class="keyword">stored</span> <span class="keyword">as</span> textfile;</span><br><span class="line"><span class="comment">-- å‘è¡¨ä¸­å¯¼å…¥æ•°æ®</span></span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> inpath <span class="string">'root/data.csv'</span> <span class="keyword">into</span> <span class="keyword">table</span> t_textfile;</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è¡¨</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_textfile;</span><br></pre></td></tr></table></figure>
<p>æŸ¥è¯¢ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hive&gt; select * from t_textfile;</span><br><span class="line">OK</span><br><span class="line">a1	1	b1	c1</span><br><span class="line">a2	2	b2	c2</span><br><span class="line">Time taken: 0.493 seconds, Fetched: 2 row(s)</span><br></pre></td></tr></table></figure>
<p><span style="color:blue">ç¤ºä¾‹2ï¼šJSONæ ¼å¼çš„æ•°æ®æ–‡ä»¶</span><br>å»ºç«‹ä¸€ä¸ªjsonæ–‡ä»¶/root/simple.jsonï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&quot;foo&quot;:&quot;abc&quot;, &quot;bar&quot;:&quot;2009101100000&quot;, &quot;quux&quot;:&#123;&quot;quuxid&quot;:1234, &quot;quuxname&quot;:&quot;sam&quot;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä¸‹é¢çš„è¯­å¥åˆ›å»ºè¡¨ã€è£…è½½æ•°æ®ã€æŸ¥è¯¢è¡¨ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ ¹æ®å®é™…ç›®å½•æ·»åŠ hive-hcatalog-core.jaråŒ…</span></span><br><span class="line">add jar /opt/cloudera/parcels/CDH-5.7.0-1.cdh5.7.0.p0.45/lib/oozie/libtools/hive-hcatalog-core.jar;</span><br><span class="line"><span class="comment">-- å»ºç«‹æµ‹è¯•è¡¨</span></span><br><span class="line"><span class="keyword">use</span> <span class="keyword">test</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> my_table(</span><br><span class="line">foo <span class="keyword">string</span>,</span><br><span class="line">bar <span class="keyword">string</span>,</span><br><span class="line">quux <span class="keyword">struct</span>&lt;quuxid:<span class="built_in">int</span>, quuxname:<span class="keyword">string</span>&gt;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> serde <span class="string">'org.apache.hive.hcatalog.data.JsonSerDe'</span></span><br><span class="line"><span class="keyword">stored</span> <span class="keyword">as</span> textfile;</span><br><span class="line"><span class="comment">-- è£…è½½æ•°æ®</span></span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> inpath <span class="string">'/root/simple.json'</span> <span class="keyword">into</span> <span class="keyword">table</span> my_table;</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> foo, bar, quux.quuxid, quux.quuxname <span class="keyword">from</span> my_table;</span><br></pre></td></tr></table></figure>
<p>æŸ¥è¯¢ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">OK</span><br><span class="line">abc	2009101100000	1234	sam</span><br><span class="line">Time taken: 22.051 seconds, Fetched: 1 row(s)</span><br></pre></td></tr></table></figure>
<p><span style="color:blue">ç¤ºä¾‹3ï¼šcomplex_jsonè¡¨ä¸­å«æœ‰ç»“æ„ç±»å‹åµŒå¥—å’Œç»“æ„ã€æ•°ç»„ã€ç»“æ„ä¸‰å±‚åµŒå¥—ã€‚</span><br>å»ºç«‹ä¸€ä¸ªjsonæ–‡ä»¶/root/complex.jsonï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&quot;docid&quot;:&quot;abc&quot;, &quot;user&quot;:</span><br><span class="line">	&#123;&quot;id&quot;:1234, &quot;username&quot;:&quot;sam1234&quot;, &quot;name&quot;:&quot;sam&quot;,	&quot;shippingaddress&quot;:</span><br><span class="line">		&#123;&quot;address1&quot;:&quot;123 main st.&quot;, &quot;address2&quot;:&quot;&quot;, &quot;city&quot;:&quot;durham&quot;, &quot;state&quot;:&quot;nc&quot;&#125;, </span><br><span class="line">	&quot;orders&quot;:[&#123;&quot;itemid&quot;:6789, &quot;orderdate&quot;:&quot;11/11/2012&quot;&#125;,&#123;&quot;itemid&quot;:4352, &quot;orderdate&quot;:&quot;12/12/2012&quot;&#125;]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä¸‹é¢çš„è¯­å¥åˆ›å»ºè¡¨ã€è£…è½½æ•°æ®ã€æŸ¥è¯¢è¡¨ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å»ºç«‹æµ‹è¯•è¡¨</span></span><br><span class="line"><span class="keyword">use</span> <span class="keyword">test</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> complex_json(</span><br><span class="line">	docid <span class="keyword">string</span>,</span><br><span class="line">	<span class="keyword">user</span> <span class="keyword">struct</span>&lt;<span class="keyword">id</span>: <span class="built_in">int</span>,</span><br><span class="line">				username: <span class="keyword">string</span>,</span><br><span class="line">				<span class="keyword">name</span>:	<span class="keyword">string</span>,</span><br><span class="line">				shippingaddress: strcuct&lt;address1: <span class="keyword">string</span>,</span><br><span class="line">										 address2: <span class="keyword">string</span>,</span><br><span class="line">										 city: <span class="keyword">string</span>,</span><br><span class="line">										 state: <span class="keyword">string</span>&gt;,</span><br><span class="line">				orders: <span class="built_in">array</span>&lt;<span class="keyword">struct</span>&lt;itemid:<span class="built_in">int</span>,</span><br><span class="line">									 oderdatate:<span class="keyword">string</span>&gt;&gt;&gt;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> serde <span class="string">'org.apache.hive.hcatalog.data.JsonSerDe'</span></span><br><span class="line"><span class="keyword">stored</span> <span class="keyword">as</span> textfile;</span><br><span class="line"><span class="comment">-- è£…è½½æ•°æ®</span></span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> inpath <span class="string">'/root/complex.json'</span> overwrite <span class="keyword">into</span> <span class="keyword">table</span> complex_json;</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> docid, user.id, user.shipping address.city <span class="keyword">as</span> city,</span><br><span class="line">	user.orders[<span class="number">0</span>].itemid <span class="keyword">as</span> order0id,</span><br><span class="line">	user.orders[<span class="number">1</span>].itemid <span class="keyword">as</span> order1id</span><br><span class="line"><span class="keyword">from</span> complex_json;</span><br></pre></td></tr></table></figure>
<p>æŸ¥è¯¢ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">OK</span><br><span class="line">abc	1234	durham	6789	4352</span><br><span class="line">Time taken: 18.744 seconds, Fetched: 1 row(s)</span><br></pre></td></tr></table></figure>
<p>æŸ¥è¯¢ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> docid, user.id, user.orders.itemid <span class="keyword">from</span> complex_json;</span><br></pre></td></tr></table></figure>
<p>æŸ¥è¯¢ç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">OK</span><br><span class="line">abc	1234	[6789,4352]</span><br><span class="line">Time taken: 17.755 seconds, Fetched: 1 row(s)</span><br></pre></td></tr></table></figure>
<h5 id="3-2-2-SEQUENCEFILE"><a href="#3-2-2-SEQUENCEFILE" class="headerlink" title="3.2.2  SEQUENCEFILE"></a>3.2.2  SEQUENCEFILE</h5><p>Hadoopå¤„ç†å°‘é‡å¤§æ–‡ä»¶æ¯”å¤§é‡å°æ–‡ä»¶çš„æ€§èƒ½è¦å¥½ã€‚å¦‚æœæ–‡ä»¶å°äºHadoopå®šä¹‰çš„å—å°ºå¯¸ï¼ˆHadoop 2.xé»˜è®¤æ˜¯128MBï¼‰ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å°æ–‡ä»¶ã€‚å…ƒæ•°æ®çš„å¢é•¿å°†è½¬åŒ–ä¸ºNameNodeçš„å¼€é”€ã€‚å¦‚æœæœ‰å¤§é‡å°æ–‡ä»¶ï¼ŒNameNodeä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHadoopå¼•å…¥äº†sequenceæ–‡ä»¶ï¼Œå°†sequenceä½œä¸ºå­˜å‚¨å°æ–‡ä»¶çš„å®¹å™¨ã€‚</p>
<p>Sequenceæ–‡ä»¶æ˜¯ç”±äºŒè¿›åˆ¶é”®å€¼å¯¹ç»„æˆçš„å¹³é¢æ–‡ä»¶ã€‚Hiveå°†æŸ¥è¯¢è½¬åŒ–æˆMapReduceä½œä¸šæ—¶ï¼Œå†³å®šä¸€ä¸ªç»™å®šè®°å½•çš„å“ªäº›é”®/å€¼å¯¹è¢«ä½¿ç”¨ã€‚Sequenceæ–‡ä»¶æ˜¯å¯åˆ†å‰²çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œä¸»è¦çš„ç”¨é€”æ˜¯è”åˆå¤šä¸ªå°æ–‡ä»¶ã€‚</p>
<p>SEQUENCEFILEæ ¼å¼çš„è¾“å…¥è¾“å‡ºåŒ…æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">org.apache.hadoop.mapred.SequenceFileInputFormat</span><br><span class="line">org.apache.hadoop.hive.ql.io.HiveSequenceFileOutputFormat</span><br></pre></td></tr></table></figure>
<p><span style="color:blue">ç¤ºä¾‹ï¼š</span></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å»ºç«‹SEQUENCEFILEæ ¼å¼çš„è¡¨</span></span><br><span class="line"><span class="keyword">use</span> <span class="keyword">test</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_sequencefile(c1 <span class="keyword">string</span>, c2 <span class="built_in">int</span>, c3 <span class="keyword">string</span>, c4 <span class="keyword">string</span>)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\t'</span> <span class="keyword">stored</span> <span class="keyword">as</span> sequencefile;</span><br><span class="line"><span class="comment">-- å‘è¡¨ä¸­å¯¼å…¥æ•°æ®</span></span><br><span class="line"><span class="comment">-- ä¸TEXTFILEæœ‰äº›ä¸åŒï¼Œå› ä¸ºSEQUENCEFILEæ˜¯äºŒè¿›åˆ¶æ ¼å¼ï¼Œæ‰€ä»¥éœ€è¦ä»å…¶ä»–è¡¨å‘SEQUENCEFILEè¡¨æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">table</span> t_sequencefile <span class="keyword">select</span> * <span class="keyword">from</span> t_textfile;</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è¡¨</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_sequencefile;</span><br></pre></td></tr></table></figure>
<h5 id="3-2-3-RCFILE"><a href="#3-2-3-RCFILE" class="headerlink" title="3.2.3 RCFILE"></a>3.2.3 RCFILE</h5><p>RCFILEæŒ‡çš„æ˜¯Record Columnar Fileï¼Œæ˜¯ä¸€ç§é«˜å‹ç¼©ç‡çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼Œè¢«ç”¨äºåœ¨ä¸€ä¸ªæ—¶é—´ç‚¹æ“ä½œå¤šè¡Œçš„åœºæ™¯ã€‚RCFILEsæ˜¯ç”±äºŒè¿›åˆ¶é”®/å€¼å¯¹ç»„æˆçš„å¹³é¢æ–‡ä»¶ã€‚RCFILEä»¥è®°å½•çš„å½¢å¼å­˜å‚¨è¡¨ä¸­çš„åˆ—ï¼Œå³<strong>åˆ—å­˜å‚¨æ–¹å¼</strong>ã€‚å®ƒå…ˆåˆ†å‰²è¡Œåšæ°´å¹³åˆ†åŒºï¼Œç„¶ååˆ†å‰²åˆ—åšå‚ç›´åˆ†åŒºã€‚RCFILEæŠŠä¸€è¡Œçš„å…ƒæ•°æ®ä½œä¸ºé”®ï¼ŒæŠŠè¡Œæ•°æ®ä½œä¸ºå€¼ã€‚è¿™ç§é¢å‘åˆ—çš„å­˜å‚¨åœ¨æ‰§è¡Œæ•°æ®åˆ†ææ—¶æ›´é«˜æ•ˆã€‚</p>
<p>RCFILEæ ¼å¼çš„è¾“å…¥è¾“å‡ºåŒ…æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">org.apache.hadoop.hive.ql.io.RCFileInputFormat</span><br><span class="line">org.apache.hadoop.hive.ql.io.RCFileOutputFormat</span><br></pre></td></tr></table></figure>
<p><span style="color:blue">ç¤ºä¾‹ï¼š</span></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å»ºç«‹RCFILEæ ¼å¼çš„è¡¨</span></span><br><span class="line"><span class="keyword">use</span> <span class="keyword">test</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_rcfile(c1 <span class="keyword">string</span>, c2 <span class="built_in">int</span>, c3 <span class="keyword">string</span>, c4 <span class="keyword">string</span>)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\t'</span> <span class="keyword">stored</span> <span class="keyword">as</span> rcfile;</span><br><span class="line"><span class="comment">-- å‘è¡¨ä¸­å¯¼å…¥æ•°æ®</span></span><br><span class="line"><span class="comment">-- ä¸èƒ½ç›´æ¥å‘RCFILEè¡¨ä¸­å¯¼å…¥æ•°æ®ï¼Œéœ€è¦ä»å…¶ä»–è¡¨å‘RCFILEè¡¨æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">table</span> t_rcfile <span class="keyword">select</span> * <span class="keyword">from</span> t_textfile;</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è¡¨</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_rcfile;</span><br></pre></td></tr></table></figure>
<h5 id="3-2-4-ORCFILE"><a href="#3-2-4-ORCFILE" class="headerlink" title="3.2.4 ORCFILE"></a>3.2.4 ORCFILE</h5><p>ORCæŒ‡çš„æ˜¯Optimized Record Columnarï¼Œå³ç›¸å¯¹äºå…¶ä»–æ–‡ä»¶æ ¼å¼ï¼Œå®ƒä»¥æ›´ä¼˜åŒ–çš„æ–¹å¼å­˜å‚¨æ•°æ®ã€‚ORCèƒ½å°†åŸå§‹æ•°æ®çš„å¤§å°ç¼©å‡75%ï¼Œä»è€Œæå‡äº†æ•°æ®å¤„ç†çš„é€Ÿåº¦ã€‚ORCæ¯”Textã€Sequenceå’ŒRCæ–‡ä»¶æ ¼å¼æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œè€Œä¸”ORCæ˜¯ç›®å‰Hiveä¸­å”¯ä¸€æ”¯æŒäº‹åŠ¡çš„æ–‡ä»¶æ ¼å¼ã€‚</p>
<p>ORCFILEæ ¼å¼çš„è¾“å…¥è¾“å‡ºåŒ…æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">org.apache.hadoop.hive.ql.io.orc</span><br></pre></td></tr></table></figure>
<p><span style="color:blue">ç¤ºä¾‹ï¼š</span></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å»ºç«‹ORCFILEæ ¼å¼çš„è¡¨</span></span><br><span class="line"><span class="keyword">use</span> <span class="keyword">test</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_orcfile(c1 <span class="keyword">string</span>, c2 <span class="built_in">int</span>, c3 <span class="keyword">string</span>, c4 <span class="keyword">string</span>)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\t'</span> <span class="keyword">stored</span> <span class="keyword">as</span> orcfile;</span><br><span class="line"><span class="comment">-- å‘è¡¨ä¸­å¯¼å…¥æ•°æ®</span></span><br><span class="line"><span class="comment">-- ä¸èƒ½ç›´æ¥å‘ORCFILEè¡¨ä¸­å¯¼å…¥æ•°æ®ï¼Œéœ€è¦ä»å…¶ä»–è¡¨å‘ORCFILEè¡¨æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">table</span> t_orcfile <span class="keyword">select</span> * <span class="keyword">from</span> t_textfile;</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è¡¨</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_orcfile;</span><br></pre></td></tr></table></figure>
<h5 id="3-2-5-æ€»ç»“"><a href="#3-2-5-æ€»ç»“" class="headerlink" title="3.2.5 æ€»ç»“"></a>3.2.5 æ€»ç»“</h5><p>åº”è¯¥ä¾æ•°æ®éœ€æ±‚é€‰æ‹©é€‚å½“çš„æ–‡ä»¶æ ¼å¼ï¼Œå¦‚ï¼š</p>
<ul>
<li>å¦‚æœæ•°æ®æœ‰å‚æ•°åŒ–çš„åˆ†éš”ç¬¦ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©TEXTFILEæ ¼å¼</li>
<li>å¦‚æœæ•°æ®æ‰€åœ¨æ–‡ä»¶æ¯”å—å°ºå¯¸å°ï¼Œå¯ä»¥é€‰æ‹©SEQUENCEFILEæ ¼å¼</li>
<li>å¦‚æœæƒ³æ‰§è¡Œæ•°æ®åˆ†æï¼Œå¹¶é«˜æ•ˆåœ°å­˜å‚¨æ•°æ®ï¼Œå¯ä»¥é€‰æ‹©RCFILEæ ¼å¼</li>
<li>å¦‚æœå¸Œæœ›å‡å°æ•°æ®æ‰€éœ€çš„å­˜å‚¨ç©ºé—´å¹¶æå‡æ€§èƒ½ï¼Œå¯ä»¥é€‰æ‹©ORCFILEæ ¼å¼</li>
</ul>
<h4 id="3-3-å†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨"><a href="#3-3-å†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨" class="headerlink" title="3.3 å†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨"></a><span id="jump3.3">3.3 å†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨</span></h4><p>å…³äºå†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨çš„æ›´å¤šå†…å®¹è§ <a href="#jump4.1">4.1 å†…éƒ¨è¡¨</a>ä¸ <a href="#jump4.2">4.2 å¤–éƒ¨è¡¨</a></p>
<p>ä¸ä½¿ç”¨EXTERNALå­å¥åˆ›å»ºçš„è¡¨ç§°ä¸ºç®¡ç†è¡¨ (ä¹Ÿå«åšå†…éƒ¨è¡¨) (managed table)ï¼Œå› ä¸ºHiveç®¡ç†å®ƒçš„æ•°æ®ã€‚è‹¥è¦ç¡®å®šä¸€ä¸ªè¡¨æ˜¯ç®¡ç†è¡¨è¿˜æ˜¯å¤–éƒ¨è¡¨ï¼Œä½¿ç”¨ <a href="https://cwiki.apache.org/confluence/display/Hive/Managed+vs.+External+Tables#Managedvs.ExternalTables-DescribeTable/View/Column" target="_blank" rel="noopener">DESCRIBE FORMATTED table_name</a> command, which will display either MANAGED_TABLE or EXTERNAL_TABLE depending on table type.</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHiveåˆ›å»ºç®¡ç†è¡¨ï¼Œå…¶ä¸­æ–‡ä»¶ã€å…ƒæ•°æ®å’Œç»Ÿè®¡ä¿¡æ¯ç”±å†…éƒ¨Hiveè¿›ç¨‹ç®¡ç† (By default Hive creates managed tables, where files, metadata and statistics are managed by internal Hive processes)ã€‚ æœ‰å…³ç®¡ç†è¡¨ä¸å¤–éƒ¨è¡¨ä¹‹é—´å·®å¼‚çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://cwiki.apache.org/confluence/display/Hive/Managed+vs.+External+Tables" target="_blank" rel="noopener">Managed vs. External Tables</a>ã€‚</p>
<h5 id="Feature-comparison"><a href="#Feature-comparison" class="headerlink" title="Feature comparison"></a>Feature comparison</h5><ul>
<li>ARCHIVE/UNARCHIVE/TRUNCATE/MERGE/CONCATENATE only work for managed tables</li>
<li>DROP deletes data for managed tables while it only deletes metadata for external ones</li>
<li>ACID/Transactional only works for managed tables</li>
<li><a href="https://issues.apache.org/jira/browse/HIVE-18513" target="_blank" rel="noopener">Query Results Caching</a> only works for managed tables</li>
<li>Only the RELY constraint is allowed on external tables</li>
<li>Some Materialized View features only work on managed tables</li>
</ul>
<h5 id="Managed-tables-å†…éƒ¨è¡¨"><a href="#Managed-tables-å†…éƒ¨è¡¨" class="headerlink" title="Managed tables å†…éƒ¨è¡¨"></a>Managed tables å†…éƒ¨è¡¨</h5><p>A managed table is stored under the <a href="https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.metastore.warehouse.dir" target="_blank" rel="noopener">hive.metastore.warehouse.dir</a> path property, by default in a folder path similar to <code>/user/hive/warehouse/databasename.db/tablename/</code>. The default location can be overridden by the <code>location</code> property during table creation. If a managed table or partition is dropped, the data and metadata associated with that table or partition are deleted. If the PURGE option is not specified, the data is moved to a trash folder for a defined duration.</p>
<p><span style="color:red">Use managed tables when Hive should manage the lifecycle of the table, or when generating temporary tables.</span></p>
<p>ç®¡ç†è¡¨çš„ä¸»è¦é—®é¢˜æ˜¯åªèƒ½ç”¨ Hive è®¿é—®ï¼Œä¸æ–¹ä¾¿å’Œå…¶ä»–ç³»ç»Ÿå…±äº«æ•°æ®ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€ä»½ç”± Pig æˆ–å…¶ä»–å·¥å…·åˆ›å»ºå¹¶ä¸”ä¸»è¦ç”±è¿™ä¸€å·¥å…·ä½¿ç”¨çš„æ•°æ®ï¼ŒåŒæ—¶å¸Œæœ›ä½¿ç”¨ Hive åœ¨è¿™ä»½æ•°æ®ä¸Šæ‰§è¡Œä¸€äº›æŸ¥è¯¢ï¼Œå¯æ˜¯å¹¶æ²¡æœ‰ç»™äºˆ Hive å¯¹æ•°æ®çš„æ‰€æœ‰æƒï¼Œè¿™æ—¶å°±ä¸èƒ½ä½¿ç”¨ç®¡ç†è¡¨äº†ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è¡¨æŒ‡å‘è¿™ä»½æ•°æ®ï¼Œè€Œå¹¶ä¸éœ€è¦å¯¹å…¶å…·æœ‰æ‰€æœ‰æƒã€‚</p>
<h5 id="External-tables-å¤–éƒ¨è¡¨"><a href="#External-tables-å¤–éƒ¨è¡¨" class="headerlink" title="External tables å¤–éƒ¨è¡¨"></a>External tables å¤–éƒ¨è¡¨</h5><p>An external table describes the metadata / schema on external files. External table files can be accessed and managed by processes outside of Hive. External tables can access data stored in sources such as Azure Storage Volumes (ASV) or remote HDFS locations. If the structure or partitioning of an external table is changed, an <a href="https://cwiki.apache.org/confluence/display/Hive/Managed+vs.+External+Tables#Managedvs.ExternalTables-RecoverPartitions(MSCKREPAIRTABLE" target="_blank" rel="noopener">MSCK REPAIR TABLE table_name</a>) statement can be used to refresh metadata information.</p>
<p><span style="color:red">Use external tables when files are already present or in remote locations, and the files should remain even if the table is dropped.</span></p>
<p>å¤–éƒ¨è¡¨æ–¹ä¾¿å¯¹å·²æœ‰æ•°æ®çš„é›†æˆã€‚å› ä¸ºè¡¨æ˜¯å¤–éƒ¨çš„ï¼Œæ‰€ä»¥ Hive å¹¶ä¸è®¤ä¸ºå…¶å®Œå…¨æ‹¥æœ‰è¿™ä¸ªè¡¨çš„æ•°æ®ã€‚åœ¨å¯¹å¤–éƒ¨è¡¨æ‰§è¡Œåˆ é™¤æ“ä½œæ—¶ï¼Œåªæ˜¯åˆ é™¤æ‰æè¿°è¡¨çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå¹¶ä¸ä¼šåˆ é™¤è¡¨æ•°æ®ã€‚</p>
<h5 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h5><ul>
<li>å†…éƒ¨è¡¨æ•°æ®ç”±Hiveè‡ªèº«ç®¡ç†ï¼Œå¤–éƒ¨è¡¨æ•°æ®ç”±HDFSç®¡ç†ï¼›</li>
<li>å†…éƒ¨è¡¨æ•°æ®å­˜å‚¨çš„ä½ç½®æ˜¯hive.metastore.warehouse.dirï¼ˆé»˜è®¤ï¼š/user/hive/warehouseï¼‰ï¼Œå¤–éƒ¨è¡¨æ•°æ®çš„å­˜å‚¨ä½ç½®ç”±è‡ªå·±åˆ¶å®šï¼›</li>
<li>åˆ é™¤å†…éƒ¨è¡¨ä¼šç›´æ¥åˆ é™¤å…ƒæ•°æ®ï¼ˆmetadataï¼‰åŠå­˜å‚¨æ•°æ®ï¼›åˆ é™¤å¤–éƒ¨è¡¨ä»…ä»…ä¼šåˆ é™¤å…ƒæ•°æ®ï¼ŒHDFSä¸Šçš„æ–‡ä»¶å¹¶ä¸ä¼šè¢«åˆ é™¤ï¼›</li>
<li>å¯¹å†…éƒ¨è¡¨çš„ä¿®æ”¹ä¼šå°†ä¿®æ”¹ç›´æ¥åŒæ­¥ç»™å…ƒæ•°æ®ï¼Œè€Œå¯¹å¤–éƒ¨è¡¨çš„è¡¨ç»“æ„å’Œåˆ†åŒºè¿›è¡Œä¿®æ”¹ï¼Œåˆ™éœ€è¦ä¿®å¤ï¼ˆMSCK REPAIR TABLE table_name;ï¼‰</li>
</ul>
<h4 id="3-4-Partitioned-Tables"><a href="#3-4-Partitioned-Tables" class="headerlink" title="3.4 Partitioned Tables"></a><span id="jump3.4">3.4 Partitioned Tables</span></h4><p>å¦å¤–å…³äºåˆ†åŒºè¡¨çš„å†…å®¹è§ <a href="#jump4.4">4.4 åˆ†åŒºè¡¨ï¼ˆPartitioned Tablesï¼‰</a></p>
<p>å¯ä»¥ä½¿ç”¨ PARTITIONED BY å­å¥åˆ›å»ºåˆ†åŒºè¡¨ã€‚ ä¸€ä¸ªè¡¨å¯ä»¥å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†åŒºåˆ—ï¼Œå¹¶ä¸ºåˆ†åŒºåˆ—ä¸­çš„æ¯ä¸ªä¸åŒå€¼ç»„åˆåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„æ•°æ®ç›®å½•ã€‚ æ­¤å¤–ï¼Œå¯ä»¥ä½¿ç”¨CLUSTERED BYåˆ—å¯¹è¡¨æˆ–åˆ†åŒºè¿›è¡Œå­˜å‚¨ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡SORT BYåˆ—åœ¨è¯¥å­˜å‚¨åŒºä¸­å¯¹æ•°æ®è¿›è¡Œæ’åºï¼ˆtables or partitions can be bucketed using CLUSTERED BY columns, and data can be sorted within that bucket via SORT BY columns. ï¼‰ã€‚ è¿™æ ·å¯ä»¥æé«˜æŸäº›æŸ¥è¯¢çš„æ€§èƒ½ã€‚</p>
<blockquote>
<p>æ›´å¤šå…³äºbucket çš„å†…å®¹è§ <a href="#jump4.5">4.5 åˆ†æ¡¶è¡¨ï¼ˆBucket Tablesï¼‰ </a></p>
</blockquote>
<p>å¦‚æœåœ¨åˆ›å»ºåˆ†åŒºè¡¨æ—¶æ”¶åˆ°ä»¥ä¸‹é”™è¯¯æ¶ˆæ¯ï¼šâ€œ FAILED: Error in semantic analysis: Column repeated in partitioning columnsâ€ï¼Œåˆ™è¡¨ç¤ºæ‚¨è¯•å›¾å°†åˆ†åŒºåˆ—åŒ…å«åœ¨è¡¨æœ¬èº«çš„æ•°æ®ä¸­ã€‚ æ‚¨å¯èƒ½ç¡®å®å®šä¹‰äº†è¯¥åˆ—ã€‚ ä½†æ˜¯ï¼Œæ‚¨åˆ›å»ºçš„åˆ†åŒºå°†åˆ›å»ºä¸€ä¸ªå¯æŸ¥è¯¢çš„ä¼ªåˆ—ï¼Œå› æ­¤æ‚¨å¿…é¡»å°†è¡¨åˆ—é‡å‘½åä¸ºå…¶ä»–åç§°ï¼ˆç”¨æˆ·ä¸åº”åœ¨å…¶ä¸ŠæŸ¥è¯¢ï¼ï¼‰ã€‚</p>
<p>(You probably really do have the column defined. However, the partition you create makes a pseudocolumn on which you can query, so you must rename your table column to something else (that users should not query on!).)</p>
<p>ä¾‹å¦‚ï¼Œå‡è®¾åŸå§‹æœªåˆ†åŒºè¡¨å…·æœ‰ä¸‰åˆ—ï¼šidï¼Œdateå’Œnameã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">id int,</span><br><span class="line">date date,</span><br><span class="line">name varchar</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æ‚¨è¦æŒ‰æ—¥æœŸåˆ†åŒºã€‚ æ‚¨çš„Hiveå®šä¹‰å¯ä»¥ä½¿ç”¨â€œ dtDontQueryâ€ä½œä¸ºåˆ—åï¼Œä»¥ä¾¿å¯ä»¥å°†â€œ dateâ€ç”¨äºåˆ†åŒºï¼ˆå’ŒæŸ¥è¯¢ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table table_name ( </span><br><span class="line">	id int,</span><br><span class="line">	dtDontQuery string,</span><br><span class="line">	name string</span><br><span class="line">)</span><br><span class="line">partitioned by (date string)</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œæ‚¨çš„ç”¨æˆ·ä»å°†æŸ¥è¯¢<code>where date =&#39;...&#39;</code>ï¼Œä½†ç¬¬äºŒåˆ—dtDontQueryå°†ä¿ç•™åŸå§‹å€¼ã€‚</p>
<h4 id="3-5-æ³•ä¸€ï¼šç›´æ¥å»ºè¡¨æ³•"><a href="#3-5-æ³•ä¸€ï¼šç›´æ¥å»ºè¡¨æ³•" class="headerlink" title="3.5 æ³•ä¸€ï¼šç›´æ¥å»ºè¡¨æ³•"></a>3.5 æ³•ä¸€ï¼šç›´æ¥å»ºè¡¨æ³•</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> table_name(col_name data_type);</span><br></pre></td></tr></table></figure>
<h5 id="3-5-1-ä¾‹å­ï¼šåˆ›å»ºå†…éƒ¨è¡¨"><a href="#3-5-1-ä¾‹å­ï¼šåˆ›å»ºå†…éƒ¨è¡¨" class="headerlink" title="3.5.1 ä¾‹å­ï¼šåˆ›å»ºå†…éƒ¨è¡¨"></a>3.5.1 ä¾‹å­ï¼šåˆ›å»ºå†…éƒ¨è¡¨</h5><p>å¦‚ä¸‹ï¼šæ ¹æ®ä¸Šè¿°æ–‡ä»¶å†…å®¹(è§<a href="#jump3.1">3.1 row format</a>)ï¼Œåˆ›å»ºä¸€ä¸ªè¡¨t1</p>
<h6 id="1-åˆ›å»ºè¡¨"><a href="#1-åˆ›å»ºè¡¨" class="headerlink" title="1. åˆ›å»ºè¡¨"></a>1. åˆ›å»ºè¡¨</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t1(</span><br><span class="line">    <span class="keyword">id</span>      <span class="built_in">int</span>,</span><br><span class="line">    <span class="keyword">name</span>    <span class="keyword">string</span>,</span><br><span class="line">    hobby   <span class="built_in">array</span>&lt;<span class="keyword">string</span>&gt;,</span><br><span class="line">    <span class="keyword">add</span>     <span class="keyword">map</span>&lt;<span class="keyword">String</span>,<span class="keyword">string</span>&gt;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span></span><br><span class="line"><span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span></span><br><span class="line">collection items <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'-'</span></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">keys</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">':'</span></span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p> <img src="/2020/01/12/Hiveä»‹ç»/1603599880662.png" alt="1603599880662"></p>
<h6 id="2-æŸ¥çœ‹è¡¨çš„æè¿°"><a href="#2-æŸ¥çœ‹è¡¨çš„æè¿°" class="headerlink" title="2.æŸ¥çœ‹è¡¨çš„æè¿°"></a>2.æŸ¥çœ‹è¡¨çš„æè¿°</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">desc t1;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603599824805.png" alt="1603599824805"></p>
<h6 id="3-è£…è½½æ•°æ®"><a href="#3-è£…è½½æ•°æ®" class="headerlink" title="3. è£…è½½æ•°æ®"></a><span id="jump3.5.1.3">3. è£…è½½æ•°æ®</span></h6><p>æ³¨ï¼šä¸€èˆ¬å¾ˆå°‘ç”¨insert ï¼ˆä¸æ˜¯insert overwriteï¼‰è¯­å¥ï¼Œå› ä¸ºå°±ç®—å°±ç®—æ’å…¥ä¸€æ¡æ•°æ®ï¼Œä¹Ÿä¼šè°ƒç”¨MapReduceï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©Load Dataçš„æ–¹å¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">LOAD DATA [LOCAL] INPATH &apos;filepath&apos; [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 ...)]</span><br></pre></td></tr></table></figure>
<p>Hive 3.0ä¹‹å‰çš„åŠ è½½æ“ä½œæ˜¯çº¯å¤åˆ¶/ç§»åŠ¨æ“ä½œï¼Œå°†æ•°æ®æ–‡ä»¶ç§»åŠ¨åˆ°ä¸Hiveè¡¨ç›¸å¯¹åº”çš„ä½ç½®</p>
<ul>
<li><em>filepath</em> can be:<ul>
<li>a relative path, such as project/data1</li>
<li>an absolute path, such as /user/hive/project/data1</li>
<li>a full URI with scheme and (optionally) an authority, such as hdfs://namenode:9000/user/hive/project/data1</li>
</ul>
</li>
<li>The target being loaded to can be a table or a partition. If the table is partitioned, then one must specify a specific partition of the table by specifying values for all of the partitioning columns.</li>
<li><em>filepath</em> å¯ä»¥æŒ‡å‘æ–‡ä»¶ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒHiveä¼šå°†æ–‡ä»¶ç§»è‡³è¡¨ä¸­ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›®å½•ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒHiveä¼šå°†ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ç§»è‡³è¡¨ä¸­ï¼‰ã€‚ In either case, <em>filepath</em> addresses a set of files.</li>
<li>å¦‚æœæŒ‡å®šäº†å…³é”®å­— LOCALï¼Œåˆ™<ul>
<li>loadå‘½ä»¤å°†åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­æŸ¥æ‰¾æ–‡ä»¶è·¯å¾„ã€‚ å¦‚æœæŒ‡å®šçš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå®ƒå°†ç›¸å¯¹äºç”¨æˆ·çš„å½“å‰å·¥ä½œç›®å½•è¿›è¡Œè§£é‡Šã€‚ ç”¨æˆ·ä¹Ÿå¯ä»¥ä¸ºæœ¬åœ°æ–‡ä»¶æŒ‡å®šå®Œæ•´çš„URI - for example: <code>file:///user/hive/project/data1</code></li>
<li>the load command will try to copy all the files addressed by <em>filepath</em> to the target filesystem. The target file system is inferred by looking at the location attribute of the table. The copied data files will then be moved to the table.</li>
</ul>
</li>
<li>å¦‚æœæœªæŒ‡å®šå…³é”®å­— LOCALï¼Œåˆ™Hiveå°†ä½¿ç”¨æ–‡ä»¶è·¯å¾„çš„å®Œæ•´URIï¼ˆå¦‚æœå·²æŒ‡å®šï¼‰ï¼Œæˆ–å°†åº”ç”¨ä»¥ä¸‹è§„åˆ™ï¼š<ul>
<li>If scheme or authority are not specified, Hive will use the scheme and authority from the hadoop configuration variable <code>fs.default.name</code> that specifies the Namenode URI.</li>
<li>If the path is not absolute, then Hive will interpret it relative to <code>/user/&lt;username&gt;</code></li>
<li>Hive will <em>move</em> the files addressed by <em>filepath</em> into the table (or partition)</li>
</ul>
</li>
<li>å¦‚æœä½¿ç”¨äº† OVERWRITE å…³é”®å­—ï¼Œthen the contents of the target table (or partition) will be deleted and replaced by the files referred to by filepathï¼› å¦åˆ™ï¼ŒfilepathæŒ‡å‘çš„æ–‡ä»¶å°†è¢«æ·»åŠ åˆ°è¡¨ä¸­ã€‚</li>
</ul>
<hr>
<blockquote>
<p>å‚è€ƒã€ŠHadoopæ„å»ºæ•°æ®ä»“åº“å®è·µã€‹</p>
</blockquote>
<h6 id="3-3-1-å‘éåˆ†åŒºè¡¨ä¸­è£…è½½æ•°æ®"><a href="#3-3-1-å‘éåˆ†åŒºè¡¨ä¸­è£…è½½æ•°æ®" class="headerlink" title="3.3.1 å‘éåˆ†åŒºè¡¨ä¸­è£…è½½æ•°æ®"></a>3.3.1 å‘éåˆ†åŒºè¡¨ä¸­è£…è½½æ•°æ®</h6><p><strong>ï¼ˆ1ï¼‰ä½¿ç”¨ LOAD</strong></p>
<p>å…ˆå‡†å¤‡ä¸€ä¸ªæœ¬åœ°æ–‡æœ¬æ–‡ä»¶ a.txtï¼Œå…¶ä¸­åªæœ‰ä¸€è¡Œè®°å½• â€˜aaaâ€™.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir test</span><br><span class="line">cd test</span><br><span class="line">echo &apos;aaa&apos; &gt; a.txt</span><br></pre></td></tr></table></figure>
<p>å°†è¿™è¡Œè®°å½•è£…è½½åˆ°ä¸€ä¸ªè¡¨ä¸­ï¼Œå¹¶æŸ¥çœ‹HDFSä¸Šç”Ÿæˆçš„æ•°æ®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hive&gt; use test;</span><br><span class="line">hive&gt; drop table if exists t1;</span><br><span class="line">hive&gt; create table t1(name string);</span><br><span class="line">hive&gt; load data local inpath &apos;/root/test&apos; into table t1;</span><br><span class="line">hive&gt; select * from t1;</span><br><span class="line">aaa</span><br><span class="line">hive&gt; dfs -ls /user/hive/warehouse/test.db/t1;</span><br><span class="line">Found 1 items</span><br><span class="line">-rwxrwxrwt	3	root	hive	4	2016-10-20	13:52	/user/hive/warehouse/test.db/t1/a.txt</span><br><span class="line">hive&gt; dfs -cat /user/hive/warehouse/test.db/t1/a.txt;</span><br><span class="line">aaa</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œhiveå‘½ä»¤è¡Œä¸­é™¤äº†å¯ä»¥æ‰§è¡ŒHiveQLè¯­å¥ï¼Œè¿˜å¯ä»¥æ‰§è¡ŒHadoopçš„dfså‘½ä»¤ã€‚<strong>Loadè¯­å¥å®é™…æ‰§è¡Œäº†ä¸€ä¸ªå¤åˆ¶æ–‡ä»¶çš„æ“ä½œ</strong>ã€‚é€šå¸¸æˆ‘ä»¬åœ¨loadè¯­å¥ä¸­æŒ‡å®šçš„è·¯å¾„æ˜¯ä¸€ä¸ªç›®å½•ï¼Œè€Œä¸æ˜¯å•ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚Hiveä¼šå°†è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¤åˆ¶åˆ°ç›®æ ‡ä½ç½®ã€‚è¿™ä½¿å¾—ç”¨æˆ·å°†æ›´æ–¹ä¾¿åœ°ç»„ç»‡æ•°æ®åˆ°å¤šä¸ªæ–‡ä»¶ä¸­ï¼ŒåŒæ—¶å¯ä»¥åœ¨ä¸ä¿®æ”¹Hiveè„šæœ¬çš„å‰æä¸‹ä¿®æ”¹æ–‡ä»¶å‘½åè§„åˆ™ã€‚æ–‡ä»¶ä¼šè¢«å¤åˆ¶åˆ°ç›®æ ‡è·¯å¾„ä¸‹è€Œä¸”æ–‡ä»¶åä¿æŒä¸å˜ã€‚</p>
<p>ä¸Šé¢çš„HiveQLè¯­å¥å‘t1è¡¨ä¸­è£…è½½äº†æ•°æ®â€™aaaâ€™ï¼Œå¹¶åœ¨é»˜è®¤çš„æ•°æ®ä»“åº“ç›®å½•ä¸‹ç”Ÿæˆäº†æ•°æ®æ–‡ä»¶ /user/hive/warehouse/test.db/t1/a.txtï¼Œå®é™…ä¸Šæ•°æ®æ–‡ä»¶æ˜¯çº¯æ–‡æœ¬æ ¼å¼ï¼Œå†…å®¹å°±æ˜¯ â€˜aaaâ€™ã€‚</p>
<p>åœ¨æœ¬åœ°æ–‡ä»¶a.txtä¸­æ·»åŠ ä¸€è¡Œâ€™bbbâ€™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo &apos;bbb&apos; &gt;&gt; a.txt</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†æ‰§è¡Œä¸‹é¢çš„HiveQLè¯­å¥å¹¶æŸ¥çœ‹ç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hive&gt; load data local inpath &apos;/root/test&apos; into table t1;</span><br><span class="line">hive&gt; select * from t1;</span><br><span class="line">aaa</span><br><span class="line">aaa</span><br><span class="line">bbb</span><br><span class="line">hive&gt; dfs -ls /user/hive/warehouse/test.db/t1;</span><br><span class="line">Found 2 items</span><br><span class="line">-rwxrwxrwt	3	root	hive	4	2016-10-20	13:52	/user/hive/warehouse/test.db/t1/a.txt</span><br><span class="line">-rwxrwxrwt	3	root	hive	8	2016-10-20	14:18	/user/hive/warehouse/test.db/t1/a_copy_1.txt</span><br><span class="line">hive&gt; dfs -cat /user/hive/warehouse/test.db/t1/a.txt;</span><br><span class="line">aaa</span><br><span class="line">hive&gt; dfs -cat /user/hive/warehouse/test.db/t1/a_copy_1.txt;</span><br><span class="line">aaa</span><br><span class="line">bbb</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨è¡¨ä¸­æœ‰3æ¡æ•°æ®ï¼Œå¹¶ä¸”æ–°ç”Ÿæˆäº†æ•°æ®æ–‡ä»¶a_copy_1.txtã€‚åŸæ¥çš„a.txtæ–‡ä»¶ä¸­çš„å†…å®¹è¿˜æ˜¯â€™aaaâ€™ï¼Œæ–°ç”Ÿæˆçš„a_copy_1.txtæ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯ç¬¬äºŒæ¬¡è£…è½½çš„ä¸¤è¡Œæ•°æ®ã€‚å³ï¼Œæ¯æ¬¡è£…è½½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œå¦‚æœç›®å½•ä¸­è£…è½½çš„æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆå†æ¬¡è£…è½½ä¼šç”Ÿæˆä¸€ä¸ªåŸæ–‡ä»¶çš„å¤åˆ¶ï¼Œè¡¨ä¸­æ•°æ®å¯¹åº”çš„æ˜¯è¡¨ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰ä½¿ç”¨ LOAD OVERWRITE</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hive&gt; drop table if exists t2;</span><br><span class="line">hive&gt; create table t2(name string);</span><br><span class="line">hive&gt; load data local inpath &apos;/root/test&apos; overwrite into table t2;</span><br><span class="line">hive&gt; select * from t2;</span><br><span class="line">aaa</span><br><span class="line">bbb</span><br><span class="line">hive&gt; dfs -ls /user/hive/warehouse/test.db/t2;</span><br><span class="line">Found 1 items</span><br><span class="line">-rwxrwxrwt	3	root	hive	8	2016-10-20	14:43	/user/hive/warehouse/test.db/t2/a.txt</span><br><span class="line">hive&gt; dfs -cat /user/hive/warehouse/test.db/t2/a.txt;</span><br><span class="line">aaa</span><br><span class="line">bbb</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨t2è¡¨ä¸­åªæœ‰ä¸¤æ¡æ•°æ®ï¼Œåœ¨è¡¨ç›®å½•ä¸‹ç”Ÿæˆäº†æ•°æ®æ–‡ä»¶a.txtã€‚ç°åœ¨ç¼–è¾‘æœ¬åœ°æ–‡ä»¶a.txtï¼Œä½¿å…¶åªæœ‰ä¸€è¡Œâ€™cccâ€™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo &apos;ccc&apos; &gt; a.txt</span><br></pre></td></tr></table></figure>
<p>å†æ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hive&gt; load data local inpath &apos;/root/test&apos; overwrite into table t2;</span><br><span class="line">hive&gt; select * from t2;</span><br><span class="line">ccc</span><br><span class="line">hive&gt; dfs -ls /user/hive/warehouse/test.db/t2;</span><br><span class="line">Found 1 items</span><br><span class="line">-rwxrwxrwt	3	root	hive	4	2016-10-20	14:50	/user/hive/warehouse/test.db/t2/a.txt</span><br><span class="line">hive&gt; dfs -cat /user/hive/warehouse/test.db/t2/a.txt;</span><br><span class="line">ccc</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨è¡¨ä¸­åªæœ‰ä¸€æ¡æ•°æ®â€™cccâ€™ï¼Œæ•°æ®æ–‡ä»¶åæ²¡å˜ï¼Œä½†å…¶å†…å®¹é‡æ–°ç”Ÿæˆã€‚</p>
<h6 id="3-3-2-å‘åˆ†åŒºè¡¨ä¸­è£…è½½æ•°æ®"><a href="#3-3-2-å‘åˆ†åŒºè¡¨ä¸­è£…è½½æ•°æ®" class="headerlink" title="3.3.2 å‘åˆ†åŒºè¡¨ä¸­è£…è½½æ•°æ®"></a>3.3.2 å‘åˆ†åŒºè¡¨ä¸­è£…è½½æ•°æ®</h6><p><strong>ï¼ˆ1ï¼‰load</strong></p>
<p>å‡†å¤‡æœ¬åœ°æ–‡æœ¬æ–‡ä»¶a.txtï¼Œå…¶ä¸­åªæœ‰ä¸€è¡Œâ€™aaaâ€™ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hive&gt; create table  t1(name string) partitioned by (country string, state string);</span><br><span class="line">hive&gt; dfs -ls /user/hive/warehouse/test.db/t1;</span><br><span class="line">hive&gt; load data local inpath &apos;/root/test&apos; into table t1 partition (country=&apos;us&apos;, state=&apos;ca&apos;);</span><br><span class="line">hive&gt; select * from t1;</span><br><span class="line">aaa	us	ca</span><br><span class="line">hive&gt; dfs -ls /user/hive/warehouse/test.db/t1/country=us/state=ca;</span><br><span class="line">Found 1 items</span><br><span class="line">-rwxrwxrwt	3	root	hive	4	2016-10-20	15:10	/user/hive/warehouse/test.db/t1/country=us/state=ca/a.txt</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå»ºç«‹t1è¡¨åï¼Œè£…è½½æ•°æ®å‰ï¼Œè¡¨ç›®å½•ä¸‹æ²¡æœ‰ä»»ä½•æ–‡ä»¶ã€‚<strong>loadè¯­å¥åˆ›å»ºäº†åˆ†åŒºç›®å½•country=us/state=caï¼Œå¹¶å°†æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°åˆ†åŒºç›®å½•ä¸‹</strong>ã€‚ä»æŸ¥è¯¢çš„è§’åº¦çœ‹ï¼Œ<strong>å‘t1è¡¨ä¸­è£…è½½äº†æ•°æ®â€™aaaâ€™</strong>ã€‚<strong>æŸ¥è¯¢ç»“æœæ˜¾ç¤ºäº†ä¸‰åˆ—ï¼Œé™¤äº†åŸå§‹çš„æ–‡æœ¬æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œè¿˜åŒ…æ‹¬äº†ä¸¤ä¸ªåˆ†åŒºåˆ—çš„å€¼ã€‚åˆ†åŒºåˆ—æ€»æ˜¯åœ¨è¡¨çš„æœ€åæ˜¾ç¤º</strong>ã€‚</p>
<p>load overwriteè£…è½½æ•°æ®ä¸éåˆ†åŒºè¡¨ç±»ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰alter table tablename add partition</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hive&gt; alter table t1 add partition(country=&apos;us&apos;, state=&apos;cb&apos;) location &apos;/a&apos;;</span><br><span class="line">hive&gt; dfs -ls /user/hive/warehouse/test.db/t1/country=us;</span><br><span class="line">Found 1 items</span><br><span class="line">drwxrwxrwt	-	root	hive	0	2016-10-20	15:40	/user/hive/warehouse/test.db/t1/country=us/state=ca</span><br><span class="line">hive&gt; select * from t1;</span><br><span class="line">aaa	us	ca</span><br><span class="line">hive&gt; dfs -cp /user/hive/warehouse/test.db/t1/country=us/state=ca/a.txt /a;</span><br><span class="line">hive&gt; select * from t1;</span><br><span class="line">aaa	us	ca</span><br><span class="line">aaa	us	cb</span><br><span class="line">hive&gt; dfs -ls /user/hive/warehouse/test.db/t1/country=us;</span><br><span class="line">Found 1 items</span><br><span class="line">drwxrwxrwt	-	root	hive	0	2016-10-20	15:40	/user/hive/warehouse/test.db/t1/country=us/state=ca</span><br><span class="line">hive&gt; dfs -ls /a;</span><br><span class="line">Found 1 items</span><br><span class="line">-rw-r--r--	3	root	supergroup	4	2016-10-20	15:41	/a/a.txt</span><br><span class="line">hive&gt; dfs -rm /user/hive/warehouse/test.db/t1/country=us/state=ca/a.txt;</span><br><span class="line">hive&gt; select * from t1;</span><br><span class="line">aaa	us	cb</span><br></pre></td></tr></table></figure>
<p>è¯´æ˜ï¼šè¡¨ä¸­åŸæœ‰ä¸€æ¡æ•°æ®â€™aaaâ€™ã€‚æ·»åŠ ä¸€ä¸ªæ–°åˆ†åŒºï¼Œå¹¶æŒ‡å®šä½ç½®ä¸ºâ€™/aâ€™ã€‚æŠŠå·²ç»å­˜åœ¨çš„æ•°æ®æ–‡ä»¶a.txtå¤åˆ¶åˆ°ç›®å½•â€™/aâ€™é‡Œã€‚æ­¤æ—¶æŸ¥è¯¢å·²ç»æœ‰å±äºä¸åŒåˆ†åŒºçš„ä¸¤æ¡æ•°æ®ã€‚åˆ é™¤country=â€™usâ€™ä¸”state=â€™caâ€™åˆ†åŒºçš„æ•°æ®æ–‡ä»¶ã€‚æ­¤æ—¶æŸ¥è¯¢è¡¨åªæœ‰å±äºcountry=â€™usâ€™ä¸”state=â€™cbâ€™åˆ†åŒºçš„ä¸€æ¡æ•°æ®ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­HDFSä¸­éƒ½æ²¡æœ‰å­˜åœ¨è¿‡coutry=us/state=cbçš„ç›®å½•ã€‚</p>
<p><strong>å¯¹Hiveè¡¨çš„æ•°æ®è£…è½½ç‰¹æ€§æ€»ç»“å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>loadä¸load overwriteçš„åŒºåˆ«æ˜¯ï¼š<ul>
<li>loadï¼šæ¯æ¬¡æ‰§è¡Œä¼šç”Ÿæˆæ–°çš„æ•°æ®æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­æ˜¯æœ¬æ¬¡è£…è½½çš„æ•°æ®ï¼Œè¡¨ä¸­æ•°æ®å¯¹åº”çš„æ˜¯è¡¨ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹ã€‚</li>
<li>load overwriteï¼šè‹¥è¡¨ï¼ˆæˆ–åˆ†åŒºï¼‰çš„æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨åˆ™ç”Ÿæˆï¼Œå­˜åœ¨åˆ™é‡æ–°ç”Ÿæˆæ•°æ®æ–‡ä»¶å†…å®¹ï¼ˆè¦†ç›–æ‰ä»¥å‰çš„ï¼‰ã€‚</li>
</ul>
</li>
<li>åˆ†åŒºè¡¨æ¯”éåˆ†åŒºè¡¨å¤šäº†ä¸€ç§alter table â€¦ add partitionçš„æ•°æ®è£…è½½æ–¹å¼</li>
<li>å¯¹äºåˆ†åŒºè¡¨ï¼ˆæ— è®ºå†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ï¼‰ï¼Œloadä¸load overwriteä¼šè‡ªåŠ¨å»ºç«‹åä¸ºåˆ†åŒºé”®å€¼çš„ç›®å½•ï¼Œè€Œalter table â€¦ add partitionï¼Œåªè¦ç”¨locationæŒ‡å®šæ•°æ®æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•å³å¯ã€‚</li>
<li>å¯¹äºå¤–éƒ¨è¡¨ï¼Œé™¤äº†åœ¨åˆ é™¤è¡¨æ—¶åªåˆ é™¤å…ƒæ•°æ®è€Œä¿ç•™è¡¨æ•°æ®ç›®å½•å¤–ï¼Œå…¶æ•°æ®è£…è½½è¡Œä¸ºä¸å†…éƒ¨è¡¨ç›¸åŒã€‚</li>
</ul>
<hr>
<p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç²˜è´´ä¸Šè¿°è®°å½•ï¼Œå¹¶ä¸Šè½½å³å¯ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603600131112.png" alt="1603600131112"></p>
<p>ç„¶åä¸Šè½½</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">load data local inpath &apos;/home/hadoop/Desktop/data&apos; overwrite into table t1;</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹è¡¨å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from t1;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603600188322.png" alt="1603600188322"></p>
<h6 id="4-æŸ¥çœ‹æ–‡ä»¶ä½ç½®"><a href="#4-æŸ¥çœ‹æ–‡ä»¶ä½ç½®" class="headerlink" title="4. æŸ¥çœ‹æ–‡ä»¶ä½ç½®"></a>4. æŸ¥çœ‹æ–‡ä»¶ä½ç½®</h6><p>t1è¡¨åœ¨å“ªå„¿å‘¢ï¼Ÿåœ¨æˆ‘ä»¬ä¹‹å‰é…ç½®çš„é»˜è®¤è·¯å¾„é‡Œï¼ˆ/user/hive/warehouseï¼‰</p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603609902727.png" alt="1603609902727"></p>
<p>é€šè¿‡å‘½ä»¤è¡Œè·å–ä½ç½®ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">desc formatted table_name;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603610044780.png" alt="1603610044780"></p>
<h6 id="5-åˆ é™¤å†…éƒ¨è¡¨"><a href="#5-åˆ é™¤å†…éƒ¨è¡¨" class="headerlink" title="5. åˆ é™¤å†…éƒ¨è¡¨"></a>5. åˆ é™¤å†…éƒ¨è¡¨</h6><p><img src="/2020/01/12/Hiveä»‹ç»/1603610161316.png" alt="1603610161316"></p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603610193337.png" alt="1603610193337"></p>
<p>è§‚å¯ŸHDFSä¸Šçš„æ–‡ä»¶ï¼Œå‘ç°t1å·²ç»ä¸åœ¨äº†</p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603610402205.png" alt="1603610402205"></p>
<ul>
<li></li>
</ul>
<h5 id="3-5-2-ä¾‹å­ï¼šåˆ›å»ºå¤–éƒ¨è¡¨"><a href="#3-5-2-ä¾‹å­ï¼šåˆ›å»ºå¤–éƒ¨è¡¨" class="headerlink" title="3.5.2 ä¾‹å­ï¼šåˆ›å»ºå¤–éƒ¨è¡¨"></a>3.5.2 ä¾‹å­ï¼šåˆ›å»ºå¤–éƒ¨è¡¨</h5><h6 id="1-åˆ›å»ºè¡¨-1"><a href="#1-åˆ›å»ºè¡¨-1" class="headerlink" title="1. åˆ›å»ºè¡¨"></a>1. åˆ›å»ºè¡¨</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">external</span> <span class="keyword">table</span> t2(</span><br><span class="line">    <span class="keyword">id</span>      <span class="built_in">int</span></span><br><span class="line">   ,<span class="keyword">name</span>    <span class="keyword">string</span></span><br><span class="line">   ,hobby   <span class="built_in">array</span>&lt;<span class="keyword">string</span>&gt;</span><br><span class="line">   ,<span class="keyword">add</span>     <span class="keyword">map</span>&lt;<span class="keyword">String</span>,<span class="keyword">string</span>&gt;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span></span><br><span class="line"><span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span></span><br><span class="line">collection items <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'-'</span></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">keys</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">':'</span></span><br><span class="line">location <span class="string">'/user/t2'</span></span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603600496450.png" alt="1603600496450"></p>
<h6 id="2-è£…è½½æ•°æ®"><a href="#2-è£…è½½æ•°æ®" class="headerlink" title="2. è£…è½½æ•°æ®"></a>2. è£…è½½æ•°æ®</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">load data local inpath &apos;/home/hadoop/Desktop/data&apos; overwrite into table t2;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603600549196.png" alt="1603600549196"></p>
<h6 id="3-æŸ¥çœ‹æ–‡ä»¶ä½ç½®"><a href="#3-æŸ¥çœ‹æ–‡ä»¶ä½ç½®" class="headerlink" title="3. æŸ¥çœ‹æ–‡ä»¶ä½ç½®"></a>3. æŸ¥çœ‹æ–‡ä»¶ä½ç½®</h6><p>åœ¨/user/ç›®å½•ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°t2æ–‡ä»¶</p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603609992170.png" alt="1603609992170"></p>
<p>é€šè¿‡å‘½ä»¤è¡Œè·å¾—ä½ç½®ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">desc formatted table_name;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603610068333.png" alt="1603610068333"></p>
<h6 id="4-åˆ é™¤å¤–éƒ¨è¡¨"><a href="#4-åˆ é™¤å¤–éƒ¨è¡¨" class="headerlink" title="4. åˆ é™¤å¤–éƒ¨è¡¨"></a>4. åˆ é™¤å¤–éƒ¨è¡¨</h6><p><img src="/2020/01/12/Hiveä»‹ç»/1603610449476.png" alt="1603610449476"></p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603610471246.png" alt="1603610471246"></p>
<p>è§‚å¯ŸHDFSä¸Šçš„æ–‡ä»¶ï¼Œt2ä»ç„¶å­˜åœ¨</p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603610518016.png" alt="1603610518016"></p>
<p>å› è€Œåˆ é™¤å¤–éƒ¨è¡¨ä»…ä»…ä¼šåˆ é™¤å…ƒæ•°æ®ã€‚</p>
<p>é‡æ–°åˆ›å»ºå¤–éƒ¨è¡¨t2</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create external table t2(</span><br><span class="line">    id      int</span><br><span class="line">   ,name    string</span><br><span class="line">   ,hobby   array&lt;string&gt;</span><br><span class="line">   ,add     map&lt;String,string&gt;</span><br><span class="line">)</span><br><span class="line">row format delimited</span><br><span class="line">fields terminated by &apos;,&apos;</span><br><span class="line">collection items terminated by &apos;-&apos;</span><br><span class="line">map keys terminated by &apos;:&apos;</span><br><span class="line">location &apos;/user/t2&apos;</span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603610616445.png" alt="1603610616445"></p>
<p>ä¸å¾€é‡Œé¢æ’å…¥æ•°æ®ï¼Œæˆ‘ä»¬select * çœ‹çœ‹ç»“æœ</p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603610644871.png" alt="1603610644871"></p>
<p>å¯è§æ•°æ®ä»ç„¶åœ¨ï¼</p>
<h4 id="3-6-æ³•äºŒï¼šæŸ¥è¯¢å»ºè¡¨æ³•ï¼ˆCreate-Table-As-Select-CTAS-ï¼‰"><a href="#3-6-æ³•äºŒï¼šæŸ¥è¯¢å»ºè¡¨æ³•ï¼ˆCreate-Table-As-Select-CTAS-ï¼‰" class="headerlink" title="3.6 æ³•äºŒï¼šæŸ¥è¯¢å»ºè¡¨æ³•ï¼ˆCreate Table As Select (CTAS)ï¼‰"></a>3.6 æ³•äºŒï¼šæŸ¥è¯¢å»ºè¡¨æ³•ï¼ˆCreate Table As Select (CTAS)ï¼‰</h4><p>é€šè¿‡AS æŸ¥è¯¢è¯­å¥å®Œæˆå»ºè¡¨ï¼š<strong>å°†å­æŸ¥è¯¢çš„ç»“æœå­˜åœ¨æ–°è¡¨é‡Œï¼Œæœ‰æ•°æ®</strong><br>ä¸€èˆ¬ç”¨äºä¸­é—´è¡¨ã€‚</p>
<p>å¯ä»¥é€šè¿‡ä¸€ä¸ªcreate-table-as-selectï¼ˆCTASï¼‰è¯­å¥ä¸­çš„æŸ¥è¯¢ç»“æœæ¥åˆ›å»ºå’Œå¡«å……è¡¨ã€‚ CTASåˆ›å»ºçš„è¡¨æ˜¯åŸå­è¡¨ï¼Œè¿™æ„å‘³ç€åœ¨å¡«å……æ‰€æœ‰æŸ¥è¯¢ç»“æœä¹‹å‰ï¼Œå…¶ä»–ç”¨æˆ·ä¸ä¼šçœ‹åˆ°è¯¥è¡¨ã€‚å› æ­¤ï¼Œå…¶ä»–ç”¨æˆ·è¦ä¹ˆçœ‹åˆ°åŒ…å«å®Œæ•´æŸ¥è¯¢ç»“æœçš„è¡¨ï¼Œè¦ä¹ˆæ ¹æœ¬çœ‹ä¸åˆ°è¡¨ã€‚</p>
<p>CTASæœ‰ä¸¤éƒ¨åˆ†ï¼ŒSELECTéƒ¨åˆ†å¯ä»¥æ˜¯HiveQLæ”¯æŒçš„ä»»ä½•SELECTè¯­å¥ ( <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Select" target="_blank" rel="noopener">SELECT statement</a>)ï¼› CREATEéƒ¨åˆ†ä»SELECTéƒ¨åˆ†è·å–ç»“æœæ¨¡å¼ï¼Œå¹¶ä½¿ç”¨å…¶ä»–è¡¨å±æ€§ï¼ˆä¾‹å¦‚SerDeå’Œå­˜å‚¨æ ¼å¼ï¼‰åˆ›å»º<strong>ç›®æ ‡è¡¨</strong>ã€‚( The CREATE part of the CTAS takes the resulting schema from the SELECT part and creates the target table with other table properties such as the SerDe and storage format.)</p>
<p>ä»Hive 3.2.0å¼€å§‹ï¼ŒCTASè¯­å¥å¯ä»¥ä¸ºç›®æ ‡è¡¨å®šä¹‰åˆ†åŒºè§„èŒƒã€‚(can define a partitioning specification for the target table (<a href="https://issues.apache.org/jira/browse/HIVE-20241" target="_blank" rel="noopener">HIVE-20241</a>)).</p>
<p>CTASå…·æœ‰ä»¥ä¸‹é™åˆ¶ï¼š</p>
<ul>
<li><p>ç›®æ ‡è¡¨ä¸èƒ½æ˜¯å¤–éƒ¨è¡¨ã€‚</p>
</li>
<li><p>ç›®æ ‡è¡¨ä¸èƒ½æ˜¯åˆ—è¡¨å­˜å‚¨è¡¨ (list bucketing table)ã€‚</p>
</li>
</ul>
<p>ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE new_key_value_store</span><br><span class="line">   ROW FORMAT SERDE &quot;org.apache.hadoop.hive.serde2.columnar.ColumnarSerDe&quot;</span><br><span class="line">   STORED AS RCFile</span><br><span class="line">   AS</span><br><span class="line">SELECT (key % 1024) new_key, concat(key, value) key_value_pair</span><br><span class="line">FROM key_value_store</span><br><span class="line">SORT BY new_key, key_value_pair;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„CTASè¯­å¥ä½¿ç”¨ä»SELECTè¯­å¥ç»“æœå¾—åˆ°çš„schemaï¼ˆnew_key DOUBLEï¼Œkey_value_pair STRINGï¼‰åˆ›å»ºç›®æ ‡è¡¨new_key_value_storeã€‚å¦‚æœSELECTè¯­å¥æœªæŒ‡å®šåˆ—åˆ«åï¼Œåˆ™åˆ—åå°†è‡ªåŠ¨åˆ†é…ç»™_col0ï¼Œ_col1å’Œ_col2ç­‰ã€‚æ­¤å¤–ï¼Œæ–°ç›®æ ‡è¡¨æ˜¯ä½¿ç”¨ç‰¹å®šçš„SerDeå’Œå­˜å‚¨æ ¼å¼åˆ›å»ºçš„ï¼Œç‹¬ç«‹äºthe source tables in the SELECT statement.</p>
<p>Starting with <a href="https://issues.apache.org/jira/browse/HIVE-1180" target="_blank" rel="noopener">Hive 0.13.0</a>, the SELECT statement can include one or more common table expressions (CTEs), as shown in the <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Select#LanguageManualSelect-SelectSyntax" target="_blank" rel="noopener">SELECT syntax</a>. For an example, see <a href="https://cwiki.apache.org/confluence/display/Hive/Common+Table+Expression#CommonTableExpression-CTEinViews,CTAS,andInsertStatements" target="_blank" rel="noopener">Common Table Expression</a>.</p>
<p>èƒ½å¤Ÿ<strong>ä»ä¸€ä¸ªè¡¨é€‰æ‹©æ•°æ®åˆ°å¦ä¸€ä¸ªè¡¨</strong>æ˜¯Hiveæœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ã€‚Hiveåœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶å¤„ç†æ•°æ®ä»æºæ ¼å¼åˆ°ç›®æ ‡æ ¼å¼çš„è½¬æ¢ã€‚(Being able to select data from one table to another is one of the most powerful features of Hive. Hive handles the conversion of the data from the source format to the destination format as the query is being executed.)</p>
<p>æ ¹æ®ä¾‹å­æˆ‘ä»¬å»ºä¸€å¼ è¡¨ï¼št3</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table t3 as</span><br><span class="line">select</span><br><span class="line">    id,</span><br><span class="line">    name</span><br><span class="line">from t2</span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p>ä¼šæ‰§è¡ŒMapReduceè¿‡ç¨‹ã€‚<br>æŸ¥çœ‹è¡¨ç»“æ„åŠå†…å®¹ï¼Œå‘ç°æ˜¯æœ‰æ•°æ®çš„ï¼Œå¹¶ä¸”ç”±äºæ²¡æœ‰æŒ‡å®šå¤–éƒ¨è¡¨å’Œlocationï¼Œè¯¥è¡¨åœ¨é»˜è®¤ä½ç½®ï¼Œå³æ˜¯å†…éƒ¨è¡¨ã€‚</p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603613699566.png" alt="1603613699566"></p>
<h4 id="3-7-æ³•ä¸‰ï¼šlikeå»ºè¡¨æ³•"><a href="#3-7-æ³•ä¸‰ï¼šlikeå»ºè¡¨æ³•" class="headerlink" title="3.7 æ³•ä¸‰ï¼šlikeå»ºè¡¨æ³•"></a>3.7 æ³•ä¸‰ï¼šlikeå»ºè¡¨æ³•</h4><p><strong>ä¼šåˆ›å»ºç»“æ„å®Œå…¨ç›¸åŒçš„è¡¨ï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®ã€‚</strong><br>å¸¸ç”¨äºä¸­é—´è¡¨.</p>
<p>LIKEå½¢å¼çš„CREATE TABLEå…è®¸æ‚¨ç²¾ç¡®åœ°<strong> </strong>ã€‚(The LIKE form of CREATE TABLE allows you to copy an existing table definition exactly (without copying its data). )</p>
<p>ä¸CTASç›¸æ¯”ï¼Œä»¥ä¸‹è¯­å¥åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„empty_key_value_storeè¡¨ï¼Œå®ƒçš„å®šä¹‰åœ¨è¡¨åä»¥å¤–çš„æ‰€æœ‰ç»†èŠ‚ä¸Šä¸ç°æœ‰key_value_storeå®Œå…¨åŒ¹é…ã€‚ æ–°è¡¨ä¸åŒ…å«ä»»ä½•è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE empty_key_value_store</span><br><span class="line">LIKE key_value_store [TBLPROPERTIES (property_name=property_value, ...)];</span><br></pre></td></tr></table></figure>
<p>åœ¨Hive 0.8.0ä¹‹å‰ï¼ŒCREATE TABLE LIKE view_nameå°†å¤åˆ¶è¯¥è§†å›¾ã€‚ åœ¨Hive 0.8.0å’Œæ›´é«˜ç‰ˆæœ¬ä¸­ï¼ŒCREATE TABLE LIKE view_nameé€šè¿‡ä½¿ç”¨view_name schemaï¼ˆå­—æ®µ(fields)å’Œåˆ†åŒºåˆ—(partition columns)ï¼‰, ä½¿ç”¨SerDeå’Œæ–‡ä»¶æ ¼å¼çš„é»˜è®¤å€¼æ¥åˆ›å»ºä¸€ä¸ªè¡¨ã€‚</p>
<p>æ³¨ï¼šä¸Šé¢è¯­å¥ä¸­å¦‚æœä¸ä½¿ç”¨ EXTERNAL å…³é”®å­—ï¼Œè‹¥æºè¡¨æ˜¯å¤–éƒ¨è¡¨çš„è¯ï¼Œç”Ÿæˆçš„æ–°è¡¨ä¹Ÿå°†æ˜¯å¤–éƒ¨è¡¨ï¼›è‹¥æºè¡¨æ˜¯å†…éƒ¨è¡¨çš„è¯ï¼Œç”Ÿæˆçš„æ–°è¡¨ä¹Ÿå°†æ˜¯å†…éƒ¨è¡¨ã€‚è‹¥è¯­å¥ä¸­åŒ…å« EXTERNAL å…³é”®å­—ä¸”æºè¡¨æ˜¯å†…éƒ¨è¡¨çš„è¯ï¼Œç”Ÿæˆçš„æ–°è¡¨å°†æ˜¯å¤–éƒ¨è¡¨ã€‚å³ä½¿åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼ŒLOCATION å­å¥åŒæ ·æ˜¯å¯é€‰çš„ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table t4 like t2;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œä¸ä¼šæ‰§è¡ŒMapReduceï¼Œä¸”è¡¨ç»“æ„å’Œt2å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®ã€‚</p>
<p><img src="/2020/01/12/Hiveä»‹ç»/1603614353762.png" alt="1603614353762"></p>
<h3 id="4-Hiveä¸­è¡¨çš„ç±»å‹"><a href="#4-Hiveä¸­è¡¨çš„ç±»å‹" class="headerlink" title="4. Hiveä¸­è¡¨çš„ç±»å‹"></a>4. Hiveä¸­è¡¨çš„ç±»å‹</h3><p>Hiveä¸­æœ‰5ç§è¡¨ï¼šå†…éƒ¨è¡¨ï¼Œå¤–éƒ¨è¡¨ï¼Œä¸´æ—¶è¡¨ï¼Œåˆ†åŒºè¡¨ï¼Œæ¡¶è¡¨ï¼ˆåˆ†æ¡¶è¡¨ï¼‰</p>
<h4 id="4-1-å†…éƒ¨è¡¨ï¼ˆManaged-Tableï¼‰"><a href="#4-1-å†…éƒ¨è¡¨ï¼ˆManaged-Tableï¼‰" class="headerlink" title="4.1 å†…éƒ¨è¡¨ï¼ˆManaged Tableï¼‰"></a><span id="jump4.1">4.1 å†…éƒ¨è¡¨ï¼ˆManaged Tableï¼‰</span></h4><p>å…³äºå†…éƒ¨è¡¨çš„å…¶ä»–å†…å®¹è§ <a href="#jump3.3">3.3 å†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨</a><br>æ•°æ®é»˜è®¤å­˜å‚¨åœ¨/user/hive/warehouseï¼Œç”±Hiveè‡ªèº«ç®¡ç†ï¼Œåˆ é™¤å†…éƒ¨è¡¨ä¼šåŒæ—¶åˆ é™¤å­˜å‚¨æ•°æ®å’Œå…ƒæ•°æ®ã€‚</p>
<p><strong>å»ºè¡¨ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// å»ºè¡¨æ–¹å¼ä¸€</span><br><span class="line">create table t1(</span><br><span class="line">    id	INT,</span><br><span class="line">    name STRING,</span><br><span class="line">    age INT,</span><br><span class="line">    gfs ARRAY&lt;STRING&gt;,</span><br><span class="line">    address MAP&lt;STRING,STRING&gt;,</span><br><span class="line">    info STRUCT&lt;country:String,province:String,shi:String&gt;</span><br><span class="line">)</span><br><span class="line">ROW FORMAT DELIMITED </span><br><span class="line">FIELDS TERMINATED BY &apos; &apos; </span><br><span class="line">COLLECTION ITEMS TERMINATED BY &apos;,&apos;</span><br><span class="line">MAP KEYS TERMINATED BY &apos;:&apos; </span><br><span class="line">LINES TERMINATED BY &apos;\n&apos;</span><br><span class="line">LOCATION &quot;/test&quot;;//å¯ä»¥è®¾ç½®æºæ•°æ®çš„ä½ç½®ï¼Œè‹¥ä¸è®¾ç½®é»˜è®¤å°±åœ¨Hiveçš„å·¥ä½œç›®å½•åŒº</span><br><span class="line"></span><br><span class="line">// å»ºè¡¨æ–¹å¼äºŒ</span><br><span class="line">create table gfstbl1 like gfstbl;åªæ˜¯åˆ›å»ºè¡¨ç»“æ„</span><br><span class="line"></span><br><span class="line">// å»ºè¡¨æ–¹å¼ä¸‰</span><br><span class="line">create table gfstbl2 AS SELECT id,name,gfs,address from gfstbl; </span><br><span class="line">  ä¼šåˆ›å»ºç›¸åº”çš„è¡¨ç»“æ„ï¼Œå¹¶ä¸”æ’å…¥æ•°æ®ï¼Œç›¸å½“äºå®Œæ•´çš„èµ‹å€¼</span><br></pre></td></tr></table></figure>
<p>å…³äºå»ºè¡¨çš„æ›´è¯¦ç»†ä»‹ç»è§ <a href="#jump3">3. Hiveå»ºè¡¨è¯­å¥</a></p>
<p><strong>åŠ è½½æ•°æ®ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> inpath <span class="string">'/root/gfs.txt'</span> <span class="keyword">into</span> <span class="keyword">table</span> gfstbl;</span><br></pre></td></tr></table></figure>
<p>æ›´è¯¦ç»†ä»‹ç»è§ 3.5 æ³•ä¸€ï¼šç›´æ¥å»ºè¡¨æ³•ä¸­çš„ <a href="#jump3.5.1.3">3.è£…è½½æ•°æ®</a></p>
<p><strong>æŸ¥çœ‹è¡¨æè¿°ä¿¡æ¯ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DESCRIBE</span> [<span class="keyword">EXTENDED</span>|FORMATTED] table_name</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DESCRIBE FORMATTED gfstbl;</span><br></pre></td></tr></table></figure>
<p>DESCRIBEæ˜¾ç¤ºåˆ—çš„åˆ—è¡¨ï¼ˆthe list of columnsï¼‰ï¼ŒåŒ…æ‹¬ç»™å®šè¡¨çš„åˆ†åŒºåˆ—ï¼ˆpartition columnsï¼‰ã€‚ å¦‚æœæŒ‡å®šäº†EXTENDEDå…³é”®å­—ï¼Œåˆ™å®ƒå°†ä»¥Thriftåºåˆ—åŒ–å½¢å¼æ˜¾ç¤ºè¡¨çš„æ‰€æœ‰å…ƒæ•°æ®ã€‚ è¿™é€šå¸¸åªåœ¨è°ƒè¯•æ—¶æœ‰ç”¨ï¼Œè€Œä¸é€‚ç”¨äºä¸€èˆ¬ä½¿ç”¨ã€‚ å¦‚æœæŒ‡å®šäº†FORMATTEDå…³é”®å­—ï¼Œåˆ™å®ƒå°†ä»¥è¡¨æ ¼æ ¼å¼æ˜¾ç¤ºå…ƒæ•°æ®ã€‚</p>
<p><strong><span id="jump4.1.insert">æ’å…¥æ•°æ®çš„å…¶ä»–æ–¹å¼ï¼š</span></strong><br>Syntax:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Standard syntax:</span><br><span class="line">INSERT OVERWRITE TABLE tablename1 [PARTITION (partcol1=val1, partcol2=val2 ...) [IF NOT EXISTS]] select_statement1 FROM from_statement;</span><br><span class="line">INSERT INTO TABLE tablename1 [PARTITION (partcol1=val1, partcol2=val2 ...)] select_statement1 FROM from_statement;</span><br><span class="line"> </span><br><span class="line">Hive extension (multiple inserts):</span><br><span class="line">FROM from_statement</span><br><span class="line">INSERT OVERWRITE TABLE tablename1 [PARTITION (partcol1=val1, partcol2=val2 ...) [IF NOT EXISTS]] select_statement1</span><br><span class="line">[INSERT OVERWRITE TABLE tablename2 [PARTITION ... [IF NOT EXISTS]] select_statement2]</span><br><span class="line">[INSERT INTO TABLE tablename2 [PARTITION ...] select_statement2] ...;</span><br><span class="line">FROM from_statement</span><br><span class="line">INSERT INTO TABLE tablename1 [PARTITION (partcol1=val1, partcol2=val2 ...)] select_statement1</span><br><span class="line">[INSERT INTO TABLE tablename2 [PARTITION ...] select_statement2]</span><br><span class="line">[INSERT OVERWRITE TABLE tablename2 [PARTITION ... [IF NOT EXISTS]] select_statement2] ...;</span><br><span class="line"> </span><br><span class="line">Hive extension (dynamic partition inserts):</span><br><span class="line">INSERT OVERWRITE TABLE tablename PARTITION (partcol1[=val1], partcol2[=val2] ...) select_statement FROM from_statement;</span><br><span class="line">INSERT INTO TABLE tablename PARTITION (partcol1[=val1], partcol2[=val2] ...) select_statement FROM from_statement;</span><br></pre></td></tr></table></figure>
<p>è§£é‡Šï¼š</p>
<ul>
<li>INSERT OVERWRITEå°†è¦†ç›–è¡¨æˆ–åˆ†åŒºä¸­çš„ä»»ä½•ç°æœ‰æ•°æ®<ul>
<li>unless <code>IF NOT EXISTS</code> is provided for a partition (as of Hive <a href="https://issues.apache.org/jira/browse/HIVE-2612" target="_blank" rel="noopener">0.9.0</a>).</li>
<li>As of Hive 2.3.0 (<a href="https://issues.apache.org/jira/browse/HIVE-15880" target="_blank" rel="noopener">HIVE-15880</a>), if the table has <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-listTableProperties" target="_blank" rel="noopener">TBLPROPERTIES</a> (â€œauto.purgeâ€=â€trueâ€) the previous data of the table is not moved to Trash when INSERT OVERWRITE query is run against the table. This functionality is applicable only for managed tables (see <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-ManagedandExternalTables" target="_blank" rel="noopener">managed tables</a>) and is turned off when â€œauto.purgeâ€ property is unset or set to false.</li>
</ul>
</li>
<li>INSERT INTOå°†<span style="color:red">è¿½åŠ åˆ°è¡¨æˆ–åˆ†åŒºï¼Œä¿æŒç°æœ‰æ•°æ®ä¸å˜</span>ã€‚<ul>
<li>As of Hive <a href="https://issues.apache.org/jira/browse/HIVE-6406" target="_blank" rel="noopener">0.13.0</a>, a table can be made <strong>immutable</strong> by creating it with <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-CreateTable" target="_blank" rel="noopener">TBLPROPERTIES (â€œimmutableâ€=â€trueâ€)</a>. The default is â€œimmutableâ€=â€falseâ€.<br>INSERT INTO behavior into an immutable table is disallowed if any data is already present, although INSERT INTO still works if the immutable table is empty.<br>å¦‚æœè¡¨ä¸­å·²ç»å­˜åœ¨ä»»ä½•æ•°æ®ï¼Œåˆ™ä¸å…è®¸åœ¨ä¸å¯å˜è¡¨ä¸­æ‰§è¡ŒINSERT INTOè¡Œä¸ºï¼Œä½†å¦‚æœä¸å¯å˜è¡¨ä¸ºç©ºï¼Œåˆ™æ’å…¥INTOä»ç„¶å¯ä»¥å·¥ä½œã€‚ INSERT OVERWRITE çš„è¡Œä¸ºä¸å—â€œä¸å¯å˜â€è¡¨å±æ€§çš„å½±å“ã€‚The behavior of INSERT OVERWRITE is not affected by the â€œimmutableâ€ table property.<br>ä¸å¯å˜è¡¨å¯ä»¥é˜²æ­¢ç”±äºè„šæœ¬é”™è¯¯åœ°å¤šæ¬¡è¿è¡Œè€Œå°†æ•°æ®åŠ è½½åˆ°è¡¨ä¸­çš„æ„å¤–æ›´æ–°ã€‚The first insert into an immutable table succeeds and successive inserts fail, resulting in only one set of data in the table, instead of silently succeeding with multiple copies of the data in the table.</li>
</ul>
</li>
<li>å¯ä»¥å¯¹è¡¨æˆ–åˆ†åŒºè¿›è¡Œæ’å…¥ã€‚If the table is partitioned, then one must specify a specific partition of the table by specifying values for all of the partitioning columns. If <a href="https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.typecheck.on.insert" target="_blank" rel="noopener">hive.typecheck.on.insert</a> is set to true, these values are validated, converted and normalized to conform to their column types (Hive <a href="https://issues.apache.org/jira/browse/HIVE-5297" target="_blank" rel="noopener">0.12.0</a> onward). </li>
<li>å¯ä»¥åœ¨åŒä¸€æŸ¥è¯¢ä¸­æŒ‡å®šå¤šä¸ªæ’å…¥å­å¥ï¼ˆä¹Ÿç§°ä¸ºå¤šè¡¨æ’å…¥ï¼‰ã€‚</li>
<li>The output of each of the select statements is written to the chosen table (or partition). Currently the OVERWRITE keyword is mandatory and implies that the contents of the chosen table or partition are replaced with the output of corresponding select statement.</li>
<li>The output format and serialization class is determined by the tableâ€™s metadata (as specified via DDL commands on the table).</li>
<li>As of Hive <a href="https://issues.apache.org/jira/browse/HIVE-9353" target="_blank" rel="noopener">1.1.0</a> the TABLE keyword is optional.</li>
<li>As of Hive <a href="https://issues.apache.org/jira/browse/HIVE-9481" target="_blank" rel="noopener">1.2.0</a> each INSERT INTO T can take a column list like INSERT INTO T (z, x, c1).  See Description of <a href="https://issues.apache.org/jira/browse/HIVE-9481" target="_blank" rel="noopener">HIVE-9481</a> for examples.</li>
</ul>
<p><strong>Notes</strong></p>
<ul>
<li>Multi Table Inserts minimize the number of data scans required. Hive can insert data into multiple tables by scanning the input data just once (and applying different query operators) to the input data. å¤šè¡¨æ’å…¥å¯æœ€å¤§ç¨‹åº¦åœ°å‡å°‘æ‰€éœ€çš„æ•°æ®æ‰«ææ¬¡æ•°ã€‚ Hiveå¯ä»¥é€šè¿‡åªæ‰«æä¸€æ¬¡è¾“å…¥æ•°æ®ï¼ˆå¹¶åº”ç”¨ä¸åŒçš„æŸ¥è¯¢è¿ç®—ç¬¦ï¼‰åˆ°è¾“å…¥æ•°æ®æ¥å°†æ•°æ®æ’å…¥åˆ°å¤šä¸ªè¡¨ä¸­ã€‚</li>
<li>Starting with <a href="https://issues.apache.org/jira/browse/HIVE-1180" target="_blank" rel="noopener">Hive 0.13.0</a>, the select statement can include one or more common table expressions (CTEs) as shown in the <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Select#LanguageManualSelect-SelectSyntax" target="_blank" rel="noopener">SELECT syntax</a>. For an example, see <a href="https://cwiki.apache.org/confluence/display/Hive/Common+Table+Expression#CommonTableExpression-CTEinViews,CTAS,andInsertStatements" target="_blank" rel="noopener">Common Table Expression</a>.</li>
</ul>
<p>ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">insert into rest select count(*) from table;</span><br><span class="line">		</span><br><span class="line">ä¹ æƒ¯å†™æ³• fromæå‰  å‡å°‘SQLä»£ç çš„å†—ä½™</span><br><span class="line">from day_hour_table</span><br><span class="line">insert into rest </span><br><span class="line">select count(*) ;</span><br></pre></td></tr></table></figure>
<h4 id="4-2-å¤–éƒ¨è¡¨ï¼ˆExternal-Tableï¼‰"><a href="#4-2-å¤–éƒ¨è¡¨ï¼ˆExternal-Tableï¼‰" class="headerlink" title="4.2 å¤–éƒ¨è¡¨ï¼ˆExternal Tableï¼‰"></a><span id="jump4.2">4.2 å¤–éƒ¨è¡¨ï¼ˆExternal Tableï¼‰</span></h4><p>æ›´å¤šå…³äºå¤–éƒ¨è¡¨çš„å†…å®¹è§ <a href="#jump3.3">3.3 å†…éƒ¨è¡¨ä¸å¤–éƒ¨è¡¨</a></p>
<p>æ•°æ®å­˜å‚¨ä½ç½®ç”±ç”¨æˆ·è‡ªå·±æŒ‡å®šï¼Œ<strong>ç”±HDFSç®¡ç†ï¼Œåˆ é™¤å¤–éƒ¨è¡¨æ—¶ä»…ä»…ä¼šåˆ é™¤å…ƒæ•°æ®ï¼Œå­˜å‚¨æ•°æ®ä¸ä¼šå—åˆ°å½±å“ã€‚</strong></p>
<ul>
<li><p>é€‚ç”¨æƒ…å½¢ï¼š<br>å½“ä¸€ä»½æ—¥å¿—éœ€è¦å¤šä¸ªå°ç»„ä¸€èµ·åˆ†æï¼Œåˆ†æå®Œäº†ä¹‹ååˆ›å»ºçš„è¡¨å°±å¯ä»¥åˆ é™¤äº†ã€‚ä½†æ˜¯æ™®é€šçš„è¡¨åˆ é™¤çš„åŒæ—¶ä¹Ÿä¼šæŠŠæ•°æ®åˆ é™¤ï¼Œè¿™æ ·å°±ä¼šå½±å“åˆ°å…¶ä»–å°ç»„çš„åˆ†æï¼Œè€Œä¸”æ—¥å¿—æ•°æ®ä¹Ÿä¸èƒ½éšä¾¿åˆ é™¤ã€‚æ‰€ä»¥ï¼Œéœ€è¦å¤–éƒ¨è¡¨ï¼Œåˆ é™¤å¤–éƒ¨è¡¨ï¼Œä¸ä¼šåˆ é™¤å¯¹åº”çš„HDFSä¸Šçš„æ•°æ®ã€‚</p>
</li>
<li><p>å¯¹æ¯”å¤–éƒ¨è¡¨å’Œå†…éƒ¨è¡¨åŒºåˆ«<br>åˆ é™¤å¤–éƒ¨è¡¨ï¼Œæ•°æ®ä¸ä¼šæœ‰ä»»ä½•æ”¹å˜ï¼Œåªæ˜¯mysqlä¸­çš„å…ƒæ•°æ®è¢«ä¿®æ”¹ï¼Œä½†æ˜¯åˆ é™¤å†…éƒ¨è¡¨ï¼ˆç®¡ç†è¡¨ï¼‰ï¼Œæ•°æ®å°±ä¼šè¢«åˆ é™¤ã€‚</p>
</li>
</ul>
<p><strong>å»ºè¡¨ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">external</span> <span class="keyword">table</span> wc_external (</span><br><span class="line">    word1 <span class="keyword">STRING</span>, </span><br><span class="line">    word2 <span class="keyword">STRING</span></span><br><span class="line">) </span><br><span class="line"><span class="keyword">ROW</span> <span class="keyword">FORMAT</span> <span class="keyword">DELIMITED</span> </span><br><span class="line"><span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">' '</span> </span><br><span class="line">location <span class="string">'/test/external'</span>; locationå¯åŠ å¯ä¸åŠ ï¼Œä¸åŠ locationé»˜è®¤æ˜¯åœ¨hiveçš„å·¥ä½œç›®å½•åŒº</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ€»ç»“ï¼šhiveå†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„åŒºåˆ«<br>    1ï¼‰åˆ›å»ºè¡¨æ—¶ï¼šåˆ›å»ºå†…éƒ¨è¡¨æ—¶ï¼Œä¼šå°†æ•°æ®ç§»åŠ¨åˆ°æ•°æ®ä»“åº“æŒ‡å‘çš„è·¯å¾„ï¼›è‹¥åˆ›å»ºå¤–éƒ¨è¡¨ï¼Œä»…è®°å½•æ•°æ®æ‰€åœ¨çš„è·¯å¾„ï¼Œ ä¸å¯¹æ•°æ®çš„ä½ç½®åšä»»ä½•æ”¹å˜ã€‚<br>    2ï¼‰åˆ é™¤è¡¨æ—¶ï¼šåœ¨åˆ é™¤è¡¨çš„æ—¶å€™ï¼Œå†…éƒ¨è¡¨çš„å…ƒæ•°æ®å’Œæ•°æ®ä¼šè¢«ä¸€èµ·åˆ é™¤ï¼Œè€Œå¤–éƒ¨è¡¨åªåˆ é™¤å…ƒæ•°æ®ï¼Œä¸åˆ é™¤æ•°æ®ã€‚è¿™æ ·å¤–éƒ¨è¡¨ç›¸å¯¹æ¥è¯´æ›´åŠ å®‰å…¨äº›ï¼Œæ•°æ®ç»„ç»‡ä¹Ÿæ›´åŠ çµæ´»ï¼Œæ–¹ä¾¿å…±äº«æºæ•°æ®</p>
</blockquote>
<h4 id="4-3-ä¸´æ—¶è¡¨ï¼ˆTemporary-Tableï¼‰"><a href="#4-3-ä¸´æ—¶è¡¨ï¼ˆTemporary-Tableï¼‰" class="headerlink" title="4.3 ä¸´æ—¶è¡¨ï¼ˆTemporary Tableï¼‰"></a>4.3 ä¸´æ—¶è¡¨ï¼ˆTemporary Tableï¼‰</h4><p>åœ¨å½“å‰ä¼šè¯æœŸé—´å­˜åœ¨ï¼Œä¼šè¯ç»“æŸåè‡ªåŠ¨é”€æ¯ã€‚</p>
<ul>
<li>é€‚ç”¨æƒ…å½¢<br>ä¸´æ—¶åˆ†æï¼Œåœ¨å…³é—­hiveå®¢æˆ·ç«¯åï¼Œä¸´æ—¶è¡¨å°±ä¼šæ¶ˆå¤±ã€‚ä¸»è¦ç”¨äºå­˜å‚¨ä¸é‡è¦ä¸­é—´ç»“æœé›†ï¼Œä¸é‡è¦çš„è¡¨ã€‚</li>
</ul>
<p>ä¸´æ—¶è¡¨å…·æœ‰ä»¥ä¸‹é™åˆ¶ï¼š</p>
<ul>
<li>ä¸æ”¯æŒåˆ†åŒºåˆ—ã€‚</li>
<li>ä¸æ”¯æŒåˆ›å»ºç´¢å¼•ã€‚</li>
</ul>
<p><strong>å»ºè¡¨ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">TEMPORARY</span> <span class="keyword">table</span> ttabc(<span class="keyword">id</span> <span class="built_in">Int</span>,<span class="keyword">name</span> <span class="keyword">String</span>) ä¸´æ—¶è¡¨çš„å£°æ˜å‘¨æœŸæ˜¯ä¸€æ¬¡ä¼šè¯</span><br><span class="line">è¿›å…¥hive shell åˆ›å»ºä¸€å¼ è¡¨ï¼Œå…³é—­shellåï¼Œè¡¨ä¸¢å¤±ï¼Œä¸´æ—¶è¡¨ä¸æ”¯æŒåˆ†åŒº</span><br></pre></td></tr></table></figure>
<p><strong>å»ºè¡¨å¹¶åŠ è½½æ•°æ®ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">TEMPORARY</span> <span class="keyword">table</span> dept_tmp(  </span><br><span class="line">    deptno <span class="built_in">int</span>,  </span><br><span class="line">    dname <span class="keyword">string</span>,</span><br><span class="line">    loc <span class="keyword">string</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span>  </span><br><span class="line"><span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\t'</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> inpath <span class="string">'/opt/datas/dept.txt'</span> <span class="keyword">into</span> <span class="keyword">table</span> dept_tmp;</span><br></pre></td></tr></table></figure>
<p><strong>æŸ¥çœ‹locationä¿¡æ¯ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">desc formatted dept_tmp;</span><br><span class="line">Location:               hdfs://172.19.199.187:8020/tmp/hive/hadoop/68174383-f427-4629-9707-0ab1c9b07726/_tmp_space.db/d872efec-1294-48b0-9071-31cf98d46400    </span><br><span class="line">Table Type:             MANAGED_TABLE</span><br></pre></td></tr></table></figure>
<h4 id="4-4-åˆ†åŒºè¡¨ï¼ˆPartitioned-Tableï¼‰"><a href="#4-4-åˆ†åŒºè¡¨ï¼ˆPartitioned-Tableï¼‰" class="headerlink" title="4.4 åˆ†åŒºè¡¨ï¼ˆPartitioned Tableï¼‰"></a><span id="jump4.4">4.4 åˆ†åŒºè¡¨ï¼ˆPartitioned Tableï¼‰</span></h4><p>å¦å¤–å…³äºåˆ†åŒºè¡¨çš„å†…å®¹è§ <a href="#jump3.4">3.4 Partitioned Tables</a></p>
<p>å°†æ•°æ®æŒ‰ç…§æŸä¸ªå­—æ®µæˆ–è€…å…³é”®å­—åˆ†æˆå¤šä¸ªå­ç›®å½•æ¥å­˜å‚¨ï¼Œé˜²æ­¢æš´åŠ›æ‰«æå…¨è¡¨ã€‚</p>
<ul>
<li><p>é€‚ç”¨æƒ…å½¢</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from logs where date = &apos;20171209&apos;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ™®é€šè¡¨æ‰§è¡Œæµç¨‹ï¼šå¯¹å…¨è¡¨çš„æ•°æ®è¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åè¿›è¡Œè¿‡æ»¤æ“ä½œã€‚</li>
<li>åˆ†åŒºè¡¨æ‰§è¡Œæµç¨‹ï¼šç›´æ¥åŠ è½½å¯¹åº”æ–‡ä»¶è·¯å¾„ä¸‹çš„æ•°æ®ã€‚</li>
</ul>
<p>é€‚ç”¨äºå¤§æ•°æ®é‡ï¼Œå¯ä»¥é€šè¿‡åˆ†åŒºå¿«é€Ÿå®šä½éœ€è¦æŸ¥è¯¢çš„æ•°æ®ï¼Œ<strong>åˆ†åŒºè¡¨çš„ä½œç”¨ä¸»è¦æ˜¯æé«˜æŸ¥è¯¢æ£€ç´¢çš„æ•ˆç‡ ã€‚</strong></p>
</li>
</ul>
<p>åˆ†åŒºè¡¨çš„ä¼˜åŠ¿ä½“ç°åœ¨å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½ä¸¤æ–¹é¢ï¼Œè€Œä¸”åˆ†åŒºè¡¨è¿˜å¯ä»¥å°†æ•°æ®ä»¥ä¸€ç§ç¬¦åˆä¸šåŠ¡é€»è¾‘çš„æ–¹å¼è¿›è¡Œç»„ç»‡ï¼Œå› æ­¤æ˜¯æ•°æ®ä»“åº“ä¸­ç»å¸¸ä½¿ç”¨çš„ä¸€ç§æŠ€æœ¯ã€‚ç®¡ç†è¡¨å’Œå¤–éƒ¨è¡¨éƒ½å¯ä»¥åˆ›å»ºç›¸åº”çš„åˆ†åŒºè¡¨ï¼Œåˆ†åˆ«ç§°ä¹‹ä¸ºç®¡ç†åˆ†åŒºè¡¨å’Œå¤–éƒ¨åˆ†åŒºè¡¨ã€‚</p>
<p>å…ˆçœ‹ä¸€ä¸ªç®¡ç†åˆ†åŒºè¡¨çš„ä¾‹å­ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> page_view(</span><br><span class="line">    viewtime <span class="built_in">int</span>,</span><br><span class="line">	userid <span class="built_in">bigint</span>,</span><br><span class="line">	page_url <span class="keyword">string</span>,</span><br><span class="line">	referrer_url <span class="keyword">string</span>,</span><br><span class="line">	ip <span class="keyword">string</span> <span class="keyword">COMMENT</span> <span class="string">'ip address of the user'</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="string">'this is the page view table'</span></span><br><span class="line">PARTITIONED <span class="keyword">BY</span> (dt <span class="keyword">string</span>, country <span class="keyword">string</span>)</span><br><span class="line"><span class="keyword">ROW</span> <span class="keyword">FORMAT</span> <span class="keyword">DELIMITED</span> <span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\001'</span></span><br><span class="line"><span class="keyword">STORED</span> <span class="keyword">AS</span> SEQUENCEFILE;</span><br></pre></td></tr></table></figure>
<p>CREATE TABLE è¯­å¥çš„ PARTITIONED BY å­å¥ç”¨äºåˆ›å»ºåˆ†åŒºè¡¨ã€‚ä¸Šé¢çš„è¯­å¥åˆ›å»ºä¸€ä¸ªåä¸º page_view çš„åˆ†åŒºè¡¨ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„é¡µé¢æµè§ˆè®°å½•è¡¨ï¼ŒåŒ…å«æµè§ˆæ—¶é—´ã€æµè§ˆç”¨æˆ·IDã€æµè§ˆé¡µé¢çš„URLã€ä¸Šä¸€ä¸ªè®¿é—®çš„URLå’Œç”¨æˆ·çš„IPåœ°å€äº”ä¸ªå­—æ®µã€‚è¯¥è¡¨ä»¥æ—¥æœŸå’Œå›½å®¶ä½œä¸ºåˆ†åŒºå­—æ®µï¼Œå­˜å‚¨ä¸ºSEQUENCEFILEæ–‡ä»¶æ ¼å¼ã€‚æ–‡ä»¶ä¸­çš„æ•°æ®åˆ†åˆ«ä½¿ç”¨é»˜è®¤çš„Ctrl-Aå’Œæ¢è¡Œç¬¦ä½œä¸ºåˆ—å’Œè¡Œçš„åˆ†éš”ç¬¦ã€‚</p>
<p>ä½¿ç”¨ DESCRIBE FORMATTED å‘½ä»¤ä¼šæ˜¾ç¤ºå‡ºåˆ†åŒºé”®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DESCRIBE FORMATTED page_view;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºä¿¡æ¯ä¸­æŠŠè¡¨å­—æ®µå’Œåˆ†åŒºå­—æ®µåˆ†å¼€æ˜¾ç¤ºã€‚</p>
<p>åˆ†åŒºè¡¨æ”¹å˜äº† Hive å¯¹æ•°æ®å­˜å‚¨çš„ç»„ç»‡æ–¹å¼ã€‚å¦‚æœæ˜¯ä¸€ä¸ªéåˆ†åŒºè¡¨ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªpage_viewç›®å½•ä¸ä¹‹å¯¹åº”ï¼Œè€Œå¯¹äºåˆ†åŒºè¡¨ï¼Œå½“å‘è¡¨ä¸­è£…è½½æ•°æ®åï¼ŒHive å°†ä¼šåˆ›å»ºå¥½å¯ä»¥åæ˜ åˆ†åŒºç»“æ„çš„å­ç›®å½•ã€‚</p>
<p>å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºï¼Œæœ€é‡è¦çš„åŸå› å°±æ˜¯ä¸ºäº†æ›´å¿«åœ°æŸ¥è¯¢ã€‚å¦‚æœç”¨æˆ·çš„æŸ¥è¯¢åŒ…å«äº† <code>where dt=&#39;...&#39; and country=&#39;...&#39;</code>è¿™æ ·çš„æ¡ä»¶ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨åªéœ€è¦æ‰«æä¸€ä¸ªåˆ†åŒºç›®å½•å³å¯ã€‚</p>
<p><strong>é™æ€åˆ†åŒºè¡¨ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> day_hour_table (<span class="keyword">id</span> <span class="built_in">int</span>, <span class="keyword">content</span> <span class="keyword">string</span>) partitioned <span class="keyword">by</span> (dt <span class="built_in">int</span>,<span class="keyword">hour</span> <span class="built_in">int</span>) </span><br><span class="line"><span class="keyword">ROW</span> <span class="keyword">FORMAT</span> <span class="keyword">DELIMITED</span> </span><br><span class="line"><span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\t'</span> ;</span><br></pre></td></tr></table></figure>
<p><strong>åŠ è½½æ•°æ®ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- insertå•æ¡æ’å…¥çš„æ–¹å¼å¾€åˆ†åŒºè¡¨ä¸­æ’å…¥æ•°æ®ï¼š</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> day_hour_table <span class="keyword">partition</span>(dt=<span class="number">9</span>,<span class="keyword">hour</span>=<span class="number">1</span>) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">"a2 bc"</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> day_hour_table <span class="keyword">partition</span>(dt=<span class="number">9</span>,<span class="keyword">hour</span>=<span class="number">2</span>) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">"a2 bc"</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> day_hour_table <span class="keyword">partition</span>(dt=<span class="number">8</span>,<span class="keyword">hour</span>=<span class="number">1</span>) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">"a2 bc"</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> day_hour_table <span class="keyword">partition</span>(dt=<span class="number">8</span>,<span class="keyword">hour</span>=<span class="number">2</span>) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">"a2 bc"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- loadæ‰¹é‡æ’å…¥çš„æ–¹å¼å¾€åˆ†åŒºè¡¨ä¸­æ’å…¥æ•°æ®ï¼š</span></span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> inpath <span class="string">"/root/ceshi"</span> <span class="keyword">into</span> <span class="keyword">table</span> day_table <span class="keyword">partition</span> (dt=<span class="number">10</span>,<span class="keyword">hour</span>=<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p><strong>åˆ é™¤Hiveåˆ†åŒºè¡¨ä¸­çš„åˆ†åŒºï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> day_table <span class="keyword">DROP</span> <span class="keyword">PARTITION</span> (dt=<span class="number">10</span>,<span class="keyword">hour</span>=<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p><strong>åˆ›å»º\æ·»åŠ åˆ†åŒºï¼š</strong></p>
<p>Syntax:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ADD</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] <span class="keyword">PARTITION</span> partition_spec [LOCATION <span class="string">'location'</span>]</span><br><span class="line">[, <span class="keyword">PARTITION</span> partition_spec [LOCATION <span class="string">'location'</span>], ...];</span><br><span class="line"></span><br><span class="line">partition_spec:</span><br><span class="line">	  : (partition_column = partition_col_value, partition_column = partition_col_value, ...)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ªç©ºåˆ†åŒºï¼š</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> day_hour_table <span class="keyword">ADD</span> <span class="keyword">PARTITION</span> (dt=<span class="number">10000</span>, <span class="keyword">hour</span>=<span class="number">2000</span>);</span><br><span class="line"><span class="comment">-- ç„¶åå°†æ•°æ®ä¸Šä¼ åˆ°ç©ºåˆ†åŒºå¯¹åº”çš„ç›®å½•ä¸‹ï¼Œåˆ†åŒºè¡¨ä¸­å°±ä¼šæ˜¾ç¤ºæ•°æ®</span></span><br><span class="line">HDFS dfs -put ........</span><br><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ªç©ºåˆ†åŒºå¹¶ä¸”å°†ç©ºåˆ†åŒºæŒ‡å‘æ•°æ®ä½ç½®ï¼š</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> day_hour_table <span class="keyword">ADD</span> <span class="keyword">PARTITION</span> (dt=<span class="number">10000</span>, <span class="keyword">hour</span>=<span class="number">2000</span>) location <span class="string">"/test"</span></span><br></pre></td></tr></table></figure>
<p><strong>åŠ¨æ€åˆ†åŒºè¡¨ï¼š</strong></p>
<p>åŠ¨æ€åˆ†åŒºè¡¨å’Œé™æ€åˆ†åŒºè¡¨å»ºè¡¨è¯­å¥ç›¸åŒï¼Œæ’å…¥æ•°æ®çš„æ–¹å¼ä¸åŒ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.exec.dynamic.partition=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">set</span> hive.exec.dynamic.partition.mode=nonstrict;</span><br></pre></td></tr></table></figure>
<p>åŠ¨æ€åˆ†åŒºå¯ä»¥æ ¹æ®æ•°æ®æœ¬èº«çš„ç‰¹å¾è‡ªåŠ¨æ¥åˆ’åˆ†åˆ†åŒºï¼Œ<code>load data â€¦</code> åªæ˜¯å°†æ•°æ®ä¸Šä¼ åˆ°HDFSæŒ‡å®šç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨from insertçš„æ–¹å¼æ’å…¥æ•°æ®ï¼Œhiveæ‰ä¼šæ ¹æ®åˆ†åŒºè®¾ç½®è‡ªåŠ¨å°†æ•°æ®è¿›è¡Œåˆ†åŒºã€‚ï¼ˆè¯¦ç»†å†…å®¹è§ğŸ‘‡ï¼‰</p>
<p><strong>åŠ¨æ€åˆ†åŒºæ’å…¥ï¼ˆDynamic Partition Insertsï¼‰</strong></p>
<blockquote>
<p>å‚è€ƒ <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML</a></p>
</blockquote>
<p>åœ¨åŠ¨æ€åˆ†åŒºæ’å…¥ä¸­ï¼Œç”¨æˆ·å¯ä»¥æä¾›éƒ¨åˆ†åˆ†åŒºè§„èŒƒï¼Œè¿™æ„å‘³ç€åªéœ€åœ¨PARTITIONå­å¥ä¸­æŒ‡å®šåˆ†åŒºåˆ—ååˆ—è¡¨ ( specifying the list of partition column names)ã€‚åˆ—å€¼æ˜¯å¯é€‰çš„ (The column values are optional)ã€‚å¦‚æœç»™å®šä¸€ä¸ªåˆ†åŒºåˆ—å€¼ (partition column value)ï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºé™æ€åˆ†åŒºï¼Œå¦åˆ™ä¸ºåŠ¨æ€åˆ†åŒºã€‚æ¯ä¸ªåŠ¨æ€åˆ†åŒºåˆ—éƒ½æœ‰ä¸€ä¸ªæ¥è‡ªselectè¯­å¥çš„ç›¸åº”è¾“å…¥åˆ—ã€‚è¿™æ„å‘³ç€åŠ¨æ€åˆ†åŒºçš„åˆ›å»ºç”±è¾“å…¥åˆ—çš„å€¼å†³å®šã€‚åŠ¨æ€åˆ†åŒºåˆ—å¿…é¡»åœ¨SELECTè¯­å¥çš„åˆ—ä¸­æœ€åæŒ‡å®šï¼Œå¹¶ä¸”æŒ‰ç…§å®ƒä»¬åœ¨PARTITION()å­å¥ä¸­å‡ºç°çš„é¡ºåºæŒ‡å®šã€‚</p>
<blockquote>
<p>In the dynamic partition inserts, users can give partial partition specifications, which means just specifying the list of partition column names in the PARTITION clause. The column values are optional. If a partition column value is given, we call this a static partition, otherwise it is a dynamic partition. Each dynamic partition column has a corresponding input column from the select statement. This means that the dynamic partition creation is determined by the value of the input column. The dynamic partition columns must be <strong>specified last</strong> among the columns in the SELECT statement and <strong>in the same order</strong> in which they appear in the PARTITION() clause.</p>
</blockquote>
<p>As of Hive 3.0.0 (<a href="https://issues.apache.org/jira/browse/HIVE-19083" target="_blank" rel="noopener">HIVE-19083</a>) there is no need to specify dynamic partition columns. Hive will automatically generate partition specification if it is not specified.</p>
<style>
table th:first-of-type {
    width: 220px;
}
table th:nth-of-type(2) {
    width: 70px;
}
</style>

<div class="table-container">
<table>
<thead>
<tr>
<th>Configuration property</th>
<th>Default</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hive.exec.dynamic.partition</code></td>
<td><code>true</code></td>
<td>Needs to be set to <code>true</code> to enable dynamic partition inserts</td>
</tr>
<tr>
<td><code>hive.exec.dynamic.partition.mode</code></td>
<td><code>strict</code></td>
<td>In <code>strict</code> mode, the user must specify at least one static partition in case the user accidentally overwrites all partitions, in <code>nonstrict</code> mode all partitions are allowed to be dynamic</td>
</tr>
<tr>
<td><code>hive.exec.max.dynamic.partitions.pernode</code></td>
<td>100</td>
<td>Maximum number of dynamic partitions allowed to be created in each mapper/reducer node</td>
</tr>
<tr>
<td><code>hive.exec.max.dynamic.partitions</code></td>
<td>1000</td>
<td>Maximum number of dynamic partitions allowed to be created in total</td>
</tr>
<tr>
<td><code>hive.exec.max.created.files</code></td>
<td>100000</td>
<td>Maximum number of HDFS files created by all mappers/reducers in a MapReduce job</td>
</tr>
<tr>
<td><code>hive.error.on.empty.partition</code></td>
<td><code>false</code></td>
<td>Whether to throw an exception if dynamic partition insert generates empty results</td>
</tr>
</tbody>
</table>
</div>
<p>ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FROM page_view_stg pvs</span><br><span class="line">INSERT OVERWRITE TABLE page_view PARTITION(dt=&apos;2008-06-08&apos;, country)</span><br><span class="line">       SELECT pvs.viewTime, pvs.userid, pvs.page_url, pvs.referrer_url, null, null, pvs.ip, pvs.cnt</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œcountry åˆ†åŒºå°†ç”±SELECTå­å¥çš„æœ€åä¸€åˆ—ï¼ˆå³pvs.cntï¼‰åŠ¨æ€åˆ›å»ºã€‚Note that the name is not used. åœ¨ nonstrict æ¨¡å¼ä¸‹ï¼Œthe <code>dt</code> partition could also be dynamically created.</p>
<p>å…³äº INSERT çš„è¯­æ³•è§ 4.1 å†…éƒ¨è¡¨ï¼ˆManaged Tableï¼‰ä¸­çš„<a href="#jump4.1.insert">æ’å…¥æ•°æ®çš„å…¶ä»–æ–¹å¼</a>éƒ¨åˆ†.</p>
<h4 id="4-5-åˆ†æ¡¶è¡¨ï¼ˆBucked-Tablesï¼‰"><a href="#4-5-åˆ†æ¡¶è¡¨ï¼ˆBucked-Tablesï¼‰" class="headerlink" title="4.5 åˆ†æ¡¶è¡¨ï¼ˆBucked Tablesï¼‰"></a><span id="jump4.5">4.5 åˆ†æ¡¶è¡¨ï¼ˆBucked Tablesï¼‰</span></h4><p>å°†æ•°æ®æŒ‰ç…§æŸä¸ªå­—æ®µå’Œæ¡¶çš„æ•°é‡ï¼Œå¯¹æŒ‡å®šå­—æ®µè¿›è¡Œå–æ¨¡è¿ç®—ï¼Œæ‹†åˆ†æˆå¤šä¸ªå°æ–‡ä»¶æ¥å­˜å‚¨ï¼Œæ¨¡ç›¸åŒçš„å­˜å‚¨åœ¨åŒä¸€ä¸ªå°æ–‡ä»¶ä¸­ï¼Œæé«˜joinä»¥åŠæŠ½æ ·çš„æ•ˆç‡ã€‚</p>
<ul>
<li>é€‚ç”¨æƒ…å½¢<br>æ•°æ®æœ‰ä¸¥é‡çš„æ•°æ®å€¾æ–œï¼Œåˆ†å¸ƒä¸å‡åŒ€ï¼Œä½†æ˜¯ç›¸å¯¹æ¥è¯´æ¯ä¸ªæ¡¶ä¸­çš„æ•°æ®é‡ä¼šæ¯”è¾ƒå¹³å‡ã€‚æ¡¶ä¸æ¡¶ä¹‹é—´åšjoinç­‰æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šæœ‰ä¼˜åŒ–ã€‚</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.enforce.bucketing=<span class="literal">true</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_bu(  </span><br><span class="line">    empno <span class="built_in">int</span>,  </span><br><span class="line">    ename <span class="keyword">string</span>,</span><br><span class="line">    job <span class="keyword">string</span>,  </span><br><span class="line">    mgr <span class="built_in">int</span>,</span><br><span class="line">    hiredate <span class="keyword">string</span>,  </span><br><span class="line">    sal <span class="keyword">double</span>,  </span><br><span class="line">    comm <span class="keyword">double</span>,  </span><br><span class="line">    deptno <span class="built_in">int</span></span><br><span class="line">)</span><br><span class="line">CLUSTERED <span class="keyword">BY</span>(deptno) <span class="keyword">INTO</span> <span class="number">4</span> BUCKETS</span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span>  </span><br><span class="line"><span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\t'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> overwrite <span class="keyword">table</span> emp_bu_2 <span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>
<p>åˆ†æ¡¶è¡¨æ˜¯å¯¹åˆ—å€¼å–å“ˆå¸Œå€¼çš„æ–¹å¼ï¼Œå°†ä¸åŒæ•°æ®æ”¾åˆ°ä¸åŒæ–‡ä»¶ä¸­å­˜å‚¨ï¼Œç”±åˆ—å€¼çš„å“ˆå¸Œå€¼é™¤ä»¥æ¡¶çš„ä¸ªæ•°æ¥å†³å®šæ¯æ¡æ•°æ®åˆ’åˆ†åœ¨å“ªä¸ªæ¡¶ä¸­ã€‚å¯¹äºhiveä¸­æ¯ä¸€ä¸ªè¡¨ã€åˆ†åŒºéƒ½å¯ä»¥è¿›ä¸€æ­¥è¿›è¡Œåˆ†æ¡¶ã€‚</p>
<p>For an int, itâ€™s easy, <code>hash_int(i) == i</code>. ä¾‹å¦‚åŸºäºuser_idè¿›è¡Œåˆ†æ¡¶æ—¶ï¼Œ if user_id were an int, and there were 10 buckets, we would expect all user_idâ€™s that end in 0 to be in bucket 1, all user_idâ€™s that end in a 1 to be in bucket 2, etc. </p>
<p><strong>å»ºè¡¨ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> psnbucket( </span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span>, </span><br><span class="line">    <span class="keyword">name</span> <span class="keyword">STRING</span>, </span><br><span class="line">    age <span class="built_in">INT</span></span><br><span class="line">) </span><br><span class="line">CLUSTERED <span class="keyword">BY</span> (age) <span class="keyword">INTO</span> <span class="number">4</span> BUCKETS </span><br><span class="line"><span class="keyword">ROW</span> <span class="keyword">FORMAT</span> <span class="keyword">DELIMITED</span> </span><br><span class="line"><span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">','</span>;</span><br></pre></td></tr></table></figure>
<p><strong>æ’å…¥æ•°æ®ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">table</span> psnbucket <span class="keyword">select</span> <span class="keyword">id</span>, <span class="keyword">name</span>, age <span class="keyword">from</span> original;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ†æ¡¶è¡¨+åˆ†åŒºè¡¨ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> psnbucket_partition( </span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span>, </span><br><span class="line">    <span class="keyword">name</span> <span class="keyword">STRING</span>, </span><br><span class="line">    age <span class="built_in">INT</span></span><br><span class="line">) </span><br><span class="line">PARTITIONED <span class="keyword">BY</span>(height <span class="keyword">DOUBLE</span>) </span><br><span class="line">CLUSTERED <span class="keyword">BY</span> (age) <span class="keyword">INTO</span> <span class="number">4</span> BUCKETS </span><br><span class="line"><span class="keyword">ROW</span> <span class="keyword">FORMAT</span> <span class="keyword">DELIMITED</span> </span><br><span class="line"><span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">','</span>;</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>å‚è€ƒ <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL+BucketedTables" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL+BucketedTables</a></p>
</blockquote>
<p>Bucketed tables are fantastic in that they allow much more efficient <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Sampling" target="_blank" rel="noopener">sampling</a> than do non-bucketed tables, and they may later allow for time saving operations such as mapside joins. However, the bucketing specified at table creation is not enforced when the table is written to, and so it is possible for the tableâ€™s metadata to advertise properties which are not upheld by the tableâ€™s actual layout. This should obviously be avoided. Hereâ€™s how to do it right.</p>
<p>First, <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-Create/Drop/TruncateTable" target="_blank" rel="noopener">table creation</a>:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> user_info_bucketed(user_id <span class="built_in">BIGINT</span>, firstname <span class="keyword">STRING</span>, lastname <span class="keyword">STRING</span>)</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="string">'A bucketed copy of user_info'</span></span><br><span class="line">PARTITIONED <span class="keyword">BY</span>(ds <span class="keyword">STRING</span>)</span><br><span class="line">CLUSTERED <span class="keyword">BY</span>(user_id) <span class="keyword">INTO</span> <span class="number">256</span> BUCKETS;</span><br></pre></td></tr></table></figure>
<p>Note that we specify a column (user_id) to base the bucketing.<br>Then we populate the table</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> hive.enforce.bucketing = <span class="literal">true</span>;  <span class="comment">-- (<span class="doctag">Note:</span> Not needed in Hive 2.x onward)</span></span><br><span class="line">FROM user_id</span><br><span class="line"><span class="keyword">INSERT</span> OVERWRITE <span class="keyword">TABLE</span> user_info_bucketed</span><br><span class="line"><span class="keyword">PARTITION</span> (ds=<span class="string">'2009-02-25'</span>)</span><br><span class="line"><span class="keyword">SELECT</span> userid, firstname, lastname <span class="keyword">WHERE</span> ds=<span class="string">'2009-02-25'</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Version 0.x and 1.x only</strong><br>The command <code>set hive.enforce.bucketing = true;</code> allows the correct number of reducers and the cluster by column to be automatically selected based on the table. Otherwise, you would need to set the number of reducers to be the same as the number of buckets as in <code>set mapred.reduce.tasks = 256;</code> and have a <code>CLUSTER BY ...</code> clause in the select.</p>
</blockquote>
<p>What can go wrong? As long as you use the syntax above and <code>set hive.enforce.bucketing = true</code> (for Hive 0.x and 1.x), the tables should be populated properly. Things can go wrong if the bucketing column type is different during the insert and on read, or if you manually cluster by a value thatâ€™s different from the table definition.</p>
<p><strong>Bucketed Sorted Tables</strong></p>
<blockquote>
<p>å‚è€ƒ<br><a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-TemporaryTables" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-TemporaryTables</a></p>
</blockquote>
<p>ä¾‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> page_view(viewTime <span class="built_in">INT</span>, userid <span class="built_in">BIGINT</span>,</span><br><span class="line">     page_url <span class="keyword">STRING</span>, referrer_url <span class="keyword">STRING</span>,</span><br><span class="line">     ip <span class="keyword">STRING</span> <span class="keyword">COMMENT</span> <span class="string">'IP Address of the User'</span>)</span><br><span class="line"> <span class="keyword">COMMENT</span> <span class="string">'This is the page view table'</span></span><br><span class="line"> PARTITIONED <span class="keyword">BY</span>(dt <span class="keyword">STRING</span>, country <span class="keyword">STRING</span>)</span><br><span class="line"> CLUSTERED <span class="keyword">BY</span>(userid) SORTED <span class="keyword">BY</span>(viewTime) <span class="keyword">INTO</span> <span class="number">32</span> BUCKETS</span><br><span class="line"> <span class="keyword">ROW</span> <span class="keyword">FORMAT</span> <span class="keyword">DELIMITED</span></span><br><span class="line">   <span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\001'</span></span><br><span class="line">   COLLECTION ITEMS <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\002'</span></span><br><span class="line">   <span class="keyword">MAP</span> <span class="keyword">KEYS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\003'</span></span><br><span class="line"> <span class="keyword">STORED</span> <span class="keyword">AS</span> SEQUENCEFILE;</span><br></pre></td></tr></table></figure>
<p>In the example above, the page_view table is bucketed (clustered by) userid and within each bucket the data is sorted in increasing order of viewTime. Such an organization allows the user to do efficient sampling on the clustered column - in this case userid. The sorting property allows internal operators to take advantage of the better-known data structure while evaluating queries, also increasing efficiency. MAP KEYS and COLLECTION ITEMS keywords can be used if any of the columns are lists or maps.</p>
<p>CLUSTERED BYå’ŒSORTED BYåˆ›å»ºå‘½ä»¤ä¸ä¼šå½±å“å°†æ•°æ®æ’å…¥è¡¨çš„æ–¹å¼ï¼Œè€Œåªä¼šå½±å“æ•°æ®çš„è¯»å–æ–¹å¼ã€‚ è¿™æ„å‘³ç€ç”¨æˆ·å¿…é¡»æ³¨æ„æ­£ç¡®åœ°æ’å…¥æ•°æ®ï¼Œæ–¹æ³•æ˜¯å°†reducerçš„æ•°é‡æŒ‡å®šä¸ºç­‰äºå­˜å‚¨æ¡¶çš„æ•°é‡ï¼Œå¹¶åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨CLUSTER BYå’ŒSORT BYå‘½ä»¤ã€‚</p>]]></content>
      <categories>
        <category>Hadoop</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
        <tag>Hive</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬”è¯•çŸ¥è¯†ç‚¹</title>
    <url>/2020/01/12/%E7%AC%94%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="Hbase"><a href="#Hbase" class="headerlink" title="Hbase"></a>Hbase</h4><p>HBaseæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ã€é¢å‘åˆ—çš„å¼€æºæ•°æ®åº“ã€‚</p>
<p>é¢˜ç›®æ¥æºäºï¼š<a href="https://www.cnblogs.com/cxchanpin/p/7381890.html" target="_blank" rel="noopener">https://www.cnblogs.com/cxchanpin/p/7381890.html</a></p>
<ul>
<li><p>HBaseæ¥æºäºå“ªç¯‡åšæ–‡ï¼Ÿ C</p>
<p>A. The Google File System</p>
<p>B. MapReduce</p>
<p>C. BigTable</p>
<p>D. Chubby</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä¸‹å¯¹HBaseçš„æå†™å™è¿°å“ªäº›æ˜¯æ­£ç¡®çš„ï¼Ÿ Bã€Cã€D</p>
<p>A. ä¸æ˜¯å¼€æºçš„</p>
<p>B. æ˜¯é¢å‘åˆ—çš„</p>
<p>C. æ˜¯åˆ†å¸ƒå¼çš„</p>
<p>D. æ˜¯ä¸€ç§NoSQLæ•°æ®åº“</p>
</li>
</ul>
<a id="more"></a>
<hr>
<ul>
<li><p>HBaseä¾é ï¼ˆï¼‰å­˜å‚¨åº•å±‚æ•°æ® A</p>
<p>A. HDFS</p>
<p>B. Hadoop</p>
<p>C. Memory</p>
<p>D. MapReduce</p>
</li>
</ul>
<hr>
<ul>
<li><p>HBaseä¾èµ–ï¼ˆï¼‰æä¾›æ¶ˆæ¯é€šä¿¡æœºåˆ¶ A</p>
<p>A. Zookeeper</p>
<p>B. Chubby</p>
<p>C. RPC</p>
<p>D. Socket</p>
</li>
</ul>
<hr>
<ul>
<li><p>HBaseä¾èµ–ï¼ˆï¼‰æä¾›å¼ºå¤§çš„è®¡ç®—èƒ½åŠ› D</p>
<p>A. Zookeeper</p>
<p>B. Chubby</p>
<p>C. RPC</p>
<p>D. MapReduce</p>
</li>
</ul>
<hr>
<ul>
<li><p>MapReduceä¸HBaseçš„å…³ç³»ï¼Œå“ªäº›æå†™å™è¿°æ˜¯æ­£ç¡®çš„ï¼Ÿ Bã€C</p>
<p>A. ä¸¤è€…ä¸å¯æˆ–ç¼ºã€‚MapReduceæ˜¯HBaseèƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œçš„ä¿è¯</p>
<p>B. ä¸¤è€…ä¸æ˜¯å¼ºå…³è”å…³ç³»ï¼Œæ²¡æœ‰MapReduceï¼ŒHBaseèƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œ</p>
<p>C. MapReduceèƒ½å¤Ÿç›´æ¥è¨ªé—®HBase</p>
<p>D. å®ƒä»¬ä¹‹é—´æ²¡æœ‰ä¸è®ºä»€ä¹ˆå…³ç³»</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä»¥ä¸‹å“ªäº›é€‰é¡¹æ­£ç¡®æå†™å™è¿°äº†HBaseçš„ç‰¹æ€§ï¼Ÿ Aã€Bã€Cã€D</p>
<p>A. é«˜å¯é æ€§</p>
<p>B. é«˜æ€§èƒ½</p>
<p>C. é¢å‘åˆ—</p>
<p>D. å¯ä¼¸ç¼©</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä»¥ä¸‹ä¸Zookeeperç±»ä¼¼çš„æ¡†æ¶æ˜¯ï¼ŸD</p>
<p>A. Protobuf</p>
<p>B. Java</p>
<p>C. Kafka </p>
<p>D. Chubby</p>
</li>
</ul>
<p>Kafkaæ˜¯ä¸€ä¸ªé«˜ååé‡åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿã€‚kafkaçš„æ•°æ®ä»…ä»…ä¼šé¡ºåºappendã€‚æ•°æ®çš„åˆ é™¤ç­–ç•¥æ˜¯ç´¯ç§¯åˆ°ä¸€å®šç¨‹åº¦æˆ–è€…è¶…è¿‡ä¸€å®šæ—¶é—´å†åˆ é™¤ã€‚Kafkaè¿˜æœ‰ä¸€ä¸ªç‹¬ç‰¹çš„åœ°æ–¹æ˜¯å°†æ¶ˆè´¹è€…ä¿¡æ¯ä¿å­˜åœ¨clientè€Œä¸æ˜¯MQserverã€‚è¿™æ ·serverå°±ä¸ç”¨è®°å½•æ¶ˆæ¯çš„æŠ•é€’è¿‡ç¨‹ï¼Œæ¯ä¸€ä¸ªclientéƒ½è‡ªå·±çŸ¥é“è‡ªå·±ä¸‹ä¸€æ¬¡åº”è¯¥ä»ä»€ä¹ˆåœ°æ–¹ä»€ä¹ˆä½ç½®è¯»å–æ¶ˆæ¯ã€‚æ¶ˆæ¯çš„æŠ•é€’è¿‡ç¨‹ä¹Ÿæ˜¯é‡‡ç”¨clientä¸»åŠ¨pullçš„æ¨¡å‹ï¼Œè¿™æ ·å¤§å¤§å‡è½»äº†serverçš„è´Ÿæ‹…ã€‚Kafkaè¿˜å¼ºè°ƒé™ä½æ•°æ®çš„åºåˆ—åŒ–å’Œæ‹·è´å¼€é”€ï¼Œå®ƒä¼šå°†ä¸€äº›æ¶ˆæ¯ç»„ç»‡æˆMessage Setåšæ‰¹é‡å­˜å‚¨å’Œå‘é€ï¼Œè€Œä¸”clientåœ¨pullæ•°æ®çš„æ—¶å€™ï¼Œå°½é‡ä»¥zero-copyçš„æ–¹å¼ä¼ è¾“ã€‚åˆ©ç”¨sendfileï¼ˆç›¸åº”javaé‡Œçš„ FileChannel.transferTo/transferFromï¼‰è¿™ç§é«˜çº§IOå‡½æ•°æ¥é™ä½æ‹·è´å¼€é”€ã€‚å¯è§ï¼Œkafkaæ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡ï¼Œç‰¹å®šäºæŸäº›åº”ç”¨çš„MQç³»ç»Ÿï¼Œè¿™ç§åå‘ç‰¹å®šé¢†åŸŸçš„MQç³»ç»Ÿæˆ‘é¢„è®¡ä¼šè¶Šæ¥è¶Šå¤šï¼Œå‚ç›´åŒ–çš„äº§å“ç­–ç•¥å€¼çš„è€ƒè™‘ã€‚</p>
<p>Chubbyé¦–å…ˆæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿã€‚Chubbyå¯ä»¥æä¾›æœºåˆ¶ä½¿å¾—clientå¯ä»¥åœ¨Chubby serviceä¸Šåˆ›å»ºæ–‡ä»¶å’Œè¿è¡Œä¸€äº›æ–‡ä»¶çš„åŸºæœ¬æ“ä½œã€‚è¯´å®ƒæ˜¯åˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¯ç”±äºä¸€ä¸ªChubby cellæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ç³»ç»Ÿã€‚ä¸€èˆ¬åŒ…æ‹¬äº†5å°æœºå™¨ï¼Œæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿæ˜¯éƒ¨ç½²åœ¨è¿™5å°æœºå™¨ä¸Šçš„ã€‚</p>
<p>ä»æ›´é«˜ä¸€ç‚¹çš„è¯­ä¹‰å±‚é¢ä¸Šï¼ŒChubbyæ˜¯ä¸€ä¸ª lock serviceã€‚ä¸€ä¸ªé’ˆå¯¹æ¾è€¦åˆçš„åˆ†å¸ƒå¼ç³»ç»Ÿçš„lock serviceã€‚æ‰€è°“lock serviceï¼Œå°±æ˜¯è¿™ä¸ªserviceå¯ä»¥æä¾›å¼€å‘è€…ç»ç»å¸¸ä½¿ç”¨çš„â€œé”â€ï¼Œâ€œè§£é”â€åŠŸèƒ½ã€‚é€šè¿‡Chubbyï¼Œä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸Šåƒä¸ªclientéƒ½å¯ä»¥ å¯¹äºæŸé¡¹èµ„æºè¿›è¡Œâ€œåŠ é”â€ï¼Œâ€œè§£é”â€ã€‚</p>
<p>é‚£ä¹ˆï¼ŒChubbyæ˜¯å¦‚ä½•å®ç°è¿™ç§â€œé”â€åŠŸèƒ½çš„ï¼Ÿå°±æ˜¯é€šè¿‡æ–‡ä»¶ã€‚Chubbyä¸­çš„â€œé”â€å°±æ˜¯æ–‡ä»¶ã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œåˆ›å»ºæ–‡ä»¶äº‹å®ä¸Šå°±æ˜¯è¿›è¡Œâ€œåŠ é”â€æ“ä½œï¼Œåˆ›å»ºæ–‡ä»¶æˆåŠŸçš„é‚£ä¸ªserveräº‹å®ä¸Šå°±æ˜¯æŠ¢å åˆ°äº†â€œé”â€ã€‚ç”¨æˆ·é€šè¿‡æ‰“å¼€ã€å…³é—­å’Œè¯»å–æ–‡ä»¶ã€‚è·å–å…±äº«é”æˆ–è€…ç‹¬å é”ï¼› è€Œä¸”é€šè¿‡é€šä¿¡æœºåˆ¶ï¼Œå‘ç”¨æˆ·å‘é€æ›´æ–°ä¿¡æ¯ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ã€‚Chubbyæ˜¯ä¸€ä¸ªlock serviceã€‚é€šè¿‡è¿™ä¸ªlock serviceèƒ½å¤Ÿè§£å†³åˆ†å¸ƒå¼ä¸­çš„ä¸€è‡´æ€§é—®é¢˜ã€‚è€Œè¿™ä¸ªlock serviceçš„å®ç°æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<hr>
<ul>
<li><p>ä»¥ä¸‹ä¸HDFSç±»ä¼¼çš„æ¡†æ¶æ˜¯ï¼ŸC</p>
<p>A. NTFS</p>
<p>B. FAT32</p>
<p>C. GFS (ä¹Ÿæ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œè°·æ­Œè‡ªå·±çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ)</p>
<p>D. EXT3</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä»¥ä¸‹å“ªäº›æ¦‚å¿µæ˜¯HBaseæ¡†æ¶ä¸­ä½¿ç”¨çš„ï¼ŸAã€C</p>
<p>A. HDFS</p>
<p>B. GridFS</p>
<p>C. Zookeeper</p>
<p>D. EXT3</p>
</li>
</ul>
<hr>
<h5 id="HFile"><a href="#HFile" class="headerlink" title="HFile"></a>HFile</h5><p><span style="color:red">HFileæ˜¯HBaseå­˜å‚¨æ•°æ®çš„æ–‡ä»¶ç»„ç»‡å½¢å¼</span></p>
<ul>
<li><p>HFileæ•°æ®æ ¼å¼ä¸­çš„Dataå­—æ®µç”¨äºï¼ˆï¼‰ã€‚A</p>
<p>A. å­˜å‚¨å®é™…çš„KeyValueæ•°æ®</p>
<p>B. å­˜å‚¨æ•°æ®çš„èµ·ç‚¹</p>
<p>C. æŒ‡å®šå­—æ®µçš„é•¿åº¦</p>
<p>D. å­˜å‚¨æ•°æ®å—çš„èµ·ç‚¹</p>
</li>
</ul>
<hr>
<ul>
<li><p>HFileæ•°æ®æ ¼å¼ä¸­çš„MetaIndexå­—æ®µç”¨äºï¼ˆï¼‰ã€‚D</p>
<p>A. Metaå—çš„é•¿åº¦</p>
<p>B. Metaå—çš„ç»“æŸç‚¹</p>
<p>C. Metaå—æ•°æ®å†…å®¹</p>
<p>D. Metaå—çš„èµ·å§‹ç‚¹</p>
</li>
</ul>
<hr>
<ul>
<li><p>HFileæ•°æ®æ ¼å¼ä¸­çš„Magicå­—æ®µç”¨äºï¼ˆï¼‰ã€‚A</p>
<p>A. å­˜å‚¨éšæœºæ•°ï¼Œé˜²æ­¢æ•°æ®æŸå</p>
<p>B. å­˜å‚¨æ•°æ®çš„èµ·ç‚¹</p>
<p>C. å­˜å‚¨æ•°æ®å—çš„èµ·ç‚¹</p>
<p>D. æŒ‡å®šå­—æ®µçš„é•¿åº¦</p>
</li>
</ul>
<hr>
<ul>
<li><p>HFileæ•°æ®æ ¼å¼ä¸­çš„KeyValueæ•°æ®æ ¼å¼ï¼Œä¸‹åˆ—é€‰é¡¹æå†™å™è¿°æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰ã€‚Aã€D</p>
<p>A. æ˜¯byte[]æ•°ç»„</p>
<p>B. æ²¡æœ‰å›ºå®šçš„ç»“æ„</p>
<p>C. æ•°æ®çš„å¤§å°æ˜¯å®šé•¿çš„</p>
<p>D. æœ‰å›ºå®šçš„ç»“æ„</p>
</li>
</ul>
<hr>
<ul>
<li><p>HFileæ•°æ®æ ¼å¼ä¸­çš„KeyValueæ•°æ®æ ¼å¼ä¸­Valueéƒ¨åˆ†æ˜¯ï¼ˆï¼‰ã€‚C</p>
<p>A. æ‹¥æœ‰å¤æ‚ç»“æ„çš„å­—ç¬¦ä¸²</p>
<p>B. å­—ç¬¦ä¸²</p>
<p>C. äºŒè¿›åˆ¶æ•°æ®</p>
<p>D. å‹ç¼©æ•°æ®</p>
</li>
</ul>
<hr>
<ul>
<li><p>HBaseä¸­çš„æ‰¹é‡è½½å…¥åº•å±‚ä½¿ç”¨ï¼ˆï¼‰å®ç°ã€‚A</p>
<p>A. MapReduce</p>
<p>B. Hive</p>
<p>C. Coprocessor</p>
<p>D. Bloom Filter</p>
</li>
</ul>
<hr>
<ul>
<li><p>HBaseæ€§èƒ½ä¼˜åŒ–åŒ…æ‹¬ä»¥ä¸‹çš„å“ªäº›é€‰é¡¹ï¼ŸAã€Bã€Cã€D</p>
<p>A. è¯»ä¼˜åŒ–</p>
<p>B. å†™ä¼˜åŒ–</p>
<p>C. é…ç½®ä¼˜åŒ–</p>
<p>D. JVMä¼˜åŒ–</p>
</li>
</ul>
<hr>
<ul>
<li><p>HBaseæ„å»ºäºŒçº§ç´¢å¼•çš„å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ Aã€B</p>
<p>A. MapReduce</p>
<p>B. Coprocessor</p>
<p>(HBaseåœ¨0.92ä¹‹åå¼•å…¥äº†åå¤„ç†å™¨(coprocessors)ï¼Œå®ç°ä¸€äº›æ¿€åŠ¨äººå¿ƒçš„æ–°ç‰¹æ€§ï¼šå¯ä»¥è½»æ˜“å»ºç«‹äºŒæ¬¡ç´¢å¼•ã€å¤æ‚è¿‡æ»¤å™¨(è°“è¯ä¸‹æ¨)ä»¥åŠè¨ªé—®æ§åˆ¶ç­‰)</p>
<p>C. Bloom Filter</p>
<p>D. Filter</p>
</li>
</ul>
<hr>
<ul>
<li><p>å…³äºHBaseäºŒçº§ç´¢å¼•çš„æå†™å™è¿°ã€‚å“ªäº›æ˜¯æ­£ç¡®çš„ï¼ŸAã€B</p>
<p>A. æ ¸å¿ƒæ˜¯å€’æ’è¡¨</p>
<p>B. äºŒçº§ç´¢å¼•æ¦‚å¿µæ˜¯ç›¸åº”Rowkeyè¿™ä¸ªâ€œä¸€çº§â€ç´¢å¼•</p>
<p>C. äºŒçº§ç´¢å¼•ä½¿ç”¨å¹³è¡¡äºŒå‰æ ‘</p>
<p>D. äºŒçº§ç´¢å¼•ä½¿ç”¨LSMç»“æ„</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä¸‹åˆ—å…³äºBloom Filterçš„æå†™å™è¿°æ­£ç¡®çš„æ˜¯ï¼ŸAã€C</p>
<p>A. æ˜¯ä¸€ä¸ªéå¸¸é•¿çš„äºŒè¿›åˆ¶å‘é‡å’Œä¸€ç³»åˆ—éšæœºæ˜ å°„å‡½æ•°</p>
<p>B. æ²¡æœ‰è¯¯ç®—ç‡</p>
<p>C. æœ‰ä¸€å®šçš„è¯¯ç®—ç‡</p>
<p>D. èƒ½å¤Ÿåœ¨Bloom Filterä¸­åˆ é™¤å…ƒç´ </p>
</li>
</ul>
<hr>
<ul>
<li><p>HBaseå®˜æ–¹ç‰ˆæœ¬å·èƒ½å¤Ÿå®‰è£…åœ¨ä»€ä¹ˆæ“ä½œç³»ç»Ÿä¸Šï¼ŸAã€Bã€C</p>
<p>A. CentOS</p>
<p>B. Ubuntu</p>
<p>C. RedHat</p>
<p>D. Windows</p>
</li>
</ul>
<hr>
<ul>
<li><p>HBaseè™šæ‹Ÿåˆ†å¸ƒå¼æ¨¡å¼é¡»è¦ï¼ˆï¼‰ä¸ªèŠ‚ç‚¹ï¼ŸA</p>
<p>A. 1</p>
<p>B. 2</p>
<p>C. 3</p>
<p>D. æœ€å°‘3ä¸ª</p>
</li>
</ul>
<hr>
<ul>
<li><p>HBaseåˆ†å¸ƒå¼æ¨¡å¼æœ€å¥½é¡»è¦ï¼ˆï¼‰ä¸ªèŠ‚ç‚¹ï¼ŸC</p>
<p>A. 1</p>
<p>B. 2</p>
<p>C. 3</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä¸‹åˆ—å“ªäº›é€‰é¡¹æ˜¯å®‰è£…HBaseå‰æ‰€å¿…é¡»å®‰è£…çš„ï¼ŸAã€B</p>
<p>A. æ“ä½œç³»ç»Ÿ</p>
<p>B. JDK</p>
<p>C. Shell Script</p>
<p>D. Java Code</p>
</li>
</ul>
<hr>
<ul>
<li><p>è§£å‹.tar.gzç»“å°¾çš„HBaseå‹ç¼©åŒ…ä½¿ç”¨çš„Linuxå‘½ä»¤æ˜¯ï¼ŸA</p>
<p>A. tar -zxvf</p>
<p>B. tar -zx</p>
<p>C. tar -s</p>
<p>D. tar -nf</p>
</li>
</ul>
<hr>
<ul>
<li>ä»Hadoop 2.7.3 ç‰ˆæœ¬å¼€å§‹ï¼ŒHDFSä¸­Block size çš„é»˜è®¤å¤§å°ä¸º128MB.</li>
</ul>
<hr>
<h4 id="SQLé¢è¯•é¢˜"><a href="#SQLé¢è¯•é¢˜" class="headerlink" title="SQLé¢è¯•é¢˜"></a>SQLé¢è¯•é¢˜</h4><p><a href="https://www.cnblogs.com/huolong-blog/p/7603454.html" target="_blank" rel="noopener">https://www.cnblogs.com/huolong-blog/p/7603454.html</a></p>
<ul>
<li><p>è§¦å‘å™¨çš„ä½œç”¨ï¼Ÿ</p>
<p>è§¦å‘å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯é€šè¿‡äº‹ä»¶æ¥è§¦å‘è€Œè¢«æ‰§è¡Œçš„ã€‚å®ƒå¯ä»¥å¼ºåŒ–çº¦æŸï¼Œæ¥ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œå¯ä»¥è·Ÿè¸ªæ•°æ®åº“å†…çš„æ“ä½œä»è€Œä¸å…è®¸æœªç»è®¸å¯çš„æ›´æ–°å’Œå˜åŒ–ã€‚å¯ä»¥è”çº§è¿ç®—ã€‚å¦‚ï¼ŒæŸè¡¨ä¸Šçš„è§¦å‘å™¨ä¸ŠåŒ…å«å¯¹å¦ä¸€ä¸ªè¡¨çš„æ•°æ®æ“ä½œï¼Œè€Œè¯¥æ“ä½œåˆä¼šå¯¼è‡´è¯¥è¡¨è§¦å‘å™¨è¢«è§¦å‘ã€‚</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿç”¨ä»€ä¹ˆæ¥è°ƒç”¨ï¼Ÿ</p>
<p>å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘çš„SQLè¯­å¥ï¼Œä¼˜ç‚¹æ˜¯å…è®¸æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œå°±æ˜¯è¯´åªéœ€åˆ›å»ºä¸€æ¬¡ï¼Œä»¥ååœ¨è¯¥ç¨‹åºä¸­å°±å¯ä»¥è°ƒç”¨å¤šæ¬¡ã€‚å¦‚æœæŸæ¬¡æ“ä½œéœ€è¦æ‰§è¡Œå¤šæ¬¡SQLï¼Œä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ¯”å•çº¯SQLè¯­å¥æ‰§è¡Œè¦å¿«ã€‚å¯ä»¥ç”¨ä¸€ä¸ªå‘½ä»¤å¯¹è±¡æ¥è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚</p>
</li>
</ul>
<hr>
<ul>
<li><p>ç´¢å¼•çš„ä½œç”¨ï¼Ÿå’Œå®ƒçš„ä¼˜ç‚¹ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ç´¢å¼•å°±ä¸€ç§ç‰¹æ®Šçš„æŸ¥è¯¢è¡¨ï¼Œæ•°æ®åº“çš„æœç´¢å¼•æ“å¯ä»¥åˆ©ç”¨å®ƒåŠ é€Ÿå¯¹æ•°æ®çš„æ£€ç´¢ã€‚ç®€å•åœ°è¯´ï¼Œç´¢å¼•æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨æ¥å¿«é€Ÿè®¿é—®æ•°æ®åº“è¡¨æ ¼æˆ–è€…è§†å›¾é‡Œçš„æ•°æ®ã€‚å®ƒå¾ˆç±»ä¼¼ä¸ç°å®ç”Ÿæ´»ä¸­ä¹¦çš„ç›®å½•ï¼Œä¸éœ€è¦æŸ¥è¯¢æ•´æœ¬ä¹¦å†…å®¹å°±å¯ä»¥æ‰¾åˆ°æƒ³è¦çš„æ•°æ®ã€‚ç´¢å¼•å¯ä»¥æ˜¯å”¯ä¸€çš„ï¼Œåˆ›å»ºç´¢å¼•å…è®¸æŒ‡å®šå•ä¸ªåˆ—æˆ–è€…æ˜¯å¤šä¸ªåˆ—ã€‚ç¼ºç‚¹æ˜¯å®ƒå‡æ…¢äº†æ•°æ®å½•å…¥çš„é€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†æ•°æ®åº“çš„å°ºå¯¸å¤§å°ã€‚</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿä»€ä¹ˆæ˜¯é”ï¼Ÿ</p>
<p>äº‹åŠ¡å°±æ˜¯è¢«ç»‘å®šåœ¨ä¸€èµ·ä½œä¸ºä¸€ä¸ªé€»è¾‘å·¥ä½œå•å…ƒçš„SQLè¯­å¥åˆ†ç»„ï¼Œå¦‚æœä»»ä½•ä¸€ä¸ªè¯­å¥æ“ä½œå¤±è´¥é‚£ä¹ˆæ•´ä¸ªæ“ä½œå°±å¤±è´¥ï¼Œä»¥åæ“ä½œå°±ä¼šå›æ»šåˆ°æ“ä½œå‰çŠ¶æ€ï¼Œæˆ–è€…æ˜¯ä¸Šä¸ªèŠ‚ç‚¹ã€‚ä¸ºäº†ç¡®ä¿è¦ä¹ˆæ‰§è¡Œï¼Œè¦ä¹ˆä¸æ‰§è¡Œï¼Œå°±å¯ä»¥ä½¿ç”¨äº‹åŠ¡ã€‚è¦å°†æœ‰ç»„è¯­å¥ä½œä¸ºäº‹åŠ¡è€ƒè™‘ï¼Œå°±éœ€è¦é€šè¿‡ACIDæµ‹è¯•ï¼Œå³åŸå­æ€§ï¼Œä¸€è‡´æ€§ï¼Œéš”ç¦»æ€§å’ŒæŒä¹…æ€§ã€‚</p>
<p>é”ï¼šåœ¨æ‰€æœ‰çš„DBMSä¸­ï¼Œé”æ˜¯å®ç°äº‹åŠ¡çš„å…³é”®ï¼Œé”å¯ä»¥ä¿è¯äº‹åŠ¡çš„å®Œæ•´æ€§å’Œå¹¶å‘æ€§ã€‚ä¸ç°å®ç”Ÿæ´»ä¸­é”ä¸€æ ·ï¼Œå®ƒå¯ä»¥ä½¿æŸäº›æ•°æ®çš„æ‹¥æœ‰è€…ï¼Œåœ¨æŸæ®µæ—¶é—´å†…ä¸èƒ½ä½¿ç”¨æŸäº›æ•°æ®æˆ–æ•°æ®ç»“æ„ã€‚</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä»€ä¹ˆå«è§†å›¾ï¼Ÿæ¸¸æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>è§†å›¾æ˜¯ä¸€ç§è™šæ‹Ÿçš„è¡¨ï¼Œå…·æœ‰å’Œç‰©ç†è¡¨ç›¸åŒçš„åŠŸèƒ½ã€‚å¯ä»¥å¯¹è§†å›¾è¿›è¡Œå¢ï¼Œæ”¹ï¼ŒæŸ¥ï¼Œæ“ä½œï¼Œè§†å›¾é€šå¸¸æ˜¯æœ‰ä¸€ä¸ªè¡¨æˆ–è€…å¤šä¸ªè¡¨çš„è¡Œæˆ–åˆ—çš„å­é›†ã€‚å¯¹è§†å›¾çš„ä¿®æ”¹ä¸å½±å“åŸºæœ¬è¡¨ã€‚å®ƒä½¿å¾—æˆ‘ä»¬è·å–æ•°æ®æ›´å®¹æ˜“ï¼Œç›¸æ¯”å¤šè¡¨æŸ¥è¯¢ã€‚</p>
<p>æ¸¸æ ‡ï¼šæ˜¯å¯¹æŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†ä½œä¸ºä¸€ä¸ªå•å…ƒæ¥æœ‰æ•ˆçš„å¤„ç†ã€‚æ¸¸æ ‡å¯ä»¥å®šåœ¨è¯¥å•å…ƒä¸­çš„ç‰¹å®šè¡Œï¼Œä»ç»“æœé›†çš„å½“å‰è¡Œæ£€ç´¢ä¸€è¡Œæˆ–å¤šè¡Œã€‚å¯ä»¥å¯¹ç»“æœé›†å½“å‰è¡Œåšä¿®æ”¹ã€‚ä¸€èˆ¬ä¸ä½¿ç”¨æ¸¸æ ‡ï¼Œä½†æ˜¯éœ€è¦é€æ¡å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œæ¸¸æ ‡æ˜¾å¾—ååˆ†é‡è¦ã€‚æ¸¸æ ‡ç”¨äºå®šä½ç»“æœé›†çš„è¡Œã€‚</p>
</li>
</ul>
<h4 id="ç®—æ³•å·¥ç¨‹å¸ˆèƒ½åŠ›è¯„ä¼°ï¼ˆç‰›å®¢ï¼‰"><a href="#ç®—æ³•å·¥ç¨‹å¸ˆèƒ½åŠ›è¯„ä¼°ï¼ˆç‰›å®¢ï¼‰" class="headerlink" title="ç®—æ³•å·¥ç¨‹å¸ˆèƒ½åŠ›è¯„ä¼°ï¼ˆç‰›å®¢ï¼‰"></a>ç®—æ³•å·¥ç¨‹å¸ˆèƒ½åŠ›è¯„ä¼°ï¼ˆç‰›å®¢ï¼‰</h4><p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581870524984.png" alt="1581870524984"></p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581864564384.png" alt="1581864564384"></p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581864653934.png" alt="1581864653934"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581864678069.png" alt="1581864678069"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581864809633.png" alt="1581864809633"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581864854892.png" alt="1581864854892"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581864889064.png" alt="1581864889064"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581864916612.png" alt="1581864916612"></p>
<p>Bæ ‘ç›¸å…³çŸ¥è¯†è§<a href="https://qypx.github.io/2020/02/16/Bæ ‘ä»‹ç»/">è¿™é‡Œ</a></p>
<hr>
<ul>
<li>å…·æœ‰3ä¸ªç»“ç‚¹çš„äºŒå‰æ ‘æœ‰å‡ ç§å½¢æ€ï¼Ÿ</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581865489812.png" alt="1581865489812"></p>
<p>è§£æï¼š</p>
<pre><code> è¿™æ˜¯ç»„åˆè®¡æ•°é—®é¢˜ï¼Œæœ€å¸¸è§çš„catalanæ•°ï¼ŒC(n)=(1/(n+1))*((2*n)!/(n!*n!)) 

 3ä¸ªèŠ‚ç‚¹è¯¦ç»†å¦‚å›¾ï¼š 
</code></pre><p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581865572237.png" alt="1581865572237"></p>
<hr>
<ul>
<li>å·²çŸ¥ä¸€æ£µäºŒå‰æ ‘å‰åºéå†å’Œä¸­åºéå†åˆ†åˆ«ä¸º <code>ABDEGCFH</code> å’Œ <code>DBGEACHF</code>ï¼Œåˆ™è¯¥äºŒå‰æ ‘çš„ååºéå†ä¸ºå¤šå°‘ï¼Ÿ</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581865717797.png" alt="1581865717797"></p>
<p>è§£æï¼š</p>
<p><strong>å‰åºéå†ç¡®å®šæ ¹èŠ‚ç‚¹ï¼Œä¸­åºéå†ç¡®å®šå·¦å³å­æ ‘</strong>ã€‚</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581866226956.png" alt="1581866226956"></p>
<hr>
<ul>
<li>å·²çŸ¥æ•°æ®è¡¨Aä¸­æ¯ä¸ªå…ƒç´ è·å…¶æœ€ç»ˆä½ç½®ä¸è¿œï¼Œä¸ºèŠ‚çœæ—¶é—´æ’åºï¼Œåº”é‡‡ç”¨ä»€ä¹ˆæ–¹æ³•æ’åºï¼Ÿ</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581866323542.png" alt="1581866323542"></p>
<p>è§£æï¼š</p>
<ul>
<li><p>æ’å…¥æ’åºï¼šå¦‚æœå¹³å‡æ¯ä¸ªå…ƒç´ ç¦»æœ€ç»ˆä½ç½®ç›¸è·cä¸ªå…ƒç´ ï¼Œåˆ™å…¶å¤æ‚åº¦ä¸ºO(cn)ï¼Œä¸€å…±nè¶Ÿï¼Œæ¯æ¬¡æ¯”è¾ƒcæ¬¡ï¼› </p>
</li>
<li><p>å¿«é€Ÿæ’åºï¼šæœ€å¥½çš„ã€å¹³å‡çš„å¤æ‚åº¦éƒ½æ˜¯O(nlog(n))ï¼Œå¦‚æœæ¯æ¬¡é€‰æ‹©çš„ä¸­é—´æ•°éƒ½æœ€å°æˆ–æœ€å¤§ï¼Œé‚£å°±æ˜¯æœ€åçš„æƒ…å†µï¼Œå¤æ‚åº¦æ˜¯O(n*n)ï¼›æ‰€ä»¥å¿«é€Ÿæ’åºå’Œå…ƒç´ çš„ä½ç½®æ²¡æœ‰å…³ç³»ï¼Œè·Ÿé€‰æ‹©çš„ä¸­é—´æ•°æœ‰å…³ã€‚ </p>
</li>
<li><p>å †æ’åºï¼šå¤æ‚åº¦ä¸€ç›´æ˜¯O(nlog(n)); </p>
</li>
<li><p>ç›´æ¥é€‰æ‹©æ’åºï¼šè·Ÿå…ƒç´ ä½ç½®æ²¡æœ‰å…³ç³»ï¼Œéƒ½è¦éå†néï¼Œæ¯éæ‰¾å‡ºæœ€å°æˆ–æœ€å¤§æ•°æ¥ï¼Œå¤æ‚åº¦æ˜¯O(n*n)ï¼› </p>
<p>ç­”æ¡ˆæ˜¯æ’å…¥æ’åºã€‚ </p>
</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581866854874.png" alt="1581866854874"></p>
<hr>
<ul>
<li>å°†Næ¡é•¿åº¦å‡ä¸ºMçš„æœ‰åºé“¾è¡¨è¿›è¡Œåˆå¹¶ï¼Œåˆå¹¶ä»¥åçš„é“¾è¡¨ä¹Ÿä¿æŒæœ‰åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º()?</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581867137493.png" alt="1581867137493"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581867157973.png" alt="1581867157973"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581867257640.png" alt="1581867257640"></p>
<p>è§£æï¼šè¿™ä¸ªæ˜¯å¡ç‰¹å…°æ•°çš„ç»å…¸åº”ç”¨ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜ä¸æ˜¯ä¸€ä¸¤å¥è¯èƒ½è¯´å¾—æ¸…çš„ã€‚</p>
<p>å¯é‡‡å–ä»£å…¥æ³•ï¼Œn=1æˆ–n=2ä»£å…¥ï¼Œå‡å¯å¾—åˆ°æ­£ç¡®ç­”æ¡ˆã€‚</p>
<hr>
<ul>
<li>T(n) = 25T(n/5)+n^2çš„æ—¶é—´å¤æ‚åº¦ï¼Ÿ</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581867385697.png" alt="1581867385697"></p>
<p>è§£æï¼šMaster Theorem</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581867450572.png" alt="1581867450572"></p>
<hr>
<ul>
<li>è¿ç»­è‡ªç„¶æ•°ä¹‹å’Œä¸º1000çš„å…±æœ‰å‡ ç»„ï¼Ÿï¼ˆmï¼Œnéƒ½ä¸ºè‡ªç„¶æ•°ï¼Œå•ç‹¬1ä¸ªæ•°ä¹Ÿç®—ä½œâ€œè¿ç»­è‡ªç„¶æ•°â€ï¼‰</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581868980583.png" alt="1581868980583"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869129932.png" alt="1581869129932"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869211656.png" alt="1581869211656"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869344795.png" alt="1581869344795"></p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869369324.png" alt="1581869369324"></p>
<hr>
<ul>
<li>å†™å‡ºa*(b-c*d)+e-f/g*(h+i*j-k)çš„é€†æ³¢å…°è¡¨è¾¾å¼ã€‚</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869439352.png" alt="1581869439352"></p>
<p><a href="https://zh.wikipedia.org/wiki/%E9%80%86%E6%B3%A2%E5%85%B0%E8%A1%A8%E7%A4%BA%E6%B3%95" target="_blank" rel="noopener">é€†æ³¢å…°è¡¨è¾¾å¼</a></p>
<hr>
<ul>
<li>ä¸‹åˆ—å…³äºçº¿æ€§è¡¨ï¼ŒäºŒå‰å¹³è¡¡æ ‘ï¼Œå“ˆå¸Œè¡¨å­˜å‚¨æ•°æ®çš„ä¼˜åŠ£æè¿°é”™è¯¯çš„æ˜¯ï¼Ÿ</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869526156.png" alt="1581869526156"></p>
<p>è§£æï¼š<strong>åœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­æ’å…¥ç»“ç‚¹è¦éšæ—¶ä¿è¯æ’å…¥åæ•´æ£µäºŒå‰æ ‘æ˜¯å¹³è¡¡çš„ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦é€šè¿‡ä¸€æ¬¡æˆ–å¤šæ¬¡æ ‘æ—‹è½¬æ¥é‡æ–°å¹³è¡¡è¿™ä¸ªæ ‘</strong>ã€‚</p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869693305.png" alt="1581869693305"></p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869715738.png" alt="1581869715738"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869761466.png" alt="1581869761466"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869840257.png" alt="1581869840257"></p>
<hr>
<ul>
<li>å¦‚æœä¸€ä¸ªå †æ ˆçš„å…¥æ ˆåºåˆ—æ˜¯A,B,C,D,E,åˆ™å †æ ˆçš„ä¸å¯èƒ½è¾“å‡ºé¡ºåºæ˜¯ï¼ˆï¼‰ã€‚</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581869901758.png" alt="1581869901758"></p>
<hr>
<ul>
<li>è‹¥ä»¥{4,5,6,7,8}ä½œä¸ºå¶å­ç»“ç‚¹çš„æƒå€¼æ„é€ å“ˆå¤«æ›¼æ ‘ï¼Œåˆ™å…¶å¸¦æƒè·¯å¾„é•¿åº¦æ˜¯ï¼ˆï¼‰ã€‚</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581870076226.png" alt="1581870076226"></p>
<p>è§£æï¼š</p>
<p><img src="https://uploadfiles.nowcoder.com/images/20161031/6306378_1477892872536_FB5C81ED3A220004B71069645F112867" alt="img"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581870138420.png" alt="1581870138420"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581870210402.png" alt="1581870210402"></p>
<hr>
<ul>
<li>è®¾æŸé¢—äºŒå‰æ ‘ä¸­æœ‰360ä¸ªç»“ç‚¹ï¼Œåˆ™è¯¥äºŒå‰æ ‘çš„æœ€å°é«˜åº¦æ˜¯ï¼Ÿ(åŒ…æ‹¬æ ¹èŠ‚ç‚¹)</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581870300117.png" alt="1581870300117"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1581870472998.png" alt="1581870472998"></p>
<hr>
<h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><hr>
<ul>
<li><p>æ—¶é—´åºåˆ—æ¨¡å‹ä¸­ï¼Œå“ªä¸€ä¸ªæ¨¡å‹å¯ä»¥è¾ƒå¥½çš„æ‹Ÿåˆæ³¢åŠ¨æ€§çš„åˆ†æå’Œé¢„æµ‹ (D)</p>
<p>A. ARæ¨¡å‹</p>
<p>B. MAæ¨¡å‹</p>
<p>C. ARMAæ¨¡å‹</p>
<p>D. GARCHæ¨¡å‹</p>
</li>
</ul>
<p>è§£æï¼š</p>
<p>å‚è€ƒ <a href="https://blog.csdn.net/s1491695565/article/details/52093003" target="_blank" rel="noopener">https://blog.csdn.net/s1491695565/article/details/52093003</a></p>
<p>æ—¶é—´åºåˆ—ä¸­å¸¸ç”¨é¢„æµ‹æŠ€æœ¯  ä¸€ä¸ªæ—¶é—´åºåˆ—æ˜¯ä¸€ç»„å¯¹äºæŸä¸€å˜é‡è¿ç»­æ—¶é—´ç‚¹æˆ–è¿ç»­æ—¶æ®µä¸Šçš„è§‚æµ‹å€¼ã€‚</p>
<p><strong>1.  ç§»åŠ¨å¹³å‡æ³• (MA)</strong></p>
<p>1.1. ç®€å•ç§»åŠ¨å¹³å‡æ³•</p>
<p>è®¾æœ‰ä¸€æ—¶é—´åºåˆ—y1,y2,â€¦, åˆ™æŒ‰æ•°æ®ç‚¹çš„é¡ºåºé€ç‚¹æ¨ç§»æ±‚å‡ºNä¸ªæ•°çš„å¹³å‡æ•°ï¼Œå³å¯å¾—åˆ°ä¸€æ¬¡ç§»åŠ¨å¹³å‡æ•°.</p>
<p> 1.2 è¶‹åŠ¿ç§»åŠ¨å¹³å‡æ³•  </p>
<p>å½“æ—¶é—´åºåˆ—æ²¡æœ‰æ˜æ˜¾çš„è¶‹åŠ¿å˜åŠ¨æ—¶ï¼Œä½¿ç”¨ä¸€æ¬¡ç§»åŠ¨å¹³å‡å°±èƒ½å¤Ÿå‡†ç¡®åœ°åæ˜ å®é™…æƒ…å†µï¼Œç›´æ¥ç”¨ç¬¬tå‘¨æœŸçš„ä¸€æ¬¡ç§»åŠ¨å¹³å‡æ•°å°±å¯é¢„æµ‹ç¬¬t+1å‘¨æœŸä¹‹å€¼ã€‚</p>
<p>æ—¶é—´åºåˆ—å‡ºç°çº¿æ€§å˜åŠ¨è¶‹åŠ¿æ—¶ï¼Œç”¨ä¸€æ¬¡ç§»åŠ¨å¹³å‡æ•°æ¥é¢„æµ‹å°±ä¼šå‡ºç°æ»ååå·®ã€‚ä¿®æ­£çš„æ–¹æ³•æ˜¯åœ¨ä¸€æ¬¡ç§»åŠ¨å¹³å‡çš„åŸºç¡€ä¸Šå†åšäºŒæ¬¡ç§»åŠ¨å¹³å‡ï¼Œåˆ©ç”¨ç§»åŠ¨å¹³å‡æ»ååå·®çš„è§„å¾‹æ‰¾å‡ºæ›²çº¿çš„å‘å±•æ–¹å‘å’Œå‘å±•è¶‹åŠ¿ï¼Œç„¶åæ‰å»ºç«‹ç›´çº¿è¶‹åŠ¿çš„é¢„æµ‹æ¨¡å‹ã€‚æ•…ç§°ä¸ºè¶‹åŠ¿ç§»åŠ¨å¹³å‡æ³•ã€‚</p>
<p><strong>2.  è‡ªå›å½’æ¨¡å‹(AR)</strong></p>
<p>ARæ¨¡å‹æ˜¯ä¸€ç§çº¿æ€§é¢„æµ‹ï¼Œå³å·²çŸ¥Nä¸ªæ•°æ®ï¼Œå¯ç”±æ¨¡å‹æ¨å‡ºç¬¬Nç‚¹å‰é¢æˆ–åé¢çš„æ•°æ®ï¼ˆè®¾æ¨å‡ºPç‚¹ï¼‰.</p>
<p>æœ¬è´¨ç±»ä¼¼äºæ’å€¼ï¼Œå…¶ç›®çš„éƒ½æ˜¯ä¸ºäº†å¢åŠ æœ‰æ•ˆæ•°æ®ï¼Œåªæ˜¯ARæ¨¡å‹æ˜¯ç”±Nç‚¹é€’æ¨ï¼Œè€Œæ’å€¼æ˜¯ç”±ä¸¤ç‚¹ï¼ˆæˆ–å°‘æ•°å‡ ç‚¹ï¼‰å»æ¨å¯¼å¤šç‚¹ï¼Œæ‰€ä»¥ARæ¨¡å‹è¦æ¯”æ’å€¼æ–¹æ³•æ•ˆæœæ›´å¥½ã€‚</p>
<p><strong>3. è‡ªå›å½’æ»‘åŠ¨å¹³å‡æ¨¡å‹(ARMA)</strong></p>
<p>å…¶å»ºæ¨¡æ€æƒ³å¯æ¦‚æ‹¬ä¸ºï¼šé€æ¸å¢åŠ æ¨¡å‹çš„é˜¶æ•°ï¼Œæ‹Ÿåˆè¾ƒé«˜é˜¶æ¨¡å‹ï¼Œç›´åˆ°å†å¢åŠ æ¨¡å‹çš„é˜¶æ•°è€Œå‰©ä½™æ®‹å·®æ–¹å·®ä¸å†æ˜¾è‘—å‡å°ä¸ºæ­¢ã€‚</p>
<p><strong>4. GARCHæ¨¡å‹</strong></p>
<p>å›å½’æ¨¡å‹ã€‚é™¤å»å’Œæ™®é€šå›å½’æ¨¡å‹ç›¸åŒçš„ä¹‹å¤„ï¼ŒGARCHå¯¹è¯¯å·®çš„æ–¹å·®è¿›è¡Œäº†è¿›ä¸€æ­¥çš„å»ºæ¨¡ã€‚ç‰¹åˆ«é€‚ç”¨äºæ³¢åŠ¨æ€§çš„åˆ†æå’Œé¢„æµ‹ã€‚</p>
<p><strong>4. æŒ‡æ•°å¹³æ»‘æ³•</strong></p>
<p>ç§»åŠ¨å¹³å‡æ³•çš„é¢„æµ‹å€¼å®è´¨ä¸Šæ˜¯ä»¥å‰è§‚æµ‹å€¼çš„åŠ æƒå’Œï¼Œä¸”å¯¹ä¸åŒæ—¶æœŸçš„æ•°æ®ç»™äºˆç›¸åŒçš„åŠ æƒã€‚è¿™å¾€å¾€ä¸ç¬¦åˆå®é™…æƒ…å†µã€‚</p>
<p>æŒ‡æ•°å¹³æ»‘æ³•åˆ™å¯¹ç§»åŠ¨å¹³å‡æ³•è¿›è¡Œäº†æ”¹è¿›å’Œå‘å±•ï¼Œå…¶åº”ç”¨è¾ƒä¸ºå¹¿æ³›ã€‚</p>
<p>åŸºæœ¬æ€æƒ³éƒ½æ˜¯ï¼šé¢„æµ‹å€¼æ˜¯ä»¥å‰è§‚æµ‹å€¼çš„åŠ æƒå’Œï¼Œä¸”å¯¹ä¸åŒçš„æ•°æ®ç»™äºˆä¸åŒçš„æƒï¼Œæ–°æ•°æ®ç»™è¾ƒå¤§çš„æƒï¼Œæ—§æ•°æ®ç»™è¾ƒå°çš„æƒã€‚</p>
<p>æ ¹æ®å¹³æ»‘æ¬¡æ•°ä¸åŒï¼ŒæŒ‡æ•°å¹³æ»‘æ³•åˆ†ä¸ºï¼šä¸€æ¬¡æŒ‡æ•°å¹³æ»‘æ³•ã€äºŒæ¬¡æŒ‡æ•°å¹³æ»‘æ³•å’Œä¸‰æ¬¡æŒ‡æ•°å¹³æ»‘æ³•ç­‰ã€‚</p>
<hr>
<ul>
<li><p>ä¸‹é¢å¯¹é›†æˆå­¦ä¹ æ¨¡å‹ä¸­çš„å¼±å­¦ä¹ è€…æè¿°é”™è¯¯çš„æ˜¯ (C)</p>
<p>A. ä»–ä»¬ç»å¸¸ä¸ä¼šè¿‡æ‹Ÿåˆ</p>
<p>B. ä»–ä»¬é€šå¸¸å¸¦æœ‰é«˜åå·®ï¼Œæ‰€ä»¥å…¶å¹¶ä¸èƒ½è§£å†³å¤æ‚å­¦ä¹ é—®é¢˜</p>
<p>C. ä»–ä»¬é€šå¸¸ä¼šè¿‡æ‹Ÿåˆ</p>
</li>
</ul>
<p>å¼±å­¦ä¹ å™¨ï¼šç•¥ä¼˜äºéšæœºçŒœæµ‹çš„å­¦ä¹ å™¨ã€‚ï¼ˆè¥¿ç“œä¹¦ï¼‰</p>
<hr>
<ul>
<li><p>xgboostå¯¹ç¼ºå¤±å€¼çš„å¤„ç†æ–¹æ³•ï¼š</p>
<p>æŠŠç¼ºå¤±å€¼åˆ†åˆ«æ”¾åˆ°å·¦å¶å­èŠ‚ç‚¹å’Œå³å¶å­èŠ‚ç‚¹ä¸­ï¼Œè®¡ç®—å¢ç›Šã€‚å“ªä¸ªå¢ç›Šå¤§å°±æ”¾åˆ°å“ªä¸ªå¶å­èŠ‚ç‚¹ã€‚</p>
</li>
</ul>
<hr>
<ul>
<li>Hiveå››å¤§è¡¨ç±»å‹ï¼š<ul>
<li>å†…éƒ¨è¡¨</li>
<li>å¤–éƒ¨è¡¨</li>
<li>åˆ†åŒºè¡¨</li>
<li>æ¡¶è¡¨ï¼ˆæˆ–å«åˆ†æ¡¶è¡¨ï¼‰</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p>èƒ½åœ¨O(1)æ—¶é—´å†…è®¿é—®çº¿æ€§è¡¨çš„ç¬¬iä¸ªå…ƒç´ çš„ç»“æ„æ˜¯ ( )</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582361004130.png" alt="1582361004130"></p>
</li>
</ul>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582360970415.png" alt="1582360970415"></p>
<hr>
<ul>
<li><p>åªè¦æ•°æ®å…ƒç´ ä¿æŒæœ‰åºï¼Œåˆ™æŸ¥æ‰¾æ—¶å°±å¯ä»¥é‡‡ç”¨æŠ˜åŠæŸ¥æ‰¾æ–¹æ³• ( )</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582361114265.png" alt="1582361114265"></p>
</li>
</ul>
<hr>
<ul>
<li><p>ä¸€ä¸ªé•¿åº¦ä¸º32çš„æœ‰åºè¡¨ï¼Œè‹¥é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾ä¸€ä¸ªä¸å­˜åœ¨çš„å…ƒç´ ï¼Œåˆ™æ¯”è¾ƒæ¬¡æ•°æœ€å¤šæ˜¯ ( )</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582361203067.png" alt="1582361203067"></p>
</li>
</ul>
<hr>
<ul>
<li><p>åˆ†å—æŸ¥æ‰¾çš„åŸºæœ¬æ€æƒ³æ˜¯é¦–å…ˆåœ¨ç´¢å¼•è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œä»¥ä¾¿ç¡®å®šç»™å®šçš„å…³é”®å­—å¯èƒ½å­˜åœ¨çš„å—å·ï¼Œç„¶åå†åœ¨ç›¸åº”çš„å—å†…è¿›è¡Œé¡ºåºæŸ¥æ‰¾ã€‚( )</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582361360734.png" alt="1582361360734"></p>
</li>
</ul>
<hr>
<ul>
<li><p>ä¸‹åˆ—è¯´æ³•ä¸­é”™è¯¯çš„æ˜¯( )</p>
<p>A. æ’å…¥æ’åºæŸäº›æƒ…å†µä¸‹å¤æ‚åº¦ä¸ºO(n)</p>
<p>B. æ’åºäºŒå‰æ ‘å…ƒç´ æŸ¥æ‰¾çš„å¤æ‚åº¦å¯èƒ½ä¸ºO(n)</p>
<p>C. å¯¹äºæœ‰åºåˆ—è¡¨çš„æ’åºæœ€å¿«çš„æ˜¯å¿«é€Ÿæ’åº</p>
<p>D. åœ¨æœ‰åºåˆ—è¡¨ä¸­é€šè¿‡äºŒåˆ†æŸ¥æ‰¾çš„å¤æ‚åº¦ä¸€å®šä¸ºO(logn)</p>
</li>
</ul>
<p>ç­”æ¡ˆï¼šC</p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582363721071.png" alt="1582363721071"></p>
<p>Cé€‰é¡¹åº”è¯¥ä¸ºæ’å…¥æ’åºï¼Ÿ</p>
<hr>
<ul>
<li><p>åœ¨é•¿åº¦ä¸ºnçš„é¡ºåºçº¿æ€§è¡¨ä¸­é¡ºåºæŸ¥æ‰¾å€¼ä¸ºxçš„å…ƒç´ æ—¶ï¼ŒæŸ¥æ‰¾æˆåŠŸæ—¶çš„å¹³å‡æŸ¥æ‰¾é•¿åº¦ï¼ˆå‡å®šæŸ¥æ‰¾æ¯ä¸ªå…ƒç´ çš„æ¦‚ç‡å‡ç›¸ç­‰ï¼‰ä¸ºï¼ˆï¼‰</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582363882820.png" alt="1582363882820"></p>
</li>
</ul>
<hr>
<ul>
<li><p>æŠ˜åŠæŸ¥æ‰¾ä¸äºŒå…ƒæŸ¥æ‰¾æ ‘çš„æ—¶é—´æ€§èƒ½åœ¨æœ€åçš„æƒ…å†µä¸‹æ˜¯ç›¸åŒçš„ ( )</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582363973719.png" alt="1582363973719"></p>
</li>
</ul>
<hr>
<ul>
<li><p>ä½¿ç”¨KMPç®—æ³•åœ¨æ–‡æœ¬ä¸²Sä¸­æ‰¾mæ¨¡å¼ä¸²Pæ˜¯ä¸€ç§å¸¸è§çš„æ–¹æ³•ã€‚å‡è®¾S=P={xyxyyxxyx}ï¼Œäº¦å³å°†Så¯¹è‡ªå·±è¿›è¡ŒåŒ¹é…ï¼ŒåŒ¹é…è¿‡ç¨‹ä¸­æ­£ç¡®çš„nextæ•°ç»„æ˜¯( )</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582364106629.png" alt="1582364106629"></p>
</li>
</ul>
<p>è§£æï¼šå‚è€ƒ <a href="https://blog.csdn.net/qq_37969433/article/details/82947411" target="_blank" rel="noopener">https://blog.csdn.net/qq_37969433/article/details/82947411</a></p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582364410421.png" alt="1582364410421"></p>
<hr>
<h5 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h5><p><span style="color:red">åŸºé€‰å½’å †ä¸å˜ï¼ˆè¿è¡Œæ—¶é—´ä¸å‘ç”Ÿå˜åŒ–ï¼Œä¸åˆå§‹çŠ¶æ€æ— å…³ï¼‰</span></p>
<p><span style="color:red">å¿«é€‰å¸Œå †ä¸ç¨³ï¼ˆæ˜¯ä¸ç¨³å®šçš„æ’åºï¼‰ </span></p>
<ul>
<li><p>å·²ç»™å›¾ï¼Œ( )æ˜¯è¯¥å›¾çš„æ­£ç¡®çš„æ‹“æ‰‘æ’åºåºåˆ—</p>
<p>â€‹    <img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582371132616.png" alt="1582371132616"></p>
</li>
<li><p>åœ¨ç”¨é‚»æ¥è¡¨è¡¨ç¤ºå›¾æ—¶ï¼Œæ‹“æ‰‘æ’åºç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸º( )</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582374420342.png" alt="1582374420342"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582374447488.png" alt="1582374447488"></p>
</li>
</ul>
<hr>
<ul>
<li><p>ä¸‹é¢çš„æ’åºæ–¹æ³•ä¸­ï¼Œå…³é”®å­—æ¯”è¾ƒæ¬¡æ•°ä¸è®°å½•çš„åˆå§‹æ’åºæ— å…³çš„æ˜¯( )</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582371218204.png" alt="1582371218204"></p>
</li>
</ul>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582371246385.png" alt="1582371246385"></p>
<p><img src="https://qypx.github.io/2020/01/10/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/1578640411160.png" alt="1578640411160"></p>
<p><span style="color:red">åŸºé€‰å½’å †ä¸å˜ï¼ˆè¿è¡Œæ—¶é—´ä¸å‘ç”Ÿå˜åŒ–ï¼Œä¸åˆå§‹çŠ¶æ€æ— å…³ï¼‰</span></p>
<hr>
<ul>
<li><p>ä¸‹åˆ—æ’åºç®—æ³•ä¸ç¨³å®šçš„æœ‰ ( )</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582372396395.png" alt="1582372396395"></p>
</li>
</ul>
<p><span style="color:red">å¿«é€‰å¸Œå †ä¸ç¨³ï¼ˆæ˜¯ä¸ç¨³å®šçš„æ’åºï¼‰ </span></p>
<hr>
<ul>
<li><p>ä¸‹åˆ—è¯´æ³•é”™è¯¯çš„æ˜¯( )</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582372339161.png" alt="1582372339161"></p>
</li>
</ul>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582372667692.png" alt="1582372667692"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582372732725.png" alt="1582372732725"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582372932412.png" alt="1582372932412"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582372984413.png" alt="1582372984413"></p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582373764364.png" alt="1582373764364"></p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582373826092.png" alt="1582373826092"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582373868980.png" alt="1582373868980"></p>
<p>ä»¥ä¸‹æ¥æºäºç™¾åº¦ç™¾ç§‘ï¼š</p>
<p>åŸºæ•°æ’åºï¼šæœ€ä½ä½ä¼˜å…ˆ(Least Significant Digit first)æ³•ï¼Œç®€ç§°LSDæ³•ï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582374257291.png" alt="1582374257291"></p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582374278992.png" alt="1582374278992"></p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582374296292.png" alt="1582374296292"></p>
<hr>
<ul>
<li><p>ä¸‹åˆ—æ’åºç®—æ³•ä¸­ï¼Œ( ) åœ¨æŸè¶Ÿæ’åºç»“æŸåä¸ä¸€å®šèƒ½é€‰å‡ºä¸€ä¸ªå…ƒç´ æ”¾åˆ°å…¶æœ€ç»ˆä½ç½®ä¸Š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582374591201.png" alt="1582374591201"></p>
</li>
</ul>
<p>è§£æï¼š</p>
<p>é€‰ æ‹© æ’ åº (Selection sort)ï¼š æ˜¯ ä¸€ ç§ ç®€ å• ç›´ è§‚ çš„ æ’ åº ç®— æ³• ã€‚ å®ƒ çš„ å·¥ ä½œ åŸ ç† æ˜¯ æ¯ ä¸€ æ¬¡ ä» å¾… æ’ åº çš„ æ•° æ® å…ƒ ç´  ä¸­ é€‰ å‡º æœ€ å° ï¼ˆ æˆ– æœ€ å¤§ ï¼‰ çš„ ä¸€ ä¸ªå…ƒ ç´  ï¼Œ å­˜ æ”¾ åœ¨ åº åˆ— çš„ èµ· å§‹ ä½ ç½® ï¼Œ ç›´ åˆ° å…¨ éƒ¨ å¾… æ’ åº çš„ æ•° æ® å…ƒ ç´  æ’ å®Œ ï¼Œæ‰€ ä»¥ æ¯ ä¸€ è¶Ÿ é€‰ æ‹© çš„ å…ƒ ç´  éƒ½ ä¼š æ”¾ åœ¨ ä»– çš„ æœ€ ç»ˆ ä½ ç½® </p>
<p>å†’ æ³¡ æ’ åº ï¼šå®ƒ é‡ å¤ åœ° èµ° è®¿ è¿‡ è¦ æ’ åº çš„ æ•° åˆ— ï¼Œ ä¸€ æ¬¡ æ¯” è¾ƒ ä¸¤ ä¸ª å…ƒ ç´  ï¼Œ å¦‚ æœ ä»– ä»¬ çš„ é¡º åº é”™ è¯¯ å°± æŠŠ ä»– ä»¬ äº¤ æ¢ è¿‡ æ¥ ã€‚ èµ° è®¿ æ•° åˆ— çš„ å·¥ ä½œ æ˜¯ é‡ å¤ åœ° è¿› è¡Œ ç›´ åˆ° æ²¡ æœ‰ å† éœ€ è¦ äº¤ æ¢ ï¼Œ ä¹Ÿ å°± æ˜¯ è¯´ è¯¥ æ•° åˆ— å·² ç» æ’ åº å®Œ æˆ ã€‚ æ¯” å¦‚ æŒ‰ ç…§ å‡ åº æ’ åº åˆ™ æ¯ ä¸€ è¶™ ä¼š å°† å‰ é¢ æœª æ’ åº éƒ¨ åˆ† çš„ æœ€ å¤§ çš„ å¾€ å äº¤ æ¢ åˆ° å·² æ’ åº çš„ æœ€ å‰ é¢ ï¼Œ ä¸º å…¶ æœ€ ç»ˆ ä½ ç½® </p>
<p>å † æ’ åº ï¼šå¦‚ æœ è¦ æ±‚ å‡ åº åˆ™ å»º ç«‹ å¤§ æ ¹ å † ï¼Œ é™ åº åˆ™ å»º ç«‹ å° æ ¹ å † ï¼Œ å † é¡¶ å…ƒ ç´  ä¸º æœ€ å¤§ æˆ– è€… æœ€ å° çš„ å…ƒ ç´  ï¼Œ å°† è¿™ ä¸ª å…ƒ ç´  ä¸ æœ€ å ä¸€ ä¸ª ä½ ç½® çš„ å…ƒ ç´  äº¤ æ¢ ï¼Œ å† å°† å‰© ä½™ å…ƒ ç´  è¿˜ åŸ æˆ å¤§ å° è·Ÿ å † ï¼Œ æ¯ ä¸€ è¶™ éƒ½ ä¼š é€‰ å‡º ä¸€ ä¸ª æœª æ’ åº ä¸­ çš„ æœ€ å¤§ æˆ– è€… æœ€ å° æ”¾ å¤§ ä»– çš„ æœ€ ç»ˆ ä½ ç½® </p>
<p>å¸Œ å°” æ’ åºï¼š ç”± äº æ˜¯ æŒ‰ ç…§ å¢ é‡ æ’ åº ï¼Œ æ­¥ é•¿ ä¸ åŒ å¯ èƒ½ å…ƒ ç´  ä¸ ä¸€ å®š åˆ° ä»– æœ€ ç»ˆ ä½ ç½® ï¼Œ æ‰€ ä»¥ é€‰ C </p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582375139504.png" alt="1582375139504"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582381646518.png" alt="1582381646518"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582381694491.png" alt="1582381694491"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582381746786.png" alt="1582381746786"></p>
<hr>
<ul>
<li><p>ä¸‹é¢( )æ’åºç®—æ³•åœ¨è¾“å…¥æ•°æ®é€†åºæƒ…å†µä¸‹æ’åºé€Ÿåº¦æœ€å¿«</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582381909114.png" alt="1582381909114"></p>
</li>
<li><p>å¯¹äºåŸºæœ¬æœ‰åºçš„åºåˆ—ï¼ŒæŒ‰ç…§å“ªç§æ’åºæ–¹å¼æœ€å¿«ï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582381995803.png" alt="1582381995803"></p>
</li>
</ul>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582382048981.png" alt="1582382048981"></p>
<hr>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582382128578.png" alt="1582382128578"></p>
<p>è§£æï¼š</p>
<p><img src="/2020/01/12/ç¬”è¯•çŸ¥è¯†ç‚¹/1582382202047.png" alt="1582382202047"></p>
<hr>]]></content>
      <categories>
        <category>ç¬”è¯•</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†ç‚¹</tag>
      </tags>
  </entry>
  <entry>
    <title>sqlè¯­è¨€</title>
    <url>/2020/01/12/sql%E8%AF%AD%E8%A8%80/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="DDLä¸DML"><a href="#DDLä¸DML" class="headerlink" title="DDLä¸DML"></a>DDLä¸DML</h3><p>DDL: maintaining structure of database. (CREATE, DROP, ALTER, RENAME)</p>
<p>DML: maintaining contents of database. (SELECT, INSERT, DELETE, UPDATE)</p>
<p><img src="/2020/01/12/sqlè¯­è¨€/1578825616684.png" alt="1578825616684"></p>
<a id="more"></a>
<h4 id="INSERT"><a href="#INSERT" class="headerlink" title="INSERT"></a>INSERT</h4><p><img src="/2020/01/12/sqlè¯­è¨€/1578900159995.png" alt="1578900159995"></p>
<blockquote>
<p>æ³¨ï¼šå­—ç¬¦ä¸ºå•å¼•å·</p>
</blockquote>
<p><code>INSERT INTO tablename {column1,column2,â€¦}values(exp1,exp2,â€¦);</code>  //æ’å…¥</p>
<h4 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h4><p><img src="/2020/01/12/sqlè¯­è¨€/1578900315795.png" alt="1578900315795"></p>
<h4 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h4><p><img src="/2020/01/12/sqlè¯­è¨€/1578900364614.png" alt="1578900364614"></p>
<h4 id="CREATE"><a href="#CREATE" class="headerlink" title="CREATE"></a>CREATE</h4><p><img src="/2020/01/12/sqlè¯­è¨€/1578899962419.png" alt="1578899962419"></p>
<p><strong>CREATEçš„æ—¶å€™ï¼Œå…ˆCREATEæ²¡æœ‰å¤–é”®çš„è¡¨ï¼Œæœ€åCREATEæœ‰å¤–é”®çš„è¡¨</strong></p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä¸»é”®åˆ—ä¸ºIDçš„è¡¨ï¼Œè¡¨ä¸­æœ‰å­—æ®µkï¼Œå¹¶ä¸”åœ¨kä¸Šæœ‰ç´¢å¼•ã€‚è¿™ä¸ªè¡¨çš„å»ºè¡¨è¯­å¥æ˜¯ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> T (</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span>,</span><br><span class="line">    k <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">16</span>),</span><br><span class="line">    <span class="keyword">index</span> (k)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span>;</span><br></pre></td></tr></table></figure>
<h4 id="DROP"><a href="#DROP" class="headerlink" title="DROP"></a>DROP</h4><p><img src="/2020/01/12/sqlè¯­è¨€/1578900950689.png" alt="1578900950689"></p>
<p><strong>DROPçš„æ—¶å€™ï¼Œå…ˆDROPæœ‰å¤–é”®çš„è¡¨ï¼Œæœ€åDROPæ²¡æœ‰å¤–é”®çš„è¡¨</strong></p>
<h4 id="ALTER"><a href="#ALTER" class="headerlink" title="ALTER"></a>ALTER</h4><p>ä¾‹å¦‚å¢åŠ ä¸€åˆ—</p>
<p><img src="/2020/01/12/sqlè¯­è¨€/1578901179360.png" alt="1578901179360"></p>
<h4 id="RENAME"><a href="#RENAME" class="headerlink" title="RENAME"></a>RENAME</h4><p><img src="/2020/01/12/sqlè¯­è¨€/1578901685944.png" alt="1578901685944"></p>
<h3 id="è¯­æ³•é¡ºåºä¸æ‰§è¡Œé¡ºåº"><a href="#è¯­æ³•é¡ºåºä¸æ‰§è¡Œé¡ºåº" class="headerlink" title="è¯­æ³•é¡ºåºä¸æ‰§è¡Œé¡ºåº"></a>è¯­æ³•é¡ºåºä¸æ‰§è¡Œé¡ºåº</h3><p><img src="/2020/01/12/sqlè¯­è¨€/1578825674160.png" alt="1578825674160"></p>
<p><img src="/2020/01/12/sqlè¯­è¨€/1578825736061.png" alt="1578825736061"></p>
<p>ç›¸å½“äºå°±æ˜¯ SELECT [DISTINCT] çš„é¡ºåºæ¢äº†ä¸€ä¸‹ã€‚</p>
<h3 id="Aggregate-Functions"><a href="#Aggregate-Functions" class="headerlink" title="Aggregate Functions"></a>Aggregate Functions</h3><p><img src="/2020/01/12/sqlè¯­è¨€/1596791792580.png" alt="1596791792580"></p>
<h3 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h3><p><img src="/2020/01/12/sqlè¯­è¨€/1596791382343.png" alt="1596791382343"></p>
<h3 id="æ‰¾æœ€å¤§å€¼"><a href="#æ‰¾æœ€å¤§å€¼" class="headerlink" title="æ‰¾æœ€å¤§å€¼"></a>æ‰¾æœ€å¤§å€¼</h3><h4 id="ä¾‹ä¸€ï¼šå“ªä¸€ä¸ªç‰©å“æœ‰æœ€é«˜çš„cost"><a href="#ä¾‹ä¸€ï¼šå“ªä¸€ä¸ªç‰©å“æœ‰æœ€é«˜çš„cost" class="headerlink" title="ä¾‹ä¸€ï¼šå“ªä¸€ä¸ªç‰©å“æœ‰æœ€é«˜çš„cost?"></a>ä¾‹ä¸€ï¼šå“ªä¸€ä¸ªç‰©å“æœ‰æœ€é«˜çš„cost?</h4><p><img src="/2020/01/12/sqlè¯­è¨€/1596791476146.png" alt="1596791476146"></p>
<p>If two different items have highest price, ç¬¬ä¸€ä¸ªqueryä¼šæŠŠä¸¤ä¸ªéƒ½è¿”å›ï¼Œç¬¬äºŒä¸ªqueryåªä¼šè¿”å›ä¸€ä¸ª</p>
<h4 id="ä¾‹äºŒï¼šæ‰¾å‡ºæœ‰æœ€å¤šç©ºæˆ¿é—´çš„æ¥¼å±‚"><a href="#ä¾‹äºŒï¼šæ‰¾å‡ºæœ‰æœ€å¤šç©ºæˆ¿é—´çš„æ¥¼å±‚" class="headerlink" title="ä¾‹äºŒï¼šæ‰¾å‡ºæœ‰æœ€å¤šç©ºæˆ¿é—´çš„æ¥¼å±‚"></a>ä¾‹äºŒï¼šæ‰¾å‡ºæœ‰æœ€å¤šç©ºæˆ¿é—´çš„æ¥¼å±‚</h4><p><a href="http://sqlfiddle.com/#!9/492887/22" target="_blank" rel="noopener">http://sqlfiddle.com/#!9/492887/22</a></p>
<p><img src="/2020/01/12/sqlè¯­è¨€/1597394612354.png" alt="1597394612354"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> blockfloor <span class="keyword">as</span> <span class="string">"Floor"</span>,</span><br><span class="line">       <span class="keyword">count</span>(*) <span class="keyword">AS</span>  <span class="string">"No of available rooms"</span></span><br><span class="line"><span class="keyword">FROM</span> room</span><br><span class="line"><span class="keyword">WHERE</span> unavailable=<span class="string">'0'</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> blockfloor</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">count</span>(*) =</span><br><span class="line">  (<span class="keyword">SELECT</span> <span class="keyword">max</span>(zz) <span class="keyword">AS</span> highest_total</span><br><span class="line">   <span class="keyword">FROM</span></span><br><span class="line">     ( <span class="keyword">SELECT</span> blockfloor ,</span><br><span class="line">              <span class="keyword">count</span>(*) <span class="keyword">AS</span> zz</span><br><span class="line">      <span class="keyword">FROM</span> room</span><br><span class="line">      <span class="keyword">WHERE</span> unavailable=<span class="string">'0'</span></span><br><span class="line">      <span class="keyword">GROUP</span> <span class="keyword">BY</span> blockfloor ) <span class="keyword">AS</span> t );</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šä»¥ä¸‹å†™æ³•é”™è¯¯ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> BlockFloor, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> <span class="string">"maximum number of rooms available"</span></span><br><span class="line"><span class="keyword">FROM</span> Room</span><br><span class="line"><span class="keyword">WHERE</span> Unavailable=<span class="number">0</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> BlockFloor</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*) = </span><br><span class="line">	(<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(<span class="keyword">COUNT</span>(*))</span><br><span class="line">	<span class="keyword">FROM</span> Room</span><br><span class="line">	<span class="keyword">WHERE</span> Unavailable = <span class="number">0</span></span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> BlockFloor);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/12/sqlè¯­è¨€/1597394696134.png" alt="1597394696134"></p>
<h4 id="ä¾‹ä¸‰ï¼šæ‰¾å‡ºç¬¬äºŒé«˜çš„è–ªæ°´"><a href="#ä¾‹ä¸‰ï¼šæ‰¾å‡ºç¬¬äºŒé«˜çš„è–ªæ°´" class="headerlink" title="ä¾‹ä¸‰ï¼šæ‰¾å‡ºç¬¬äºŒé«˜çš„è–ªæ°´"></a>ä¾‹ä¸‰ï¼šæ‰¾å‡ºç¬¬äºŒé«˜çš„è–ªæ°´</h4><p><a href="https://leetcode.com/problems/second-highest-salary/" target="_blank" rel="noopener">https://leetcode.com/problems/second-highest-salary/</a></p>
<p><img src="/2020/01/12/sqlè¯­è¨€/1599193947629.png" alt="1599193947629"></p>
<p>å¦‚ä½•é¿å…æœ‰å¤šä¸ªæœ€å¤§å€¼çš„æƒ…å†µï¼šä½¿ç”¨DISTINCTï¼šSort the distinct salary in descend orderï¼Œå†ç”¨LIMITå’ŒOFFSET</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ³•ä¸€ï¼šUsing sub-query and LIMIT clause</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Salary</span><br><span class="line">     <span class="keyword">FROM</span> Employee</span><br><span class="line">     <span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></span><br><span class="line">     <span class="keyword">LIMIT</span> <span class="number">1</span> <span class="keyword">OFFSET</span> <span class="number">1</span>) <span class="keyword">AS</span> SecondHighestSalary;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ³•äºŒï¼šUsing IFNULL and LIMIT clause: </span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">IFNULL</span>(</span><br><span class="line">      (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Salary</span><br><span class="line">       <span class="keyword">FROM</span> Employee</span><br><span class="line">       <span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></span><br><span class="line">       <span class="keyword">LIMIT</span> <span class="number">1</span> <span class="keyword">OFFSET</span> <span class="number">1</span>),</span><br><span class="line">    <span class="literal">NULL</span>) <span class="keyword">AS</span> SecondHighestSalary;</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šå¦‚æœç›´æ¥å†™ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span></span><br><span class="line">    Salary <span class="keyword">AS</span> SecondHighestSalary</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    Employee</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">1</span> <span class="keyword">OFFSET</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>this solution will be judged as â€˜Wrong Answerâ€™ if there is no such second highest salary since there might be only one record in this table.</p>
<p><img src="/2020/01/12/sqlè¯­è¨€/1599194162675.png" alt="1599194162675"></p>
<h4 id="ä¾‹å››ï¼šæ‰¾å‡ºæ¯é—¨è¯¾åˆ†æ•°éƒ½å¤§äº75çš„å­¦ç”Ÿä¸­ï¼Œåˆ†æ•°æœ€é«˜çš„é‚£æ¡è®°å½•"><a href="#ä¾‹å››ï¼šæ‰¾å‡ºæ¯é—¨è¯¾åˆ†æ•°éƒ½å¤§äº75çš„å­¦ç”Ÿä¸­ï¼Œåˆ†æ•°æœ€é«˜çš„é‚£æ¡è®°å½•" class="headerlink" title="ä¾‹å››ï¼šæ‰¾å‡ºæ¯é—¨è¯¾åˆ†æ•°éƒ½å¤§äº75çš„å­¦ç”Ÿä¸­ï¼Œåˆ†æ•°æœ€é«˜çš„é‚£æ¡è®°å½•"></a>ä¾‹å››ï¼šæ‰¾å‡ºæ¯é—¨è¯¾åˆ†æ•°éƒ½å¤§äº75çš„å­¦ç”Ÿä¸­ï¼Œåˆ†æ•°æœ€é«˜çš„é‚£æ¡è®°å½•</h4><p><a href="http://sqlfiddle.com/#!9/ee6ee5/1" target="_blank" rel="noopener">http://sqlfiddle.com/#!9/ee6ee5/1</a></p>
<p><img src="/2020/01/12/sqlè¯­è¨€/1600917047680.png" alt="1600917047680"></p>
<p>è¾“å‡ºï¼š</p>
<p><img src="/2020/01/12/sqlè¯­è¨€/1600917082998.png" alt="1600917082998"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">WHERE</span> score = </span><br><span class="line">  (<span class="keyword">SELECT</span> <span class="keyword">max</span>(max_score)</span><br><span class="line">  <span class="keyword">FROM</span> </span><br><span class="line">    (<span class="keyword">SELECT</span> <span class="keyword">max</span>(Score) <span class="keyword">AS</span> max_score</span><br><span class="line">    <span class="keyword">FROM</span> table1</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">name</span></span><br><span class="line">    <span class="keyword">HAVING</span> <span class="keyword">min</span>(score)&gt;<span class="number">75</span>) p);</span><br></pre></td></tr></table></figure>
<p>(ğŸ‘†ä¸ç¡®å®šæ˜¯å¦æ˜¯æ­£ç¡®ç­”æ¡ˆ)</p>
<p>æ³¨ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">max</span>(Score)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">name</span></span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">min</span>(score)&gt;<span class="number">75</span></span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºçš„ç»“æœæ˜¯æ»¡è¶³æ¡ä»¶çš„æ¯ä¸ªå­¦ç”Ÿå„è‡ªçš„æœ€é«˜åˆ†æ•°ï¼š</p>
<p><img src="/2020/01/12/sqlè¯­è¨€/1600917356859.png" alt="1600917356859"></p>
<p>æ‰€ä»¥ä»¥ä¸‹å†™æ³•é”™è¯¯ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">WHERE</span> score <span class="keyword">in</span> <span class="comment">#è¿™é‡Œæ›´ä¸èƒ½ç”¨ç­‰äº</span></span><br><span class="line">    (<span class="keyword">SELECT</span> <span class="keyword">max</span>(Score)</span><br><span class="line">    <span class="keyword">FROM</span> table1</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">name</span></span><br><span class="line">    <span class="keyword">HAVING</span> <span class="keyword">min</span>(score)&gt;<span class="number">75</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/12/sqlè¯­è¨€/1600917489922.png" alt="1600917489922"></p>
<p><img src="/2020/01/12/sqlè¯­è¨€/1600917511295.png" alt="1600917511295"></p>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>sqlè¯­å¥ä¸­çš„drop, truncate, delete</title>
    <url>/2020/01/12/sql%E8%AF%AD%E5%8F%A5%E4%B8%AD%E7%9A%84drop-truncate-delete/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å‚è€ƒï¼š</p>
<p><a href="https://blog.csdn.net/lovezhaohaimig/article/details/80184994" target="_blank" rel="noopener">https://blog.csdn.net/lovezhaohaimig/article/details/80184994</a></p>
<p><a href="https://www.cnblogs.com/xianyao/p/11613021.html" target="_blank" rel="noopener">https://www.cnblogs.com/xianyao/p/11613021.html</a></p>
<h4 id="1-drop-table-è¡¨åç§°"><a href="#1-drop-table-è¡¨åç§°" class="headerlink" title="1.drop table è¡¨åç§°"></a>1.drop table è¡¨åç§°</h4><p><strong>drop (åˆ é™¤è¡¨)ï¼šåˆ é™¤è¡¨å†…å®¹å’Œè¡¨å®šä¹‰ï¼Œé‡Šæ”¾ç©ºé—´ã€‚</strong></p>
<p>ç®€å•æ¥è¯´å°±æ˜¯æŠŠæ•´ä¸ªè¡¨å»æ‰ï¼Œä»¥åè¦æ–°å¢æ•°æ®æ˜¯ä¸å¯èƒ½çš„ï¼Œé™¤éæ–°å¢ä¸€ä¸ªè¡¨ã€‚</p>
<p>æŠŠè¡¨çš„ç»“æ„ä¹Ÿåˆ é™¤äº†ï¼Œä¸‹æ¬¡è¦ä½¿ç”¨çš„æ—¶å€™è¦é‡æ–°åˆ›å»ºè¡¨çš„ç»“æ„å†æ’å…¥æ•°æ®ã€‚</p>
<p>dropè¯­å¥å°†åˆ é™¤è¡¨ç»“æ„è¢«ä¾èµ–çš„çº¦æŸ(constrain)ï¼Œè§¦å‘å™¨(trigger)ï¼Œç´¢å¼•(index)ï¼›ä¾èµ–äºè¯¥è¡¨çš„å­˜å‚¨è¿‡ç¨‹/å‡½æ•°å°†è¢«ä¿ç•™ï¼Œä½†å…¶çŠ¶æ€ä¼šå˜ä¸ºï¼šinvalidã€‚</p>
<p><strong>ä¸èƒ½å›æ»š</strong></p>
<h4 id="2-truncate-table-è¡¨åç§°"><a href="#2-truncate-table-è¡¨åç§°" class="headerlink" title="2.truncate table è¡¨åç§°"></a>2.truncate table è¡¨åç§°</h4><p><strong>truncate (æ¸…ç©ºè¡¨ä¸­çš„æ•°æ®)ï¼šåˆ é™¤è¡¨å†…å®¹ã€é‡Šæ”¾ç©ºé—´ä½†ä¸åˆ é™¤è¡¨å®šä¹‰ã€‚</strong>ä¸dropä¸åŒçš„æ˜¯ï¼Œä»–åªæ˜¯æ¸…ç©ºè¡¨æ•°æ®è€Œå·²ï¼Œä¸åˆ é™¤è¡¨ç»“æ„ã€‚å…¶åˆ—ã€çº¦æŸã€ç´¢å¼•ç­‰ä¿æŒä¸å˜ã€‚</p>
<p>truncate table test åï¼Œå‘testè¡¨æ·»åŠ æ•°æ®ï¼Œæ’å…¥çš„å­—æ®µçš„idé‡æ–°ä»1å¼€å§‹é€’å¢ 1ã€2ã€3â€¦..ï¼ˆä½“ç°äº†truncateåˆ é™¤æ˜¯é‡Šæ”¾ç©ºé—´ï¼‰</p>
<p><strong>in MySQL, resets auto_increment PKs</strong></p>
<p><strong>ä¸èƒ½å›æ»š</strong></p>
<p>æ³¨æ„:truncate ä¸èƒ½åˆ é™¤è¡Œæ•°æ®,è¦åˆ å°±è¦æŠŠè¡¨æ¸…ç©ºã€‚</p>
<h4 id="3-delete-from-è¡¨åç§°-where-åˆ—åç§°-å€¼"><a href="#3-delete-from-è¡¨åç§°-where-åˆ—åç§°-å€¼" class="headerlink" title="3.delete from è¡¨åç§° where åˆ—åç§° = å€¼"></a>3.delete from è¡¨åç§° where åˆ—åç§° = å€¼</h4><p>delete (åˆ é™¤è¡¨ä¸­çš„æ•°æ®)ï¼šåˆ é™¤æ•´è¡¨ä¸­çš„è¡Œï¼Œè¡¨ç»“æ„ä¸ä¼šåˆ é™¤ã€‚</p>
<p><strong>åˆ é™¤å†…å®¹ï¼Œä¸åˆ é™¤å®šä¹‰ï¼Œä¸é‡Šæ”¾ç©ºé—´ã€‚</strong></p>
<p>ç”¨deleteåˆ é™¤æ•°æ®ï¼Œç„¶åæ·»åŠ ã€‚å¯ä»¥çœ‹åˆ°æ·»åŠ ä¹‹åidæ ‡è¯†ä¸è¿ç»­ã€‚ï¼ˆè¯´æ˜deleteåˆ é™¤ä¸é‡Šæ”¾ç©ºé—´ï¼‰</p>
<p>å¦‚æœé‡æ–°æ’å…¥æ•°æ®æ—¶ï¼Œå¯¹åº”çš„idåœ¨ä¸Šæ¬¡åŸºç¡€ä¹‹ä¸Šé€’å¢ 4ã€5ã€6â€¦.</p>
<p>deleteè¯­å¥æ‰§è¡Œåˆ é™¤çš„è¿‡ç¨‹æ˜¯æ¯æ¬¡ä»è¡¨ä¸­åˆ é™¤ä¸€è¡Œï¼Œå¹¶ä¸”åŒæ—¶å°†è¯¥è¡Œçš„åˆ é™¤æ“ä½œä½œä¸ºäº‹åŠ¡è®°å½•åœ¨æ—¥å¿—ä¸­ä¿å­˜,ä»¥ä¾¿è¿›è¡Œå›æ»šæ“ä½œã€‚</p>
<p><strong>å³ä¸å¸¦whereçš„delete: åˆ é™¤è¡¨å†…å®¹ï¼Œä¸åˆ é™¤è¡¨ç»“æ„</strong></p>
<p><strong>å¯å›æ»š</strong></p>
<h4 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4.æ€»ç»“"></a>4.æ€»ç»“</h4><ul>
<li><p>æ‰§è¡Œé€Ÿåº¦ï¼Œä¸€èˆ¬æ¥è¯´: drop&gt; truncate &gt; deleteã€‚</p>
</li>
<li><p>deleteè¯­å¥æ˜¯æ•°æ®åº“æ“ä½œè¯­è¨€(dml)ï¼Œè¿™ä¸ªæ“ä½œä¼šæ”¾åˆ° rollback segmentä¸­ï¼Œäº‹åŠ¡æäº¤ä¹‹åæ‰ç”Ÿæ•ˆï¼›å¦‚æœæœ‰ç›¸åº”çš„ triggerï¼Œæ‰§è¡Œçš„æ—¶å€™å°†è¢«è§¦å‘ã€‚</p>
</li>
<li><p>truncateã€drop æ˜¯æ•°æ®åº“å®šä¹‰è¯­è¨€(ddl)ï¼Œæ“ä½œç«‹å³ç”Ÿæ•ˆï¼ŒåŸæ•°æ®ä¸æ”¾åˆ° rollback segment ä¸­ï¼Œä¸èƒ½å›æ»šï¼Œæ“ä½œä¸è§¦å‘ triggerã€‚</p>
</li>
<li><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸‰è€…çš„åŒºåˆ«æ˜¯æ˜ç¡®çš„ã€‚</p>
<ul>
<li><p>å½“ä½ ä¸å†éœ€è¦è¯¥è¡¨æ—¶ï¼Œ ç”¨ drop;</p>
</li>
<li><p>å½“ä½ ä»è¦ä¿ç•™è¯¥è¡¨ï¼Œä½†è¦åˆ é™¤æ‰€æœ‰è®°å½•æ—¶ï¼Œ ç”¨ truncate; </p>
</li>
<li><p>å½“ä½ è¦åˆ é™¤éƒ¨åˆ†è®°å½•æ—¶ï¼ˆalways with a WHERE clause), ç”¨ delete.</p>
</li>
</ul>
</li>
<li><p>truncate ä¸delete æ¯”è¾ƒï¼š</p>
<ul>
<li><p>truncate table åœ¨åŠŸèƒ½ä¸Šä¸ä¸å¸¦ WHERE å­å¥çš„ deleteè¯­å¥ç›¸åŒï¼šäºŒè€…å‡åˆ é™¤è¡¨ä¸­çš„å…¨éƒ¨è¡Œã€‚</p>
</li>
<li><p>truncate æ¯” deleteé€Ÿåº¦å¿«ï¼Œä¸”ä½¿ç”¨çš„ç³»ç»Ÿå’Œäº‹åŠ¡æ—¥å¿—èµ„æºå°‘ã€‚</p>
</li>
<li><p>truncate æ“ä½œåçš„è¡¨æ¯”Deleteæ“ä½œåçš„è¡¨è¦å¿«å¾—å¤šã€‚</p>
</li>
<li><p>å½“è¡¨è¢«æ¸…ç©ºåï¼Œè¡¨å’Œè¡¨çš„ç´¢å¼•å°†é‡æ–°è®¾ç½®æˆåˆå§‹å¤§å°ï¼Œè€Œdeleteåˆ™ä¸èƒ½ã€‚</p>
</li>
<li>truncate åˆ é™¤ä¸èƒ½æ¢å¤ï¼Œdelete å¯ä»¥æ¢å¤æ•°æ®</li>
</ul>
</li>
</ul>
<blockquote>
<p>(<a href="http://www.itpub.net/thread-392126-1-1.html" target="_blank" rel="noopener">http://www.itpub.net/thread-392126-1-1.html</a>)</p>
<p>é—®ï¼šæ‰§è¡Œtruncate tableï¼Œé™¤äº†rowsä¼šåˆ é™¤ï¼Œindexä¹Ÿä¼šåˆ é™¤ï¼Œä½†æˆ‘æ‰§è¡Œä¹‹åï¼ŒæŸ¥çœ‹user_indexesï¼Œç´¢å¼•ä»åœ¨ï¼Œé‡æ–°åŠ å…¥æ–°èµ„æ–™å†åšæŸ¥è¯¢ï¼Œä¸€æ ·å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œæ˜¯ä¸æ˜¯è¿™é‡Œæ‰€è¯´çš„åˆ é™¤ï¼Œæ˜¯æŒ‡åˆ é™¤ç´¢å¼•çš„å†…å®¹ï¼Œå¯æ˜¯ä¸€èˆ¬æˆ‘ä»¬ç”¨deleteï¼Œç´¢å¼•çš„å†…å®¹ä¸æ˜¯ä¹Ÿä¼šè·Ÿç€åˆ é™¤å—? é‚£ä¹ˆç”¨truncateå’Œdeleteï¼Œç´¢å¼•çš„åˆ é™¤åˆæœ‰ä»€ä¹ˆä¸åŒå‘¢?</p>
<p>ç­”ï¼šä½ truncateåï¼Œä½ åªæ˜¯åˆ é™¤ç´¢å¼•ç›¸åº”çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä½ æ‰€è¯´çš„å†…å®¹ï¼Œç´¢å¼•çš„å®šä¹‰å¹¶æ²¡æœ‰åˆ é™¤ï¼Œå› æ­¤åœ¨æ•°æ®å­—å…¸é‡Œé¢è¿˜æœ‰ç›¸å…³ä¿¡æ¯ã€‚é‡æ–°æ’å…¥æ•°æ®åï¼Œå½“ç„¶è¿˜ä¼šç”¨åˆ°åŸæ¥å®šä¹‰çš„ç´¢å¼•ã€‚ä½ è¦çœŸæ­£åˆ é™¤ä¸€ä¸ªç´¢å¼•çš„è¯ï¼Œé‚£ä¹ˆå¾—ç”¨drop index index_nameæŠŠç´¢å¼•DROPæ‰ã€‚deleteçš„è¯ï¼Œç´¢å¼•çš„å†…å®¹è·Ÿtruncateä¸€æ ·æ˜¯åˆ é™¤çš„ï¼Œåªæ˜¯ç‰©ç†ä¸Šäº‹å®ä¸Šå¹¶æ²¡æœ‰åˆ é™¤ï¼Œè¿™ä¸ªä½ ä¸è¦å»ç®¡ï¼Œä½ å°±çŸ¥é“ç´¢å¼•æ¡ç›®ä¹Ÿç›¸åº”åˆ é™¤å°±æ˜¯äº†ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸¤æ•°ä¹‹å’Œ</title>
    <url>/2020/01/12/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/two-sum/" target="_blank" rel="noopener">ä¸¤æ•°ä¹‹å’Œï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2020/01/12/ä¸¤æ•°ä¹‹å’Œ/1578808347100.png" alt="1578808347100"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•"><a href="#æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•"></a>æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•</h4><p>éå†æ¯ä¸ªå…ƒç´  xï¼Œå¹¶æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå€¼ä¸ target - xç›¸ç­‰çš„ç›®æ ‡å…ƒç´ ã€‚\</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[j] == target - nums[i]) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; i, j &#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No two sum solution"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼šä¸¤éå“ˆå¸Œè¡¨"><a href="#æ–¹æ³•äºŒï¼šä¸¤éå“ˆå¸Œè¡¨" class="headerlink" title="æ–¹æ³•äºŒï¼šä¸¤éå“ˆå¸Œè¡¨"></a>æ–¹æ³•äºŒï¼šä¸¤éå“ˆå¸Œè¡¨</h4><p>ä¸ºäº†å¯¹è¿è¡Œæ—¶é—´å¤æ‚åº¦è¿›è¡Œä¼˜åŒ–ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´æœ‰æ•ˆçš„æ–¹æ³•æ¥æ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ç›®æ ‡å…ƒç´ ã€‚å¦‚æœå­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºå®ƒçš„ç´¢å¼•ã€‚ä¿æŒæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸å…¶ç´¢å¼•ç›¸äº’å¯¹åº”çš„æœ€å¥½æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿå“ˆå¸Œè¡¨ã€‚</p>
<p>é€šè¿‡ä»¥ç©ºé—´æ¢å–é€Ÿåº¦çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸ¥æ‰¾æ—¶é—´ä» O(n)é™ä½åˆ° O(1)ã€‚<strong>å“ˆå¸Œè¡¨æ­£æ˜¯ä¸ºæ­¤ç›®çš„è€Œæ„å»ºçš„ï¼Œå®ƒæ”¯æŒä»¥ è¿‘ä¼¼æ’å®šçš„æ—¶é—´è¿›è¡Œå¿«é€ŸæŸ¥æ‰¾</strong>ã€‚æˆ‘ç”¨â€œè¿‘ä¼¼â€æ¥æè¿°ï¼Œæ˜¯å› ä¸ºä¸€æ—¦å‡ºç°å†²çªï¼ŒæŸ¥æ‰¾ç”¨æ—¶å¯èƒ½ä¼šé€€åŒ–åˆ° O(n)ã€‚ä½†åªè¦ä½ ä»”ç»†åœ°æŒ‘é€‰å“ˆå¸Œå‡½æ•°ï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾çš„ç”¨æ—¶åº”å½“è¢«æ‘Šé”€ä¸º O(1)ã€‚</p>
<p><strong>ä½¿ç”¨ä¸¤æ¬¡è¿­ä»£ã€‚åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªå…ƒç´ çš„å€¼å’Œå®ƒçš„ç´¢å¼•æ·»åŠ åˆ°è¡¨ä¸­ã€‚ç„¶åï¼Œåœ¨ç¬¬äºŒæ¬¡è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬å°†æ£€æŸ¥æ¯ä¸ªå…ƒç´ æ‰€å¯¹åº”çš„ç›®æ ‡å…ƒç´ ï¼ˆtarget - nums[i]ï¼‰æ˜¯å¦å­˜åœ¨äºè¡¨ä¸­ã€‚</strong>æ³¨æ„ï¼Œè¯¥ç›®æ ‡å…ƒç´ ä¸èƒ½æ˜¯ nums[i]æœ¬èº«ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            map.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> complement = target - nums[i];</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(complement) &amp;&amp; map.get(complement) != i) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; i, map.get(complement) &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No two sum solution"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œéå†ä¸¤æ¬¡ï¼Œç”±äºå“ˆå¸Œè¡¨å°†æŸ¥æ‰¾æ—¶é—´ç¼©çŸ­åˆ° O(1) ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼Œæ‰€éœ€çš„é¢å¤–ç©ºé—´å–å†³äºå“ˆå¸Œè¡¨ä¸­å­˜å‚¨çš„å…ƒç´ æ•°é‡ã€‚</p>
<hr>
<h4 id="æ–¹æ³•ä¸‰ï¼šä¸€éå“ˆå¸Œè¡¨"><a href="#æ–¹æ³•ä¸‰ï¼šä¸€éå“ˆå¸Œè¡¨" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šä¸€éå“ˆå¸Œè¡¨"></a>æ–¹æ³•ä¸‰ï¼šä¸€éå“ˆå¸Œè¡¨</h4><p>åœ¨è¿›è¡Œè¿­ä»£å¹¶å°†å…ƒç´ æ’å…¥åˆ°è¡¨ä¸­çš„åŒæ—¶ï¼Œå›è¿‡å¤´æ¥æ£€æŸ¥è¡¨ä¸­æ˜¯å¦å·²ç»å­˜åœ¨å½“å‰å…ƒç´ æ‰€å¯¹åº”çš„ç›®æ ‡å…ƒç´ ã€‚å¦‚æœå®ƒå­˜åœ¨ï¼Œé‚£æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†å¯¹åº”è§£ï¼Œå¹¶ç«‹å³å°†å…¶è¿”å›ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(target - nums[i]))</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;map.get(target - nums[i]), i&#125;;</span><br><span class="line">            map.put(nums[i],i);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¤æ‚åº¦-2"><a href="#å¤æ‚åº¦-2" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œåªéå†ä¸€æ¬¡ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
        <tag>å“ˆå¸Œè¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€é•¿è¿ç»­é€’å¢åºåˆ—</title>
    <url>/2020/01/12/%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E9%80%92%E5%A2%9E%E5%BA%8F%E5%88%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/longest-continuous-increasing-subsequence/" target="_blank" rel="noopener">æœ€é•¿è¿ç»­é€’å¢åºåˆ—ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2020/01/12/æœ€é•¿è¿ç»­é€’å¢åºåˆ—/1578807734778.png" alt="1578807734778"></p>
<p><img src="/2020/01/12/æœ€é•¿è¿ç»­é€’å¢åºåˆ—/1578807775519.png" alt="1578807775519"></p>
<p><strong>ä»£ç </strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findLengthOfLCIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length&lt;=<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> nums.length;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; nums[i-<span class="number">1</span>])&#123;</span><br><span class="line">                count++;</span><br><span class="line">                max = Math.max(max,count);</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">                count=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/12/æœ€é•¿è¿ç»­é€’å¢åºåˆ—/1578807884555.png" alt="1578807884555"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>æ’åºç®—æ³•</title>
    <url>/2020/01/10/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/2020/01/10/æ’åºç®—æ³•/1578640411160.png" alt="1578640411160"></p>
<p>æ’åºç®—æ³•çš„ç¨³å®šæ€§ï¼Œé€šä¿—åœ°è®²å°±æ˜¯èƒ½ä¿è¯æ’åºå‰2ä¸ªç›¸ç­‰çš„æ•°å…¶åœ¨åºåˆ—çš„å‰åä½ç½®é¡ºåºå’Œæ’åºåå®ƒä»¬ä¸¤ä¸ªçš„å‰åä½ç½®é¡ºåºç›¸åŒã€‚åœ¨ç®€å•å½¢å¼åŒ–ä¸€ä¸‹ï¼Œå¦‚æœAi = Ajï¼ŒAiåŸæ¥åœ¨ä½ç½®å‰ï¼Œæ’åºåAiè¿˜æ˜¯è¦åœ¨Ajä½ç½®å‰ã€‚</p>
<p><span style="color:red">* åŸºé€‰å½’å †ä¸å˜ï¼ˆè¿è¡Œæ—¶é—´ä¸å‘ç”Ÿå˜åŒ–ï¼Œä¸åˆå§‹çŠ¶æ€æ— å…³ï¼‰</span></p>
<p><span style="color:red">* å¿«é€‰å¸Œå †ä¸ç¨³ï¼ˆæ˜¯ä¸ç¨³å®šçš„æ’åºï¼‰ </span></p>
<p><u>å¿« é€Ÿ æ’ åº ï¼š</u> </p>
<p>æ€ æƒ³ ï¼š </p>
<p>1 ï¼ åœ¨ å¾… æ’ åº çš„ å…ƒ ç´  ä»» å– ä¸€ ä¸ª å…ƒ ç´  ä½œ ä¸º åŸº å‡† ï¼ˆ é€š å¸¸ é€‰ ç¬¬ ä¸€ ä¸ª å…ƒ ç´  ï¼Œ ä½† æœ€ çš„ é€‰ æ‹© æ–¹ æ³• æ˜¯ ä» å¾… æ’ åº å…ƒ ç´  ä¸­ éš æœº é€‰ å– ä¸€ ä¸ª ä½œ ä¸º åŸº å‡† ï¼‰ ï¼Œ ç§° ä¸º åŸº å‡† å…ƒ ç´  ï¼› </p>
<p>2 ï¼ å°† å¾… æ’ åº çš„ å…ƒ ç´  è¿› è¡Œ åˆ† åŒº ï¼Œ æ¯” åŸº å‡† å…ƒ ç´  å¤§ çš„ å…ƒ ç´  æ”¾ åœ¨ å®ƒ çš„ å³ è¾¹ ï¼Œ æ¯” å…¶ å° çš„ æ”¾ åœ¨ å®ƒ çš„ å·¦ è¾¹ ï¼› </p>
<p>3 ï¼ å¯¹ å·¦ å³ ä¸¤ ä¸ª åˆ† åŒº é‡ å¤ ä»¥ ä¸Š æ­¥ éª¤ ç›´ åˆ° æ‰€ æœ‰ å…ƒ ç´  éƒ½ æ˜¯ æœ‰ åº çš„ </p>
<p> <u>å†’ æ³¡ æ’ åº ï¼š</u> </p>
<p>1 ï¼ æ¯” è¾ƒ ç›¸ é‚» çš„ å…ƒ ç´  ã€‚ å¦‚ æœ ç¬¬ ä¸€ ä¸ª æ¯” ç¬¬ äºŒ ä¸ª å¤§ ï¼Œ å°± äº¤ æ¢ ä»– ä»¬ ä¸¤ ä¸ª </p>
<p>2 ï¼ å¯¹ æ¯ ä¸€ å¯¹ ç›¸ é‚» å…ƒ ç´  ä½œ åŒ æ · çš„ å·¥ ä½œ ï¼Œ ä» å¼€ å§‹ ç¬¬ ä¸€ å¯¹ åˆ° ç»“ å°¾ çš„ æœ€ å ä¸€ å¯¹ ã€‚ åœ¨ è¿™ ä¸€ ç‚¹ ï¼Œ æœ€ å çš„ å…ƒ ç´  åº” è¯¥ ä¼š æ˜¯ æœ€ å¤§ çš„ æ•° ã€‚ </p>
<p>3 ï¼ é’ˆ å¯¹ æ‰€ æœ‰ çš„ å…ƒ ç´  é‡ å¤ ä»¥ ä¸Š çš„ æ­¥ éª¤ ï¼Œ é™¤ äº† æœ€ å ä¸€ ä¸ª </p>
<p>4 ï¼ æŒ ç»­ æ¯ æ¬¡ å¯¹ è¶Š æ¥ è¶Š å°‘ çš„ å…ƒ ç´  é‡ å¤ ä¸Š é¢ çš„ æ­¥ éª¤ ï¼Œ ç›´ åˆ° æ²¡ æœ‰ ä»» ä½• ä¸€ å¯¹ æ•° å­— éœ€ è¦ æ¯” è¾ƒ ã€‚ </p>
<p><u>å½’ å¹¶ æ’ åº ï¼š</u> </p>
<p>ç¬¬ ä¸€ æ­¥ ï¼š ç”³ è¯· ç©º é—´ ï¼Œ ä½¿ å…¶ å¤§ å° ä¸º ä¸¤ ä¸ª å·² ç» æ’ åº åº åˆ— ä¹‹ å’Œ ï¼Œ è¯¥ ç©º é—´ ç”¨ æ¥ å­˜ æ”¾ åˆ å¹¶ å çš„ åº åˆ— </p>
<p>ç¬¬ äºŒ æ­¥ ï¼š è®¾ å®š ä¸¤ ä¸ª æŒ‡ é’ˆ ï¼Œ æœ€ åˆ ä½ ç½® åˆ† åˆ« ä¸º ä¸¤ ä¸ª å·² ç» æ’ åº åº åˆ— çš„ èµ· å§‹ ä½ ç½® </p>
<p>ç¬¬ ä¸‰ æ­¥ ï¼š æ¯” è¾ƒ ä¸¤ ä¸ª æŒ‡ é’ˆ æ‰€ æŒ‡ å‘ çš„ å…ƒ ç´  ï¼Œ é€‰ æ‹© ç›¸ å¯¹ å° çš„ å…ƒ ç´  æ”¾ å…¥ åˆ° åˆ å¹¶ ç©º </p>
<p>é—´ ï¼Œ å¹¶ ç§» åŠ¨ æŒ‡ é’ˆ åˆ° ä¸‹ ä¸€ ä½ ç½® </p>
<p>é‡ å¤ æ­¥ éª¤ 3 ç›´ åˆ° æŸ ä¸€ æŒ‡ é’ˆ è¶… å‡º åº åˆ— å°¾ </p>
<p>å°† å¦ ä¸€ åº åˆ— å‰© ä¸‹ çš„ æ‰€ æœ‰ å…ƒ ç´  ç›´ æ¥ å¤ åˆ¶ åˆ° åˆ å¹¶ åº åˆ— å°¾ </p>
<p><u>æ’ å…¥ æ’ åº ï¼š</u> </p>
<p>1 ï¼ ä» æœ‰ åº æ•° åˆ— å’Œ æ—  åº æ•° åˆ— { a2 ï¼Œ a3 ,  â€¦, an} å¼€ å§‹ è¿› è¡Œ æ’ åº </p>
<p>2 ï¼ å¤„ ç† ç¬¬ i ä¸ª å…ƒ ç´  æ—¶ { i ï¼š 2 ï¼Œ 3 ï¼Œâ€¦ , n } , æ•° åˆ— { a1 ï¼Œ a2 ï¼Œâ€¦ï¼Œ ai-1} æ˜¯ å·² æœ‰ åº çš„ ï¼Œ è€Œ æ•° åˆ— {ai,ai+1, â€¦ï¼Œ an } æ˜¯ æ—  åº çš„ ã€‚ ç”¨ ai ä¸ ai-1, a i-2, â€¦ï¼Œ a1 è¿› è¡Œ æ¯” è¾ƒ ï¼Œ æ‰¾ å‡º åˆ é€‚ çš„ ä½ ç½® å°† ai æ’ å…¥ ï¼› </p>
<p>3 ï¼ é‡ å¤ ç¬¬ äºŒ æ­¥ ï¼Œ å…± è¿› è¡Œ n - i æ¬¡ æ’ å…¥ å¤„ ç† ï¼Œ æ•° åˆ— å…¨ éƒ¨ æœ‰ åº ã€‚ </p>
<p><u>é€‰ æ‹© æ’ åº (Selection sort)ï¼š</u></p>
<p>æ˜¯ ä¸€ ç§ ç®€ å• ç›´ è§‚ çš„ æ’ åº ç®— æ³• ã€‚ å®ƒ çš„ å·¥ ä½œ åŸ ç† æ˜¯ æ¯ ä¸€ æ¬¡ ä» å¾… æ’ åº çš„ æ•° æ® å…ƒ ç´  ä¸­ é€‰ å‡º æœ€ å° ï¼ˆ æˆ– æœ€ å¤§ ï¼‰ çš„ ä¸€ ä¸ªå…ƒ ç´  ï¼Œ å­˜ æ”¾ åœ¨ åº åˆ— çš„ èµ· å§‹ ä½ ç½® ï¼Œ ç›´ åˆ° å…¨ éƒ¨ å¾… æ’ åº çš„ æ•° æ® å…ƒ ç´  æ’ å®Œ ï¼Œæ‰€ ä»¥ æ¯ ä¸€ è¶Ÿ é€‰ æ‹© çš„ å…ƒ ç´  éƒ½ ä¼š æ”¾ åœ¨ ä»– çš„ æœ€ ç»ˆ ä½ ç½® </p>
<p>ç¬¬ i è¶Ÿæ’åºï¼Œæ‰¾åˆ°L[iâ€¦n]ä¸­æœ€å°çš„å…ƒç´ ä¸L[i]äº¤æ¢ä½ç½®ï¼Œè¿™æ ·ä¿è¯æ¯ä¸€è¶Ÿæ’åºç¡®å®šä¸€ä¸ªå…ƒç´ çš„æœ€ç»ˆä½ç½®</p>
<p><u>å † æ’ åº ï¼š</u></p>
<p>å¦‚ æœ è¦ æ±‚ å‡ åº åˆ™ å»º ç«‹ å¤§ æ ¹ å † ï¼Œ é™ åº åˆ™ å»º ç«‹ å° æ ¹ å † ï¼Œ å † é¡¶ å…ƒ ç´  ä¸º æœ€ å¤§ æˆ– è€… æœ€ å° çš„ å…ƒ ç´  ï¼Œ å°† è¿™ ä¸ª å…ƒ ç´  ä¸ æœ€ å ä¸€ ä¸ª ä½ ç½® çš„ å…ƒ ç´  äº¤ æ¢ ï¼Œ å† å°† å‰© ä½™ å…ƒ ç´  è¿˜ åŸ æˆ å¤§ å° è·Ÿ å † ï¼Œ æ¯ ä¸€ è¶™ éƒ½ ä¼š é€‰ å‡º ä¸€ ä¸ª æœª æ’ åº ä¸­ çš„ æœ€ å¤§ æˆ– è€… æœ€ å° æ”¾ å¤§ ä»– çš„ æœ€ ç»ˆ ä½ ç½® </p>
<p><u>å¸Œ å°” æ’ åº (shellâ€™s sort)ï¼š</u> </p>
<p>å¸Œå°”æ’åº(Shellâ€™s Sort)æ˜¯<a href="https://baike.baidu.com/item/æ’å…¥æ’åº/7214992" target="_blank" rel="noopener">æ’å…¥æ’åº</a>çš„ä¸€ç§ï¼Œåˆç§°â€œç¼©å°å¢é‡æ’åºâ€ï¼ˆDiminishing Increment Sortï¼‰ï¼Œæ˜¯ç›´æ¥æ’å…¥<a href="https://baike.baidu.com/item/æ’åºç®—æ³•/5399605" target="_blank" rel="noopener">æ’åºç®—æ³•</a>çš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ã€‚å¸Œå°”æ’åºæ˜¯éç¨³å®šæ’åºç®—æ³•ã€‚</p>
<p>å¸Œå°”æ’åºæ˜¯æŠŠè®°å½•æŒ‰ä¸‹æ ‡çš„ä¸€å®šå¢é‡åˆ†ç»„ï¼Œå¯¹æ¯ç»„ä½¿ç”¨ç›´æ¥æ’å…¥æ’åºç®—æ³•æ’åºï¼›éšç€å¢é‡é€æ¸å‡å°‘ï¼Œæ¯ç»„åŒ…å«çš„å…³é”®è¯è¶Šæ¥è¶Šå¤šï¼Œå½“å¢é‡å‡è‡³1æ—¶ï¼Œæ•´ä¸ªæ–‡ä»¶æ°è¢«åˆ†æˆä¸€ç»„ï¼Œ<a href="https://baike.baidu.com/item/ç®—æ³•/209025" target="_blank" rel="noopener">ç®—æ³•</a>ä¾¿ç»ˆæ­¢ã€‚</p>
<p>ç”± äº æ˜¯ æŒ‰ ç…§ å¢ é‡ æ’ åº ï¼Œ æ­¥ é•¿ ä¸ åŒ å¯ èƒ½ å…ƒ ç´  ä¸ ä¸€ å®š åˆ° ä»– æœ€ ç»ˆ ä½ ç½® </p>
]]></content>
      <tags>
        <tag>çŸ¥è¯†ç‚¹</tag>
      </tags>
  </entry>
  <entry>
    <title>Matrix Factorization Methods</title>
    <url>/2020/01/09/Matrix-Factorization-Methods/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Collaborative Filtering has been criticized as having limited scalability, since computing similarity matrices on very large sets of items or users can take a lot of computing horsepower. I donâ€™t really buy this, however. Technologies such as Apache Spark allow you to distribute the construction of this matrix across a cluster if you need to. <strong>A legitimate problem with collaborative filtering is that itâ€™s sensitive to noisy data and sparse data. Youâ€™ll only get really good results if you have a large data set to work with thatâ€™s nice and clean. </strong></p>
<p>æ¥ä¸‹æ¥ä»‹ç»ä¸€äº›<strong>Model-based methods</strong>. Instead of å¯»æ‰¾ç›¸ä¼¼çš„ç‰©å“æˆ–ç›¸ä¼¼çš„ç”¨æˆ·, we apply data science and machine learning techniques to extract predictions from our ratings data.</p>
<p><img src="/2020/01/09/Matrix-Factorization-Methods/1578547347570.png" alt="1578547347570"></p>
<p>There are a wide variety of techniques that fall under the category of matrix factorization. They managed to find broader features of users and items on their own, like action movies or romantic. They are described by matrices. The general idea is to describe users and movies as combinations of different amounts of each feature. For example, Bob is defined as being 80% an action fan and 20% a comedy fan. Weâ€™d then know to match him up with movies that are blend about 80% action and 20% comedy. </p>
<p><img src="/2020/01/09/Matrix-Factorization-Methods/1578559424817.png" alt="1578559424817"></p>
]]></content>
      <categories>
        <category>Recommender System</category>
      </categories>
      <tags>
        <tag>Recommender System</tag>
      </tags>
  </entry>
  <entry>
    <title>Neighborhood-Based Collaborative Filtering ååŒè¿‡æ»¤</title>
    <url>/2020/01/07/Neighborhood-Based-Collaborative-Filtering/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>This is the idea of leveraging the behavior of others to inform what you might enjoy. At a very high level, it means finding other people like you and recommending stuff they liked. Or it might mean finding other things similar to the thing that you like. </p>
<p>Thatâ€™s why we call it collaborative filtering. Itâ€™s recommending stuff based on other peopleâ€™s collaborative behavior. </p>
<p>The heart of neighborhood-based collaborative filtering is the ability to find people similar to you, or items similar to items youâ€™ve liked.</p>
<h3 id="1-Measuring-Similarity-and-Sparsity"><a href="#1-Measuring-Similarity-and-Sparsity" class="headerlink" title="1. Measuring Similarity, and Sparsity"></a>1. Measuring Similarity, and Sparsity</h3><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578372382962.png" alt="1578372382962"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578372454415.png" alt="1578372454415"></p>
<p>è¿™é‡Œçš„ä½™å¼¦ç›¸ä¼¼åº¦å’Œå‰é¢content-basedä¸­çš„ä½™å¼¦ç›¸ä¼¼åº¦çš„åŒºåˆ«åœ¨äºï¼šOur dimensions would be things like his: Did this user like this thing? Or was this thing liked by this user? So every user or every thing might constitute its own dimension, and the dimensions are based on user behavior instead of content attributes.</p>
<p>The big challenge in measuring these similarities based on behavior data is the <strong>sparsity</strong> of the data weâ€™re working with. This means that itâ€™s tough for collaborative filtering to work well unless you have a lot of user behavior data to work with. You canâ€™t compute a meaningful cosine similarity between two people when they have nothing in common, or between two items when they have no people in common. </p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578373973291.png" alt="1578373973291"></p>
<p>This is why collaborative filtering works well for big companies like Amazon and Netflix. They have millions of users and so they have enough data to generate meaningful relations in spite of the data sparsity. </p>
<p>Sparsity also introduces some computational challenges. You donâ€™t want to waste time storing and processing all of that missing data, so under the hood we end up using structures like <strong>sparse arrays</strong> that avoid storing all that empty spaces in this matrix. </p>
<h3 id="2-Similarity-Metrics"><a href="#2-Similarity-Metrics" class="headerlink" title="2. Similarity Metrics"></a>2. Similarity Metrics</h3><h4 id="Adjusted-Cosine"><a href="#Adjusted-Cosine" class="headerlink" title="Adjusted Cosine"></a>Adjusted Cosine</h4><p>Itâ€™s applicable mostly to measuring the similarity between users based on their ratings. Itâ€™s based on the idea that different people might have different baselines. What Bob considers a three star movie, maybe different from what Alice considers a three star movie. </p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578374644148.png" alt="1578374644148"></p>
<p>Adjusted cosine attempts to normalize these differences. Instead of measuring similarities between people based on their raw rating values, we instead measure similarities based on the difference between a userâ€™s rating for an item and their average rating for all items. </p>
<p>Now this sounds good on paper, but in practice, data sparsity can really mess you up here. You can only get a meaningful average, or a baseline of an individualâ€™s ratings if they have rated a lot of stuff for you to take the average of in the first place. è‹¥æœ‰è®¸å¤šç”¨æˆ·åªè¯„ä»·äº†ä¸€éƒ¨ç”µå½±ï¼Œthen that data will be totally wasted with the adjusted cosine metric. ä¸ç®¡ä»–ä»¬è¯„äº†å¤šå°‘åˆ†ï¼Œthe difference between it and that userâ€™s mean will be zero at that point. </p>
<p>So, adjusted cosine might be worth experimenting with, but only if you know that most of your users have rated a lot of stuff implicitly or explicitly. And if you have that much data to begin with, these differences between individuals will start to work themselves out anyway. So, youâ€™re not likely to see as much of a difference as you might expect when using adjusted cosine. </p>
<h4 id="item-based-pearson-similarity"><a href="#item-based-pearson-similarity" class="headerlink" title="(item-based) pearson similarity"></a>(item-based) pearson similarity</h4><p>ä¸adjusted cosineçš„åŒºåˆ«åœ¨äº, we look at the difference between rating and the average from all users for that given item.  </p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578376440604.png" alt="1578376440604"></p>
<p>You can think of pearson similarity as measuring the similarity between people by how much they diverge from the average personâ€™s behavior. ä¾‹å¦‚ï¼Œå‡è®¾å¤§å¤šæ•°äººéƒ½å–œæ¬¢Star Wars, people who hate Star Wars are going to get a very strong similarity score from pearson similarity, because they share opinions that are not mainstream.</p>
<p>Note that the only difference between this and adjusted cosine is whether weâ€™re talking about users or items. è¿™é—¨è¯¾ä½¿ç”¨çš„suprise library, refers to adjusted cosine as user-based pearson similarity, because itâ€™s basically the same thing.</p>
<h4 id="spearman-rank-correlation"><a href="#spearman-rank-correlation" class="headerlink" title="spearman rank correlation"></a>spearman rank correlation</h4><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578376851254.png" alt="1578376851254"></p>
<ul>
<li>Instead of using an average rating value for a movie, æˆ‘ä»¬ä½¿ç”¨ its rank amongst all movies based on their average rating. </li>
<li>Instead of individual ratings for a movie, weâ€™d rank that movie amongst all that individualâ€™s ratings. </li>
</ul>
<p>Spearmançš„ä¸»è¦ä¼˜åŠ¿åœ¨äº it can deal with ordinal data effectively. ä¾‹å¦‚ï¼Œif you had a rating scale, where the difference in meaning between different rating values were not the same. Iâ€™ve never seen this actually used in real world applications, but you may encounter it in the academic literature.</p>
<h4 id="mean-squared-difference"><a href="#mean-squared-difference" class="headerlink" title="mean squared difference"></a>mean squared difference</h4><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578377776225.png" alt="1578377776225"></p>
<p>å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒåº”ç”¨åˆ°itemä¸Šï¼šxå’ŒyæŒ‡ä¸¤ä¸ªä¸åŒçš„item, and then weâ€™d be looking at the differences in ratings from the people these items have in common (æ‰€æœ‰è¯„ä»·è¿‡è¿™ä¸¤ä¸ªitemçš„äººå¯¹è¿™ä¸¤ä¸ªitemè¯„åˆ†çš„å·®å¼‚).</p>
<p>There are two ways of doing collaborative filtering, item based and user based, and itâ€™s important to remember that most of these similarity metrics can apply to either approach. </p>
<p>MSD è¦æ¯”ä½™å¼¦ç›¸ä¼¼åº¦æ›´å¥½ç†è§£ï¼Œ ä½† in practice, ä½ é€šå¸¸ä¼šå‘ç°cosine works better.</p>
<h4 id="jaccard-similarity"><a href="#jaccard-similarity" class="headerlink" title="jaccard similarity"></a>jaccard similarity</h4><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578385168727.png" alt="1578385168727"></p>
<p>jaccard similarity æ²¡æœ‰ä½¿ç”¨å®é™…çš„rating vlaue. If you are dealing with implicit ratings, for example, just the fact that somebody watched something, in this case, Jaccard can be a reasonable choice thatâ€™s very fast to compute. </p>
<h4 id="Recap"><a href="#Recap" class="headerlink" title="Recap"></a>Recap</h4><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578385386398.png" alt="1578385386398"></p>
<ul>
<li>Cosine similarity is almost always a reasonable thing to start with.</li>
<li>Adjust cosine and Pearson are two different terms for basically the same thing. Itâ€™s mean centered cosine similarities. The idea is to deal with unusual rating behavior that deviates from the mean, but in practice, it can sometimes do more harm than good.</li>
<li>Spearman ranking correlation is the same idea as Pearson, using ranking instead of raw ratings, and itâ€™s not something you are likely to be using in practice.</li>
<li>MSD is mean squared difference, which is just an easier similarity metric to warp your head around than cosine similarity, but in practice, it usually doesnâ€™t perform better.</li>
<li>Jaccard similarity is just looking at how many items two users have in common, or how many users two items have in common, divided by how many items or users they have between both of them. Itâ€™s really simple and well suited to implicit ratings, like binary actions, like purchasing or view something. But you can also apply cosine similarities to implicit ratings too.</li>
<li>So, and the end of the day, cosine similarity remains my default go to similarity metric. </li>
</ul>
<h3 id="3-ååŒè¿‡æ»¤"><a href="#3-ååŒè¿‡æ»¤" class="headerlink" title="3. ååŒè¿‡æ»¤"></a>3. ååŒè¿‡æ»¤</h3><h4 id="3-1-User-based-Collaborative-Filtering-åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤-UserCF"><a href="#3-1-User-based-Collaborative-Filtering-åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤-UserCF" class="headerlink" title="3.1 User-based Collaborative Filtering åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤(UserCF)"></a>3.1 User-based Collaborative Filtering åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤(UserCF)</h4><p>ä¸åŸºäºç‰©å“çš„ååŒè¿‡æ»¤ç±»ä¼¼çš„ï¼Œä¸åŒçš„æ˜¯ï¼ŒåŸºäºç‰©å“çš„ååŒè¿‡æ»¤çš„åŸç†æ˜¯ç”¨æˆ· U è´­ä¹°äº† A ç‰©å“ï¼Œæ¨èç»™ç”¨æˆ· U å’Œ A ç›¸ä¼¼çš„ç‰©å“ Bã€Cã€Dã€‚è€ŒåŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ï¼Œæ˜¯å…ˆè®¡ç®—ç”¨æˆ· U ä¸å…¶ä»–çš„ç”¨æˆ·çš„ç›¸ä¼¼åº¦ï¼Œç„¶åå–å’Œ U æœ€ç›¸ä¼¼çš„å‡ ä¸ªç”¨æˆ·ï¼ŒæŠŠä»–ä»¬è´­ä¹°è¿‡çš„ç‰©å“æ¨èç»™ç”¨æˆ·Uã€‚</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578386125836.png" alt="1578386125836"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578386158223.png" alt="1578386158223"></p>
<hr>
<h5 id="3-1-1-è®¡ç®—ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦"><a href="#3-1-1-è®¡ç®—ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦" class="headerlink" title="3.1.1 è®¡ç®—ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦"></a>3.1.1 è®¡ç®—ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦</h5><p>å‚è€ƒ <a href="https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System" target="_blank" rel="noopener">https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System</a></p>
<p>ä¸ºäº†è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æŠŠç”¨æˆ·è´­ä¹°è¿‡ç‰©å“çš„ç´¢å¼•æ•°æ®è½¬åŒ–æˆç‰©å“è¢«ç”¨æˆ·è´­ä¹°è¿‡çš„ç´¢å¼•æ•°æ®ï¼Œå³ç‰©å“çš„å€’æ’ç´¢å¼•ï¼š</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1596012706765.png" alt="1596012706765"></p>
<p>å»ºç«‹å¥½ç‰©å“çš„å€’æ’ç´¢å¼•åï¼Œå°±å¯ä»¥æ ¹æ®ç›¸ä¼¼åº¦å…¬å¼è®¡ç®—ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼š</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1596012763141.png" alt="1596012763141"></p>
<p>å…¶ä¸­ $N(a)$ è¡¨ç¤ºç”¨æˆ· $a$ è´­ä¹°ç‰©å“çš„æ•°é‡ï¼Œ$N(b)$ è¡¨ç¤ºç”¨æˆ· $b$ è´­ä¹°ç‰©å“çš„æ•°é‡ï¼Œ$N(a)âˆ©N(b)$ è¡¨ç¤ºç”¨æˆ· $a$ å’Œ $b$ è´­ä¹°ç›¸åŒç‰©å“çš„æ•°é‡ã€‚æœ‰äº†ç”¨æˆ·çš„ç›¸ä¼¼æ•°æ®ï¼Œé’ˆå¯¹ç”¨æˆ· U æŒ‘é€‰ k ä¸ªæœ€ç›¸ä¼¼çš„ç”¨æˆ·ï¼ŒæŠŠä»–ä»¬è´­ä¹°è¿‡çš„ç‰©å“ä¸­ï¼ŒU æœªè´­ä¹°è¿‡çš„ç‰©å“æ¨èç»™ç”¨æˆ· U å³å¯ã€‚</p>
<hr>
<h5 id="3-1-2-ä¸¾ä¾‹"><a href="#3-1-2-ä¸¾ä¾‹" class="headerlink" title="3.1.2 ä¸¾ä¾‹"></a>3.1.2 ä¸¾ä¾‹</h5><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578455133171.png" alt="1578455133171"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578455288882.png" alt="1578455288882"></p>
<ul>
<li>æ¯ä¸ªäººå’Œè‡ªå·±çš„ä½™å¼¦ç›¸ä¼¼åº¦æ˜¯1</li>
<li>Bob å’Œ Tedçš„ä½™å¼¦ç›¸ä¼¼åº¦æ˜¯0ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰è¯„ä»·è¿‡ç›¸åŒçš„ç”µå½±</li>
<li>çŸ©é˜µçš„ä¸Šä¸‰è§’éƒ¨åˆ†å’Œä¸‹ä¸‰è§’éƒ¨åˆ†æ˜¯å¯¹ç§°çš„</li>
<li>å¯¹äº Bob å’Œ Ann, è™½ç„¶ä»–ä»¬è¯„ä»·è¿‡ä¸åŒçš„ç”µå½±ï¼Œå½“æˆ‘ä»¬è€ƒè™‘ç›¸ä¼¼åº¦æ—¶ï¼Œæˆ‘ä»¬åªçœ‹ä»–ä»¬å…±åŒè¯„ä»·è¿‡çš„ç”µå½±ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä»–ä»¬å…±åŒè¯„ä»·è¿‡çš„ç”µå½±åªæœ‰ä¸€éƒ¨ï¼Œå¹¶ä¸”è¯„åˆ†éƒ½ä¸º5ï¼Œæ‰€ä»¥ä»–ä»¬çš„ç›¸ä¼¼åº¦å¾—åˆ†ä¸º1 (100%)ã€‚</li>
</ul>
<blockquote>
<p>æ³¨ï¼šä¸¤ä¸ªç”¨æˆ·çš„ç›¸ä¼¼åº¦ä¸º100%å¹¶ä¸ä¸€å®šä»£è¡¨ä»–ä»¬å–œæ¬¢ç›¸åŒçš„ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨ä»–ä»¬éƒ½è®¨åŒç›¸åŒçš„ä¸œè¥¿ï¼ˆä¾‹å¦‚ï¼Œè‹¥ Bob å’Œ Ann éƒ½ç»™Star Warsæ‰“1åˆ†ï¼Œä»–ä»¬ä»ç„¶æ˜¯100% similarï¼‰ã€‚äº‹å®ä¸Šï¼Œthe math behind cosine similarity works out such that <strong>if you only have one movie in common, you end up with 100% similarity no matter what. </strong>Even if Bob loved Star Wars and Ann hated it, in a sparse data situation, they both end up 100% similar. Sparse data is a huge problem with collaborative filtering, and it can lead to weird results. And sometimes, you need to enforce a minimum threshold on how many movies users have in common before you consider them at all.</p>
</blockquote>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578456962753.png" alt="1578456962753"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578457107702.png" alt="1578457107702"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578457502291.png" alt="1578457502291"></p>
<p>é™¤äº†normalizing, è¿˜å¯ä»¥ä¾‹å¦‚å°†è¯„åˆ†ä¸º1ã€2çš„è½¬æ¢æˆnegative score, æ–¹æ³•ä¸å”¯ä¸€ï¼Œæ²¡æœ‰æ ‡å‡†çš„æ–¹æ³•ï¼Œå¯é€šè¿‡è¯•éªŒçœ‹ what works best for the data you have.</p>
<p>åº”è¯¥adding in the score for a given movie if we encounter it more than once.</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578457620591.png" alt="1578457620591"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578457759908.png" alt="1578457759908"></p>
<h5 id="3-1-3-Recap"><a href="#3-1-3-Recap" class="headerlink" title="3.1.3 Recap"></a>3.1.3 Recap</h5><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578457999015.png" alt="1578457999015"></p>
<h5 id="3-1-4-User-based-Collaborative-Filtering-Hands-On"><a href="#3-1-4-User-based-Collaborative-Filtering-Hands-On" class="headerlink" title="3.1.4 User-based Collaborative Filtering, Hands-On"></a>3.1.4 User-based Collaborative Filtering, Hands-On</h5><p>code walkthrough</p>
<p>CollaborativeFilteringæ–‡ä»¶å¤¹é‡Œçš„ï¼š</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578458631113.png" alt="1578458631113"></p>
<p>è¿è¡ŒSimpleUserCF.py</p>
<h4 id="3-2-Item-based-Collaborative-Filtering-åŸºäºç‰©å“çš„ååŒè¿‡æ»¤-ItemCF"><a href="#3-2-Item-based-Collaborative-Filtering-åŸºäºç‰©å“çš„ååŒè¿‡æ»¤-ItemCF" class="headerlink" title="3.2 Item-based Collaborative Filtering åŸºäºç‰©å“çš„ååŒè¿‡æ»¤(ItemCF)"></a>3.2 Item-based Collaborative Filtering åŸºäºç‰©å“çš„ååŒè¿‡æ»¤(ItemCF)</h4><p>Look at the things you liked, and recommend stuff thatâ€™s similar to those things. </p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šç»™ç”¨æˆ·æ¨èé‚£äº›å’Œä»–ä»¬ä¹‹å‰å–œæ¬¢çš„ç‰©å“ç›¸ä¼¼çš„ç‰©å“ã€‚</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578458842316.png" alt="1578458842316"></p>
<p>ä¸€äº›åŸå› ä¸ºä»€ä¹ˆä½¿ç”¨ç‰©å“ä¹‹é—´çš„ç›¸ä¼¼åº¦å¯èƒ½æ¯”ä½¿ç”¨ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦æ›´å¥½ï¼š</p>
<ul>
<li>Items tend to be of a more permanent nature than people. An individualâ€™s test may change very quickly over the span of their lives. Your math book will always be similar to other math books. As such, you can get away with computing an item similarity matrix less often than user similarities, because it wonâ€™t change very quickly.</li>
<li>You usually have far fewer items to deal with than people. There are way more people than there are things to recommend to them in most cases. å³ç‰©å“ç›¸ä¼¼åº¦çŸ©é˜µä¼šæ¯”ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µä¼šå°å¾ˆå¤šï¼Œè¿™æ ·ä¸ä»… make it simpler to store that matrix, it makes faster to compute as well. And when youâ€™re dealing with massive systems like Amazon and Netflix, computational efficiency is very important. Not only does it require fewer resources, it means you can regenerate your similarities between items more often, making your system more responsive when new items are introduced.</li>
<li>ä½¿ç”¨ item similarities also makes for a better experience for new users. ä¸€ä¸ªæ–°ç”¨æˆ·åªè¦è¡¨ç°å‡ºäº†å¯¹æŸä¸ªç‰©å“çš„å…´è¶£ï¼Œä½ å¯ä»¥æ¨èä¸é‚£ä¸ªç‰©å“ç›¸ä¼¼çš„ç‰©å“ç»™è¯¥ç”¨æˆ·ï¼Œè€Œä½¿ç”¨åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ï¼Œyou wouldnâ€™t have any recommendations for a new user at all until they make it into the next build of your user similarity matrix.</li>
</ul>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578463648320.png" alt="1578463648320"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578463881122.png" alt="1578463881122"></p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ‰€æœ‰çš„ç›¸ä¼¼åº¦éƒ½ä¸º0æˆ–1ï¼Œæ˜¯å› ä¸ºæ•°æ®é‡æ¯”è¾ƒå°ã€‚In the real world, youâ€™d see more interesting and meaningful numbers here.</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578464579773.png" alt="1578464579773"></p>
<hr>
<h5 id="3-2-1-è®¡ç®—ç‰©å“ç›¸ä¼¼åº¦çš„æ–¹æ³•"><a href="#3-2-1-è®¡ç®—ç‰©å“ç›¸ä¼¼åº¦çš„æ–¹æ³•" class="headerlink" title="3.2.1 è®¡ç®—ç‰©å“ç›¸ä¼¼åº¦çš„æ–¹æ³•"></a>3.2.1 è®¡ç®—ç‰©å“ç›¸ä¼¼åº¦çš„æ–¹æ³•</h5><p>å‚è€ƒ <a href="https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System" target="_blank" rel="noopener">https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System</a></p>
<p>åŸºäºç‰©å“çš„ååŒè¿‡æ»¤ç®—æ³•é¦–å…ˆè®¡ç®—ç‰©å“ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œ è®¡ç®—ç›¸ä¼¼åº¦çš„æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<p><strong>1. åŸºäºå…±åŒå–œæ¬¢ç‰©å“çš„ç”¨æˆ·åˆ—è¡¨è®¡ç®—</strong></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1596011528508.png" alt="1596011528508"></p>
<p>åœ¨æ­¤ï¼Œåˆ†æ¯ä¸­ $N(i)$ æ˜¯è´­ä¹°ç‰©å“ $i$ çš„ç”¨æˆ·æ•°ï¼Œ$N(j)$ æ˜¯è´­ä¹°ç‰©å“ $j$ çš„ç”¨æˆ·æ•°ï¼Œè€Œåˆ†å­ $N(i)âˆ©N(j)$æ˜¯åŒæ—¶è´­ä¹°ç‰©å“ $i$ å’Œç‰©å“ $j$ çš„ç”¨æˆ·æ•°ã€‚å¯è§ä¸Šè¿°çš„å…¬å¼çš„æ ¸å¿ƒæ˜¯è®¡ç®—åŒæ—¶è´­ä¹°è¿™ä»¶å•†å“çš„äººæ•°æ¯”ä¾‹ ã€‚å½“åŒæ—¶è´­ä¹°è¿™ä¸¤ä¸ªç‰©å“çš„äººæ•°è¶Šå¤šï¼Œä»–ä»¬çš„ç›¸ä¼¼åº¦ä¹Ÿå°±è¶Šé«˜ã€‚å¦å¤–å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨åˆ†æ¯ä¸­æˆ‘ä»¬ç”¨äº†ç‰©å“æ€»è´­ä¹°äººæ•°åšæƒ©ç½šï¼Œä¹Ÿå°±æ˜¯è¯´æŸä¸ªç‰©å“å¯èƒ½å¾ˆçƒ­é—¨ï¼Œå¯¼è‡´å®ƒç»å¸¸ä¼šè¢«å’Œå…¶ä»–ç‰©å“ä¸€èµ·è´­ä¹°ï¼Œæ‰€ä»¥é™¤ä»¥å®ƒçš„æ€»è´­ä¹°äººæ•°ï¼Œæ¥é™ä½å®ƒå’Œå…¶ä»–ç‰©å“çš„ç›¸ä¼¼åˆ†æ•°ã€‚</p>
<p><strong>2. åŸºäºä½™å¼¦çš„ç›¸ä¼¼åº¦è®¡ç®—</strong></p>
<p>ä¸Šé¢çš„æ–¹æ³•è®¡ç®—ç‰©å“ç›¸ä¼¼åº¦æ˜¯ç›´æ¥è®¡ç®—åŒæ—¶è´­ä¹°è¿™ä¸¤ä¸ªç‰©å“çš„äººæ•°ã€‚ä½†æ˜¯ä¹Ÿå¯èƒ½å­˜åœ¨ç”¨æˆ·è´­ä¹°äº†ä½†ä¸å–œæ¬¢çš„æƒ…å†µï¼Œæ‰€ä»¥å¦‚æœæ•°æ®é›†åŒ…å«äº†å…·ä½“çš„<strong>è¯„åˆ†æ•°æ®</strong>ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æŠŠç”¨æˆ·è¯„åˆ†å¼•å…¥åˆ°ç›¸ä¼¼åº¦è®¡ç®—ä¸­ ã€‚</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1596011935928.png" alt="1596011935928"></p>
<p>å…¶ä¸­ $n_{ki}$ æ˜¯ç”¨æˆ· $k$ å¯¹ç‰©å“ $i$ çš„è¯„åˆ†ï¼Œå¦‚æœæ²¡æœ‰è¯„åˆ†åˆ™ä¸º 0ã€‚</p>
<p><strong>3. çƒ­é—¨ç‰©å“çš„æƒ©ç½š</strong></p>
<p>å¯¹äºçƒ­é—¨ç‰©å“çš„é—®é¢˜ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å…¬å¼è§£å†³ï¼š</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1596012034088.png" alt="1596012034088"></p>
<p>å½“ $\alpha âˆˆ (0ï¼Œ0.5)$æ—¶ï¼Œ$N(i)$ è¶Šå°ï¼Œæƒ©ç½šå¾—è¶Šå‰å®³ï¼Œä»è€Œä¼šä½¿çƒ­é—¨ç‰©å“ç›¸å…³æ€§åˆ†æ•°ä¸‹é™ã€‚</p>
<hr>
<h5 id="3-2-2-Item-based-Collaborative-Filtering-Hands-On"><a href="#3-2-2-Item-based-Collaborative-Filtering-Hands-On" class="headerlink" title="3.2.2 Item-based Collaborative Filtering, Hands-On"></a>3.2.2 Item-based Collaborative Filtering, Hands-On</h5><p>code walkthrough</p>
<p>CollaborativeFilteringæ–‡ä»¶å¤¹é‡Œçš„ï¼š</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578458631113.png" alt="1578458631113"></p>
<p>è¿è¡ŒSimpleItemCF.py</p>
<p>Item-based collaborative filtering is what Amazon used with outstanding success.</p>
<p>You need to test it out on several real people if possible, and then move to a large scale A/B test to see if this algorithm really is better or worse than whatever you might have today.</p>
<hr>
<h4 id="3-3-çŸ©é˜µåˆ†è§£"><a href="#3-3-çŸ©é˜µåˆ†è§£" class="headerlink" title="3.3 çŸ©é˜µåˆ†è§£"></a>3.3 çŸ©é˜µåˆ†è§£</h4><p>å‚è€ƒ <a href="https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System" target="_blank" rel="noopener">https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System</a></p>
<p>ä¸Šè¿°è®¡ç®—ä¼šå¾—åˆ°ä¸€ä¸ªç›¸ä¼¼åº¦çŸ©é˜µï¼Œè€Œè¿™ä¸ªçŸ©é˜µçš„å¤§å°å’Œç»´åº¦éƒ½æ˜¯å¾ˆå¤§çš„ï¼Œéœ€è¦è¿›è¡Œé™ç»´å¤„ç†ï¼Œç”¨åˆ°çš„æ˜¯SVDçš„é™ç»´æ–¹æ³•ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="https://github.com/NLP-LOVE/ML-NLP/tree/master/Machine Learning/8. MLç‰¹å¾å·¥ç¨‹å’Œä¼˜åŒ–æ–¹æ³•#25-é™ç»´æ–¹æ³•" target="_blank" rel="noopener">é™ç»´æ–¹æ³•</a></p>
<p><strong>åŸºäºç¨€ç–è‡ªç¼–ç çš„çŸ©é˜µåˆ†è§£</strong></p>
<p>çŸ©é˜µåˆ†è§£æŠ€æœ¯åœ¨æ¨èé¢†åŸŸçš„åº”ç”¨æ¯”è¾ƒæˆç†Ÿï¼Œä½†æ˜¯é€šè¿‡ä¸Šä¸€èŠ‚çš„ä»‹ç»ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°çŸ©é˜µåˆ†è§£æœ¬è´¨ä¸Šåªé€šè¿‡ä¸€æ¬¡åˆ†è§£æ¥å¯¹åŸçŸ©é˜µè¿›è¡Œé€¼è¿‘ï¼Œç‰¹å¾æŒ–æ˜çš„å±‚æ¬¡ä¸å¤Ÿæ·±å…¥ã€‚å¦å¤–çŸ©é˜µåˆ†è§£ä¹Ÿæ²¡æœ‰è¿ç”¨åˆ°ç‰©å“æœ¬èº«çš„å†…å®¹ç‰¹å¾ï¼Œä¾‹å¦‚ä¹¦æœ¬çš„ç±»åˆ«åˆ†ç±»ã€éŸ³ä¹çš„æµæ´¾åˆ†ç±»ç­‰ã€‚éšç€ç¥ç»ç½‘ç»œæŠ€æœ¯çš„å…´èµ·ï¼Œç¬”è€…å‘ç°é€šè¿‡å¤šå±‚æ„ŸçŸ¥æœºï¼Œå¯ä»¥å¾—åˆ°æ›´åŠ æ·±åº¦çš„ç‰¹å¾è¡¨ç¤ºï¼Œå¹¶ä¸”å¯ä»¥å¯¹å†…å®¹åˆ†ç±»ç‰¹å¾åŠ ä»¥åº”ç”¨ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ç¨€ç–è‡ªç¼–ç ç¥ç»ç½‘ç»œçš„è®¾è®¡æ€è·¯ã€‚</p>
<ol>
<li><p><strong>åŸºç¡€çš„è‡ªç¼–ç ç»“æ„</strong></p>
<p>æœ€ç®€å•çš„è‡ªç¼–ç ç»“æ„å¦‚ä¸‹å›¾ï¼Œæ„é€ ä¸ªä¸‰å±‚çš„ç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬è®©è¾“å‡ºå±‚ç­‰äºè¾“å…¥å±‚ï¼Œä¸”ä¸­é—´å±‚çš„ç»´åº¦è¿œä½äºè¾“å…¥å±‚å’Œè¾“å‡ºå±‚ï¼Œè¿™æ ·å°±å¾—åˆ°äº†ç¬¬ä¸€å±‚çš„ç‰¹å¾å‹ç¼©ã€‚</p>
<p><img src="https://camo.githubusercontent.com/c056188f3498f28ff6bfe618b81642ba7711a797/68747470733a2f2f67697465652e636f6d2f6b6b7765697368652f696d616765732f7261772f6d61737465722f4d4c2f323031392d392d385f31332d32342d34382e706e67" alt="img"></p>
<p>ç®€å•æ¥è¯´è‡ªç¼–ç ç¥ç»ç½‘ç»œå°è¯•å­¦ä¹ <strong>ä¸­é—´å±‚çº¦ç­‰äºè¾“å…¥å±‚</strong>çš„å‡½æ•°ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå°è¯•é€¼è¿‘ä¸€ä¸ªæ’ç­‰å‡½æ•°ã€‚å¦‚æœç½‘ç»œçš„è¾“å…¥æ•°æ®æ˜¯å®Œå…¨éšæœºçš„ï¼Œæ¯”å¦‚æ¯ä¸€ä¸ªè¾“å…¥éƒ½æ˜¯ä¸€ä¸ªè·Ÿå…¶ä»–ç‰¹å¾å®Œå…¨æ— å…³çš„ç‹¬ç«‹åŒåˆ†å¸ƒé«˜æ–¯éšæœºå˜ ï¼Œé‚£ä¹ˆè¿™ä¸€å‹ç¼©è¡¨ç¤ºå°†ä¼šéå¸¸éš¾äºå­¦ä¹ ã€‚ä½†æ˜¯å¦‚æœè¾“å…¥æ•°æ®ä¸­éšå«ç€ äº›ç‰¹å®šçš„ç»“æ„ï¼Œæ¯”å¦‚æŸäº›è¾“å…¥ç‰¹å¾æ˜¯å½¼æ­¤ç›¸å…³çš„ï¼Œé‚£ä¹ˆè¿™ä¸€ç®—æ³•å°±å¯ä»¥å‘ç°è¾“å…¥æ•°æ®ä¸­çš„è¿™äº›ç›¸å…³æ€§ã€‚</p>
</li>
<li><p><strong>å¤šå±‚ç»“æ„</strong></p>
<p>åŸºäºä»¥ä¸Šçš„å•å±‚éšè—å±‚çš„ç½‘ç»œç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥æ‰©å±•è‡³å¤šå±‚ç½‘ç»œç»“æ„ï¼Œå­¦ä¹ åˆ°æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ç‰¹å¾ã€‚</p>
<p><img src="https://camo.githubusercontent.com/77fdc47c74a72f3b3c1b57ab29ec08452697eb42/68747470733a2f2f67697465652e636f6d2f6b6b7765697368652f696d616765732f7261772f6d61737465722f4d4c2f323031392d392d385f31332d33362d35312e6a7067" alt="img"></p>
</li>
</ol>
<hr>
<h3 id="4-Exercise"><a href="#4-Exercise" class="headerlink" title="4. Exercise"></a>4. Exercise</h3><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578468263883.png" alt="1578468263883"></p>
<p>æˆ‘ä»¬ä¹‹å‰æ˜¯é€‰å–çš„top-nï¼Œä¾‹å¦‚item-based: é€‰æ‹©ç”¨æˆ·è¯„ä»·å‰10çš„ç”µå½±ï¼Œå†æ‰¾similar itemsï¼›user-based: é€‰æ‹©ä¸ç”¨æˆ·ç›¸ä¼¼åº¦æ’å‰10çš„ç”¨æˆ·ï¼Œå†â€¦</p>
<p>Maybe it would be better if instead of taking the top k sources for recommendation candidates, we just use any source above some given quality threshold. ä¾‹å¦‚ï¼Œç”¨æˆ·è¯„ä»·4æ˜Ÿä»¥ä¸Šçš„ç”µå½± should generate item-based recommendation candidates, no matter how many or how few of them there may be.</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578468513742.png" alt="1578468513742"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578468541742.png" alt="1578468541742"></p>
<p>å¯ä»¥å‘ç°ä¸€ä¸ªå°çš„æ”¹å˜å¯ä»¥ä½¿å¾—ç»“æœå¾ˆä¸ä¸€æ ·ã€‚Often, you donâ€™t just want to test different recommendation algorithms, you want to test different variations and parameters on those algorithms. In this case, I not only want to test the idea of using a threshold instead of a top k approach, Iâ€™d also want to test many different threshold values to find the best one. In the real world, youâ€™ll find that your biggest problem is just not having enough time to run all of the different experiments you want to run to make your recommendations  better. </p>
<h3 id="5-Evaluating-Collaborative-Filtering-Systems-Offline"><a href="#5-Evaluating-Collaborative-Filtering-Systems-Offline" class="headerlink" title="5. Evaluating Collaborative Filtering Systems Offline"></a>5. Evaluating Collaborative Filtering Systems Offline</h3><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578469111053.png" alt="1578469111053"></p>
<p>Now, although <strong>we canâ€™t measure accuracy with user based or item based collaborative filtering, because they donâ€™t make rating predictions</strong>, we can still measure hit rate, because it is still a top-N recommender.</p>
<h4 id="code-walkthrough"><a href="#code-walkthrough" class="headerlink" title="code walkthrough"></a>code walkthrough</h4><p>CollaborativeFilteringæ–‡ä»¶å¤¹é‡Œçš„ï¼š</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578458631113.png" alt="1578458631113"></p>
<p>è¿è¡ŒEvaluateUserCF.py</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578469413099.png" alt="1578469413099"></p>
<p>That was surprisingly fast. One really nice property of collaborative filtering is how quickly it can generate recommendations for any given individual, once weâ€™ve built up the similarity matrix.</p>
<p>ç»“æœ5.5% is pretty good.</p>
<h4 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h4><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578469688733.png" alt="1578469688733"></p>
<p>ä¸EvaluateUserCF.pyç›¸æ¯”éœ€è¦æ”¹å˜çš„åœ°æ–¹ï¼š</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578470341309.png" alt="1578470341309"></p>
<p>item-basedçš„hit rateåªæœ‰0.5%ï¼Œç›¸æ¯”user-basedçš„5.5%ï¼Œè¦å·®ä¸€ç‚¹ã€‚</p>
<p>Item-based should be a superior approach, and thatâ€™s been proven in industry. è¿™é‡Œitem-basedè¦å·®ä¸€ç‚¹åº”è¯¥æ˜¯æ•°æ®çš„åŸå› ã€‚è€Œä¸”è¿™åªæ˜¯offline evaluation. If we were to test both algorithms on real-world people using real-world data in an A/B test, the results could end up being very different.</p>
<h3 id="6-KNN-Recommenders"><a href="#6-KNN-Recommenders" class="headerlink" title="6. KNN Recommenders"></a>6. KNN Recommenders</h3><p>The concept of collaborative filtering has been applied to recommender systems that do make rating predictions, and these are generally referred to in the literature as KNN recommenders.</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578471356190.png" alt="1578471356190"></p>
<p>In this sort of system, we generate recommendation candidates by predicting the ratings of everything a user hasnâ€™t already rated, and selecting the top k items with the highest predicted ratings. This obviously isnâ€™t a terribly efficient approach, but since weâ€™re predicting rating values, we can measure the offline accuracy of the system using train/test or cross-validation, which is useful in the research world.</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578478326957.png" alt="1578478326957"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578479201990.png" alt="1578479201990"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578479315924.png" alt="1578479315924"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578479574982.png" alt="1578479574982"></p>
<h4 id="Running-User-and-Item-based-KNN-on-MovieLens"><a href="#Running-User-and-Item-based-KNN-on-MovieLens" class="headerlink" title="Running User and Item-based KNN on MovieLens"></a>Running User and Item-based KNN on MovieLens</h4><p>code walkthrough</p>
<p>CollaborativeFilteringæ–‡ä»¶å¤¹é‡Œçš„ï¼š</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578458631113.png" alt="1578458631113"></p>
<p>è¿è¡ŒKNNBakeOff.py</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578479972763.png" alt="1578479972763"></p>
<p>å¦‚æœåªçœ‹accuracy, KNN recommendationçœ‹ä¸Šå»æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œä½†æ˜¯å¦‚æœçœ‹ top-n recommendations, item-basedå’Œuser-basedæ¨èçš„éƒ½æ˜¯äº›æ²¡å¬è¯´è¿‡çš„ç”µå½± (obscure)ï¼Œåè€Œ random recommendation looks a lot better from a subjective standpoint.</p>
<p>So, on the surface, it looks like we may have made a system thatâ€™s pretty good at predicting ratings of movies people have already seen, but might not be very good at producing top-n recommendations.</p>
<h4 id="Exercise-1"><a href="#Exercise-1" class="headerlink" title="Exercise"></a>Exercise</h4><p>Experiment with different KNN parameters.</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578480409983.png" alt="1578480409983"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578480533805.png" alt="1578480533805"></p>
<p>è™½ç„¶msdæ¯”cosineçš„RMSEè¦ä½ä¸€ç‚¹ï¼Œä½†å®ƒä»¬æ¨èçš„å†…å®¹æ˜¯ä¸€æ ·çš„</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578480727372.png" alt="1578480727372"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578480843642.png" alt="1578480843642"></p>
<p>Well, itâ€™s actually pretty well known that KNN doesnâ€™t work well in practice. Unfortunately, some people conclude that collaborative filtering in general is some naive approach that should be replaced with completely different techniques. But as weâ€™ve seen, collaborative filtering isnâ€™t the problem, itâ€™s forcing collaborative filtering to make rating predictions â€” thatâ€™s the problem. We had some pretty exciting results when we just focused on making top-N recommendations, and completely forgot about optimizing for rating accuracy, and it turns out thatâ€™s what at the heart of the problem. <strong>ä½¿ç”¨user-based CFå’Œitem-based CF,   top-N æ¨èç»“æœéƒ½æ˜¯ä¸é”™çš„ã€‚</strong></p>
<p>Ratings are not continuous in nature, and KNN treats them as though they are continuous values that can be predicted on a continuous scale. If you really want to go with KNN, it would be more appropriate to treat it as a rating classification problem than as a rating prediction problem. KNN is also very sensitive to sparse data.</p>
<p>The most fundamental thing is that accuracy isnâ€™t everything. The main reason KNN produces underwhelming results is because itâ€™s trying to solve the wrong problem. <strong>KNN recommenderä¹‹æ‰€ä»¥æ¨èç»“æœä¸å¥½ï¼Œæ˜¯å› ä¸ºå®ƒè§£å†³çš„æ˜¯rating predictionçš„é—®é¢˜ï¼Œè€Œä¸æ˜¯æ¨èé—®é¢˜</strong>ã€‚</p>
<h3 id="7-Bleeding-Edge-Alert"><a href="#7-Bleeding-Edge-Alert" class="headerlink" title="7. Bleeding Edge Alert"></a>7. Bleeding Edge Alert</h3><p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578491595381.png" alt="1578491595381"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578491659157.png" alt="1578491659157"></p>
<p>The idea behind it is that users are modeled as vectors moving from one item to another in a multidimensional space. And you can predict sequences of events, like which movie a user is likely to watch next, by modeling these vectors.</p>
<p>The reason this paper is exciting is because it outperformed all of the best existing methods for recommending sequences of events in all but one case in one data set.</p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578491938065.png" alt="1578491938065"></p>
<p><img src="/2020/01/07/Neighborhood-Based-Collaborative-Filtering/1578492119528.png" alt="1578492119528"></p>
<p>Basic idea: You position individual items, like movies, in a transition space, where neighborhoods within this   space represent similarity between items. So items close together in this space are similar to each other. The dimensions corresponds to complex transition relationships between items. Since this technique depends on arranging items together into local, similar neighborhoods, I still classify it as a neighborhood -based method. </p>
<p>In this space, we can learn the vectors associated with individual users. Maybe a user who watches a Tom Cruise movie, is likely to move along to the next Tom Cruise movie, for example, and that transition would be represented by a vector in this space. We can then predict the next movie a user is like to watch by extrapolating along the vector weâ€™ve associated with that user.</p>
<p>The paper provide the code in C++.</p>
<p>Itâ€™s all very advanced stuff, but it seems to work. So if you find yourself in the situation where you need to predict a sequence of events, like which movies or videos a person is likely to watch next given theirs past history, you might wanna do a search for translation-based recommendations and how itâ€™s coming along in the real world.</p>
]]></content>
      <categories>
        <category>Recommender System</category>
      </categories>
      <tags>
        <tag>Recommender System</tag>
      </tags>
  </entry>
  <entry>
    <title>Content-Based Filtering</title>
    <url>/2020/01/06/Content-Based-Filtering/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Recommending items just based on the attributes of those items, instead of trying to use aggregate user behavior data.</p>
<h3 id="Cosine-Similarity"><a href="#Cosine-Similarity" class="headerlink" title="Cosine Similarity"></a>Cosine Similarity</h3><p><img src="/2020/01/06/Content-Based-Filtering/1578288453177.png" alt="1578288453177"></p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578288708324.png" alt="1578288708324"></p>
<p>ä¸ºç®€å•èµ·è§ï¼Œå‡è®¾ç”µå½±åªæœ‰ä¸¤ç§ç±»å‹ï¼šadventureå’Œcomedy. ä¸€éƒ¨ç”µå½±è‹¥å±äºæŸç§ç±»å‹åˆ™ä¸º1ï¼Œè‹¥ä¸å±äºåˆ™ä¸º0.</p>
<p>è§’åº¦ Î¸ ä¸€å®šç¨‹åº¦ä¸Šåˆ»ç”»äº†å®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚æˆ‘ä»¬æƒ³è¦å°†ç›¸ä¼¼åº¦åˆ»ç”»æˆ[0,1]èŒƒå›´å†…çš„æ•°ï¼Œzero means not at all similar, and one means totally the same thing. è€Œ Î¸ çš„ä½™å¼¦å€¼æ­£å¥½å¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼šÎ¸ ä¸º90åº¦ï¼Œä½™å¼¦å€¼ä¸º0ï¼›Î¸ ä¸º0åº¦ï¼Œä½™å¼¦å€¼ä¸º1.  </p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578289233556.png" alt="1578289233556"></p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578289272295.png" alt="1578289272295"></p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578289294315.png" alt="1578289294315"></p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578289387292.png" alt="1578289387292"></p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578289605079.png" alt="1578289605079"></p>
<p>How do we assign a similarity score based on release years alone?</p>
<p>This is where some of the art of recommender systems comes in. You have to think about the nature of the data you have and what makes sense.</p>
<p>How far apart would two movies have to be for their release date alone to signify they are substantially different? A decade seems like a reasonable starting point. </p>
<p>Now we need to come up with some sort of mathematical function that smoothly scales that into the range zero to one. -&gt; å¯é€‰æ‹©æŒ‡æ•°è¡°å‡å‡½æ•°ã€‚</p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578291075846.png" alt="1578291075846"></p>
<p>The choice of this function is completely arbitrary, but it seems like a reasonable starting point. In the real world, youâ€™d test many variations of this function to see what really produces the best recommendations with real people. </p>
<h3 id="K-nearest-neighbors"><a href="#K-nearest-neighbors" class="headerlink" title="K-nearest-neighbors"></a>K-nearest-neighbors</h3><p>So how do we turn these similarities between movies based on their attributes into actual rating predictions?</p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578292209772.png" alt="1578292209772"></p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578293123577.png" alt="1578293123577"></p>
<h3 id="Code-Walkthrough"><a href="#Code-Walkthrough" class="headerlink" title="Code Walkthrough"></a>Code Walkthrough</h3><p>ContentBasedé‡Œçš„æ–‡ä»¶ï¼š</p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578309826515.png" alt="1578309826515"></p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578310985921.png" alt="1578310985921"></p>
<p>ä»ç»“æœå¯ä»¥çœ‹åˆ°ï¼ŒContent-based algorithmæ¯”random recommendations è¡¨ç°å¾—è¦å¥½ã€‚</p>
<h3 id="Bleeding-Edge-Alert"><a href="#Bleeding-Edge-Alert" class="headerlink" title="Bleeding Edge Alert"></a>Bleeding Edge Alert</h3><blockquote>
<p>æ³¨ï¼šWe often refer to the current state of the art as leading edge, but technology thatâ€™s still so new that itâ€™s unproven in the real world can be risky to work with, and so we call that bleeding edge. </p>
<p>This is where we highlight some new research that looks interesting and promising, but hasnâ€™t really made it into mainstream yet with recommender systems. </p>
</blockquote>
<h4 id="mise-en-scene"><a href="#mise-en-scene" class="headerlink" title="mise en scene"></a>mise en scene</h4><p>Some recent research and content based filtering has surrounded the use of mise en scene data. Technically, mise en scene refers to the placement of objects in a scene, but the researchers are using this term a bit more loosely to refer to the properties of the scenes in a movie or movie trailer. </p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578311747376.png" alt="1578311747376"></p>
<p>The idea is to extract properties from the film itself that can be quantified and analyzed, and see if we can come up with better movie recommendations by examining the content of the movie itself scene by scene.</p>
<p>What sort of attributes are we talking aboutï¼š</p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578311877667.png" alt="1578311877667"></p>
<p>In principle, this should give us a feel as to the pacing and mood of the film, just based on the film itself.</p>
<p>Qï¼šè¿™æ ·çš„æ•°æ®å’ŒåŸæ¥ä½¿ç”¨çš„ human generated genre classification ç›¸æ¯”ï¼Œæ˜¯å¦æ›´åŠ æœ‰æ•ˆï¼Ÿ</p>
<p>æ›´æ”¹ä»£ç ï¼š</p>
<p>å»æ‰ContentKNNAlgorithm.pyä¸­ç¬¬45è¡Œçš„æ³¨é‡Šï¼Œå†åœ¨ç¬¬46è¡Œä¸ŠåŠ ä¸Š <code>* mesSimilarity</code>:</p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578312959234.png" alt="1578312959234"></p>
<p>å†è¿è¡ŒContentRec.pyï¼Œå¯å¾—åˆ°ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578314301934.png" alt="1578314301934"></p>
<p>ä»ç»“æœä¸Šçœ‹ï¼ŒRMSE actually got a lot worse. ä¸€æ–¹é¢ï¼ŒThis could just be an artifact of how we chose to compute mise en scene similarity scores. å¦ä¸€æ–¹é¢ï¼ŒAccuracy isnâ€™t really what weâ€™re concerned with.</p>
<p>Again, sometimes developing recommendation systems is more an art than a science. You canâ€™t really predict how real people will react to new recommendations they havenâ€™t seen before. Personally, Iâ€™d be tempted to test this in an A/B test to see how it performs. </p>
<p>If you look at the research literature associated with mise en scene recommendations however, they note that it doesnâ€™t do any favors to accuracy, but it does increase diversity. But again, increased diversity isnâ€™t always a good thing when it comes to recommendations. It may just mean that youâ€™re recommending random stuff that has no correlation to the userâ€™s actually interest. Still, it was interesting to experiment with it, and it would be even more interesting to experiment with it using real people</p>
<p>Hereâ€™s a reference to the original research paper:</p>
<p><img src="/2020/01/06/Content-Based-Filtering/1578313486050.png" alt="1578313486050"></p>
<h3 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h3><ul>
<li>Use genre, release year, and mise en scene data independently.</li>
</ul>
<p><img src="/2020/01/06/Content-Based-Filtering/1578314783671.png" alt="1578314783671"></p>
<ul>
<li>See if you improve the release year based recommendations by sorting the k nearest neighbors within a given year by popularity. (sort the year-based recommendations by popularity as a secondary sort)</li>
</ul>
<p><img src="/2020/01/06/Content-Based-Filtering/1578315361933.png" alt="1578315361933"></p>
<p>Now by using popularity data, technically weâ€™re no longer limiting our recommendations to content attributes. Popularity is behavior-based data.</p>
]]></content>
      <categories>
        <category>Recommender System</category>
      </categories>
      <tags>
        <tag>Recommender System</tag>
      </tags>
  </entry>
  <entry>
    <title>A Recommender Engine Framework</title>
    <url>/2020/01/05/A-Recommender-Engine-Framework/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>What we need now is a framework to let us easily experiment with new recommender system algorithms, evaluate them, and compare them against each other.</p>
<p><img src="/2020/01/05/A-Recommender-Engine-Framework/1578205315867.jpg" alt="1578205315867"></p>
<h3 id="1-Our-Recommender-Engine-Architecture"><a href="#1-Our-Recommender-Engine-Architecture" class="headerlink" title="1. Our Recommender Engine Architecture"></a>1. Our Recommender Engine Architecture</h3><p><img src="/2020/01/05/A-Recommender-Engine-Framework/1578205676375.png" alt="1578205676375"></p>
<p>Object oriented design allows us to have base classes, for example, AlgoBase, that contain functions and variables that can be shared by other classes that inherit from that base class. ä¾‹å¦‚AlgoBaseä¸­å®ç°äº†fitå’Œtestæ–¹æ³•ï¼Œåˆ™æ— è®ºæˆ‘ä»¬å®é™…ä¸Šä½¿ç”¨çš„æ˜¯ä»€ä¹ˆç®—æ³•ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥è°ƒç”¨fitå’Œtestæ–¹æ³•ã€‚</p>
<p>CustomæŒ‡çš„æ˜¯any custom algorithm we might develop (è‡ªå·±å†™çš„recommender system), and make them part of the supriselib framework.</p>
<h4 id="Create-a-custom-algorithm"><a href="#Create-a-custom-algorithm" class="headerlink" title="Create a custom algorithm"></a>Create a custom algorithm</h4><p>So, how do you write your own recommender algorithm thatâ€™s compatible with surpiselib?</p>
<p><img src="/2020/01/05/A-Recommender-Engine-Framework/1578207092161.png" alt="1578207092161"></p>
<p>All you have to do is create a new class that inherits form AlgoBase, and as far as supriselib is concerned, your algorithm has one job: to predict ratings.</p>
<blockquote>
<p>As we mentioned, supriselib is built around the architecture of predicting the ratings of every movie for every user, and giving back the top predictions as your recommendations. </p>
</blockquote>
<p>Your class have to implement an estimate function.</p>
<p>When estimate is called by supriselib framework, itâ€™s asking you to predict a rating for the user and item passed in. </p>
<blockquote>
<p>æ³¨ï¼šè¿™é‡Œçš„user idå’Œitem idæ˜¯inner id. Must be mapped back to the raw user and item ids in your source data.</p>
</blockquote>
<ul>
<li>Now, we want to do more than just predict ratings. æˆ‘ä»¬æƒ³è¦å¾ˆç®€å•çš„å°†ä¹‹å‰åœ¨<code>RecommenderMetrics</code>ä¸­å®ç°çš„ä¸åŒçš„evaluation metricsåº”ç”¨åˆ°algorithms we work with. </li>
</ul>
<p><img src="/2020/01/05/A-Recommender-Engine-Framework/1578207683880.png" alt="1578207683880"></p>
<p>ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„classå«åš<code>EvaluatedAlgoritm</code>ï¼Œé‡Œé¢åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å‡½æ•°å«åš<code>Evaluate</code>ï¼Œthat runs all the metrics in RecommenderMetrics on that algorithm. So this class makes it easy to measure accuracy, coverage, diversity and everything else on a given algorithm.</p>
<ul>
<li><p>ä¸åŒçš„è¯„ä¼°æ–¹æ³•ï¼Œè¦æ±‚å¯¹æ•°æ®é›†çš„ä¸åŒåˆ†å‰²æ–¹å¼ï¼Œäºæ˜¯æˆ‘ä»¬åˆ›å»ºäº†å¦ä¸€ä¸ªæ–°çš„class: <code>EvaluationData</code>æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
</li>
<li><p>å¦‚ä½•è¿æ¥è¿™ä¸€åˆ‡ï¼Ÿ</p>
</li>
</ul>
<p>We create an <code>EvaluationData</code> instance with our data set, create an <code>EvaluatedAlgorithm</code> for each algorithm we want to evaluate, and call <code>Evaluate</code> on each algorithm using the same <code>EvaluationData</code>. Under the hood, <code>EvaluatedAlgorithm</code> will use all the functions we defined in <code>RecommenderMetrics</code> to measure accuracy, hit rate, diversity, novelty, and coverage.</p>
<ul>
<li>Since what we generally want to do is æ¯”è¾ƒä¸åŒæ¨èç³»ç»Ÿ, we can make life even easier by writing a class that takes care of all the comparison for us. äºæ˜¯æˆ‘ä»¬åˆ›å»ºäº†æ–°çš„classï¼š<code>Evaluator</code>.</li>
</ul>
<p>Ideally, we want to just submit algorithms we want to evaluate against each other into this class, and let it do everything from there.</p>
<p><img src="/2020/01/05/A-Recommender-Engine-Framework/1578208719473.png" alt="1578208719473"></p>
<p>The beauty of this is that you donâ€™t even have to use the <code>EvalutedAlgorithm</code> or <code>EvaluatedData</code> classed at all, when you want to start playing around with new algorithms and testing them against each other. All you need to do is use this <code>Evaluator</code> class, which has a really simple interface.</p>
<p>å°†ä¸Šè¿°frameworkå†™å¥½åï¼Œå¦‚ä¸‹è¿™æ˜¯æˆ‘ä»¬æ¯”è¾ƒSVDç®—æ³•ä¸randomç®—æ³•æ‰€éœ€è¦çš„æ‰€æœ‰ä»£ç ï¼š</p>
<p><img src="/2020/01/05/A-Recommender-Engine-Framework/1578208901255.png" alt="1578208901255"></p>
<h3 id="2-Code-Walkthrough"><a href="#2-Code-Walkthrough" class="headerlink" title="2. Code Walkthrough"></a>2. Code Walkthrough</h3><p>Frameworkæ–‡ä»¶å¤¹é‡Œï¼š</p>
<p><img src="/2020/01/05/A-Recommender-Engine-Framework/1578209106245.png" alt="1578209106245"></p>
<h4 id="ç»“æœåˆ†æ"><a href="#ç»“æœåˆ†æ" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h4><p><img src="/2020/01/05/A-Recommender-Engine-Framework/1578283638478.png" alt="1578283638478"></p>
<p>æˆ‘ä»¬æ¯”è¾ƒçš„æ˜¯SVDå’Œéšæœºæ¨èã€‚SVD is one of the best algorithms available right now, so it shouldnâ€™t be surprise that SVD beats random recommendation in accuracy and hit rate no matter how we measure it.</p>
<ul>
<li>RMSEå’ŒMAE: lower is better.</li>
<li>Hit rate,åŒ…æ‹¬cHR, ARHR: higher is better.</li>
<li>Coverage, diversity, novelty: need to apply some common sense to, as itâ€™s not a clear higher-is-better sort of thing. There are trade-offs involved with these metrics.</li>
</ul>
<p>å°±Coverageè€Œè¨€ï¼ŒSVDçš„è¦ä½ä¸€äº›: thatâ€™s just because we are enforcing a quality threshold on the top-N recommendations weâ€™re making with SVD, while our random recommender isnâ€™t actually making totally random recommendations, itâ€™s predicting movie ratings using whatâ€™s called a normal distribution centered around the average rating value, which ends up meaning all of the rating predictions it makes fall above our rating threshold, giving us 100% coverage. Having 100% coverage at the expense of having bad recommendations isnâ€™t a trade-off worth making.</p>
<p>å°±Diversityå’ŒNoveltyè€Œè¨€ï¼ŒSVDçš„éƒ½è¦ä½ä¸€äº›ï¼Œè¿™æ˜¯æˆ‘ä»¬æ‰€é¢„æœŸä¼šå‡ºç°çš„ã€‚</p>
]]></content>
      <categories>
        <category>Recommender System</category>
      </categories>
      <tags>
        <tag>Recommender System</tag>
      </tags>
  </entry>
  <entry>
    <title>Evaluate Recommender System</title>
    <url>/2020/01/04/Evaluate-Recommender-System/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="1-The-methodology-for-testing-recommender-systems-offline"><a href="#1-The-methodology-for-testing-recommender-systems-offline" class="headerlink" title="1. The methodology for testing recommender systems offline."></a>1. The methodology for testing recommender systems offline.</h3><h4 id="1-1-train-test-split"><a href="#1-1-train-test-split" class="headerlink" title="1.1 train/test split"></a>1.1 train/test split</h4><p><img src="/2020/01/04/Evaluate-Recommender-System/1578116193748.jpg" alt="1578116193748"></p>
<p>You measure your recommender systemâ€™s ability to predict how people rated things in the past.</p>
<p>If you do this over enough people, you can end up with a meaningful number that tells you <strong>how good your recommender system is at recommending things, or more specifically, recommending things people already watched and rated.</strong> Thatâ€™s really all you can do, if you canâ€™t test things out in an online system.</p>
<h4 id="1-2-k-fold-cross-validation"><a href="#1-2-k-fold-cross-validation" class="headerlink" title="1.2 k-fold cross-validation"></a>1.2 k-fold cross-validation</h4><p>If you really want to get fancy, itâ€™s possible to improve on a single train/test split by using  a technique called k-fold cross validation.</p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578116897885.jpg" alt="1578116897885"></p>
<p>Instead of a single training set, we create many randomly assigned training sets. Each individual training set, or fold, is used to train your recommender system independently, and then we measure the accuracy of the resulting systems against your test set. So we end up with a score of how accurate each fold ends up predicting user ratings, and we can average them together.</p>
<p>This obviously takes a lot more computing power to do, but the advantage is that you donâ€™t end up over-fitting to a single training set.</p>
<blockquote>
<p>æ³¨ï¼šBy using train/test, all we can do is test our ability to predict how people rated movies they already saw. Thatâ€™s not the point of a recommender system.  We want to recommend new things to people that they havenâ€™t seen, but find interesting. However, thatâ€™s fundamentally impossible to test offline.</p>
</blockquote>
<p>We havenâ€™t talked about how to actually come up with an accuracy metric when testing our recommender systems, so letâ€™s cover a couple of different ways to do it.</p>
<h3 id="2-Accuracy-Metrics-RMSE-MAE"><a href="#2-Accuracy-Metrics-RMSE-MAE" class="headerlink" title="2. Accuracy Metrics (RMSE, MAE)"></a>2. Accuracy Metrics (RMSE, MAE)</h3><h4 id="2-1-MAE"><a href="#2-1-MAE" class="headerlink" title="2.1 MAE"></a>2.1 MAE</h4><p>We want to minimize MAE.</p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578117806539.JPG" alt="1578117806539"></p>
<h4 id="2-2-RMSE"><a href="#2-2-RMSE" class="headerlink" title="2.2 RMSE"></a>2.2 RMSE</h4><p>We want to minimize RMSE.</p>
<p>This is a more popular metric for a few reasons, but one is that <strong>it penalizes you more when your rating prediction is way off, and penalizes you less when your are reasonably close.</strong></p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578117900853.jpg" alt="1578117900853"></p>
<blockquote>
<p>æ³¨ï¼šå°±æ¨èç³»ç»Ÿè€Œè¨€ï¼ŒRMSE just doesnâ€™t matter much in the real world. äººä»¬å¹¶ä¸å…³å¿ƒä½ çš„ç³»ç»Ÿå¯¹ä»–ä»¬å·²ç»çœ‹è¿‡çš„ç”µå½±çš„è¯„åˆ†é¢„æµ‹æ˜¯å¦å‡†ç¡®ã€‚What does matter is which movie you put in front of users in a top-N recommender list, and how those users react to those movies when they see them recommended.</p>
</blockquote>
<h3 id="3-Top-N-Hit-Rate-Many-Ways"><a href="#3-Top-N-Hit-Rate-Many-Ways" class="headerlink" title="3. Top-N Hit Rate - Many Ways"></a>3. Top-N Hit Rate - Many Ways</h3><p>Different ways to measure the effectivenss of top-n recommenders offline:</p>
<h4 id="3-1-Hit-Rate"><a href="#3-1-Hit-Rate" class="headerlink" title="3.1 Hit Rate"></a>3.1 Hit Rate</h4><p>You generate top-n recommendations for all of the users in your test set. <strong>If one of the recommendations in a userâ€™s top-n recommendations is something  they actually rated, you consider that a hit.</strong> You actually managed to show the user something that they found interesting enough to watch on their own already, so we consider that a success. </p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578119273699.jpg" alt="1578119273699"></p>
<p>How to measure hit rate? Use leave-one-out cross validation.</p>
<h4 id="3-2-leave-one-out-cross-validation"><a href="#3-2-leave-one-out-cross-validation" class="headerlink" title="3.2 leave-one-out cross validation"></a>3.2 leave-one-out cross validation</h4><p>What we do is compute the top-n recommendations for each user in our training data, and intentionally remove one of those items from that userâ€™s training data. We then test our recommender systemâ€™s ability to recommend that item that was left out in the top-n results it creates for that user in the testing phase.</p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578120352619.jpg" alt="1578120352619"></p>
<p>The trouble is that itâ€™s a lot harder to get one specific movie right while testing than to just get one of the n recommendations. So â€œhit rateâ€ with â€œleave-one-outâ€ tends to be very small and difficult to measure, unless you have a very large data set to work with. But itâ€™s a much more <strong>user focused metric</strong> when you know your recommender system will be producing top-n lists in the real world, which most of them do. </p>
<h4 id="3-3-ARHR"><a href="#3-3-ARHR" class="headerlink" title="3.3 ARHR"></a>3.3 ARHR</h4><p>This metric is just like â€œhit rateâ€, but it accounts for where in the top-n list you hits appear. Instead of summing up the number of hits, we sum up the reciprocal ranking of each hit.</p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578122155631.jpg" alt="1578122155631"></p>
<p>You end up getting more credit for successfully recommending an item in the top slot than in the bottom slot. Again, this is a more <strong>user focused metric</strong>, since users tend to focus on the beginning of lists. </p>
<h4 id="3-4-cHR"><a href="#3-4-cHR" class="headerlink" title="3.4 cHR"></a>3.4 cHR</h4><p>Throw away hits if our predicted rating is below some threshold.</p>
<p>The idea is that we shouldnâ€™t get credit for recommending items to a user that we think they wonâ€™t actually enjoy. </p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578122704818.jpg" alt="1578122704818"></p>
<p>In this example, if we had a cutoff of three stars, we throw away the hits for the second and fourth items in these test results and our hit rate metric wouldnâ€™t count them at all. </p>
<h4 id="3-5-rHR"><a href="#3-5-rHR" class="headerlink" title="3.5 rHR"></a>3.5 rHR</h4><p>Another way to look at hit rate is to break it down by predicted rating score.</p>
<p>It can be a good way to get an idea of the distribution of how good your algorithm thinks recommended movies are that actually get a hit.  Ideally, you want to recommend movies that they actually like, and breaking down the distribution gives you some sense of how well youâ€™re doing in more detail.</p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578123016707.jpg" alt="1578123016707"></p>
<p>å¯¹æ¯ä¸€ä¸ªrating type (1,2,3,4,5), print out its hit rate.</p>
<h3 id="4-Coverage-Diversity-and-Novelty"><a href="#4-Coverage-Diversity-and-Novelty" class="headerlink" title="4. Coverage, Diversity and Novelty"></a>4. Coverage, Diversity and Novelty</h3><p>Accuracy isnâ€™t the only thing that matters.</p>
<h4 id="4-1-Coverage-è¦†ç›–åº¦"><a href="#4-1-Coverage-è¦†ç›–åº¦" class="headerlink" title="4.1 Coverage è¦†ç›–åº¦"></a>4.1 Coverage è¦†ç›–åº¦</h4><p>The percentage of possible recommendations that your system is able to provide. </p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578123495150.jpg" alt="1578123495150"></p>
<p>Itâ€™s worth noting that coverage can be at odds with accuracy. If you enforce a higher quality threshold on the recommendations you make, then you might improve your accuracy at the expense of coverage. Finding the balance of where exactly youâ€™re better off recommending nothing at all can be delicate. </p>
<p>Coverage can also be important to watch, because it gives you a sense of how quickly new items in your catalog will start to appear in your recommendations. When a new book come out on Amazon, it wonâ€™t appear in recommendations until at least a few people buy it, therefore establishing patterns with the purchase of other items. Until those patterns exist, that new book will reduce Amazonâ€™s coverage metric.</p>
<h4 id="4-2-Diversity-å¤šæ ·æ€§"><a href="#4-2-Diversity-å¤šæ ·æ€§" class="headerlink" title="4.2 Diversity å¤šæ ·æ€§"></a>4.2 Diversity å¤šæ ·æ€§</h4><p>You can think of this as measure of how broad a variety of items your recommender system is putting in front of people. An example of low diversity would be a recommender system that just recommends the next books in a series that youâ€™ve started reading, but doesnâ€™t recommend book from different authors, or movies related to what youâ€™ve read.</p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578124451718.jpg" alt="1578124451718"></p>
<p>Diversity, at least in the context of recommender systems, isnâ€™t always a good thing. You can achieve very high diversity by just recommending completely random items. Unusually high diversity scores mean that you just have bad recommendations more often than not. You always need to look at diversity alongside metrics that measure the quality of the recommendations as well. </p>
<h4 id="4-3-Novelty-æ–°é¢–æ€§"><a href="#4-3-Novelty-æ–°é¢–æ€§" class="headerlink" title="4.3 Novelty æ–°é¢–æ€§"></a>4.3 Novelty æ–°é¢–æ€§</h4><p>Similarly, novelty sounds like a good thing, but often it isnâ€™t. Novelty is a measure of how popular the items are that you are recommending. And again, just recommending random stuff would yield very high novelty scores, since the vast majority of items are not top sellers. </p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578124908363.jpg" alt="1578124908363"></p>
<p>Although novelty is measurable, what to do with it is in many ways subjective. Thereâ€™s a concept of user trust in a recommender system. People want to see at least a few familiar items in their recommendations that make them say, â€œYeah, thatâ€™s a good recommendation for me. The system seems goodâ€. If you only recommend things people never heard of, they may conclude that your system doesnâ€™t really know them. Also, popular items are usually popular for a reason. Theyâ€™re enjoyable by a large segment of the population, so you would expect them to be good recommendations for a large segment of the population who hasnâ€™t read or watched them yet. If youâ€™re not recommending some popular items, you should probably question whether your recommender system is really working as it should.</p>
<p><strong>You need to strike a balance between familiar, popular items and what we call serendipitous discovery of new items that user has never heard of before. (balance between novelty and trust)</strong>. The familiar items establish trust with the user, and the new ones allow the user to discover entirely new things that they might love. </p>
<p>Novelty is important, because the whole point of recommender systems is to surface items in what we call â€œthe long tailâ€.</p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578125635846.jpg" alt="1578125635846"></p>
<p>Imagine this is a plot of the sales of every item in you catalog, sorted by sales. Y è½´ä»£è¡¨sales (popularity)ï¼ŒXè½´ä»£è¡¨products. Most of salesæ¥è‡ªäºä¸€å°éƒ¨åˆ†itemsï¼Œä½†æ˜¯â€long tailâ€ makes up a large amount of sales as well. é»„è‰²éƒ¨åˆ†çš„itemä»£è¡¨äº†äººä»¬å„è‡ªæ„Ÿå…´è¶£çš„ä¸œè¥¿. Recommender systems can help people discover those items in the long tail that are relevant to their own unique niche interests. If you can do that successfully, then the recommendations your system makes can help new authors get discovered, can help people explore their own passions, and make money for whoever youâ€™re building the system for as well. Everybody wins.</p>
<h3 id="5-Churn-Responsiveness-and-A-B-Tests"><a href="#5-Churn-Responsiveness-and-A-B-Tests" class="headerlink" title="5. Churn, Responsiveness, and A/B Tests"></a>5. Churn, Responsiveness, and A/B Tests</h3><h4 id="5-1-Churn"><a href="#5-1-Churn" class="headerlink" title="5.1 Churn"></a>5.1 Churn</h4><p>Another thing we can measure is Churn. </p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578127764650.jpg" alt="1578127764650"></p>
<p>Churn can measure how sensitive your recommender system is to new user behavior. å¦‚æœç”¨æˆ·rateäº†ä¸€éƒ¨æ–°ç”µå½±ï¼Œä¼šä½¿å¾—ä»–çš„æ¨èå†…å®¹å‘ç”Ÿå¾ˆå¤§çš„å˜åŒ–å—ï¼ŸIf so, your churn score will be high. Maybe just showing the same recommendations too many times is a bad idea itself. å¦‚æœä¸€ä¸ªç”¨æˆ·æ€»æ˜¯çœ‹åˆ°ç›¸åŒçš„æ¨èï¼Œä½†æ˜¯ä¸ç‚¹å‡»è¿›å»ï¼Œåœ¨æŸä¸ªæ—¶å€™ä½ åº”è¯¥åœæ­¢æ¨èå®ƒè€Œç»™ç”¨æˆ·æ¨èå…¶ä»–çš„ä¸œè¥¿ã€‚Sometimes, a little bit of randomization in your top-n recommendations can keep them looking fresh, and expose your users to more items.</p>
<p>But, just like diversity and novelty, high churn is not in itself a good thing. You could maximize your churn metric by just recommending items completely at random, ä½†æ˜¾ç„¶è¿™ä¸æ˜¯å¥½çš„æ¨èã€‚</p>
<p><strong>All these metrics need to be looked at together, and you need to understand the trade-offs between them. </strong></p>
<h4 id="5-2-Responsiveness"><a href="#5-2-Responsiveness" class="headerlink" title="5.2 Responsiveness"></a>5.2 Responsiveness</h4><p><img src="/2020/01/04/Evaluate-Recommender-System/1578128338650.jpg" alt="1578128338650"></p>
<p>If you rate  a new movie, does it affect your recommendations immediately or next day after some nightly job runs? More responsiveness would always seem to be a good thing, but in the world of business, you have to decide how responsive your recommender really needs to be, since recommender systems that have instantaneous responsiveness are complex, difficult to maintain, and expensive to build. You need to strike your own balance between responsiveness and simplicity.</p>
<blockquote>
<p> ? Whatâ€™s important</p>
<p>å‰é¢è®²äº†è®¸å¤ševaluateæ¨èç³»ç»Ÿçš„æ–¹æ³•ï¼šMAE, RMSE, Hit rate in various forms, coverage, diversity, novelty, churn, and responsiveness.</p>
<p>So how do you know what to focus on? It depends.</p>
<p>It may even depend on cultural factors. Some cultures may want more diversity and novelty, while other cultures may want to stick to things that are familiar with them. </p>
<p>It also depends on what youâ€™re trying to achieve as a business. And usually,  a business is just trying to make money, which leads to one more way to evaluate recommender systems that is arguably the most important of all: online A/B tests!</p>
</blockquote>
<h4 id="5-3-Online-A-B-Tests"><a href="#5-3-Online-A-B-Tests" class="headerlink" title="5.3 Online A/B Tests"></a>5.3 Online A/B Tests</h4><p><img src="/2020/01/04/Evaluate-Recommender-System/1578129032852.jpg" alt="1578129032852"></p>
<hr>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p> <a href="https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System" target="_blank" rel="noopener">https://github.com/NLP-LOVE/ML-NLP/tree/master/Project/17.%20Recommendation%20System</a></p>
</blockquote>
<p>ABæµ‹è¯•æ˜¯ä¸€ç§å¾ˆå¸¸ç”¨çš„åœ¨çº¿è¯„æµ‹ç®—æ³•çš„å®éªŒæ–¹æ³•ã€‚å®ƒé€šè¿‡ä¸€å®šçš„è§„åˆ™å°†ç”¨æˆ·éšæœºåˆ†æˆå‡ ç»„ï¼Œå¹¶å¯¹ä¸åŒç»„çš„ç”¨æˆ·é‡‡ç”¨ä¸åŒçš„ç®—æ³•ï¼Œç„¶åé€šè¿‡ç»Ÿè®¡ä¸åŒç»„ç”¨æˆ·çš„å„ç§ä¸åŒçš„è¯„æµ‹æŒ‡æ ‡æ¯”è¾ƒä¸åŒç®—æ³•ï¼Œæ¯”å¦‚å¯ä»¥ç»Ÿè®¡ä¸åŒç»„ç”¨æˆ·çš„ç‚¹å‡»ç‡ï¼Œé€šè¿‡ç‚¹å‡»ç‡æ¯”è¾ƒä¸åŒç®—æ³•çš„æ€§èƒ½ã€‚å¯¹ABæµ‹è¯•æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥æµè§ˆä¸€ä¸‹ç½‘ç«™<a href="http://www.abtests.com/" target="_blank" rel="noopener">http://www.abtests.com/</a> ï¼Œè¯¥ç½‘ç«™ç»™å‡ºäº†å¾ˆå¤šé€šè¿‡å®é™…ABæµ‹è¯•æé«˜ç½‘ç«™ç”¨æˆ·æ»¡æ„åº¦çš„ä¾‹å­ï¼Œä»ä¸­æˆ‘ä»¬å¯ä»¥å­¦ä¹ åˆ°å¦‚ä½•è¿›è¡Œåˆç†çš„ABæµ‹è¯•ã€‚</p>
<hr>
<p>Doing online A/B tests to tune your recommender system using your real customers, and measuring how they react to your recommendations. You can put recommendations from different algorithms in front of different sets of users, and measure if they actually buy, watch, or otherwise indicate interest in the recommendations youâ€™ve presented. </p>
<p>By always testing changes to your recommender system using controlled, online experiments, you can see if they actually cause people to discover and purchase more new things than they would have otherwise.</p>
<p>None of the metrics weâ€™ve discussed matter more than how real customers react to the recommendations you produce in the real world. You can have the most accurate rating predictions in the world, but if customers canâ€™t find new items to buy or watch from your system, it will be worthless from a practical standpoint. </p>
<p>Online tests can help you to avoid introducing complexity that adds no value, and remember, complex systems are difficult to maintain.</p>
<p>SO REMEMBER, offline metrics such as accuracy, diversity, and novelty can all be indicators you can look at while developing recommender systems offline, but you should never declare victory until youâ€™ve measured a real impact on real users from your work. <strong>User behavior is the ultimate test of your work.</strong></p>
<p><strong>Accurately predicted ratings donâ€™t necessarily make for good video recommendations. At the end of the day, the results of online A/B tests are the only evaluation that matters for your recommender system.</strong></p>
<hr>
<p> A/B æµ‹è¯•ï¼Œå¸¸è§çš„æŒ‡æ ‡æœ‰ç‚¹å‡»ç‡ã€ç”¨æˆ·åœç•™æ—¶é—´ã€ å¹¿å‘Šæ”¶å…¥ç­‰ï¼Œéœ€è¦æ³¨æ„åˆ†æç»Ÿè®¡æ˜¾è‘—æ€§ã€‚åŒæ—¶ï¼Œéœ€è¦æ³¨æ„çŸ­æœŸçš„æŒ‡æ ‡å’Œé•¿æœŸçš„æŒ‡æ ‡ç›¸ç»“åˆï¼Œ ä¸€äº›çŸ­æœŸæŒ‡æ ‡çš„æå‡æœ‰æ—¶å€™åè€Œä¼šå¯¼è‡´é•¿æœŸæŒ‡æ ‡ä¸‹é™ æ¯”å¦‚ ï¼Œç»å¸¸æ¨èç¾å¥³æˆ–è€…æç¬‘ç±»çš„å†…å®¹ä¼šå¸¦æ¥çŸ­æœŸçš„ç‚¹å‡»ç‡æé«˜ï¼Œä½†æ˜¯å¯èƒ½ä¼šå¼•èµ·é•¿æœŸçš„ç”¨æˆ·ç²˜æ€§ä¸‹é™ã€‚è®¾è®¡è€…éœ€è¦ä»è‡ªå·±çš„äº§å“è§’åº¦å‡ºå‘ï¼Œæ ¹æ®äº§å“çš„éœ€è¦åˆ¶å®šè¯„ä¼°æŒ‡æ ‡ï¼Œè¿™æ ·æ‰èƒ½æ›´å¥½åœ°æŒ‡å¯¼æ¨èç³»ç»Ÿçš„ä¼˜åŒ–æ–¹å‘ã€‚å¸¸è§çš„è¯„ä»·æŒ‡æ ‡å¦‚ä¸‹ï¼š</p>
<p><img src="https://camo.githubusercontent.com/fcefce67e348ce386471df934a041b367eb9b529/68747470733a2f2f67697465652e636f6d2f6b6b7765697368652f696d616765732f7261772f6d61737465722f4d4c2f323031392d392d385f31342d34332d35312e706e67" alt="img"></p>
<hr>
<p>Another thing you can do is just straight up ask your users, if they think specific recommendations are good. </p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578129889414.jpg" alt="1578129889414"></p>
<p>In practice though, itâ€™s a tough thing to do. Users will probably be confused over whether youâ€™re asking them to rate the item or rate the recommendation, so you wonâ€™t really know how to interpret this data. It also requires extra work form your customers with no clear payoff for them, so youâ€™re unlikely to get enough ratings on your recommendations to be useful. </p>
<p>Itâ€™s best to just stick with online A/B tests, and measure how your customers vote with their wallets on the quality of your recommendations.</p>
<h3 id="Quiz"><a href="#Quiz" class="headerlink" title="Quiz"></a>Quiz</h3><p><img src="/2020/01/04/Evaluate-Recommender-System/1578196100106.jpg" alt="1578196100106"></p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578196212178.jpg" alt="1578196212178"></p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578196333798.jpg" alt="1578196333798"></p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578196377981.jpg" alt="1578196377981"></p>
<h3 id="Code-Walkthrough"><a href="#Code-Walkthrough" class="headerlink" title="Code Walkthrough"></a>Code Walkthrough</h3><p>ä½¿ç”¨Pythonä¸­çš„library: Suprise. <a href="supriselib.com">SupriseLibâ€™s documentation online</a></p>
<p>Suprise is built around measuring the accuracy of recommender systems. Although this is the wrong thing to focus on, itâ€™s really the best we can do without access to a real, large-scale website of our own.</p>
<p>Evaluatingæ–‡ä»¶å¤¹é‡Œçš„ï¼š</p>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578201480503.jpg" alt="1578201480503"></p>
<p>RecommenderMetricsä¸­å®ç°äº†å‰é¢è®²åˆ°çš„ç”¨æ¥evaluate recommender systemçš„å„ç§metrics.</p>
<p>TestMetricsä¸­è°ƒç”¨äº†RecommenderMetricsä¸­çš„æ–¹æ³•æ¥å®ç°ä¸€ä¸ªreal recommender systemå¹¶evaluate it.</p>
<h4 id="ç»“æœåˆ†æ"><a href="#ç»“æœåˆ†æ" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h4><p><img src="/2020/01/04/Evaluate-Recommender-System/1578201799750.jpg" alt="1578201799750"></p>
<ul>
<li><p>RMSEå¤§æ¦‚0.9ï¼ŒMAEå¤§æ¦‚0.7ã€‚</p>
<p>On average, our guess of rating for a given movie for a given user, was off by about 0.7 stars. RMSE is higher, meaning that we got penalized for being way off more often than weâ€™d like.</p>
<p>Remember, error metrics are bad.  ä½ æƒ³è¦RMSEä¸MAEè¶Šä½è¶Šå¥½ï¼Œif accuracy is your goal.</p>
</li>
</ul>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578201882902.jpg" alt="1578201882902"></p>
<ul>
<li>Hit Rateå¤§æ¦‚ 3%ï¼Œwhich actually isnâ€™t that bad, considering that only one movie was left out from each userâ€™s rating to test with. è¿™ä¸ªæ•°å€¼æœ¬èº«å¾ˆéš¾è§£é‡Šæ˜¯å¥½æ˜¯åï¼Œé™¤éæœ‰å…¶ä»–çš„æ¨èç³»ç»Ÿå¯ä¾›æ¯”è¾ƒã€‚</li>
<li>If we break it down by rating value, you can see that our hit rate did better at higher rating predictions, which make sense and itâ€™s what we want to see. Hit Rateåœ¨è¯„åˆ†è¶Šé«˜çš„ç±»å‹ä¸­è¡¨ç°å¾—æ›´å¥½ï¼ˆä¾‹å¦‚ï¼Œåœ¨è¯„åˆ†ä¸º5çš„ç”µå½±ä¸­ï¼ŒHit Rateä¸º 6%ï¼‰ã€‚</li>
<li>Cumulative Hit Rate with a 4.0 threshold isnâ€™t much lower than the raw hit rate, meaning that weâ€™re doing a good job of recommending items we think are good recommendations.</li>
<li>ARHR is 0.01. It takes the ranking of the hits into account. Again, it has no real value until we have other recommender systems to compare it against.</li>
</ul>
<p><img src="/2020/01/04/Evaluate-Recommender-System/1578203470922.jpg" alt="1578203470922"></p>
<ul>
<li><p>We look at user coverage for which we have at least one 4-star rating prediction, ant itâ€™s pretty high. Thatâ€™s good.</p>
</li>
<li><p>Diversity is really high at 0.96, and novelty seems pretty high, with an average popularity rank of 491. Remember there are only a few thousand movies in our data set to begin with. </p>
<p>This tells us that our algorithm is going pretty deep into the long tail to get its recommendations and that could be a problem in the real world. Noveltyæ¯”è¾ƒé«˜ï¼ˆå¹³å‡å—æ¬¢è¿ç¨‹åº¦æ’åæ¯”è¾ƒé åï¼‰ï¼Œè¯´æ˜æ¨èçš„éƒ½æ˜¯æ¯”è¾ƒå°ä¼—çš„ç”µå½±ï¼ˆlong tailï¼‰.</p>
</li>
</ul>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>So even though our accuracy metrics look okay here, diversity and novelty is telling us that weâ€™re recommending a lot of really obscure stuff. And that could be an issue when trying to establish user trust in the system. People generally want to see a few things that at least look familiar. So I would expect this particular algorithm wouldnâ€™t do that well in an online A/B test, but you can never really know until  you actually try it. </p>
<p>Anyhow, we now have working code now for evaluating real recommender systems!</p>
]]></content>
      <categories>
        <category>Recommender System</category>
      </categories>
      <tags>
        <tag>Recommender System</tag>
      </tags>
  </entry>
  <entry>
    <title>Top-N Recommender Architecture</title>
    <url>/2020/01/03/Top-N-Recommender-Architecture/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/2020/01/03/Top-N-Recommender-Architecture/1578052647526.jpg" alt="1578052647526"></p>
<p><img src="/2020/01/03/Top-N-Recommender-Architecture/1578471196924.png" alt="1578471196924"></p>
]]></content>
      <categories>
        <category>Recommender System</category>
      </categories>
      <tags>
        <tag>Recommender System</tag>
      </tags>
  </entry>
  <entry>
    <title>RecSys Course Overview</title>
    <url>/2020/01/03/RecSys-Course-Overview/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¯¾ç¨‹ï¼š</p>
<p><a href="https://www.udemy.com/course-dashboard-redirect/?course_id=1726410" target="_blank" rel="noopener"><img src="https://i.udemycdn.com/course/240x135/1726410_7b86.jpg" alt="Building Recommender Systems with Machine Learning and AI"></a><a href="https://www.udemy.com/course/building-recommender-systems-with-machine-learning-and-ai/learn/" target="_blank" rel="noopener"><strong>Building Recommender Systems with Machine Learning and AI</strong> </a></p>
<p><a href="https://sundog-education.com/RecSys/" target="_blank" rel="noopener">Course Materials</a></p>
<p><img src="/2020/01/03/RecSys-Course-Overview/1578048175249.jpg" alt="1578048175249"></p>
]]></content>
      <categories>
        <category>Recommender System</category>
      </categories>
      <tags>
        <tag>Recommender System</tag>
      </tags>
  </entry>
  <entry>
    <title>MapReduce</title>
    <url>/2020/01/03/MapReduce/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="1-MapReduce-fundamental-concepts"><a href="#1-MapReduce-fundamental-concepts" class="headerlink" title="1. MapReduce fundamental concepts"></a>1. MapReduce fundamental concepts</h4><p><img src="/2020/01/03/MapReduce/1578032618932.jpg" alt="1"></p>
<p><img src="/2020/01/03/MapReduce/20200103-142610.jpg" alt="20200103-142610"></p>
<p><img src="/2020/01/03/MapReduce/1578032937052.jpg" alt="1578032937052"></p>
<h5 id="1-1-Mapper"><a href="#1-1-Mapper" class="headerlink" title="1.1 Mapper"></a>1.1 Mapper</h5><p><img src="/2020/01/03/MapReduce/1578033123727.jpg" alt="1578033123727"></p>
<p><img src="/2020/01/03/MapReduce/20200103-143446.jpg" alt="20200103-143446"></p>
<p><img src="/2020/01/03/MapReduce/1578033212508.jpg" alt="1578033212508"></p>
<p><img src="/2020/01/03/MapReduce/1578033238182.jpg" alt="1578033238182"></p>
<p>Mapper: Extract and organize what we care about.</p>
<h5 id="1-2-Shuffle-and-Sort"><a href="#1-2-Shuffle-and-Sort" class="headerlink" title="1.2 Shuffle and Sort"></a>1.2 Shuffle and Sort</h5><p><img src="/2020/01/03/MapReduce/1578033463232.jpg" alt="1578033463232"></p>
<p><img src="/2020/01/03/MapReduce/20200103-144645.jpg" alt="20200103-144645"></p>
<h5 id="1-3-Reducer"><a href="#1-3-Reducer" class="headerlink" title="1.3 Reducer"></a>1.3 Reducer</h5><p><img src="/2020/01/03/MapReduce/1578034121206.jpg" alt="1578034121206"></p>
<p><img src="/2020/01/03/MapReduce/20200103-144953.jpg" alt="20200103-144953"></p>
<p><img src="/2020/01/03/MapReduce/1578034303323.jpg" alt="1578034303323"></p>
<hr>
<h4 id="2-How-MapReduce-distributes-processing"><a href="#2-How-MapReduce-distributes-processing" class="headerlink" title="2. How MapReduce distributes processing"></a>2. How MapReduce distributes processing</h4><p><img src="/2020/01/03/MapReduce/1578034389919.jpg" alt="1578034389919"></p>
<p><img src="/2020/01/03/MapReduce/0002.jpg" alt="0002"></p>
<hr>
<h4 id="3-MapReduce-a-real-example"><a href="#3-MapReduce-a-real-example" class="headerlink" title="3. MapReduce: a real example"></a>3. MapReduce: a real example</h4><p><img src="/2020/01/03/MapReduce/1578035985411.jpg" alt="1578035985411"></p>
<p><img src="/2020/01/03/MapReduce/1578036687341.jpg" alt="1578036687341"></p>
<p>Sometimes, itâ€™s not easy to try to force a problem into this way of thinking, and thatâ€™s a big reason why other frameworks like Spark or Hive, or other ways of processing SQL style queries have become a little bit more popular that just writing raw MapReduce code.</p>
<p>But, still, if you can easily express something in terms of mapping and reducing, this can sometimes be the most efficient way of doing it.</p>
<p><img src="/2020/01/03/MapReduce/1578037510439.jpg" alt="1578037510439"></p>
<p>Then, the results all get passed into the MapReduce framework which does shuffle and sort for us. And then, we just have to write the Reducer.</p>
<p><img src="/2020/01/03/MapReduce/1578038403968.jpg" alt="1578038403968"></p>
<p>Hereâ€™s a complete Python MapReduce script.</p>
<p><img src="/2020/01/03/MapReduce/1578039179773.jpg" alt="1578039179773"></p>
<p>This is an entire MRJOB script in Python that would use MapReduce streaming to actually execute across a cluster.</p>
<hr>
<h4 id="4-Runing-MapReduce-with-MRJOB"><a href="#4-Runing-MapReduce-with-MRJOB" class="headerlink" title="4. Runing MapReduce with MRJOB"></a>4. Runing MapReduce with MRJOB</h4><p>é¦–å…ˆéœ€è¦å®‰è£…ä¸€äº›ä¸œè¥¿</p>
<p>Run our MapReduce job in our Hadoop installation.</p>
<p><a href="https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963054#overview" target="_blank" rel="noopener">https://www.udemy.com/course/the-ultimate-hands-on-hadoop-tame-your-big-data/learn/lecture/5963054#overview</a></p>
<p><img src="/2020/01/03/MapReduce/1578041252394.jpg" alt="1578041252394"></p>
<p><img src="/2020/01/03/MapReduce/1578041273664.jpg" alt="1578041273664"></p>
<p><img src="/2020/01/03/MapReduce/1578041300494.jpg" alt="1578041300494"></p>
<hr>
<h4 id="5-Challenge-Exercise"><a href="#5-Challenge-Exercise" class="headerlink" title="5. Challenge Exercise"></a>5. Challenge Exercise</h4><p><img src="/2020/01/03/MapReduce/1578043490000.jpg" alt="1578043490000"></p>
<p><img src="/2020/01/03/MapReduce/1578043550225.jpg" alt="1578043550225"></p>
<p><img src="/2020/01/03/MapReduce/1578043582794.jpg" alt="1578043582794"></p>
<p><img src="/2020/01/03/MapReduce/1578043608450.jpg" alt="1578043608450"></p>
<p><img src="/2020/01/03/MapReduce/1578043786325.jpg" alt="1578043786325"></p>
<hr>
<h4 id="6-Check-your-results"><a href="#6-Check-your-results" class="headerlink" title="6. Check your results"></a>6. Check your results</h4><p><img src="/2020/01/03/MapReduce/1578044582388.jpg" alt="1578044582388"></p>
<p>ç»“æœï¼š</p>
<p><img src="/2020/01/03/MapReduce/1578044858078.jpg" alt="1578044858078"></p>
<p>movieId 50 æ˜¯æœ€popularçš„ç”µå½±ã€‚</p>
]]></content>
      <categories>
        <category>Hadoop</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
        <tag>HDFS and MapReduce</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯</title>
    <url>/2020/01/02/%E6%9C%89%E6%95%88%E7%9A%84%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/valid-anagram/" target="_blank" rel="noopener">æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2020/01/02/æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨"><a href="#æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨"></a>æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨</h4><h5 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h5><ul>
<li>é¦–å…ˆåˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰åˆ™ç›´æ¥è¿”å› falseã€‚</li>
<li>è‹¥ç›¸ç­‰ï¼Œåˆ™åˆå§‹åŒ– 26 ä¸ªå­—æ¯å“ˆå¸Œè¡¨ï¼Œéå†å­—ç¬¦ä¸² s å’Œ t</li>
<li><strong>s è´Ÿè´£åœ¨å¯¹åº”ä½ç½®å¢åŠ ï¼Œt è´Ÿè´£åœ¨å¯¹åº”ä½ç½®å‡å°‘ï¼Œå¦‚æœå“ˆå¸Œè¡¨çš„å€¼éƒ½ä¸º 0ï¼Œåˆ™äºŒè€…æ˜¯å­—æ¯å¼‚ä½è¯</strong></li>
</ul>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚<br>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚å°½ç®¡æˆ‘ä»¬ä½¿ç”¨äº†é¢å¤–çš„ç©ºé—´ï¼Œä½†æ˜¯ç©ºé—´çš„å¤æ‚æ€§æ˜¯ O(1)ï¼Œå› ä¸ºæ— è®º N æœ‰å¤šå¤§ï¼Œè¡¨çš„å¤§å°éƒ½ä¿æŒä¸å˜ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><p>Java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAnagram</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.length() != t.length())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] alpha = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++)&#123;</span><br><span class="line">            alpha[s.charAt(i) - <span class="string">'a'</span>]++;</span><br><span class="line">            alpha[t.charAt(i) - <span class="string">'a'</span>]--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i : alpha)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i!=<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/02/æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯/4.jpg" alt="4"></p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼šæ’åº"><a href="#æ–¹æ³•äºŒï¼šæ’åº" class="headerlink" title="æ–¹æ³•äºŒï¼šæ’åº"></a>æ–¹æ³•äºŒï¼šæ’åº</h4><h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œç©ºé—´å–å†³äºæ’åºå®ç°ï¼Œå¦‚æœä½¿ç”¨ <code>heapsort</code>ï¼Œé€šå¸¸éœ€è¦ O(1)è¾…åŠ©ç©ºé—´ã€‚</p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isAnagram</span><span class="params">(self, s: str, t: str)</span> -&gt; bool:</span></span><br><span class="line">        <span class="keyword">return</span> sorted(s) == sorted(t)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/02/æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯/3.jpg" alt="3"></p>
<hr>
<h4 id="æ–¹æ³•ä¸‰ï¼šåˆ©ç”¨Pythonä¸­çš„set"><a href="#æ–¹æ³•ä¸‰ï¼šåˆ©ç”¨Pythonä¸­çš„set" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šåˆ©ç”¨Pythonä¸­çš„set()"></a>æ–¹æ³•ä¸‰ï¼šåˆ©ç”¨Pythonä¸­çš„set()</h4><p>Python</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isAnagram</span><span class="params">(self, s: str, t: str)</span> -&gt; bool:</span></span><br><span class="line">        <span class="keyword">if</span> len(s) != len(t):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        set1 = set(s)</span><br><span class="line">        set2 = set(t)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> set1:</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> set2:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> set2:</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> set1:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> set1:</span><br><span class="line">            <span class="keyword">if</span> s.count(i) != t.count(i):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/02/æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯/2.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>å­—ç¬¦ä¸²</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ ä¸€</title>
    <url>/2020/01/02/%E5%8A%A0%E4%B8%80/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/plus-one/" target="_blank" rel="noopener">åŠ ä¸€ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2020/01/02/åŠ ä¸€/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ï¼šæ•°ç»„éå†"><a href="#æ–¹æ³•ï¼šæ•°ç»„éå†" class="headerlink" title="æ–¹æ³•ï¼šæ•°ç»„éå†"></a>æ–¹æ³•ï¼šæ•°ç»„éå†</h4><p><img src="/2020/01/02/åŠ ä¸€/2.jpg" alt="2"></p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] plusOne(<span class="keyword">int</span>[] digits) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = digits.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">            digits[i] = (digits[i]+<span class="number">1</span>) % <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span>(digits[i] != <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> digits;</span><br><span class="line">        &#125;</span><br><span class="line">        digits = <span class="keyword">new</span> <span class="keyword">int</span>[digits.length+<span class="number">1</span>];</span><br><span class="line">        digits[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> digits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/02/åŠ ä¸€/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</title>
    <url>/2020/01/02/%E7%94%B5%E8%AF%9D%E5%8F%B7%E7%A0%81%E7%9A%84%E5%AD%97%E6%AF%8D%E7%BB%84%E5%90%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/" target="_blank" rel="noopener">ç”µè¯å·ç çš„å­—æ¯ç»„åˆï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2020/01/02/ç”µè¯å·ç çš„å­—æ¯ç»„åˆ/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ï¼šå›æº¯"><a href="#æ–¹æ³•ï¼šå›æº¯" class="headerlink" title="æ–¹æ³•ï¼šå›æº¯"></a>æ–¹æ³•ï¼šå›æº¯</h4><p><img src="/2020/01/02/ç”µè¯å·ç çš„å­—æ¯ç»„åˆ/2.jpg" alt="2"></p>
<p><img src="https://pic.leetcode-cn.com/0ac574ab37f620221e702f57d6c4ffd0ba246abe41c43f9fc9637ab8f3365377-image.png" alt="img"></p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">letterCombinations</span><span class="params">(self, digits: str)</span> -&gt; List[str]:</span></span><br><span class="line">        phone = &#123;<span class="string">'2'</span>:[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>],</span><br><span class="line">                <span class="string">'3'</span>:[<span class="string">'d'</span>,<span class="string">'e'</span>,<span class="string">'f'</span>],</span><br><span class="line">                <span class="string">'4'</span>:[<span class="string">'g'</span>,<span class="string">'h'</span>,<span class="string">'i'</span>],</span><br><span class="line">                <span class="string">'5'</span>:[<span class="string">'j'</span>,<span class="string">'k'</span>,<span class="string">'l'</span>],</span><br><span class="line">                <span class="string">'6'</span>:[<span class="string">'m'</span>,<span class="string">'n'</span>,<span class="string">'o'</span>],</span><br><span class="line">                <span class="string">'7'</span>:[<span class="string">'p'</span>,<span class="string">'q'</span>,<span class="string">'r'</span>,<span class="string">'s'</span>],</span><br><span class="line">                <span class="string">'8'</span>:[<span class="string">'t'</span>,<span class="string">'u'</span>,<span class="string">'v'</span>],</span><br><span class="line">                <span class="string">'9'</span>:[<span class="string">'w'</span>,<span class="string">'x'</span>,<span class="string">'y'</span>,<span class="string">'z'</span>]&#125;</span><br><span class="line"></span><br><span class="line">        output = []</span><br><span class="line">        <span class="keyword">if</span> digits:</span><br><span class="line">            self.backtrack(<span class="string">""</span>, digits, phone, output)</span><br><span class="line">        <span class="keyword">return</span> output</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">(self, combination, digit, phone, output)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(digit)==<span class="number">0</span>:</span><br><span class="line">            output.append(combination)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> letter <span class="keyword">in</span> phone[digit[<span class="number">0</span>]]:</span><br><span class="line">            self.backtrack(combination+letter,digit[<span class="number">1</span>:], phone, output)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/02/ç”µè¯å·ç çš„å­—æ¯ç»„åˆ/4.jpg" alt="4"></p>
<p><img src="/2020/01/02/ç”µè¯å·ç çš„å­—æ¯ç»„åˆ/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>å›æº¯ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>ç››æœ€å¤šæ°´çš„å®¹å™¨</title>
    <url>/2020/01/02/%E7%9B%9B%E6%9C%80%E5%A4%9A%E6%B0%B4%E7%9A%84%E5%AE%B9%E5%99%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/container-with-most-water/" target="_blank" rel="noopener">ç››æœ€å¤šæ°´çš„å®¹å™¨ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2020/01/02/ç››æœ€å¤šæ°´çš„å®¹å™¨/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ï¼šåŒæŒ‡é’ˆ"><a href="#æ–¹æ³•ï¼šåŒæŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•ï¼šåŒæŒ‡é’ˆ"></a>æ–¹æ³•ï¼šåŒæŒ‡é’ˆ</h4><h5 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h5><p>ä¸¤çº¿æ®µä¹‹é—´å½¢æˆçš„åŒºåŸŸæ€»æ˜¯ä¼šå—åˆ°å…¶ä¸­è¾ƒçŸ­é‚£æ¡é•¿åº¦çš„é™åˆ¶ã€‚æ­¤å¤–ï¼Œä¸¤çº¿æ®µè·ç¦»è¶Šè¿œï¼Œå¾—åˆ°çš„é¢ç§¯å°±è¶Šå¤§ã€‚</p>
<h5 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h5><ul>
<li><strong>åœ¨ç”±çº¿æ®µé•¿åº¦æ„æˆçš„æ•°ç»„ä¸­ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæ”¾åœ¨å¼€å§‹ï¼Œä¸€ä¸ªç½®äºæœ«å°¾</strong>ã€‚</li>
<li>ä½¿ç”¨å˜é‡ max_areaæ¥æŒç»­å­˜å‚¨åˆ°ç›®å‰ä¸ºæ­¢æ‰€è·å¾—çš„æœ€å¤§é¢ç§¯ã€‚ </li>
<li>åœ¨æ¯ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ä¼šæ‰¾å‡ºæŒ‡é’ˆæ‰€æŒ‡å‘çš„ä¸¤æ¡çº¿æ®µå½¢æˆçš„åŒºåŸŸï¼Œæ›´æ–° max_areaï¼Œ<strong>å¹¶å°†æŒ‡å‘è¾ƒçŸ­çº¿æ®µçš„æŒ‡é’ˆå‘è¾ƒé•¿çº¿æ®µé‚£ç«¯ç§»åŠ¨ä¸€æ­¥</strong>ã€‚</li>
</ul>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œä¸€æ¬¡æ‰«æã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œä½¿ç”¨æ’å®šçš„ç©ºé—´ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxArea</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = height.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> max_area = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">            max_area = Math.max(max_area, Math.min(height[left],height[right]) * (right-left));</span><br><span class="line">            <span class="keyword">if</span>(height[left] &lt; height[right])</span><br><span class="line">                left++;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                right--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max_area;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/02/ç››æœ€å¤šæ°´çš„å®¹å™¨/2.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</title>
    <url>/2020/01/02/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/regular-expression-matching/" target="_blank" rel="noopener">æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼ˆéš¾åº¦ï¼šå›°éš¾ï¼‰</a></p>
<p><img src="/2020/01/02/æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…/1.jpg" alt="1"></p>
<p>è½¬è‡ªï¼š</p>
<blockquote>
<p>ä½œè€…ï¼šlabuladong<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/regular-expression-matching/solution/ji-yu-guan-fang-ti-jie-gen-xiang-xi-de-jiang-jie-b/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/regular-expression-matching/solution/ji-yu-guan-fang-ti-jie-gen-xiang-xi-de-jiang-jie-b/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</p>
</blockquote>
<h4 id="ä¸€ã€å¤„ç†ç‚¹å·ã€Œ-ã€é€šé…ç¬¦"><a href="#ä¸€ã€å¤„ç†ç‚¹å·ã€Œ-ã€é€šé…ç¬¦" class="headerlink" title="ä¸€ã€å¤„ç†ç‚¹å·ã€Œ.ã€é€šé…ç¬¦"></a>ä¸€ã€å¤„ç†ç‚¹å·ã€Œ.ã€é€šé…ç¬¦</h4><p>ç‚¹å·å¯ä»¥åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œå…¶å®æ˜¯æœ€ç®€å•çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isMatch</span><span class="params">(text, pattern)</span> -&gt; bool:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> pattern: <span class="keyword">return</span> <span class="keyword">not</span> text</span><br><span class="line">    first_match = bool(text) <span class="keyword">and</span> pattern[<span class="number">0</span>] <span class="keyword">in</span> &#123;text[<span class="number">0</span>], <span class="string">'.'</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> first_match <span class="keyword">and</span> isMatch(text[<span class="number">1</span>:], pattern[<span class="number">1</span>:])</span><br></pre></td></tr></table></figure>
<h4 id="äºŒã€å¤„ç†ã€Œ-ã€é€šé…ç¬¦"><a href="#äºŒã€å¤„ç†ã€Œ-ã€é€šé…ç¬¦" class="headerlink" title="äºŒã€å¤„ç†ã€Œ*ã€é€šé…ç¬¦"></a>äºŒã€å¤„ç†ã€Œ*ã€é€šé…ç¬¦</h4><p>æ˜Ÿå·é€šé…ç¬¦å¯ä»¥è®©å‰ä¸€ä¸ªå­—ç¬¦é‡å¤ä»»æ„æ¬¡æ•°ï¼ŒåŒ…æ‹¬é›¶æ¬¡ã€‚é‚£åˆ°åº•æ˜¯é‡å¤å‡ æ¬¡å‘¢ï¼Ÿè¿™éœ€è¦è®¡ç®—æœºæš´åŠ›ç©·ä¸¾æ¥ç®—ï¼Œå‡è®¾é‡å¤ N æ¬¡å§ã€‚å†™é€’å½’çš„æŠ€å·§æ˜¯ç®¡å¥½å½“ä¸‹ï¼Œä¹‹åçš„äº‹æŠ›ç»™é€’å½’ã€‚å…·ä½“åˆ°è¿™é‡Œï¼Œä¸ç®¡ N æ˜¯å¤šå°‘ï¼Œå½“å‰çš„é€‰æ‹©åªæœ‰ä¸¤ä¸ªï¼šåŒ¹é… 0 æ¬¡ã€åŒ¹é… 1 æ¬¡ã€‚æ‰€ä»¥å¯ä»¥è¿™æ ·å¤„ç†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isMatch</span><span class="params">(text, pattern)</span> -&gt; bool:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> pattern: <span class="keyword">return</span> <span class="keyword">not</span> text</span><br><span class="line">    first_match = bool(text) <span class="keyword">and</span> pattern[<span class="number">0</span>] <span class="keyword">in</span> &#123;text[<span class="number">0</span>], <span class="string">'.'</span>&#125;</span><br><span class="line">    <span class="keyword">if</span> len(pattern) &gt;= <span class="number">2</span> <span class="keyword">and</span> pattern[<span class="number">1</span>] == <span class="string">'*'</span>:</span><br><span class="line">        <span class="comment"># å‘ç° '*' é€šé…ç¬¦</span></span><br><span class="line">        <span class="keyword">return</span> isMatch(text, pattern[<span class="number">2</span>:]) <span class="keyword">or</span> \</span><br><span class="line">                first_match <span class="keyword">and</span> isMatch(text[<span class="number">1</span>:], pattern)</span><br><span class="line">    	<span class="comment"># è§£é‡Šï¼šå¦‚æœå‘ç°æœ‰å­—ç¬¦å’Œ '*' ç»“åˆï¼Œ</span></span><br><span class="line">        	<span class="comment"># æˆ–è€…åŒ¹é…è¯¥å­—ç¬¦ 0 æ¬¡ï¼Œç„¶åè·³è¿‡è¯¥å­—ç¬¦å’Œ '*'</span></span><br><span class="line">        	<span class="comment"># æˆ–è€…å½“ pattern[0] å’Œ text[0] åŒ¹é…åï¼Œç§»åŠ¨ text</span></span><br><span class="line">            </span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> first_match <span class="keyword">and</span> isMatch(text[<span class="number">1</span>:], pattern[<span class="number">1</span>:])</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ä¿ç•™ pattern ä¸­çš„ã€Œ*ã€ï¼ŒåŒæ—¶å‘åæ¨ç§» textï¼Œæ¥å®ç°ã€Œ*ã€å°†å­—ç¬¦é‡å¤åŒ¹é…å¤šæ¬¡çš„åŠŸèƒ½ã€‚</p>
<h4 id="ä¸‰ã€åŠ¨æ€è§„åˆ’"><a href="#ä¸‰ã€åŠ¨æ€è§„åˆ’" class="headerlink" title="ä¸‰ã€åŠ¨æ€è§„åˆ’"></a>ä¸‰ã€åŠ¨æ€è§„åˆ’</h4><h5 id="æš´åŠ›è§£æ³•"><a href="#æš´åŠ›è§£æ³•" class="headerlink" title="æš´åŠ›è§£æ³•"></a>æš´åŠ›è§£æ³•</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isMatch</span><span class="params">(self, s: str, p: str)</span> -&gt; bool:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> p:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">not</span> s</span><br><span class="line">        </span><br><span class="line">        first = s <span class="keyword">and</span> p[<span class="number">0</span>] <span class="keyword">in</span> &#123;s[<span class="number">0</span>],<span class="string">'.'</span>&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> len(p) &gt;= <span class="number">2</span> <span class="keyword">and</span> p[<span class="number">1</span>]==<span class="string">'*'</span>:</span><br><span class="line">            <span class="keyword">return</span> self.isMatch(s,p[<span class="number">2</span>:]) <span class="keyword">or</span> (first <span class="keyword">and</span> self.isMatch(s[<span class="number">1</span>:],p))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> first <span class="keyword">and</span> self.isMatch(s[<span class="number">1</span>:],p[<span class="number">1</span>:])</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/02/æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…/2.jpg" alt="2"></p>
<h5 id="ä¼˜åŒ–è§£æ³•"><a href="#ä¼˜åŒ–è§£æ³•" class="headerlink" title="ä¼˜åŒ–è§£æ³•"></a>ä¼˜åŒ–è§£æ³•</h5><p>ä½¿ç”¨ä¸¤ä¸ªå˜é‡ <code>i</code>, <code>j</code> è®°å½•å½“å‰åŒ¹é…åˆ°çš„ä½ç½®ï¼Œä»è€Œé¿å…ä½¿ç”¨å­å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œå¹¶ä¸”å°† <code>i</code>, <code>j</code> å­˜å…¥memoï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isMatch</span><span class="params">(self, s: str, p: str)</span> -&gt; bool:</span></span><br><span class="line">        memo = &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dp</span><span class="params">(i,j)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> (i,j) <span class="keyword">in</span> memo:</span><br><span class="line">                <span class="keyword">return</span> memo[(i,j)]</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> j==len(p):</span><br><span class="line">                <span class="keyword">return</span> i==len(s)</span><br><span class="line">            </span><br><span class="line">            first = i &lt; len(s) <span class="keyword">and</span> p[j] <span class="keyword">in</span> &#123;s[i],<span class="string">'.'</span>&#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> len(p) &gt;= j+<span class="number">2</span> <span class="keyword">and</span> p[j+<span class="number">1</span>]==<span class="string">'*'</span>:</span><br><span class="line">                <span class="keyword">return</span> dp(i,j+<span class="number">2</span>) <span class="keyword">or</span> (first <span class="keyword">and</span> dp(i+<span class="number">1</span>,j))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> first <span class="keyword">and</span> dp(i+<span class="number">1</span>,j+<span class="number">1</span>)</span><br><span class="line">            </span><br><span class="line">            memo[(i,j)] = ans</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> dp(<span class="number">0</span>,<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/02/æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…/3.jpg" alt="3"></p>
<h6 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h6><p>æ—¶é—´å¤æ‚åº¦ï¼šç”¨ T å’Œ P åˆ†åˆ«è¡¨ç¤ºåŒ¹é…ä¸²å’Œæ¨¡å¼ä¸²çš„é•¿åº¦ã€‚å¯¹äº i=0, â€¦ , T å’Œ j=0, â€¦ , P æ¯ä¸€ä¸ª dp(i, j) åªä¼šè¢«è®¡ç®—ä¸€æ¬¡ï¼Œæ‰€ä»¥åé¢æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯ O(1)çš„æ—¶é—´ã€‚å› æ­¤ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ä¸º O(TP) ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šæˆ‘ä»¬ç”¨åˆ°çš„ç©ºé—´ä»…æœ‰ O(TP)ä¸ª boolean ç±»å‹çš„ç¼“å­˜å˜é‡ã€‚æ‰€ä»¥ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(TP) ã€‚</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>å•è°ƒé€’å¢çš„æ•°å­—</title>
    <url>/2020/01/02/%E5%8D%95%E8%B0%83%E9%80%92%E5%A2%9E%E7%9A%84%E6%95%B0%E5%AD%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/monotone-increasing-digits/" target="_blank" rel="noopener">å•è°ƒé€’å¢çš„æ•°å­—ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2020/01/02/å•è°ƒé€’å¢çš„æ•°å­—/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ï¼š"><a href="#æ–¹æ³•ï¼š" class="headerlink" title="æ–¹æ³•ï¼š"></a>æ–¹æ³•ï¼š</h4><p><img src="/2020/01/02/å•è°ƒé€’å¢çš„æ•°å­—/2.jpg" alt="2"></p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">monotoneIncreasingDigits</span><span class="params">(self, N: int)</span> -&gt; int:</span></span><br><span class="line">        s = list(str(N))</span><br><span class="line">        i = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> i&lt;len(s) <span class="keyword">and</span> s[i<span class="number">-1</span>] &lt;= s[i]:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> <span class="number">0</span> &lt; i &lt; len(s) <span class="keyword">and</span> s[i<span class="number">-1</span>] &gt; s[i]:</span><br><span class="line">            s[i<span class="number">-1</span>] = str(int(s[i<span class="number">-1</span>])<span class="number">-1</span>)</span><br><span class="line">            i-=<span class="number">1</span></span><br><span class="line">        s[i+<span class="number">1</span>:] = <span class="string">'9'</span>*(len(s)-i<span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> int(<span class="string">''</span>.join(s))</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/02/å•è°ƒé€’å¢çš„æ•°å­—/3.jpg" alt="3"></p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(D)ã€‚å…¶ä¸­ Dâ‰ˆlogNï¼ŒN æ˜¯æ•°å­—çš„é•¿åº¦ã€‚<br>ç©ºé—´å¤æ‚åº¦ï¼šO(D)ã€‚</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•´æ•°</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§»æ‰Kä½æ•°å­—</title>
    <url>/2020/01/02/%E7%A7%BB%E6%8E%89K%E4%BD%8D%E6%95%B0%E5%AD%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/remove-k-digits/" target="_blank" rel="noopener">ç§»æ‰Kä½æ•°å­—ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2020/01/02/ç§»æ‰Kä½æ•°å­—/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ï¼šå•è°ƒæ ˆ"><a href="#æ–¹æ³•ï¼šå•è°ƒæ ˆ" class="headerlink" title="æ–¹æ³•ï¼šå•è°ƒæ ˆ"></a>æ–¹æ³•ï¼šå•è°ƒæ ˆ</h4><p>ç»´æŠ¤ä¸€ä¸ªé€’å¢æ ˆï¼Œä½†å½“å‰å…ƒç´ å°äºæ ˆé¡¶å…ƒç´ ï¼Œåˆ™ç§»æ‰æ ˆé¡¶å…ƒç´ ã€‚</p>
<h5 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h5><p>è½¬è‡ª</p>
<blockquote>
<p>ä½œè€…ï¼šmonkeybing<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/remove-k-digits/solution/cyu-yan-zhan-shi-xian-tan-xin-suan-fa-by-monkeybin/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/remove-k-digits/solution/cyu-yan-zhan-shi-xian-tan-xin-suan-fa-by-monkeybin/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</p>
</blockquote>
<p>æœ¬é¢˜é‡‡ç”¨è´ªå¿ƒæ€è·¯ï¼š</p>
<ol>
<li>å¦‚æœå­—ç¬¦ä¸²æŒ‰ç…§æ•°å­—å¤§å°å‡åºæ’åˆ—ï¼Œåªéœ€è¦åˆ é™¤æœ€åKä¸ªå­—ç¬¦å³å¯ï¼›</li>
<li>å¦‚æœéå‡åºæ’åˆ—ï¼Œéœ€è¦ä»å‰åˆ°åéå†ï¼Œåˆ é™¤å­—ç¬¦ä¸²ä¸­æ¯ä¸ªé€†åºæ’åˆ—çš„å­—ç¬¦ã€‚ç”±äºæ˜¯ä»å‰åˆ°åéå†ï¼Œæ‰€ä»¥å…ˆåˆ é™¤çš„ä¸€å®šæ˜¯é«˜ä½çš„æ•°å­—ï¼Œå¯ä»¥ä¿è¯åˆ é™¤åå¾—åˆ°çš„æœ€ç»ˆæ•°å­—æœ€å°ã€‚</li>
</ol>
<p>ä¸¾ä¾‹æ¥è¯´ï¼šå¦‚æœå­—ç¬¦ä¸²num = â€œ123456789â€, k = 3ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ é™¤æœ€å3ä¸ªæ•°å­—ï¼Œå¾—åˆ°â€123456â€.<br>å¦‚æœå­—ç¬¦ä¸²num = â€œ1432219â€, k = 3ï¼Œéœ€è¦ä»å‰åˆ°åéå†æŸ¥æ‰¾é€†åºæ•°å­—ï¼Œè¿›è¡Œåˆ é™¤ï¼Œç¬¬ä¸€ä¸ªé€†åºæ•°å­—ä¸ºâ€™4â€™ï¼Œç¬¬äºŒä¸ªé€†åºæ•°å­—ä¸ºâ€™3â€™ï¼Œç¬¬ä¸‰ä¸ªé€†åºæ•°å­—ä¸ºç¬¬äºŒä¸ªâ€™2â€™ï¼Œæœ€åå¾—åˆ°â€1219â€ã€‚</p>
<p><strong>æ‰€ä»¥å¯ä»¥é‡‡ç”¨æ ˆå®ç°ï¼Œæ¯æ¬¡éå†ï¼Œåˆ¤æ–­å¦‚æœæ ˆéç©ºï¼Œä¸”å½“å‰æ•°å­—å¤§äºæ ˆé¡¶æ•°å­—ï¼Œä¸”kè¿˜æœ‰å‰©ä½™ï¼ˆä¸ä¸º0ï¼‰ï¼Œå°†æ ˆé¡¶æ•°å­—å‡ºæ ˆã€‚æœ€åå°†å½“å‰æ•°å­—å…¥æ ˆã€‚</strong><br>å¦‚æœéå†å®Œæˆåï¼Œkä»æœ‰å‰©ä½™ï¼Œåˆ™ä¾æ¬¡å°†æ ˆé¡¶æ•°å­—å‡ºæ ˆã€‚æœ€åæ ˆä¸­ä¿å­˜çš„æ•°å­—å³ä¸ºæ‰€æ±‚ã€‚æŒ‰ç…§ä»æ ˆåº•åˆ°æ ˆé¡¶è¾“å‡ºå³å¯ã€‚<br>æ³¨æ„ï¼šç‰¹åˆ¤åœºæ™¯ï¼Œå¦‚æœæœ€åæ‰€æœ‰æ•°å­—å‡å‡ºæ ˆï¼Œå³æ ˆä¸ºç©ºï¼Œéœ€è¦è¿”å›â€0â€ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">removeKdigits</span><span class="params">(self, num: str, k: int)</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> num <span class="keyword">or</span> k &lt;=<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> num</span><br><span class="line">        </span><br><span class="line">        stack = []</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> num:</span><br><span class="line">            <span class="keyword">while</span> stack <span class="keyword">and</span> k &gt; <span class="number">0</span> <span class="keyword">and</span> stack[<span class="number">-1</span>] &gt; c:</span><br><span class="line">                stack.pop()</span><br><span class="line">                k -= <span class="number">1</span></span><br><span class="line">            stack.append(c)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> k &gt; <span class="number">0</span>:</span><br><span class="line">            stack.pop()</span><br><span class="line">            k -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> stack:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'0'</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> str(int(<span class="string">''</span>.join(stack)))</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/02/ç§»æ‰Kä½æ•°å­—/2.jpg" alt="2"></p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n).</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n).</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ ˆ</tag>
        <tag>å­—ç¬¦ä¸²</tag>
        <tag>è´ªå¿ƒç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>è´ªå¿ƒç®—æ³•</title>
    <url>/2020/01/01/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è½¬è‡ªï¼š</p>
<blockquote>
<p>ä½œè€…ï¼šlabuladong<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/non-overlapping-intervals/solution/tan-xin-suan-fa-zhi-qu-jian-diao-du-wen-ti-by-labu/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/non-overlapping-intervals/solution/tan-xin-suan-fa-zhi-qu-jian-diao-du-wen-ti-by-labu/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</p>
</blockquote>
<p>ä»€ä¹ˆæ˜¯è´ªå¿ƒç®—æ³•å‘¢ï¼Ÿè´ªå¿ƒç®—æ³•å¯ä»¥è®¤ä¸ºæ˜¯åŠ¨æ€è§„åˆ’ç®—æ³•çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œç›¸æ¯”åŠ¨æ€è§„åˆ’ï¼Œä½¿ç”¨è´ªå¿ƒç®—æ³•éœ€è¦æ»¡è¶³æ›´å¤šçš„æ¡ä»¶ï¼ˆè´ªå¿ƒé€‰æ‹©æ€§è´¨ï¼‰ï¼Œä½†æ˜¯æ•ˆç‡æ¯”åŠ¨æ€è§„åˆ’è¦é«˜ã€‚</p>
<p>æ¯”å¦‚è¯´ä¸€ä¸ªç®—æ³•é—®é¢˜ä½¿ç”¨æš´åŠ›è§£æ³•éœ€è¦æŒ‡æ•°çº§æ—¶é—´ï¼Œå¦‚æœèƒ½ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¶ˆé™¤é‡å å­é—®é¢˜ï¼Œå°±å¯ä»¥é™åˆ°å¤šé¡¹å¼çº§åˆ«çš„æ—¶é—´ï¼Œå¦‚æœæ»¡è¶³è´ªå¿ƒé€‰æ‹©æ€§è´¨ï¼Œé‚£ä¹ˆå¯ä»¥è¿›ä¸€æ­¥é™ä½æ—¶é—´å¤æ‚åº¦ï¼Œè¾¾åˆ°çº¿æ€§çº§åˆ«çš„ã€‚</p>
<p>ä»€ä¹ˆæ˜¯è´ªå¿ƒé€‰æ‹©æ€§è´¨å‘¢ï¼Œç®€å•è¯´å°±æ˜¯ï¼šæ¯ä¸€æ­¥éƒ½åšå‡ºä¸€ä¸ªå±€éƒ¨æœ€ä¼˜çš„é€‰æ‹©ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯å…¨å±€æœ€ä¼˜ã€‚æ³¨æ„å“¦ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šæ€§è´¨ï¼Œå…¶å®åªæœ‰ä¸€éƒ¨åˆ†é—®é¢˜æ‹¥æœ‰è¿™ä¸ªæ€§è´¨ã€‚</p>
<p>æ¯”å¦‚ä½ é¢å‰æ”¾ç€ 100 å¼ äººæ°‘å¸ï¼Œä½ åªèƒ½æ‹¿åå¼ ï¼Œæ€ä¹ˆæ‰èƒ½æ‹¿æœ€å¤šçš„é¢é¢ï¼Ÿæ˜¾ç„¶æ¯æ¬¡é€‰æ‹©å‰©ä¸‹é’ç¥¨ä¸­é¢å€¼æœ€å¤§çš„ä¸€å¼ ï¼Œæœ€åä½ çš„é€‰æ‹©ä¸€å®šæ˜¯æœ€ä¼˜çš„ã€‚</p>
<p>ç„¶è€Œï¼Œå¤§éƒ¨åˆ†é—®é¢˜æ˜æ˜¾ä¸å…·æœ‰è´ªå¿ƒé€‰æ‹©æ€§è´¨ã€‚æ¯”å¦‚æ‰“ç‰Œï¼Œå¯¹æ‰‹å‡ºå¯¹å„¿ä¸‰ï¼ŒæŒ‰ç…§è´ªå¿ƒç­–ç•¥ï¼Œä½ åº”è¯¥å‡ºå°½å¯èƒ½å°çš„ç‰Œåˆšå¥½å‹åˆ¶ä½å¯¹æ–¹ï¼Œä½†ç°å®æƒ…å†µæˆ‘ä»¬ç”šè‡³å¯èƒ½ä¼šå‡ºç‹ç‚¸ã€‚è¿™ç§æƒ…å†µå°±ä¸èƒ½ç”¨è´ªå¿ƒç®—æ³•ï¼Œè€Œå¾—ä½¿ç”¨åŠ¨æ€è§„åˆ’è§£å†³ï¼Œå‚è§å‰æ–‡<a href="https://leetcode-cn.com/problems/stone-game/solution/jie-jue-bo-yi-wen-ti-de-dong-tai-gui-hua-tong-yong/" target="_blank" rel="noopener">åŠ¨æ€è§„åˆ’è§£å†³åšå¼ˆé—®é¢˜</a>ã€‚</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†ç‚¹</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>æ— é‡å åŒºé—´</title>
    <url>/2020/01/01/%E6%97%A0%E9%87%8D%E5%8F%A0%E5%8C%BA%E9%97%B4/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/non-overlapping-intervals/" target="_blank" rel="noopener">æ— é‡å åŒºé—´ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2020/01/01/æ— é‡å åŒºé—´/1.jpg" alt="1"></p>
<p>è½¬è‡ªï¼š</p>
<blockquote>
<p>ä½œè€…ï¼šlabuladong<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/non-overlapping-intervals/solution/tan-xin-suan-fa-zhi-qu-jian-diao-du-wen-ti-by-labu/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/non-overlapping-intervals/solution/tan-xin-suan-fa-zhi-qu-jian-diao-du-wen-ti-by-labu/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</p>
</blockquote>
<p>æœ¬æ–‡è§£å†³ä¸€ä¸ªå¾ˆç»å…¸çš„è´ªå¿ƒç®—æ³•é—®é¢˜ Interval Schedulingï¼ˆåŒºé—´è°ƒåº¦é—®é¢˜ï¼‰ã€‚ç»™ä½ å¾ˆå¤šå½¢å¦‚ <code>[start, end]</code>çš„é—­åŒºé—´ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªç®—æ³•ï¼Œç®—å‡ºè¿™äº›åŒºé—´ä¸­æœ€å¤šæœ‰å‡ ä¸ªäº’ä¸ç›¸äº¤çš„åŒºé—´ã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼Œ<code>intvs = [[1,3], [2,4], [3,6]]</code>ï¼Œè¿™äº›åŒºé—´æœ€å¤šæœ‰ 2 ä¸ªåŒºé—´äº’ä¸ç›¸äº¤ï¼Œå³ <code>[[1,3], [3,6]]</code>ï¼Œä½ çš„ç®—æ³•åº”è¯¥è¿”å› 2ã€‚æ³¨æ„è¾¹ç•Œç›¸åŒå¹¶ä¸ç®—ç›¸äº¤ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜åœ¨ç”Ÿæ´»ä¸­çš„åº”ç”¨å¹¿æ³›ï¼Œæ¯”å¦‚ä½ ä»Šå¤©æœ‰å¥½å‡ ä¸ªæ´»åŠ¨ï¼Œæ¯ä¸ªæ´»åŠ¨éƒ½å¯ä»¥ç”¨åŒºé—´ [start, end] è¡¨ç¤ºå¼€å§‹å’Œç»“æŸçš„æ—¶é—´ï¼Œè¯·é—®ä½ ä»Šå¤©æœ€å¤šèƒ½å‚åŠ å‡ ä¸ªæ´»åŠ¨å‘¢ï¼Ÿæ˜¾ç„¶ä½ ä¸€ä¸ªäººä¸èƒ½åŒæ—¶å‚åŠ ä¸¤ä¸ªæ´»åŠ¨ï¼Œæ‰€ä»¥è¯´è¿™ä¸ªé—®é¢˜å°±æ˜¯æ±‚è¿™äº›æ—¶é—´åŒºé—´çš„æœ€å¤§ä¸ç›¸äº¤å­é›†ã€‚</p>
<h4 id="æ–¹æ³•ï¼šè´ªå¿ƒç®—æ³•"><a href="#æ–¹æ³•ï¼šè´ªå¿ƒç®—æ³•" class="headerlink" title="æ–¹æ³•ï¼šè´ªå¿ƒç®—æ³•"></a>æ–¹æ³•ï¼šè´ªå¿ƒç®—æ³•</h4><h5 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h5><ol>
<li>ä»åŒºé—´é›†åˆ intvs ä¸­é€‰æ‹©ä¸€ä¸ªåŒºé—´ xï¼Œè¿™ä¸ª x æ˜¯åœ¨å½“å‰æ‰€æœ‰åŒºé—´ä¸­ç»“æŸæœ€æ—©çš„ï¼ˆend æœ€å°ï¼‰ã€‚</li>
<li>æŠŠæ‰€æœ‰ä¸ x åŒºé—´ç›¸äº¤çš„åŒºé—´ä»åŒºé—´é›†åˆ intvs ä¸­åˆ é™¤ã€‚</li>
<li>é‡å¤æ­¥éª¤ 1 å’Œ 2ï¼Œç›´åˆ° intvs ä¸ºç©ºä¸ºæ­¢ã€‚ä¹‹å‰é€‰å‡ºçš„é‚£äº› x å°±æ˜¯æœ€å¤§ä¸ç›¸äº¤å­é›†ã€‚</li>
</ol>
<p><img src="https://pic.leetcode-cn.com/678752f150168fc2e53a36d30e589b76ef81a95943c018b01bef6a548bfafeeb-file_1566313617208" alt="1"></p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">eraseOverlapIntervals</span><span class="params">(<span class="keyword">int</span>[][] intervals)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (intervals.length == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">		<span class="comment">// æŒ‰åŒºé—´çš„endå‡åºæ’åˆ—</span></span><br><span class="line">        Arrays.sort(intervals, <span class="keyword">new</span> Comparator&lt;<span class="keyword">int</span>[]&gt;()&#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span>[] b)</span></span>&#123;</span><br><span class="line">                <span class="keyword">return</span> a[<span class="number">1</span>] - b[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> x_end = intervals[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span>[] intv:intervals)&#123;</span><br><span class="line">            <span class="keyword">int</span> start = intv[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">if</span>(x_end &lt;= start)&#123;</span><br><span class="line">                count++;</span><br><span class="line">                x_end = intv[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> intervals.length - count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn). æ’åºéœ€è¦O(nlogn)çš„æ—¶é—´ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1). ä¸éœ€è¦é¢å¤–ç©ºé—´ã€‚</p>
<p><img src="/2020/01/01/æ— é‡å åŒºé—´/2.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>åŒºé—´</tag>
        <tag>è´ªå¿ƒç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ¤æ–­å­åºåˆ—</title>
    <url>/2020/01/01/%E5%88%A4%E6%96%AD%E5%AD%90%E5%BA%8F%E5%88%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/is-subsequence/" target="_blank" rel="noopener">åˆ¤æ–­å­åºåˆ—ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2020/01/01/åˆ¤æ–­å­åºåˆ—/3.jpg" alt="3"></p>
<h4 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h4><p>åˆ©ç”¨Pythonåˆ‡ç‰‡ï¼Œå¯¹sä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œè‹¥åœ¨tä¸­ï¼Œä¸‹ä¸€æ­¥æ¯”è¾ƒindex+1å¼€å§‹çš„å­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isSubsequence</span><span class="params">(self, s: str, t: str)</span> -&gt; bool:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> s:</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">in</span> t:</span><br><span class="line">                t = t[t.index(i)+<span class="number">1</span>:]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/01/åˆ¤æ–­å­åºåˆ—/1.jpg" alt="1"></p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ"><a href="#æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ"></a>æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ</h4><p>è‹¥ç›¸ç­‰ï¼Œä¸¤ä¸ªæŒ‡é’ˆéƒ½å¾€å‰ç§»ï¼Œè‹¥ä¸ç­‰ï¼Œå¿«æŒ‡é’ˆå¾€å‰ç§»ã€‚æœ€åæ¯”è¾ƒæ…¢æŒ‡é’ˆä¸sçš„é•¿åº¦ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isSubsequence</span><span class="params">(self, s: str, t: str)</span> -&gt; bool:</span></span><br><span class="line">        p1 = <span class="number">0</span></span><br><span class="line">        p2 = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> p1 &lt; len(s) <span class="keyword">and</span> p2 &lt; len(t):</span><br><span class="line">            <span class="keyword">if</span> s[p1] == t[p2]:</span><br><span class="line">                p1 += <span class="number">1</span></span><br><span class="line">            p2 += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> p1 == len(s):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/01/åˆ¤æ–­å­åºåˆ—/2.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>å­—ç¬¦ä¸²</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°</title>
    <url>/2019/12/31/%E7%BC%BA%E5%A4%B1%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%AD%A3%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/first-missing-positive/" target="_blank" rel="noopener">ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°ï¼ˆéš¾åº¦ï¼šå›°éš¾ï¼‰</a></p>
<p><img src="/2019/12/31/ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°/4.jpg" alt="4"></p>
<h4 id="æ–¹æ³•ä¸€ï¼ˆç©ºé—´å¤æ‚åº¦ä¸æ»¡è¶³è¦æ±‚ï¼‰"><a href="#æ–¹æ³•ä¸€ï¼ˆç©ºé—´å¤æ‚åº¦ä¸æ»¡è¶³è¦æ±‚ï¼‰" class="headerlink" title="æ–¹æ³•ä¸€ï¼ˆç©ºé—´å¤æ‚åº¦ä¸æ»¡è¶³è¦æ±‚ï¼‰"></a>æ–¹æ³•ä¸€ï¼ˆç©ºé—´å¤æ‚åº¦ä¸æ»¡è¶³è¦æ±‚ï¼‰</h4><p>éå†ä¸€éæ•°ç»„ï¼Œå°†å…ƒç´ è£…å…¥HashSetï¼Œå†ä»1å¼€å§‹ï¼Œåˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨HashSetä¸­ï¼Œè‹¥ä¸å­˜åœ¨ï¼Œåˆ™è¯¥æ•°ä¸ºç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°ã€‚</p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n).</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n). </p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">firstMissingPositive</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> num:nums)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!set.contains(num))</span><br><span class="line">                set.add(num);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(set.contains(n))</span><br><span class="line">                n++;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/31/ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°/1.jpg" alt="1"></p>
<hr>
<h4 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h4><h5 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h5><p>é€šè¿‡é¢„å¤„ç†ä¿è¯æ•°ç»„ä¸­çš„æ•°å…¨ä¸ºæ­£æ•°ï¼Œéå†æ•°ç»„ï¼Œå½“è¯»åˆ°æ•°å­— a æ—¶ï¼Œæ›¿æ¢ç´¢å¼•a å¤„å…ƒç´ çš„ç¬¦å·ä¸ºè´Ÿæ•°ã€‚æœ€åè¿”å›æ­£æ•°æ‰€å¯¹åº”çš„ç´¢å¼•ã€‚</p>
<h5 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h5><ul>
<li>é¦–å…ˆæ£€æŸ¥1æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™å·²ç»å®Œæˆï¼Œ1 å³ä¸ºç­”æ¡ˆã€‚</li>
<li>è‹¥1åœ¨æ•°ç»„ä¸­ï¼Œåˆ™å¯å°†è´Ÿæ•°ï¼Œé›¶ï¼Œå’Œå¤§äº n çš„æ•°æ›¿æ¢ä¸º 1 ã€‚</li>
<li>éå†æ•°ç»„ã€‚å½“è¯»åˆ°æ•°å­— a æ—¶ï¼Œæ›¿æ¢ç´¢å¼•a å¤„å…ƒç´ çš„ç¬¦å·ã€‚ï¼ˆå³è‹¥æ•°ç»„ä¸­å‡ºç°1ï¼Œæ”¹å˜nums[1]çš„ç¬¦å·ï¼›è‹¥å‡ºç°2ï¼Œæ”¹å˜nums[2]çš„ç¬¦å·ï¼‰<br>æ³¨æ„é‡å¤å…ƒç´ ï¼šåªèƒ½æ”¹å˜ä¸€æ¬¡ç¬¦å·ã€‚ç”±äºé‡åˆ°æ•°å­—næ—¶ï¼Œæ²¡æœ‰ä¸‹æ ‡ n ï¼Œåˆ™ä½¿ç”¨ç´¢å¼•0 å¤„çš„å…ƒç´ æ¥ä¿å­˜æ˜¯å¦å­˜åœ¨æ•°å­— nã€‚</li>
<li>è¿”å›ç»“æœï¼š<ul>
<li>ä»1å¼€å§‹éå†æ•°ç»„ã€‚è¿”å›ç¬¬ä¸€ä¸ªæ­£æ•°å…ƒç´ çš„ä¸‹æ ‡ã€‚</li>
<li>å¦‚æœ nums[0] &gt; 0ï¼Œåˆ™è¿”å› n ã€‚</li>
<li>å¦‚æœä¹‹å‰çš„æ­¥éª¤ä¸­æ²¡æœ‰å‘ç° nums ä¸­æœ‰æ­£æ•°å…ƒç´ ï¼Œåˆ™è¿”å›n + 1ã€‚</li>
</ul>
</li>
</ul>
<h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n).æ‰€æœ‰çš„æ“ä½œä¸€å…±åªä¼šéå†é•¿åº¦ä¸º <code>N</code> çš„æ•°ç»„ 4 æ¬¡ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1).åªä½¿ç”¨äº†å¸¸æ•°çš„ç©ºé—´ã€‚</p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">firstMissingPositive</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(nums.length == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æŸ¥çœ‹æ•°ç»„ä¸­æ˜¯å¦åŒ…å«1</span></span><br><span class="line">        <span class="keyword">int</span> contains = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]==<span class="number">1</span>)&#123;</span><br><span class="line">                contains += <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(contains==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›¿æ¢å°äºç­‰äº0çš„æ•°åŠå¤§äºnçš„æ•°ä¸º1</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]&lt;=<span class="number">0</span> || nums[i] &gt; n)</span><br><span class="line">                nums[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> a = Math.abs(nums[i]);</span><br><span class="line">            <span class="keyword">if</span>(a==n)</span><br><span class="line">                nums[<span class="number">0</span>] = -Math.abs(nums[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                nums[a] = -Math.abs(nums[a]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›ç»“æœï¼ˆç´¢å¼•0å¤„è¦å•ç‹¬åˆ¤æ–­ï¼Œå› ä¸ºè‹¥æ•°ç»„ä¸­æœªå‡ºç°n,åˆ™nums[0]å¤„çš„å€¼ä¼šä¸ºæ­£æ•°ï¼Œä½†ä¸è¯¥è¿”å›ç´¢å¼•0ï¼‰</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]&gt;<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(nums[<span class="number">0</span>]&gt;<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> n;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> n+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/31/ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯»æ‰¾é‡å¤æ•°</title>
    <url>/2019/12/31/%E5%AF%BB%E6%89%BE%E9%87%8D%E5%A4%8D%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/find-the-duplicate-number/" target="_blank" rel="noopener">å¯»æ‰¾é‡å¤æ•°ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/31/å¯»æ‰¾é‡å¤æ•°/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šæ’åº"><a href="#æ–¹æ³•ä¸€ï¼šæ’åº" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ’åº"></a>æ–¹æ³•ä¸€ï¼šæ’åº</h4><h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O</em>(nlog(n))ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1) (or O(n))ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹ nums è¿›è¡Œæ’åºï¼Œå› æ­¤å†…å­˜å¤§å°æ˜¯æ’å®šçš„ã€‚å¦‚æœæˆ‘ä»¬ä¸èƒ½ä¿®æ”¹è¾“å…¥æ•°ç»„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»ä¸º nums çš„å‰¯æœ¬åˆ†é…çº¿æ€§ç©ºé—´ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ’åºã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findDuplicate</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]==nums[i-<span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/31/å¯»æ‰¾é‡å¤æ•°/2.jpg" alt="2"></p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼šé›†åˆï¼ˆå“ˆå¸Œè¡¨ï¼‰"><a href="#æ–¹æ³•äºŒï¼šé›†åˆï¼ˆå“ˆå¸Œè¡¨ï¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šé›†åˆï¼ˆå“ˆå¸Œè¡¨ï¼‰"></a>æ–¹æ³•äºŒï¼šé›†åˆï¼ˆå“ˆå¸Œè¡¨ï¼‰</h4><h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findDuplicate</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> num : nums)&#123;</span><br><span class="line">            <span class="keyword">if</span>(set.contains(num))</span><br><span class="line">                <span class="keyword">return</span> num;</span><br><span class="line">            set.add(num);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/31/å¯»æ‰¾é‡å¤æ•°/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¼ºå¤±æ•°å­—</title>
    <url>/2019/12/31/%E7%BC%BA%E5%A4%B1%E6%95%B0%E5%AD%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/missing-number/" target="_blank" rel="noopener">ç¼ºå¤±æ•°å­—ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/31/ç¼ºå¤±æ•°å­—/3.jpg" alt="3"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šæ•°å­¦æ–¹æ³•"><a href="#æ–¹æ³•ä¸€ï¼šæ•°å­¦æ–¹æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ•°å­¦æ–¹æ³•"></a>æ–¹æ³•ä¸€ï¼šæ•°å­¦æ–¹æ³•</h4><p>ç”¨åºåˆ—<code>[0,1,...,n]</code>çš„å’Œå‡å»ç»™å®šçš„<code>nums</code>çš„å’Œï¼Œå¯å¾—åˆ°ç¼ºå¤±çš„æ•°å­—ã€‚</p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">missingNumber</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        sum1 = sum(range(<span class="number">0</span>,len(nums)+<span class="number">1</span>)) <span class="comment"># 0,1,...,n åºåˆ—çš„å’Œ(æˆ–ç”¨é«˜æ–¯æ±‚å’Œå…¬å¼)</span></span><br><span class="line">        sum2 = sum(nums)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sum1 - sum2</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/31/ç¼ºå¤±æ•°å­—/1.jpg" alt="1"></p>
<p>é«˜æ–¯æ±‚å’Œæœ‰æº¢å‡ºé£é™©</p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼šä½è¿ç®—ï¼ˆå¼‚æˆ–è¿ç®—ï¼‰"><a href="#æ–¹æ³•äºŒï¼šä½è¿ç®—ï¼ˆå¼‚æˆ–è¿ç®—ï¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šä½è¿ç®—ï¼ˆå¼‚æˆ–è¿ç®—ï¼‰"></a>æ–¹æ³•äºŒï¼šä½è¿ç®—ï¼ˆå¼‚æˆ–è¿ç®—ï¼‰</h4><p>å…ˆå¾—åˆ°<code>[0,1,...,n]</code>çš„å¼‚æˆ–å€¼ï¼Œå†å°†ç»“æœå¯¹æ•°ç»„<code>nums</code>ä¸­çš„æ¯ä¸€ä¸ªæ•°è¿›è¡Œä¸€æ¬¡å¼‚æˆ–è¿ç®—ï¼Œæœ€ç»ˆçš„å¼‚æˆ–ç»“æœå³ä¸ºè¿™ä¸ªç¼ºå¤±çš„æ•°å­—ã€‚</p>
<p>åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œç”±äº<code>[0,1,...,n]</code>æ°å¥½æ˜¯è¿™ä¸ªæ•°ç»„çš„ä¸‹æ ‡åŠ ä¸Š nï¼Œå› æ­¤å¯ä»¥ç”¨ä¸€æ¬¡å¾ªç¯å®Œæˆæ‰€æœ‰çš„å¼‚æˆ–è¿ç®—ã€‚</p>
<h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚å‡è®¾å¼‚æˆ–è¿ç®—çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¸¸æ•°çš„ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">missingNumber</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        res = len(nums) <span class="comment"># ä¸€å¼€å§‹åˆå§‹åŒ–ä¸ºn</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(nums)):</span><br><span class="line">            res ^=  i ^ nums[i]</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/31/ç¼ºå¤±æ•°å­—/2.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>å›æ–‡é“¾è¡¨</title>
    <url>/2019/12/29/%E5%9B%9E%E6%96%87%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/palindrome-linked-list/" target="_blank" rel="noopener">å›æ–‡é“¾è¡¨ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/29/å›æ–‡é“¾è¡¨/1.jpg" alt="1"></p>
<h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°ä¸­ç‚¹ï¼Œå¯¹é“¾è¡¨å‰åŠéƒ¨åˆ†è¿›è¡Œç¿»è½¬ã€‚</p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head==<span class="keyword">null</span> || head.next==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        </span><br><span class="line">        ListNode slow = head, fast = head;</span><br><span class="line">        ListNode pre = head, prepre = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸€ééå†å®ç°ç¿»è½¬å‰åŠéƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">while</span>(fast != <span class="keyword">null</span> &amp;&amp; fast.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">            pre = slow;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">            fast = fast.next.next; <span class="comment">// è‹¥é“¾è¡¨é•¿åº¦ä¸ºå¶æ•°ï¼Œåˆ™fastæœ€åä¼šæŒ‡å‘nullï¼Œè‹¥ä¸ºå¥‡æ•°ï¼Œfastæœ€åä¼šæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">            pre.next = prepre;</span><br><span class="line">            prepre = pre;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¾ªç¯ç»“æŸåï¼Œè‹¥ä¸ºå¶æ•°ï¼ŒslowæŒ‡å‘ååŠéƒ¨åˆ†ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè‹¥ä¸ºå¥‡æ•°ï¼ŒslowæŒ‡å‘ä¸­é—´çš„é‚£ä¸ªå…ƒç´ </span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(fast != <span class="keyword">null</span>)</span><br><span class="line">            slow = slow.next;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(pre!=<span class="keyword">null</span> &amp;&amp; slow!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(pre.val != slow.val)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            pre = pre.next;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/29/å›æ–‡é“¾è¡¨/2.jpg" alt="2"></p>
<p><img src="/2019/12/29/å›æ–‡é“¾è¡¨/20191229-214756.jpg" alt="20191229-214756"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>é“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¿»è½¬äºŒå‰æ ‘</title>
    <url>/2019/12/29/%E7%BF%BB%E8%BD%AC%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/invert-binary-tree/" target="_blank" rel="noopener">ç¿»è½¬äºŒå‰æ ‘ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/29/ç¿»è½¬äºŒå‰æ ‘/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ï¼š-é€’å½’"><a href="#æ–¹æ³•ï¼š-é€’å½’" class="headerlink" title="æ–¹æ³•ï¼š é€’å½’"></a>æ–¹æ³•ï¼š é€’å½’</h4><h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n). æ¯ä¸ªèŠ‚ç‚¹åªè¢«è®¿é—®äº†ä¸€æ¬¡ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šæœ€åæƒ…å†µä¸‹æ ˆå†…éœ€è¦å­˜æ”¾ O(h)ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œå…¶ä¸­ hæ˜¯æ ‘çš„é«˜åº¦ã€‚ç”±äº h<em>âˆˆ</em>O<em>(</em>n)ï¼Œå¯å¾—å‡ºç©ºé—´å¤æ‚åº¦ä¸º O(n)ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">invertTree</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        TreeNode temp = invertTree(root.left);</span><br><span class="line">        root.left = invertTree(root.right);</span><br><span class="line">        root.right = temp;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/29/ç¿»è½¬äºŒå‰æ ‘/2.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>äºŒå‰æ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title>å­˜åœ¨é‡å¤å…ƒç´ 2</title>
    <url>/2019/12/29/%E5%AD%98%E5%9C%A8%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A02/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/contains-duplicate-ii/" target="_blank" rel="noopener">å­˜åœ¨é‡å¤å…ƒç´ 2ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/29/å­˜åœ¨é‡å¤å…ƒç´ 2/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ï¼šå“ˆå¸Œè¡¨"><a href="#æ–¹æ³•ï¼šå“ˆå¸Œè¡¨" class="headerlink" title="æ–¹æ³•ï¼šå“ˆå¸Œè¡¨"></a>æ–¹æ³•ï¼šå“ˆå¸Œè¡¨</h4><p>ç»´æŠ¤ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œé‡Œé¢å§‹ç»ˆæœ€å¤šåŒ…å« k ä¸ªå…ƒç´ ï¼Œå½“å‡ºç°é‡å¤å€¼æ—¶åˆ™è¯´æ˜åœ¨ k è·ç¦»å†…å­˜åœ¨é‡å¤å…ƒç´ ã€‚<br>æ¯æ¬¡éå†ä¸€ä¸ªå…ƒç´ åˆ™å°†å…¶åŠ å…¥å“ˆå¸Œè¡¨ä¸­ï¼Œå¦‚æœå“ˆå¸Œè¡¨çš„å¤§å°å¤§äº kï¼Œåˆ™ç§»é™¤æœ€å‰é¢çš„æ•°å­—ã€‚</p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚æˆ‘ä»¬ä¼šåš n æ¬¡ æœç´¢ï¼Œåˆ é™¤ï¼Œæ’å…¥æ“ä½œï¼Œæ¯æ¬¡æ“ä½œéƒ½è€—è´¹å¸¸æ•°æ—¶é—´ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(min(n,k))ã€‚å¼€è¾Ÿçš„é¢å¤–ç©ºé—´å–å†³äºæ•£åˆ—è¡¨ä¸­å­˜å‚¨çš„å…ƒç´ çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯æ»‘åŠ¨çª—å£çš„å¤§å°ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsNearbyDuplicate</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        Set&lt;Integer&gt; res = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(res.contains(nums[i]))</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>; <span class="comment">// å› ä¸ºresçš„å¤§å°ç»´æŒä¸ºk</span></span><br><span class="line">            res.add(nums[i]);</span><br><span class="line">            <span class="keyword">if</span>(res.size()&gt;k)</span><br><span class="line">                res.remove(nums[i-k]);   </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/29/å­˜åœ¨é‡å¤å…ƒç´ 2/2.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>å­˜åœ¨é‡å¤å…ƒç´ </title>
    <url>/2019/12/29/%E5%AD%98%E5%9C%A8%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/contains-duplicate/" target="_blank" rel="noopener">å­˜åœ¨é‡å¤å…ƒç´ ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/29/å­˜åœ¨é‡å¤å…ƒç´ /1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨"><a href="#æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨"></a>æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨</h4><h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ : O(n)ã€‚search() å’Œ insert() å„è‡ªä½¿ç”¨ n æ¬¡ï¼Œæ¯ä¸ªæ“ä½œè€—è´¹å¸¸æ•°æ—¶é—´ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ : O(n)ã€‚å“ˆå¸Œè¡¨å ç”¨çš„ç©ºé—´ä¸å…ƒç´ æ•°é‡æ˜¯çº¿æ€§å…³ç³»ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsDuplicate</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        Set&lt;Integer&gt; res = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> num:nums)&#123;</span><br><span class="line">            <span class="keyword">if</span>(res.contains(num))</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            res.add(num);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/29/å­˜åœ¨é‡å¤å…ƒç´ /3.jpg" alt="3"></p>
<p>å¦ä¸€ç§æ€è·¯ï¼šåˆ©ç”¨Pythonä¸­çš„set()ï¼Œåˆ¤æ–­æ‰€å¾—ç»“æœé•¿åº¦ä¸åŸæ•°ç»„é•¿åº¦çš„å…³ç³»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">containsDuplicate</span><span class="params">(self, nums: List[int])</span> -&gt; bool:</span></span><br><span class="line">        set1 = set(nums)</span><br><span class="line">        <span class="keyword">if</span> len(set1) == len(nums):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/29/å­˜åœ¨é‡å¤å…ƒç´ /2.jpg" alt="2"></p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼š-æ’åº"><a href="#æ–¹æ³•äºŒï¼š-æ’åº" class="headerlink" title="æ–¹æ³•äºŒï¼š æ’åº"></a>æ–¹æ³•äºŒï¼š æ’åº</h4><p>å¦‚æœå­˜åœ¨é‡å¤å…ƒç´ ï¼Œæ’åºåå®ƒä»¬åº”è¯¥ç›¸é‚»ã€‚</p>
<h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ : O<em>(</em>nlogn)ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ : O(1)ã€‚è¿™å–å†³äºå…·ä½“çš„æ’åºç®—æ³•å®ç°ï¼Œé€šå¸¸è€Œè¨€ï¼Œä½¿ç”¨ <code>å †æ’åº</code> çš„è¯ï¼Œæ˜¯ O(1)ã€‚</p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsDuplicate</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length-<span class="number">1</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]==nums[i+<span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/29/å­˜åœ¨é‡å¤å…ƒç´ /4.jpg" alt="4"></p>
<blockquote>
<p>æ³¨ï¼šå¯¹äºä¸€äº›ç‰¹å®šçš„ nä¸å¤ªå¤§çš„æµ‹è¯•æ ·ä¾‹ï¼Œæ–¹æ³•ä¸€çš„è¿è¡Œé€Ÿåº¦å¯èƒ½ä¼šæ¯”æ–¹æ³•äºŒæ›´æ…¢ã€‚è¿™æ˜¯å› ä¸ºå“ˆå¸Œè¡¨åœ¨ç»´æŠ¤å…¶å±æ€§æ—¶æœ‰ä¸€äº›å¼€é”€ã€‚è¦æ³¨æ„ï¼Œç¨‹åºçš„å®é™…è¿è¡Œè¡¨ç°å’Œ Big-O ç¬¦å·è¡¨ç¤ºå¯èƒ½æœ‰æ‰€ä¸åŒã€‚Big-O åªæ˜¯å‘Šè¯‰æˆ‘ä»¬åœ¨ <strong>å……åˆ†</strong>å¤§çš„è¾“å…¥ä¸‹ï¼Œç®—æ³•çš„ç›¸å¯¹å¿«æ…¢ã€‚å› æ­¤ï¼Œåœ¨ nä¸å¤Ÿå¤§çš„æƒ…å†µä¸‹ï¼Œ O(n)çš„ç®—æ³•ä¹Ÿå¯ä»¥æ¯” O(nlogn)çš„æ›´æ…¢ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ </title>
    <url>/2019/12/29/%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E7%AC%ACK%E4%B8%AA%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/kth-largest-element-in-an-array/" target="_blank" rel="noopener">æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/29/æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ /3.jpg" alt="3"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šæ’åº"><a href="#æ–¹æ³•ä¸€ï¼šæ’åº" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ’åº"></a>æ–¹æ³•ä¸€ï¼šæ’åº</h4><p>å…ˆå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œå†è¿”å›å€’æ•°ç¬¬ k ä¸ªå…ƒç´ ã€‚</p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p>
<p>è¿™ä¸ªæ—¶é—´å¤æ‚åº¦å¹¶ä¸ä»¤äººæ»¡æ„</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findKthLargest</span><span class="params">(self, nums: List[int], k: int)</span> -&gt; int:</span></span><br><span class="line">        nums.sort()</span><br><span class="line">        <span class="keyword">return</span> nums[-k]</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/29/æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ /1.jpg" alt="1"></p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼šæœ€å°å †"><a href="#æ–¹æ³•äºŒï¼šæœ€å°å †" class="headerlink" title="æ–¹æ³•äºŒï¼šæœ€å°å †"></a>æ–¹æ³•äºŒï¼šæœ€å°å †</h4><p>å»ºä¸€ä¸ªåªèƒ½å­˜Kä¸ªæ•°å­—çš„å°é¡¶å †ï¼Œè¶…è¿‡Kæ—¶å€™ï¼Œæ¯åŠ è¿›æ¥ä¸€ä¸ªï¼Œå †é¡¶å°±è¦å¼¹å‡ºä¸€ä¸ªã€‚æ•°ç»„éå†å®Œï¼Œæœ€ç»ˆå †é¡¶çš„å…ƒç´ å°±æ˜¯ç¬¬Kå¤§çš„ï¼ˆå †é‡Œå…¶ä»–å…ƒç´ éƒ½æ¯”å®ƒè¿˜è¦å¤§ï¼‰ã€‚</p>
<h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogk). å‘å¤§å°ä¸º k çš„å †ä¸­æ·»åŠ å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(logk)ï¼Œæˆ‘ä»¬å°†é‡å¤è¯¥æ“ä½œ n æ¬¡ï¼Œæ•…æ€»æ—¶é—´å¤æ‚åº¦ä¸ºO(nlogk)ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(k).</p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findKthLargest</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        PriorityQueue&lt;Integer&gt; minHeap = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> num : nums)&#123;</span><br><span class="line">            minHeap.add(num);</span><br><span class="line">            <span class="keyword">if</span>(minHeap.size()&gt;k)</span><br><span class="line">                minHeap.poll();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> minHeap.poll();</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/29/æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ /2.jpg" alt="2"></p>
<hr>
<h4 id="æ–¹æ³•ä¸‰ï¼šå¿«é€Ÿé€‰æ‹©"><a href="#æ–¹æ³•ä¸‰ï¼šå¿«é€Ÿé€‰æ‹©" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šå¿«é€Ÿé€‰æ‹©"></a>æ–¹æ³•ä¸‰ï¼šå¿«é€Ÿé€‰æ‹©</h4><p>è¯¦è§<a href="https://leetcode-cn.com/problems/kth-largest-element-in-an-array/solution/shu-zu-zhong-de-di-kge-zui-da-yuan-su-by-leetcode/" target="_blank" rel="noopener">è¿™é‡Œ</a>.</p>
<h5 id="å¤æ‚åº¦-2"><a href="#å¤æ‚åº¦-2" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ : å¹³å‡æƒ…å†µO<em>(</em>N)ï¼Œæœ€åæƒ…å†µ O(N^2)ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ : O(1)ã€‚</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§»é™¤é“¾è¡¨å…ƒç´ </title>
    <url>/2019/12/29/%E7%A7%BB%E9%99%A4%E9%93%BE%E8%A1%A8%E5%85%83%E7%B4%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/remove-linked-list-elements/" target="_blank" rel="noopener">ç§»é™¤é“¾è¡¨å…ƒç´ ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/29/ç§»é™¤é“¾è¡¨å…ƒç´ /1.jpg" alt="1"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">removeElements</span><span class="params">(ListNode head, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        ListNode dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        dummy.next = head;</span><br><span class="line"></span><br><span class="line">        ListNode cur = dummy;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(cur.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cur.next.val == val)&#123;</span><br><span class="line">                cur.next = cur.next.next;</span><br><span class="line">            &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                cur = cur.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šæ·»åŠ è™šæ‹Ÿå¤´èŠ‚ç‚¹è§£å†³å¤´èŠ‚ç‚¹æ˜¯è¦è¢«åˆ é™¤çš„æƒ…å†µ</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>é“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>å¿«ä¹æ•°</title>
    <url>/2019/12/28/%E5%BF%AB%E4%B9%90%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/happy-number/" target="_blank" rel="noopener">å¿«ä¹æ•°ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/28/å¿«ä¹æ•°/2.jpg" alt="2"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šä½¿ç”¨â€œå¿«æ…¢æŒ‡é’ˆâ€æ€æƒ³æ‰¾å‡ºå¾ªç¯"><a href="#æ–¹æ³•ä¸€ï¼šä½¿ç”¨â€œå¿«æ…¢æŒ‡é’ˆâ€æ€æƒ³æ‰¾å‡ºå¾ªç¯" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä½¿ç”¨â€œå¿«æ…¢æŒ‡é’ˆâ€æ€æƒ³æ‰¾å‡ºå¾ªç¯"></a>æ–¹æ³•ä¸€ï¼šä½¿ç”¨â€œå¿«æ…¢æŒ‡é’ˆâ€æ€æƒ³æ‰¾å‡ºå¾ªç¯</h4><p>â€œå¿«æŒ‡é’ˆâ€æ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œâ€œæ…¢æŒ‡é’ˆâ€æ¯æ¬¡èµ°ä¸€æ­¥ï¼Œå½“äºŒè€…ç›¸ç­‰æ—¶ï¼Œå³ä¸ºä¸€ä¸ªå¾ªç¯å‘¨æœŸã€‚æ­¤æ—¶ï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯å› ä¸º1å¼•èµ·çš„å¾ªç¯ï¼Œæ˜¯çš„è¯å°±æ˜¯å¿«ä¹æ•°ï¼Œå¦åˆ™ä¸æ˜¯å¿«ä¹æ•°ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isHappy</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> slow = n;</span><br><span class="line">        <span class="keyword">int</span> fast = n;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            slow = helper(slow);</span><br><span class="line">            fast = helper(fast);</span><br><span class="line">            fast = helper(fast);</span><br><span class="line">        &#125; <span class="keyword">while</span>(slow != fast);</span><br><span class="line">        <span class="keyword">return</span> slow == <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">helper</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> re = n%<span class="number">10</span>;</span><br><span class="line">            sum += re*re;</span><br><span class="line">            n = n/<span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/28/å¿«ä¹æ•°/1.jpg" alt="1"></p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼šé€’å½’"><a href="#æ–¹æ³•äºŒï¼šé€’å½’" class="headerlink" title="æ–¹æ³•äºŒï¼šé€’å½’"></a>æ–¹æ³•äºŒï¼šé€’å½’</h4><ul>
<li>ä¸æ˜¯å¿«ä¹æ•°çš„æ•°ç§°ä¸ºä¸å¿«ä¹æ•°(unhappy number)ï¼Œæ‰€æœ‰ä¸å¿«ä¹æ•°çš„æ•°ä½å¹³æ–¹å’Œè®¡ç®—ï¼Œæœ€åéƒ½ä¼šè¿›å…¥ 4 â†’ 16 â†’ 37 â†’ 58 â†’ 89 â†’ 145 â†’ 42 â†’ 20 â†’ 4 çš„å¾ªç¯ä¸­</li>
<li>å·²çŸ¥è§„å¾‹ï¼š [1 ~ 4] ä¸­åªæœ‰ 1 æ˜¯å¿«ä¹æ•°ï¼Œ[5 ~ âˆ] çš„æ•°å­—è¦ä¹ˆå›å½’åˆ° 1 è¦ä¹ˆå›å½’åˆ° 4 æˆ– 3</li>
<li>å› æ­¤ä»…éœ€åœ¨ n &gt; 4 æ—¶è°ƒç”¨é€’å½’</li>
</ul>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isHappy</span><span class="params">(self, n: int)</span> -&gt; bool:</span></span><br><span class="line">        <span class="keyword">return</span> self.isHappy(sum(int(i) ** <span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> str(n))) <span class="keyword">if</span> n &gt; <span class="number">4</span> <span class="keyword">else</span> n == <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/28/å¿«ä¹æ•°/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>æ±‚ä¼—æ•°2</title>
    <url>/2019/12/28/%E6%B1%82%E4%BC%97%E6%95%B02/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/majority-element-ii/" target="_blank" rel="noopener">æ±‚ä¼—æ•°2ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/28/æ±‚ä¼—æ•°2/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h4><p>åœ¨Pythonä¸­ï¼Œå…ˆç”¨set()æ‰¾å‡ºæ‰€æœ‰å‡ºç°çš„å…ƒç´ ï¼Œå†ä½¿ç”¨count()åˆ¤æ–­å‡ºç°æ¬¡æ•°å¤§äºn/3çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">majorityElement</span><span class="params">(self, nums: List[int])</span> -&gt; List[int]:</span></span><br><span class="line">        set1 = set(nums)</span><br><span class="line">        <span class="keyword">return</span> [s <span class="keyword">for</span> s <span class="keyword">in</span> set1 <span class="keyword">if</span> nums.count(s) &gt; len(nums)//<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/28/æ±‚ä¼—æ•°2/2.jpg" alt="2"></p>
<p>ç„¶è€Œæ—¶é—´å¤æ‚åº¦ä¸ä¸ºO(n)ã€‚</p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼šBoyer-Moore-æŠ•ç¥¨ç®—æ³•"><a href="#æ–¹æ³•äºŒï¼šBoyer-Moore-æŠ•ç¥¨ç®—æ³•" class="headerlink" title="æ–¹æ³•äºŒï¼šBoyer-Moore æŠ•ç¥¨ç®—æ³•"></a>æ–¹æ³•äºŒï¼šBoyer-Moore æŠ•ç¥¨ç®—æ³•</h4><p>è¶…è¿‡n/3çš„æ•°æœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ªã€‚å…ˆé€‰å‡ºä¸¤ä¸ªå€™é€‰äººA,Bï¼ˆéƒ½ä»¤ä¸ºnums[0]ï¼‰ã€‚ éå†æ•°ç»„ï¼š</p>
<ol>
<li>è‹¥å½“å‰å…ƒç´ ç­‰äºAï¼Œåˆ™Açš„ç¥¨æ•°++;</li>
<li><p>è‹¥å½“å‰å…ƒç´ ç­‰äºBï¼Œåˆ™Bçš„ç¥¨æ•°++ï¼›</p>
</li>
<li><p>è‹¥å½“å‰å…ƒç´ ä¸Aï¼ŒBéƒ½ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆæ£€æŸ¥æ­¤æ—¶Aæˆ–Bçš„ç¥¨æ•°æ˜¯å¦å‡ä¸º0ï¼š</p>
<ul>
<li><p>è‹¥ä¸º0ï¼Œåˆ™å½“å‰å…ƒç´ æˆä¸ºæ–°çš„å€™é€‰äººï¼›</p>
</li>
<li><p>è‹¥Aã€Bç¥¨æ•°å‡ä¸ä¸º0ï¼Œåˆ™Aã€Bä¸¤ä¸ªå€™é€‰äººçš„ç¥¨æ•°å‡å‡ä¸€ï¼›</p>
</li>
</ul>
</li>
</ol>
<p>éå†ç»“æŸåé€‰å‡ºäº†ä¸¤ä¸ªå€™é€‰äººï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªå€™é€‰äººæ˜¯å¦æ»¡è¶³&gt;n//3ï¼Œè¿˜éœ€è¦å†éå†ä¸€éæ•°ç»„ï¼Œæ‰¾å‡ºä¸¤ä¸ªå€™é€‰äººçš„å…·ä½“ç¥¨æ•°ã€‚</p>
<p><strong>å¤æ‚åº¦</strong></p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p>
<p><strong>ä»£ç </strong> </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">majorityElement</span><span class="params">(self, nums: List[int])</span> -&gt; List[int]:</span></span><br><span class="line">        <span class="keyword">if</span>(len(nums)==<span class="number">0</span>):</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        count1 = <span class="number">0</span></span><br><span class="line">        count2 = <span class="number">0</span></span><br><span class="line">        candidate1 = nums[<span class="number">0</span>]</span><br><span class="line">        candidate2 = nums[<span class="number">0</span>]</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">if</span> num == candidate1:</span><br><span class="line">                count1 += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> num == candidate2:</span><br><span class="line">                count2 += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> count1 == <span class="number">0</span>:</span><br><span class="line">                    candidate1 = num</span><br><span class="line">                    count1 += <span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> count2 == <span class="number">0</span>:</span><br><span class="line">                    candidate2 = num</span><br><span class="line">                    count2 += <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    count1 -= <span class="number">1</span>;</span><br><span class="line">                    count2 -= <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">return</span> set([num <span class="keyword">for</span> num <span class="keyword">in</span> [candidate1, candidate2] <span class="keyword">if</span> nums.count(num) &gt; len(nums)//<span class="number">3</span>]) <span class="comment">#åŠ setçš„åŸå› æ˜¯é¿å…è¿”å›ä¸¤ä¸ªç›¸åŒçš„æ•°</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/28/æ±‚ä¼—æ•°2/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤šæ•°å…ƒç´ </title>
    <url>/2019/12/28/%E5%A4%9A%E6%95%B0%E5%85%83%E7%B4%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/majority-element/" target="_blank" rel="noopener">å¤šæ•°å…ƒç´ ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/28/å¤šæ•°å…ƒç´ /1.jpg" alt="1"></p>
<p><strong>æ³¨æ„ï¼šè¿™æ ·çš„å…ƒç´ åªå­˜åœ¨ä¸€ä¸ªï¼Œå› ä¸ºå‡ºç°æ¬¡æ•°å¤§äºn/2ï¼Œè‹¥å­˜åœ¨ä¸¤ä¸ªï¼Œåˆ™æ•°ç»„é•¿åº¦ä¼šè¶…è¿‡nã€‚</strong></p>
<h4 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h4><p>åœ¨Pythonä¸­ï¼Œå…ˆç”¨set()æ‰¾å‡ºæ‰€æœ‰å‡ºç°çš„å…ƒç´ ï¼Œå†ä½¿ç”¨count()åˆ¤æ–­å‡ºç°æ¬¡æ•°å¤§äºn/2çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">majorityElement</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        set1 = set(nums)</span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> set1:</span><br><span class="line">            <span class="keyword">if</span> nums.count(s) &gt; len(nums)//<span class="number">2</span>:</span><br><span class="line">                <span class="keyword">return</span> s</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/28/å¤šæ•°å…ƒç´ /2.jpg" alt="2"></p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼š"><a href="#æ–¹æ³•äºŒï¼š" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h4><p>å…ˆæ’åºï¼Œå†è¿”å›ä½äºn/2ä½ç½®çš„å…ƒç´ ã€‚</p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)ã€‚ç”¨ Python å’Œ Java å°†æ•°ç»„æ’åºå¼€é”€éƒ½ä¸º O(nlogn)ï¼Œå®ƒå æ®äº†è¿è¡Œçš„ä¸»è¦æ—¶é—´ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)æˆ–O(n)ã€‚å°±åœ°æ’åºæˆ–ä½¿ç”¨çº¿æ€§ç©ºé—´å°† <code>nums</code> æ•°ç»„æ‹·è´ï¼Œç„¶åå†æ’åºã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">majorityElement</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        nums.sort()</span><br><span class="line">        <span class="keyword">return</span> nums[len(nums)//<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/28/å¤šæ•°å…ƒç´ /3.jpg" alt="3"></p>
<hr>
<h4 id="æ–¹æ³•ä¸‰ï¼šBoyer-Moore-æŠ•ç¥¨ç®—æ³•"><a href="#æ–¹æ³•ä¸‰ï¼šBoyer-Moore-æŠ•ç¥¨ç®—æ³•" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šBoyer-Moore æŠ•ç¥¨ç®—æ³•"></a>æ–¹æ³•ä¸‰ï¼šBoyer-Moore æŠ•ç¥¨ç®—æ³•</h4><p>ä»ç¬¬ä¸€ä¸ªæ•°å¼€å§‹count=1ï¼Œé‡åˆ°ç›¸åŒçš„å°±åŠ 1ï¼Œé‡åˆ°ä¸åŒçš„å°±å‡1ï¼Œå‡åˆ°0å°±é‡æ–°æ¢ä¸ªæ•°å¼€å§‹è®¡æ•°ï¼Œæœ€åæ€»èƒ½æ‰¾åˆ°æœ€å¤šçš„é‚£ä¸ªã€‚</p>
<h5 id="å¤æ‚åº¦-1"><a href="#å¤æ‚åº¦-1" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚ä¸¥æ ¼æ‰§è¡Œäº† n æ¬¡å¾ªç¯ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚</p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">majorityElement</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        candidate = nums[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">if</span> count == <span class="number">0</span>:</span><br><span class="line">                candidate = num</span><br><span class="line">            <span class="keyword">if</span> num==candidate:</span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                count -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> candidate</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/28/å¤šæ•°å…ƒç´ /4.jpg" alt="4"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯»æ‰¾å³°å€¼</title>
    <url>/2019/12/28/%E5%AF%BB%E6%89%BE%E5%B3%B0%E5%80%BC/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/find-peak-element/" target="_blank" rel="noopener">å¯»æ‰¾å³°å€¼ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/28/å¯»æ‰¾å³°å€¼/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šçº¿æ€§æ‰«æ"><a href="#æ–¹æ³•ä¸€ï¼šçº¿æ€§æ‰«æ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šçº¿æ€§æ‰«æ"></a>æ–¹æ³•ä¸€ï¼šçº¿æ€§æ‰«æ</h4><p>åˆ©ç”¨è¿ç»­çš„ä¸¤ä¸ªå…ƒç´  <code>nums[j]</code> å’Œ <code>nums[j+1]</code> ä¸ä¼šç›¸ç­‰è¿™ä¸€äº‹å®ï¼Œæˆ‘ä»¬å¯ä»¥ä»å¤´å¼€å§‹éå† <code>nums</code>æ•°ç»„ï¼Œå½“é‡åˆ°<code>nums[i] &gt; nums[i+1]</code> ï¼Œå³å¯åˆ¤æ–­ <code>nums[i]</code>ä¸ºå³°å€¼ã€‚</p>
<p><strong>æ³¨æ„ï¼šä¸éœ€è¦åˆ¤æ–­<code>nums[i]&gt;nums[i-1]</code>ã€‚è¿™æ˜¯ç”±äºâ€œéå†ä¼šåˆ°è¾¾ç¬¬iä¸ªå…ƒç´ â€æœ¬èº«å°±è¯´æ˜ä¸Šä¸€ä¸ªå…ƒç´ ï¼ˆç¬¬i- 1ä¸ªï¼‰ä¸æ»¡è¶³ <code>nums[i] &gt; nums[i+1]</code>è¿™ä¸€æ¡ä»¶ï¼Œä¹Ÿå°±è¯´æ˜ <code>nums[i-1] &lt; nums[i]</code>ã€‚</strong></p>
<h5 id="å¤æ‚åº¦åˆ†æ"><a href="#å¤æ‚åº¦åˆ†æ" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h5><p>æ—¶é—´å¤æ‚åº¦ : O(n)ã€‚  åªè¿›è¡Œä¸€æ¬¡éå†ã€‚<br>ç©ºé—´å¤æ‚åº¦ : O(1)ã€‚ åªä½¿ç”¨äº†å¸¸æ•°ç©ºé—´ã€‚</p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findPeakElement</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length - <span class="number">1</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; nums[i+<span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums.length-<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="æ–¹æ³•äºŒï¼šäºŒåˆ†æ³•æŸ¥æ‰¾"><a href="#æ–¹æ³•äºŒï¼šäºŒåˆ†æ³•æŸ¥æ‰¾" class="headerlink" title="æ–¹æ³•äºŒï¼šäºŒåˆ†æ³•æŸ¥æ‰¾"></a>æ–¹æ³•äºŒï¼šäºŒåˆ†æ³•æŸ¥æ‰¾</h4><h5 id="å¤æ‚åº¦åˆ†æ-1"><a href="#å¤æ‚åº¦åˆ†æ-1" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h5><p>æ—¶é—´å¤æ‚åº¦ : O(logn)ã€‚  æ¯ä¸€æ­¥éƒ½å°†æœç´¢ç©ºé—´å‡åŠã€‚<br>ç©ºé—´å¤æ‚åº¦ : O(1)ã€‚ åªä½¿ç”¨äº†å¸¸æ•°ç©ºé—´ã€‚</p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findPeakElement</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = nums.length-<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (left+right)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid]&gt;nums[mid+<span class="number">1</span>]) <span class="comment">// å¾€å·¦æœç´¢</span></span><br><span class="line">                right = mid;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(nums[mid]&lt;nums[mid+<span class="number">1</span>]) <span class="comment">// å¾€å³æœç´¢</span></span><br><span class="line">                left = mid+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/28/å¯»æ‰¾å³°å€¼/2.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€é•¿é‡å¤å­æ•°ç»„</title>
    <url>/2019/12/28/%E6%9C%80%E9%95%BF%E9%87%8D%E5%A4%8D%E5%AD%90%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/" target="_blank" rel="noopener">æœ€é•¿é‡å¤å­æ•°ç»„ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/28/æœ€é•¿é‡å¤å­æ•°ç»„/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’"><a href="#æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’"></a>æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’</h4><blockquote>
<p>ä½œè€…ï¼šLeetCode<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/solution/zui-chang-zhong-fu-zi-shu-zu-by-leetcode/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/solution/zui-chang-zhong-fu-zi-shu-zu-by-leetcode/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</p>
</blockquote>
<p>è®¾ <code>dp[i][j]</code>ä¸º <code>A[i:]</code> å’Œ <code>B[j:]</code> çš„æœ€é•¿å…¬å…±å‰ç¼€ï¼Œé‚£ä¹ˆç­”æ¡ˆä¸ºæ‰€æœ‰ <code>dp[i][j]</code> ä¸­çš„æœ€å¤§å€¼ <code>max(dp[i][j])</code>ã€‚è‹¥ <code>A[i] == B[j]</code>ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º <code>dp[i][j] = dp[i + 1][j + 1] + 1</code>ï¼Œå¦åˆ™ä¸º <code>dp[i][j] = 0</code>ã€‚</p>
<p><strong>å¤æ‚åº¦åˆ†æ</strong></p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(M*N)ï¼Œå…¶ä¸­ Må’Œ Næ˜¯æ•°ç»„ A å’Œ B çš„é•¿åº¦ã€‚<br>ç©ºé—´å¤æ‚åº¦ï¼šO(M*N)ï¼Œå³ä¸ºæ•°ç»„ <code>dp</code> ä½¿ç”¨çš„ç©ºé—´ã€‚</p>
<p><strong>ä»£ç </strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findLength</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[A.length+<span class="number">1</span>][B.length+<span class="number">1</span>]; <span class="comment">// é•¿åº¦åŠ 1æ˜¯ä¸ºäº†åé¢çš„dp[i+1][j+1]</span></span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = A.length-<span class="number">1</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = B.length-<span class="number">1</span>; j&gt;=<span class="number">0</span>; j--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(A[i] == B[j])</span><br><span class="line">                    dp[i][j] = dp[i+<span class="number">1</span>][j+<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                res = Math.max(res,dp[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/28/æœ€é•¿é‡å¤å­æ•°ç»„/2.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€å¤§è¿ç»­1çš„ä¸ªæ•°</title>
    <url>/2019/12/27/%E6%9C%80%E5%A4%A7%E8%BF%9E%E7%BB%AD1%E7%9A%84%E4%B8%AA%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/max-consecutive-ones/" target="_blank" rel="noopener">æœ€å¤§è¿ç»­1çš„ä¸ªæ•°ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/27/æœ€å¤§è¿ç»­1çš„ä¸ªæ•°/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šä¸€æ¬¡éå†"><a href="#æ–¹æ³•ä¸€ï¼šä¸€æ¬¡éå†" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä¸€æ¬¡éå†"></a>æ–¹æ³•ä¸€ï¼šä¸€æ¬¡éå†</h4><p><img src="/2019/12/27/æœ€å¤§è¿ç»­1çš„ä¸ªæ•°/2.jpg" alt="2"></p>
<p><strong>å¤æ‚åº¦åˆ†æ</strong></p>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(N)ã€‚Næ˜¯æ•°ç»„çš„é•¿åº¦ã€‚</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œä»…ä»…ä½¿ç”¨äº† <code>count</code> å’Œ <code>maxCount</code>ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findMaxConsecutiveOnes</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        maxcount = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">if</span> num == <span class="number">0</span>:</span><br><span class="line">                maxcount = max(maxcount, count)</span><br><span class="line">                count = <span class="number">0</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> max(maxcount,count)</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/27/æœ€å¤§è¿ç»­1çš„ä¸ªæ•°/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜</title>
    <url>/2019/12/27/%E5%8C%BA%E5%9F%9F%E5%92%8C%E6%A3%80%E7%B4%A2-%E6%95%B0%E7%BB%84%E4%B8%8D%E5%8F%AF%E5%8F%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/range-sum-query-immutable/" target="_blank" rel="noopener">åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/27/åŒºåŸŸå’Œæ£€ç´¢-æ•°ç»„ä¸å¯å˜/1.jpg" alt="1"></p>
<p><img src="/2019/12/27/åŒºåŸŸå’Œæ£€ç´¢-æ•°ç»„ä¸å¯å˜/2.jpg" alt="2"></p>
<hr>
<h5 id="æ–¹æ³•äºŒï¼š-ç¼“å­˜"><a href="#æ–¹æ³•äºŒï¼š-ç¼“å­˜" class="headerlink" title="æ–¹æ³•äºŒï¼š ç¼“å­˜"></a>æ–¹æ³•äºŒï¼š ç¼“å­˜</h5><p><img src="/2019/12/27/åŒºåŸŸå’Œæ£€ç´¢-æ•°ç»„ä¸å¯å˜/3.jpg" alt="3"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] sum;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NumArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        sum = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length+<span class="number">1</span>]; <span class="comment">// å¤šå¢åŠ ä¸€ä½</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            sum[i+<span class="number">1</span>] = sum[i] + nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sumRange</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sum[j+<span class="number">1</span>] - sum[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your NumArray object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * NumArray obj = new NumArray(nums);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj.sumRange(i,j);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ’å…¥äº†ä¸€ä¸ªè™šæ‹Ÿ 0 ä½œä¸º sum æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚è¿™ä¸ªæŠ€å·§å¯ä»¥é¿å…åœ¨ sumrange å‡½æ•°ä¸­è¿›è¡Œé¢å¤–çš„æ¡ä»¶æ£€æŸ¥ã€‚</p>
</blockquote>
<p><img src="/2019/12/27/åŒºåŸŸå’Œæ£€ç´¢-æ•°ç»„ä¸å¯å˜/4.jpg" alt="4"></p>
<p><img src="/2019/12/27/åŒºåŸŸå’Œæ£€ç´¢-æ•°ç»„ä¸å¯å˜/5.jpg" alt="5"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ•°ç»„</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€é•¿ä¸Šå‡å­åºåˆ—</title>
    <url>/2019/12/27/%E6%9C%80%E9%95%BF%E4%B8%8A%E5%8D%87%E5%AD%90%E5%BA%8F%E5%88%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/longest-increasing-subsequence/" target="_blank" rel="noopener">æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/27/æœ€é•¿ä¸Šå‡å­åºåˆ—/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’"><a href="#æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’"></a>æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’</h4><p><img src="/2019/12/27/æœ€é•¿ä¸Šå‡å­åºåˆ—/2.jpg" alt="2"></p>
<p><img src="/2019/12/27/æœ€é•¿ä¸Šå‡å­åºåˆ—/3.jpg" alt="3"></p>
<p><img src="/2019/12/27/æœ€é•¿ä¸Šå‡å­åºåˆ—/4.jpg" alt="4"></p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            dp[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[i] &gt; nums[j])</span><br><span class="line">                    dp[i] = Math.max(dp[i], <span class="number">1</span> + dp[j]);</span><br><span class="line">            &#125;</span><br><span class="line">            ans = Math.max(ans, dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/27/æœ€é•¿ä¸Šå‡å­åºåˆ—/5.jpg" alt="5"></p>
<h5 id="è¿›é˜¶ï¼šå°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ°O-nlogn-ã€‚-ä½¿ç”¨è´ªå¿ƒç®—æ³•-äºŒåˆ†æŸ¥æ‰¾"><a href="#è¿›é˜¶ï¼šå°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ°O-nlogn-ã€‚-ä½¿ç”¨è´ªå¿ƒç®—æ³•-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="è¿›é˜¶ï¼šå°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ°O(nlogn)ã€‚ ä½¿ç”¨è´ªå¿ƒç®—æ³•+äºŒåˆ†æŸ¥æ‰¾"></a>è¿›é˜¶ï¼šå°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ°O(nlogn)ã€‚ ä½¿ç”¨è´ªå¿ƒç®—æ³•+äºŒåˆ†æŸ¥æ‰¾</h5>]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>å®Œå…¨å¹³æ–¹æ•°</title>
    <url>/2019/12/27/%E5%AE%8C%E5%85%A8%E5%B9%B3%E6%96%B9%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/perfect-squares/" target="_blank" rel="noopener">å®Œå…¨å¹³æ–¹æ•°ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/27/å®Œå…¨å¹³æ–¹æ•°/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’"><a href="#æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’"></a>æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’</h4><p>dp[i]è¡¨ç¤ºiæœ€å°‘å¯ä»¥ç”±å‡ ä¸ªå¹³æ–¹æ•°æ„æˆã€‚</p>
<p>åˆè¯•åŒ–dp=[0,1,2,â€¦, n]ï¼Œé•¿åº¦ä¸ºn+1ï¼Œæœ€å¤šæ¬¡æ•°å°±æ˜¯å…¨ç”±1æ„æˆã€‚</p>
<p>éå†dpï¼Œå¯¹äºiï¼Œéå†åŒºé—´[1,n]ï¼š</p>
<p>â€‹        éå†æ‰€æœ‰å¹³æ–¹æ•°å°äºiçš„æ•°jï¼Œéå†åŒºé—´[1, sqrt(i)]</p>
<p>åŠ¨æ€è½¬ç§»æ–¹ç¨‹ï¼š</p>
<blockquote>
<p> dp[i] = min(dp[i], dp[i - j <em> j]+1)ï¼Œiè¡¨ç¤ºå½“å‰æ•°å­—ï¼Œj</em>jè¡¨ç¤ºå¹³æ–¹æ•°</p>
</blockquote>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*sqrt(n))</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSquares</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>]; <span class="comment">//dp[i]å­˜æ”¾çš„æ˜¯iæœ€å°‘å¯ä»¥ç”±å‡ ä¸ªå¹³æ–¹æ•°æ„æˆï¼Œ åˆå§‹åŒ–ä¸º[0,1,...,n]</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">            dp[i] = i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; i-j*j &gt;= <span class="number">0</span>; j++)&#123;</span><br><span class="line">                dp[i] = Math.min(dp[i], dp[i-j*j]+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/27/å®Œå…¨å¹³æ–¹æ•°/2.jpg" alt="2"></p>
<hr>
<h4 id="æ–¹æ³•äºŒï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰"><a href="#æ–¹æ³•äºŒï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰"></a>æ–¹æ³•äºŒï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰</h4><p><img src="/2019/12/27/å®Œå…¨å¹³æ–¹æ•°/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¹˜ç§¯æœ€å¤§å­åºåˆ—</title>
    <url>/2019/12/26/%E4%B9%98%E7%A7%AF%E6%9C%80%E5%A4%A7%E5%AD%90%E5%BA%8F%E5%88%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/maximum-product-subarray/" target="_blank" rel="noopener">ä¹˜ç§¯æœ€å¤§å­åºåˆ—ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/26/ä¹˜ç§¯æœ€å¤§å­åºåˆ—/1.jpg" alt="1"></p>
<p><img src="/2019/12/26/ä¹˜ç§¯æœ€å¤§å­åºåˆ—/2.jpg" alt="2"></p>
<blockquote>
<p><strong>æ³¨æ„ï¼šä¸èƒ½åªä¿å­˜åˆ°å½“å‰ä¸ºæ­¢çš„æœ€å¤§å€¼ï¼Œè¿˜éœ€ä¿å­˜åˆ°å½“å‰ä¸ºæ­¢çš„æœ€å°å€¼ï¼Œå› ä¸ºè‹¥ä¸‹ä¸€ä¸ªæ•°æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆä»¥å‰çš„æœ€å°å€¼ï¼ˆè‹¥ä¸ºè´Ÿæ•°ï¼‰ä¼šå˜æˆç°åœ¨çš„æœ€å¤§å€¼</strong>.</p>
</blockquote>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> imax = nums[<span class="number">0</span>], imin = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> ans = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]&lt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">int</span> temp = imin;</span><br><span class="line">                imin = imax;</span><br><span class="line">                imax = temp;</span><br><span class="line">            &#125;</span><br><span class="line">            imax = Math.max(imax*nums[i], nums[i]);</span><br><span class="line">            imin = Math.min(imin*nums[i], nums[i]);</span><br><span class="line">            ans = Math.max(ans,imax);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/26/ä¹˜ç§¯æœ€å¤§å­åºåˆ—/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>é“¾è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªæ›´å¤§èŠ‚ç‚¹</title>
    <url>/2019/12/26/%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A4%A7%E8%8A%82%E7%82%B9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/next-greater-node-in-linked-list/" target="_blank" rel="noopener">é“¾è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªæ›´å¤§èŠ‚ç‚¹ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/26/é“¾è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªæ›´å¤§èŠ‚ç‚¹/1.jpg" alt="1"></p>
<p><img src="/2019/12/26/é“¾è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªæ›´å¤§èŠ‚ç‚¹/2.jpg" alt="2"></p>
<h4 id="æ–¹æ³•ï¼šå•è°ƒæ ˆ"><a href="#æ–¹æ³•ï¼šå•è°ƒæ ˆ" class="headerlink" title="æ–¹æ³•ï¼šå•è°ƒæ ˆ"></a>æ–¹æ³•ï¼šå•è°ƒæ ˆ</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] nextLargerNodes(ListNode head) &#123;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10000</span>];</span><br><span class="line">        <span class="keyword">int</span>[] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10000</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(head != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">// æ ˆé‡Œå­˜æ”¾ç´¢å¼•</span></span><br><span class="line">            arr2[length] = head.val;</span><br><span class="line">            <span class="keyword">while</span>(!stack.empty() &amp;&amp; arr2[stack.peek()] &lt; head.val)&#123;</span><br><span class="line">                arr[stack.pop()] = head.val;</span><br><span class="line">            &#125;</span><br><span class="line">            stack.push(length);</span><br><span class="line">            head = head.next;</span><br><span class="line">            length++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> res[] = <span class="keyword">new</span> <span class="keyword">int</span>[length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;length; i++)&#123;</span><br><span class="line">            res[i] = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/26/é“¾è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªæ›´å¤§èŠ‚ç‚¹/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ ˆ</tag>
        <tag>é“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 2</title>
    <url>/2019/12/26/%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A4%A7%E5%85%83%E7%B4%A02/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/next-greater-element-ii/" target="_blank" rel="noopener">ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 2ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/26/ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 2/1.jpg" alt="1"></p>
<h4 id="æ–¹æ³•ï¼šå•è°ƒæ ˆ"><a href="#æ–¹æ³•ï¼šå•è°ƒæ ˆ" class="headerlink" title="æ–¹æ³•ï¼šå•è°ƒæ ˆ"></a>æ–¹æ³•ï¼šå•è°ƒæ ˆ</h4><h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>è½¬è‡ªï¼š</p>
<blockquote>
<p>ä½œè€…ï¼šlabuladong<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/next-greater-element-ii/solution/dan-diao-zhan-jie-jue-next-greater-number-yi-lei-2/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/next-greater-element-ii/solution/dan-diao-zhan-jie-jue-next-greater-number-yi-lei-2/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</p>
</blockquote>
<p>åŒæ ·æ˜¯ Next Greater Numberï¼Œç°åœ¨å‡è®¾ç»™ä½ çš„æ•°ç»„æ˜¯ä¸ªç¯å½¢çš„ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œè®¡ç®—æœºçš„å†…å­˜éƒ½æ˜¯çº¿æ€§çš„ï¼Œæ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šçš„ç¯å½¢æ•°ç»„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿå‡ºç¯å½¢æ•°ç»„çš„æ•ˆæœï¼Œä¸€èˆ¬æ˜¯é€šè¿‡ % è¿ç®—ç¬¦æ±‚æ¨¡ï¼ˆä½™æ•°ï¼‰ï¼Œè·å¾—ç¯å½¢ç‰¹æ•ˆï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> n = arr.length, index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">    print(arr[index % n]);</span><br><span class="line">    index++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å›åˆ° Next Greater Number çš„é—®é¢˜ï¼Œå¢åŠ äº†ç¯å½¢å±æ€§åï¼Œé—®é¢˜çš„éš¾ç‚¹åœ¨äºï¼š<strong>è¿™ä¸ª Next çš„æ„ä¹‰ä¸ä»…ä»…æ˜¯å½“å‰å…ƒç´ çš„å³è¾¹äº†ï¼Œæœ‰å¯èƒ½å‡ºç°åœ¨å½“å‰å…ƒç´ çš„å·¦è¾¹ã€‚</strong></p>
<p>æˆ‘ä»¬å¯ä»¥è€ƒè™‘è¿™æ ·çš„æ€è·¯ï¼š<strong>å°†åŸå§‹æ•°ç»„ â€œç¿»å€â€ï¼Œ</strong>å°±æ˜¯åœ¨åé¢å†æ¥ä¸€ä¸ªåŸå§‹æ•°ç»„ï¼Œè¿™æ ·çš„è¯ï¼ŒæŒ‰ç…§ä¹‹å‰â€œæ¯”èº«é«˜â€çš„æµç¨‹ï¼Œæ¯ä¸ªå…ƒç´ ä¸ä»…å¯ä»¥æ¯”è¾ƒè‡ªå·±å³è¾¹çš„å…ƒç´ ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥å’Œå·¦è¾¹çš„å…ƒç´ æ¯”è¾ƒäº†ã€‚</p>
<p><img src="https://pic.leetcode-cn.com/c6dda3c6d50dddbd4518619829834235a8f84be0f34f3b32974ad6d8e76cc3b1-file_1560500960943" alt="ink-image (2)"></p>
<h4 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h4><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] nextGreaterElements(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>*n-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123; <span class="comment">// iä»2*n-1å¼€å§‹</span></span><br><span class="line">            <span class="keyword">while</span>(!stack.empty() &amp;&amp; stack.peek() &lt;= nums[i%n])&#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            res[i%n] = stack.empty() ? -<span class="number">1</span> : stack.peek();</span><br><span class="line">            stack.push(nums[i%n]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/26/ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 2/2.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ ˆ</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰“å®¶åŠ«èˆ3</title>
    <url>/2019/12/26/%E6%89%93%E5%AE%B6%E5%8A%AB%E8%88%8D3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/house-robber-iii/" target="_blank" rel="noopener">æ‰“å®¶åŠ«èˆ3ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ3/1.jpg" alt="é¢˜ç›®"></p>
<p>ä»¥ä¸‹å†…å®¹è½¬è½½è‡ªï¼š</p>
<blockquote>
<p>ä½œè€…ï¼šreals<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/house-robber-iii/solution/san-chong-fang-fa-jie-jue-shu-xing-dong-tai-gui-hu/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/house-robber-iii/solution/san-chong-fang-fa-jie-jue-shu-xing-dong-tai-gui-hu/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</p>
</blockquote>
<p>æœ¬é¢˜ç›®æœ¬èº«å°±æ˜¯åŠ¨æ€è§„åˆ’çš„æ ‘å½¢ç‰ˆæœ¬ï¼Œé€šè¿‡æ­¤é¢˜è§£ï¼Œå¯ä»¥äº†è§£ä¸€ä¸‹æ ‘å½¢é—®é¢˜åœ¨åŠ¨æ€è§„åˆ’é—®é¢˜è§£æ³•<br>æˆ‘ä»¬é€šè¿‡3ä¸ªæ–¹æ³•ä¸æ–­é€’è¿›è§£å†³é—®é¢˜</p>
<ul>
<li>è§£æ³•1é€šè¿‡é€’å½’å®ç°ï¼Œè™½ç„¶è§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯å¤æ‚åº¦å¤ªé«˜</li>
<li>è§£æ³•2é€šè¿‡è§£å†³æ–¹æ³•1ä¸­çš„é‡å¤å­é—®é¢˜ï¼Œå®ç°äº†æ€§èƒ½çš„ç™¾å€æå‡</li>
<li>è§£æ³•3 ç›´æ¥çœå»äº†é‡å¤å­é—®é¢˜ï¼Œæ€§èƒ½åˆæå‡äº†ä¸€æ­¥</li>
</ul>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ3/2.jpg" alt="2"></p>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ3/3.jpg" alt="3"></p>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ3/4.jpg" alt="4"></p>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ3/5.jpg" alt="5"></p>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ3/6.jpg" alt="6"></p>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ3/7.jpg" alt="7"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰“å®¶åŠ«èˆ2</title>
    <url>/2019/12/26/%E6%89%93%E5%AE%B6%E5%8A%AB%E8%88%8D2/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/house-robber-ii/" target="_blank" rel="noopener">æ‰“å®¶åŠ«èˆ2ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ2/é¢˜ç›®.jpg" alt="é¢˜ç›®"></p>
<h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p><strong>æ­¤é¢˜æ˜¯ <a href>198. æ‰“å®¶åŠ«èˆ</a> çš„æ‹“å±•ç‰ˆï¼š</strong> å”¯ä¸€çš„åŒºåˆ«æ˜¯æ­¤é¢˜ä¸­çš„æˆ¿é—´æ˜¯<strong>ç¯çŠ¶æ’åˆ—</strong>çš„ï¼ˆå³é¦–å°¾ç›¸æ¥ï¼‰ï¼Œè€Œ 198 é¢˜ä¸­çš„æˆ¿é—´æ˜¯<strong>å•æ’æ’åˆ—</strong>çš„ã€‚</p>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ2/1.jpg" alt="1"></p>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ2/2.jpg" alt="2"></p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ2/3.jpg" alt="3"></p>
<p><img src="/2019/12/26/æ‰“å®¶åŠ«èˆ2/4.jpg" alt="4"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ›å»ºå•é“¾è¡¨çš„å¤´æ’æ³•ä¸å°¾æ’æ³•</title>
    <url>/2019/12/26/%E5%88%9B%E5%BB%BA%E5%8D%95%E9%93%BE%E8%A1%A8%E7%9A%84%E5%A4%B4%E6%8F%92%E6%B3%95%E4%B8%8E%E5%B0%BE%E6%8F%92%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://blog.csdn.net/qq_41028985/article/details/82859199" target="_blank" rel="noopener">åŸæ–‡</a></p>
<h4 id="å¤´æ’æ³•åˆ›å»ºå•é“¾è¡¨"><a href="#å¤´æ’æ³•åˆ›å»ºå•é“¾è¡¨" class="headerlink" title="å¤´æ’æ³•åˆ›å»ºå•é“¾è¡¨"></a>å¤´æ’æ³•åˆ›å»ºå•é“¾è¡¨</h4><p><img src="/2019/12/26/åˆ›å»ºå•é“¾è¡¨çš„å¤´æ’æ³•ä¸å°¾æ’æ³•/1577345110132.jpg" alt="å›¾1"></p>
<p><img src="/2019/12/26/åˆ›å»ºå•é“¾è¡¨çš„å¤´æ’æ³•ä¸å°¾æ’æ³•/1.jpg" alt="1"></p>
<h4 id="å°¾æ’æ³•åˆ›å»ºå•é“¾è¡¨"><a href="#å°¾æ’æ³•åˆ›å»ºå•é“¾è¡¨" class="headerlink" title="å°¾æ’æ³•åˆ›å»ºå•é“¾è¡¨"></a>å°¾æ’æ³•åˆ›å»ºå•é“¾è¡¨</h4><p><img src="/2019/12/26/åˆ›å»ºå•é“¾è¡¨çš„å¤´æ’æ³•ä¸å°¾æ’æ³•/2.jpg" alt="2"></p>
<p><img src="/2019/12/26/åˆ›å»ºå•é“¾è¡¨çš„å¤´æ’æ³•ä¸å°¾æ’æ³•/3.jpg" alt="3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†ç‚¹</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸¤æ•°ç›¸åŠ 2</title>
    <url>/2019/12/26/%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A02/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/add-two-numbers-ii/" target="_blank" rel="noopener">ä¸¤æ•°ç›¸åŠ 2ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/26/ä¸¤æ•°ç›¸åŠ 2/1577344361644.jpg" alt="é¢˜ç›®"></p>
<h4 id="æ–¹æ³•ï¼šåŒæ ˆ-å¤´æ’æ³•"><a href="#æ–¹æ³•ï¼šåŒæ ˆ-å¤´æ’æ³•" class="headerlink" title="æ–¹æ³•ï¼šåŒæ ˆ + å¤´æ’æ³•"></a>æ–¹æ³•ï¼šåŒæ ˆ + å¤´æ’æ³•</h4><p><img src="/2019/12/26/ä¸¤æ•°ç›¸åŠ 2/1577344797002.jpg" alt="code"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>é“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 1</title>
    <url>/2019/12/25/%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A4%A7%E5%85%83%E7%B4%A01/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/next-greater-element-i/" target="_blank" rel="noopener">ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 1ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/25/ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 1/1577281453752.jpg" alt="é¢˜ç›®"></p>
<p><img src="/2019/12/25/ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 1/1577281497407.jpg" alt="æ–¹æ³•"></p>
<p><img src="/2019/12/25/ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 1/1577281548614.jpg" alt="code"></p>
<h4 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h4><p><img src="/2019/12/25/ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 1/20191225-215434.jpg" alt="å›¾è§£"></p>
<hr>
<h4 id="å¦ä¸€ç§å†™æ³•ï¼ˆä»åå¾€å‰ï¼‰"><a href="#å¦ä¸€ç§å†™æ³•ï¼ˆä»åå¾€å‰ï¼‰" class="headerlink" title="å¦ä¸€ç§å†™æ³•ï¼ˆä»åå¾€å‰ï¼‰"></a>å¦ä¸€ç§å†™æ³•ï¼ˆä»åå¾€å‰ï¼‰</h4><p>è½¬è‡ªï¼š</p>
<blockquote>
<p>ä½œè€…ï¼šlabuladong<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/next-greater-element-i/solution/dan-diao-zhan-jie-jue-next-greater-number-yi-lei-w/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/next-greater-element-i/solution/dan-diao-zhan-jie-jue-next-greater-number-yi-lei-w/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</p>
</blockquote>
<p><img src="/2019/12/25/ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 1/1.jpg" alt="1"></p>
<p>æ¨¡æ¿ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nextGreaterElement(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans(nums.size()); <span class="comment">// å­˜æ”¾ç­”æ¡ˆçš„æ•°ç»„</span></span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = nums.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123; <span class="comment">// å€’ç€å¾€æ ˆé‡Œæ”¾</span></span><br><span class="line">        <span class="keyword">while</span> (!s.empty() &amp;&amp; s.top() &lt;= nums[i]) &#123; <span class="comment">// åˆ¤å®šä¸ªå­é«˜çŸ®</span></span><br><span class="line">            s.pop(); <span class="comment">// çŸ®ä¸ªèµ·å¼€ï¼Œåæ­£ä¹Ÿè¢«æŒ¡ç€äº†ã€‚ã€‚ã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line">        ans[i] = s.empty() ? <span class="number">-1</span> : s.top(); <span class="comment">// è¿™ä¸ªå…ƒç´ èº«åçš„ç¬¬ä¸€ä¸ªé«˜ä¸ª</span></span><br><span class="line">        s.push(nums[i]); <span class="comment">// è¿›é˜Ÿï¼Œæ¥å—ä¹‹åçš„èº«é«˜åˆ¤å®šå§ï¼</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>for å¾ªç¯è¦ä»åå¾€å‰æ‰«æå…ƒç´ ï¼Œå› ä¸ºæˆ‘ä»¬å€ŸåŠ©çš„æ˜¯æ ˆçš„ç»“æ„ï¼Œå€’ç€å…¥æ ˆï¼Œå…¶å®æ˜¯æ­£ç€å‡ºæ ˆã€‚while å¾ªç¯æ˜¯æŠŠä¸¤ä¸ªâ€œé«˜ä¸ªâ€å…ƒç´ ä¹‹é—´çš„å…ƒç´ æ’é™¤ï¼Œå› ä¸ºä»–ä»¬çš„å­˜åœ¨æ²¡æœ‰æ„ä¹‰ï¼Œå‰é¢æŒ¡ç€ä¸ªâ€œæ›´é«˜â€çš„å…ƒç´ ï¼Œæ‰€ä»¥ä»–ä»¬ä¸å¯èƒ½è¢«ä½œä¸ºåç»­è¿›æ¥çš„å…ƒç´ çš„ Next Great Number äº†ã€‚</p>
<p>è¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸æ˜¯é‚£ä¹ˆç›´è§‚ï¼Œå¦‚æœä½ çœ‹åˆ° for å¾ªç¯åµŒå¥— while å¾ªç¯ï¼Œå¯èƒ½è®¤ä¸ºè¿™ä¸ªç®—æ³•çš„å¤æ‚åº¦ä¹Ÿæ˜¯ O(n^2)ï¼Œä½†æ˜¯å®é™…ä¸Šè¿™ä¸ªç®—æ³•çš„å¤æ‚åº¦åªæœ‰ O(n)ã€‚</p>
<p>åˆ†æå®ƒçš„æ—¶é—´å¤æ‚åº¦ï¼Œè¦ä»æ•´ä½“æ¥çœ‹ï¼šæ€»å…±æœ‰ n ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½è¢« push å…¥æ ˆäº†ä¸€æ¬¡ï¼Œè€Œæœ€å¤šä¼šè¢« pop ä¸€æ¬¡ï¼Œæ²¡æœ‰ä»»ä½•å†—ä½™æ“ä½œã€‚æ‰€ä»¥æ€»çš„è®¡ç®—è§„æ¨¡æ˜¯å’Œå…ƒç´ è§„æ¨¡ n æˆæ­£æ¯”çš„ï¼Œä¹Ÿå°±æ˜¯ O(n) çš„å¤æ‚åº¦ã€‚</p>
<h5 id="æœ¬é¢˜ä»£ç "><a href="#æœ¬é¢˜ä»£ç " class="headerlink" title="æœ¬é¢˜ä»£ç "></a>æœ¬é¢˜ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] nextGreaterElement(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2) &#123;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[nums1.length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = nums2.length-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123; <span class="comment">// å€’ç€å¾€æ ˆé‡Œæ”¾</span></span><br><span class="line">            <span class="keyword">while</span>(!stack.empty() &amp;&amp; nums2[i]&gt;=stack.peek())&#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(nums2[i],stack.empty()?-<span class="number">1</span>:stack.peek());</span><br><span class="line">            stack.push(nums2[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;nums1.length; i++)</span><br><span class="line">            res[i] = map.get(nums1[i]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>æ ˆ</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ é™¤åˆ—è¡¨ä¸­çš„èŠ‚ç‚¹</title>
    <url>/2019/12/25/%E5%88%A0%E9%99%A4%E5%88%97%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/delete-node-in-a-linked-list/" target="_blank" rel="noopener">åˆ é™¤åˆ—è¡¨ä¸­çš„èŠ‚ç‚¹ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/25/åˆ é™¤åˆ—è¡¨ä¸­çš„èŠ‚ç‚¹/æ•è·.JPG" alt="é¢˜ç›®"></p>
<p><img src="/2019/12/25/åˆ é™¤åˆ—è¡¨ä¸­çš„èŠ‚ç‚¹/1577280000099.jpg" alt="æ–¹æ³•"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>é“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ 2</title>
    <url>/2019/12/25/%E5%88%A0%E9%99%A4%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A02/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list-ii/" target="_blank" rel="noopener">åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ 2ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ 2/1577278156148.jpg" alt="é¢˜ç›®"></p>
<h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ 2/1577278207894.jpg" alt="1577278207894"></p>
<h4 id="ç”»è§£"><a href="#ç”»è§£" class="headerlink" title="ç”»è§£"></a>ç”»è§£</h4><p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ 2/20191225-210253.jpg" alt="ç”»è§£"></p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><p>(Java)</p>
<p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ 2/1577279243671.jpg" alt="code"></p>
<p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ 2/1577279306551.jpg" alt="ç»“æœ"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>é“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </title>
    <url>/2019/12/25/%E5%88%A0%E9%99%A4%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list/" target="_blank" rel="noopener">åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ /1577268363569.jpg" alt="é¢˜ç›®"></p>
<h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ /1577268482086.jpg" alt="æ€è·¯"></p>
<p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ /1577268503067.jpg" alt="1577268503067"></p>
<h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ /1577268572469.jpg" alt="1577268572469"></p>
<p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ /1577268850082.jpg" alt="ç»“æœ"></p>
<h4 id="ç”»è§£"><a href="#ç”»è§£" class="headerlink" title="ç”»è§£"></a>ç”»è§£</h4><p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ /1577268614488.jpg" alt="ç”»è§£1"></p>
<p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ /1577268643223.jpg" alt="ç”»è§£2"></p>
<p><img src="/2019/12/25/åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ /1577268718737.jpg" alt="ç”»è§£3"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>é“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€é•¿å›æ–‡ä¸²</title>
    <url>/2019/12/25/%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E4%B8%B2/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/longest-palindrome/" target="_blank" rel="noopener">æœ€é•¿å›æ–‡ä¸²ï¼ˆéš¾åº¦ï¼šç®€å•ï¼‰</a></p>
<p><img src="/2019/12/25/æœ€é•¿å›æ–‡ä¸²/1577266515330.jpg" alt="é¢˜ç›®"></p>
<p><img src="/2019/12/25/æœ€é•¿å›æ–‡ä¸²/20191225-174159.jpg" alt="æ€è·¯"></p>
<p><img src="/2019/12/25/æœ€é•¿å›æ–‡ä¸²/1577267022201.jpg" alt="code"></p>
<p><img src="/2019/12/25/æœ€é•¿å›æ–‡ä¸²/1577267058050.jpg" alt="ç»“æœ"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>å›æ–‡</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€é•¿å›æ–‡å­ä¸²</title>
    <url>/2019/12/25/%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/longest-palindromic-substring/" target="_blank" rel="noopener">æœ€é•¿å›æ–‡å­ä¸²ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/25/æœ€é•¿å›æ–‡å­ä¸²/0001.jpg" alt="0001"></p>
<p><img src="/2019/12/25/æœ€é•¿å›æ–‡å­ä¸²/0002.jpg" alt="0002"></p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>å›æ–‡</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€é•¿å…¬å…±å­åºåˆ—</title>
    <url>/2019/12/25/%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://leetcode-cn.com/problems/longest-common-subsequence/" target="_blank" rel="noopener">æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆéš¾åº¦ï¼šä¸­ç­‰ï¼‰</a></p>
<p><img src="/2019/12/25/æœ€é•¿å…¬å…±å­åºåˆ—/question.JPG" alt="é¢˜ç›®"></p>
<h3 id="æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’"><a href="#æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’"></a>æ–¹æ³•ï¼šåŠ¨æ€è§„åˆ’</h3><p><img src="/2019/12/25/æœ€é•¿å…¬å…±å­åºåˆ—/1.JPG" alt="å›¾1"></p>
<p><img src="/2019/12/25/æœ€é•¿å…¬å…±å­åºåˆ—/2.JPG" alt="å›¾2"></p>
<h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><p><img src="/2019/12/25/æœ€é•¿å…¬å…±å­åºåˆ—/code.JPG" alt="code"></p>
<p><img src="/2019/12/25/æœ€é•¿å…¬å…±å­åºåˆ—/3.JPG" alt="å›¾3"></p>
<h5 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h5><p>æ•°æ®å¤æ‚åº¦ï¼šO(mn)</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(mn)</p>
<hr>
<h4 id="æœ€é•¿å…¬å…±å­ä¸²"><a href="#æœ€é•¿å…¬å…±å­ä¸²" class="headerlink" title="æœ€é•¿å…¬å…±å­ä¸²"></a>æœ€é•¿å…¬å…±å­ä¸²</h4><p>æœ€é•¿å…¬å…±å­ä¸²ï¼ˆLongest Common Substringï¼‰ä¸æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLongest Common Subsequenceï¼‰çš„åŒºåˆ«ï¼š <strong>å­ä¸²è¦æ±‚åœ¨åŸå­—ç¬¦ä¸²ä¸­æ˜¯è¿ç»­çš„ï¼Œè€Œå­åºåˆ—åˆ™åªéœ€ä¿æŒç›¸å¯¹é¡ºåºä¸€è‡´ï¼Œå¹¶ä¸è¦æ±‚è¿ç»­</strong>ã€‚ä¾‹å¦‚X = {a, Q, 1, 1}; Y = {a, 1, 1, d, f}é‚£ä¹ˆï¼Œ{a, 1, 1}æ˜¯Xå’ŒYçš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œä½†ä¸æ˜¯å®ƒä»¬çš„æœ€é•¿å…¬å…±å­—ä¸²ã€‚</p>
<p><strong>æè¿°ï¼š</strong></p>
<p>è®¡ç®—ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€å¤§å…¬å…±å­ä¸²ï¼ˆLongest Common Substringï¼‰çš„é•¿åº¦ï¼Œå­—ç¬¦ä¸åŒºåˆ†å¤§å°å†™ã€‚</p>
<p><strong>æ–¹æ³•</strong></p>
<p>æ±‚å­ä¸²çš„æ–¹æ³•å’Œæ±‚å­åºåˆ—æ–¹æ³•ç±»ä¼¼ï¼š</p>
<p><img src="/2019/12/25/æœ€é•¿å…¬å…±å­åºåˆ—/1578644196190.png" alt="1578644196190"></p>
<h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(String text1, String text2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n1 = text1.length();</span><br><span class="line">        <span class="keyword">int</span> n2 = text2.length();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> dp[][] = <span class="keyword">new</span> <span class="keyword">int</span>[n1+<span class="number">1</span>][n2+<span class="number">1</span>]; <span class="comment">//å¤šå¢åŠ ä¸€è¡Œä¸€åˆ—</span></span><br><span class="line">        <span class="keyword">int</span> longest = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n1; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n2; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(text1.charAt(i-<span class="number">1</span>) == text2.charAt(j-<span class="number">1</span>))</span><br><span class="line">                    dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                    longest = Math.max(longest,dp[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> longest;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>HDFS-Overview</title>
    <url>/2019/12/16/HDFS-Overview/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/2019/12/16/HDFS-Overview/0001.jpg" alt="0001"></p>
]]></content>
      <categories>
        <category>Hadoop</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
        <tag>HDFS and MapReduce</tag>
      </tags>
  </entry>
  <entry>
    <title>Hadoop Introduction</title>
    <url>/2019/12/15/Hadoop-Introduction/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="History"><a href="#History" class="headerlink" title="History"></a>History</h1><p><img src="/2019/12/15/Hadoop-Introduction/hadoop-history.JPG" alt="hadoop-history"></p>
<h1 id="Hadoop-Ecosystem"><a href="#Hadoop-Ecosystem" class="headerlink" title="Hadoop Ecosystem"></a>Hadoop Ecosystem</h1><p><img src="/2019/12/15/Hadoop-Introduction/hadoop-ecosystem.JPG" alt="hadoop-ecosystem"></p>
]]></content>
      <categories>
        <category>Hadoop</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
        <tag>Hadoop Introduction</tag>
      </tags>
  </entry>
  <entry>
    <title>Data Preprocessingï¼ˆæ•°æ®é¢„å¤„ç†ï¼‰</title>
    <url>/2019/09/21/Data-Preprocessing/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä»¥ä¸‹å†…å®¹æ¥è‡ªUdemyä¸Šçš„è¯¾ç¨‹: <a href="https://www.udemy.com/machinelearning/" target="_blank" rel="noopener"><strong>Machine Learing A-Z: Hands-On Python &amp; R in Data Science</strong></a>.</p>
<p><a href="https://www.superdatascience.com/pages/machine-learning" target="_blank" rel="noopener">datasets download</a></p>
<p>ä½¿ç”¨æ•°æ®ï¼š</p>
<p><img src="/2019/09/21/Data-Preprocessing/data.JPG" alt="data"></p>
<h3 id="1-Missing-data"><a href="#1-Missing-data" class="headerlink" title="1. Missing data"></a>1. Missing data</h3><p>Common strategy: replace the missing data by the mean, median, or most frequent value of the feature column.</p>
<h4 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h4><p>ä»¥å‡å€¼ä»£æ›¿ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Importing the libraries</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># Importing the dataset</span></span><br><span class="line">dataset = pd.read_csv(<span class="string">'Data.csv'</span>)</span><br><span class="line">X = dataset.iloc[:, :<span class="number">-1</span>].values</span><br><span class="line">y = dataset.iloc[:, <span class="number">3</span>].values</span><br><span class="line"></span><br><span class="line"><span class="comment"># Taking care of missing data</span></span><br><span class="line"><span class="comment"># æ³•ä¸€ï¼šSimpleImputer(æ–°ç‰ˆsklearnï¼Œä»¥å‰ä¸º from sklearn.preprocessing import Imputer)</span></span><br><span class="line"><span class="keyword">from</span> sklearn.impute <span class="keyword">import</span> SimpleImputer</span><br><span class="line">imputer = SimpleImputer(missing_values=np.nan, strategy = <span class="string">"mean"</span>)</span><br><span class="line">imputer.fit(X.iloc[:, <span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line">X.iloc[:, <span class="number">1</span>:<span class="number">3</span>] = imputer.transform(X.iloc[:, <span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³•äºŒï¼Œreplace</span></span><br><span class="line"><span class="comment">#ä»¥Ageä¸ºä¾‹</span></span><br><span class="line">X[<span class="string">"Age"</span>].replace(np.nan, X[<span class="string">"Age"</span>].mean(), inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³•ä¸‰ï¼Œfillna</span></span><br><span class="line"><span class="comment"># ä»¥Ageä¸ºä¾‹</span></span><br><span class="line">X[<span class="string">"Age"</span>] = X[<span class="string">"Age"</span>].fillna(X[<span class="string">"Age"</span>].mean())</span><br><span class="line"><span class="comment"># ä¹Ÿå¯ X["Age"].fillna(X["Age"].mean(), inplace=True)</span></span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼šç°æœ‰ df_age å¦‚ä¸‹ï¼š</p>
<p><img src="/2019/09/21/Data-Preprocessing/1607053623367.png" alt="1607053623367"></p>
<p>Fill the missing data in column <strong>â€œage_boyâ€</strong> with 22 and fill the missing data in column <strong>â€œage_girlâ€</strong> with 21. The expected output is:</p>
<p><img src="/2019/09/21/Data-Preprocessing/1607053581148.png" alt="1607053581148"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df_age = df_age.fillna(value=&#123;<span class="string">'age_boy'</span>:<span class="number">22</span>,<span class="string">'age_girl'</span>:<span class="number">21</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>åˆ æ‰æœ‰ç¼ºå¤±å€¼çš„è¡Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X.dropna(axis = <span class="number">0</span>, inplace = <span class="literal">True</span>)</span><br><span class="line"><span class="comment"># æˆ–å†™æˆ X = X.dropna(axis = 0)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿˜å¯æŒ‡å®šå½“å“ªä¸€å˜é‡å‡ºç°ç¼ºå¤±å€¼æ—¶ï¼Œæ‰§è¡Œåˆ é™¤çš„æ“ä½œ</span></span><br><span class="line">X.dropna(subset=[<span class="string">"Age"</span>], axis = <span class="number">0</span>, inplace = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>åˆ æ‰æœ‰ç¼ºå¤±å€¼çš„åˆ—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X.dropna(axis = <span class="number">1</span>, inplace = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="R"><a href="#R" class="headerlink" title="R"></a>R</h4><figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Importing the dataset</span></span><br><span class="line">dataset = read.csv(<span class="string">'Data.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Taking care of missing data</span></span><br><span class="line">dataset$Age = ifelse(is.na(dataset$Age),</span><br><span class="line">                     ave(dataset$Age, FUN = <span class="keyword">function</span>(x) mean(x, na.rm = <span class="literal">TRUE</span>)),</span><br><span class="line">                     dataset$Age)</span><br><span class="line">dataset$Salary = ifelse(is.na(dataset$Salary),</span><br><span class="line">                        ave(dataset$Salary, FUN = <span class="keyword">function</span>(x) mean(x, na.rm = <span class="literal">TRUE</span>)),</span><br><span class="line">                        dataset$Salary)</span><br><span class="line">                        </span><br><span class="line"><span class="comment"># æ³•äºŒ</span></span><br><span class="line">dataset$Age = ifelse(is.na(dataset$Age),</span><br><span class="line">                     mean(dataset$Age, na.rm = <span class="literal">TRUE</span>),</span><br><span class="line">                     dataset$Age)</span><br><span class="line"></span><br><span class="line">dataset$Salary = ifelse(is.na(dataset$Salary),</span><br><span class="line">                        mean(dataset$Salary, na.rm = <span class="literal">TRUE</span>),</span><br><span class="line">                        dataset$Salary)</span><br></pre></td></tr></table></figure>
<h3 id="2-Categorical-data"><a href="#2-Categorical-data" class="headerlink" title="2. Categorical data"></a>2. Categorical data</h3><h4 id="Python-1"><a href="#Python-1" class="headerlink" title="Python"></a>Python</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Importing the dataset</span></span><br><span class="line">dataset = pd.read_csv(<span class="string">'Data.csv'</span>)</span><br><span class="line">X = dataset.iloc[:, :<span class="number">-1</span>].values</span><br><span class="line">y = dataset.iloc[:, <span class="number">3</span>].values</span><br></pre></td></tr></table></figure>
<p>åŸæ¥çš„Xï¼š</p>
<p><img src="/2019/09/21/Data-Preprocessing/pic1.JPG" alt="pic1"></p>
<h5 id="2-1-LabelEncoder"><a href="#2-1-LabelEncoder" class="headerlink" title="2.1 LabelEncoder"></a>2.1 LabelEncoder</h5><blockquote>
<p>LabelEncoderå®˜æ–¹æ–‡æ¡£<br><a href="https://scikit-learn.org/dev/modules/generated/sklearn.preprocessing.LabelEncoder.html" target="_blank" rel="noopener">https://scikit-learn.org/dev/modules/generated/sklearn.preprocessing.LabelEncoder.html</a></p>
</blockquote>
<p><img src="/2019/09/21/Data-Preprocessing/1605681111923.png" alt="1605681111923"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder</span><br><span class="line">labelencoder_X = LabelEncoder()</span><br><span class="line">X[:, <span class="number">0</span>] = labelencoder_X.fit_transform(X[:, <span class="number">0</span>])</span><br></pre></td></tr></table></figure>
<p>ç»è¿‡LabelEncoderç¼–ç åçš„Xï¼š</p>
<p><img src="/2019/09/21/Data-Preprocessing/pic2.JPG" alt="pic2"></p>
<p>But the model will think that France has lower value than Spain -&gt; thatâ€™s not the case, we have no order here. è§£å†³åŠæ³•ï¼šä½¿ç”¨åé¢ä»‹ç»çš„OneHotEncoderæ–¹æ³•ã€‚å¦‚æœæ˜¯S, M, L of a T-shirtï¼ˆæœ¬èº«æœ‰é¡ºåºï¼‰, ä¸å¿…ä½¿ç”¨OneHotEncoderæ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Encoding the Dependent Variable</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">For the dependent variable, we are only going to use LabelEncoder, </span></span><br><span class="line"><span class="string">because since this is the dpendent variable, the machine learning model will know</span></span><br><span class="line"><span class="string">that it's a category, and that there is no oder between the two</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">labelencoder_y = LabelEncoder()</span><br><span class="line">y = labelencoder_y.fit_transform(y)</span><br></pre></td></tr></table></figure>
<p><img src="/2019/09/21/Data-Preprocessing/result2.JPG" alt="result2"></p>
<h5 id="2-2-factorize"><a href="#2-2-factorize" class="headerlink" title="2.2 factorize"></a>2.2 factorize</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder</span><br><span class="line"></span><br><span class="line">df = DataFrame([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>], columns=[<span class="string">'Col'</span>]) </span><br><span class="line"></span><br><span class="line"><span class="comment"># factorize</span></span><br><span class="line">df[<span class="string">'Fact'</span>] = pd.factorize(df[<span class="string">'Col'</span>])[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># LabelEncoder</span></span><br><span class="line">le = preprocessing.LabelEncoder()</span><br><span class="line">df[<span class="string">'Lab'</span>] = le.fit_transform(df[<span class="string">'Col'</span>])</span><br><span class="line"></span><br><span class="line">print(df)</span><br><span class="line"><span class="comment">#   Col  Fact  Lab</span></span><br><span class="line"><span class="comment"># 0   A     0    0</span></span><br><span class="line"><span class="comment"># 1   B     1    1</span></span><br><span class="line"><span class="comment"># 2   B     1    1</span></span><br><span class="line"><span class="comment"># 3   C     2    2</span></span><br></pre></td></tr></table></figure>
<p>ğŸ‘†å¯ä»¥çœ‹åˆ°factorizeä¸LabelEncoderç»“æœæ˜¯ä¸€æ ·çš„</p>
<h5 id="2-3-OneHotEncoder"><a href="#2-3-OneHotEncoder" class="headerlink" title="2.3 OneHotEncoder"></a>2.3 OneHotEncoder</h5><blockquote>
<p>OneHotEncoderå®˜æ–¹æ–‡æ¡£<br><a href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.OneHotEncoder.html" target="_blank" rel="noopener">https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.OneHotEncoder.html</a></p>
</blockquote>
<p><img src="/2019/09/21/Data-Preprocessing/1605681883031.png" alt="1605681883031"></p>
<p><img src="/2019/09/21/Data-Preprocessing/dummy-encoding.JPG" alt="dummy encoding"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder, OneHotEncoder</span><br><span class="line">labelencoder_X = LabelEncoder()</span><br><span class="line">X[:, <span class="number">0</span>] = labelencoder_X.fit_transform(X[:, <span class="number">0</span>])</span><br><span class="line">onehotencoder = OneHotEncoder(categorical_features = [<span class="number">0</span>])  <span class="comment"># which column you want to encode</span></span><br><span class="line">X = onehotencoder.fit_transform(X).toarray()</span><br></pre></td></tr></table></figure>
<p><img src="/2019/09/21/Data-Preprocessing/result1.JPG" alt="result1"></p>
<p>å¦ä¸€ç§å†™æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> OneHotEncoder</span><br><span class="line"></span><br><span class="line">encoder = OneHotEncoder()</span><br><span class="line">onehotencoder = encoder.fit_transform(X.iloc[:,<span class="number">0</span>])</span><br></pre></td></tr></table></figure>
<h5 id="2-4-get-dummies"><a href="#2-4-get-dummies" class="headerlink" title="2.4 get_dummies()"></a>2.4 get_dummies()</h5><p>onehot encodingçš„å¦ä¸€ç§å®ç°æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">new_col = pd.get_dummies(X[<span class="string">'Age'</span>])</span><br><span class="line"></span><br><span class="line">X_new = pd.concat([X,newcol], axis=<span class="number">1</span>)</span><br><span class="line">X_new.drop(<span class="string">'Age'</span>, axis = <span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h5 id="2-4-LabelEncoder-OnehotEncoder-factorize-get-dummiesçš„åŒºåˆ«"><a href="#2-4-LabelEncoder-OnehotEncoder-factorize-get-dummiesçš„åŒºåˆ«" class="headerlink" title="2.4 LabelEncoder, OnehotEncoder, factorize, get_dummiesçš„åŒºåˆ«"></a>2.4 LabelEncoder, OnehotEncoder, factorize, get_dummiesçš„åŒºåˆ«</h5><blockquote>
<p>å‚è€ƒ <a href="https://medium.com/@vaibhavshukla182/want-to-know-the-diff-among-pd-factorize-a8591eb3347d" target="_blank" rel="noopener">https://medium.com/@vaibhavshukla182/want-to-know-the-diff-among-pd-factorize-a8591eb3347d</a></p>
</blockquote>
<p>è¿™å››ç§ç¼–ç æ–¹å¼å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li>Encode <strong>labels into categorical variables</strong>: Pandas <code>factorize</code> and scikit-learn <code>LabelEncoder</code>. The result will have <strong>1 dimension</strong>(It is important as it could be used while implementing any model). <span style="color:red">factorizeä¸LabelEncoderéƒ½æ˜¯å°†å­—ç¬¦å‹å˜é‡(categorical varirables)ç¼–ç ä¸ºæ•°å€¼å‹1ï¼Œ2ï¼Œ3â€¦ï¼ˆæœ¬æ¥æ˜¯ä¸€ç»´ï¼Œç¼–ç åä¾ç„¶æ˜¯ä¸€ç»´ï¼‰</span></li>
<li>Encode <strong>categorical variable into dummy/indicator (binary) variables</strong>: Pandas <code>get_dummies</code> and scikit-learn <code>OneHotEncoder</code>. The result will have <strong>n dimensions</strong>, one by distinct value of the encoded categorical variable. <span style="color:red">get_dummiesä¸OneHotEnocderéƒ½æ˜¯å°†å­—ç¬¦å‹å˜é‡ç¼–ç ä¸º0ï¼Œ1å“‘å˜é‡ï¼ˆæœ¬æ¥æ˜¯ä¸€ç»´ï¼Œç¼–ç åå˜ä¸ºå¤šç»´ï¼‰</span></li>
</ul>
<p>The main difference between pandas and scikit-learn encoders is that scikit-learn encoders are made to be used in <strong>scikit-learn pipelines</strong> with <code>fit</code> and <code>transform</code> methods. <span style="color:red">sklearnä¸­çš„LabelEnocderï¼ŒOneHotEncoderä¸pandasä¸­çš„factorize, get_dummiesçš„åŒºåˆ«åœ¨äºsklearnçš„ä¸¤ä¸ªæ–¹æ³•å¯ä»¥ä½¿ç”¨fitå’Œtransformï¼ˆåœ¨æµ‹è¯•é›†ä¸Šçš„ç¼–ç åº”ä¾èµ–äºè®­ç»ƒé›†ï¼‰</span></p>
<h5 id="2-5-å®Œæ•´ä»£ç "><a href="#2-5-å®Œæ•´ä»£ç " class="headerlink" title="2.5 å®Œæ•´ä»£ç "></a>2.5 å®Œæ•´ä»£ç </h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Importing the libraries</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># Importing the dataset</span></span><br><span class="line">dataset = pd.read_csv(<span class="string">'Data.csv'</span>)</span><br><span class="line">X = dataset.iloc[:, :<span class="number">-1</span>].values</span><br><span class="line">y = dataset.iloc[:, <span class="number">3</span>].values</span><br><span class="line"></span><br><span class="line"><span class="comment"># Encoding categorical data</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Encoding the Independent Variable</span></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder, OneHotEncoder</span><br><span class="line">labelencoder_X = LabelEncoder()</span><br><span class="line">X[:, <span class="number">0</span>] = labelencoder_X.fit_transform(X[:, <span class="number">0</span>])</span><br><span class="line">onehotencoder = OneHotEncoder(categorical_features = [<span class="number">0</span>])  <span class="comment"># which column you want to encode</span></span><br><span class="line">X = onehotencoder.fit_transform(X).toarray()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Encoding the Dependent Variable</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">For the dependent variable, we are only going to use LabelEncoder, </span></span><br><span class="line"><span class="string">because since this is the dpendent variable, the machine learning model will know</span></span><br><span class="line"><span class="string">that it's a category, and that there is no oder between the two</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">labelencoder_y = LabelEncoder()</span><br><span class="line">y = labelencoder_y.fit_transform(y)</span><br></pre></td></tr></table></figure>
<h4 id="R-1"><a href="#R-1" class="headerlink" title="R"></a>R</h4><figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Encoding categorical data</span></span><br><span class="line">dataset$Country = factor(dataset$Country,</span><br><span class="line">                         levels = c(<span class="string">'France'</span>, <span class="string">'Spain'</span>, <span class="string">'Germany'</span>),</span><br><span class="line">                         labels = c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">dataset$Purchased = factor(dataset$Purchased,</span><br><span class="line">                           levels = c(<span class="string">'No'</span>, <span class="string">'Yes'</span>),</span><br><span class="line">                           labels = c(<span class="number">0</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<p><img src="/2019/09/21/Data-Preprocessing/result3.JPG" alt="result3"></p>
<p><img src="/2019/09/21/Data-Preprocessing/result4.JPG" alt="result4"></p>
<h3 id="3-train-test-split"><a href="#3-train-test-split" class="headerlink" title="3. train_test_split"></a>3. train_test_split</h3><h4 id="Python-2"><a href="#Python-2" class="headerlink" title="Python"></a>Python</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Importing the dataset</span></span><br><span class="line">dataset = pd.read_csv(<span class="string">'Data.csv'</span>)</span><br><span class="line">X = dataset.iloc[:, :<span class="number">-1</span>].values <span class="comment"># :-1 -&gt; take all the column except the last one</span></span><br><span class="line">y = dataset.iloc[:, <span class="number">3</span>].values</span><br><span class="line"></span><br><span class="line"><span class="comment"># Splitting the dataset into the Training set and Test set</span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = <span class="number">0.2</span>, random_state = <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="R-2"><a href="#R-2" class="headerlink" title="R"></a>R</h4><figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Importing the dataset</span></span><br><span class="line">dataset = read.csv(<span class="string">'Data.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Splitting the dataset into the Training set and Test set</span></span><br><span class="line"><span class="comment"># install.packages('caTools')</span></span><br><span class="line"><span class="keyword">library</span>(caTools)</span><br><span class="line">set.seed(<span class="number">123</span>)</span><br><span class="line">split = sample.split(dataset$Purchased, SplitRatio = <span class="number">0.8</span>) <span class="comment"># è¿™é‡Œå–å› å˜é‡</span></span><br><span class="line"><span class="comment"># spiltç»“æœä¸ºTRUE,FALSE, TRUE -&gt; go to training set, FALSE -&gt; go to test set</span></span><br><span class="line">training_set = subset(dataset, split == <span class="literal">TRUE</span>)</span><br><span class="line">test_set = subset(dataset, split == <span class="literal">FALSE</span>)</span><br></pre></td></tr></table></figure>
<h3 id="4-Feature-Scaling"><a href="#4-Feature-Scaling" class="headerlink" title="4. Feature Scaling"></a>4. Feature Scaling</h3><p>Lots of machine learning models are based on Euclidean distance. Since the salary has a much wider range of values, the euclidean distance will be dominated by the salary. </p>
<p>Even if the machine learning models are not based on euclidean distance, we will still need to do feature scaling, because the algorithms will converge much faster, that will be the case for decision trees. ï¼ˆï¼Ÿå†³ç­–æ ‘ä¸éœ€è¦å½’ä¸€åŒ–/æ ‡å‡†åŒ–ï¼Ÿï¼‰</p>
<p><strong><em>Feature Scaling:</em></strong> Putting our variables in the same range (in the same scale),  so that no variable is dominated by the other.</p>
<p><img src="/2019/09/21/Data-Preprocessing/feature-scaling.JPG" alt="feature scaling"></p>
<p><strong><em>Question 1: Do we need to fit and transform dummy variables?</em></strong></p>
<p><img src="/2019/09/21/Data-Preprocessing/show1.JPG" alt="show1"></p>
<p>It depends on the context. Depends on how much you want to keep interpretation in your models. Because if we scale dummy variables, it will be good because everything will be on the same scale, it will be good for our predicitons, but we will lose interpretation of knowing which observation belongs to which country.</p>
<p><strong><em>Qustion 2: Do we need to apply feature scaling to y?</em></strong></p>
<p>we donâ€™t need to do it if it is a classification problem  with categorical dependent variable. But for regression, where the dependent variable will take a huge range of values, we will need to apply feature scaling to y as well.</p>
<blockquote>
<p>ä»¥ä¸‹å†…å®¹å‚è€ƒ <a href="https://www.jianshu.com/p/ba2a64a81c81" target="_blank" rel="noopener">https://www.jianshu.com/p/ba2a64a81c81</a></p>
</blockquote>
<h4 id="4-1-Normalizationå½’ä¸€åŒ–-Min-Max"><a href="#4-1-Normalizationå½’ä¸€åŒ–-Min-Max" class="headerlink" title="4.1 Normalizationå½’ä¸€åŒ– Min-Max"></a>4.1 Normalizationå½’ä¸€åŒ– Min-Max</h4><script type="math/tex; mode=display">
x_{new} = \frac{x_{old}-x_{min}}{x_{max}-x_{min}}</script><p>$x_{new}$å–å€¼èŒƒå›´ï¼š[0,1]</p>
<p>å…¶ä»–å½’ä¸€åŒ–æ–¹æ³•ï¼š</p>
<p><img src="/2019/09/21/Data-Preprocessing/1605753529878.png" alt="1605753529878"></p>
<p><img src="/2019/09/21/Data-Preprocessing/1605753552476.png" alt="1605753552476"></p>
<h4 id="4-2-Standardizationæ ‡å‡†åŒ–-Z-score"><a href="#4-2-Standardizationæ ‡å‡†åŒ–-Z-score" class="headerlink" title="4.2 Standardizationæ ‡å‡†åŒ– Z-score"></a>4.2 Standardizationæ ‡å‡†åŒ– Z-score</h4><script type="math/tex; mode=display">
x_{new} = \frac{X_{old}-\mu}{\sigma}</script><p>The resulting values hover around 0, and typically range between -3 and +3, but can be higher or lower.</p>
<h4 id="4-3-å½’ä¸€åŒ–å’Œæ ‡å‡†åŒ–çš„åŒºåˆ«"><a href="#4-3-å½’ä¸€åŒ–å’Œæ ‡å‡†åŒ–çš„åŒºåˆ«" class="headerlink" title="4.3 å½’ä¸€åŒ–å’Œæ ‡å‡†åŒ–çš„åŒºåˆ«"></a>4.3 å½’ä¸€åŒ–å’Œæ ‡å‡†åŒ–çš„åŒºåˆ«</h4><p><strong>ï¼ˆ1ï¼‰è½¬æ¢åŒºé—´</strong><br>å½’ä¸€åŒ–ï¼ˆNormalizationï¼‰ï¼šæŠŠæ•°æ®è½¬æ¢åˆ°(0,1)æˆ–è€…(-1,1)åŒºé—´çš„æ•°æ®æ˜ å°„æ–¹å¼<br>æ ‡å‡†åŒ–ï¼ˆStandardizationï¼‰ï¼šæŠŠæ•°æ®è½¬æ¢åˆ°å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1çš„æ•°æ®æ˜ å°„æ–¹å¼</p>
<p><strong>ï¼ˆ2ï¼‰æ•°æ®åˆ†å¸ƒ</strong><br>å½’ä¸€åŒ–ï¼šå¯¹æ•°æ®çš„æ•°å€¼èŒƒå›´è¿›è¡Œç‰¹å®šç¼©æ”¾ï¼Œä½†ä¸æ”¹å˜å…¶æ•°æ®åˆ†å¸ƒ</p>
<p><img src="/2019/09/21/Data-Preprocessing/1605683366191.png" alt="1605683366191"></p>
<p>æ ‡å‡†åŒ–ï¼šå¯¹æ•°æ®çš„åˆ†å¸ƒè¿›è¡Œè½¬æ¢ï¼Œä½¿å…¶ç¬¦åˆæŸç§åˆ†å¸ƒï¼ˆå¦‚æ­£æ€åˆ†å¸ƒï¼‰</p>
<p><img src="/2019/09/21/Data-Preprocessing/1605683445278.png" alt="1605683445278"></p>
<h4 id="4-4-ä¸ºä»€ä¹ˆè¦å½’ä¸€åŒ–-æ ‡å‡†åŒ–"><a href="#4-4-ä¸ºä»€ä¹ˆè¦å½’ä¸€åŒ–-æ ‡å‡†åŒ–" class="headerlink" title="4.4 ä¸ºä»€ä¹ˆè¦å½’ä¸€åŒ–/æ ‡å‡†åŒ–"></a>4.4 ä¸ºä»€ä¹ˆè¦å½’ä¸€åŒ–/æ ‡å‡†åŒ–</h4><p><strong>ï¼ˆ1ï¼‰æ¢¯åº¦ä¸‹é™çš„éœ€è¦ï¼ŒåŠ é€Ÿç®—æ³•æ”¶æ•›é€Ÿåº¦</strong><br>åœ¨ä½¿ç”¨æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•æ±‚è§£æœ€ä¼˜åŒ–é—®é¢˜æ—¶ï¼Œå½’ä¸€åŒ–/æ ‡å‡†åŒ–åå¯ä»¥åŠ å¿«æ¢¯åº¦ä¸‹é™çš„æ±‚è§£é€Ÿåº¦ï¼Œå³æå‡æ¨¡å‹çš„æ”¶æ•›é€Ÿåº¦ã€‚</p>
<p><img src="/2019/09/21/Data-Preprocessing/1605752923883.png" alt="1605752923883"></p>
<p>çº¿æ€§å›å½’ã€é€»è¾‘å›å½’ã€ç¥ç»ç½‘ç»œç­‰ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£æœ€ä¼˜å‚æ•°çš„ç®—æ³•ï¼Œè¾“å…¥æ•°æ®éœ€è¦åšå½’ä¸€åŒ–/æ ‡å‡†åŒ–å¤„ç†ï¼Œæå‡æ¨¡å‹æ”¶æ•›é€Ÿåº¦ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰è·ç¦»è®¡ç®—çš„éœ€è¦ï¼Œä¿éšœç®—æ³•å‡†ç¡®åº¦</strong><br>ä¸€äº›ç®—æ³•éœ€è¦è®¡ç®—æ ·æœ¬ä¹‹é—´çš„è·ç¦»ï¼ˆå¦‚æ¬§å¼è·ç¦»ï¼‰ï¼Œä¾‹å¦‚KNNã€kmeansç­‰èšç±»ç®—æ³•ã€‚<strong>å¦‚æœä¸€ä¸ªç‰¹å¾å€¼åŸŸèŒƒå›´éå¸¸å¤§ï¼Œé‚£ä¹ˆè·ç¦»è®¡ç®—å°±ä¸»è¦å–å†³äºè¿™ä¸ªç‰¹å¾</strong>ï¼Œä»è€Œä¸å®é™…æƒ…å†µç›¸æ‚–ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰æ¶ˆé™¤é‡çº²å’Œæ•°é‡çº§å½±å“</strong><br>å„ä¸ªæŒ‡æ ‡ä¹‹é—´ç”±äºè®¡é‡å•ä½å’Œæ•°é‡çº§ä¸å°½ç›¸åŒï¼Œä»è€Œä½¿å¾—å„æŒ‡æ ‡é—´ä¸å…·æœ‰ç»¼åˆæ€§ï¼Œä¸èƒ½ç›´æ¥è¿›è¡Œç»¼åˆåˆ†æï¼Œè¿™æ—¶å°±å¿…é¡»é‡‡ç”¨æŸç§æ–¹æ³•å¯¹å„æŒ‡æ ‡æ•°å€¼è¿›è¡Œæ— é‡çº²åŒ–å¤„ç†ï¼Œè§£å†³å„æŒ‡æ ‡æ•°å€¼ä¸å¯ç»¼åˆæ€§é—®é¢˜ã€‚</p>
<blockquote>
<p>å»é‡çº²æŒ‡çš„æ˜¯å»é™¤æ•°æ®å•ä½ä¹‹é—´çš„ä¸ç»Ÿä¸€ï¼Œå°†æ•°æ®ç»Ÿä¸€å˜æ¢ä¸ºæ— å•ä½ï¼ˆç»Ÿä¸€å•ä½ï¼‰çš„æ•°æ®é›†ã€‚</p>
</blockquote>
<h4 id="4-5-ä»€ä¹ˆæ—¶å€™ç”¨æ ‡å‡†åŒ–ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å½’ä¸€åŒ–ï¼Ÿ"><a href="#4-5-ä»€ä¹ˆæ—¶å€™ç”¨æ ‡å‡†åŒ–ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å½’ä¸€åŒ–ï¼Ÿ" class="headerlink" title="4.5  ä»€ä¹ˆæ—¶å€™ç”¨æ ‡å‡†åŒ–ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å½’ä¸€åŒ–ï¼Ÿ"></a>4.5  ä»€ä¹ˆæ—¶å€™ç”¨æ ‡å‡†åŒ–ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å½’ä¸€åŒ–ï¼Ÿ</h4><p>ï¼ˆ1ï¼‰ä¸€èˆ¬å»ºè®®ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åŒ–ï¼Œåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæ ‡å‡†åŒ–æ˜¯æ›´å¸¸ç”¨çš„æ‰‹æ®µï¼Œå½’ä¸€åŒ–çš„åº”ç”¨åœºæ™¯æ˜¯æœ‰é™çš„ã€‚<br>ï¼ˆ2ï¼‰å¦‚æœæ•°æ®ä¸ç¨³å®šï¼Œå­˜åœ¨æç«¯çš„æœ€å¤§æœ€å°å€¼ï¼Œä¸è¦ç”¨å½’ä¸€åŒ–ã€‚<br>ï¼ˆ3ï¼‰åœ¨åˆ†ç±»ã€èšç±»ç®—æ³•ä¸­ï¼Œéœ€è¦ä½¿ç”¨è·ç¦»æ¥åº¦é‡ç›¸ä¼¼æ€§çš„æ—¶å€™ã€æˆ–è€…ä½¿ç”¨PCAæŠ€æœ¯è¿›è¡Œé™ç»´çš„æ—¶å€™ï¼Œæ ‡å‡†åŒ–(Z-score standardization)è¡¨ç°æ›´å¥½ã€‚<br>ï¼ˆ4ï¼‰åœ¨ä¸æ¶‰åŠè·ç¦»åº¦é‡ã€åæ–¹å·®è®¡ç®—ã€æ•°æ®ä¸ç¬¦åˆæ­£æ€åˆ†å¸ƒçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å½’ä¸€åŒ–æ–¹æ³•ã€‚æ¯”å¦‚å›¾åƒå¤„ç†ä¸­ï¼Œå°†RGBå›¾åƒè½¬æ¢ä¸ºç°åº¦å›¾åƒåå°†å…¶å€¼é™å®šåœ¨[0, 255]çš„èŒƒå›´ã€‚</p>
<h4 id="4-6-ä¸æ˜¯æ‰€æœ‰æ¨¡å‹éƒ½è¦æ±‚è¾“å…¥æ•°æ®ç»è¿‡æ ‡å‡†åŒ–-å½’ä¸€åŒ–å¤„ç†"><a href="#4-6-ä¸æ˜¯æ‰€æœ‰æ¨¡å‹éƒ½è¦æ±‚è¾“å…¥æ•°æ®ç»è¿‡æ ‡å‡†åŒ–-å½’ä¸€åŒ–å¤„ç†" class="headerlink" title="4.6 ä¸æ˜¯æ‰€æœ‰æ¨¡å‹éƒ½è¦æ±‚è¾“å…¥æ•°æ®ç»è¿‡æ ‡å‡†åŒ–/å½’ä¸€åŒ–å¤„ç†"></a>4.6 ä¸æ˜¯æ‰€æœ‰æ¨¡å‹éƒ½è¦æ±‚è¾“å…¥æ•°æ®ç»è¿‡æ ‡å‡†åŒ–/å½’ä¸€åŒ–å¤„ç†</h4><p>ä¸æ˜¯æ‰€æœ‰çš„æ¨¡å‹éƒ½éœ€è¦åšå½’ä¸€çš„ï¼Œæ¯”å¦‚æ¨¡å‹ç®—æ³•é‡Œé¢æ²¡æœ‰å…³äºå¯¹è·ç¦»çš„è¡¡é‡ï¼Œæ²¡æœ‰å…³äºå¯¹å˜é‡é—´æ ‡å‡†å·®çš„è¡¡é‡ã€‚<br>ï¼ˆ1ï¼‰æ¯”å¦‚decision treeå†³ç­–æ ‘ï¼Œç®—æ³•é‡Œé¢æ²¡æœ‰æ¶‰åŠåˆ°ä»»ä½•å’Œè·ç¦»ç­‰æœ‰å…³çš„ï¼Œæ‰€ä»¥åœ¨åšå†³ç­–æ ‘æ¨¡å‹æ—¶ï¼Œé€šå¸¸æ˜¯ä¸éœ€è¦å°†å˜é‡åšæ ‡å‡†åŒ–çš„<br>ï¼ˆ2ï¼‰æ¦‚ç‡æ¨¡å‹ä¸éœ€è¦å½’ä¸€åŒ–ï¼Œå› ä¸ºå®ƒä»¬ä¸å…³å¿ƒå˜é‡çš„å€¼ï¼Œè€Œæ˜¯å…³å¿ƒå˜é‡çš„åˆ†å¸ƒå’Œå˜é‡ä¹‹é—´çš„æ¡ä»¶æ¦‚ç‡ã€‚</p>
<h4 id="4-7-Python"><a href="#4-7-Python" class="headerlink" title="4.7 Python"></a>4.7 Python</h4><p>ä»¥ä¸‹ä»£ç ä¸­scaleäº†dummy variable.</p>
<p>æ ‡å‡†åŒ–ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Importing the dataset</span></span><br><span class="line">dataset = pd.read_csv(<span class="string">'Data.csv'</span>)</span><br><span class="line">X = dataset.iloc[:, :<span class="number">-1</span>].values <span class="comment"># :-1 -&gt; take all the column except the last one</span></span><br><span class="line">y = dataset.iloc[:, <span class="number">3</span>].values</span><br><span class="line"></span><br><span class="line"><span class="comment"># Splitting the dataset into the Training set and Test set</span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = <span class="number">0.2</span>, random_state = <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Feature Scaling</span></span><br><span class="line"><span class="comment"># most of time we don't need to do feature scaling, beacuse feature scaling is a tool</span></span><br><span class="line"><span class="comment"># included most of time in the machine learning libraries</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ‡å‡†åŒ–</span></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line">sc_X = StandardScaler()</span><br><span class="line">X_train_scaled = sc_X.fit_transform(X_train)</span><br><span class="line">X_test_scaled = sc_X.transform(X_test)</span><br></pre></td></tr></table></figure>
<p>Feature scaling on X_test is the same as the feature scaling on the X_train(scaled on the same bases)</p>
<p><img src="/2019/09/21/Data-Preprocessing/result5.JPG" alt="result5"></p>
<p>The result is between -1 and 1.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sc_y = StandardScaler()</span><br><span class="line">y_train_scaled = sc_y.fit_transform(y_train.reshape(<span class="number">-1</span>,<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<p>å½’ä¸€åŒ–MinMaxï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> MinMaxScaler</span><br><span class="line">scaler = MinMaxScaler()</span><br><span class="line">X_train_scaled = scaler.fit_transform(X_train)</span><br><span class="line">X_test_scaled = scaler.transform(X_test)</span><br></pre></td></tr></table></figure>
<h4 id="4-8-R"><a href="#4-8-R" class="headerlink" title="4.8 R"></a>4.8 R</h4><figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Splitting the dataset into the Training set and Test set</span></span><br><span class="line"><span class="comment"># install.packages('caTools')</span></span><br><span class="line"><span class="keyword">library</span>(caTools)</span><br><span class="line">set.seed(<span class="number">123</span>)</span><br><span class="line">split = sample.split(dataset$Purchased, SplitRatio = <span class="number">0.8</span>)</span><br><span class="line"><span class="comment"># spiltç»“æœä¸ºTRUE,FALSE, TRUE -&gt; go to training set, FALSE -&gt; go to test set</span></span><br><span class="line">training_set = subset(dataset, split == <span class="literal">TRUE</span>)</span><br><span class="line">test_set = subset(dataset, split == <span class="literal">FALSE</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Feature Scaling æ ‡å‡†åŒ–</span></span><br><span class="line">training_set = scale(training_set)</span><br><span class="line">test_set = scale(test_set)</span><br></pre></td></tr></table></figure>
<p>è¯­æ³•ï¼š<code>scale(x, center = TRUE, scale = TRUE)</code></p>
<p>Arguments:<br><code>x</code>: a numeric matrix(like object).<br><code>center</code>: either a logical value or a numeric vector of length equal to the number of columns of <code>x</code>.<br><code>scale</code>: either a logical value or a numeric vector of length equal to the number of columns of <code>x</code>.</p>
<p>Details:<br>If <code>center</code> is <code>TRUE</code> then centering is done by subtracting the column means (omitting <code>NA</code>s) of <code>x</code> from their corresponding columns, and if <code>center</code> is <code>FALSE</code>, no centering is done.<br>If <code>scale</code> is <code>TRUE</code> then scaling is done by dividing the (centered) columns of <code>x</code> by their standard deviations if <code>center</code> is <code>TRUE</code>, and the root mean square otherwise. If <code>scale</code> is <code>FALSE</code>, no scaling is done.<br>The root-mean-square for a (possibly centered) column is defined as $\sqrt{sum(x^2)/(n-1)}$, where <em>x</em> is a vector of the non-missing values and <em>n</em> is the number of non-missing values. In the case <code>center = TRUE</code>, this is the same as the standard deviation, but in general it is not. (To scale by the standard deviations without centering, use <code>scale(x, center = FALSE, scale = apply(x, 2, sd, na.rm = TRUE))</code>.)</p>
<p>ä½†ç›´æ¥è¿™æ ·è¿è¡Œä¼šå‡ºé”™ï¼š</p>
<p><img src="/2019/09/21/Data-Preprocessing/result6.JPG" alt="result6"></p>
<p>åŸå› ï¼šå› å­å‹å˜é‡ä¸æ˜¯ numericçš„ã€‚</p>
<p><img src="/2019/09/21/Data-Preprocessing/result7.JPG" alt="result7"></p>
<p>è§£å†³æ–¹æ³•ï¼šWeâ€™re going to exclude categories from the feature scaling, weâ€™re not going to apply feature scaling on those columns.</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">training_set[,<span class="number">2</span>:<span class="number">3</span>] = scale(training_set[,<span class="number">2</span>:<span class="number">3</span>])</span><br><span class="line">test_set[,<span class="number">2</span>:<span class="number">3</span>] = scale(test_set[,<span class="number">2</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>MachineLearningA-Z</tag>
      </tags>
  </entry>
  <entry>
    <title>Python working directory</title>
    <url>/2019/09/17/Python-working-directory/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul>
<li>æ›´æ”¹å½“å‰è·¯å¾„</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.chdir(<span class="string">"E:/machine learning"</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–å½“å‰è·¯å¾„</li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.getcwd()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®æ¡†æ“ä½œ</title>
    <url>/2019/09/02/dataframe-operation/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="1-åˆ›å»ºdataframe"><a href="#1-åˆ›å»ºdataframe" class="headerlink" title="1. åˆ›å»ºdataframe"></a>1. åˆ›å»ºdataframe</h4><ul>
<li>æ³•ä¸€</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dat = pd.DataFrame(&#123;<span class="string">'id'</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], <span class="string">'string'</span>: [<span class="string">'a'</span>, <span class="string">'b'</span>,<span class="string">'c'</span>]&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>æ³•äºŒï¼ˆè‹¥å·²æœ‰ç°æˆçš„listï¼‰</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dat = pd.DataFrame([n_clusters_start, score], columns = [<span class="string">"åˆ†ç±»æ•°"</span>, <span class="string">"å¾—åˆ†"</span>])</span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">exclamationCount = <span class="keyword">lambda</span> text: sum([<span class="number">1</span> <span class="keyword">for</span> x <span class="keyword">in</span> text <span class="keyword">if</span> x == <span class="string">'!'</span>])</span><br><span class="line">EC = tweet.apply(<span class="keyword">lambda</span> x:exclamationCount(x))</span><br><span class="line">EC = EC.tolist()</span><br><span class="line">questionMarkCount = <span class="keyword">lambda</span> text: sum([<span class="number">1</span> <span class="keyword">for</span> x <span class="keyword">in</span> text <span class="keyword">if</span> x == <span class="string">'?'</span>])</span><br><span class="line">QC = tweet.apply(<span class="keyword">lambda</span> x:questionMarkCount(x))</span><br><span class="line">QC = QC.tolist()</span><br><span class="line">dat = pd.DataFrame(&#123;<span class="string">'EC'</span>:EC,<span class="string">'QC'</span>:QC&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">eachLetterCount = <span class="keyword">lambda</span> text,letter: sum([<span class="number">1</span> <span class="keyword">for</span> x <span class="keyword">in</span> text.lower() <span class="keyword">if</span> x == letter])</span><br><span class="line"></span><br><span class="line">FList = []</span><br><span class="line">pattern = <span class="string">'abcdefghijklmnopqrstuvwxyz'</span></span><br><span class="line">j=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> pattern:</span><br><span class="line">  F = tweet.apply(<span class="keyword">lambda</span> x:eachLetterCount(x,i))</span><br><span class="line">  F = F.tolist()</span><br><span class="line">  FList.append(F)</span><br><span class="line"></span><br><span class="line">res = pd.DataFrame(FList)</span><br><span class="line">res = res.transpose()</span><br><span class="line"></span><br><span class="line">pattern = <span class="string">'abcdefghijklmnopqrstuvwxyz'</span></span><br><span class="line">name = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> pattern:</span><br><span class="line">  name.append(<span class="string">"freqOf "</span> + i)</span><br><span class="line">res.columns = name</span><br></pre></td></tr></table></figure>
<p><img src="/2019/09/02/dataframe-operation/outcome.JPG" alt="ç»“æœ"></p>
<a id="more"></a>
<h4 id="2-æ•°æ®æ¡†æ‹¼æ¥"><a href="#2-æ•°æ®æ¡†æ‹¼æ¥" class="headerlink" title="2.  æ•°æ®æ¡†æ‹¼æ¥"></a>2.  æ•°æ®æ¡†æ‹¼æ¥</h4><p><strong>ignore_index = True, é‡æ–°åˆ†é…ç´¢å¼•</strong></p>
<h5 id="2-1-append"><a href="#2-1-append" class="headerlink" title="2.1 append"></a>2.1 append</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = result1.append(result2, ignore_index = <span class="literal">True</span>) <span class="comment"># ç²˜è´´è¡Œ</span></span><br></pre></td></tr></table></figure>
<h5 id="2-2-concat"><a href="#2-2-concat" class="headerlink" title="2.2 concat"></a>2.2 concat</h5><blockquote>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.concat.html" target="_blank" rel="noopener">pandas.concat â€” pandas 1.3.0 documentation (pydata.org)</a></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = pd.concat([result1, result2], ignore_index = <span class="literal">True</span>) <span class="comment"># é»˜è®¤axis = 0, ç²˜è´´è¡Œ </span></span><br><span class="line">RF_eval = pd.concat([RF_eval, eval_raw], axis = <span class="number">1</span>) <span class="comment"># ç²˜è´´åˆ—</span></span><br></pre></td></tr></table></figure>
<h5 id="2-3-merge"><a href="#2-3-merge" class="headerlink" title="2.3 merge"></a>2.3 merge</h5><blockquote>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.merge.html" target="_blank" rel="noopener">pandas.merge â€” pandas 1.3.0 documentation (pydata.org)</a></p>
</blockquote>
<p><img src="/2019/09/02/dataframe-operation/image-20210717004007434.png" alt="image-20210717004007434"></p>
<h4 id="3-åˆ æ‰åˆ—"><a href="#3-åˆ æ‰åˆ—" class="headerlink" title="3. åˆ æ‰åˆ—"></a>3. åˆ æ‰åˆ—</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">RF_eval.drop([<span class="string">'raw'</span>], axis = <span class="number">1</span>, inplace = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="4-åˆ æ‰è¡Œ"><a href="#4-åˆ æ‰è¡Œ" class="headerlink" title="4. åˆ æ‰è¡Œ"></a>4. åˆ æ‰è¡Œ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dat = dat.drop(<span class="number">0</span>) <span class="comment"># åˆ æ‰ç¬¬ä¸€è¡Œ</span></span><br></pre></td></tr></table></figure>
<h4 id="5-æå–è¡Œç´¢å¼•"><a href="#5-æå–è¡Œç´¢å¼•" class="headerlink" title="5. æå–è¡Œç´¢å¼•"></a>5. æå–è¡Œç´¢å¼•</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">index0 = res.index[res[<span class="string">'label'</span>] == <span class="number">0</span>].tolist()</span><br><span class="line">X0 = X[index0] <span class="comment"># Xä¸ºçŸ©é˜µ</span></span><br></pre></td></tr></table></figure>
<h4 id="6-æå–ç‰¹å®šçš„è¡Œ"><a href="#6-æå–ç‰¹å®šçš„è¡Œ" class="headerlink" title="6. æå–ç‰¹å®šçš„è¡Œ"></a>6. æå–ç‰¹å®šçš„è¡Œ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df[df[<span class="string">'id'</span>]=<span class="number">1</span>] <span class="comment"># æå–idä¸º1çš„è¡Œ</span></span><br><span class="line">df[(df[<span class="string">'id'</span>]&gt;=<span class="number">1</span>) &amp;&amp; (df[<span class="string">'id'</span>]&lt;=<span class="number">5</span>)] <span class="comment"># æå–idåœ¨[1,5]ä¹‹é—´çš„è¡Œ</span></span><br><span class="line">df.loc[df[<span class="string">'id'</span>]==<span class="number">1</span>, <span class="string">'age'</span>] <span class="comment">#æå–idä¸º1çš„è¡Œçš„äººçš„å¹´é¾„</span></span><br></pre></td></tr></table></figure>
<h4 id="7-DataFrame-ä¸­-axis-çš„æ¦‚å¿µ"><a href="#7-DataFrame-ä¸­-axis-çš„æ¦‚å¿µ" class="headerlink" title="7. DataFrame ä¸­ axis çš„æ¦‚å¿µ"></a>7. DataFrame ä¸­ axis çš„æ¦‚å¿µ</h4><blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/100064394" target="_blank" rel="noopener">Pandasæ•™ç¨‹ | æ•°æ®å¤„ç†ä¸‰æ¿æ–§â€”â€”mapã€applyã€applymapè¯¦è§£ - çŸ¥ä¹ (zhihu.com)</a></p>
</blockquote>
<p>åœ¨ DataFrame å¯¹è±¡çš„å¤§å¤šæ•°æ–¹æ³•ä¸­ï¼Œéƒ½ä¼šæœ‰ <code>axis</code> è¿™ä¸ªå‚æ•°ï¼Œå®ƒæ§åˆ¶äº†ä½ æŒ‡å®šçš„æ“ä½œæ˜¯æ²¿ç€0è½´è¿˜æ˜¯1è½´è¿›è¡Œã€‚<strong><code>axis=0</code>ä»£è¡¨æ“ä½œå¯¹åˆ—<code>columns</code>è¿›è¡Œï¼Œ<code>axis=1</code>ä»£è¡¨æ“ä½œå¯¹è¡Œ<code>row</code>è¿›è¡Œ</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="/2019/09/02/dataframe-operation/image-20210717170137958.png" alt="image-20210717170137958"></p>
<p><strong><span style="color:red">æ¢è¨€ä¹‹ï¼Œå¦‚æœæƒ³å¢åŠ ä¸€åˆ—ï¼ˆå¦‚æŠŠä¸¤ä¸ªæ•°æ®æ¡†æ¨ªå‘æ‹¼æ¥åœ¨ä¸€èµ·(æ²¿ç€axis=1çš„æ–¹å‘)ï¼‰ï¼Œåˆ™é€‰æ‹©axis=1ï¼Œå¦‚æœæƒ³å¢åŠ ä¸€è¡Œï¼ˆå¦‚å¯¹ä»¥ä¸Šæ•°æ®ï¼Œå¯¹heightæ±‚å’Œ(ç»“æœå°†æ˜¾ç¤ºåœ¨æœ€ä¸‹æ–¹ï¼Œå³â€å¢åŠ äº†ä¸€è¡Œâ€(æ²¿ç€axis=0çš„æ–¹å‘))ï¼‰ï¼Œåˆ™é€‰æ‹©axis=0</span></strong></p>
<p>å‡è®¾ç°åœ¨éœ€è¦å¯¹ä¸Šè¿°æ•°æ®æ¡†ä¸­çš„æ•°å€¼åˆ—åˆ†åˆ«è¿›è¡Œ<strong>å–å¯¹æ•°</strong>å’Œ<strong>æ±‚å’Œ</strong>çš„æ“ä½œï¼Œè¿™æ—¶å¯ä»¥ç”¨<code>apply</code>è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå› ä¸ºæ˜¯å¯¹åˆ—è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®š<code>axis=0</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ²¿ç€0è½´æ±‚å’Œ</span></span><br><span class="line">data[[<span class="string">"height"</span>,<span class="string">"weight"</span>,<span class="string">"age"</span>]].apply(np.sum, axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ²¿ç€0è½´å–å¯¹æ•°</span></span><br><span class="line">data[[<span class="string">"height"</span>,<span class="string">"weight"</span>,<span class="string">"age"</span>]].apply(np.log, axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2019/09/02/dataframe-operation/image-20210717171536577.png" alt="image-20210717171536577"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>è¯»å–ä¸ä¿å­˜csvå’Œtxtæ–‡ä»¶</title>
    <url>/2019/09/02/%E8%AF%BB%E5%8F%96%E4%B8%8E%E4%BF%9D%E5%AD%98csv%E5%92%8Ctxt%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="ä¸€ã€csvæ–‡ä»¶"><a href="#ä¸€ã€csvæ–‡ä»¶" class="headerlink" title="ä¸€ã€csvæ–‡ä»¶"></a>ä¸€ã€csvæ–‡ä»¶</h4><ul>
<li>è¯»å–</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">train = pd.read_csv(<span class="string">"Google_Stock_Price_Train.csv"</span>)</span><br><span class="line">train.head()</span><br></pre></td></tr></table></figure>
<p><img src="/2019/09/02/è¯»å–ä¸ä¿å­˜csvå’Œtxtæ–‡ä»¶/1594120531625.png" alt="1594120531625"></p>
<p>è‹¥æ–‡ä»¶ä¸­æ— åˆ—è¡¨å¤´ï¼Œéœ€è®¾å®šheader = Noneï¼Œå¦åˆ™ç¬¬ä¸€è¡Œä¼šè¢«è¯†åˆ«ä¸ºæ ‡é¢˜ï¼ˆå¦‚ä¸‹å›¾ï¼‰</p>
<p><img src="/2019/09/02/è¯»å–ä¸ä¿å­˜csvå’Œtxtæ–‡ä»¶/1594120744906.png" alt="1594120744906"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.read_csv(<span class="string">"dataset.csv"</span>, header=<span class="literal">None</span>)</span><br><span class="line">data.head()</span><br><span class="line"><span class="comment">#data.columns = ['date','open','high','low','close','volume']</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/09/02/è¯»å–ä¸ä¿å­˜csvå’Œtxtæ–‡ä»¶/1594120675413.png" alt="1594120675413"></p>
<p>æˆ–è€…ç”¨namesæŒ‡å®šéœ€è¦çš„åˆ—è¡¨å¤´</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.read_csv(<span class="string">'dataset.csv'</span>, names =  [<span class="string">'date'</span>,<span class="string">'open'</span>,<span class="string">'high'</span>,<span class="string">'low'</span>,<span class="string">'close'</span>,<span class="string">'volume'</span>])</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¿å­˜</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">save = pd.DataFrame(np_data, columns = [<span class="string">'year'</span>, <span class="string">'month'</span>, <span class="string">'day'</span>])</span><br><span class="line">save.to_csv(<span class="string">'E:\test\modified.csv'</span>, index = <span class="literal">False</span>, header = <span class="literal">False</span>) <span class="comment"># index = False, header = Falseè¡¨ç¤ºä¸ä¿å­˜è¡Œç´¢å¼•å’Œåˆ—æ ‡é¢˜</span></span><br><span class="line"><span class="comment"># save.to_csv("RF_test.csv", index = False)</span></span><br></pre></td></tr></table></figure>
<h4 id="äºŒã€txtæ–‡ä»¶"><a href="#äºŒã€txtæ–‡ä»¶" class="headerlink" title="äºŒã€txtæ–‡ä»¶"></a>äºŒã€txtæ–‡ä»¶</h4><ul>
<li>è¯»å–(æ³¨ï¼šæ³•ä¸€å’Œæ³•äºŒéƒ½æœ‰å¯èƒ½ä¼šé€ æˆè¡Œæ•°ç¼ºå°‘æˆ–æ•°æ®åˆ†å‰²ä¸æ­£ç¡®çš„ç°è±¡ï¼Œå»ºè®®é‡‡ç”¨æ³•ä¸‰)</li>
</ul>
<p>æ³•ä¸€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">train = pd.read_table(<span class="string">'train_tweets.txt'</span>, sep = <span class="string">'\t'</span>, header = <span class="literal">None</span>, encoding = <span class="string">"UTF-8"</span>)</span><br></pre></td></tr></table></figure>
<p>æ³•äºŒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">train = pd.read_fwf(<span class="string">'train_tweets.txt'</span>, sep = <span class="string">'\t'</span>, header = <span class="literal">None</span>, encoding = <span class="string">"UTF-8"</span>)</span><br></pre></td></tr></table></figure>
<p>æ³•ä¸‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">####### example 1 #########</span></span><br><span class="line">ids = []</span><br><span class="line">tweets = []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> open(<span class="string">'/content/Twitter-Authorship/train_tweets.txt'</span>, encoding=<span class="string">'utf-8'</span>):</span><br><span class="line">    (id,tweet) = line.strip().split(<span class="string">'\t'</span>)</span><br><span class="line">    ids.append(id)</span><br><span class="line">    tweets.append(tweet)</span><br><span class="line">train = pd.DataFrame(&#123;<span class="string">"ID"</span>: ids, <span class="string">"tweet"</span>: tweets&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">####### example 2 #########</span></span><br><span class="line">stream = []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> open(<span class="string">'dataset.txt'</span>):</span><br><span class="line">    row = [eval(i) <span class="keyword">for</span> i <span class="keyword">in</span> line.strip().split(<span class="string">' '</span>)]</span><br><span class="line">    stream.append(row)</span><br><span class="line">    </span><br><span class="line">arms = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(stream)):</span><br><span class="line">    temp = stream[i][<span class="number">0</span>]</span><br><span class="line">    arms.append(temp)</span><br><span class="line">    </span><br><span class="line">rewards = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(stream)):</span><br><span class="line">    temp = stream[i][<span class="number">1</span>]</span><br><span class="line">    rewards.append(temp)</span><br><span class="line">    </span><br><span class="line">contexts = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(stream)):</span><br><span class="line">    contexts.append(stream[i][<span class="number">2</span>:])</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¿å­˜(æ–¹æ³•åŒcsv)</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">RF_test.to_csv(<span class="string">"RF_test.txt"</span>, sep = <span class="string">'\t'</span>, index = <span class="literal">False</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownè¯­æ³•</title>
    <url>/2019/06/27/Markdown%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>(æœ¬æ–‡å‚è€ƒ<a href="https://www.markdowntutorial.com/" target="_blank" rel="noopener">Markdown Tutorial</a>)</p>
<h4 id="1-åŠ ç²—ä¸æ–œä½“"><a href="#1-åŠ ç²—ä¸æ–œä½“" class="headerlink" title="1. åŠ ç²—ä¸æ–œä½“"></a>1. åŠ ç²—ä¸æ–œä½“</h4><ul>
<li>æ–œä½“ï¼šåœ¨æ–‡æœ¬ä¸¤ä¾§åŠ ä¸Šä¸€ä¸ªæ˜Ÿå·æˆ–ä¸€ä¸ªä¸‹åˆ’çº¿ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">_unknown_æˆ–*unkown*</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š_unknown_</p>
<ul>
<li>åŠ ç²—ï¼šåœ¨æ–‡æœ¬ä¸¤ä¾§åŠ ä¸Šä¸¤ä¸ªæ˜Ÿå·æˆ–ä¸¤ä¸ªä¸‹åˆ’çº¿, ä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">__unknown__æˆ–**unknown**</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š<strong>unknown</strong></p>
<ul>
<li>æ³¨ï¼šæ–œä½“å’ŒåŠ ç²—å¯ä»¥ä¸€èµ·ç”¨ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">**_of course_**</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š<strong>_of course_</strong></p>
<h4 id="2-æ ‡é¢˜-Headers"><a href="#2-æ ‡é¢˜-Headers" class="headerlink" title="2.æ ‡é¢˜(Headers)"></a>2.æ ‡é¢˜(Headers)</h4><p>åœ¨å‰é¢åŠ #å·, ä¸€å…±æœ‰å…­çº§æ ‡é¢˜ã€‚ä¸€çº§æ ‡é¢˜ä¸ºåœ¨å‰é¢åŠ ä¸€ä¸ª#å·ï¼ˆ# ä¸€çº§æ ‡é¢˜ï¼‰ï¼ŒäºŒçº§æ ‡é¢˜ä¸ºåœ¨å‰é¢åŠ ä¸¤ä¸ª#å·ï¼ˆ## äºŒçº§æ ‡é¢˜ï¼‰ã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p>
<blockquote>
<h1 id="Header-one"><a href="#Header-one" class="headerlink" title="Header one"></a>Header one</h1><h2 id="Header-two"><a href="#Header-two" class="headerlink" title="Header two"></a>Header two</h2><h3 id="Header-three"><a href="#Header-three" class="headerlink" title="Header three"></a>Header three</h3><h4 id="Header-four"><a href="#Header-four" class="headerlink" title="Header four"></a>Header four</h4><h5 id="Header-five"><a href="#Header-five" class="headerlink" title="Header five"></a>Header five</h5><h6 id="Header-six"><a href="#Header-six" class="headerlink" title="Header six"></a>Header six</h6><p>plain text</p>
</blockquote>
<p>æ³¨ï¼š#å·ä¸æ–‡æœ¬ä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚</p>
<h4 id="3-é“¾æ¥"><a href="#3-é“¾æ¥" class="headerlink" title="3.é“¾æ¥"></a>3.é“¾æ¥</h4><ul>
<li><p>inline link</p>
<p>è¯­æ³•å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[Visit GitHub!](www.github.com)</span><br></pre></td></tr></table></figure>
<p><a href="www.github.com">Visit GitHub!</a></p>
<p>å†æ¯”å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[Yo<span class="string">u're **really, really** going to see this.](www.dailykitten.com)</span></span><br></pre></td></tr></table></figure>
<p><a href="www.dailykitten.com">Youâ€™re <strong>really, really</strong> going to see this.</a></p>
<ul>
<li>reference link</li>
</ul>
<p>è¯­æ³•å¦‚ä¸‹ï¼š  </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Do you want to [see something fun][a fun place]?  </span><br><span class="line"></span><br><span class="line">Well, I have [a website <span class="keyword">for</span> you][another fun place]!</span><br><span class="line"></span><br><span class="line">[a fun place]: www.zombo.com</span><br><span class="line">    </span><br><span class="line">[another fun place]: www.stumbleupon.com</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š<br>Do you want to <a href="www.zombo.com">see something fun</a>?  </p>
<p>Well, I have <a href="www.stumbleupon.com">a website for you</a>!</p>
<p>ä¸€èˆ¬å¯å°†é“¾æ¥åœ°å€å†™åœ¨Markdownæ–‡ä»¶çš„æœ€åã€‚ä½¿ç”¨refrenceçš„å¥½å¤„æ˜¯å¦‚æœæœ‰è®¸å¤šé“¾æ¥éƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªåœ°æ–¹ï¼Œé‚£ä¹ˆéœ€è¦æ›´æ”¹çš„æ—¶å€™åªéœ€è¦ä¿®æ”¹ä¸€æ¬¡å°±è¡Œäº†ã€‚</p>
<h4 id="4-å›¾ç‰‡"><a href="#4-å›¾ç‰‡" class="headerlink" title="4.å›¾ç‰‡"></a>4.å›¾ç‰‡</h4><ul>
<li>inline link</li>
</ul>
<p>æ’å…¥å›¾ç‰‡å’Œæ’å…¥é“¾æ¥ç±»ä¼¼ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">![A pretty tiger](https://upload.wikimedia.org/wikipedia/commons/<span class="number">5</span>/<span class="number">56</span>/Tiger<span class="number">.50</span>.jpg)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/5/56/Tiger.50.jpg" alt="A pretty tiger"></p>
<p>æ³¨ï¼š</p>
<ol>
<li>[ ]ä¸­çš„å†…å®¹å¯ä»¥ç©ºç€ï¼Œå½“ç½‘ç»œä¸å¥½ï¼Œå›¾ç‰‡æ— æ³•æ˜¾ç¤ºæ—¶ï¼ˆæˆ–æŸäº›å…¶å®ƒåŸå› ï¼‰ä¼šæ˜¾ç¤º[ ]ä¸­çš„æ–‡å­—</li>
<li>!å’Œ[ ]ä¹‹é—´ä¸è¦åŠ ç©ºæ ¼</li>
</ol>
<ul>
<li>reference link</li>
</ul>
<p>è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">![Black cat][Black]</span><br><span class="line"></span><br><span class="line">![Orange cat][Orange]</span><br><span class="line"></span><br><span class="line">[Black]: https://upload.wikimedia.org/wikipedia/commons/a/a3/<span class="number">81</span>_INF_DIV_SSI.jpg  </span><br><span class="line">        </span><br><span class="line">[Orange]:http://icons.iconarchive.com/icons/google/noto-emoji-animals-nature/<span class="number">256</span>/<span class="number">22221</span>-cat-icon.png</span><br></pre></td></tr></table></figure>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/a/a3/81_INF_DIV_SSI.jpg" alt="Black cat"></p>
<p><img src="http://icons.iconarchive.com/icons/google/noto-emoji-animals-nature/256/22221-cat-icon.png" alt="Orange cat"></p>
<h4 id="5-Blockquotes"><a href="#5-Blockquotes" class="headerlink" title="5.Blockquotes"></a>5.Blockquotes</h4><p>å½“æƒ³å¼•ç”¨ä¸€æ®µè¯å¹¶è®©è¯»è€…æ³¨æ„åˆ°æ—¶ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼šåœ¨æ–‡æœ¬å‰åŠ ä¸Šâ€&gt;â€</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt; <span class="string">"In a few moments he was barefoot, his stockings folded in his pockets and his</span></span><br><span class="line"><span class="string">  canvas shoes dangling by their knotted laces over his shoulders and, picking a</span></span><br><span class="line"><span class="string">  pointed salt-eaten stick out of the jetsam among the rocks, he clambered down</span></span><br><span class="line"><span class="string">  the slope of the breakwater."</span></span><br></pre></td></tr></table></figure>
<p> æ•ˆæœå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>â€œIn a few moments he was barefoot, his stockings folded in his pockets and his<br>  canvas shoes dangling by their knotted laces over his shoulders and, picking a<br>  pointed salt-eaten stick out of the jetsam among the rocks, he clambered down<br>  the slope of the breakwater.â€</p>
</blockquote>
<p>å½“å¼•ç”¨å¤šæ®µè¯æ—¶ï¼Œå¯ä»¥åœ¨æ¯ä¸€éƒ¨åˆ†å‰åŠ ä¸Šâ€&gt;â€ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt; His words seemed to have struck some deep chord <span class="keyword">in</span> his own nature. Had he spoken</span><br><span class="line">of himself, of himself as he was or wished to be? Stephen watched his face for some</span><br><span class="line">moments <span class="keyword">in</span> silence. A cold sadness was there. He had spoken of himself, of his own</span><br><span class="line">loneliness which he feared.  </span><br><span class="line">&gt;  </span><br><span class="line">&gt; â€”Of whom are you speaking? Stephen asked at length.  </span><br><span class="line">&gt;  </span><br><span class="line">&gt; Cranly did <span class="keyword">not</span> answer.</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>His words seemed to have struck some deep chord in his own nature. Had he spoken<br>of himself, of himself as he was or wished to be? Stephen watched his face for some<br>moments in silence. A cold sadness was there. He had spoken of himself, of his own<br>loneliness which he feared.</p>
<p>â€”Of whom are you speaking? Stephen asked at length.</p>
<p>Cranly did not answer.</p>
</blockquote>
<p>Note: even blank lines must contain the caret character. This ensures that the entire blockquote is grouped together.</p>
<h4 id="6-åˆ—è¡¨-Lists"><a href="#6-åˆ—è¡¨-Lists" class="headerlink" title="6.åˆ—è¡¨(Lists)"></a>6.åˆ—è¡¨(Lists)</h4><h5 id="unordered-list"><a href="#unordered-list" class="headerlink" title="* unordered list"></a>* unordered list</h5><p>åœ¨å‰é¢åŠ æ˜Ÿå·ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">* Milk  </span><br><span class="line">* Eggs  </span><br><span class="line">* Salmon  </span><br><span class="line">* Butter</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ul>
<li>Milk</li>
<li>Eggs</li>
<li>Salmon</li>
<li>Butter</li>
</ul>
<h5 id="odered-list"><a href="#odered-list" class="headerlink" title="* odered list"></a>* odered list</h5><p>åœ¨å‰é¢åŠ æ•°å­—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> Crack three eggs over a bowl</span><br><span class="line"><span class="number">2.</span> Pour a gallon of milk into the bowl</span><br><span class="line"><span class="number">3.</span> Rub the salmon vigorously <span class="keyword">with</span> butter</span><br><span class="line"><span class="number">4.</span> Drop the salmon into the egg-milk bowl</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ol>
<li>Crack three eggs over a bowl</li>
<li>Pour a gallon of milk into the bowl</li>
<li>Rub the salmon vigorously with butter</li>
<li>Drop the salmon into the egg-milk bowl</li>
</ol>
<h5 id="nest-one-list-within-another"><a href="#nest-one-list-within-another" class="headerlink" title="* nest one list within another"></a>* nest one list within another</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">* Tintin</span><br><span class="line"> * A reporter</span><br><span class="line"> * Has poofy orange hair</span><br><span class="line"> * Friends <span class="keyword">with</span> the world<span class="string">'s most awesome dog</span></span><br><span class="line"><span class="string">* Haddock</span></span><br><span class="line"><span class="string"> * A sea captain</span></span><br><span class="line"><span class="string"> * Has a fantastic beard</span></span><br><span class="line"><span class="string"> * Loves whiskey</span></span><br><span class="line"><span class="string">   * Possibly also scotch?</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Tintin<ul>
<li>A reporter</li>
<li>Has poofy orange hair</li>
<li>Friends with the worldâ€™s most awesome dog</li>
</ul>
</li>
<li>Haddock<ul>
<li>A sea captain</li>
<li>Has a fantastic beard</li>
<li>Loves whiskey<ul>
<li>Possibly also scotch?</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>å»ºè®®æœ€å¤šå»ºä¸‰å±‚ï¼Œå¦åˆ™æ–‡ç« ç»“æ„ä¼šå˜å¾—å¤ªæ··ä¹±</p>
<h4 id="7-æ®µè½"><a href="#7-æ®µè½" class="headerlink" title="7.æ®µè½"></a>7.æ®µè½</h4><ul>
<li>hard break</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Do I contradict myself?</span><br><span class="line"></span><br><span class="line">Very well then I contradict myself,</span><br><span class="line"></span><br><span class="line">(I am large, I contain multitudes.)</span><br></pre></td></tr></table></figure>
<p>æƒ³æ¢è¡Œæ—¶ï¼Œç©ºä¸€è¡Œã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p>Do I contradict myself?</p>
<p>Very well then I contradict myself,</p>
<p>(I am large, I contain multitudes.)</p>
<ul>
<li>soft break</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Do I contradict myself?Â·Â·</span><br><span class="line">Very well then I contradict myself,Â·Â·</span><br><span class="line">(I am large, I contain multitudes.)</span><br></pre></td></tr></table></figure>
<p>æƒ³æ¢è¡Œæ—¶ï¼Œæ‰“ä¸¤ä¸ªç©ºæ ¼ã€‚ä¸Šé¢æ¯ä¸ªç‚¹ ( Â· ) ä»£è¡¨ä¸€ä¸ªç©ºæ ¼ã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p>Do I contradict myself?<br>Very well then I contradict myself,<br>(I am large, I contain multitudes.)</p>
<h4 id="8-LaTeX-æ•°å­¦è¡¨è¾¾å¼"><a href="#8-LaTeX-æ•°å­¦è¡¨è¾¾å¼" class="headerlink" title="8. LaTeX æ•°å­¦è¡¨è¾¾å¼"></a>8. LaTeX æ•°å­¦è¡¨è¾¾å¼</h4><p>åœ¨Markdownæ–‡æ¡£ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<a href="https://www.latex-project.org/" target="_blank" rel="noopener">LaTex</a>ç¬¦å·åˆ›å»ºæ•°å­¦è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">y = \frac&#123;a&#125;&#123;b+c&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure>
<script type="math/tex; mode=display">
y = \frac{a}{b+c}</script><p>(hexoä¸­å…¬å¼æ˜¾ç¤ºé—®é¢˜ï¼šåœ¨æ–‡ç« çš„Front-matterä¸­åŠ ä¸Šï¼šmathjax: true)</p>
<h5 id="8-1-LaTeX-ä¸­-argmin-argmax-ä¸‹æ ‡ä½¿ç”¨æ–¹æ³•"><a href="#8-1-LaTeX-ä¸­-argmin-argmax-ä¸‹æ ‡ä½¿ç”¨æ–¹æ³•" class="headerlink" title="8.1 LaTeX ä¸­  argmin, argmax ä¸‹æ ‡ä½¿ç”¨æ–¹æ³•"></a>8.1 LaTeX ä¸­  argmin, argmax ä¸‹æ ‡ä½¿ç”¨æ–¹æ³•</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">\mathop&#123;\arg \min&#125;_x f(x)</span><br><span class="line">$$</span><br></pre></td></tr></table></figure>
<script type="math/tex; mode=display">
\mathop{\arg\min}_x f(x)</script><p>æˆ–ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">\mathop&#123;\arg \min_x&#125; f(x)</span><br><span class="line">$$</span><br></pre></td></tr></table></figure>
<script type="math/tex; mode=display">
\mathop{\arg \min_x} f(x)</script><h4 id="9-Typoraä¸­ï¼Œå­—ä½“é¢œè‰²"><a href="#9-Typoraä¸­ï¼Œå­—ä½“é¢œè‰²" class="headerlink" title="9. Typoraä¸­ï¼Œå­—ä½“é¢œè‰²"></a>9. Typoraä¸­ï¼Œå­—ä½“é¢œè‰²</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;span style=&apos;color:red&apos;&gt;This is red&lt;/span&gt;</span><br><span class="line">&lt;span style=&quot;background:yellow&quot;&gt;é«˜äº®é»„è‰²&lt;/span&gt;</span><br></pre></td></tr></table></figure>
<p><span style="color:red">This is red</span></p>
<p><span style="background:yellow">é«˜äº®é»„è‰²</span></p>
<h4 id="10-è¡¨æ ¼å®½åº¦è°ƒæ•´"><a href="#10-è¡¨æ ¼å®½åº¦è°ƒæ•´" class="headerlink" title="10.è¡¨æ ¼å®½åº¦è°ƒæ•´"></a>10.è¡¨æ ¼å®½åº¦è°ƒæ•´</h4><blockquote>
<p>å‚è€ƒ <a href="https://blog.csdn.net/maxsky/article/details/54666998" target="_blank" rel="noopener">https://blog.csdn.net/maxsky/article/details/54666998</a></p>
</blockquote>
<p>åœ¨åŸè¡¨æ ¼å‰æ·»åŠ  CSS ä»£ç ï¼Œç±»ä¼¼å¦‚ä¸‹ï¼ˆåœ¨Typoraä¸­å¯ç”¨æºä»£ç æ¨¡å¼ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">table th:first-of-type &#123;</span><br><span class="line">    width: 220px;</span><br><span class="line">&#125;</span><br><span class="line">table th:nth-of-type(2) &#123;</span><br><span class="line">	width: 70px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¸‹æ–¹æ˜¯è¡¨æ ¼çš„ Markdown è¯­æ³• --&gt;</span><br><span class="line">åç§°|å€¼|å¤‡æ³¨</span><br><span class="line">---|---|---</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œéœ€è¦ä¸€ç‚¹ CSS çŸ¥è¯†ï¼Œé€‰æ‹©å™¨çš„é—®é¢˜ï¼Œé¦–å…ˆ <code>&lt;th&gt;</code> å­˜åœ¨äº <code>&lt;table&gt;</code> ä¸­ï¼›å…¶æ¬¡ <code>th:first-of-type</code> çš„æ„æ€æ˜¯æ¯ä¸ª <code>&lt;th&gt;</code> ä¸ºå…¶çˆ¶çº§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿™é‡ŒæŒ‡çš„å°±æ˜¯å›´ç»•ç€ã€åç§°ã€‘çš„ <code>&lt;th&gt;</code>ã€‚åŒç†ç¬¬äºŒã€ä¸‰ä¸ªä½¿ç”¨ <code>th:nth-of-type(2)</code>ã€<code>th:nth-of-type(3)</code> å°±å¯ä»¥äº†ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä¸Šè¿°çš„ <code>th:first-of-type</code> ç­‰ä»·äº <code>th:nth-of-type(1)</code>ã€‚</p>
]]></content>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Jupyter Notebookä¸­çš„å¿«æ·é”®</title>
    <url>/2019/06/27/Jupyter-Notebook%E4%B8%AD%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul>
<li>shift+enter: è¿è¡Œä»£ç å—</li>
<li>shift+tab: show the documentation pop up for the method</li>
<li>Esc+m: markdownè¯­å¥</li>
</ul>
]]></content>
      <categories>
        <category>Jupyter Notebook</category>
      </categories>
      <tags>
        <tag>Jupyter Notebook</tag>
      </tags>
  </entry>
  <entry>
    <title>Advanced Python Types</title>
    <url>/2019/06/27/Advanced-Python-Types/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="1-List"><a href="#1-List" class="headerlink" title="1. List"></a>1. List</h3><h4 id="1-1-å¸¸è§æ“ä½œ"><a href="#1-1-å¸¸è§æ“ä½œ" class="headerlink" title="1.1 å¸¸è§æ“ä½œ"></a>1.1 å¸¸è§æ“ä½œ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;x = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">&gt;&gt;&gt;print(x)</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡ç‰‡æ“ä½œ</span></span><br><span class="line">&gt;&gt;&gt;x[:<span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&gt;&gt;&gt;x[<span class="number">3</span>:]</span><br><span class="line">[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">&gt;&gt;&gt;x[<span class="number">-2</span>:]</span><br><span class="line">[<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># extend</span></span><br><span class="line">&gt;&gt;&gt;x.extend([<span class="number">7</span>,<span class="number">8</span>])</span><br><span class="line">&gt;&gt;&gt;x</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># append</span></span><br><span class="line">&gt;&gt;x.append(<span class="number">9</span>)</span><br><span class="line">&gt;&gt;&gt;x</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line"></span><br><span class="line">&gt;&gt;y=[<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]</span><br><span class="line">&gt;&gt;&gt;listOfLists=[x,y]</span><br><span class="line">&gt;&gt;&gt;listiOfLists</span><br><span class="line">[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>],[<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]]</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="1-2-append-ä¸-extend-æ–¹æ³•çš„åŒºåˆ«"><a href="#1-2-append-ä¸-extend-æ–¹æ³•çš„åŒºåˆ«" class="headerlink" title="1.2 append() ä¸ extend() æ–¹æ³•çš„åŒºåˆ«"></a>1.2 append() ä¸ extend() æ–¹æ³•çš„åŒºåˆ«</h4><p>1.append() æ–¹æ³•ç”¨äºåœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ æ–°çš„å¯¹è±¡ã€‚è¯­æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">list1.append(obj) # å‘åˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªå¯¹è±¡object</span><br></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•æ— è¿”å›å€¼ï¼Œç›´æ¥ä¿®æ”¹åŸåˆ—è¡¨ã€‚</p>
<p><strong>ä½¿ç”¨<code>append()</code> çš„æ—¶å€™ï¼Œæ˜¯å°†objçœ‹ä½œä¸€ä¸ªå¯¹è±¡ï¼Œæ•´ä½“æ‰“åŒ…æ·»åŠ åˆ°list1å¯¹è±¡ä¸­ã€‚</strong></p>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">list1.append([<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">print(list1)</span><br><span class="line"><span class="comment"># [1, 2, 3, [4, 5]]</span></span><br></pre></td></tr></table></figure>
<p>2.extend() å‡½æ•°ç”¨äºåœ¨åˆ—è¡¨æœ«å°¾ä¸€æ¬¡æ€§è¿½åŠ å¦ä¸€ä¸ªåºåˆ—ä¸­çš„å¤šä¸ªå€¼ï¼ˆç”¨æ–°åˆ—è¡¨æ‰©å±•åŸæ¥çš„åˆ—è¡¨ï¼‰ã€‚è¯­æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list1.extend(seq) <span class="comment"># æŠŠä¸€ä¸ªåºåˆ—seqçš„å†…å®¹æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span><br></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œç›´æ¥ä¿®æ”¹åŸåˆ—è¡¨ã€‚</p>
<p><strong><code>extend()</code>æ–¹æ³•æ¥å—ä¸€ä¸ªåºåˆ—ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†è¯¥åºåˆ—çš„æ¯ä¸ªå…ƒç´ éƒ½æ·»åŠ åˆ°åŸæœ‰çš„åˆ—è¡¨ä¸­ã€‚</strong></p>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">list1.extend([<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">print(list1)</span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t1 = (<span class="number">5</span>, <span class="number">15</span>, <span class="number">25</span>, <span class="number">50</span>)</span><br><span class="line">s1 = <span class="string">"Apple"</span> </span><br><span class="line"></span><br><span class="line">l1 = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line">l1.extend(t1)</span><br><span class="line">print(l1)</span><br><span class="line"><span class="comment"># [[1, 2, 3, 4], 5, 15, 25, 50]</span></span><br><span class="line"></span><br><span class="line">l1 = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line">l1.extend((s1,t1))</span><br><span class="line">print(l1)</span><br><span class="line"><span class="comment"># [[1, 2, 3, 4], 'Apple', (5, 15, 25, 50)]</span></span><br></pre></td></tr></table></figure>
<h4 id="1-3-ç»™Listæ·»åŠ å…ƒç´ "><a href="#1-3-ç»™Listæ·»åŠ å…ƒç´ " class="headerlink" title="1.3 ç»™Listæ·»åŠ å…ƒç´ "></a>1.3 ç»™Listæ·»åŠ å…ƒç´ </h4><p>1.å¾€åæ·»åŠ å…ƒç´ append</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">arr.append(<span class="number">3</span>)</span><br><span class="line">print(arr)</span><br><span class="line"><span class="comment"># [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<p>2.å¾€å‰æ·»åŠ å…ƒç´ ï¼Œæˆ–åœ¨æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´  insert</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = []</span><br><span class="line">num = <span class="number">345</span></span><br><span class="line"><span class="keyword">while</span> num:</span><br><span class="line">    arr.insert(<span class="number">0</span>,num%<span class="number">10</span>)</span><br><span class="line">    num = num//<span class="number">10</span></span><br><span class="line">	</span><br><span class="line">print(arr)</span><br><span class="line"><span class="comment"># [3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<h4 id="1-4-Listçš„æ‹¼æ¥"><a href="#1-4-Listçš„æ‹¼æ¥" class="headerlink" title="1.4 Listçš„æ‹¼æ¥"></a>1.4 Listçš„æ‹¼æ¥</h4><p>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ â€œ+â€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr1 = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">arr2 = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">arr3 = arr1 + arr2</span><br><span class="line">print(arr3)</span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•äºŒï¼šä½¿ç”¨extend()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr1 = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">arr2 = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">arr1.extend(arr2)</span><br><span class="line">print(arr1)</span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<h4 id="1-5-æ’åº"><a href="#1-5-æ’åº" class="headerlink" title="1.5 æ’åº"></a>1.5 æ’åº</h4><p>æ³•ä¸€ï¼šsort()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line">x.sort()</span><br><span class="line">x</span><br><span class="line"><span class="comment"># [1,2,3]</span></span><br><span class="line"></span><br><span class="line">x.sort(reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># [3,2,1]</span></span><br></pre></td></tr></table></figure>
<p>sort()ä¼šæ”¹å˜åŸåˆ—è¡¨</p>
<p>æ³•äºŒï¼šsorted()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>]</span><br><span class="line">y = sorted(x)</span><br><span class="line"></span><br><span class="line">print(x)</span><br><span class="line">print(y)</span><br><span class="line"><span class="comment"># [3, 4, 1]</span></span><br><span class="line"><span class="comment"># [1, 3, 4]</span></span><br></pre></td></tr></table></figure>
<p>sorted()ä¸ä¼šæ”¹å˜åŸåˆ—è¡¨</p>
<p>æ›´å¤šå…³äºsortçš„å†…å®¹è§ <a href="https://qypx.github.io/2020/10/30/Pythonä¸­çš„reverse-reversed-sort-sorted/">Pythonä¸­çš„reverse, reversed, sort, sorted</a></p>
<h4 id="1-6-åˆ—è¡¨-count-æ–¹æ³•"><a href="#1-6-åˆ—è¡¨-count-æ–¹æ³•" class="headerlink" title="1.6 åˆ—è¡¨ count() æ–¹æ³•"></a>1.6 åˆ—è¡¨ count() æ–¹æ³•</h4><p>count() æ–¹æ³•è¿”å›å…·æœ‰æŒ‡å®šå€¼çš„å…ƒç´ æ•°é‡ã€‚è¯­æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">list.count(value)</span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">points = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">x = points.count(<span class="number">9</span>)</span><br><span class="line">print(x)</span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>
<h4 id="1-7-all-æ–¹æ³•"><a href="#1-7-all-æ–¹æ³•" class="headerlink" title="1.7 all() æ–¹æ³•"></a>1.7 all() æ–¹æ³•</h4><p>all() å‡½æ•°ç”¨äºåˆ¤æ–­ç»™å®šçš„å¯è¿­ä»£å‚æ•° iterable ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ä¸º TRUEï¼Œå¦‚æœæ˜¯è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚å…ƒç´ é™¤äº†æ˜¯ 0ã€ç©ºã€Noneã€False å¤–éƒ½ç®— Trueã€‚è¯­æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">all(iterable)</span><br></pre></td></tr></table></figure>
<p>iterable â€” å…ƒç»„æˆ–åˆ—è¡¨ã€‚</p>
<p>ä¾‹ï¼š<br>Define a list with elements 11, 25, 43, 68, 76 and 94. Write code that confirms the list of numbers are over 10.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">11</span>, <span class="number">25</span>, <span class="number">43</span>, <span class="number">68</span>, <span class="number">76</span> , <span class="number">94</span>]</span><br><span class="line"><span class="keyword">if</span> all([x&gt;<span class="number">10</span> <span class="keyword">for</span> x <span class="keyword">in</span> numbers]):</span><br><span class="line">    print(<span class="string">"All numbers are over 10"</span>)</span><br><span class="line"><span class="comment"># All numbers are over 10</span></span><br></pre></td></tr></table></figure>
<h4 id="1-8-åˆ›å»ºä¸€ä¸ª0-99çš„æ•°åˆ—"><a href="#1-8-åˆ›å»ºä¸€ä¸ª0-99çš„æ•°åˆ—" class="headerlink" title="1.8 åˆ›å»ºä¸€ä¸ª0-99çš„æ•°åˆ—"></a>1.8 åˆ›å»ºä¸€ä¸ª0-99çš„æ•°åˆ—</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = list(range(<span class="number">100</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, ..., <span class="number">99</span>]</span><br></pre></td></tr></table></figure>
<h4 id="1-9-åˆ—è¡¨ç”Ÿæˆå¼"><a href="#1-9-åˆ—è¡¨ç”Ÿæˆå¼" class="headerlink" title="1.9 åˆ—è¡¨ç”Ÿæˆå¼"></a>1.9 åˆ—è¡¨ç”Ÿæˆå¼</h4><blockquote>
<p>å‚è€ƒ <a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017317609699776" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/1016959663602400/1017317609699776</a></p>
</blockquote>
<p>å…³äºåˆ—è¡¨ç”Ÿæˆå¼ä¸­çš„ <code>if ... else</code> çš„ç”¨æ³•ï¼š</p>
<p>ä¾‹ï¼šè¾“å‡ºå¶æ•°<br><span style="color:red">åªéœ€è¦ if æ—¶çš„æ­£ç¡®å†™æ³•ï¼š</span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">11</span>) <span class="keyword">if</span> x%<span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>]</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œä¸èƒ½åœ¨æœ€åçš„ <code>if</code> åŠ ä¸Š <code>else</code>ï¼š</p>
<p><img src="/2019/06/27/Advanced-Python-Types/1605269674893.png" alt="1605269674893"></p>
<p>è¿™æ˜¯å› ä¸ºè·Ÿåœ¨ <code>for</code> åé¢çš„ <code>if</code> æ˜¯ä¸€ä¸ªç­›é€‰æ¡ä»¶ï¼Œä¸èƒ½å¸¦ <code>else</code>ï¼Œå¦åˆ™å¦‚ä½•ç­›é€‰ï¼Ÿ</p>
<p>å¦å¤–ï¼Œå¦‚æœæŠŠ <code>if</code> å†™åœ¨ <code>for</code> å‰é¢ï¼Œå¿…é¡»åŠ  <code>else</code>ï¼Œå¦åˆ™æŠ¥é”™ï¼š</p>
<p><img src="/2019/06/27/Advanced-Python-Types/1605269903917.png" alt="1605269903917"></p>
<p>è¿™æ˜¯å› ä¸º <code>for</code> å‰é¢çš„éƒ¨åˆ†æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒå¿…é¡»æ ¹æ® <code>x</code> è®¡ç®—å‡ºä¸€ä¸ªç»“æœã€‚å› æ­¤ï¼Œè€ƒå¯Ÿè¡¨è¾¾å¼ï¼š <code>x if x%2 == 0</code>ï¼Œå®ƒæ— æ³•æ ¹æ® <code>x</code> è®¡ç®—å‡ºç»“æœï¼Œå› ä¸ºç¼ºå°‘ <code>x</code>ï¼Œå¿…é¡»åŠ ä¸Š <code>else</code>ï¼š<br><span style="color:red">éœ€è¦ if â€¦ else æ—¶çš„æ­£ç¡®å†™æ³•ï¼š</span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">if</span> x%<span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> -x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">11</span>)]</span><br><span class="line">[<span class="number">-1</span>, <span class="number">2</span>, <span class="number">-3</span>, <span class="number">4</span>, <span class="number">-5</span>, <span class="number">6</span>, <span class="number">-7</span>, <span class="number">8</span>, <span class="number">-9</span>, <span class="number">10</span>]</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿° <code>for</code> å‰é¢çš„è¡¨è¾¾å¼ <code>x if x%2 == 0 else -x</code> æ‰èƒ½æ ¹æ® <code>x</code> è®¡ç®—å‡ºç¡®å®šçš„ç»“æœã€‚</p>
<blockquote>
<p><strong>æ€»ç»“ï¼šåœ¨åˆ—è¡¨ç”Ÿæˆå¼ä¸­ï¼Œ<code>for</code> å‰é¢çš„ <code>if ... else</code> æ˜¯è¡¨è¾¾å¼ï¼Œè€Œ <code>for</code> åé¢çš„ <code>if</code> æ˜¯è¿‡æ»¤æ¡ä»¶ï¼Œä¸èƒ½å¸¦ <code>else</code>.</strong></p>
</blockquote>
<h3 id="2-Tuple"><a href="#2-Tuple" class="headerlink" title="2. Tuple"></a>2. Tuple</h3><p>Tuples are a lot like lists, but the main difference is that they are <strong>immutable</strong>. Once you create a tuple, you canâ€™t change them.</p>
<p><img src="/2019/06/27/Advanced-Python-Types/1578054069373.jpg" alt="1578054069373"></p>
<p>å‘tupleæ·»åŠ å…ƒç´ ï¼š<br>æ³¨ï¼šç”±äºå…ƒç»„æ˜¯ä¸å¯å˜çš„ï¼Œæ‚¨ä¸èƒ½ç›´æ¥å‘å…ƒç´ ä¾‹æ·»åŠ å…ƒç´ ï¼Œä½†å¯ä»¥å°†å…ƒç»„è¿æ¥åœ¨ä¸€èµ·</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">primes = (<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">23</span>)</span><br><span class="line">primes = primes + (<span class="number">29</span>, <span class="number">31</span>)</span><br><span class="line">primes</span><br><span class="line"><span class="comment"># (2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31)</span></span><br></pre></td></tr></table></figure>
<p>å…ƒç»„å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">primes[<span class="number">1</span>]</span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line">primes[<span class="number">-3</span>]</span><br><span class="line"><span class="comment"># 23</span></span><br></pre></td></tr></table></figure>
<h3 id="3-Dictionary"><a href="#3-Dictionary" class="headerlink" title="3. Dictionary"></a>3. Dictionary</h3><p><span style="color:red">æ³¨ï¼š3.6ç‰ˆæœ¬åPythonçš„dictå°±æ˜¯æœ‰åºçš„äº†ï¼Œé¡ºåºå°±æ˜¯æ’å…¥çš„é¡ºåºã€‚</span></p>
<p>In other languages, you might know this as a map, or a hash table. Itâ€™s basically a lookup table, where you store values associated with some unique set of key values.</p>
<p>å‚è€ƒ <a href="https://www.runoob.com/python/python-dictionary.html" target="_blank" rel="noopener">https://www.runoob.com/python/python-dictionary.html</a></p>
<p>å­—å…¸æ˜¯ä¸€ç§å¯å˜å®¹å™¨æ¨¡å‹ï¼Œä¸”å¯å­˜å‚¨ä»»æ„ç±»å‹å¯¹è±¡ã€‚</p>
<p>å­—å…¸çš„æ¯ä¸ªé”®å€¼ <strong>key=&gt;value</strong> å¯¹ç”¨å†’å· <strong>:</strong> åˆ†å‰²ï¼Œæ¯ä¸ªé”®å€¼å¯¹ä¹‹é—´ç”¨é€—å· <strong>,</strong> åˆ†å‰²ï¼Œæ•´ä¸ªå­—å…¸åŒ…æ‹¬åœ¨èŠ±æ‹¬å· <strong>{}</strong> ä¸­ ,æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">d = &#123;key1 : value1, key2 : value2 &#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªç®€å•çš„å­—å…¸å®ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">d = &#123;<span class="string">'foo'</span>:<span class="number">1</span>, <span class="string">'bar'</span>:<span class="number">2.3</span>, <span class="string">'s'</span>:<span class="string">'my first dictionary'</span>&#125;</span><br><span class="line"></span><br><span class="line">print(d)</span><br><span class="line"><span class="comment"># &#123;'s': 'my first dictionary', 'bar': 2.3, 'foo': 1&#125;</span></span><br><span class="line"></span><br><span class="line">print(d[<span class="string">'foo'</span>])</span><br><span class="line"><span class="comment"># 1</span></span><br></pre></td></tr></table></figure>
<p>é”®ä¸€èˆ¬æ˜¯å”¯ä¸€çš„ï¼Œå¦‚æœé‡å¤ï¼Œæœ€åçš„ä¸€ä¸ªé”®å€¼å¯¹ä¼šæ›¿æ¢å‰é¢çš„ï¼Œå€¼ä¸éœ€è¦å”¯ä¸€ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1 = &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'b'</span>: <span class="string">'3'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1[<span class="string">'b'</span>]</span><br><span class="line"><span class="string">'3'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="string">'3'</span>&#125;</span><br></pre></td></tr></table></figure>
<p>å€¼å¯ä»¥å–ä»»ä½•æ•°æ®ç±»å‹ï¼ˆå­—å…¸å€¼å¯ä»¥æ²¡æœ‰é™åˆ¶åœ°å–ä»»ä½•pythonå¯¹è±¡ï¼Œæ—¢å¯ä»¥æ˜¯æ ‡å‡†çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·å®šä¹‰çš„ï¼‰ï¼Œä½†é”®å¿…é¡»æ˜¯ä¸å¯å˜çš„ï¼Œå¦‚å­—ç¬¦ä¸²ï¼Œæ•°å­—æˆ–å…ƒç»„ï¼ˆåˆ—è¡¨ä¸è¡Œï¼‰ã€‚å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict1 = &#123;[<span class="string">'Name'</span>]: <span class="string">'Zara'</span>, <span class="string">'Age'</span>: <span class="number">7</span>&#125; </span><br><span class="line"><span class="keyword">print</span> (<span class="string">"dict1['Name']: "</span>, dict1[<span class="string">'Name'</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä»¥ä¸Šå®ä¾‹è¾“å‡ºç»“æœï¼š</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;test.py&quot;, line 3, in &lt;module&gt;</span><br><span class="line">    dict1 = &#123;[&apos;Name&apos;]: &apos;Zara&apos;, &apos;Age&apos;: 7&#125; </span><br><span class="line">TypeError: list objects are unhashable</span><br></pre></td></tr></table></figure>
<h4 id="3-1-è®¿é—®å­—å…¸é‡Œçš„å€¼"><a href="#3-1-è®¿é—®å­—å…¸é‡Œçš„å€¼" class="headerlink" title="3.1 è®¿é—®å­—å…¸é‡Œçš„å€¼"></a>3.1 è®¿é—®å­—å…¸é‡Œçš„å€¼</h4><p>æŠŠç›¸åº”çš„é”®æ”¾å…¥æ–¹æ‹¬å¼§</p>
<p><img src="/2019/06/27/Advanced-Python-Types/1578054637299.jpg" alt="1578054637299"></p>
<p>If you try to retrieve a value for a key that doesnâ€™t exist, you will get an exception. </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">captains[<span class="string">'NX-01'</span>]</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"test.py"</span>, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    captains[<span class="string">'NX-01'</span>]</span><br><span class="line">KeyError: <span class="string">'NX-01'</span></span><br></pre></td></tr></table></figure>
<p>One way to avoid that is to use the <code>get</code> function on the dictionary. <code>get</code>æ˜¯Pythonå­—å…¸å†…ç½®æ–¹æ³•ã€‚<a href="https://www.runoob.com/python/att-dictionary-get.html" target="_blank" rel="noopener">dict.get(key, default=None)</a><br>è¿”å›æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœå€¼ä¸åœ¨å­—å…¸ä¸­è¿”å›defaultå€¼</p>
<p><img src="/2019/06/27/Advanced-Python-Types/1578054512678.jpg" alt="1578054512678"></p>
<p><code>get</code>è¿˜å¯æŒ‡å®šä¸å­˜åœ¨æ—¶çš„é»˜è®¤è¿”å›å€¼ï¼Œå¦‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(captains.get(<span class="string">"NX-01"</span>,<span class="number">0</span>))</span><br><span class="line"><span class="comment"># 0</span></span><br></pre></td></tr></table></figure>
<h4 id="3-2-ä¿®æ”¹å­—å…¸"><a href="#3-2-ä¿®æ”¹å­—å…¸" class="headerlink" title="3.2 ä¿®æ”¹å­—å…¸"></a>3.2 ä¿®æ”¹å­—å…¸</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1 = &#123;<span class="string">'Name'</span>: <span class="string">'Zara'</span>, <span class="string">'Age'</span>: <span class="number">7</span>, <span class="string">'Class'</span>: <span class="string">'First'</span>&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1[<span class="string">'Age'</span>] = <span class="number">8</span> <span class="comment"># æ›´æ–°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1[<span class="string">'School'</span>] = <span class="string">"RUNOOB"</span> <span class="comment"># æ·»åŠ </span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(dict1)</span><br><span class="line">&#123;<span class="string">'School'</span>: <span class="string">'RUNOOB'</span>, <span class="string">'Age'</span>: <span class="number">8</span>, <span class="string">'Name'</span>: <span class="string">'Zara'</span>, <span class="string">'Class'</span>: <span class="string">'First'</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-åˆ é™¤å­—æ®µå…ƒç´ "><a href="#3-3-åˆ é™¤å­—æ®µå…ƒç´ " class="headerlink" title="3.3 åˆ é™¤å­—æ®µå…ƒç´ "></a>3.3 åˆ é™¤å­—æ®µå…ƒç´ </h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">'Name'</span>: <span class="string">'Zara'</span>, <span class="string">'Age'</span>: <span class="number">7</span>, <span class="string">'Class'</span>: <span class="string">'First'</span>&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">del</span> dict1[<span class="string">'Name'</span>]  <span class="comment"># åˆ é™¤é”®æ˜¯'Name'çš„æ¡ç›®</span></span><br><span class="line"><span class="comment"># æ­¤æ—¶dictä¸ºï¼š&#123;'Age':7, 'Class':'First'&#125;</span></span><br><span class="line"></span><br><span class="line">dict1.pop(<span class="string">'Age'</span>)</span><br><span class="line"><span class="comment"># æ­¤æ—¶ä¼šè¾“å‡º7ï¼Œdictç°ä¸º&#123;'Class':'First'&#125;</span></span><br><span class="line"><span class="comment"># pop(key[,default])</span></span><br><span class="line"><span class="comment"># åˆ é™¤å­—å…¸ç»™å®šé”® key æ‰€å¯¹åº”çš„å€¼ï¼Œè¿”å›å€¼ä¸ºè¢«åˆ é™¤çš„å€¼ã€‚keyå€¼å¿…é¡»ç»™å‡ºã€‚ å¦åˆ™ï¼Œè¿”å›defaultå€¼ã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dict1.clear()      <span class="comment"># æ¸…ç©ºå­—å…¸æ‰€æœ‰æ¡ç›®</span></span><br><span class="line"><span class="comment"># æ­¤æ—¶dictä¸ºç©ºï¼š&#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> dict1          <span class="comment"># åˆ é™¤å­—å…¸</span></span><br><span class="line"><span class="comment"># æ­¤æ—¶dictå˜é‡ä¸å­˜åœ¨</span></span><br></pre></td></tr></table></figure>
<h4 id="3-4-éå†å­—å…¸ï¼š-keys-ã€values-ã€items"><a href="#3-4-éå†å­—å…¸ï¼š-keys-ã€values-ã€items" class="headerlink" title="3.4 éå†å­—å…¸ï¼š keys()  ã€values() ã€items()"></a>3.4 éå†å­—å…¸ï¼š keys()  ã€values() ã€items()</h4><p>Iterate:</p>
<p><img src="/2019/06/27/Advanced-Python-Types/1578054588653.jpg" alt="1578054588653"></p>
<p><a href="https://www.cnblogs.com/FlyingLiao/p/11192330.html" target="_blank" rel="noopener">https://www.cnblogs.com/FlyingLiao/p/11192330.html</a></p>
<ul>
<li>xxx.keys() : è¿”å›å­—å…¸çš„æ‰€æœ‰çš„key.  è¿”å›ä¸€ä¸ªåºåˆ—ï¼Œåºåˆ—ä¸­ä¿å­˜æœ‰å­—å…¸çš„æ‰€æœ‰çš„é”®</li>
</ul>
<p>ä¾‹ï¼š</p>
<p><img src="/2019/06/27/Advanced-Python-Types/1584001011558.png" alt="1584001011558"></p>
<ul>
<li>xxx.values() :  è¿”å›å­—å…¸æ‰€æœ‰çš„å€¼.</li>
</ul>
<p>ä¾‹ï¼š</p>
<p><img src="/2019/06/27/Advanced-Python-Types/1584001175719.png" alt="1584001175719"></p>
<ul>
<li>xxx.items() :  è¿”å›å­—å…¸ä¸­æ‰€æœ‰çš„keyå’Œvalues.  è¿”å›ä¸€ä¸ªåºåˆ—ï¼Œåºåˆ—ä¸­åŒ…å«æ‰€æœ‰åŒå€¼å­åºåˆ—</li>
</ul>
<p>ä¾‹ï¼š</p>
<p><img src="/2019/06/27/Advanced-Python-Types/1584001276582.png" alt="1584001276582"></p>
<h4 id="3-5-Pythonä¸­çš„defaultdict"><a href="#3-5-Pythonä¸­çš„defaultdict" class="headerlink" title="3.5 Pythonä¸­çš„defaultdict"></a>3.5 Pythonä¸­çš„<code>defaultdict</code></h4><p>dict subclass that calls a factory function to supply missing values.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line">dict1 = collections.defaultdict(int)</span><br></pre></td></tr></table></figure>
<p><em>defaultdict(int)</em> åˆ›å»ºä¸€ä¸ªç±»ä¼¼ <em>dictionary</em> å¯¹è±¡ï¼Œé‡Œé¢ä»»ä½•çš„ <em>values</em> éƒ½æ˜¯ <em>int</em> çš„å®ä¾‹ï¼Œè€Œä¸”å°±ç®—æ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„ <em>key</em>, <em>d[key]</em> ä¹Ÿæœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¿™ä¸ªé»˜è®¤å€¼æ˜¯ <em>int()</em> çš„é»˜è®¤å€¼0.</p>
<h4 id="3-6-æŒ‰ç…§å­—å…¸çš„é”®æˆ–è€…å€¼æ’åº"><a href="#3-6-æŒ‰ç…§å­—å…¸çš„é”®æˆ–è€…å€¼æ’åº" class="headerlink" title="3.6 æŒ‰ç…§å­—å…¸çš„é”®æˆ–è€…å€¼æ’åº"></a>3.6 æŒ‰ç…§å­—å…¸çš„é”®æˆ–è€…å€¼æ’åº</h4><p><a href="https://blog.csdn.net/leokingszx/article/details/81154681" target="_blank" rel="noopener">https://blog.csdn.net/leokingszx/article/details/81154681</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">y = &#123;<span class="number">1</span>:<span class="number">3</span>, <span class="number">2</span>:<span class="number">2</span>, <span class="number">3</span>:<span class="number">1</span>&#125;</span><br><span class="line">by_key =  sorted(y.items(),key = <span class="keyword">lambda</span> item:item[<span class="number">0</span>])</span><br><span class="line">by_value = sorted(y.items(),key = <span class="keyword">lambda</span> item:item[<span class="number">1</span>])</span><br><span class="line">print(by_key)   <span class="comment">#ç»“æœä¸º[(1, 3), (2, 2), (3, 1)]ï¼Œå³æŒ‰ç…§é”®åæ’åˆ—</span></span><br><span class="line">print(by_value) <span class="comment">#ç»“æœä¸º[(3, 1), (2, 2), (1, 3)]ï¼Œå³æŒ‰ç…§é”®å€¼æ’åˆ—</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œåœ¨è¿™æ ·å¤„ç†åï¼Œå¾—åˆ°çš„ç»“æœå°†å˜æˆå…ƒç»„ã€‚è¿™æ ·ä¹Ÿå¯ä»¥ç†è§£ï¼Œæ¯•ç«Ÿå¯¹äºå­—å…¸è€Œè¨€ï¼Œæœ¬èº«æ˜¯ä¸æä¾›æ’åºçš„éœ€æ±‚çš„ã€‚å¦‚æœæƒ³æŒ‰ç…§é‡Œé¢çš„å…ƒç´ è¿›è¡Œæ’åˆ—ï¼Œé‚£ä¹ˆå°†ä¸å¾—ä¸å¯¹å…¶ç±»å‹è¿›è¡Œè½¬åŒ–ã€‚</p>
<p>å¦ï¼šPythonä¸­å¤šæ¡ä»¶æ’åºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line">y = &#123;<span class="string">"ab"</span>:<span class="number">1</span>, <span class="string">"b"</span>:<span class="number">2</span>, <span class="string">"a"</span>:<span class="number">1</span>&#125;</span><br><span class="line">by_key =  sorted(y.items(),key = <span class="keyword">lambda</span> item:(len(item[<span class="number">0</span>]),item[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">print(by_key) </span><br><span class="line"><span class="comment"># [('a', 1), ('b', 2), ('ab', 1)]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> by_key:</span><br><span class="line">    print(value[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># a</span></span><br><span class="line"><span class="comment"># b</span></span><br><span class="line"><span class="comment"># ab</span></span><br></pre></td></tr></table></figure>
<h4 id="3-7-å…¶ä»–ä¸€äº›å­—å…¸å†…ç½®å‡½æ•°-amp-æ–¹æ³•"><a href="#3-7-å…¶ä»–ä¸€äº›å­—å…¸å†…ç½®å‡½æ•°-amp-æ–¹æ³•" class="headerlink" title="3.7 å…¶ä»–ä¸€äº›å­—å…¸å†…ç½®å‡½æ•°&amp;æ–¹æ³•"></a>3.7 å…¶ä»–ä¸€äº›å­—å…¸å†…ç½®å‡½æ•°&amp;æ–¹æ³•</h4><p><a href="https://www.runoob.com/python/att-dictionary-len.html" target="_blank" rel="noopener"><br>len(my_dict)</a><br>è®¡ç®—å­—å…¸å…ƒç´ ä¸ªæ•°ï¼Œå³é”®çš„æ€»æ•°ã€‚</p>
<p><a href="https://www.runoob.com/python/att-dictionary-copy.html" target="_blank" rel="noopener">my_dict.copy()</a><br>è¿”å›ä¸€ä¸ªå­—å…¸çš„æµ…æ‹·è´</p>
<p><a href="https://www.runoob.com/python/python-att-dictionary-pop.html" target="_blank" rel="noopener">pop(key[,default])</a><br>åˆ é™¤å­—å…¸ç»™å®šé”® key æ‰€å¯¹åº”çš„å€¼ï¼Œè¿”å›å€¼ä¸ºè¢«åˆ é™¤çš„å€¼ã€‚keyå€¼å¿…é¡»ç»™å‡ºã€‚ å¦åˆ™ï¼Œè¿”å›defaultå€¼ã€‚</p>
<p><a href="https://www.runoob.com/python/python-att-dictionary-popitem.html" target="_blank" rel="noopener">popitem()</a><br>è¿”å›å¹¶åˆ é™¤å­—å…¸ä¸­çš„æœ€åä¸€å¯¹é”®å’Œå€¼ã€‚</p>
<h4 id="3-8-ä¸¤ä¸ªåˆ—è¡¨åˆå¹¶æˆä¸€ä¸ªå­—å…¸"><a href="#3-8-ä¸¤ä¸ªåˆ—è¡¨åˆå¹¶æˆä¸€ä¸ªå­—å…¸" class="headerlink" title="3.8 ä¸¤ä¸ªåˆ—è¡¨åˆå¹¶æˆä¸€ä¸ªå­—å…¸"></a>3.8 ä¸¤ä¸ªåˆ—è¡¨åˆå¹¶æˆä¸€ä¸ªå­—å…¸</h4><p>ä¸¤ä¸ªåˆ—è¡¨åˆå¹¶æˆä¸€ä¸ªå­—å…¸ï¼Œä¸€ä¸ªåˆ—è¡¨é‡Œçš„å€¼ä¸º <em>key</em>ï¼Œä¸€ä¸ªåˆ—è¡¨é‡Œçš„ä¸º <em>Value</em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">b = [<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]</span><br><span class="line"></span><br><span class="line">c = dict(zip(a,b))</span><br><span class="line">c</span><br><span class="line"><span class="comment"># &#123;1: 6, 2: 7, 3: 8, 4: 9&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¡¥å……1ï¼šå…³äºzip()å‡½æ•°ï¼š</p>
<p><a href="https://www.runoob.com/python/python-func-zip.html" target="_blank" rel="noopener">https://www.runoob.com/python/python-func-zip.html</a></p>
<p><strong>zip()</strong> å‡½æ•°ç”¨äºå°†å¯è¿­ä»£çš„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå°†å¯¹è±¡ä¸­å¯¹åº”çš„å…ƒç´ æ‰“åŒ…æˆä¸€ä¸ªä¸ªå…ƒç»„ï¼Œç„¶åè¿”å›ç”±è¿™äº›å…ƒç»„ç»„æˆçš„åˆ—è¡¨(python2ä¸­è¿”å›çš„æ˜¯åˆ—è¡¨ï¼Œpython3ä¸­è¿”å›çš„æ˜¯å¯¹è±¡ï¼‰ã€‚</p>
<p>å¦‚æœå„ä¸ªè¿­ä»£å™¨çš„å…ƒç´ ä¸ªæ•°ä¸ä¸€è‡´ï¼Œåˆ™è¿”å›åˆ—è¡¨é•¿åº¦ä¸æœ€çŸ­çš„å¯¹è±¡ç›¸åŒï¼Œåˆ©ç”¨ * å·æ“ä½œç¬¦ï¼Œå¯ä»¥å°†å…ƒç»„è§£å‹ä¸ºåˆ—è¡¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">zip([iterable, ...])</span><br></pre></td></tr></table></figure>
<p><em>zip æ–¹æ³•åœ¨ Python 2 å’Œ Python 3 ä¸­çš„ä¸åŒï¼šåœ¨ Python 2.x zip() è¿”å›çš„æ˜¯ä¸€ä¸ªå…ƒç»„åˆ—è¡¨ï¼Œ Python 3.x ä¸­ä¸ºäº†å‡å°‘å†…å­˜ï¼Œzip() è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚éœ€å±•ç¤ºåˆ—è¡¨ï¼Œéœ€æ‰‹åŠ¨ list() è½¬æ¢ã€‚ã€‚</em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Python3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zipped = zip(a,b)     <span class="comment"># è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zipped</span><br><span class="line">&lt;zip object at <span class="number">0x103abc288</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(zipped)  <span class="comment"># list() è½¬æ¢ä¸ºåˆ—è¡¨</span></span><br><span class="line">[(<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">5</span>), (<span class="number">3</span>, <span class="number">6</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(zip(a,c))              <span class="comment"># å…ƒç´ ä¸ªæ•°ä¸æœ€çŸ­çš„åˆ—è¡¨ä¸€è‡´</span></span><br><span class="line">[(<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">5</span>), (<span class="number">3</span>, <span class="number">6</span>)]</span><br><span class="line"> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a1, a2 = zip(*zip(a,b))        <span class="comment"># ä¸ zip ç›¸åï¼Œzip(*) å¯ç†è§£ä¸ºè§£å‹ï¼Œè¿”å›äºŒç»´çŸ©é˜µå¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(a1)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(a2)</span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure>
<p>è¡¥å……2ï¼šå­—å…¸è¿˜å¯ä»¥è¿™æ ·å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict([(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">3</span>,<span class="number">4</span>)])</span><br><span class="line">&#123;<span class="number">1</span>: <span class="number">2</span>, <span class="number">3</span>: <span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-9-åˆå¹¶ä¸¤ä¸ªå­—å…¸"><a href="#3-9-åˆå¹¶ä¸¤ä¸ªå­—å…¸" class="headerlink" title="3.9 åˆå¹¶ä¸¤ä¸ªå­—å…¸"></a>3.9 åˆå¹¶ä¸¤ä¸ªå­—å…¸</h4><p>Combine below dictionaries in order to add values for common keys:<br><code>dict1 = {&#39;alpha&#39;: 50,&#39;beta&#39;: 200, &#39;gamma&#39;:300} 
dict2 = {&#39;alpha&#39;: 300, &#39;b&#39;: 200, &#39;beta&#39;: 120, &#39;delta&#39;:400}</code><br>Expected output:<br><code>{&#39;alpha&#39;: 350, &#39;beta&#39;: 320, &#39;gamma&#39;: 300, &#39;b&#39;: 200, &#39;delta&#39;: 400}</code>.</p>
<p>æ³•ä¸€ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">'alpha'</span>: <span class="number">50</span>,<span class="string">'beta'</span>: <span class="number">200</span>, <span class="string">'gamma'</span>:<span class="number">300</span>&#125; </span><br><span class="line">dict2 = &#123;<span class="string">'alpha'</span>: <span class="number">300</span>, <span class="string">'b'</span>: <span class="number">200</span>, <span class="string">'beta'</span>: <span class="number">120</span>, <span class="string">'delta'</span>:<span class="number">400</span>&#125; </span><br><span class="line"></span><br><span class="line">dict3 = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> dict1.items():</span><br><span class="line">    dict3[k] = v + dict2.get(k,<span class="number">0</span>)</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> dict2.items():</span><br><span class="line">    <span class="keyword">if</span> k <span class="keyword">not</span> <span class="keyword">in</span> dict1:</span><br><span class="line">        dict3[k] = v</span><br><span class="line">print(dict3)</span><br><span class="line"><span class="comment"># &#123;'beta': 320, 'gamma': 300, 'b': 200, 'delta': 400, 'alpha': 350&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ³•äºŒï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">'alpha'</span>: <span class="number">50</span>,<span class="string">'beta'</span>: <span class="number">200</span>, <span class="string">'gamma'</span>:<span class="number">300</span>&#125;</span><br><span class="line">dict2 = &#123;<span class="string">'alpha'</span>: <span class="number">300</span>, <span class="string">'b'</span>: <span class="number">200</span>, <span class="string">'beta'</span>: <span class="number">120</span>, <span class="string">'delta'</span>:<span class="number">400</span>&#125;</span><br><span class="line">dict3 = dict(dict1) <span class="comment"># don't do `dict3=dict1`, you need to make a copy</span></span><br><span class="line">dict3.update(dict2) </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, j <span class="keyword">in</span> dict1.items():</span><br><span class="line">    <span class="keyword">for</span> x, y <span class="keyword">in</span> dict2.items():</span><br><span class="line">        <span class="keyword">if</span> i == x:</span><br><span class="line">            dict3[i]=(j+y)</span><br><span class="line">print(dict3)</span><br><span class="line"><span class="comment"># &#123;'gamma': 300, 'delta': 400, 'alpha': 350, 'beta': 320, 'b': 200&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ³•ä¸‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">d = Counter(dict1) + Counter(dict2)</span><br><span class="line">print(d)</span><br><span class="line"><span class="comment"># Counter(&#123;'delta': 400, 'alpha': 350, 'beta': 320, 'gamma': 300, 'b': 200&#125;)</span></span><br></pre></td></tr></table></figure>
<h3 id="4-String"><a href="#4-String" class="headerlink" title="4. String"></a>4. String</h3><h4 id="4-1-endswith"><a href="#4-1-endswith" class="headerlink" title="4.1 endswith()"></a>4.1 endswith()</h4><p>Define a list called <code>files</code> which contains some file names: <code>files = [&#39;1.txt&#39;, &#39;2.txt&#39;, &#39;2.ab&#39;, &#39;2.c&#39;, &#39;3.txt&#39;, &#39;3.ann&#39;, &#39;3.ss&#39;]</code>. Delete the file name which doesnâ€™t use the extension <code>.txt</code> from the list. Print the list, the expected output is: <code>[&#39;1.txt&#39;, &#39;2.txt&#39;, &#39;3.txt&#39;]</code></p>
<p>æ³•ä¸€ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">files = [<span class="string">'1.txt'</span>, <span class="string">'2.txt'</span>, <span class="string">'2.ab'</span>, <span class="string">'2.c'</span>, <span class="string">'3.txt'</span>, <span class="string">'3.ann'</span>, <span class="string">'3.ss'</span>]</span><br><span class="line">files1 = []</span><br><span class="line"><span class="keyword">for</span> f <span class="keyword">in</span> files:</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'.txt'</span> <span class="keyword">in</span> f: <span class="comment"># ä¸å¤Ÿä¸¥è°¨?</span></span><br><span class="line">        files1.append(f)</span><br><span class="line">print(files1)</span><br><span class="line"><span class="comment"># ['1.txt', '2.txt', '3.txt']</span></span><br></pre></td></tr></table></figure>
<p>æ³•äºŒï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">files = [<span class="string">'1.txt'</span>, <span class="string">'2.txt'</span>, <span class="string">'2.ab'</span>, <span class="string">'2.c'</span>, <span class="string">'3.txt'</span>, <span class="string">'3.ann'</span>, <span class="string">'3.ss'</span>,]</span><br><span class="line">files = [i <span class="keyword">for</span> i <span class="keyword">in</span> files <span class="keyword">if</span> i.endswith(<span class="string">'.txt'</span>)]</span><br><span class="line">print(files)</span><br><span class="line"><span class="comment"># ['1.txt', '2.txt', '3.txt']</span></span><br></pre></td></tr></table></figure>
<p>ç±»ä¼¼çš„å‡½æ•°è¿˜æœ‰ <a href="https://www.runoob.com/python/att-string-startswith.html" target="_blank" rel="noopener">startswith()</a></p>
<h4 id="4-2-strip"><a href="#4-2-strip" class="headerlink" title="4.2 strip()"></a>4.2 strip()</h4><p>strip() æ–¹æ³•ç”¨äºç§»é™¤å­—ç¬¦ä¸²å¤´å°¾æŒ‡å®šçš„å­—ç¬¦ï¼ˆé»˜è®¤ä¸ºç©ºæ ¼æˆ–æ¢è¡Œç¬¦ï¼‰æˆ–å­—ç¬¦åºåˆ—ã€‚</p>
<p><strong>æ³¨ï¼š</strong>è¯¥æ–¹æ³•åªèƒ½åˆ é™¤å¼€å¤´æˆ–æ˜¯ç»“å°¾çš„å­—ç¬¦ï¼Œä¸èƒ½åˆ é™¤ä¸­é—´éƒ¨åˆ†çš„å­—ç¬¦ã€‚</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cities = [<span class="string">' London'</span>, <span class="string">' Birmingham '</span>, <span class="string">' Manchester'</span>, <span class="string">'  Glasgow'</span>, <span class="string">'  Newcastle'</span>, <span class="string">'Sheffield  '</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»é™¤æ‰å­—ç¬¦ä¸²é¦–å°¾çš„ç©ºæ ¼</span></span><br><span class="line">cities = [city.strip() <span class="keyword">for</span> city <span class="keyword">in</span> cities]</span><br><span class="line">print(cities)</span><br><span class="line"><span class="comment"># ['London', 'Birmingham', 'Manchester', 'Glasgow', 'Newcastle', 'Sheffield']</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">str1 = <span class="string">"00000003210Runoob01230000000"</span>; </span><br><span class="line">print(str1.strip(<span class="string">'0'</span>));  <span class="comment"># å»é™¤é¦–å°¾å­—ç¬¦ 0</span></span><br><span class="line"><span class="comment"># 3210Runoob0123</span></span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼š<br>Define a string: <code>idx_str = &#39;use, index,numbers ,to  , specify ,positions&#39;</code>.<br>ç”Ÿæˆå¦‚ä¸‹å­—å…¸idx_dictï¼š<code>{0: &#39;use&#39;, 1: &#39;index&#39;, 2: &#39;numbers&#39;, 3: &#39;to&#39;, 4: &#39;specify&#39;, 5: &#39;positions&#39;}</code></p>
<p>æ³•ä¸€ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">idx_str = <span class="string">'use, index,numbers ,to  , specify ,positions'</span></span><br><span class="line">idx_dict = dict([(i, val.strip()) <span class="keyword">for</span> i, val <span class="keyword">in</span> enumerate(idx_str.split(<span class="string">","</span>))])</span><br><span class="line">print(idx_dict)</span><br><span class="line"><span class="comment"># &#123;0: 'use', 1: 'index', 2: 'numbers', 3: 'to', 4: 'specify', 5: 'positions'&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ³•äºŒï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">idx_str = <span class="string">'use, index,numbers ,to  , specify ,positions'</span></span><br><span class="line">idx_dict = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> idx, val <span class="keyword">in</span> enumerate(idx_str.split(<span class="string">','</span>)):</span><br><span class="line">    idx_dict[idx] = val.strip()</span><br><span class="line">print(idx_dict)</span><br><span class="line"><span class="comment"># &#123;0: 'use', 1: 'index', 2: 'numbers', 3: 'to', 4: 'specify', 5: 'positions'&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-3-å¤§å°å†™"><a href="#4-3-å¤§å°å†™" class="headerlink" title="4.3 å¤§å°å†™"></a>4.3 å¤§å°å†™</h4><ul>
<li>s.lower()ï¼šå…¨éƒ¨è½¬æ¢ä¸ºå°å†™</li>
<li>s.upper()ï¼šå…¨éƒ¨è½¬æ¢ä¸ºå¤§å†™</li>
<li>s.title()ï¼šæ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™å°å†™</li>
<li>s.capitalize()ï¼šç¬¬ä¸€ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä½™å°å†™</li>
<li>s.islower()ï¼šåˆ¤æ–­æ˜¯å¦å…¨ä¸ºå°å†™</li>
<li>s.isupper()ï¼šåˆ¤æ–­æ˜¯å¦å…¨ä¸ºå¤§å†™</li>
<li>s.istitle()ï¼šåˆ¤æ–­æ˜¯å¦æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å‡å¤§å†™ï¼Œå…¶ä½™å‡å°å†™</li>
</ul>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">"hello WorlD"</span></span><br><span class="line"></span><br><span class="line">print(s.title())</span><br><span class="line"><span class="comment"># Hello World</span></span><br><span class="line"></span><br><span class="line">print(s.capitalize())</span><br><span class="line"><span class="comment"># Hello world</span></span><br></pre></td></tr></table></figure>
<h4 id="4-4-åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ã€å­—æ¯"><a href="#4-4-åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ã€å­—æ¯" class="headerlink" title="4.4 åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ã€å­—æ¯"></a>4.4 åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ã€å­—æ¯</h4><ul>
<li>s.isdigit()ï¼šåˆ¤æ–­æ˜¯å¦å…¨ä¸ºæ•°å­—ï¼ˆè‹¥sä¸ºç©ºï¼Œè¿”å›Falseï¼‰</li>
<li>s.isalpha()ï¼šåˆ¤æ–­æ˜¯å¦å…¨ä¸ºå­—æ¯ï¼ˆè‹¥sä¸ºç©ºï¼Œè¿”å›Falseï¼‰</li>
<li>s.isalnum()ï¼šåˆ¤æ–­æ˜¯å¦å…¨ä¸ºå­—æ¯æ•°å­—ï¼ˆè‹¥sä¸ºç©ºï¼Œè¿”å›Falseï¼‰</li>
</ul>
<p>æ³¨ï¼šPythonå®˜æ–¹å®šä¹‰ä¸­çš„å­—æ¯ï¼šå¯é»˜è®¤ä¸ºè‹±æ–‡å­—æ¯+æ±‰å­—ï¼›Pythonå®˜æ–¹å®šä¹‰ä¸­çš„æ•°å­—ï¼šå¯é»˜è®¤ä¸ºé˜¿æ‹‰ä¼¯æ•°å­—+å¸¦åœˆçš„æ•°å­—ï¼ˆå¦‚â‘ ï¼‰</p>
<h3 id="5-Array"><a href="#5-Array" class="headerlink" title="5. Array"></a>5. Array</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">print(np.array([<span class="number">1</span>,<span class="number">2</span>]))</span><br><span class="line"><span class="comment"># [1 2]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">array_2 = np.array([[[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]],[[<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>]],[[<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>],[<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>]],[[<span class="number">7</span>,<span class="number">7</span>,<span class="number">7</span>],[<span class="number">8</span>,<span class="number">8</span>,<span class="number">8</span>]]])</span><br><span class="line">print(array_2.ndim)</span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line">print(array_2.shape)</span><br><span class="line"><span class="comment"># (4, 2, 3)</span></span><br><span class="line">print(array_2.dtype)</span><br><span class="line"><span class="comment"># int32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬æ¢æˆ float</span></span><br><span class="line">array_2 = array_2.astype(np.float64)</span><br></pre></td></tr></table></figure>
<p>np.arange()ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">array_3 = np.arange(<span class="number">1</span>,<span class="number">20</span>,<span class="number">2</span>)</span><br><span class="line">array_3</span><br><span class="line"><span class="comment"># array([ 1,  3,  5,  7,  9, 11, 13, 15, 17, 19])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create an array of shape (2,2,2,2). The array contains numbers from 0 to 15</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr4d= np.arange(<span class="number">16</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr4d</span><br><span class="line">array([[[[ <span class="number">0</span>,  <span class="number">1</span>],</span><br><span class="line">         [ <span class="number">2</span>,  <span class="number">3</span>]],</span><br><span class="line"></span><br><span class="line">        [[ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">         [ <span class="number">6</span>,  <span class="number">7</span>]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       [[[ <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">         [<span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">         [<span class="number">14</span>, <span class="number">15</span>]]]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Change values 8,9,10,11 in the array to 12.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr4d[<span class="number">1</span>,<span class="number">0</span>] = <span class="number">12</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr4d</span><br><span class="line">array([[[[ <span class="number">0</span>,  <span class="number">1</span>],</span><br><span class="line">         [ <span class="number">2</span>,  <span class="number">3</span>]],</span><br><span class="line"></span><br><span class="line">        [[ <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">         [ <span class="number">6</span>,  <span class="number">7</span>]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       [[[<span class="number">12</span>, <span class="number">12</span>],</span><br><span class="line">         [<span class="number">12</span>, <span class="number">12</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">         [<span class="number">14</span>, <span class="number">15</span>]]]])</span><br></pre></td></tr></table></figure>
<p>cumsum:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">21</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a.cumsum())</span><br><span class="line">[  <span class="number">1</span>   <span class="number">4</span>   <span class="number">9</span>  <span class="number">16</span>  <span class="number">25</span>  <span class="number">36</span>  <span class="number">49</span>  <span class="number">64</span>  <span class="number">81</span> <span class="number">100</span> <span class="number">121</span>]</span><br></pre></td></tr></table></figure>
<p>Create an array by using <code>array_4 = np.array([[7,-1],[10,2],[-3,4]])</code>.Print the elements of the array which are larger than 0.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>array_4 = np.array([[<span class="number">7</span>,<span class="number">-1</span>],[<span class="number">10</span>,<span class="number">2</span>],[<span class="number">-3</span>,<span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>array_4[array_4&gt;<span class="number">0</span>]</span><br><span class="line">array([ <span class="number">7</span>, <span class="number">10</span>,  <span class="number">2</span>,  <span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<p>Replace the odd numbers in <code>array_4</code> with zeros. </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>array_4[array_4%<span class="number">2</span>==<span class="number">1</span>] = <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>array_4</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">0</span>],</span><br><span class="line">       [<span class="number">10</span>,  <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">0</span>,  <span class="number">4</span>]])</span><br></pre></td></tr></table></figure>
<h4 id="5-1-Arrayçš„åˆå¹¶"><a href="#5-1-Arrayçš„åˆå¹¶" class="headerlink" title="5.1 Arrayçš„åˆå¹¶"></a>5.1 Arrayçš„åˆå¹¶</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.concatenate(è¦æ‹¼æ¥çš„å¤šä¸ªæ•°ç»„, axis = <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr1 = np.array([<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line">arr2 = np.array([<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">arr3 = np.concatenate([arr1,arr2], axis = <span class="number">0</span>)</span><br><span class="line">print(arr3)</span><br><span class="line"><span class="comment"># [1 2 3 4 5]</span></span><br></pre></td></tr></table></figure>
<h4 id="5-2-çŸ©é˜µ"><a href="#5-2-çŸ©é˜µ" class="headerlink" title="5.2 çŸ©é˜µ"></a>5.2 çŸ©é˜µ</h4><p>å•ä½çŸ©é˜µï¼šnp.identity(), np.eye()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æ³•ä¸€ï¼š</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1 = np.identity(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(arr1)</span><br><span class="line">[[<span class="number">1.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">1.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">0.</span> <span class="number">1.</span> <span class="number">0.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">1.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">1.</span>]]</span><br><span class="line"></span><br><span class="line">æ³•äºŒï¼š</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2 = np.eye(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr2</span><br><span class="line">[[<span class="number">1.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">1.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">0.</span> <span class="number">1.</span> <span class="number">0.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">1.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">1.</span>]]</span><br></pre></td></tr></table></figure>
<p>åŒºåˆ«ï¼šnp.identity() è¿”å›çš„æ˜¯è¡Œæ•°å’Œåˆ—æ•°ç›¸ç­‰çš„ square arrayï¼Œnp.eye() è¡Œæ•°å’Œåˆ—æ•°å¯ä»¥ä¸åŒï¼Œä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(np.eye(<span class="number">3</span>,<span class="number">2</span>))</span><br><span class="line">[[<span class="number">1.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">0.</span>]]</span><br></pre></td></tr></table></figure>
<p>å…¨ä¸º1çš„çŸ©é˜µï¼šnp.ones()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_array = np.ones([<span class="number">5</span>,<span class="number">5</span>]) <span class="comment">#ä¹Ÿå¯ä»¥ç”¨(5,5)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_array</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å†…éƒ¨æ”¹ä¸º0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_array[<span class="number">1</span>:<span class="number">4</span>,<span class="number">1</span>:<span class="number">4</span>]=<span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_array</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>]])</span><br></pre></td></tr></table></figure>
<p>å…¨ä¸º0çš„çŸ©é˜µï¼šnp.zeros()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">array = np.zeros((<span class="number">12</span>,<span class="number">12</span>))</span><br></pre></td></tr></table></figure>
<p>ç©ºçŸ©é˜µï¼šnp.empty(). Return a new array of given shape and type, without initializing entries.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = np.empty((<span class="number">4</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>   arr[i] = i</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr</span><br><span class="line">array([[<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">2.</span>, <span class="number">2.</span>, <span class="number">2.</span>, <span class="number">2.</span>],</span><br><span class="line">       [<span class="number">3.</span>, <span class="number">3.</span>, <span class="number">3.</span>, <span class="number">3.</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr_new = arr.reshape(<span class="number">8</span>,<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr_new</span><br><span class="line">array([[<span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">2.</span>, <span class="number">2.</span>],</span><br><span class="line">       [<span class="number">2.</span>, <span class="number">2.</span>],</span><br><span class="line">       [<span class="number">3.</span>, <span class="number">3.</span>],</span><br><span class="line">       [<span class="number">3.</span>, <span class="number">3.</span>]])</span><br></pre></td></tr></table></figure>
<p>Write a code that reindexes the array <code>arr_new</code> so that it looks like the below array:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[[0., 0.],</span><br><span class="line">[1., 1.],</span><br><span class="line">[2., 2.],</span><br><span class="line">[3., 3.],</span><br><span class="line">[3., 3.],</span><br><span class="line">[2., 2.],</span><br><span class="line">[1., 1.],</span><br><span class="line">[0., 0.]]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr_new[np.ix_([<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>], [<span class="number">0</span>,<span class="number">1</span>])]</span><br><span class="line">array([[<span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">2.</span>, <span class="number">2.</span>],</span><br><span class="line">       [<span class="number">3.</span>, <span class="number">3.</span>],</span><br><span class="line">       [<span class="number">3.</span>, <span class="number">3.</span>],</span><br><span class="line">       [<span class="number">2.</span>, <span class="number">2.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>]])</span><br></pre></td></tr></table></figure>
<p>Using <code>ix_</code> one can quickly construct index arrays that will index the cross product. <code>a[np.ix_([1,3],[2,5])]</code> returns the array <code>[[a[1,2] a[1,5]], [a[3,2] a[3,5]]]</code>.</p>
<p>ä¸Šä¸‰è§’çŸ©é˜µä¸ä¸‹ä¸‰è§’çŸ©é˜µ</p>
<p>Use <strong>one</strong> line of <code>numpy</code> code to create and <strong>print</strong> the below array:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[[0. 0. 0. 0.]  </span><br><span class="line"> [1. 0. 0. 0.]  </span><br><span class="line"> [1. 1. 0. 0.]  </span><br><span class="line"> [1. 1. 1. 0.]]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(np.triu(np.ones((<span class="number">4</span>, <span class="number">4</span>)), <span class="number">1</span>)).T</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">print(np.tril(np.ones((<span class="number">4</span>, <span class="number">4</span>)), <span class="number">-1</span>))</span><br></pre></td></tr></table></figure>
<p>np.triu(): ä¸Šä¸‰è§’çŸ©é˜µï¼ˆä¸»å¯¹è§’çº¿ä»¥ä¸‹éƒ½æ˜¯é›¶çš„æ–¹é˜µï¼‰<br>np.tril(): ä¸‹ä¸‰è§’çŸ©é˜µï¼ˆä¸»å¯¹è§’çº¿ä»¥ä¸Šéƒ½æ˜¯é›¶çš„æ–¹é˜µï¼‰</p>
<p>éšæœºçŸ©é˜µ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = np.random.randn(<span class="number">6</span>, <span class="number">3</span>) <span class="comment"># Return a sample (or samples) from the "standard normal" distribution.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(X)</span><br><span class="line">[[ <span class="number">0.63926617</span>  <span class="number">0.76423729</span>  <span class="number">1.80890798</span>]</span><br><span class="line"> [ <span class="number">1.41459964</span> <span class="number">-0.62706709</span> <span class="number">-1.26970789</span>]</span><br><span class="line"> [ <span class="number">0.38017848</span> <span class="number">-0.22310835</span>  <span class="number">0.34467019</span>]</span><br><span class="line"> [<span class="number">-1.59067911</span> <span class="number">-1.10059474</span> <span class="number">-0.36641207</span>]</span><br><span class="line"> [ <span class="number">0.02698284</span> <span class="number">-2.00582688</span> <span class="number">-0.70687337</span>]</span><br><span class="line"> [<span class="number">-0.10859002</span> <span class="number">-1.28653612</span>  <span class="number">0.65185543</span>]]</span><br></pre></td></tr></table></figure>
<p>Define an array called <code>data</code> using the following code: <code>data = np.array([[10,2,3],[1,3,3],[2,34,4],[5,4,3]])</code><br>For each row in the array, apply the following formula: $x_1Ã—2+x_2Ã—5+x_3Ã—3$<br>For instance, if you apply the formula to the first row, you will get $39\ (10Ã—2+2Ã—5+3Ã—3). $Print the new array after applying the formula to each row. The expected output is: <code>[ 39  26 186  39]</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = np.array([[<span class="number">10</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>],[<span class="number">2</span>,<span class="number">34</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print((data*[<span class="number">2</span>,<span class="number">5</span>,<span class="number">3</span>]).sum(axis=<span class="number">1</span>))</span><br><span class="line">[ <span class="number">39</span>  <span class="number">26</span> <span class="number">186</span>  <span class="number">39</span>]</span><br></pre></td></tr></table></figure>
<p><strong>Print</strong> an array of shape 4X4, with the first value of 1000 and next values being 25% larger than the previous one. It should look like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[[ 1000.          1250.          1562.5         1953.125     ]</span><br><span class="line"> [ 2441.40625     3051.7578125   3814.69726562  4768.37158203]</span><br><span class="line"> [ 5960.46447754  7450.58059692  9313.22574615 11641.53218269]</span><br><span class="line"> [14551.91522837 18189.89403546 22737.36754432 28421.7094304 ]]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">1000</span>*(<span class="number">1.25</span>**np.arange(<span class="number">16</span>)).reshape(<span class="number">4</span>,<span class="number">4</span>))</span><br><span class="line">[[ <span class="number">1000.</span>          <span class="number">1250.</span>          <span class="number">1562.5</span>         <span class="number">1953.125</span>     ]</span><br><span class="line"> [ <span class="number">2441.40625</span>     <span class="number">3051.7578125</span>   <span class="number">3814.69726562</span>  <span class="number">4768.37158203</span>]</span><br><span class="line"> [ <span class="number">5960.46447754</span>  <span class="number">7450.58059692</span>  <span class="number">9313.22574615</span> <span class="number">11641.53218269</span>]</span><br><span class="line"> [<span class="number">14551.91522837</span> <span class="number">18189.89403546</span> <span class="number">22737.36754432</span> <span class="number">28421.7094304</span> ]]</span><br></pre></td></tr></table></figure>
<h4 id="5-3-Arrayä¸­çš„nan"><a href="#5-3-Arrayä¸­çš„nan" class="headerlink" title="5.3 Arrayä¸­çš„nan"></a>5.3 Arrayä¸­çš„nan</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.isnan(arr).sum()</span><br></pre></td></tr></table></figure>
<h3 id="6-pythonçš„æ•°æ®ç±»å‹çš„æœ‰åºæ— åº"><a href="#6-pythonçš„æ•°æ®ç±»å‹çš„æœ‰åºæ— åº" class="headerlink" title="6. pythonçš„æ•°æ®ç±»å‹çš„æœ‰åºæ— åº"></a>6. pythonçš„æ•°æ®ç±»å‹çš„æœ‰åºæ— åº</h3><blockquote>
<p>å‚è€ƒ <a href="https://www.cnblogs.com/z-x-y/p/10090749.html" target="_blank" rel="noopener">https://www.cnblogs.com/z-x-y/p/10090749.html</a></p>
</blockquote>
<ul>
<li>åˆ—è¡¨listæœ‰åºå¯å˜</li>
<li>å­—å…¸dictåœ¨python3.6ä¹‹å‰æ˜¯æ— åºçš„ï¼Œåˆ°äº†python3.7å˜æˆäº†æœ‰åºï¼Œå¯å˜</li>
<li>å…ƒç»„tupleä¸å¯å˜</li>
<li>é›†åˆsetæ— åºå¯å˜ï¼ˆè¿˜æœ‰ä¸ªä¸å¯å˜é›†åˆfrozensetï¼‰</li>
<li>æ•°å­—numberä¸å¯å˜</li>
<li>å­—ç¬¦ä¸²stringä¸å¯å˜</li>
</ul>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonä¸­çš„ç®€å•è¯­æ³•ä¸å¸¸è§æ“ä½œ</title>
    <url>/2019/06/27/basic-python-type/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong><em><span style="color:blue">ç¼©è¿›æ˜¯ Pythonçš„çµé­‚</span></em></strong></p>
<blockquote>
<p>æ›´å¤šPythonåŸºç¡€è§æˆ‘çš„onenoteç¬”è®°æœ¬â€Pythonå­¦ä¹ ç¬”è®°â€œ<br>å¦ï¼šå…³äº Python çš„æ•™ç¨‹å¯å‚è€ƒå»–é›ªå³°çš„ç½‘ç«™ <a href="https://www.liaoxuefeng.com/wiki/1016959663602400" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/1016959663602400</a></p>
</blockquote>
<h3 id="1-é€»è¾‘è¿ç®—ç¬¦"><a href="#1-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="1. é€»è¾‘è¿ç®—ç¬¦"></a>1. é€»è¾‘è¿ç®—ç¬¦</h3><p><img src="/2019/06/27/basic-python-type/logic-operator.jpg" alt="é€»è¾‘è¿ç®—ç¬¦"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df[(df[<span class="string">'id'</span>]&gt;=<span class="number">1</span>) &amp;&amp; (df[<span class="string">'id'</span>]&lt;=<span class="number">2</span>)]</span><br></pre></td></tr></table></figure>
<h3 id="2-æ¯”è¾ƒæ“ä½œç¬¦"><a href="#2-æ¯”è¾ƒæ“ä½œç¬¦" class="headerlink" title="2. æ¯”è¾ƒæ“ä½œç¬¦"></a>2. æ¯”è¾ƒæ“ä½œç¬¦</h3><blockquote>
<p>>, &lt;, &gt;=, &lt;=, ==, != </p>
</blockquote>
<a id="more"></a>
<h3 id="3-Pythonä¸­çš„åŒå¼•å·"><a href="#3-Pythonä¸­çš„åŒå¼•å·" class="headerlink" title="3. Pythonä¸­çš„åŒå¼•å·"></a>3. Pythonä¸­çš„åŒå¼•å·</h3><p>Pythonä¸­åŒå¼•å·å’Œå•å¼•å·ä½œç”¨ä¸€æ ·ï¼Œå³å­—ç¬¦ä¸²å¯ä»¥ç”¨å•å¼•å·ä¹Ÿå¯ä»¥ç”¨åŒå¼•å·</p>
<h3 id="4-type"><a href="#4-type" class="headerlink" title="4. type()"></a>4. type()</h3><h4 id="4-1-type-å‡½æ•°"><a href="#4-1-type-å‡½æ•°" class="headerlink" title="4.1 type()å‡½æ•°"></a>4.1 type()å‡½æ•°</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">i = <span class="number">4</span></span><br><span class="line">type(i)</span><br><span class="line"><span class="comment"># int</span></span><br><span class="line"></span><br><span class="line">type(<span class="string">"hello"</span>)</span><br><span class="line"><span class="comment"># str</span></span><br><span class="line"></span><br><span class="line">n = <span class="literal">None</span></span><br><span class="line">type(n)</span><br><span class="line"><span class="comment"># NoneType</span></span><br></pre></td></tr></table></figure>
<h4 id="4-2-dtype"><a href="#4-2-dtype" class="headerlink" title="4.2 dtype"></a>4.2 dtype</h4><p>æŸ¥çœ‹type<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(train[<span class="string">"ID"</span>].dtype)</span><br><span class="line"><span class="comment"># object</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ– train["ID"].dtypes</span></span><br></pre></td></tr></table></figure></p>
<h4 id="4-3-è½¬æ¢type"><a href="#4-3-è½¬æ¢type" class="headerlink" title="4.3 è½¬æ¢type"></a>4.3 è½¬æ¢type</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ³•ä¸€</span></span><br><span class="line">train[<span class="string">"ID"</span>] = train[<span class="string">"ID"</span>].astype(np.int32)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³•äºŒ</span></span><br><span class="line">train = train.astype(&#123;<span class="string">"user_age"</span>: <span class="string">"float64"</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å°†å› ç¼ºå¤±å€¼è€Œæˆä¸ºobjectçš„å˜é‡è½¬æ¢ä¸ºfloat</span></span><br><span class="line"><span class="keyword">for</span> col <span class="keyword">in</span> X_train1.columns[X_train1.dtypes==<span class="string">"object"</span>]:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        X_train1 = X_train1.astype(&#123;col: <span class="string">"float64"</span>&#125;)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="5-PythonäºŒç»´åˆ—è¡¨åˆå§‹åŒ–"><a href="#5-PythonäºŒç»´åˆ—è¡¨åˆå§‹åŒ–" class="headerlink" title="5. PythonäºŒç»´åˆ—è¡¨åˆå§‹åŒ–"></a>5. PythonäºŒç»´åˆ—è¡¨åˆå§‹åŒ–</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[[<span class="number">0</span>]*n <span class="keyword">for</span> _ <span class="keyword">in</span> range(m)] <span class="comment"># m*nçš„äºŒç»´åˆ—è¡¨</span></span><br></pre></td></tr></table></figure>
<h3 id="6-æŸ¥çœ‹åˆ—è¡¨ä¸­æœ€å°å€¼æ‰€åœ¨ä½ç½®-ç´¢å¼•"><a href="#6-æŸ¥çœ‹åˆ—è¡¨ä¸­æœ€å°å€¼æ‰€åœ¨ä½ç½®-ç´¢å¼•" class="headerlink" title="6. æŸ¥çœ‹åˆ—è¡¨ä¸­æœ€å°å€¼æ‰€åœ¨ä½ç½®(ç´¢å¼•)"></a>6. æŸ¥çœ‹åˆ—è¡¨ä¸­æœ€å°å€¼æ‰€åœ¨ä½ç½®(ç´¢å¼•)</h3><ul>
<li>ç¬¬ä¸€ä¸ªä½ç½® <code>listA.index(min(listA))</code> ï¼›</li>
<li>æ‰€æœ‰ä½ç½®ï¼š<code>[i for i,v in enumerate(listA) if v == min(listA)]</code></li>
</ul>
<h3 id="7-è¾“å‡º"><a href="#7-è¾“å‡º" class="headerlink" title="7. è¾“å‡º"></a>7. è¾“å‡º</h3><blockquote>
<p>å‚è€ƒï¼š<br><a href="https://www.runoob.com/w3cnote/python3-print-func-b.html" target="_blank" rel="noopener">https://www.runoob.com/w3cnote/python3-print-func-b.html</a><br><a href="https://www.cnblogs.com/penphy/p/10028546.html" target="_blank" rel="noopener">https://www.cnblogs.com/penphy/p/10028546.html</a><br><a href="https://www.cnblogs.com/lovejh/p/9201219.html" target="_blank" rel="noopener">https://www.cnblogs.com/lovejh/p/9201219.html</a></p>
</blockquote>
<p>ç®€å•çš„è¾“å‡ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;print(<span class="string">'My name is'</span>, <span class="string">'John'</span>)</span><br><span class="line">My name <span class="keyword">is</span> John</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;student = (<span class="number">30</span>,<span class="string">"University of Oxford"</span>,<span class="string">"1 High Street, London, W1 1PP"</span>, <span class="string">"John Cameron"</span>)</span><br><span class="line">&gt;&gt;&gt;print(student[<span class="number">3</span>]+ <span class="string">", "</span>+student[<span class="number">1</span>] + <span class="string">", "</span> + student[<span class="number">2</span>] + <span class="string">","</span> + str(student[<span class="number">0</span>]))</span><br><span class="line">John Cameron, University of Oxford, <span class="number">1</span> High Street, London, W1 <span class="number">1</span>PP,<span class="number">30</span></span><br></pre></td></tr></table></figure>
<p>printä¸æ¢è¡Œï¼š</p>
<p>åœ¨ Python ä¸­ print é»˜è®¤æ˜¯æ¢è¡Œçš„:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">3</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> (i)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>è¦æƒ³ä¸æ¢è¡Œåº”è¯¥å†™æˆ <strong>print(i, end = â€˜â€™ )</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">6</span>):</span><br><span class="line"><span class="meta">... </span>    print(i, end=<span class="string">" "</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>
<h4 id="7-1-ç”¨æ³•"><a href="#7-1-ç”¨æ³•" class="headerlink" title="7.1 %ç”¨æ³•"></a>7.1 %ç”¨æ³•</h4><p>æ”¯æŒå‚æ•°æ ¼å¼åŒ–ï¼Œä¸ C è¯­è¨€çš„ printf ç±»ä¼¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;print(<span class="string">'Hello, %s. Your age is %d.'</span> % (<span class="string">'Johon'</span>, <span class="number">20</span>))</span><br><span class="line">Hello, Johon. Your age <span class="keyword">is</span> <span class="number">20.</span></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;str = <span class="string">"the length of (%s) is %d"</span> %(<span class="string">'runoob'</span>,len(<span class="string">'runoob'</span>))</span><br><span class="line">&gt;&gt;&gt;print(str)</span><br><span class="line">the length of (runoob) <span class="keyword">is</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>
<p>pythonå­—ç¬¦ä¸²æ ¼å¼åŒ–ç¬¦å·:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">ç¬¦   å·</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">%c</td>
<td style="text-align:left">æ ¼å¼åŒ–å­—ç¬¦åŠå…¶ASCIIç </td>
</tr>
<tr>
<td style="text-align:left">%s</td>
<td style="text-align:left">æ ¼å¼åŒ–å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td style="text-align:left">%d</td>
<td style="text-align:left">æ ¼å¼åŒ–æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:left">%u</td>
<td style="text-align:left">æ ¼å¼åŒ–æ— ç¬¦å·æ•´å‹</td>
</tr>
<tr>
<td style="text-align:left">%o</td>
<td style="text-align:left">æ ¼å¼åŒ–æ— ç¬¦å·å…«è¿›åˆ¶æ•°</td>
</tr>
<tr>
<td style="text-align:left">%x</td>
<td style="text-align:left">æ ¼å¼åŒ–æ— ç¬¦å·åå…­è¿›åˆ¶æ•°</td>
</tr>
<tr>
<td style="text-align:left">%X</td>
<td style="text-align:left">æ ¼å¼åŒ–æ— ç¬¦å·åå…­è¿›åˆ¶æ•°ï¼ˆå¤§å†™ï¼‰</td>
</tr>
<tr>
<td style="text-align:left">%f</td>
<td style="text-align:left">æ ¼å¼åŒ–æµ®ç‚¹æ•°å­—ï¼Œå¯æŒ‡å®šå°æ•°ç‚¹åçš„ç²¾åº¦</td>
</tr>
<tr>
<td style="text-align:left">%e</td>
<td style="text-align:left">ç”¨ç§‘å­¦è®¡æ•°æ³•æ ¼å¼åŒ–æµ®ç‚¹æ•°</td>
</tr>
<tr>
<td style="text-align:left">%E</td>
<td style="text-align:left">ä½œç”¨åŒ%eï¼Œç”¨ç§‘å­¦è®¡æ•°æ³•æ ¼å¼åŒ–æµ®ç‚¹æ•°</td>
</tr>
<tr>
<td style="text-align:left">%g</td>
<td style="text-align:left">%få’Œ%eçš„ç®€å†™</td>
</tr>
<tr>
<td style="text-align:left">%G</td>
<td style="text-align:left">%f å’Œ %E çš„ç®€å†™</td>
</tr>
<tr>
<td style="text-align:left">%p</td>
<td style="text-align:left">ç”¨åå…­è¿›åˆ¶æ•°æ ¼å¼åŒ–å˜é‡çš„åœ°å€</td>
</tr>
</tbody>
</table>
</div>
<p>æ ¼å¼åŒ–æ“ä½œç¬¦è¾…åŠ©æŒ‡ä»¤:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">ç¬¦å·</th>
<th style="text-align:left">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">å®šä¹‰å®½åº¦æˆ–è€…å°æ•°ç‚¹ç²¾åº¦</td>
</tr>
<tr>
<td style="text-align:left">-</td>
<td style="text-align:left">ç”¨åšå·¦å¯¹é½</td>
</tr>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">åœ¨æ­£æ•°å‰é¢æ˜¾ç¤ºåŠ å·( + )</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;sp&gt;</code></td>
<td style="text-align:left">åœ¨æ­£æ•°å‰é¢æ˜¾ç¤ºç©ºæ ¼</td>
</tr>
<tr>
<td style="text-align:left">#</td>
<td style="text-align:left">åœ¨å…«è¿›åˆ¶æ•°å‰é¢æ˜¾ç¤ºé›¶(â€˜0â€™)ï¼Œåœ¨åå…­è¿›åˆ¶å‰é¢æ˜¾ç¤ºâ€™0xâ€™æˆ–è€…â€™0Xâ€™(å–å†³äºç”¨çš„æ˜¯â€™xâ€™è¿˜æ˜¯â€™Xâ€™)</td>
</tr>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">æ˜¾ç¤ºçš„æ•°å­—å‰é¢å¡«å……â€™0â€™è€Œä¸æ˜¯é»˜è®¤çš„ç©ºæ ¼</td>
</tr>
<tr>
<td style="text-align:left">%</td>
<td style="text-align:left">â€˜%%â€™è¾“å‡ºä¸€ä¸ªå•ä¸€çš„â€™%â€™</td>
</tr>
<tr>
<td style="text-align:left">(var)</td>
<td style="text-align:left">æ˜ å°„å˜é‡(å­—å…¸å‚æ•°)</td>
</tr>
<tr>
<td style="text-align:left">m.n.</td>
<td style="text-align:left">m æ˜¯æ˜¾ç¤ºçš„æœ€å°æ€»å®½åº¦,n æ˜¯å°æ•°ç‚¹åçš„ä½æ•°(å¦‚æœå¯ç”¨çš„è¯)</td>
</tr>
</tbody>
</table>
</div>
<h5 id="7-1-1-æ ¼å¼åŒ–è¾“å‡ºæ•´æ•°"><a href="#7-1-1-æ ¼å¼åŒ–è¾“å‡ºæ•´æ•°" class="headerlink" title="7.1.1 æ ¼å¼åŒ–è¾“å‡ºæ•´æ•°"></a>7.1.1 æ ¼å¼åŒ–è¾“å‡ºæ•´æ•°</h5><p><strong>%x</strong> â€”- hex åå…­è¿›åˆ¶<br><strong>%d</strong> â€”- dec åè¿›åˆ¶<br><strong>%o</strong> â€”- oct å…«è¿›åˆ¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;nHex = <span class="number">0xFF</span></span><br><span class="line">&gt;&gt;&gt;print(<span class="string">"nHex = %x,nDec = %d,nOct = %o"</span> %(nHex,nHex,nHex))</span><br><span class="line">nHex = ff,nDec = <span class="number">255</span>,nOct = <span class="number">377</span></span><br></pre></td></tr></table></figure>
<h5 id="7-1-2-æ ¼å¼åŒ–è¾“å‡ºæµ®ç‚¹æ•°"><a href="#7-1-2-æ ¼å¼åŒ–è¾“å‡ºæµ®ç‚¹æ•°" class="headerlink" title="7.1.2 æ ¼å¼åŒ–è¾“å‡ºæµ®ç‚¹æ•°"></a>7.1.2 æ ¼å¼åŒ–è¾“å‡ºæµ®ç‚¹æ•°</h5><p><strong>%f</strong>  â€”- ä¿ç•™å°æ•°ç‚¹åé¢å…­ä½æœ‰æ•ˆæ•°å­—<br><strong>%.3f</strong>ï¼Œä¿ç•™3ä½å°æ•°ä½</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;pi = <span class="number">3.141592653</span>  </span><br><span class="line">&gt;&gt;&gt;print(<span class="string">'%10.3f'</span> % pi) <span class="comment">#å­—æ®µå®½10ï¼Œç²¾åº¦3 (æ•´ä¸ªæ•°åŒ…æ‹¬å°æ•°ç‚¹åçš„ä½æ•°ä¸€å…±ä¸º10ä½) </span></span><br><span class="line">     <span class="number">3.142</span>  </span><br><span class="line">&gt;&gt;&gt;print(<span class="string">"pi = %.*f"</span> % (<span class="number">3</span>,pi)) <span class="comment">#ç”¨*ä»åé¢çš„å…ƒç»„ä¸­è¯»å–å­—æ®µå®½åº¦æˆ–ç²¾åº¦  </span></span><br><span class="line">pi = <span class="number">3.142</span>  </span><br><span class="line">&gt;&gt;&gt;print(<span class="string">'%010.3f'</span> % pi) <span class="comment">#ç”¨0å¡«å……ç©ºç™½  </span></span><br><span class="line"><span class="number">000003.142</span>  </span><br><span class="line">&gt;&gt;&gt;print(<span class="string">'%-10.3f'</span> % pi) <span class="comment">#å·¦å¯¹é½  </span></span><br><span class="line"><span class="number">3.142</span>       </span><br><span class="line">&gt;&gt;&gt;print(<span class="string">'%+f'</span> % pi) <span class="comment">#åœ¨æ­£æ•°å‰é¢æ˜¾ç¤ºåŠ å·( + )</span></span><br><span class="line">+<span class="number">3.141593</span></span><br></pre></td></tr></table></figure>
<h5 id="7-1-3-æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²"><a href="#7-1-3-æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²" class="headerlink" title="7.1.3 æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²"></a>7.1.3 æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²</h5><p><strong>%s</strong><br><strong>%10s</strong> â€”- å³å¯¹é½ï¼Œå ä½ç¬¦10ä½<br><strong>%-10s</strong> â€”- å·¦å¯¹é½ï¼Œå ä½ç¬¦10ä½<br><strong>%.2s</strong> â€”- æˆªå–2ä½å­—ç¬¦ä¸²<br><strong>%10.2s</strong> â€”-10ä½å ä½ç¬¦ï¼Œæˆªå–ä¸¤ä½å­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># å­—ç¬¦ä¸²è¾“å‡º</span></span><br><span class="line">hello world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%20s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># å³å¯¹é½ï¼Œå–20ä½ï¼Œä¸å¤Ÿåˆ™è¡¥ä½</span></span><br><span class="line">         hello world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%-20s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># å·¦å¯¹é½ï¼Œå–20ä½ï¼Œä¸å¤Ÿåˆ™è¡¥ä½</span></span><br><span class="line">hello world         </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%.2s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># å–2ä½</span></span><br><span class="line">he</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%10.2s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># å³å¯¹é½ï¼Œå–2ä½</span></span><br><span class="line">        he</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%-10.2s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># å·¦å¯¹é½ï¼Œå–2ä½</span></span><br><span class="line">he</span><br></pre></td></tr></table></figure>
<h4 id="7-2-formatç”¨æ³•"><a href="#7-2-formatç”¨æ³•" class="headerlink" title="7.2 formatç”¨æ³•"></a>7.2 formatç”¨æ³•</h4><p>ç›¸å¯¹åŸºæœ¬æ ¼å¼åŒ–è¾“å‡ºé‡‡ç”¨â€˜%â€™çš„æ–¹æ³•ï¼Œformat()åŠŸèƒ½æ›´å¼ºå¤§ï¼Œè¯¥å‡½æ•°æŠŠå­—ç¬¦ä¸²å½“æˆä¸€ä¸ªæ¨¡æ¿ï¼Œé€šè¿‡ä¼ å…¥çš„å‚æ•°è¿›è¡Œæ ¼å¼åŒ–ï¼Œå¹¶ä¸”ä½¿ç”¨å¤§æ‹¬å·â€˜{}â€™ä½œä¸ºç‰¹æ®Šå­—ç¬¦ä»£æ›¿â€˜%â€™</p>
<p>ä½ç½®åŒ¹é…</p>
<p><strong>ï¼ˆ1ï¼‰ä¸å¸¦ç¼–å·ï¼Œå³â€œ{}â€</strong><br><strong>ï¼ˆ2ï¼‰å¸¦æ•°å­—ç¼–å·ï¼Œå¯è°ƒæ¢é¡ºåºï¼Œå³â€œ{1}â€ã€â€œ{2}â€</strong><br><strong>ï¼ˆ3ï¼‰å¸¦å…³é”®å­—ï¼Œå³â€œ{a}â€ã€â€œ{tom}â€</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;&#125; &#123;&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))  <span class="comment"># ä¸å¸¦å­—æ®µ</span></span><br><span class="line">hello world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;0&#125; &#123;1&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))  <span class="comment"># å¸¦æ•°å­—ç¼–å·</span></span><br><span class="line">hello world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;0&#125; &#123;1&#125; &#123;0&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))  <span class="comment"># æ‰“ä¹±é¡ºåº</span></span><br><span class="line">hello world hello</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;a&#125; &#123;tom&#125; &#123;a&#125;'</span>.format(tom=<span class="string">'hello'</span>,a=<span class="string">'world'</span>))  <span class="comment"># å¸¦å…³é”®å­—</span></span><br><span class="line">world hello world</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;&#125; is &#123;:.2f&#125;'</span>.format(<span class="number">1.123</span>,<span class="number">1.123</span>))  <span class="comment"># å–2ä½å°æ•°</span></span><br><span class="line"><span class="number">1.123</span> <span class="keyword">is</span> <span class="number">1.12</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;:,&#125;'</span>.format(<span class="number">1234567890</span>)</span><br><span class="line"><span class="string">'1,234,567,890'</span></span><br></pre></td></tr></table></figure>
<p>æƒ³è¾“å‡ºï¼šThe percentage of female students is 68.85%.ğŸ‘‡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">str_student = <span class="string">"The percentage of female students is &#123;:.2f&#125;%."</span>.format(<span class="number">68.8543</span>)</span><br><span class="line">print(str_student)</span><br></pre></td></tr></table></figure>
<p>ç™¾åˆ†æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>points = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>total = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Correct answers: &#123;:.2%&#125;'</span>.format(points/total)</span><br><span class="line"><span class="string">'Correct answers: 50.00%'</span></span><br></pre></td></tr></table></figure>
<h3 id="8-åˆ‡ç‰‡æ“ä½œ"><a href="#8-åˆ‡ç‰‡æ“ä½œ" class="headerlink" title="8. åˆ‡ç‰‡æ“ä½œ"></a>8. åˆ‡ç‰‡æ“ä½œ</h3><blockquote>
<p>å‚è€ƒ <a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017269965565856" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/1016959663602400/1017269965565856</a></p>
</blockquote>
<p><span style="color:blue">Pythonåˆ‡ç‰‡æ“ä½œå¯ä½œç”¨äºlist (åŒ…æ‹¬tuple, string)</span></p>
<p>å¯ä»¥æƒ³è±¡ä¸ºæ¯ä¸ªä½ç½®æœ‰ä¸¤ä¸ªç¼–å·ï¼š</p>
<p><img src="/2019/06/27/basic-python-type/1605268940795.png" alt="1605268940795"></p>
<p><strong><code>b = a[i:j]</code></strong> - è¡¨ç¤ºå¤åˆ¶ a[i] åˆ° a[j-1]ï¼Œä»¥ç”Ÿæˆæ–°çš„listå¯¹è±¡ã€‚ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line">a[<span class="number">1</span>:<span class="number">3</span>] <span class="comment"># [1,2]</span></span><br><span class="line">a[:<span class="number">-2</span>] <span class="comment"># [0,1,2,3,4,5,6,7]</span></span><br><span class="line">a[<span class="number">-2</span>:<span class="number">-1</span>] <span class="comment"># [8]</span></span><br><span class="line">a[:<span class="number">2</span>] <span class="comment"># [0,1]ï¼Œå‰2ä¸ªæ•°</span></span><br><span class="line">a[<span class="number">-2</span>:] <span class="comment">#[8,9]ï¼Œå2ä¸ªæ•°</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å½“ i ç¼ºçœæ—¶ï¼Œé»˜è®¤ä¸º0ï¼Œå³ a[:3] ç­‰ä»·äº a[0:3]</li>
<li>å½“ j ç¼ºçœæ—¶ï¼Œé»˜è®¤ä¸º len(a)ï¼Œå³ a[1:] ç­‰ä»·äº a[1:len(a)]</li>
<li>å½“ i, j éƒ½ç¼ºçœæ—¶ï¼Œ<strong>a[:] å°±ç›¸å½“äºå®Œæ•´å¤åˆ¶ä¸€ä»½ a</strong> (ç­‰ä»·äº a.copy() æµ…æ‹·è´ï¼Œ<span style="color:red">æ³¨ï¼šæ›´å¤šå…³äºæµ…æ‹·è´ä¸æ·±æ‹·è´çš„å†…å®¹è§æˆ‘çš„å¦ä¸€ç¯‡<a href="https://qypx.github.io/2020/11/15/Python%E7%9B%B4%E6%8E%A5%E8%B5%8B%E5%80%BC%E3%80%81%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%BB%A5%E5%8F%8A%E5%88%87%E7%89%87">åšå®¢</a></span>)</li>
</ul>
<p><strong><code>b = a[i:j:s]</code></strong> - å…¶ä¸­ i ä¸ j ä¸ä¸Šé¢ä¸€æ ·ï¼Œs è¡¨ç¤ºæ­¥è¿›ï¼Œç¼ºçœæ—¶é»˜è®¤ä¸º1.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line">a[::<span class="number">-1</span>] <span class="comment"># [9,8,7,6,5,4,3,2,1,0]</span></span><br><span class="line">a[::<span class="number">-2</span>] <span class="comment"># [9,7,5,3,1]</span></span><br><span class="line">a[:<span class="number">5</span>:<span class="number">2</span>] <span class="comment"># å‰5ä¸ªæ•°ï¼Œæ¯ä¸¤ä¸ªå–ä¸€ä¸ªï¼Œ[0,2,4]</span></span><br><span class="line">a[::<span class="number">5</span>] <span class="comment">#æ‰€æœ‰æ•°ï¼Œæ¯5ä¸ªå–ä¸€ä¸ªï¼Œ[0,5]</span></span><br></pre></td></tr></table></figure>
<ul>
<li>a[i:j:1] ç­‰ä»·äº a[i:j]</li>
<li>å½“ s&lt;0 æ—¶ï¼ˆstepå°äº0ï¼‰ï¼Œi ç¼ºçœæ—¶é»˜è®¤ä¸º-1ï¼Œj ç¼ºçœæ—¶é»˜è®¤ä¸º -len(a) -1</li>
<li><strong>a[::-1]</strong> ç­‰ä»·äº a[-1:-len(a)-1:-1]ï¼Œå³ä»æœ€åä¸€ä¸ªå…ƒç´ få¤åˆ¶åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå³<strong>å€’åº</strong></li>
</ul>
<hr>
<p>å¦ï¼šdataframeä¸­ï¼š</p>
<ul>
<li><p>è‹¥æƒ³å–ç¬¬2åˆ—åˆ°ç¬¬4åˆ—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df.iloc[:, <span class="number">2</span>:<span class="number">5</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>è‹¥æƒ³å–ç¬¬6åˆ—ã€ç¬¬10åˆ—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df.iloc[:, [<span class="number">6</span>,<span class="number">10</span>]]</span><br></pre></td></tr></table></figure>
</li>
<li><p>è‹¥æƒ³å–ç¬¬2åˆ—åˆ°ç¬¬4åˆ—ï¼Œä¸ç¬¬6åˆ—ã€ç¬¬10åˆ—ï¼š</p>
<blockquote>
<p>å‚è€ƒ <a href="https://stackoverflow.com/questions/43206786/how-to-slice-continuous-and-discontinuous-index-in-pandas" target="_blank" rel="noopener">How to slice continuous and discontinuous index in pandas? - Stack Overflow</a></p>
</blockquote>
<p>ä½¿ç”¨numpy.rï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">df.iloc[:, np.r_[<span class="number">2</span>:<span class="number">5</span>,<span class="number">6</span>,<span class="number">10</span>]]</span><br></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>test blog</title>
    <url>/2019/06/26/test-blog/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸€ç¯‡æµ‹è¯•æ–‡ç« .</p>
]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>Python</tag>
      </tags>
  </entry>
</search>
